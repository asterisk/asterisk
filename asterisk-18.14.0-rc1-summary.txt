                                Release Summary

                              asterisk-18.14.0-rc1

                                Date: 2022-07-28

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-18.13.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                      Testers               Reporters                
   16 Naveen Albert                                  15 N A                   
   4 George Joseph                                   3 George Joseph          
   2 Boris P. Korzun                                 2 Kevin Harwell          
   1 Morvai Szabolcs                                 2 Boris P. Korzun        
   1 Michael Neuhauser                               1 Sergey V. Lobanov      
   1 Kevin Harwell                                   1 Michael Neuhauser      
   1 Sam Banks                                       1 Sam Banks              
   1 Sean Bright                                     1 José Lopes             
   1 Trevor Peirce                                   1 Sean Bright            
   1 Asterisk Development Team                       1 Michael Neuhauser      
   1 Joshua C. Colp                                  1 Joshua C. Colp         
   1 Jose Lopes                                      1 Dmitry Melekhov        
   1 Mike Bradeen                                    1 Morvai Szabolcs        
   1 Stanislav Abramenkov                            1 Stanislav Abramenkov   
   1 Sergey V. Lobanov                               1 Trevor Peirce          

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Improvement

    Category: General

   ASTERISK-30089: general: fix typos
   Reported by: N A
     * [0fe1a581e5] Naveen Albert -- general: Fix various typos.

    Category: Resources/res_geolocation

   ASTERISK-30127: Create core Geolocation capability for Asterisk
   Reported by: George Joseph
     * [f491355384] George Joseph -- Geolocation: Core Capability Preview

    Category: Resources/res_pjsip_geolocation

   ASTERISK-30128: Create PJSIP interface module for Geolocation
   Reported by: George Joseph
     * [cdbd973ecd] George Joseph -- Geolocation: chan_pjsip Capability
       Preview

    Category: pjproject/pjsip

   ASTERISK-30050: Upgrade Asterisk to bundled pjproject 2.12.1
   Reported by: Stanislav Abramenkov
     * [2d500a090f] Stanislav Abramenkov -- pjsip: Upgrade bundled version to
       pjproject 2.12.1

  Bug

    Category: Applications/app_confbridge

   ASTERISK-29907: res_pjsip, app_confbridge: Video call through ConfBridge
   with normal endpoints causes infinite loop/crash
   Reported by: N A
     * [a4266030ce] Naveen Albert -- app_confbridge: Always set minimum video
       update interval.

    Category: Applications/app_dial

   ASTERISK-29989: app_dial, chan_dahdi: DIALSTATUS is inconsistent for busy
   Reported by: N A
     * [8ce1b7db3c] Naveen Albert -- app_dial: Fix dial status regression.
   ASTERISK-30115: app_dial: Allow hook flashes to propogate on outbound
   dials
   Reported by: N A
     * [0a63692716] Naveen Albert -- app_dial: Propagate outbound hook
       flashes.

    Category: CEL/cel_odbc

   ASTERISK-30096: cel_odbc: Column type 9 (field 'cdr:cel:eventtime') is
   unsupported at this time
   Reported by: Morvai Szabolcs
     * [182fee79eb] Morvai Szabolcs -- cel_odbc & res_config_odbc: Add
       support for SQL_DATETIME field type

    Category: Channels/chan_dahdi

   ASTERISK-29991: chan_dahdi, callerid: Caller ID does not honor
   presentation
   Reported by: N A
     * [8fddef679c] Naveen Albert -- chan_dahdi: Fix buggy and missing Caller
       ID parameters

    Category: Channels/chan_iax2

   ASTERISK-30083: chan_iax2: Optional dependency on openssl/res_crypto is
   now mandatory
   Reported by: Dmitry Melekhov
     * [1d3d6e49db] Naveen Albert -- chan_iax2: Allow compiling without
       OpenSSL.

    Category: Configs/Samples

   ASTERISK-30126: Spelling mistake in configs/samples/queues.conf.sample
   Reported by: Sam Banks
     * [56c6d76a45] Sam Banks -- queues.conf.sample: Correction of typo

    Category: Core/BuildSystem

   ASTERISK-30029: build: Git security vulnerability fix is sad with our
   accessing git as root during "make install"
   Reported by: Joshua C. Colp
     * [7a82919256] Mike Bradeen -- Makefile: Avoid git-make user conflict

    Category: Core/CallerID

   ASTERISK-29991: chan_dahdi, callerid: Caller ID does not honor
   presentation
   Reported by: N A
     * [8fddef679c] Naveen Albert -- chan_dahdi: Fix buggy and missing Caller
       ID parameters

    Category: Core/ManagerInterface

   ASTERISK-30137: manager: Global disabled event filtered is incomplete
   Reported by: N A
     * [4580ac7ded] Naveen Albert -- manager: Fix incomplete filtering of AMI
       events.

    Category: Features

   ASTERISK-30123: features: Update automixmon documentation to reflect
   reality
   Reported by: Trevor Peirce
     * [dbace3334d] Trevor Peirce -- features: Update documentation for
       automon and automixmon

    Category: General

   ASTERISK-29905: OSX: bininstall launchd issue on cross-platfrom build
   Reported by: Sergey V. Lobanov
     * [133ecb346c] Sergey V. Lobanov -- build: fix bininstall launchd issue
       on cross-platform build
   ASTERISK-30001: db: Removing nonexistent entries shows "Database entry
   removed"
   Reported by: N A
     * [c9955d5fcd] Naveen Albert -- db: Notify user if deleted DB entry
       didn't exist.
   ASTERISK-29822: cli: Typing \? freezes the CLI permanently with remote
   console
   Reported by: N A
     * [57d66966a1] Naveen Albert -- cli: Fix CLI blocking forever on
       terminating backslash

    Category: PBX/General

   ASTERISK-29966: pbx_variables: ast_str_strlen can be wrong
   Reported by: N A
     * [a2799554d2] Naveen Albert -- pbx_functions.c: Manually update ast_str
       strlen.
   ASTERISK-30075: say: Abort if channel hangs up during playback
   Reported by: N A
     * [93644fca59] Naveen Albert -- say: Abort play loop if caller hangs up.

    Category: PBX/pbx_lua

   ASTERISK-30117: pbx_lua: Remove compiler warnings
   Reported by: Boris P. Korzun
     * [d6ff560f20] Boris P. Korzun -- pbx_lua: Remove compiler warnings

    Category: Resources/General

   ASTERISK-30101: res_prometheus: Optional load
   res_pjsip_outbound_registration.so
   Reported by: Boris P. Korzun
     * [22be2a2857] Boris P. Korzun -- res_prometheus: Optional load
       res_pjsip_outbound_registration.so

    Category: Resources/res_calendar_icalendar

   ASTERISK-30106: res_calendar_icalendar: Microsoft online ICS calendars no
   longer work
   Reported by: N A
     * [53d921a199] Naveen Albert -- res_calendar_icalendar: Send user agent
       in request.

    Category: Resources/res_geolocation

   ASTERISK-30138: Compile failure in res_geolocation/geoloc_eprofile.c when
   optimization is enabled
   Reported by: George Joseph
     * [fcc3e7fac6] George Joseph -- geoloc_eprofile.c: Fix setting of
       loc_src in set_loc_src()

    Category: Resources/res_http_websocket

   ASTERISK-30099: test_aeap_transport: transport_connect_fail sporadically
   causes failure
   Reported by: Kevin Harwell
     * [512c711716] Joshua C. Colp -- websocket / aeap: Handle poll()
       interruptions better.

    Category: Resources/res_pjsip

   ASTERISK-30109: res_pjsip: no contact-status AMI event on register of
   prune-on-boot contact that uses the same URI as before Asterisk restart
   Reported by: Michael Neuhauser
     * [75226a4b02] Michael Neuhauser -- res_pjsip: delay contact pruning on
       Asterisk start
   ASTERISK-30072: res_pjsip: allow TLS verification of wildcard cert-bearing
   servers
   Reported by: Kevin Harwell
     * [0ddbf6bc45] Kevin Harwell -- res_pjsip: allow TLS verification of
       wildcard cert-bearing servers

    Category: Tests/General

   ASTERISK-30099: test_aeap_transport: transport_connect_fail sporadically
   causes failure
   Reported by: Kevin Harwell
     * [512c711716] Joshua C. Colp -- websocket / aeap: Handle poll()
       interruptions better.

  New Feature

    Category: Channels/chan_dahdi

   ASTERISK-30000: chan_dahdi: Add POLARITY function
   Reported by: N A
     * [a78a82016d] Naveen Albert -- chan_dahdi: Add POLARITY function.

    Category: Channels/chan_pjsip

   ASTERISK-29999: pjsip: Get information from 200 OK INVITE reply headers
   Reported by: José Lopes
     * [b29a0e08a3] Jose Lopes -- res_pjsip_header_funcs: Add functions
       PJSIP_RESPONSE_HEADER and PJSIP_RESPONSE_HEADERS

    Category: Core/AstDB

   ASTERISK-30136: db: Add AMI action to retrieve all keys beginning with a
   prefix
   Reported by: N A
     * [7bdab4e206] Naveen Albert -- db: Add AMI action to retrieve DB keys
       at prefix.

    Category: PBX/General

   ASTERISK-30061: pbx: Add pbx helper application
   Reported by: N A
     * [6720caa29c] Naveen Albert -- pbx: Add helper function to execute
       applications.

    Category: Resources/res_clioriginate

   ASTERISK-30062: cli: Add CLI command to execute a dialplan app
   Reported by: N A
     * [4adbdfde06] Naveen Albert -- res_cliexec: Add dialplan exec CLI
       command.

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author               | Summary                            |
   |------------+----------------------+------------------------------------|
   | 57c4dc1721 | Asterisk Development | Update CHANGES and UPGRADE.txt for |
   |            | Team                 | 18.14.0                            |
   |------------+----------------------+------------------------------------|
   | 35ebaed94d | Sean Bright          | pbx.c: Simplify ast_context memory |
   |            |                      | management.                        |
   |------------+----------------------+------------------------------------|
   | 1ed15e1815 | George Joseph        | Geolocation: Base Asterisk Prereqs |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 .lastclean                                                                     |    1
 .version                                                                       |    1
 ChangeLog                                                                      |101208 ----------
 asterisk-18.13.0-summary.html                                                  |  149
 asterisk-18.13.0-summary.txt                                                   |  395
 b/CHANGES                                                                      |   49
 b/Makefile                                                                     |   28
 b/Makefile.rules                                                               |   15
 b/apps/app_confbridge.c                                                        |    6
 b/apps/app_dial.c                                                              |   15
 b/apps/app_disa.c                                                              |    6
 b/apps/app_playback.c                                                          |    4
 b/build_tools/make_version                                                     |    7
 b/cel/cel_odbc.c                                                               |    1
 b/channels/chan_dahdi.c                                                        |  131
 b/channels/chan_iax2.c                                                         |    4
 b/channels/iax2/include/iax2.h                                                 |    2
 b/channels/sig_analog.c                                                        |   27
 b/channels/sig_analog.h                                                        |    2
 b/configs/samples/geolocation.conf.sample                                      |  264
 b/configs/samples/iax.conf.sample                                              |    2
 b/configs/samples/pjsip.conf.sample                                            |   20
 b/configs/samples/queues.conf.sample                                           |    2
 b/contrib/ast-db-manage/config/versions/58e440314c2a_allow_wildcard_certs.py   |   29
 b/contrib/ast-db-manage/config/versions/7197536bb68d_geoloc_endpoint_params.py |   22
 b/funcs/func_logic.c                                                           |    4
 b/include/asterisk/astdb.h                                                     |   11
 b/include/asterisk/callerid.h                                                  |   51
 b/include/asterisk/config.h                                                    |   20
 b/include/asterisk/pbx.h                                                       |   39
 b/include/asterisk/res_geolocation.h                                           |  353
 b/include/asterisk/res_pjsip.h                                                 |   26
 b/include/asterisk/strings.h                                                   |   18
 b/include/asterisk/test.h                                                      |    2
 b/include/asterisk/xml.h                                                       |   23
 b/main/asterisk.c                                                              |   23
 b/main/bridge.c                                                                |    2
 b/main/bridge_channel.c                                                        |   18
 b/main/callerid.c                                                              |   98
 b/main/channel.c                                                               |    2
 b/main/config.c                                                                |   28
 b/main/datastore.c                                                             |    4
 b/main/db.c                                                                    |  124
 b/main/dial.c                                                                  |   10
 b/main/features.c                                                              |    7
 b/main/features_config.c                                                       |   26
 b/main/manager.c                                                               |   23
 b/main/pbx.c                                                                   |   97
 b/main/pbx_app.c                                                               |   25
 b/main/pbx_builtins.c                                                          |    9
 b/main/pbx_functions.c                                                         |    1
 b/main/pbx_variables.c                                                         |  127
 b/main/say.c                                                                   |   12
 b/main/utils.c                                                                 |   61
 b/main/xml.c                                                                   |    5
 b/makeopts.in                                                                  |    2
 b/pbx/pbx_lua.c                                                                |   17
 b/res/Makefile                                                                 |    5
 b/res/res_aeap/transport_websocket.c                                           |    7
 b/res/res_calendar_icalendar.c                                                 |    1
 b/res/res_cliexec.c                                                            |  160
 b/res/res_config_odbc.c                                                        |    1
 b/res/res_geolocation.c                                                        |  125
 b/res/res_geolocation.exports.in                                               |    6
 b/res/res_geolocation/eprofile_to_pidf.xslt                                    |  237
 b/res/res_geolocation/geoloc_civicaddr.c                                       |  151
 b/res/res_geolocation/geoloc_common.c                                          |   36
 b/res/res_geolocation/geoloc_config.c                                          |  641
 b/res/res_geolocation/geoloc_datastore.c                                       |  325
 b/res/res_geolocation/geoloc_dialplan.c                                        |  457
 b/res/res_geolocation/geoloc_doc.xml                                           |  235
 b/res/res_geolocation/geoloc_eprofile.c                                        | 1002
 b/res/res_geolocation/geoloc_gml.c                                             |  362
 b/res/res_geolocation/geoloc_private.h                                         |  168
 b/res/res_geolocation/pidf_lo_test.xml                                         |  312
 b/res/res_geolocation/pidf_to_eprofile.xslt                                    |  212
 b/res/res_http_websocket.c                                                     |   20
 b/res/res_mutestream.c                                                         |    2
 b/res/res_pjsip.c                                                              |   27
 b/res/res_pjsip/config_transport.c                                             |   31
 b/res/res_pjsip/pjsip_config.xml                                               |   30
 b/res/res_pjsip/pjsip_configuration.c                                          |   41
 b/res/res_pjsip/pjsip_transport_events.c                                       |  122
 b/res/res_pjsip_geolocation.c                                                  |  713
 b/res/res_pjsip_header_funcs.c                                                 |  254
 b/res/res_prometheus.c                                                         |   12
 b/res/res_stasis_snoop.c                                                       |    8
 b/res/res_tonedetect.c                                                         |    2
 b/tests/test_aeap_transport.c                                                  |   17
 b/tests/test_config.c                                                          |    4
 b/tests/test_strings.c                                                         |  137
 contrib/realtime/mysql/mysql_cdr.sql                                           |   41
 contrib/realtime/mysql/mysql_config.sql                                        | 1348
 contrib/realtime/mysql/mysql_voicemail.sql                                     |   35
 contrib/realtime/postgresql/postgresql_cdr.sql                                 |   45
 contrib/realtime/postgresql/postgresql_config.sql                              | 1460
 contrib/realtime/postgresql/postgresql_voicemail.sql                           |   39
 97 files changed, 7516 insertions(+), 104973 deletions(-)

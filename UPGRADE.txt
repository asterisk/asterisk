Information for Upgrading From Previous Asterisk Releases
=========================================================

PBX Core:

* The (very old and undocumented) ability to use BYEXTENSION for dialing
  instead of ${EXTEN} has been removed.

Command Line Interface:

* 'show channels concise', designed to be used by applications that will parse
  its output, previously used ':' characters to separate fields. However, some
  of those fields can easily contain that character, making the output not
  parseable. The delimiter has been changed to '!'.

Applications:

* In previous Asterisk releases, many applications would jump to priority n+101
  to indicate some kind of status or error condition.  This functionality was
  marked deprecated in Asterisk 1.2.  An option to disable it was provided with
  the default value set to 'on'.  The default value for the global priority
  jumping option is now 'off'.

* The applications Cut, Sort, DBGet, DBPut, SetCIDNum, SetCIDName, SetRDNIS,
  AbsoluteTimeout, DigitTimeout, ResponseTimeout, SetLanguage, GetGroupCount,
  and GetGroupMatchCount were all deprecated in version 1.2, and therefore have
  been removed in this version.  You should use the equivalent dialplan
  function in places where you have previously used one of these applications.

* The application SetVar has been renamed to Set.  The syntax SetVar was marked
  deprecated in version 1.2 and is no longer recognized in this version.

* app_read has been updated to use the newer options codes, using "skip" or
  "noanswer" will not work.  Use s or n.  Also there is a new feature i, for
  using indication tones, so typing in skip would give you unexpected results.

* OSPAuth is added to authenticate OSP tokens in in_bound call setup messages.

Manager:

* After executing the 'status' manager action, the "Status" manager events
  included the header "CallerID:" which was actually only the CallerID number,
  and not the full CallerID string.  This header has been renamed to
  "CallerIDNum".  For compatibility purposes, the CallerID parameter will remain
  until after the release of 1.4, when it will be removed.  Please use the time
  during the 1.4 release to make this transition.

Variables:

* The builtin variables ${CALLERID}, ${CALLERIDNAME}, ${CALLERIDNUM},
  ${CALLERANI}, ${DNID}, ${RDNIS}, ${DATETIME}, ${TIMESTAMP}, ${ACCOUNTCODE},
  and ${LANGUAGE} have all been deprecated in favor of their related dialplan
  functions.  You are encouraged to move towards the associated dialplan
  function, as these variables will be removed in a future release.

* The CDR-CSV variables uniqueid, userfield, and basing time on GMT are now 
  adjustable from cdr.conf, instead of recompiling.

* OSP applications exports several new variables, ${OSPINHANDLE},
  ${OSPOUTHANDLE}, ${OSPINTOKEN}, ${OSPOUTTOKEN}, ${OSPCALLING},
  ${OSPINTIMELIMIT}, and ${OSPOUTTIMELIMIT}

Functions:

* The function ${CHECK_MD5()} has been deprecated in favor of using an
  expression: $[${MD5(<string>)} = ${saved_md5}].

* The 'builtin' functions that used to be combined in pbx_functions.so are
  now built as separate modules. If you are not using 'autoload=yes' in your
  modules.conf file then you will need to explicitly load the modules that
  contain the functions you want to use.

* The ENUMLOOKUP() function with the 'c' option (for counting the number of records),
  but the lookup fails to match any records, the returned value will now be "0" instead of blank.

The IAX2 channel:

* The "mailboxdetail" option has been deprecated.  Previously, if this option
  was not enabled, the 2 byte MSGCOUNT information element would be set to all
  1's to indicate there there is some number of messages waiting.  With this
  option enabled, the number of new messages were placed in one byte and the
  number of old messages are placed in the other.  This is now the default
  (and the only) behavior.

The SIP channel:

* The "incominglimit" setting is replaced by the "call-limit" setting in sip.conf.

* OSP support code is removed from SIP channel to OSP applications. ospauth 
  option in sip.conf is removed to osp.conf as authpolicy. allowguest option
  in sip.conf cannot be set as osp anymore. 

Installation:

* On BSD systems, the installation directories have changed to more "FreeBSDish" directories. On startup, Asterisk will look for the main configuration in /usr/local/etc/asterisk/asterisk.conf
If you have an old installation, you might want to remove the binaries and move the configuration files to the new locations. The following directories are now default:
	ASTLIBDIR	/usr/local/lib/asterisk
	ASTVARLIBDIR	/usr/local/share/asterisk
	ASTETCDIR	/usr/local/etc/asterisk
	ASTBINDIR	/usr/local/bin/asterisk
	ASTSBINDIR	/usr/local/sbin/asterisk

Sounds:

* The phonetic sounds directory has been removed from the asterisk-sounds package
  because they are now included directly in Asterisk.  However, it is important to
  note that the phonetic sounds that existed in asterisk-sounds used a different
  naming convention than the sounds in Asterisk.  For example, instead of alpha.gsm
  and bravo.gsm, Asterisk has a_p.gsm and b_p.gsm.

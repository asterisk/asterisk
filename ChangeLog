2011-01-17  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.21 Released.

	* AST-2011-001: Stack buffer overflow in SIP channel driver

2010-05-17  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.20 Released

        * This is the last bug maintenance release for the 1.6.1 branch. For
          continued support please move to the 1.6.2 branch. This branch will
          continue to receive security related issues for one additional year.

2010-05-13  Leif Madsen <lmadsen@digium.com>
        
	* Asterisk 1.6.1.20-rc2 Released

        * This will be the last maintenance release in this branch. Please
          move to the latest 1.6.2.x release for continued issue support.
          See http://www.asterisk.org/asterisk-versions for more information.

2010-05-12 20:02 +0000 [r262802]  Paul Belanger <paul.belanger@polybeacon.com>

	* main/loader.c, main/cli.c, /: Merged revisions 262800 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r262800 | pabelanger | 2010-05-12 15:59:16 -0400 (Wed,
	  12 May 2010) | 8 lines Notify CLI when modules is loaded /
	  unloaded (closes issue #17308) Reported by: pabelanger Patches:
	  cli.modules.patch uploaded by pabelanger (license 224) Tested by:
	  pabelanger, russell ........

2010-05-12 18:07 +0000 [r262747]  David Vossel <dvossel@digium.com>

	* /, apps/app_meetme.c: Merged revisions 262744 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r262744 | dvossel | 2010-05-12 13:01:20 -0500 (Wed, 12 May 2010)
	  | 17 lines Merged revisions 262662 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r262662 | dvossel | 2010-05-12 12:00:04 -0500 (Wed, 12 May 2010)
	  | 11 lines fixes app_meetme dsp error We attempted to detect
	  silence after translating a frame from signed linear. This caused
	  a flooding of errors. To resolve this the code to detect silence
	  was moved before the translation. (closes issue #17133) Reported
	  by: jsdyer ........ ................

2010-05-12 16:29 +0000 [r262515-262658]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_privacy.c: Merged revisions 262656 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r262656 |
	  tilghman | 2010-05-12 11:23:26 -0500 (Wed, 12 May 2010) | 8 lines
	  Ensure the arguments are initialized. Also miscellaneous CG
	  cleanup. (closes issue #16576) Reported by: uxbod Patches:
	  20100505__issue16576.diff.txt uploaded by tilghman (license 14)
	  Tested by: uxbod ........

	* /, include/asterisk/causes.h: Merged revisions 262513 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r262513 | tilghman | 2010-05-11 16:25:05 -0500 (Tue, 11
	  May 2010) | 7 lines Move cause 200 to cause 26, as specified in
	  Q.850. Also cleanup the formatting and add a few more that seem
	  like good candidates. (closes issue #16157) Reported by: wimpy
	  ........

2010-05-11 20:02 +0000 [r262426]  Paul Belanger <paul.belanger@polybeacon.com>

	* pbx/pbx_config.c, /: Merged revisions 262419 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r262419 |
	  pabelanger | 2010-05-11 15:40:37 -0400 (Tue, 11 May 2010) | 8
	  lines Improve logging by displaying line number (closes issue
	  #16303) Reported by: dant Patches: issue16303.patch.v2 uploaded
	  by pabelanger (license 224) Tested by: dant, lmadsen, pabelanger
	  ........

2010-05-11 19:58 +0000 [r262424]  Jason Parker <jparker@digium.com>

	* /, res/Makefile: Merged revisions 262422 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r262422 | qwell | 2010-05-11 14:57:24 -0500 (Tue, 11 May 2010) |
	  18 lines Merged revisions 262421 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r262421 | qwell | 2010-05-11 14:55:42 -0500 (Tue, 11 May 2010) |
	  11 lines Use a less silly method for modifying a flex-generated
	  file. The sed syntax that was used wasn't actually valid, causing
	  some versions to choke. This is the method that is used in 1.6.x+
	  for similar changes. (closes issue #16696) Reported by: bklang
	  Patches: 16696-sedfix.diff uploaded by qwell (license 4) Tested
	  by: qwell ........ ................

2010-05-11 19:30 +0000 [r262416]  Paul Belanger <paul.belanger@polybeacon.com>

	* /, channels/chan_sip.c: Merged revisions 262414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r262414 |
	  pabelanger | 2010-05-11 15:26:17 -0400 (Tue, 11 May 2010) | 8
	  lines Improve logging information for misconfigured contexts
	  (closes issue #17238) Reported by: pprindeville Patches:
	  chan_sip-bug17238.patch uploaded by pprindeville (license 347)
	  Tested by: pprindeville ........

2010-05-11 17:25 +0000 [r262339]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /, Makefile.rules: Merged revisions 262330
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r262330 | tilghman | 2010-05-11 12:23:51 -0500
	  (Tue, 11 May 2010) | 9 lines Merged revisions 262321 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r262321 | tilghman | 2010-05-11 12:22:07 -0500 (Tue, 11
	  May 2010) | 2 lines Fix issue #17302 a slightly different way
	  (mad props to Qwell) ........ ................

2010-05-10 18:52 +0000 [r262238]  David Vossel <dvossel@digium.com>

	* /, channels/chan_console.c: Merged revisions 262236 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r262236 | dvossel | 2010-05-10 13:36:10 -0500 (Mon, 10 May 2010)
	  | 11 lines fixes crash in chan_console There is a race condition
	  between console_hangup() and start_stream(). It is possible for
	  console_hangup() to be called and then the stream thread to begin
	  after the hangup. To avoid this a check in start_stream() to make
	  sure the pvt-owner still exists while the pvt lock is held is
	  made. If the owner is gone that means the channel hung up and
	  start_stream should be aborted. ........

2010-05-10 16:38 +0000 [r262154]  Tilghman Lesher <tlesher@digium.com>

	* /, Makefile.rules: Merged revisions 262152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r262152 | tilghman | 2010-05-10 11:36:25 -0500 (Mon, 10 May 2010)
	  | 17 lines Merged revisions 262151 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r262151 | tilghman | 2010-05-10 11:34:21 -0500 (Mon, 10 May 2010)
	  | 10 lines Allow compilation on Mac OS X 10.4 (Tiger) (closes
	  issue #17297) Reported by: jcovert Patches:
	  20100506__issue17297.diff.txt uploaded by tilghman (license 14)
	  (closes issue #17302) Reported by: jcovert ........
	  ................

2010-05-09 02:17 +0000 [r261915-262104]  Tilghman Lesher <tlesher@digium.com>

	* autoconf/ast_ext_lib.m4, autoconf/ast_c_compile_check.m4,
	  autoconf/ast_c_define_check.m4, /, configure,
	  include/asterisk/autoconfig.h.in: Merged revisions 262102 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r262102 | tilghman | 2010-05-08 21:14:04 -0500 (Sat, 08
	  May 2010) | 5 lines Cleanup a bit more by getting rid of useless
	  version defines. Also make library detection use passed CFLAGS.
	  (closes issue #17309) Reported by: stuarth ........

	* /, configure, configure.ac: Merged revisions 262048 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r262048 | tilghman | 2010-05-07 21:40:01 -0500 (Fri, 07 May 2010)
	  | 2 lines Use CPPFLAGS to pass PTHREAD_CFLAGS for vpb only
	  ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 261913 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r261913 |
	  tilghman | 2010-05-07 15:35:17 -0500 (Fri, 07 May 2010) | 14
	  lines Use the detected pthread building flags in every place,
	  instead of hardcoding -lpthread. We nicely detect the right flags
	  on each system for building Asterisk with pthreads, then ignore
	  it for every other build option that requires us to build with
	  pthreads. This caused some items to return a false negative. Also
	  cleanup some minor naming issues that caused "library library"
	  redundancy in the output. (closes issue #17303) Reported by:
	  stuarth Patches: 20100507__issue17303.diff.txt uploaded by
	  tilghman (license 14) Tested by: stuarth ........

2010-05-06 20:13 +0000 [r261738]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 261736 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r261736 | jpeeler | 2010-05-06 15:11:53 -0500
	  (Thu, 06 May 2010) | 15 lines Merged revisions 261735 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r261735 | jpeeler | 2010-05-06 15:10:59 -0500 (Thu, 06 May 2010)
	  | 8 lines Only allow the operator key to be accepted after
	  leaving a voicemail. Or rather disallow the operator key from
	  being accepted when not offered, such as after finishing a
	  recording from within the mailbox options menu. ABE-2121 SWP-1267
	  ........ ................

2010-05-06 17:08 +0000 [r261611]  Jason Parker <jparker@digium.com>

	* sounds/Makefile, /: Merged revisions 261609 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r261609 | qwell | 2010-05-06 12:06:40 -0500 (Thu, 06 May 2010) |
	  11 lines Merged revisions 261608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r261608 | qwell | 2010-05-06 11:56:02 -0500 (Thu, 06 May 2010) |
	  4 lines Use the versioned MOH tarballs, now that we have them.
	  This makes for more reproducibility. Prompted by a discussion in
	  #asterisk-dev ........ ................

2010-05-06 15:42 +0000 [r261562]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 261560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r261560 |
	  tilghman | 2010-05-06 10:39:10 -0500 (Thu, 06 May 2010) | 8 lines
	  Permit more lines within a SIP body to be parsed. The example
	  given within the related issue showed 120 lines, which was mostly
	  a result of the body being XML. (closes issue #17179) Reported
	  by: khw ........

2010-05-06  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.20-rc1 Released

2010-05-06 14:02 +0000 [r261497]  Russell Bryant <russell@digium.com>

	* /, main/heap.c: Merged revisions 261496 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r261496 |
	  russell | 2010-05-06 08:58:07 -0500 (Thu, 06 May 2010) | 40 lines
	  Fix handling of removing nodes from the middle of a heap. This
	  bug surfaced in 1.6.2 and does not affect code in any other
	  released version of Asterisk. It manifested itself as SIP qualify
	  not happening when it should, causing peers to go unreachable.
	  This was debugged down to scheduler entries sometimes not getting
	  executed when they were supposed to, which was in turn caused by
	  an error in the heap code. The problem only sometimes occurs, and
	  it is due to the logic for removing an entry in the heap from an
	  arbitrary location (not just popping off the top). The scheduler
	  performs this operation frequently when entries are removed
	  before they run (when ast_sched_del() is used). In a normal pop
	  off of the top of the heap, a node is taken off the bottom,
	  placed at the top, and then bubbled down until the max heap
	  property is restored (see max_heapify()). This same logic was
	  used for removing an arbitrary node from the middle of the heap.
	  Unfortunately, that logic is full of fail. This patch fixes that
	  by fully restoring the max heap property when a node is thrown
	  into the middle of the heap. Instead of just pushing it down as
	  appropriate, it first pushes it up as high as it will go, and
	  _then_ pushes it down. Lastly, fix a minor problem in
	  ast_heap_verify(), which is only used for debugging. If a parent
	  and child node have the same value, that is not an error. The
	  only error is if a parent's value is less than its children. A
	  huge thanks goes out to cappucinoking for debugging this down to
	  the scheduler, and then producing an ast_heap test case that
	  demonstrated the breakage. That made it very easy for me to focus
	  on the heap logic and produce a fix. Open source projects are
	  awesome. (closes issue #16936) Reported by: ib2 Tested by:
	  cappucinoking, crjw (closes issue #17277) Reported by:
	  cappucinoking Patches: heap-fix.rev2.diff uploaded by russell
	  (license 2) Tested by: cappucinoking, russell ........

2010-05-06 07:35 +0000 [r261452]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* channels/chan_dahdi.c, /: Merged revisions 261451 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r261451 | tzafrir | 2010-05-06 10:27:31 +0300 (ה', 06 מאי 2010) |
	  4 lines When failing to configure, don't destroy 'cfg' twice
	  Fixes a crash when some config section had an incorrect channel
	  config. ........

2010-05-05 19:14 +0000 [r261317]  Paul Belanger <paul.belanger@polybeacon.com>

	* /, channels/chan_sip.c: Merged revisions 261314 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r261314 | pabelanger | 2010-05-05 14:43:03 -0400 (Wed, 05 May
	  2010) | 19 lines Merged revisions 261274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r261274 | pabelanger | 2010-05-05 12:42:22 -0400 (Wed, 05 May
	  2010) | 12 lines Registration fix for SIP realtime. Make sure
	  realtime fields are not empty. (closes issue #17266) Reported by:
	  Nick_Lewis Patches: chan_sip.c-realtime.patch uploaded by Nick
	  Lewis (license 657) Tested by: Nick_Lewis, sberney Review:
	  https://reviewboard.asterisk.org/r/643/ ........ ................

2010-05-04 23:55 +0000 [r261097]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 261095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r261095 | tilghman | 2010-05-04 18:51:52 -0500 (Tue, 04 May 2010)
	  | 18 lines Merged revisions 261093-261094 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r261093 | tilghman | 2010-05-04 18:36:53 -0500 (Tue, 04 May 2010)
	  | 7 lines Protect against overflow, when calculating how long to
	  wait for a frame. (closes issue #17128) Reported by: under
	  Patches: d.diff uploaded by under (license 914) ........ r261094
	  | tilghman | 2010-05-04 18:47:08 -0500 (Tue, 04 May 2010) | 2
	  lines Add a tiny corner case to the previous commit ........
	  ................

2010-05-04 18:57 +0000 [r260926]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 260924 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260924 | jpeeler | 2010-05-04 13:51:28 -0500
	  (Tue, 04 May 2010) | 18 lines Merged revisions 260923 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260923 | jpeeler | 2010-05-04 13:46:46 -0500 (Tue, 04 May 2010)
	  | 12 lines Voicemail transfer to operator should occur
	  immediately, not after main menu. There were two scenarios in the
	  advanced options that while using the operator=yes and review=yes
	  options, the transfer occurred only after exiting the main menu
	  (after sending a reply or leaving a message for an extension).
	  Now after the audio is processed for the reply or message the
	  transfer occurs immediately as expected. ABE-2107 ABE-2108
	  ........ ................

2010-05-04 15:51 +0000 [r260745-260804]  Jason Parker <jparker@digium.com>

	* /, build_tools/make_build_h: Merged revisions 260802 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260802 | qwell | 2010-05-04 10:49:57 -0500
	  (Tue, 04 May 2010) | 9 lines Merged revisions 260801 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r260801 | qwell | 2010-05-04 10:49:27 -0500 (Tue, 04 May
	  2010) | 1 line Fix fallout from removing from configure script.
	  Pointed out by philipp64 on #asterisk-dev ........
	  ................

	* /: Fix merge props

2010-05-03 17:37 +0000 [r260741]  Paul Belanger <paul.belanger@polybeacon.com>

	* Makefile, /: Merged revisions 260661-260662 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260661 | pabelanger | 2010-05-03 12:41:30 -0400 (Mon, 03 May
	  2010) | 10 lines non-root make install PREFIX=/tmp fails. Prepend
	  libdir when executing mkpkgconfig allowing non-root installs to
	  work. (closes issue #17268) Reported by: pabelanger Patches:
	  issue17268.patch uploaded by pabelanger (license 224) Tested by:
	  pabelanger ........ r260662 | pabelanger | 2010-05-03 12:54:41
	  -0400 (Mon, 03 May 2010) | 3 lines Should have removed /usr/lib/
	  part. Thanks Qwell. ........

2010-05-03 14:59 +0000 [r260572]  Leif Madsen <lmadsen@digium.com>

	* doc/HOWTO_collect_debug_information.txt: Merged revisions 260570
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260570 | lmadsen | 2010-05-03 09:58:23 -0500
	  (Mon, 03 May 2010) | 9 lines Merged revisions 260569 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r260569 | lmadsen | 2010-05-03 09:57:39 -0500 (Mon, 03
	  May 2010) | 1 line Minor typo pointed out by pabelanger on IRC.
	  ........ ................

2010-04-30 22:47 +0000 [r260440]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 260437 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260437 | jpeeler | 2010-04-30 17:36:49 -0500
	  (Fri, 30 Apr 2010) | 18 lines Merged revisions 260434 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260434 | jpeeler | 2010-04-30 17:22:46 -0500 (Fri, 30 Apr 2010)
	  | 11 lines Ensure channel state is not incorrectly set in the
	  case of a very early answer. The needringing bit was being read
	  in dahdi_read after answering thereby setting the state to
	  ringing from up. This clears needringing upon answering so that
	  is no longer possible. (closes issue #17067) Reported by: tzafrir
	  Patches: needringing.diff uploaded by tzafrir (license 46)
	  ........ ................

2010-04-30 20:18 +0000 [r260354]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 260346 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260346 | mmichelson | 2010-04-30 15:11:02 -0500
	  (Fri, 30 Apr 2010) | 24 lines Merged revisions 260345 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260345 | mmichelson | 2010-04-30 15:08:15 -0500 (Fri, 30 Apr
	  2010) | 18 lines Fix potential crash from race condition due to
	  accessing channel data without the channel locked. In
	  res_musiconhold.c, there are several places where a channel's
	  stream's existence is checked prior to calling ast_closestream on
	  it. The issue here is that in several cases, the channel was not
	  locked while checking the stream. The result was that if two
	  threads checked the state of the channel's stream at
	  approximately the same time, then there could be a situation
	  where both threads attempt to call ast_closestream on the
	  channel's stream. The result here is that the refcount for the
	  stream would go below 0, resulting in a crash. I have added
	  proper channel locking to res_musiconhold.c to ensure that we do
	  not try to check chan->stream without the channel locked. A
	  Digium customer has been using this patch for several weeks and
	  has not had any crashes since applying the patch. ABE-2147
	  ........ ................

2010-04-29 23:03 +0000 [r260233]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 260231 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r260231 | rmudgett | 2010-04-29 17:44:14 -0500
	  (Thu, 29 Apr 2010) | 33 lines Merged revisions 260195 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260195 | rmudgett | 2010-04-29 17:11:47 -0500 (Thu, 29 Apr 2010)
	  | 26 lines DTMF CallerID detection problems. The code handling
	  DTMF CallerID drops digits on long CallerID numbers and may
	  timeout waiting for the first ring with shorter numbers. The DTMF
	  emulation mode was not turned off when processing DTMF CallerID.
	  When the emulation code gets behind in processing the DTMF digits
	  it can skip a digit. For shorter numbers, the timeout may have
	  been too short. I increased it from 2 seconds to 4 seconds. Four
	  seconds is a typical time between rings for many countries.
	  (closes issue #16460) Reported by: sum Patches: issue16460.patch
	  uploaded by rmudgett (license 664) issue16460_v1.6.2.patch
	  uploaded by rmudgett (license 664) Tested by: sum, rmudgett
	  Review: https://reviewboard.asterisk.org/r/634/ JIRA SWP-562 JIRA
	  AST-334 JIRA SWP-901 ........ ................

2010-04-29 18:18 +0000 [r260154]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample, /: Merged revisions 260148 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r260148 | tilghman | 2010-04-29 13:15:57 -0500 (Thu, 29
	  Apr 2010) | 2 lines Pattern match fail. ........

2010-04-29 15:37 +0000 [r260052]  David Vossel <dvossel@digium.com>

	* /, include/asterisk/audiohook.h, main/audiohook.c: Merged
	  revisions 260050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r260050 | dvossel | 2010-04-29 10:33:27 -0500 (Thu, 29 Apr 2010)
	  | 21 lines Merged revisions 260049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r260049 | dvossel | 2010-04-29 10:31:02 -0500 (Thu, 29 Apr 2010)
	  | 14 lines Fixes crash in audiohook_write_list The middle_frame
	  in the audiohook_write_list function was being freed if a
	  audiohook manipulator returned a failure. This is incorrect
	  logic. This patch resolves this and adds detailed descriptions of
	  how this function should work and why manipulator failures must
	  be ignored. (closes issue #17052) Reported by: dvossel Tested by:
	  dvossel (closes issue #16196) Reported by: atis Review:
	  https://reviewboard.asterisk.org/r/623/ ........ ................

2010-04-28 22:35 +0000 [r259958]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 259957 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r259957 |
	  mmichelson | 2010-04-28 17:34:15 -0500 (Wed, 28 Apr 2010) | 11
	  lines Don't override peer context with domain context. (closes
	  issue #17040) Reported by: pprindeville Patches:
	  asterisk-1.6-bugid17040.patch uploaded by pprindeville (license
	  347) Tested by: pprindeville Review:
	  https://reviewboard.asterisk.org/r/565/ ........

2010-04-28 21:33 +0000 [r259930]  David Vossel <dvossel@digium.com>

	* main/channel.c, channels/chan_local.c, /: Merged revisions 259870
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259870 | dvossel | 2010-04-28 16:20:03 -0500
	  (Wed, 28 Apr 2010) | 39 lines Merged revisions 259858 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259858 | dvossel | 2010-04-28 16:16:03 -0500 (Wed, 28 Apr 2010)
	  | 33 lines resolves deadlocks in chan_local Issue_1. In the
	  local_hangup() 3 locks must be held at the same time... pvt,
	  pvt->chan, and pvt->owner. Proper deadlock avoidance is done when
	  the channel to hangup is the outbound chan_local channel, but
	  when it is not the outbound channel we have an issue... We
	  attempt to do deadlock avoidance only on the tech pvt, when both
	  the tech pvt and the pvt->owner are locked coming into that loop.
	  By never giving up the pvt->owner channel deadlock avoidance is
	  not entirely possible. This patch resolves that by doing deadlock
	  avoidance on both the pvt->owner and the pvt when trying to get
	  the pvt->chan lock. Issue_2. ast_prod() is used in
	  ast_activate_generator() to queue a frame on the channel and make
	  the channel's read function get called. This function is used in
	  ast_activate_generator() while the channel is locked, which
	  mean's the channel will have a lock both from the generator code
	  and the frame_queue code by the time it gets to chan_local.c's
	  local_queue_frame code... local_queue_frame contains some of the
	  same crazy deadlock avoidance that local_hangup requires, and
	  this recursive lock prevents that deadlock avoidance from
	  happening correctly. This patch removes ast_prod() from the
	  channel lock so only one lock is held during the
	  local_queue_frame function. (closes issue #17185) Reported by:
	  schmoozecom Patches: issue_17185_v1.diff uploaded by dvossel
	  (license 671) issue_17185_v2.diff uploaded by dvossel (license
	  671) Tested by: schmoozecom, GameGamer43 Review:
	  https://reviewboard.asterisk.org/r/631/ ........ ................

2010-04-28 21:09 +0000 [r259855]  Leif Madsen <lmadsen@digium.com>

	* config.guess: Merged revisions 259853 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259853 | lmadsen | 2010-04-28 16:08:34 -0500 (Wed, 28 Apr 2010)
	  | 14 lines Merged revisions 259852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259852 | lmadsen | 2010-04-28 16:07:48 -0500 (Wed, 28 Apr 2010)
	  | 6 lines Update config.guess. Updating config.guess because
	  after installing Ubuntu Server 9.10 and running all the update
	  scripts, running ./configure would not continue because it was
	  unable to determine what kind of system I had. After updating
	  config.guess things started working again. ........
	  ................

2010-04-28 20:33 +0000 [r259776-259850]  Jason Parker <jparker@digium.com>

	* /, configure, configure.ac: Merged revisions 259848 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259848 | qwell | 2010-04-28 15:32:14 -0500
	  (Wed, 28 Apr 2010) | 9 lines Merged revisions 259847 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r259847 | qwell | 2010-04-28 15:30:21 -0500 (Wed, 28 Apr
	  2010) | 1 line Add AC_CONFIG_AUX_DIR to configure script, so
	  systems without install can use install-sh from our source dir.
	  ........ ................

	* makeopts.in, /: Merged revisions 259837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259837 | qwell | 2010-04-28 15:26:35 -0500 (Wed, 28 Apr 2010) |
	  9 lines Merged revisions 259833 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259833 | qwell | 2010-04-28 15:25:36 -0500 (Wed, 28 Apr 2010) |
	  1 line Missed this when removing $ID ........ ................

	* Makefile, /, configure, configure.ac: Merged revisions 259760 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259760 | qwell | 2010-04-28 14:19:54 -0500
	  (Wed, 28 Apr 2010) | 14 lines Merged revisions 259748 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259748 | qwell | 2010-04-28 14:17:38 -0500 (Wed, 28 Apr 2010) |
	  7 lines Remove usage of `id` since it isn't useful and was
	  causing breakge. Solaris `id` doesn't support the -u argument.
	  Instead of figuring out how to fix this to work on Solaris, I
	  decided to check why it was necessary and where else it was used.
	  It was only used in one place, and it hasn't been needed for a
	  very long time (I question whether it was ever needed). ........
	  ................

2010-04-28 17:19 +0000 [r259679]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 259672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259672 | jpeeler | 2010-04-28 12:18:43 -0500
	  (Wed, 28 Apr 2010) | 11 lines Merged revisions 259664 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259664 | jpeeler | 2010-04-28 12:13:29 -0500 (Wed, 28 Apr 2010)
	  | 4 lines Do not play goodbye prompt after timeout of message
	  review. ABE-2124 ........ ................

2010-04-27 22:37 +0000 [r259615]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 259538 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259538 | rmudgett | 2010-04-27 17:18:09 -0500
	  (Tue, 27 Apr 2010) | 18 lines Merged revisions 259531 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259531 | rmudgett | 2010-04-27 16:53:07 -0500 (Tue, 27 Apr 2010)
	  | 11 lines DAHDI "WARNING" message is confusing and vague
	  "WARNING[28406]: chan_dahdi.c:6873 ss_thread: CallerID feed
	  failed: Success" Changed the warning to "Failed to decode
	  CallerID on channel 'name'". The message before it is likely more
	  specific about why the CallerID decode failed. SWP-501 AST-283
	  ........ ................

2010-04-27 21:50 +0000 [r259529]  Leif Madsen <lmadsen@digium.com>

	* sounds/Makefile: Merged revisions 259527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259527 | lmadsen | 2010-04-27 16:49:36 -0500 (Tue, 27 Apr 2010)
	  | 23 lines Merged revisions 259526 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259526 | lmadsen | 2010-04-27 16:48:47 -0500 (Tue, 27 Apr 2010)
	  | 15 lines Update sounds files. * Add additional sounds prompts
	  for say_enumeration * Update the English conference sounds
	  prompts so they are better quality and all sound more consistent
	  * Clean up the core-sounds-XX.txt and extra-sounds-XX.txt files
	  to include all present sound files Both core (en, fr, es) and
	  extra (en, fr) sounds files have been updated. (closes issue
	  #16200) Reported by: murf (closes issue #17137) Reported by:
	  lmadsen ........ ................

2010-04-27 21:22 +0000 [r259355-259471]  Jason Parker <jparker@digium.com>

	* /, main/editline/configure, main/editline/Makefile.in,
	  main/editline/configure.in: Merged revisions 259439 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r259439 | qwell | 2010-04-27 16:13:01 -0500 (Tue, 27 Apr 2010) |
	  5 lines Add gar to the check for AR for those silly OSes
	  (Solaris) that don't have ar. autoconf2.13 couldn't handle
	  AC_PROG_GREP, so I removed it. This is fine, since we don't need
	  to use anything that the configure script doesn't. ........

	* /, configure, configure.ac: Merged revisions 259353 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r259353 | qwell | 2010-04-27 14:31:55 -0500
	  (Tue, 27 Apr 2010) | 12 lines Merged revisions 259352 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259352 | qwell | 2010-04-27 14:29:26 -0500 (Tue, 27 Apr 2010) |
	  5 lines Support the silly OSes that don't have ar and strip.
	  Since AC_PATH_TOOL is equiv to AC_CHECK_TOOL when path isn't
	  specified, and AC_PATH_TOOLS doesn't exist, we'll just switch to
	  AC_CHECK_TOOLS. ........ ................

2010-04-27 18:53 +0000 [r259309]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /: Merged
	  revisions 259307 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259307 | rmudgett | 2010-04-27 13:29:33 -0500 (Tue, 27 Apr 2010)
	  | 21 lines Merged revisions 259270 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259270 | rmudgett | 2010-04-27 13:14:54 -0500 (Tue, 27 Apr 2010)
	  | 14 lines hidecalleridname parameter in chan_dahdi.conf Issue
	  #7321 implements a new chan_dahdi configuration option. However,
	  a change mentioned in the issue was never implemented. This is
	  the change that will allow the feature to work. I added a note to
	  chan_dahdi.conf.sample about the feature. (closes issue #17143)
	  Reported by: djensen99 Patches: diff.txt uploaded by djensen99
	  (license NA) (One line change) Tested by: djensen99 ........
	  ................

2010-04-26 21:48 +0000 [r259078-259108]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 259105 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259105 | mmichelson | 2010-04-26 16:45:13 -0500 (Mon, 26 Apr
	  2010) | 9 lines Merged revisions 259104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259104 | mmichelson | 2010-04-26 16:44:43 -0500 (Mon, 26 Apr
	  2010) | 3 lines Let compilation succeed warning-free when
	  DONT_OPTIMIZE is turned off. ........ ................

	* main/channel.c, /: Merged revisions 259023 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r259023 | mmichelson | 2010-04-26 16:13:35 -0500 (Mon, 26 Apr
	  2010) | 19 lines Merged revisions 259018 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r259018 | mmichelson | 2010-04-26 16:03:08 -0500 (Mon, 26 Apr
	  2010) | 13 lines Prevent Newchannel manager events for dummy
	  channels. No Newchannel manager event will be fired for channels
	  that are allocated to not match a registered technology type.
	  Thus bogus channels allocated solely for variable substitution or
	  CDR operations do not result in a Newchannel event. (closes issue
	  #16957) Reported by: atis Review:
	  https://reviewboard.asterisk.org/r/601 ........ ................

2010-04-25 18:14 +0000 [r258778]  Tilghman Lesher <tlesher@digium.com>

	* res/res_monitor.c, /: Merged revisions 258776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r258776 | tilghman | 2010-04-25 13:12:14 -0500 (Sun, 25 Apr 2010)
	  | 13 lines Merged revisions 258775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r258775 | tilghman | 2010-04-25 13:09:05 -0500 (Sun, 25 Apr 2010)
	  | 6 lines When StopMonitor is called, ensure that it will not be
	  restarted by a channel event. (closes issue #16590) Reported by:
	  kkm Patches: resmonitor-16590-trunk.239289.diff uploaded by kkm
	  (license 888) ........ ................

2010-04-22 22:24 +0000 [r258705]  Matthew Nicholson <mnicholson@digium.com>

	* main/cdr.c, main/channel.c, /, main/features.c: Merged revisions
	  258671,258675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r258671 | mnicholson | 2010-04-22 16:57:59 -0500 (Thu, 22 Apr
	  2010) | 32 lines Merged revisions 193391,258670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193391 | mnicholson | 2009-05-08 16:01:25 -0500 (Fri, 08 May
	  2009) | 8 lines Set the proper disposition on originated calls.
	  (closes issue #14167) Reported by: jpt Patches:
	  call-file-missing-cdr2.diff uploaded by mnicholson (license 96)
	  Tested by: dlotina, rmartinez, mnicholson ........ r258670 |
	  mnicholson | 2010-04-22 16:49:07 -0500 (Thu, 22 Apr 2010) | 11
	  lines Fix broken CDR behavior. This change allows a CDR record
	  previously marked with disposition ANSWERED to be set as BUSY or
	  NO ANSWER. Additionally this change partially reverts r235635 and
	  does not set the AST_CDR_FLAG_ORIGINATED flag on CDRs generated
	  from ast_call(). To preserve proper CDR behavior, the
	  AST_CDR_FLAG_DIALED flag is now cleared from all brige CDRs in
	  ast_bridge_call(). (closes issue #16797) Reported by:
	  VarnishedOtter Tested by: mnicholson ........ (closes issue
	  #16222) Reported by: telles Tested by: mnicholson
	  ................ r258675 | mnicholson | 2010-04-22 17:11:23 -0500
	  (Thu, 22 Apr 2010) | 2 lines Fix previous commit.
	  ................

2010-04-21 22:10 +0000 [r258435]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 258433 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r258433 | jpeeler | 2010-04-21 16:56:09 -0500
	  (Wed, 21 Apr 2010) | 15 lines Merged revisions 258432 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r258432 | jpeeler | 2010-04-21 16:45:36 -0500 (Wed, 21 Apr 2010)
	  | 8 lines Fix looping forever when no input received in certain
	  voicemail menu scenarios. Specifically, prompting for an
	  extension (when leaving or forwarding a message) or when
	  prompting for a digit (when saving a message or changing
	  folders). ABE-2122 SWP-1268 ........ ................

2010-04-21 18:23 +0000 [r258334]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 258305 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r258305 |
	  dvossel | 2010-04-21 13:13:36 -0500 (Wed, 21 Apr 2010) | 12 lines
	  fixes issue with double "sip:" in header field This is a clear
	  mistake in logic. Future discussions about how to avoid having to
	  handle uri's like this should take place in the future, but this
	  fix needs to go in for now. (closes issue #15847) Reported by:
	  ebroad Patches: doublesip.patch uploaded by ebroad (license 878)
	  ........

2010-04-20 17:51 +0000 [r258105]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 258065 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r258065 | jpeeler | 2010-04-20 12:06:19 -0500
	  (Tue, 20 Apr 2010) | 17 lines Merged revisions 258029 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r258029 | jpeeler | 2010-04-20 11:16:33 -0500 (Tue, 20 Apr 2010)
	  | 11 lines Play correct prompt when voicemail store failure
	  occurs after attempted forward. If a user's mailbox was full and
	  a message was attempted to be forwarded to said box, warnings on
	  the console would indicate failure. However, the played prompt
	  was that of success (vm-msgsaved). Now storage failure is taken
	  into account and the correct prompt (vm-mailboxfull) is played
	  when appropriate. ABE-2123 SWP-1262 ........ ................

2010-04-19 18:22 +0000 [r257833]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Merged revisions 257810 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r257810 |
	  twilson | 2010-04-19 12:57:41 -0500 (Mon, 19 Apr 2010) | 5 lines
	  Fix incomplete CDR merge from r195881 Because res/res_features.c
	  was removed and main/cdr.c added, these changes didn't make it to
	  trunk and the 1.6.x branches ........

2010-04-18 17:28 +0000 [r257770]  Tilghman Lesher <tlesher@digium.com>

	* configs/cdr_odbc.conf.sample, /: Merged revisions 257768 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r257768 | tilghman | 2010-04-18 12:25:53 -0500 (Sun, 18
	  Apr 2010) | 2 lines Removing unused configuration parameters
	  ........

2010-04-16 21:32 +0000 [r257739]  Dwayne M. Hubbard <dwayne.hubbard@gmail.com>

	* apps/app_mixmonitor.c, /: Merged revisions 257713 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r257713 | dhubbard | 2010-04-16 16:22:30 -0500
	  (Fri, 16 Apr 2010) | 28 lines Merged revisions 257686 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257686 | dhubbard | 2010-04-16 16:15:43 -0500 (Fri, 16 Apr 2010)
	  | 21 lines Make the mixmonitor thread process audio frames faster
	  Mantis issue 17078 reports MixMonitor recordings have shorter
	  durations than the call duration. This was because the mixmonitor
	  thread was not processing frames from the audiohook fast enough.
	  The mixmonitor thread would slowly fall behind the most recent
	  audio frame and when the channel hangs up, the mixmonitor thread
	  would exit without processing the same number of frames as the
	  channel; leaving the mixmonitor recording shorter than actual
	  call duration. This revision fixes this issue by moving the
	  ast_audiohook_trigger_wait() and the subsequent audiohook.status
	  check into the block where the ast_audiohook_read_frame()
	  function returns NULL. (closes issue #17078) Reported by:
	  geoff2010 Patches: dw-M17078.patch uploaded by dhubbard (license
	  733) Tested by: dhubbard, geoff2010 Review:
	  https://reviewboard.asterisk.org/r/611/ ........ ................

2010-04-15 21:33 +0000 [r257508-257594]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/app.h, /, main/app.c: Merged revisions 257560
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r257560 | tilghman | 2010-04-15 16:26:19 -0500
	  (Thu, 15 Apr 2010) | 13 lines Merged revisions 257544 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257544 | tilghman | 2010-04-15 16:23:24 -0500 (Thu, 15 Apr 2010)
	  | 6 lines Allow application options with arguments to contain
	  parentheses, through a variety of escaping techniques. Fixes
	  SWP-1194 (ABE-2143). Review:
	  https://reviewboard.asterisk.org/r/604/ ........ ................

	* /, channels/chan_sip.c: Merged revisions 257493 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r257493 | tilghman | 2010-04-15 15:30:15 -0500 (Thu, 15 Apr 2010)
	  | 20 lines Merged revisions 257467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257467 | tilghman | 2010-04-15 15:24:50 -0500 (Thu, 15 Apr 2010)
	  | 13 lines Don't recreate peer, when responding to a repeated
	  deregistration attempt. When a reply to a deregistration is lost
	  in transmit, the client retries the deregistration. Previously,
	  this would cause a realtime/autocreate peer to be loaded back
	  into memory, after it had already been correctly purged. Instead,
	  we just want to resend the reply without loading the peer.
	  (closes issue #16908) Reported by: kkm Patches:
	  20100412__issue16908.diff.txt uploaded by tilghman (license 14)
	  Tested by: kkm ........ ................

2010-04-15 19:43 +0000 [r257345-257429]  Leif Madsen <lmadsen@digium.com>

	* doc/backtrace.txt: Merged revisions 257427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r257427 | lmadsen | 2010-04-15 14:41:05 -0500 (Thu, 15 Apr 2010)
	  | 21 lines Merged revisions 257426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257426 | lmadsen | 2010-04-15 14:40:33 -0500 (Thu, 15 Apr 2010)
	  | 13 lines Update backtrace.txt documentation. Update the
	  backtrace.txt documentation so it conforms to the same layout as
	  other documents we've been working on recently. Additionally, add
	  a bunch of new information about gathering backtraces for crashes
	  and deadlocks, along with ways of verifying your file before
	  uploading it. Create a couple of one line commands for people to
	  generate the files we need. (closes issue #17190) Reported by:
	  lmadsen Patches: backtrace.txt.patch-2 uploaded by lmadsen
	  (license 10) Tested by: lmadsen, pabelanger ........
	  ................

	* doc/backtrace.txt: Merged revisions 257343 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r257343 | lmadsen | 2010-04-15 08:44:38 -0500 (Thu, 15 Apr 2010)
	  | 9 lines Merged revisions 257342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257342 | lmadsen | 2010-04-15 08:41:45 -0500 (Thu, 15 Apr 2010)
	  | 1 line Update address of the bug tracker. ........
	  ................

2010-04-14 23:00 +0000 [r257264]  Tilghman Lesher <tlesher@digium.com>

	* configs/features.conf.sample, /, main/features.c: Merged
	  revisions 257262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r257262 |
	  tilghman | 2010-04-14 17:57:35 -0500 (Wed, 14 Apr 2010) | 15
	  lines Yet another issue where the conversion of the application
	  delimiter to comma caused an issue. Application arguments within
	  the feature map could possibly contain a comma, which conflicts
	  with the syntax of the features.conf configuration file. This
	  patch allows the argument to be wrapped in parentheses or quoted,
	  to allow the application arguments to be interpreted as a single
	  configuration parameter. (closes issue #16646) Reported by:
	  pinga-fogo Patches: 20100414__issue16646.diff.txt uploaded by
	  tilghman (license 14) Tested by: tilghman Review:
	  https://reviewboard.asterisk.org/r/547/ ........

2010-04-13 19:30 +0000 [r257214]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /, configs/manager.conf.sample: Merged revisions
	  257146 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r257146 | mnicholson | 2010-04-13 13:10:30 -0500 (Tue, 13 Apr
	  2010) | 16 lines Merged revisions 257070 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r257070 | mnicholson | 2010-04-13 11:46:30 -0500 (Tue, 13 Apr
	  2010) | 9 lines Add an option to restore past broken behavor of
	  the Events manager action Before r238915, certain values for the
	  EventMask parameter of the Events action would result in no
	  response being returned. This patch adds an option to restore
	  that broken behavior. Also while fixing this bug I discovered
	  that passing an empty EventMasks parameter would also result in
	  no response being returned, this has been fixed as well while
	  being preserved when the broken behavior is requested. (closes
	  issue #17023) Reported by: nblasgen Review:
	  https://reviewboard.asterisk.org/r/602/ ........ ................

2010-04-13 19:20 +0000 [r257067-257208]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 257191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r257191 |
	  tilghman | 2010-04-13 14:17:48 -0500 (Tue, 13 Apr 2010) | 10
	  lines Also unref the pvt when we delete the provisional keepalive
	  job. (closes issue #16774) Reported by: kowalma Patches:
	  20100315__issue16774.diff.txt uploaded by tilghman (license 14)
	  Tested by: falves11, jamicque Review:
	  https://reviewboard.asterisk.org/r/591/ ........

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 257065 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r257065 | tilghman | 2010-04-13 11:33:21 -0500 (Tue, 13 Apr 2010)
	  | 8 lines Ensure that we can have commas within cdr values.
	  (closes issue #17001) Reported by: snuffy Patches:
	  20100412__issue17001.diff.txt uploaded by tilghman (license 14)
	  Tested by: snuffy ........

2010-04-12 17:31 +0000 [r256903]  Leif Madsen <lmadsen@digium.com>

	* doc/HOWTO_collect_debug_information.txt (added): Merged revisions
	  256901 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r256901 | lmadsen | 2010-04-12 12:29:53 -0500 (Mon, 12 Apr 2010)
	  | 23 lines Merged revisions 256900 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r256900 | lmadsen | 2010-04-12 12:29:26 -0500 (Mon, 12 Apr 2010)
	  | 15 lines Add How-To document on collecting debugging info for
	  issues.asterisk.org Paul Belanger has been helping a lot with bug
	  tracking recently and created this document that we can now point
	  to when additional debugging information is required. This
	  document will help those filing issues to know how to get the
	  information required when filing their issues. This will make
	  things easier on the developers. Initial text and changes by
	  pabelanger. Tweaks and editing by myself. (closes issue #17159)
	  Reported by: pabelanger Patches:
	  HOWTO_collect_debug_information.txt.patch uploaded by lmadsen
	  (license 10) Tested by: tzafrir, pabelanger, lmadsen ........
	  ................

2010-04-06 19:40 +0000 [r256372]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  include/asterisk/lock.h: Merged revisions 256370 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r256370 | tilghman | 2010-04-06 14:28:42 -0500 (Tue, 06 Apr 2010)
	  | 2 lines Mac OS X does not support comparing a mutex to its
	  initializer. Create a test for this. ........

2010-04-06 18:08 +0000 [r256267-256365]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Fix malformed if test. Regression of issue
	  15883. Converted if statement to a switch statement for clarity.

	* channels/chan_dahdi.c, /: Merged revisions 256265 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r256265 | rmudgett | 2010-04-05 19:39:44 -0500
	  (Mon, 05 Apr 2010) | 12 lines Merged revisions 256225 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r256225 | rmudgett | 2010-04-05 19:10:16 -0500 (Mon, 05 Apr 2010)
	  | 5 lines DAHDI/PRI call to pri_channel_bridge() not protected by
	  PRI lock. SWP-1231 ABE-2163 ........ ................

2010-05-03  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.19 Released

2010-04-29  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.19-rc3 Released

2010-04-29 10:31 +0000 [r260052]  David Vossel <dvossel@digium.com>

	* include/asterisk/audiohook.h, main/audiohook.c: Fixes crash in
	  audiohook_write_list.  (closes issue 0017052) Reported by: dvossel
	  Tested by: dvossel. (closes issue 0016196) Reported by: atis.
	  Review: https://reviewboard.asterisk.org/r/623/

2010-04-28 10:31 +0000 [r259930]  David Vossel <dvossel@digium.com>

	* channels/chan_local.c, main/channel.c: Resolves deadlocks in
	  chan_local.  (closes issue 0017185) Reported by: schmoozecom
	  Patches: issue_17185_v1.diff uploaded by dvossel (license 671)
	  issue_17185_v2.diff uploaded by dvossel (license 671) Tested
	  by: schmoozecom, GameGamer43
	  Review: https://reviewboard.asterisk.org/r/631/

2010-04-13  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.19-rc2 Released

2010-04-13 [r257208]  Tilghman Lesher <tlesher@digium.com

	Also unref the pvt when we delete the provisional keepalive job.

	(closes issue #16774)
	 Reported by: kowalma
	 Patches: 
	       20100315__issue16774.diff.txt uploaded by tilghman (license 14)
	 Tested by: falves11, jamicque

	Review: https://reviewboard.asterisk.org/r/591/

2010-04-05  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.19-rc1 Released

2010-04-05 15:15 +0000 [r256163]  Leif Madsen <lmadsen@digium.com>

	* /, doc/tex/localchannel.tex: Merged revisions 256161 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r256161 | lmadsen | 2010-04-05 10:14:53 -0500 (Mon, 05 Apr 2010)
	  | 1 line Fix for localchannel.tex to allow PDFs to be generated
	  again. ........

2010-04-02 23:47 +0000 [r256012-256017]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /: Merged revisions 256015 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r256015 | russell | 2010-04-02 18:46:45 -0500
	  (Fri, 02 Apr 2010) | 16 lines Merged revisions 256014 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r256014 | russell | 2010-04-02 18:45:56 -0500 (Fri, 02 Apr 2010)
	  | 9 lines Resolve a deadlock that occurs due to a pointless call
	  to ast_bridged_channel() (closes issue #16840) Reported by:
	  bzing2 Patches: patch.txt uploaded by bzing2 (license 902)
	  issue_16840.rev1.diff uploaded by russell (license 2) Tested by:
	  bzing2, russell ........ ................

	* main/channel.c, /: Merged revisions 256010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r256010 | russell | 2010-04-02 18:30:58 -0500 (Fri, 02 Apr 2010)
	  | 9 lines Merged revisions 256009 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r256009 | russell | 2010-04-02 18:30:15 -0500 (Fri, 02 Apr 2010)
	  | 2 lines Remove extremely verbose debug message. ........
	  ................

2010-04-02 20:20 +0000 [r255954]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 255952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r255952 |
	  tilghman | 2010-04-02 15:19:01 -0500 (Fri, 02 Apr 2010) | 8 lines
	  Pass the PID of the Asterisk process, not the PID of the canary.
	  (closes issue #17065) Reported by: globalnetinc Patches:
	  astcanary.patch uploaded by makoto (license 38) Tested by: frawd,
	  globalnetinc ........

2010-04-01 18:21 +0000 [r255675-255815]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 255796 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r255796 | tilghman | 2010-04-01 13:16:37 -0500 (Thu, 01 Apr 2010)
	  | 7 lines Fix DEBUG_THREADS build on Darwin. (closes issue
	  #16828) Reported by: oej Patches: 20100331__issue16828.diff.txt
	  uploaded by tilghman (license 14) ........

	* apps/app_voicemail.c, /: Recorded merge of revisions 255592 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r255592 | tilghman | 2010-03-31 14:13:02 -0500
	  (Wed, 31 Mar 2010) | 22 lines Recorded merge of revisions 255591
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r255591 | tilghman | 2010-03-31 14:09:46 -0500 (Wed, 31 Mar 2010)
	  | 15 lines Ensure line terminators in email are consistent. Fixes
	  an issue with certain Mail Transport Agents, where attachments
	  are not interpreted correctly. (closes issue #16557) Reported by:
	  jcovert Patches: 20100308__issue16557__1.4.diff.txt uploaded by
	  tilghman (license 14) 20100308__issue16557__1.6.0.diff.txt
	  uploaded by tilghman (license 14)
	  20100308__issue16557__trunk.diff.txt uploaded by tilghman
	  (license 14) Tested by: ebroad, zktech Reviewboard:
	  https://reviewboard.asterisk.org/r/544/ ........ ................

2010-03-31 17:51 +0000 [r255506]  Leif Madsen <lmadsen@digium.com>

	* apps/app_dial.c, configs/sip.conf.sample: Merged revisions 255504
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r255504 | lmadsen | 2010-03-31 12:48:09 -0500 (Wed, 31
	  Mar 2010) | 5 lines Add documentation clarifying when 't' and 'T'
	  can be used. (closes issue #17021) Reported by: kovzol Tested by:
	  lmadsen, kovzol, davidw, ebroad ........

2010-03-30 20:57 +0000 [r255325-255412]  Russell Bryant <russell@digium.com>

	* /, channels/chan_h323.c: Merged revisions 255410 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r255410 | russell | 2010-03-30 15:56:26 -0500
	  (Tue, 30 Mar 2010) | 9 lines Merged revisions 255409 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r255409 | russell | 2010-03-30 15:56:00 -0500 (Tue, 30
	  Mar 2010) | 2 lines Don't kill Asterisk if the H323 listener does
	  not start. ........ ................

	* /, pbx/pbx_dundi.c: Merged revisions 255323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r255323 | russell | 2010-03-30 11:07:49 -0500 (Tue, 30 Mar 2010)
	  | 9 lines Merged revisions 255322 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r255322 | russell | 2010-03-30 11:06:06 -0500 (Tue, 30 Mar 2010)
	  | 2 lines Don't make Asterisk not start if pbx_dundi fails to
	  initialize. ........ ................

2010-03-26 19:29 +0000 [r255026-255068]  Leif Madsen <lmadsen@digium.com>

	* configs/sip.conf.sample: Finish syncing documentation for
	  tlsbindaddr. (issue #17054)

	* /, configs/sip.conf.sample: Merged revisions 255021 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r255021 | lmadsen | 2010-03-26 14:07:38 -0500 (Fri, 26 Mar 2010)
	  | 8 lines Update confusing documentation for tlsbindaddr. Update
	  some confusing documentation for the tlsbindaddr option in
	  sip.conf.sample. Point at a link instead which has better
	  documentation. (closes issue #17054) Reported by: klaus3000
	  ........

2010-03-25 20:43 +0000 [r254804]  Jason Parker <jparker@digium.com>

	* utils/Makefile, /: Merged revisions 254802 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r254802 | qwell | 2010-03-25 15:41:49 -0500 (Thu, 25 Mar 2010) |
	  9 lines Merged revisions 254800 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r254800 | qwell | 2010-03-25 15:41:15 -0500 (Thu, 25 Mar 2010) |
	  1 line Don't remove local copies of utils in uninstall. ........
	  ................

2010-03-25 20:09 +0000 [r254720]  Russell Bryant <russell@digium.com>

	* channels/chan_usbradio.c, /: Merged revisions 254718 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r254718 | russell | 2010-03-25 15:08:40 -0500 (Thu, 25 Mar 2010)
	  | 2 lines chan_usbradio depends on alsa. ........

2010-03-25 20:03 +0000 [r254717]  Jason Parker <jparker@digium.com>

	* main/astobj2.c, include/asterisk/astobj2.h: Fix DEBUG_THREADS
	  issue with out-of-tree modules. Take 2, without ABI breakage this
	  time. Review: https://reviewboard.asterisk.org/r/588/

2010-03-25 17:46 +0000 [r254555]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/acl.h, /: Merged revisions 254553 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r254553 | mmichelson | 2010-03-25 12:42:36 -0500
	  (Thu, 25 Mar 2010) | 11 lines Merged revisions 254552 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r254552 | mmichelson | 2010-03-25 12:33:35 -0500 (Thu, 25 Mar
	  2010) | 5 lines Add doxygen for acl.h Review:
	  https://reviewboard.asterisk.org/r/528 ........ ................

2010-03-25 17:21 +0000 [r254547]  Sean Bright <sean@malleable.com>

	* channels/chan_sip.c: Initialize stream to avoid a compilation
	  error.

2010-03-25 17:10 +0000 [r254541]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Fix potential crashes from trying to
	  reference non-existent RTP streams.

2010-03-25 16:23 +0000 [r254486]  Terry Wilson <twilson@digium.com>

	* /, main/file.c: Merged revisions 254453 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r254453 | twilson | 2010-03-25 11:03:51 -0500 (Thu, 25 Mar 2010)
	  | 9 lines Merged revisions 254451 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r254451 | twilson | 2010-03-25 10:57:29 -0500 (Thu, 25 Mar 2010)
	  | 2 lines Handle new SRCCHANGE control message here too ........
	  ................

2010-03-25 16:15 +0000 [r254456]  Mark Michelson <mmichelson@digium.com>

	* main/rtp.c, /: Recorded merge of revisions 254454 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r254454 | mmichelson | 2010-03-25 11:04:48 -0500
	  (Thu, 25 Mar 2010) | 50 lines Recorded merge of revisions 254452
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r254452 | mmichelson | 2010-03-25 10:59:56 -0500 (Thu, 25 Mar
	  2010) | 44 lines Several fixes regarding RFC2833 DTMF detection.
	  Here is a copy and paste of the details from my request on
	  reviewboard that dealt with these changes: Fix 1. The first
	  change in place is to fix Mantis issue 15811, which deals with a
	  situation where Asterisk will incorrectly interpret out of order
	  RFC2833 frames as duplicate DTMF digits. For instance, we would
	  receive a sequence like: seqno 1: DTMF 1 seqno 2: DTMF 1 seqno 3:
	  DTMF 1 seqno 4: DTMF 1 seqno 6: DTMF 1 (end) seqno 5: DTMF 1
	  seqno 7: DTMF 1 (end) seqno 8: DTMF 1 (end) Prior to this patch
	  when we received the frame with seqno 5, we would interpret this
	  as a new DTMF 1. With this patch, we will check the seqno of the
	  incoming digit and not process the frame if the seqno is lower
	  than the last recorded seqno. Note that we do not record the
	  seqno of the dropped DTMF frame for future processing. While the
	  above situation is what was designed to be fixed, the patch is
	  written in such a way that the following would also be fixed too:
	  seqno 9: DTMF 1 seqno 10: DTMF 1 (end) seqno 11: DTMF 1 (end)
	  seqno 13: DTMF 2 seqno 12: DTMF 1 (end) seqno 14: DTMF 2 seqno
	  15: DTMF 2 (end) seqno 16: DTMF 2 (end) seqno 17: DTMF 2 (end) In
	  this second situation, the beginning of the DTMF 2 arrives before
	  the final end frame of the DTMF 1. With the patch, seqno 12 is no
	  processed and thus we properly interpret the DTMF. Fix 2. The
	  second change in place is to fix an issue like the following:
	  seqno 1: DTMF 1 seqno 2: DTMF 1 seqno 3: DTMF 1 (end) *packet
	  lost* seqno 4: DTMF 1 (end) *packet lost* seqno 5: DTMF 1 (end)
	  *packet lost* seqno 6: DTMF 2 When we receive seqno 6, we had
	  code in place that was supposed to properly end the previously
	  unended DTMF 1. The problem was that the code was essentially a
	  no-op. The code would set up an end frame for the DTMF 1 but
	  would immediately overwrite the frame with the begin for DTMF 2.
	  I changed process_dtmf_rfc2833() so that instead of returning a
	  single frame, it is given as an output parameter a list of
	  frames. Each frame that needs to be returned is appended to this
	  list. Fix 3. The final change is a minor one where an
	  AST_CONTROL_SRCCHANGE frame could get lost. If we process a cisco
	  DTMF or an RFC 3389 frame and no frame was returned, then we
	  would return &ast_null_frame. The problem is that earlier in the
	  function, we may have generated an AST_CONTROL_SRCCHANGE frame
	  and put it in the list of frames we wish to return. This frame
	  would be lost in such a case. The patch fixes this problem
	  ........ ................

2010-03-25 15:22 +0000 [r254448]  Leif Madsen <lmadsen@digium.com>

	* /, res/res_agi.c: Merged revisions 254446 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r254446 |
	  lmadsen | 2010-03-25 10:21:26 -0500 (Thu, 25 Mar 2010) | 9 lines
	  handle_speechset has 4 arguments. Update code to reflect that
	  handle_speechset has 4 arguments. (closes issue #17093) Reported
	  by: gpatri Patches: res_agi.patch uploaded by gpatri (license
	  1014) Tested by: pabelanger, mmichelson ........

2010-03-24 17:18 +0000 [r254283]  Jeff Peeler <jpeeler@digium.com>

	* res/res_monitor.c, /: Merged revisions 254277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r254277 | jpeeler | 2010-03-24 12:15:05 -0500 (Wed, 24 Mar 2010)
	  | 78 lines Merged revisions 254235 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r254235 | jpeeler | 2010-03-23 19:37:23 -0500 (Tue, 23 Mar 2010)
	  | 72 lines Ensure that monitor recordings are written to the
	  correct location (again) This is an extension to 248860. As such
	  the dialplan test has been extended: ; non absolute path, not
	  combined exten => 5040, 1, monitor(wav,tmp/jeff/monitor_test)
	  exten => 5040, n, dial(sip/5001) ; absolute path, not combined
	  exten => 5041, 1, monitor(wav,/tmp/jeff/monitor_test2) exten =>
	  5041, n, dial(sip/5001) ; no path, not combined exten => 5042, 1,
	  monitor(wav,monitor_test3) exten => 5042, n, dial(sip/5001) ;
	  combined: changemonitor from non absolute to no path (leaves
	  tmp/jeff) exten => 5043, 1, monitor(wav,tmp/jeff/monitor_test4,m)
	  exten => 5043, n, changemonitor(monitor_test5) exten => 5043, n,
	  dial(sip/5001) ; combined: changemonitor from no path to non
	  absolute path exten => 5044, 1, monitor(wav,monitor_test6,m)
	  exten => 5044, n, changemonitor(tmp/jeff/monitor_test7) ; this
	  wasn't possible before exten => 5044, n, dial(sip/5001) ; non
	  absolute path, combined exten => 5045, 1,
	  monitor(wav,tmp/jeff/monitor_test8,m) exten => 5045, n,
	  dial(sip/5001) ; absolute path, combined exten => 5046, 1,
	  monitor(wav,/tmp/jeff/monitor_test9,m) exten => 5046, n,
	  dial(sip/5001) ; no path, combined exten => 5047, 1,
	  monitor(wav,monitor_test10,m) exten => 5047, n, dial(sip/5001) ;
	  combined: changemonitor from non absolute to absolute (leaves
	  tmp/jeff) exten => 5048, 1,
	  monitor(wav,tmp/jeff/monitor_test11,m) exten => 5048, n,
	  changemonitor(/tmp/jeff/monitor_test12) exten => 5048, n,
	  dial(sip/5001) ; combined: changemonitor from absolute to non
	  absolute (leaves /tmp/jeff) exten => 5049, 1,
	  monitor(wav,/tmp/jeff/monitor_test13,m) exten => 5049, n,
	  changemonitor(tmp/jeff/monitor_test14) exten => 5049, n,
	  dial(sip/5001) ; combined: changemonitor from no path to absolute
	  exten => 5050, 1, monitor(wav,monitor_test15,m) exten => 5050, n,
	  changemonitor(/tmp/jeff/monitor_test16) exten => 5050, n,
	  dial(sip/5001) ; combined: changemonitor from absolute to no path
	  (leaves /tmp/jeff) exten => 5051, 1,
	  monitor(wav,/tmp/jeff/monitor_test17,m) exten => 5051, n,
	  changemonitor(monitor_test18) exten => 5051, n, dial(sip/5001) ;
	  not combined: changemonitor from non absolute to no path (leaves
	  tmp/jeff) exten => 5052, 1, monitor(wav,tmp/jeff/monitor_test19)
	  exten => 5052, n, changemonitor(monitor_test20) exten => 5052, n,
	  dial(sip/5001) ; not combined: changemonitor from no path to non
	  absolute exten => 5053, 1, monitor(wav,monitor_test21) exten =>
	  5053, n, changemonitor(tmp/jeff/monitor_test22) exten => 5053, n,
	  dial(sip/5001) ; not combined: changemonitor from non absolute to
	  absolute (leaves tmp/jeff) exten => 5054, 1,
	  monitor(wav,tmp/jeff/monitor_test23) exten => 5054, n,
	  changemonitor(/tmp/jeff/monitor_test24) exten => 5054, n,
	  dial(sip/5001) ; not combined: changemonitor from absolute to non
	  absolute (leaves /tmp/jeff) exten => 5055, 1,
	  monitor(wav,/tmp/jeff/monitor_test24) exten => 5055, n,
	  changemonitor(tmp/jeff/monitor_test25) exten => 5055, n,
	  dial(sip/5001) ; not combined: changemonitor from no path to
	  absolute exten => 5056, 1, monitor(wav,monitor_test26) exten =>
	  5056, n, changemonitor(/tmp/jeff/monitor_test27) exten => 5056,
	  n, dial(sip/5001) ; not combined: changemonitor from absolute to
	  no path (leaves /tmp/jeff) exten => 5057, 1,
	  monitor(wav,/tmp/jeff/monitor_test28) exten => 5057, n,
	  changemonitor(monitor_test29) exten => 5057, n, dial(sip/5001)
	  ........ ................

2010-03-23 21:37 +0000 [r254130]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* tests/Makefile, /: Merged revisions 254001 via svnmerge from
	  http://svn.digium.com/svn/asterisk/trunk ........ r254001 |
	  tzafrir | 2010-03-23 21:19:52 +0200 (Tue, 23 Mar 2010) | 2 lines
	  Change the name of the category 'TEST' to match the name of the
	  subdir ........

2010-03-23 21:20 +0000 [r254065]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 254050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r254050 |
	  jpeeler | 2010-03-23 16:17:23 -0500 (Tue, 23 Mar 2010) | 14 lines
	  Exit native bridging early for greater timing accuracy with
	  warnings This changes native bridging to break one millisecond
	  early so that the more accurate timeval calculations done in the
	  generic bridge can be performed using the bridge config.
	  Currently the time between exiting native bridging slightly late
	  can sometimes cause a large enough discrepancy for warnings to be
	  missed. For the record, 1.4 does not attempt to native bridge at
	  all when warnings are enabled. (closes issue #15815) Reported by:
	  adomjan Review: https://reviewboard.asterisk.org/r/577/ ........

2010-03-22 19:56 +0000 [r253802]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/features.c: Merged revisions 253800 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r253800 | mnicholson | 2010-03-22 14:52:52 -0500 (Mon, 22 Mar
	  2010) | 11 lines Merged revisions 253799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r253799 | mnicholson | 2010-03-22 14:50:00 -0500 (Mon, 22 Mar
	  2010) | 4 lines Unconditionally copy the caller's account code to
	  the called party. (related to issue #16331) ........
	  ................

2010-03-22 19:06 +0000 [r253713-253759]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/dbsep.cgi: Merged revisions 253758 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r253758 | tilghman | 2010-03-22 14:05:27 -0500 (Mon, 22
	  Mar 2010) | 2 lines Update query should be an UPDATE, not a
	  SELECT. ........

	* /, contrib/scripts/dbsep.cgi: Merged revisions 253755 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r253755 | tilghman | 2010-03-22 13:58:48 -0500 (Mon, 22
	  Mar 2010) | 4 lines Return the list for later manipulation. This
	  fixes an issue with the update procedure. Debugging with
	  mmichelson. ........

	* configs/dbsep.conf.sample, /, contrib/scripts/dbsep.cgi: Merged
	  revisions 253712 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r253712 |
	  tilghman | 2010-03-22 11:59:35 -0500 (Mon, 22 Mar 2010) | 2 lines
	  Accomodate equal signs in DSNs and add documentation, based upon
	  mmichelson's feedback. ........

2010-03-20 17:55 +0000 [r253621-253624]  Russell Bryant <russell@digium.com>

	* main/tcptls.c, /, main/features.c, cdr/cdr_pgsql.c,
	  main/stdtime/localtime.c: Merged revisions 253540 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r253540 | russell | 2010-03-20 07:03:07 -0500 (Sat, 20 Mar 2010)
	  | 2 lines Resolve more compiler warnings on FreeBSD. ........

	* apps/app_followme.c, apps/app_dial.c, /: Merged revisions 253538
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r253538 | russell | 2010-03-20 06:43:08 -0500 (Sat, 20
	  Mar 2010) | 2 lines Resolve compiler warnings on FreeBSD.
	  ........

	* /, pbx/pbx_dundi.c: Merged revisions 253537 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r253537 |
	  russell | 2010-03-20 06:39:39 -0500 (Sat, 20 Mar 2010) | 2 lines
	  Resolve a compiler warning on FreeBSD. ........

	* channels/chan_dahdi.c, /: Merged revisions 253536 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r253536 | russell | 2010-03-20 06:33:30 -0500 (Sat, 20 Mar 2010)
	  | 4 lines Use SHRT_MAX instead of MAXSHORT. These changes fix
	  build issues I had with this module on FreeBSD. ........

2010-03-19 07:59 +0000 [r253491]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/astobj2.c, /: Merged revisions 253490 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r253490 |
	  alecdavis | 2010-03-19 20:37:00 +1300 (Fri, 19 Mar 2010) | 19
	  lines prevent segfault if bad magic number is encountered.
	  internal_ao2_ref uses INTERNAL_OBJ which mzy report 'bad magic
	  number', but internal_ao2_ref continues on, causing segfault.
	  Although AO2_MAGIC number is checked by INTERNAL_OBJ before
	  internal_ao2_ref is called, A02_MAGIC is being destroyed (or a
	  wrong pointer) by the time internal_ao2_ref uses INTERNAL_OBJ.
	  internal_ao2_ref now returns -1 if INTERNAL_OBJ encouters a bad
	  magic number. (issue #17037) Reported by: alecdavis Patches:
	  bug17037.diff.txt uploaded by alecdavis (license 585) Tested by:
	  alecdavis ........

2010-03-18 17:56 +0000 [r253258-253347]  Leif Madsen <lmadsen@digium.com>

	* apps/app_userevent.c: Slightly different fix for UserEvent docs
	  update. (issue #16961)

	* doc/tex/localchannel.tex: Merged revisions 253256 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r253256 | lmadsen | 2010-03-18 10:46:52 -0500 (Thu, 18 Mar 2010)
	  | 9 lines Update to new Local channel documentation. Add same
	  changes as commit to 1.4, but convert to TeX. (issue #16963)
	  Reported by: kobaz Patches: localchannel-2.txt uploaded by kobaz
	  (license 834) ........

2010-03-17 16:25 +0000 [r253158]  Terry Wilson <twilson@digium.com>

	* main/rtp.c, channels/chan_skinny.c, channels/chan_h323.c,
	  channels/chan_mgcp.c, channels/chan_sip.c,
	  include/asterisk/rtp.h: Revert API change in release branches
	  This re-renames ast_rtp_update_source to ast_rtp_new_source

2010-03-17 00:30 +0000 [r253030]  Leif Madsen <lmadsen@digium.com>

	* configs/say.conf.sample: Merged revisions 253028 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r253028 | lmadsen | 2010-03-16 19:29:06 -0500
	  (Tue, 16 Mar 2010) | 13 lines Merged revisions 253018 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r253018 | lmadsen | 2010-03-16 19:26:19 -0500 (Tue, 16 Mar 2010)
	  | 6 lines Add french snipset to say.conf. Add the french snipset
	  to say.conf. (Closes issue #15799) ........ ................

2010-03-16 23:53 +0000 [r252977]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, /: Merged revisions 252976 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r252976 |
	  tilghman | 2010-03-16 18:49:35 -0500 (Tue, 16 Mar 2010) | 8 lines
	  Mask out previous arguments on each nested invocation of Gosub.
	  (closes issue #16758) Reported by: wdoekes Patches:
	  20100316__issue16758.diff.txt uploaded by tilghman (license 14)
	  Review: https://reviewboard.asterisk.org/r/561/ ........

2010-03-16 19:01 +0000 [r252769]  Russell Bryant <russell@digium.com>

	* utils/Makefile, /: Merged revisions 252767 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r252767 | russell | 2010-03-16 14:01:04 -0500 (Tue, 16 Mar 2010)
	  | 13 lines Merged revisions 252766 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r252766 | russell | 2010-03-16 14:00:43 -0500 (Tue, 16 Mar 2010)
	  | 6 lines Don't treat warnings as errors for muted. muted
	  supports OS X, but uses functions marked as deprecated in 10.6.
	  However, the functions are still supported, so just ignore the
	  warnings for now and allow the build to proceed. ........
	  ................

2010-03-16 18:49 +0000 [r252764]  Leif Madsen <lmadsen@digium.com>

	* /, configs/extensions.ael.sample: Merged revisions 252762 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r252762 | lmadsen | 2010-03-16 13:48:22 -0500
	  (Tue, 16 Mar 2010) | 15 lines Merged revisions 252761 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r252761 | lmadsen | 2010-03-16 13:46:20 -0500 (Tue, 16 Mar 2010)
	  | 7 lines Additional extensions.ael global variable fixes. Fixing
	  up a couple more overlapping global variable namespaces shared
	  with extensions.conf.sample. Also noticed a few of the lines that
	  were commented out didn't have the closing semi-colon so I added
	  that as well. (issue #17035) ........ ................

2010-03-15 21:59 +0000 [r252625]  Sean Bright <sean@malleable.com>

	* /, apps/app_meetme.c: Merged revisions 252623 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r252623 |
	  seanbright | 2010-03-15 17:55:44 -0400 (Mon, 15 Mar 2010) | 4
	  lines Resolve a crash in SLATrunk when the specified trunk
	  doesn't exist. Reported by philipp64 in #asterisk-dev. ........

2010-03-15 21:54 +0000 [r252621]  Tilghman Lesher <tlesher@digium.com>

	* contrib/init.d/org.asterisk.asterisk.plist, /: Merged revisions
	  252619 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r252619 | tilghman | 2010-03-15 16:51:55 -0500 (Mon, 15 Mar 2010)
	  | 9 lines Merged revisions 252617 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r252617 | tilghman | 2010-03-15 16:43:14 -0500 (Mon, 15 Mar 2010)
	  | 2 lines Uh, yeah. Umask. I'm stupid. ........ ................

2010-03-15 20:53 +0000 [r252536]  Leif Madsen <lmadsen@digium.com>

	* configs/extensions.ael.sample: Merged revisions 252534 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r252534 | lmadsen | 2010-03-15 15:52:32 -0500
	  (Mon, 15 Mar 2010) | 15 lines Merged revisions 252533 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r252533 | lmadsen | 2010-03-15 15:48:56 -0500 (Mon, 15 Mar 2010)
	  | 7 lines Update extensions.ael file to not overlap
	  extensions.conf. Updated the extensions.ael file so the global
	  variables don't overlap those that we have in extensions.conf
	  (sample files). This way unexpected things won't happed hopefully
	  if both pbx_ael and res_config are loaded. (closes issue #17035)
	  Reported by: pprindeville ........ ................

2010-03-15 05:03 +0000 [r252364-252443]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 252442 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r252442 |
	  tilghman | 2010-03-14 23:25:35 -0500 (Sun, 14 Mar 2010) | 7 lines
	  THIS IS NOT PYTHON. Indentation doesn't matter, only braces do.
	  (closes issue #17025) Reported by: smurfix Patches: sip.patch
	  uploaded by smurfix (license 547) ........

	* main/asterisk.c, Makefile,
	  contrib/init.d/org.asterisk.asterisk.plist (added), /: Merged
	  revisions 252362 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r252362 | tilghman | 2010-03-14 20:37:04 -0500 (Sun, 14 Mar 2010)
	  | 11 lines Merged revisions 252361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r252361 | tilghman | 2010-03-14 20:33:50 -0500 (Sun, 14 Mar 2010)
	  | 4 lines Launch Asterisk on Mac OS X with launchd. Reviewboard:
	  https://reviewboard.asterisk.org/r/551/ ........ ................

2010-03-14 17:47 +0000 [r252316]  Sean Bright <sean@malleable.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 252314 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r252314 | seanbright | 2010-03-14 13:43:46 -0400 (Sun, 14 Mar
	  2010) | 8 lines Fix building CDR and CEL SQLite3 modules. They
	  added a sqlite3_log() function which was conflicting with our
	  function names. (closes issue #17017) Reported by: alephlg
	  ........

2010-03-13 00:31 +0000 [r252135-252177]  Terry Wilson <twilson@digium.com>

	* main/rtp.c: Remove unusued field

	* include/asterisk/frame.h, main/rtp.c, channels/chan_mgcp.c,
	  main/channel.c, /, channels/chan_sip.c, channels/chan_skinny.c,
	  include/asterisk/rtp.h, channels/chan_h323.c,
	  configs/sip.conf.sample: Merged revisions 252089 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r252089 | twilson | 2010-03-12 16:04:51 -0600 (Fri, 12 Mar 2010)
	  | 20 lines Only change the RTP ssrc when we see that it has
	  changed This change basically reverts the change reviewed in
	  https://reviewboard.asterisk.org/r/374/ and instead limits the
	  updating of the RTP synchronization source to only those times
	  when we detect that the other side of the conversation has
	  changed the ssrc. The problem is that SRCUPDATE control frames
	  are sent many times where we don't want a new ssrc, including
	  whenever Asterisk has to send DTMF in a normal bridge. This is
	  also not the first time that this mistake has been made. The
	  initial implementation of the ast_rtp_new_source function also
	  changed the ssrc--and then it was removed because of this same
	  issue. Then, we put it back in again to fix a different issue.
	  This patch attempts to only change the ssrc when we see that the
	  other side of the conversation has changed the ssrc. It also
	  renames some functions to make their purpose more clear. Review:
	  https://reviewboard.asterisk.org/r/540/ ........

2010-03-12 19:54 +0000 [r251996]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Forward declaring dahdi_pri was already
	  done.

2010-03-12 19:50 +0000 [r251993]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 251989 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r251989 | tilghman | 2010-03-12 13:43:23 -0600 (Fri, 12 Mar 2010)
	  | 8 lines Don't override a user option with the global option.
	  (closes issue #16849) Reported by: ip-rob Patches:
	  20100311__issue16849.diff.txt uploaded by tilghman (license 14)
	  Tested by: ip-rob ........

2010-03-12 19:44 +0000 [r251990]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 251987 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r251987 | rmudgett | 2010-03-12 13:40:16 -0600
	  (Fri, 12 Mar 2010) | 9 lines Merged revisions 251986 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r251986 | rmudgett | 2010-03-12 13:33:22 -0600 (Fri, 12
	  Mar 2010) | 1 line Make chan_dahdi wakeup_sub() prototype not
	  conditional. ........ ................

2010-03-11 21:08 +0000 [r251875-251886]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_exec.c, /: Merged revisions 251884 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r251884 |
	  tilghman | 2010-03-11 15:07:07 -0600 (Thu, 11 Mar 2010) | 8 lines
	  Because ExecIf needs to reprocess arguments, it's best if we
	  don't remove quotes during parsing. (closes issue #16905)
	  Reported by: ip-rob Patches: 20100303__issue16905.diff.txt
	  uploaded by tilghman (license 14) Tested by: ip-rob ........

	* apps/app_system.c, /: Merged revisions 251877 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r251877 |
	  tilghman | 2010-03-11 14:25:02 -0600 (Thu, 11 Mar 2010) | 8 lines
	  If the argument to the system application is quoted, ensure we
	  remove the quotes before trying to execute. (closes issue #16842)
	  Reported by: ip-rob Patches: 20100310__issue16842.diff.txt
	  uploaded by tilghman (license 14) Tested by: ip-rob ........

	* funcs/func_odbc.c: Verify whether the created buffer was actually
	  large enough to hold the expanded value. For certain types of
	  queries, where the size of the substituted query was much larger
	  than the template, it was possible for the substitution buffer to
	  be too small. This is only an issue in 1.6.1, as previously we
	  used a static buffer anyway, and we have a substitution routine
	  in 1.6.2 forward that automatically sizes itself appropriately to
	  handle larger expansions. (closes issue #17006) Reported by:
	  viniciusfontes Patches: 20100311__issue17006.diff.txt uploaded by
	  tilghman (license 14) Tested by: tilghman

2010-03-11  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.18 released

2010-03-05  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.18-rc2 released

2010-03-05  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 250913 via svnmerge from
	https://origsvn.digium.com/svn/asterisk/trunk ........ r250913 | tilghman
	| 2010-03-04 22:37:36 -0600 (Thu, 04 Mar 2010) | 7 lines Missing quote in
	ODBC query. (closes issue #16953) Reported by: elguero Patches:
	app_voicemail-odbc-syntax-fix.diff uploaded by elguero (license 37)
	........

2010-03-04  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.18-rc1 released

2010-03-03 21:25 +0000 [r250611]  Leif Madsen <lmadsen@digium.com>

	* /, doc/tex/localchannel.tex: Merged revisions 250609 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r250609 | lmadsen | 2010-03-03 16:22:55 -0500 (Wed, 03 Mar 2010)
	  | 11 lines Update existing Local channel documentation. A
	  complete re-write of the Local channel documentation has been
	  performed, with the existing information from localchannel.txt
	  and localchannel.tex merged in. (closes issue #16637) Reported
	  by: kobaz Patches: localchannel.tex uploaded by lmadsen (license
	  10) localchannel.txt uploaded by lmadsen (license 10) Tested by:
	  lmadsen, jsmith, mmichelson ........

2010-03-03 19:09 +0000 [r250483]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 250481 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r250481 | jpeeler | 2010-03-03 13:06:06 -0600
	  (Wed, 03 Mar 2010) | 22 lines Merged revisions 250480 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r250480 | jpeeler | 2010-03-03 13:04:11 -0600 (Wed, 03 Mar 2010)
	  | 15 lines Make sure to clear red alarm after polarity reversal.
	  From the issue: The automatic overnight line tests (or manual
	  ones) used on UK (BT) lines causes a red alarm on a dahdi /
	  TDM400P connected channel. This is because the line uses voltage
	  tests (battery loss) and polarity reversal. The polarity reversal
	  causes chan_dahdi to initiate v23 CallerID processing but during
	  this the event DAHDI_EVENT_NOALARM is ignored so that the alarm
	  is never cleared. (closes issue #14163) Reported by: jedi98
	  Patches: chan_dahdi-1.4-inalarm.diff uploaded by jedi98 (license
	  653) Tested by: mattbrown, Chainsaw, mikeeccleston ........
	  ................

2010-03-03 18:05 +0000 [r250260-250397]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 250395 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r250395 | dvossel | 2010-03-03 12:03:19 -0600
	  (Wed, 03 Mar 2010) | 22 lines Merged revisions 250394 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r250394 | dvossel | 2010-03-03 12:02:27 -0600 (Wed, 03 Mar 2010)
	  | 16 lines fixes problem with duplicate TXREQ packets When
	  Asterisk receives an IAX2 TXREQ packet, try_transfer() will call
	  store_by_transfercallno() to link the chan_iax2_pvt struct into
	  iax_transfercallno_pvts. If a duplicate TXREQ packet is received
	  for the same call, the pvt struct will be linked into
	  iax_transfercallno_pvts multiple times. This patch fixes this.
	  Thanks rain for debugging this and providing a patch! (closes
	  issue #16904) Reported by: rain Patches:
	  iax2-double-txreq-fix.diff uploaded by rain (license 327) Tested
	  by: rain, dvossel ........ ................

	* /, channels/chan_sip.c: Merged revisions 250246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r250246 |
	  dvossel | 2010-03-02 18:18:28 -0600 (Tue, 02 Mar 2010) | 2 lines
	  fixes signed to unsigned int comparision issue for FaxMaxDatagram
	  value. ........

2010-03-02 21:11 +0000 [r250039-250053]  Leif Madsen <lmadsen@digium.com>

	* doc/tex/imapstorage.tex, /: Merged revisions 250051 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r250051 | lmadsen | 2010-03-02 16:09:27 -0500 (Tue, 02 Mar 2010)
	  | 8 lines Update IMAP documentation. Update the IMAP
	  documentation to make it clear that storing voicemails in the
	  same folder as a large number of emails could potentially cause
	  significant slow downs when writing or retrieving voicemails.
	  (issue #16704) Reported by: TimeHider Tested by: lmadsen,
	  TimeHider ........

	* configs/cdr.conf.sample: Merged revisions 250045 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r250045 | lmadsen | 2010-03-02 15:52:19 -0500
	  (Tue, 02 Mar 2010) | 15 lines Merged revisions 250043 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r250043 | lmadsen | 2010-03-02 15:51:35 -0500 (Tue, 02 Mar 2010)
	  | 7 lines Update documentation to clarify purpose of unanswered
	  option. (closes issue #16267) Reported by: elsto Patches:
	  cdr.conf.sample.patch.txt uploaded by lmadsen (license 10) Tested
	  by: davidw, elsto ........ ................

	* doc/tex/configuration.tex, /: Merged revisions 250037 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r250037 | lmadsen | 2010-03-02 15:36:10 -0500 (Tue, 02
	  Mar 2010) | 4 lines Update documentation to not imply we support
	  overriding options. (closes issue #16855) Reported by: davidw
	  ........

2010-03-02 19:47 +0000 [r249949]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/editline/makelist.in, apps/app_echo.c, UPGRADE.txt: revert
	  ability to exit echo app caused a regression, as only supported
	  VOICE, not VIDEO etc. (issue #16880)

2010-03-02 19:15 +0000 [r249896]  David Vossel <dvossel@digium.com>

	* channels/chan_oss.c, channels/misdn_config.c,
	  include/asterisk/abstract_jb.h, configs/alsa.conf.sample,
	  channels/chan_jingle.c, channels/chan_usbradio.c,
	  channels/chan_dahdi.c, channels/chan_skinny.c,
	  configs/mgcp.conf.sample, main/abstract_jb.c,
	  channels/chan_h323.c, channels/chan_alsa.c,
	  configs/sip.conf.sample, channels/chan_mgcp.c,
	  channels/chan_unistim.c, configs/console.conf.sample,
	  configs/chan_dahdi.conf.sample, channels/chan_local.c,
	  configs/oss.conf.sample, channels/chan_sip.c, /,
	  configs/usbradio.conf.sample, configs/misdn.conf.sample,
	  channels/chan_gtalk.c, channels/chan_console.c: Merged revisions
	  249893 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r249893 |
	  dvossel | 2010-03-02 13:08:38 -0600 (Tue, 02 Mar 2010) | 11 lines
	  fixes adaptive jitterbuffer configuration When configuring the
	  adaptive jitterbuffer, the target_extra value not only could not
	  be set from the configuration, but was not even being set to its
	  proper default. This value is required in order for the adaptive
	  jitterbuffer to work correctly. To resolve this a config option
	  has been added to expose this value to the conf files, and a
	  default value is provided when no config specific value is
	  present. ........

2010-03-02 09:05 +0000 [r249843]  Alec L Davis <sivad.a@paradise.net.nz>

	* apps/app_echo.c: fixes ability to exit echo app when called from
	  a ISDN channel, null frames prevent '#' exit. Now only echo back
	  VOICE and DTMF frames (issue #16880) Reported by: alecdavis
	  Patches: echo_exit_1-6-1.diff.txt uploaded by alecdavis (license
	  585) Tested by: alecdavis

2010-03-01 19:39 +0000 [r249674]  Sean Bright <sean@malleable.com>

	* apps/app_voicemail.c, /: Merged revisions 249672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r249672 | seanbright | 2010-03-01 14:36:30 -0500
	  (Mon, 01 Mar 2010) | 18 lines Merged revisions 249671 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r249671 | seanbright | 2010-03-01 14:35:01 -0500 (Mon, 01 Mar
	  2010) | 11 lines Fix crash in app_voicemail related to message
	  counting. We were passing a 'struct inprocess **' and treating it
	  like a 'struct inprocess *' causing a segfault. (closes issue
	  #16921) Reported by: whardier Patches: 20100301_issue16921.patch
	  uploaded by seanbright (license 71) Tested by: whardier ........
	  ................

2010-03-01 18:39 +0000 [r249624]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 249623 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r249623 | tilghman | 2010-03-01 12:36:06 -0600 (Mon, 01 Mar 2010)
	  | 2 lines Constify a bit of app_voicemail, to make ODBC and IMAP
	  compile once again. ........

2010-03-01 17:19 +0000 [r249548]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_local.c, /: Merged revisions 249538 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r249538 | jpeeler | 2010-03-01 11:11:31 -0600
	  (Mon, 01 Mar 2010) | 18 lines Merged revisions 249536 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r249536 | jpeeler | 2010-03-01 11:02:03 -0600 (Mon, 01 Mar 2010)
	  | 11 lines Modify queued frames from local channels to not set
	  the other side to up In this case, attended transfers were broken
	  due to ast_feature_request_and_dial detecting the channel being
	  set to up before the answer frame could be read and therefore
	  failing to mark the channel as ready. This fix is a regression
	  fix for 244785, which should continue to work properly as well.
	  (closes issue #16816) Reported by: jamhed Tested by: jamhed,
	  corruptor ........ ................

2010-02-28 20:51 +0000 [r249406-249492]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 249491 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r249491 | tilghman | 2010-02-28 14:50:01 -0600 (Sun, 28 Feb 2010)
	  | 5 lines Fix unit test that Alec Davis broke. (closes issue
	  #16927) Reported by: alecdavis ........

	* apps/app_voicemail.c, include/asterisk/app.h, /: Merged revisions
	  249405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r249405 |
	  tilghman | 2010-02-28 01:10:22 -0600 (Sun, 28 Feb 2010) | 2 lines
	  Properly document voicemail API documents. Also fix a crash
	  reported via the -dev list. ........

2010-02-27 23:37 +0000 [r249363]  Alec L Davis <sivad.a@paradise.net.nz>

	* channels/chan_dahdi.c: overlap receiving: automatically send CALL
	  PROCEEDING when dialplan starts Following Q.931 5.2.4 When the
	  user has determined that sufficient call information has been
	  received the user shall stop T302 and send CALL PROCEEDING to the
	  network. Previously timeouts were possible if the dialplan took a
	  long time to issue any response back to the network. Verified
	  that our local TELCO also does the same. (issue #16789) Reported
	  by: alecdavis Patches: overlap_receiving_trunk.diff.txt uploaded
	  by alecdavis (license 585) Tested by: alecdavis

2010-02-27 14:09 +0000 [r249237]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 249235 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r249235 | kpfleming | 2010-02-27 09:08:35 -0500
	  (Sat, 27 Feb 2010) | 9 lines Merged revisions 249234 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r249234 | kpfleming | 2010-02-27 09:07:59 -0500 (Sat, 27
	  Feb 2010) | 1 line add a reference to the now-published IAX2 RFC
	  ........ ................

2010-02-26 18:48 +0000 [r249189]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 249187 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r249187 | tilghman | 2010-02-26 12:41:57 -0600 (Fri, 26 Feb 2010)
	  | 18 lines Cleanups to fix bugs in the VM count API functions. -
	  Urgent voicemails were not attached, because the attachment code
	  looked in the wrong folder. - Urgent voicemails were sometimes
	  counted twice when displaying the count of new messages. -
	  Backends were inconsistent as to which voicemails each API
	  counted. (closes issue #15654) Reported by: tomo1657 Patches:
	  20100225__issue15654.diff.txt uploaded by tilghman (license 14)
	  Tested by: tilghman (closes issue #16448) Reported by: hevad
	  Review: https://reviewboard.asterisk.org/r/525/ ........

2010-02-26 17:05 +0000 [r249103]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 249101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r249101 | mmichelson | 2010-02-26 11:04:58 -0600 (Fri, 26 Feb
	  2010) | 14 lines Merged revisions 249100 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r249100 | mmichelson | 2010-02-26 11:04:29 -0600 (Fri, 26 Feb
	  2010) | 8 lines For T.38 reINVITEs treat a 606 the same as a 488.
	  (closes issue #16792) Reported by: vrban Patches: t38_606.patch
	  uploaded by vrban (license 756) ........ ................

2010-02-25 23:11 +0000 [r248954]  Jeff Peeler <jpeeler@digium.com>

	* res/res_monitor.c, /: Merged revisions 248952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r248952 | jpeeler | 2010-02-25 17:09:54 -0600 (Thu, 25 Feb 2010)
	  | 24 lines Merged revisions 248860 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r248860 | jpeeler | 2010-02-25 15:22:06 -0600 (Thu, 25 Feb 2010)
	  | 18 lines Ensure that monitor recordings are written to the
	  correct location (again) This is an extension to 248757. As such
	  the dialplan test has been extended: exten => 5040, 1,
	  monitor(wav,tmp/jeff/monitor_test,b) exten => 5040, n,
	  dial(sip/5001) exten => 5041, 1,
	  monitor(wav,/tmp/jeff/monitor_test2,b) exten => 5041, n,
	  dial(sip/5001) exten => 5042, 1, monitor(wav,monitor_test3,b)
	  exten => 5042, n, dial(sip/5001) exten => 5043, 1,
	  monitor(wav,tmp/jeff/monitor_test3,m) exten => 5043, n,
	  changemonitor(monitor_test4) exten => 5043, n, dial(sip/5001)
	  exten => 5044, 1, monitor(wav,monitor_test4,m) exten => 5044, n,
	  changemonitor(tmp/jeff/monitor_test5) ; this looks to fail by
	  design and emits a warning exten => 5044, n, dial(sip/5001)
	  ........ ................

2010-02-25 22:42 +0000 [r248948]  Mark Michelson <mmichelson@digium.com>

	* /, main/acl.c: Merged revisions 248946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r248946 |
	  mmichelson | 2010-02-25 16:41:48 -0600 (Thu, 25 Feb 2010) | 5
	  lines Fix incorrect ACL behavior when CIDR notation of "/0" is
	  used. AST-2010-003 ........

2010-02-25 21:24 +0000 [r248863]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 248861 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r248861 | tilghman | 2010-02-25 15:22:39 -0600 (Thu, 25 Feb 2010)
	  | 22 lines Merged revisions 248859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r248859 | tilghman | 2010-02-25 15:21:05 -0600 (Thu, 25 Feb 2010)
	  | 15 lines Some platforms clear /var/run at boot, which makes
	  connecting a remote console... difficult. Previously, we only
	  created the default /var/run/asterisk directory at install time.
	  While we could create it in the init script, that would not work
	  for those who start asterisk manually from the command line. So
	  the safest thing to do is to create it as part of the Asterisk
	  boot process. This also changes the ownership of the directory,
	  because the pid and ctl files are created after we setuid/setgid.
	  (closes issue #16802) Reported by: Brian Patches:
	  20100224__issue16802.diff.txt uploaded by tilghman (license 14)
	  Tested by: tzafrir ........ ................

2010-02-25 18:52 +0000 [r248796]  Jeff Peeler <jpeeler@digium.com>

	* res/res_monitor.c, /: Merged revisions 248793 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r248793 | jpeeler | 2010-02-25 12:37:56 -0600 (Thu, 25 Feb 2010)
	  | 22 lines Merged revisions 248757 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r248757 | jpeeler | 2010-02-25 12:06:54 -0600 (Thu, 25 Feb 2010)
	  | 15 lines Ensure that monitor recordings are written to the
	  correct location. Recordings should be placed in the monitor
	  directory when a non-absolute path is used. Exact dialplan used
	  for testing: exten => 5040, 1,
	  monitor(wav,tmp/jeff/monitor_test,b) exten => 5040, n,
	  dial(sip/5001) exten => 5041, 1,
	  monitor(wav,/tmp/jeff/monitor_test2,b) exten => 5041, n,
	  dial(sip/5001) exten => 5042, 1, monitor(wav,monitor_test3,b)
	  exten => 5042, n, dial(sip/5001) ABE-2101 ........
	  ................

2010-02-24 21:29 +0000 [r248641]  Tilghman Lesher <tlesher@digium.com>

	* /, main/logger.c: Merged revisions 248584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r248584 | tilghman | 2010-02-24 15:17:26 -0600 (Wed, 24 Feb 2010)
	  | 14 lines Merged revisions 248582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r248582 | tilghman | 2010-02-24 15:02:18 -0600 (Wed, 24 Feb 2010)
	  | 7 lines Remove color code sequences from verbose messages that
	  go to logfiles. (closes issue #16786) Reported by: dodo Patches:
	  logger2.patch uploaded by dodo (license 989) Tested by: tilghman
	  ........ ................

2010-02-23 16:48 +0000 [r248399]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 248397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r248397 | dvossel | 2010-02-23 10:34:39 -0600 (Tue, 23 Feb 2010)
	  | 15 lines Merged revisions 248396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r248396 | dvossel | 2010-02-23 10:26:05 -0600 (Tue, 23 Feb 2010)
	  | 9 lines fixes invite with replaces deadlock (closes issue
	  #16862) Reported by: pwalker Patches: replaces_deadlock_1.4
	  uploaded by dvossel (license 671) Tested by: pwalker, dvossel
	  ........ ................

2010-02-19 19:05 +0000 [r248009]  Tilghman Lesher <tlesher@digium.com>

	* main/loader.c, /, channels/chan_console.c: Merged revisions
	  228798 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk (closes issue
	  #16470) Reported by: kjotte ........ r228798 | tilghman |
	  2009-11-09 01:37:52 -0600 (Mon, 09 Nov 2009) | 14 lines Fix
	  various problems detected with Valgrind. * chan_console accessed
	  pvts after deallocation. * The module loader did not check
	  usecount on shutdown, which led to chan_iax2 reading a timer that
	  was already unloaded. (closes issue #16062) Reported by:
	  alexanderheinz Patches: 20091109__issue16062.diff.txt uploaded by
	  tilghman (license 14) Tested by: tilghman ........

2010-02-19 18:22 +0000 [r247946]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 247914 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r247914 | rmudgett | 2010-02-19 11:33:33 -0600
	  (Fri, 19 Feb 2010) | 62 lines Merged revisions 247910 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r247910 | rmudgett | 2010-02-19 11:18:49 -0600
	  (Fri, 19 Feb 2010) | 55 lines Merged revision 247904 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.2-...
	  .......... r247904 | rmudgett | 2010-02-19 10:49:44 -0600 (Fri,
	  19 Feb 2010) | 49 lines Make chan_misdn DTMF processing
	  consistent with other channel technologies. The processing of
	  DTMF tones on the receiving side of an ISDN channel is
	  inconsistent with the way it is handled in other channels,
	  especially DAHDI analog. This causes DTMF tones sent from an ISDN
	  phone to be doubled at the connected party. We are using the
	  following 2 options of misdn.conf 1) astdtmf=yes 2) senddtmf=yes
	  Option one is necessary because the asterisk DSP DTMF detection
	  is better than mISDN's internal DSP. Not as many false positives.
	  Option two is necessary to transmit DTMF tones end to end when
	  mISDN channels are connected to SIP channels with out of band
	  DTMF for example. The symptom is that DTMF tones sent by an ISDN
	  phone are doubled on the way through asterisk when two mISDN
	  channels are connected with a Local channel in between or if it
	  is bridged to an analog channel. The doubling of DTMF tones is
	  because DTMF is passed inband to asterisk by the mISDN channel
	  and passed out of band once again after the release of the DTMF
	  tone. Passing it inband is wrong. Neither an analog channel nor
	  SIP channel passes DTMF inband if configured to inband DTMF.
	  Analog and SIP channels filter out the DTMF tones because they
	  use the voice frames returned by ast_dsp_process. But chan_misdn
	  passes the unfiltered input voice frames instead. To overcome one
	  aspect of the problem, the doubling of DTMF tones when two mISDN
	  channels are directly bridged, someone made an 'optimization',
	  where in that case the DTMF tone passed out-of-band to the peer
	  channel is not translated to an inband tone at the transmit side.
	  This optimization is bad because it does not work in general. For
	  example, analog channels or mISDN channels when bridged through
	  an intermediary local channel will generate DTMF tones from
	  out-of-band information. Also, of course, it must not be done
	  when there is no inband DTMF available. This patch fixes the
	  issue. Now chan_misdn will filter the received inband DTMF signal
	  the same as other channel types. Another change included: No need
	  to build an extra translation path because ast_process_dsp does
	  it if required. Patches: misdn-dtmf.patch JIRA ABE-2080
	  ................ ................

2010-02-18 23:15 +0000 [r247790-247843]  Tilghman Lesher <tlesher@digium.com>

	* res/res_speech.c, /: Merged revisions 247841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r247841 |
	  tilghman | 2010-02-18 17:13:46 -0600 (Thu, 18 Feb 2010) | 7 lines
	  Revert an errant part of a previous cleanup, to fix a memory
	  corruption issue. (closes issue #16368) Reported by: thirionjwf
	  Patches: res_speech.c.patch uploaded by thirionjwf (license 955)
	  ........

	* /, channels/chan_sip.c: Merged revisions 247787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r247787 |
	  tilghman | 2010-02-18 15:42:53 -0600 (Thu, 18 Feb 2010) | 17
	  lines If the peer record is from realtime, it could be set to 0,
	  due to MySQL not representing NULL well in integer columns. NULL
	  means the value is not specified for the column, which normally
	  means the driver uses whatever is the default value. However, on
	  MySQL, placing a NULL in either a float or integer column results
	  in a retrieval of the 0 value. Hence, users get an errant error
	  on load. This patch suppresses that error and makes the value as
	  if it was not there. Note that this cannot be done in the
	  realtime driver, because the lack of difference between NULL and
	  0 can only be intepreted correctly by the driver itself. If we
	  did it in the realtime driver, then it would be effectively
	  impossible to set any realtime field to 0, because it would act
	  as if the field were unspecified and possibly take on a different
	  value. (closes issue #16683) Reported by: wdoekes ........

2010-02-18 19:45 +0000 [r247654]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/features.c: Merged revisions 247652 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r247652 | mnicholson | 2010-02-18 13:39:37 -0600 (Thu, 18 Feb
	  2010) | 13 lines Merged revisions 247651 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r247651 | mnicholson | 2010-02-18 13:38:09 -0600 (Thu, 18 Feb
	  2010) | 6 lines Copy the calling party's account code to the
	  called party if they don't already have one. (closes issue
	  #16331) Reported by: bluefox Tested by: mnicholson ........
	  ................

2010-02-18 16:57 +0000 [r247505-247511]  Leif Madsen <lmadsen@digium.com>

	* README-SERIOUSLY.bestpractices.txt: Merged revisions 247509 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r247509 | lmadsen | 2010-02-18 11:54:43 -0500
	  (Thu, 18 Feb 2010) | 9 lines Merged revisions 247508 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r247508 | lmadsen | 2010-02-18 11:53:44 -0500 (Thu, 18
	  Feb 2010) | 1 line Add additional link to best practices document
	  per jsmith. ........ ................

	* README-SERIOUSLY.bestpractices.txt (added): Merged revisions
	  247503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r247503 | lmadsen | 2010-02-18 11:41:04 -0500 (Thu, 18 Feb 2010)
	  | 18 lines Merged revisions 247502 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r247502 | lmadsen | 2010-02-18 11:38:17 -0500 (Thu, 18 Feb 2010)
	  | 10 lines Add best practices documentation. (issue #16808)
	  Reported by: lmadsen (issue #16810) Reported by: Nick_Lewis
	  Tested by: lmadsen Review:
	  https://reviewboard.asterisk.org/r/507/ ........ ................

2010-02-18 04:21 +0000 [r247425]  Russell Bryant <russell@digium.com>

	* sounds/Makefile, Makefile, /: Merged revisions 247423 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r247423 | russell | 2010-02-17 22:20:11 -0600
	  (Wed, 17 Feb 2010) | 17 lines Merged revisions 247422 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r247422 | russell | 2010-02-17 22:19:01 -0600 (Wed, 17 Feb 2010)
	  | 10 lines Tweak argument handling for wget in the sounds
	  Makefile. 1) Fix the check to see if we are using wget to not be
	  full of fail. The configure script populates this variable with
	  the absolute path to wget if it is found, so it didn't work. 2)
	  Allow some extra arguments to be passed in for wget. This is just
	  a simple change to allow our Bamboo build script to tell wget to
	  be quiet and not fill up our logs with download status output.
	  ........ ................

2010-02-17 21:28 +0000 [r246987-247336]  Mark Michelson <mmichelson@digium.com>

	* /, main/utils.c, include/asterisk/strings.h: Merged revisions
	  247335 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r247335 |
	  mmichelson | 2010-02-17 15:22:40 -0600 (Wed, 17 Feb 2010) | 20
	  lines Fix two problems in ast_str functions found while writing a
	  unit test. 1. The documentation for ast_str_set and
	  ast_str_append state that the max_len parameter may be -1 in
	  order to limit the size of the ast_str to its current allocated
	  size. The problem was that the max_len parameter in all cases was
	  a size_t, which is unsigned. Thus a -1 was interpreted as
	  UINT_MAX instead of -1. Changing the max_len parameter to be
	  ssize_t fixed this issue. 2. Once issue 1 was fixed, there was an
	  off-by-one error in the case where we attempted to write a string
	  larger than the current allotted size to a string when -1 was
	  passed as the max_len parameter. When trying to write more than
	  the allotted size, the ast_str's __AST_STR_USED was set to 1
	  higher than it should have been. Thanks to Tilghman for quickly
	  spotting the offending line of code. Oh, and the unit test that I
	  referenced in the top line of this commit will be added to
	  reviewboard shortly. Sit tight... ........

	* apps/app_queue.c, /: Merged revisions 247169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r247169 | mmichelson | 2010-02-17 10:24:54 -0600 (Wed, 17 Feb
	  2010) | 9 lines Merged revisions 247168 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r247168 | mmichelson | 2010-02-17 10:24:17 -0600 (Wed, 17 Feb
	  2010) | 3 lines Make sure that when autofill is disabled that
	  callers not in the front of the queue cannot place calls.
	  ........ ................

	* /, main/utils.c: Merged revisions 247076 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r247076 |
	  mmichelson | 2010-02-16 17:44:33 -0600 (Tue, 16 Feb 2010) | 12
	  lines Add va_end calls to __ast_str_helper. According to the man
	  page for stdarg(3), "Each invocation of va_copy() must be matched
	  by a corresponding invocation of va_end() in the same function."
	  There were several cases in __ast_str_helper where va_copy was
	  not matched with a corresponding call to va_end. ........

	* /, include/asterisk/strings.h: Merged revisions 246985 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r246985 | mmichelson | 2010-02-16 15:15:38 -0600 (Tue,
	  16 Feb 2010) | 3 lines Add some clarifying documentation to the
	  ast_str_set and ast_str_append functions. ........

2010-02-16 21:05 +0000 [r246902-246983]  David Vossel <dvossel@digium.com>

	* main/tcptls.c, /: Merged revisions 246980 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r246980 |
	  dvossel | 2010-02-16 14:54:48 -0600 (Tue, 16 Feb 2010) | 8 lines
	  warning message if openssl support is missing while attempting
	  tls connection (closes issue #16673) Reported by: michaesc
	  Patches: tls_error_msg.diff uploaded by dvossel (license 671)
	  ........

	* main/channel.c, /: Merged revisions 246899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r246899 |
	  dvossel | 2010-02-16 11:07:41 -0600 (Tue, 16 Feb 2010) | 16 lines
	  fixes sample rate conversion issue with Monitor application When
	  using ast_seekstream with the read/write streams of a monitor,
	  the number of samples we are seeking must be of the same rate as
	  the stream or the jump calculation will be incorrect. This patch
	  adds logic to correctly convert the number of samples to jump to
	  the sample rate the read/write stream is using. For example, if
	  the call is G722 (16khz) and the read/write stream is recording a
	  8khz wav, seeking 320 samples of 16khz audio is not the same as
	  seeking 320 samples of 8khz audio when performing the
	  ast_seekstream on the stream. ABE-2044 ........

2010-02-15 23:44 +0000 [r246712]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, /: Merged revisions 246710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r246710 | tilghman | 2010-02-15 17:43:28 -0600 (Mon, 15 Feb 2010)
	  | 12 lines Merged revisions 246709 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r246709 | tilghman | 2010-02-15 17:42:33 -0600 (Mon, 15 Feb 2010)
	  | 5 lines Make the menuselect instructions correct by allowing
	  'make menuselect' to actually solve dependency problems.
	  (Previously, it would fail out again with the same message about
	  running 'make menuselect', which was NOT at all helpful.)
	  ........ ................

2010-02-12 23:34 +0000 [r246548]  David Vossel <dvossel@digium.com>

	* main/channel.c, /: Merged revisions 246546 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r246546 | dvossel | 2010-02-12 17:32:33 -0600 (Fri, 12 Feb 2010)
	  | 21 lines Merged revisions 246545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r246545 | dvossel | 2010-02-12 17:30:17 -0600 (Fri, 12 Feb 2010)
	  | 16 lines lock channel during datastore removal On channel
	  destruction the channel's datastores are removed and destroyed.
	  Since there are public API calls to find and remove datastores on
	  a channel, a lock should be held whenever datastores are removed
	  and destroyed. This resolves a crash caused by a race condition
	  in app_chanspy.c. (closes issue #16678) Reported by:
	  tim_ringenbach Patches: datastore_destroy_race.diff uploaded by
	  tim ringenbach (license 540) Tested by: dvossel ........
	  ................

2010-02-12 19:08 +0000 [r246463]  Jason Parker <jparker@digium.com>

	* main/channel.c: Fix some silly formatting that made my head hurt.

2010-02-10 21:28 +0000 [r246202-246206]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 246204 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r246204 | tilghman | 2010-02-10 15:24:10 -0600 (Wed, 10 Feb 2010)
	  | 2 lines Fussy compiler on another machine... ........

	* /, funcs/func_strings.c: Merged revisions 246200 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r246200 | tilghman | 2010-02-10 15:19:35 -0600 (Wed, 10 Feb 2010)
	  | 2 lines Fix weird issue with unit tests on optimized build -
	  turned out to be a signing issue. ........

2010-02-10 17:52 +0000 [r246119]  David Vossel <dvossel@digium.com>

	* apps/app_queue.c, /: Merged revisions 246116 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r246116 | dvossel | 2010-02-10 11:49:34 -0600 (Wed, 10 Feb 2010)
	  | 14 lines Merged revisions 246115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r246115 | dvossel | 2010-02-10 11:44:20 -0600 (Wed, 10 Feb 2010)
	  | 8 lines fixes random deadlock in app_queue with use_weight
	  during reload (closes issue #16677) Reported by: tim_ringenbach
	  Patches: app_queue_use_weight_deadlock.diff uploaded by tim
	  ringenbach (license 540) ........ ................

2010-02-10 16:55 +0000 [r246072]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_local.c, /: Merged revisions 246070 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r246070 | jpeeler | 2010-02-10 10:47:37 -0600 (Wed, 10 Feb 2010)
	  | 22 lines Change channel state on local channels for
	  busy,answer,ring. Previously local channels channel state never
	  changed. This became problematic when the state of the other side
	  of the local channel was lost, for example during a masquerade.
	  Changing the state of the local channel allows for the scenario
	  to be detected when the channel state is set to ringing, but the
	  peer isn't ringing. The specific problem scenario is described in
	  164201. Although this was noted on one of the issues, here is the
	  tested dialplan verified to work: exten =>
	  9700,1,Dial(Local/*9700@default&Local/0009700@default) exten =>
	  *9700,1,Set(GLOBAL(TESTCHAN)=${CHANNEL:0:${MATH(${LEN(${CHANNEL})}-1):0:2}}1)
	  exten => *9700,n,wait(3) ;3 works, 1 did not exten =>
	  *9700,n,Dial(SIP/5001) exten => 0009700,1,Wait(1) ;1 works, 3 did
	  not exten =>
	  0009700,n,ChannelRedirect(${TESTCHAN},parkedcalls,701,1) (closes
	  issue #14992) Reported by: davidw ........

2010-02-10 15:38 +0000 [r245947-246024]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 246022 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r246022 | tilghman | 2010-02-10 09:36:57 -0600 (Wed, 10 Feb 2010)
	  | 2 lines Enable warnings on atypical conditions for the FILTER
	  function (suggested by mmichelson on the -dev list). ........

	* configs/extensions.conf.sample, /, funcs/func_strings.c: Merged
	  revisions 245945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r245945 | tilghman | 2010-02-10 08:06:12 -0600 (Wed, 10 Feb 2010)
	  | 9 lines Merged revisions 245944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r245944 | tilghman | 2010-02-10 07:37:13 -0600 (Wed, 10 Feb 2010)
	  | 2 lines Include examples of FILTER usage in extension patterns
	  where a "." may be a risk. ........ ................

2010-02-09 23:13 +0000 [r245795]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 245793 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r245793 | dvossel | 2010-02-09 17:07:17 -0600
	  (Tue, 09 Feb 2010) | 18 lines Merged revisions 245792 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r245792 | dvossel | 2010-02-09 16:55:38 -0600 (Tue, 09 Feb 2010)
	  | 12 lines Fixes iaxs and iaxsl size off by one issue. 2^15 =
	  32768 which is the maximum allowed iax2 callnumber. Creating the
	  iaxs and iaxsl array of size 32768 means the maximum callnumber
	  is actually out of bounds. This causes a nasty crash. (closes
	  issue #15997) Reported by: exarv Patches: iax_fix.diff uploaded
	  by dvossel (license 671) ........ ................

2010-02-09 18:09 +0000 [r245731]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_fax.c: Merged revisions 245729 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r245729 |
	  tilghman | 2010-02-09 12:06:30 -0600 (Tue, 09 Feb 2010) | 8 lines
	  Ensure frames are only freed once. (closes issue #16361) Reported
	  by: vlad Patches: 20100208__issue16361.diff.txt uploaded by
	  tilghman (license 14) Tested by: kenny, bloodoff, misaksen
	  ........

2010-02-09 16:26 +0000 [r245682]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_fax.c: Merged revisions 245680 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r245680 |
	  kpfleming | 2010-02-09 10:24:52 -0600 (Tue, 09 Feb 2010) | 8
	  lines Don't offer MMR or JBIG transcoding during T.38
	  negotiation. After further discussion with Steve Underwood, we
	  should not (yet) be offering to receive MMR or JBIG transcoded
	  streams from T.38 endpoints. A future spandsp release will
	  support those features, and then they can be enabled during
	  negotiation ........

2010-02-08 23:45 +0000 [r245625]  Russell Bryant <russell@digium.com>

	* /, main/event.c: Merged revisions 245624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r245624 |
	  russell | 2010-02-08 17:43:00 -0600 (Mon, 08 Feb 2010) | 5 lines
	  Fix return value of get_ie_str() and get_ie_str_hash() for
	  non-existent IE. I found this bug while developing a unit test
	  for event allocation. Testing is awesome. ........

2010-02-08 22:46 +0000 [r245580]  Tilghman Lesher <tlesher@digium.com>

	* channels/Makefile, /, main/Makefile: Merged revisions 245578 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r245578 | tilghman | 2010-02-08 16:31:40 -0600 (Mon, 08
	  Feb 2010) | 12 lines Actually use _ASTLDFLAGS in the main/ and
	  channels/ Makefiles. They were previously passed correctly, but
	  they simply weren't used. This caused issues with various
	  platforms whose builds needed to pass special linker flags via
	  the configure script. (closes issue #16596) Reported by:
	  pprindeville Patches: asterisk-1.6-astldflags.patch uploaded by
	  pprindeville (license 347) Tested by: tilghman ........

2010-02-08 20:42 +0000 [r245499]  Jason Parker <jparker@digium.com>

	* main/ast_expr2.fl, /, main/ast_expr2f.c: Merged revisions 245497
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r245497 | qwell | 2010-02-08 14:41:05 -0600
	  (Mon, 08 Feb 2010) | 11 lines Merged revisions 245496 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r245496 | qwell | 2010-02-08 14:39:50 -0600 (Mon, 08 Feb 2010) |
	  4 lines Remove reference of documentation in source directory.
	  People don't always build Asterisk from source (distro packages,
	  anybody?). ........ ................

2010-02-05 19:26 +0000 [r245095]  Jeff Peeler <jpeeler@digium.com>

	* contrib/firmware (removed), /, LICENSE: Merged revisions 245090
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r245090 | jpeeler | 2010-02-05 13:26:22 -0600
	  (Fri, 05 Feb 2010) | 11 lines Merged revisions 245044 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r245044 | kpfleming | 2010-02-05 12:32:29 -0600 (Fri, 05 Feb
	  2010) | 5 lines Remove contrib/firmware directory as it is empty
	  Remove explicit license for IAXy firmware as it is no longer
	  included in the tree ........ ................

2010-02-05 17:10 +0000 [r244929]  Sean Bright <sean@malleable.com>

	* main/asterisk.c, /: Merged revisions 244927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r244927 | seanbright | 2010-02-05 12:05:32 -0500 (Fri, 05 Feb
	  2010) | 9 lines Merged revisions 244926 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r244926 | seanbright | 2010-02-05 12:03:35 -0500 (Fri, 05 Feb
	  2010) | 1 line Update main copyright date. ........
	  ................

2010-02-03 19:27 +0000 [r244553]  Mark Michelson <mmichelson@digium.com>

	* main/sched.c, /: Merged revisions 244547 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r244547 |
	  mmichelson | 2010-02-03 13:26:53 -0600 (Wed, 03 Feb 2010) | 3
	  lines Initialize counters in ast_sched_report so that resulting
	  data is not bogus. ........

2010-02-03 18:43 +0000 [r244507]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 244505 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r244505 | tilghman | 2010-02-03 12:34:29 -0600 (Wed, 03 Feb 2010)
	  | 8 lines The chanvar= setting should inherit the entire list of
	  variables, not just the first one. (closes issue #16359) Reported
	  by: raarts Patches: dahdi-setvars.diff uploaded by raarts
	  (license 937) Tested by: raarts ........

2010-02-02 22:31 +0000 [r244446]  David Vossel <dvossel@digium.com>

	* main/udptl.c, /, channels/chan_sip.c, include/asterisk/udptl.h:
	  Merged revisions 244443 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r244443 |
	  dvossel | 2010-02-02 16:27:23 -0600 (Tue, 02 Feb 2010) | 18 lines
	  fixes crash during T.38 negotiation caused by invalid or missing
	  FaxMaxDatagram field AST-2010-001 (closes issue #16634) Reported
	  by: krn (closes issue #16724) Reported by: barthpbx (closes issue
	  #16517) Reported by: bklang (closes issue #16485) Reported by:
	  elsto ........

2010-02-02 20:35 +0000 [r244394]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /: Merged revisions 244393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r244393 |
	  tilghman | 2010-02-02 14:32:29 -0600 (Tue, 02 Feb 2010) | 18
	  lines Properly respect GOSUB_RESULT as to what to do with the
	  master channel. Previously, we would parse GOSUB_RESULT, but not
	  actually do anything with it. (closes issue #16686) Reported by:
	  bklang Patches: app_dial-respect-gosub_result.patch uploaded by
	  bklang (license 919) (with modifications) ........

2010-02-02  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.14

	* AST-2010-001: An attacker attempting to negotiate T.38 over SIP can
	  remotely crash Asterisk by modifying the FaxMaxDatagram field of 
	  the SDP to contain either a negative or exceptionally large value.
	  The same crash occurs when the FaxMaxDatagram field is omitted from 
	  the SDP as well.

2010-01-14  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.13

2010-01-08  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.13-rc1

2010-01-07 21:17 +0000 [r238497]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_oss.c, main/poll.c, channels/chan_usbradio.c,
	  include/asterisk/utils.h, /, channels/chan_sip.c,
	  channels/chan_alsa.c, channels/chan_console.c: Merged revisions
	  209400 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209400 |
	  kpfleming | 2009-07-28 08:49:46 -0500 (Tue, 28 Jul 2009) | 3
	  lines Define side-effect-safe MIN and MAX macros and remove
	  duplicate definitions from various files. (closes issue #16251)
	  Reported by: asgaroth ........

2010-01-07 20:20 +0000 [r238363-238430]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 238412 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r238412 | dvossel | 2010-01-07 14:15:27 -0600
	  (Thu, 07 Jan 2010) | 16 lines Merged revisions 238411 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r238411 | dvossel | 2010-01-07 14:14:25 -0600 (Thu, 07 Jan 2010)
	  | 10 lines fixes crash in "scheduled_destroy" in chan_iax A
	  signed short was used to represent a callnumber. This is makes it
	  possible to attempt to access the iaxs array with a negative
	  index. (closes issue #16565) Reported by: jensvb ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 238405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r238405 |
	  dvossel | 2010-01-07 14:00:31 -0600 (Thu, 07 Jan 2010) | 8 lines
	  Change in sip show channels display format allowing more digits
	  for CID (closes issue #16459) Reported by: Rzadzins Patches:
	  chan_sip_longer_cid.patch uploaded by Rzadzins (license 953)
	  ........

	* apps/app_queue.c, /: Merged revisions 238361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r238361 |
	  dvossel | 2010-01-07 12:58:23 -0600 (Thu, 07 Jan 2010) | 8 lines
	  cli 'queue show' formatting fix. queue name was truncated over 12
	  characters (closes issue #16078) Reported by: RoadKill Patches:
	  quequename_limit.patch uploaded by ppyy (license 906) Tested by:
	  dvossel ........

2010-01-07 12:09 +0000 [r238351]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, configs/sip.conf.sample: Merged revisions 238313 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r238313 | tzafrir | 2010-01-07 11:14:57 +0200 (ה', 07 ינו 2010) |
	  2 lines Document the usefulness of explicit udp:// in the
	  register string ........

2010-01-06 21:48 +0000 [r238233]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_cdr.c: Merged revisions 238231 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r238231 | tilghman | 2010-01-06 15:45:17 -0600 (Wed, 06 Jan 2010)
	  | 11 lines Merged revisions 238230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r238230 | tilghman | 2010-01-06 15:41:55 -0600 (Wed, 06 Jan 2010)
	  | 4 lines Revise documentation on disposition values to the
	  actual values used. (closes issue #16289) Reported by: wdoekes
	  ........ ................

2010-01-06 20:39 +0000 [r238136-238183]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_meetme.c: Merged revisions 238181 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r238181 |
	  jpeeler | 2010-01-06 14:37:18 -0600 (Wed, 06 Jan 2010) | 8 lines
	  Fix misreverting from 177158. (closes issue #15725) Reported by:
	  shanermn Patches: v1-15725.patch uploaded by dimas (license 88)
	  Tested by: shanermn ........

	* /, main/features.c: Merged revisions 238134 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r238134 |
	  jpeeler | 2010-01-06 13:05:06 -0600 (Wed, 06 Jan 2010) | 10 lines
	  Fix channel name comparison for bridge application. The channel
	  name comparison was not comparing the whole string and therefore
	  if one channel name was a substring of the other, the bridge
	  would fail. (closes issue #16528) Reported by: telecos82 Patches:
	  res_features_r236843.diff uploaded by telecos82 (license 687)
	  ........

2010-01-06 15:21 +0000 [r238012]  Russell Bryant <russell@digium.com>

	* /, apps/app_mp3.c: Merged revisions 238010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r238010 | russell | 2010-01-06 09:19:10 -0600 (Wed, 06 Jan 2010)
	  | 14 lines Merged revisions 238009 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r238009 | russell | 2010-01-06 09:18:22 -0600 (Wed, 06 Jan 2010)
	  | 7 lines Resolve a crash due to an ast_frame not being fully
	  initialized. (closes issue #16531) Reported by: john8675309
	  (closes SWP-615) ........ ................

2010-01-06 06:52 +0000 [r237967]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_sip.c: One duplicate setting here (dead code).

2010-01-05 23:09 +0000 [r237841-237922]  David Vossel <dvossel@digium.com>

	* apps/app_queue.c, /: Merged revisions 237920 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237920 |
	  dvossel | 2010-01-05 17:08:50 -0600 (Tue, 05 Jan 2010) | 16 lines
	  fixes holdtime playback issue in app_queue When reporting hold
	  time, the number of seconds should be mod 60. Otherwise audio
	  playback could be something like "2 minutes 123 seconds" rather
	  than "2 minutes 3 seconds". Also, the "minute" sound file is
	  missing, so for the moment until that file can be created the
	  "minutes" file is used instead. (closes issue #16168) Reported
	  by: nickilo Patches: patch-unified-trunk-rev-222176 uploaded by
	  nickilo (license ) Tested by: nickilo, wonderg ........

	* main/pbx.c, /: Merged revisions 237839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237839 |
	  dvossel | 2010-01-05 13:29:47 -0600 (Tue, 05 Jan 2010) | 19 lines
	  fixes subscriptions being lost after 'module reload' During a
	  module reload if multiple extension configs are present, such as
	  both extensions.conf and extensions.ael, watchers for one
	  config's hints will be lost during the merging of the other
	  config. This happens because hint watchers are only preserved for
	  the current config being merged. The old context list is
	  destroyed after the merging takes place, meaning any watchers
	  that were not perserved will be removed. Now all hints are
	  preserved during merging regardless of what config file is being
	  merged. These hints are only restored if they are present within
	  the new context list. (closes issue #16093) Reported by: jlaroff
	  ........

2010-01-05 17:22 +0000 [r237724]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 237699 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r237699 | russell | 2010-01-05 11:16:01 -0600 (Tue, 05 Jan 2010)
	  | 14 lines Merged revisions 237697 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237697 | russell | 2010-01-05 11:13:28 -0600 (Tue, 05 Jan 2010)
	  | 7 lines Change a NOTICE log message to DEBUG where it belongs.
	  (closes issue #16479) Reported by: alexrecarey (closes SWP-577)
	  ........ ................

2010-01-04 21:52 +0000 [r237408-237576]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c: Merged revisions 237574 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r237574 | tilghman | 2010-01-04 15:48:20 -0600 (Mon, 04 Jan 2010)
	  | 13 lines Merged revisions 237573 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237573 | tilghman | 2010-01-04 15:45:46 -0600 (Mon, 04 Jan 2010)
	  | 6 lines Bounds checking for input string (closes issue #16407)
	  Reported by: qwell Patches: 20100104__issue16407.diff.txt
	  uploaded by tilghman (license 14) ........ ................

	* main/pbx.c, /: Merged revisions 237494 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r237494 | tilghman | 2010-01-04 14:59:01 -0600 (Mon, 04 Jan 2010)
	  | 15 lines Merged revisions 237493 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237493 | tilghman | 2010-01-04 14:57:35 -0600 (Mon, 04 Jan 2010)
	  | 8 lines Regression in issue #15421 - Pattern matching (closes
	  issue #16482) Reported by: wdoekes Patches:
	  astsvn-16482-betterfix.diff uploaded by wdoekes (license 717)
	  20091223__issue16482.diff.txt uploaded by tilghman (license 14)
	  Tested by: wdoekes, tilghman ........ ................

	* main/config.c, /: Merged revisions 237414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237414 |
	  tilghman | 2010-01-04 13:03:20 -0600 (Mon, 04 Jan 2010) | 2 lines
	  Oops, didn't compile (thanks, kpfleming) ........

	* main/config.c, /: Merged revisions 237410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237410 |
	  tilghman | 2010-01-04 12:42:10 -0600 (Mon, 04 Jan 2010) | 7 lines
	  Further reduce the encoded blank values back to blank in the
	  realtime API. (closes issue #16533) Reported by: sergee Patches:
	  200100104__issue16533.diff.txt uploaded by tilghman (license 14)
	  Tested by: sergee ........

	* main/pbx.c, /, res/res_agi.c, include/asterisk/channel.h: Merged
	  revisions 237406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r237406 | tilghman | 2010-01-04 12:28:28 -0600 (Mon, 04 Jan 2010)
	  | 23 lines Merged revisions 237405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237405 | tilghman | 2010-01-04 12:19:00 -0600 (Mon, 04 Jan 2010)
	  | 16 lines Add a flag to disable the Background behavior, for AGI
	  users. This is in a section of code that relates to two other
	  issues, namely issue #14011 and issue #14940), one of which was
	  the behavior of Background when called with a context argument
	  that matched the current context. This fix broke FreePBX,
	  however, in a post-Dial situation. Needless to say, this is an
	  extremely difficult collision of several different issues. While
	  the use of an exception flag is ugly, fixing all of the issues
	  linked is rather difficult (although if someone would like to
	  propose a better solution, we're happy to entertain that
	  suggestion). (closes issue #16434) Reported by: rickead2000
	  Patches: 20091217__issue16434.diff.txt uploaded by tilghman
	  (license 14) 20091222__issue16434__1.6.1.diff.txt uploaded by
	  tilghman (license 14) Tested by: rickead2000 ........
	  ................

2010-01-04 16:51 +0000 [r237329]  David Vossel <dvossel@digium.com>

	* apps/app_queue.c, /: Merged revisions 237327 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237327 |
	  dvossel | 2010-01-04 10:39:11 -0600 (Mon, 04 Jan 2010) | 10 lines
	  app_queue segfaults if realtime field uniqueid is NULL (closes
	  issue #16385) Reported by: haakon Patches: app_queue.c.patch
	  uploaded by haakon (license 880) app_queue.c.patch_v2 uploaded by
	  dvossel (license 671) Tested by: haakon ........

2010-01-04 16:26 +0000 [r237325]  Jeff Peeler <jpeeler@digium.com>

	* /, res/res_agi.c: Merged revisions 237323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r237323 |
	  jpeeler | 2010-01-04 10:24:51 -0600 (Mon, 04 Jan 2010) | 5 lines
	  Fix timeout for AGI command speech recognize. (closes issue
	  #16297) Reported by: semond ........

2010-01-04 16:21 +0000 [r237321]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 237319 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r237319 | tilghman | 2010-01-04 10:20:03 -0600
	  (Mon, 04 Jan 2010) | 10 lines Merged revisions 237318 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237318 | tilghman | 2010-01-04 10:18:59 -0600 (Mon, 04 Jan 2010)
	  | 3 lines It's also possible for the Local channel to directly
	  execute an Application. Reviewboard:
	  https://reviewboard.asterisk.org/r/452/ ........ ................

2010-01-02 10:01 +0000 [r237138]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 237136 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r237136 | oej | 2010-01-02 10:54:22 +0100 (Lör, 02 Jan 2010) | 10
	  lines Merged revisions 237135 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r237135 | oej | 2010-01-02 10:52:30 +0100 (Lör, 02 Jan 2010) | 2
	  lines Release memory of the contact acl before unloading module
	  ........ ................

2009-12-30 22:00 +0000 [r236984]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 236982 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r236982 | tilghman | 2009-12-30 15:59:18 -0600
	  (Wed, 30 Dec 2009) | 16 lines Merged revisions 236981 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236981 | tilghman | 2009-12-30 15:57:10 -0600 (Wed, 30 Dec 2009)
	  | 9 lines Don't queue frames to channels that have no means to
	  process them. (closes issue #15609) Reported by: aragon Patches:
	  20091230__issue16521__1.4__chan_local_only.diff.txt uploaded by
	  tilghman (license 14) Tested by: aragon Review:
	  https://reviewboard.asterisk.org/r/452/ ........ ................

2009-12-30 21:13 +0000 [r236904]  Jeff Peeler <jpeeler@digium.com>

	* /, utils/ael_main.c: Merged revisions 236902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r236902 |
	  jpeeler | 2009-12-30 15:09:28 -0600 (Wed, 30 Dec 2009) | 2 lines
	  One more LOW_MEMORY compile fix. ........

2009-12-30 17:57 +0000 [r236803-236851]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_adaptive_odbc.c: Merged revisions 236847 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r236847 | tilghman | 2009-12-30 11:53:29 -0600 (Wed, 30 Dec 2009)
	  | 4 lines When the field is blank, don't warn about the field
	  being unable to be coerced, just skip the column. (closes
	  http://lists.digium.com/pipermail/asterisk-dev/2009-December/041362.html)
	  Reported by Nic Colledge on the -dev list, fixed by me. ........

	* /, channels/chan_sip.c: Merged revisions 236802 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r236802 |
	  tilghman | 2009-12-29 17:05:45 -0600 (Tue, 29 Dec 2009) | 7 lines
	  Shut down the SIP session timers more gracefully, in order to
	  prevent a possible crash. (closes issue #16452) Reported by:
	  corruptor Patches: 20091221__issue16452.diff.txt uploaded by
	  tilghman (license 14) Tested by: corruptor ........

2009-12-28 22:11 +0000 [r236715]  Jason Parker <jparker@digium.com>

	* main/ast_expr2.c, /, main/ast_expr2.y: Merged revisions 236713
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r236713 | qwell | 2009-12-28 16:09:40 -0600 (Mon, 28 Dec
	  2009) | 8 lines Allow "REMAINDER" to function properly in
	  expressions. (closes issue #16427) Reported by: wdoekes Patches:
	  ast16-reminder-remainder.patch uploaded by wdoekes (license 717)
	  Tested by: wdoekes ........

2009-12-28 17:40 +0000 [r236669]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 236667 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r236667 | tilghman | 2009-12-28 11:37:46 -0600 (Mon, 28 Dec 2009)
	  | 4 lines Use recommended option, not deprecated option. (closes
	  issue #16515) Reported by: ManChicken ........

2009-12-28 15:31 +0000 [r236512-236634]  Sean Bright <sean@malleable.com>

	* include/asterisk/threadstorage.h, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Merged revisions
	  236613 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r236613 | seanbright | 2009-12-28 10:22:54 -0500 (Mon, 28 Dec
	  2009) | 14 lines Merged revisions 236585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236585 | seanbright | 2009-12-28 10:12:08 -0500 (Mon, 28 Dec
	  2009) | 7 lines Try a test compile to see if PTHREAD_ONCE_INIT
	  requires extra braces. There was conditional code (based on build
	  platform) to optioinally wrap PTHREAD_ONCE_INIT in braces that
	  was removed since it is fixed in newer versions of
	  Solaris/OpenSolaris, but I am still running into it on Solaris 10
	  x86 so add a configure-time check for it. ........
	  ................

	* /, apps/app_meetme.c: Merged revisions 236510 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r236510 | seanbright | 2009-12-28 07:44:58 -0500 (Mon, 28 Dec
	  2009) | 19 lines Merged revisions 236509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236509 | seanbright | 2009-12-28 07:43:36 -0500 (Mon, 28 Dec
	  2009) | 12 lines Avoid a crash with large numbers of MeetMe
	  conferences. Similar to changes made to Queue(), when we have
	  large numbers of conferences in meetme.conf (1000s) and we use
	  alloca()/strdupa(), we can blow out the stack and crash, so
	  instead just use a single fixed buffer. (closes issue #16509)
	  Reported by: Kashif Raza Patches: 20091223_16509.patch uploaded
	  by seanbright (license 71) Tested by: seanbright ........
	  ................

2009-12-27 18:22 +0000 [r236436]  Tilghman Lesher <tlesher@digium.com>

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 236434 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r236434 | tilghman | 2009-12-27 12:20:53 -0600
	  (Sun, 27 Dec 2009) | 9 lines Merged revisions 236433 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r236433 | tilghman | 2009-12-27 12:19:38 -0600 (Sun, 27
	  Dec 2009) | 2 lines Turn on colors in the daemon, since there's
	  many requests for it on Ubuntu. ........ ................

2009-12-26 15:31 +0000 [r236360]  Kevin P. Fleming <kpfleming@digium.com>

	* sounds/Makefile, /: Merged revisions 236358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r236358 | kpfleming | 2009-12-26 09:27:44 -0600 (Sat, 26 Dec
	  2009) | 9 lines Merged revisions 236357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236357 | kpfleming | 2009-12-26 09:26:17 -0600 (Sat, 26 Dec
	  2009) | 1 line update to latest releases with zero uid/gid
	  ........ ................

2009-12-23 18:26 +0000 [r236188-236302]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, /: Merged revisions 236300 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r236300 |
	  tilghman | 2009-12-23 12:25:27 -0600 (Wed, 23 Dec 2009) | 7 lines
	  AGI may be invoked from outside the dialplan (closes issue
	  #16510) Reported by: atis Patches: 20091223__issue16510.diff.txt
	  uploaded by tilghman (license 14) Tested by: atis ........

	* /, res/res_agi.c: Merged revisions 236186 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r236186 | tilghman | 2009-12-22 21:07:48 -0600 (Tue, 22 Dec 2009)
	  | 11 lines Merged revisions 236184 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236184 | tilghman | 2009-12-22 20:55:24 -0600 (Tue, 22 Dec 2009)
	  | 4 lines If EXEC only gets a single argument, don't crash when
	  the second is used. (closes issue #16504) Reported by: bklang
	  ........ ................

2009-12-22 17:06 +0000 [r236065]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 236063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r236063 | dvossel | 2009-12-22 11:00:08 -0600 (Tue, 22 Dec 2009)
	  | 18 lines Merged revisions 236062 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r236062 | dvossel | 2009-12-22 10:58:19 -0600 (Tue, 22 Dec 2009)
	  | 11 lines fixes issue with p->method incorrectly set to ACK It
	  is possible for a second ACK to come in for a retransmitted
	  message. If an ack does not match an unacked message in our
	  queue, restore the previous p->method as this ACK is completely
	  ignored. (closes issue #16295) Reported by: omolenkamp Patches:
	  issue16295_v2.diff uploaded by dvossel (license 671) ........
	  ................

2009-12-21 19:55 +0000 [r235943]  Jeff Peeler <jpeeler@digium.com>

	* res/res_monitor.c, /: Merged revisions 235941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r235941 | jpeeler | 2009-12-21 13:54:20 -0600 (Mon, 21 Dec 2009)
	  | 20 lines Merged revisions 235940 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r235940 | jpeeler | 2009-12-21 13:43:41 -0600 (Mon, 21 Dec 2009)
	  | 13 lines Change Monitor to not assume file to write to does not
	  contain pathing. 227944 changed the fname_base argument to always
	  append the configured monitor path. This change was necessary to
	  properly compare files for uniqueness. If a full path is given
	  though, nothing needs to be appended and that is handled
	  correctly now. (closes issue #16377) (closes issue #16376)
	  Reported by: bcnit Patches: res_monitor.c-issue16376-1.patch
	  uploaded by dant (license 670) ........ ................

2009-12-21 17:11 +0000 [r235825]  Tilghman Lesher <tlesher@digium.com>

	* /, main/features.c: Merged revisions 235822 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r235822 | tilghman | 2009-12-21 11:00:46 -0600 (Mon, 21 Dec 2009)
	  | 15 lines Merged revisions 235821 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r235821 | tilghman | 2009-12-21 10:45:03 -0600 (Mon, 21 Dec 2009)
	  | 8 lines Send parking lot announcement to the channel which
	  parked the call, not the park-ee. (closes issue #16234) Reported
	  by: yeshuawatso Patches: 20091210__issue16234.diff.txt uploaded
	  by tilghman (license 14) 20091221__issue16234__1.4.diff.txt
	  uploaded by tilghman (license 14) Tested by: yeshuawatso ........
	  ................

2009-12-20 09:07 +0000 [r235776]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/dsp.c: restarts busydetector (if enabled) when DTMF is
	  received after call is bridged. (closes issue #16389) Reported
	  by: alecdavis Tested by: alecdavis Patch
	  dtmf_busydetector.diff2.txt uploaded by alecdavis (license 585)

2009-12-18 23:03 +0000 [r235663]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /, include/asterisk/cdr.h: Merged revisions
	  235660 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r235660 | jpeeler | 2009-12-18 16:51:37 -0600 (Fri, 18 Dec 2009)
	  | 55 lines Merged revisions 235635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r235635 | jpeeler | 2009-12-18 16:29:51 -0600 (Fri, 18 Dec 2009)
	  | 48 lines Correct CDR dispositions for BUSY/FAILED This patch is
	  simple in that it reorders the disposition defines so that the
	  fix for issue 12946 works properly (the default CDR disposition
	  was changed to AST_CDR_NOANSWER). Also, the
	  AST_CDR_FLAG_ORIGINATED flag was set in ast_call to ensure all
	  CDR records are written. The side effects of CDR changes are
	  scary, so I'm documenting the test cases performed to attempt to
	  catch any regressions. The following tests were all performed
	  using 1.4 rev 195881 vs head (235571) + patch: A calls B C calls
	  B (busy) Hangup C Hangup A (Both SIP and features) A calls B A
	  blind transfers to C Hangup C (Both SIP and features) A calls B A
	  attended transfers to C Hangup C A calls B A attended transfers
	  to C (SIP) C blind transfers to A (features) Hangup A All of the
	  test scenario CDRs matched. The following tests were performed
	  just with the patch to ensure proper operation (with
	  unanswered=yes): exten =>s,1,Answer exten =>s,n,ResetCDR(w) exten
	  =>s,n,ResetCDR(w) exten =>s,1,ResetCDR(w) exten =>s,n,ResetCDR(w)
	  (closes issue #16180) Reported by: aatef Patches: bug16180.patch
	  uploaded by jpeeler (license 325) ........ ................

2009-12-18 22:42 +0000 [r235575-235658]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 235656 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r235656 | tilghman | 2009-12-18 16:40:46 -0600
	  (Fri, 18 Dec 2009) | 9 lines Merged revisions 235652 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r235652 | tilghman | 2009-12-18 16:39:30 -0600 (Fri, 18
	  Dec 2009) | 2 lines Revise verbiage, per #asterisk-dev discussion
	  ........ ................

	* /, configure, configure.ac: Merged revisions 235573 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r235573 | tilghman | 2009-12-18 15:19:43 -0600
	  (Fri, 18 Dec 2009) | 9 lines Merged revisions 235572 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r235572 | tilghman | 2009-12-18 15:18:16 -0600 (Fri, 18
	  Dec 2009) | 2 lines Point to the typical missing package, not the
	  cryptic "termcap support". ........ ................

2009-12-17  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.12

2009-12-09  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.12-rc1

2009-12-08 18:31 +0000 [r233730]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 233718 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r233718 | tilghman | 2009-12-08 12:22:44 -0600 (Tue, 08 Dec 2009)
	  | 8 lines Find another ref leak and change how we manage module
	  references. (closes issue #16388) Reported by: parisioa Patches:
	  20091208__issue16388.diff.txt uploaded by tilghman (license 14)
	  Tested by: parisioa, tilghman Review:
	  https://reviewboard.asterisk.org/r/442/ ........

2009-12-08 18:02 +0000 [r233693]  Russell Bryant <russell@digium.com>

	* formats/format_ilbc.c, formats/format_vox.c,
	  formats/format_pcm.c, formats/format_g723.c,
	  formats/format_h263.c, formats/format_h264.c,
	  formats/format_g726.c, formats/format_jpeg.c,
	  formats/format_gsm.c, formats/format_g729.c, /,
	  formats/format_sln.c, formats/format_wav.c,
	  formats/format_ogg_vorbis.c, formats/format_sln16.c,
	  formats/format_wav_gsm.c: Merged revisions 233692 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r233692 | russell | 2009-12-08 12:00:16 -0600 (Tue, 08 Dec 2009)
	  | 16 lines Set a module load priority for format modules. A
	  recent change to app_voicemail made it such that the module now
	  assumes that all format modules are available while processing
	  voicemail configuration. However, when autoloading modules, it
	  was possible that app_voicemail was loaded before the format
	  modules. Since format modules don't depend on anything, set a
	  module load priority on them to ensure that they get loaded first
	  when autoloading. This fix applies to trunk, 1.6.1, and 1.6.2.
	  The fix for 1.4 and 1.6.0 will require a different approach since
	  the module load priority functionality is not present in the
	  module API. (issue #16412) Reported by: jiddings ........

2009-12-08 07:40 +0000 [r233688]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c: Fixed compile error with OSP Toolkit 3.6.

2009-12-07 23:56 +0000 [r233616]  Atis Lezdins <atis@iq-labs.net>

	* contrib/valgrind.supp, /: Merged revisions 233577 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r233577 | atis | 2009-12-08 01:10:13 +0200 (Tue, 08 Dec 2009) | 8
	  lines Fix compatibility with valgrind 3.3 and older. (noticed in
	  issue #16388) Reported by: parisioa Patches: valgrind.supp
	  uloaded by atis (license 242) Tested by: atis, parisioa ........

2009-12-07 23:29 +0000 [r233474-233613]  David Vossel <dvossel@digium.com>

	* /, main/utils.c: Merged revisions 233611 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r233611 |
	  dvossel | 2009-12-07 17:28:51 -0600 (Mon, 07 Dec 2009) | 4 lines
	  fixes incorrect logic in ast_uri_encode issue #16299 ........

	* /, channels/chan_sip.c: Merged revisions 233472 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r233472 | dvossel | 2009-12-07 12:08:46 -0600 (Mon, 07 Dec 2009)
	  | 15 lines Merged revisions 233471 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r233471 | dvossel | 2009-12-07 12:07:38 -0600 (Mon, 07 Dec 2009)
	  | 9 lines fixes missing Contact header angle brackets (closes
	  issue #16298) Reported by: mgernoth Patches:
	  reg_parse_issue_1.4.diff uploaded by dvossel (license 671) Tested
	  by: dvossel ........ ................

2009-12-07 16:16 +0000 [r233395]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 233394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r233394 |
	  mnicholson | 2009-12-07 10:14:42 -0600 (Mon, 07 Dec 2009) | 8
	  lines Do not reject SDP packets describing only non audio
	  streams. (closes issue #16387) Reported by: zalex1953 Patches:
	  media-level-c-fix1.diff uploaded by mnicholson (license 96)
	  Tested by: mnicholson, zalex1953 ........

2009-12-04 21:55 +0000 [r233283]  David Vossel <dvossel@digium.com>

	* configs/iax.conf.sample, /: Merged revisions 233280 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r233280 | dvossel | 2009-12-04 15:54:44 -0600
	  (Fri, 04 Dec 2009) | 14 lines Merged revisions 233279 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r233279 | dvossel | 2009-12-04 15:54:01 -0600 (Fri, 04 Dec 2009)
	  | 7 lines clarify requirecalltoken option in iax.sample.conf
	  (closes issue #16223) Reported by: bklang Patches:
	  clarify-iax-requirecalltoken.patch uploaded by bklang (license
	  919) ........ ................

2009-12-04 21:00 +0000 [r233238]  Matthias Nick <mnick@digium.com>

	* pbx/pbx_config.c, /: Merged revisions 233093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r233093 |
	  mnick | 2009-12-04 11:15:47 -0600 (Fri, 04 Dec 2009) | 8 lines
	  Parse global variables or expressions in hint extensions Parse
	  global variables or expressions in hint extensions. Like: exten
	  => 400,hint,DAHDI/i2/${GLOBAL(var)} (closes issue #16166)
	  Reported by: rmudgett Tested by: mnick, rmudgett ........

2009-12-04 17:37 +0000 [r233166]  David Vossel <dvossel@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 233121 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r233121 | dvossel | 2009-12-04 11:22:31 -0600
	  (Fri, 04 Dec 2009) | 12 lines Merged revisions 233116 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r233116 | dvossel | 2009-12-04 11:21:34 -0600 (Fri, 04 Dec 2009)
	  | 6 lines document and rename strip_control() in app_voicemail
	  (closes issue #16291) Reported by: wdoekes ........
	  ................

2009-12-04 17:22 +0000 [r233122]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 233100 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r233100 | russell | 2009-12-04 11:18:22 -0600 (Fri, 04 Dec 2009)
	  | 14 lines Merged revisions 233092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r233092 | russell | 2009-12-04 11:12:47 -0600 (Fri, 04 Dec 2009)
	  | 7 lines Only do frame payload check for HOLD frames. This code
	  was added for helping to debug the source of invalid HOLD frames.
	  However, a side effect of this is that it will incorrectly report
	  errors for frames that have an integer payload. Make the check
	  for this block specific to the HOLD frame case. ........
	  ................

2009-12-04 15:51 +0000 [r233048]  Matthias Nick <mnick@digium.com>

	* main/dsp.c, /: Merged revisions 233046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r233046 | mnick | 2009-12-04 09:38:33 -0600 (Fri, 04 Dec 2009) |
	  17 lines Merged revisions 233014 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r233014 | mnick | 2009-12-04 09:17:03 -0600 (Fri, 04 Dec 2009) |
	  11 lines Warning message gets displayed only once Added
	  additional field 'int display_inband_dtmf_warning', which when
	  set to '1' displays the warning ('Inband DTMF is not supported on
	  codec %s. Use RFC2833'), and when set to '0' doesn't display the
	  warning. Otherwise you would get hundreds of warnings every
	  second. (closes issue #15769) Reported by: falves11 Patches:
	  patch_15769_14.txt uploaded by mnick (license 874) Tested by:
	  mnick, falves11 ........ ................

2009-12-03 21:03 +0000 [r232865]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 232854 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r232854 | tilghman | 2009-12-03 14:47:07 -0600
	  (Thu, 03 Dec 2009) | 15 lines Merged revisions 232820 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232820 | tilghman | 2009-12-03 14:10:19 -0600 (Thu, 03 Dec 2009)
	  | 8 lines Deprecate "cz" in favor of "cs". Also, change the use
	  of language codes so that language registers as a prefix, rather
	  than an exact match. (closes issue #16272) Reported by: patrol-cz
	  Patches: 20091203__issue16272.diff.txt uploaded by tilghman
	  (license 14) ........ ................

2009-12-03 15:03 +0000 [r232812]  David Ruggles <thedavidfactor@gmail.com>

	* apps/app_externalivr.c: Merged revisions 232587 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232587 |
	  diruggles | 2009-12-02 17:17:22 -0500 (Wed, 02 Dec 2009) | 12
	  lines Prevent double closing of FDs by EIVR This caused a problem
	  when asterisk was under heavy load and running both AGI and EIVR
	  applications. EIVR would close an FD at which point it would be
	  considered freed and be used by a new AGI instance the second
	  close would then close the FD now in use by AGI. (closes issue
	  #16305) Reported by: diLLec Tested by: thedavidfactor, diLLec
	  Review: https://reviewboard.asterisk.org/r/436/ ........

2009-12-03 00:18 +0000 [r232666]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_musiconhold.c: Recorded merge of revisions
	  232660-232661 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232660 |
	  tilghman | 2009-12-02 18:08:55 -0600 (Wed, 02 Dec 2009) | 19
	  lines Fix multiple issues with musiconhold, which led to classes
	  not getting destroyed properly. * Classes are now tracked past
	  removal from the core container, and module removal is actively
	  prevented until all references are freed. * A hanging reference
	  stored in the channel has been removed. This could have caused a
	  mismatch and the music state not properly cleared, if two or more
	  reloads occurred between MOH being stopped and MOH being
	  restarted. * In certain circumstances, duplicate classes were
	  possible. * A race existed at reload time between a process being
	  killed and the thread responsible for reading from the related
	  pipe respawning that process. * Several reference counts have
	  also been corrected. At least one could have caused deleted
	  classes to stick around forever, consuming resources. This
	  originally manifested as MOH external processes that were not
	  killed at reload time. (closes issue #16279, closes issue #16207)
	  Reported by: parisioa, dcabot Patches:
	  20091202__issue16279__2.diff.txt uploaded by tilghman (license
	  14) Tested by: parisioa, tilghman ........ r232661 | tilghman |
	  2009-12-02 18:09:36 -0600 (Wed, 02 Dec 2009) | 2 lines Remove
	  debugging line ........

2009-12-02 22:04 +0000 [r232578-232584]  Jeff Peeler <jpeeler@digium.com>

	* main/manager.c, /: Merged revisions 232582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r232582 | jpeeler | 2009-12-02 16:02:43 -0600 (Wed, 02 Dec 2009)
	  | 14 lines Merged revisions 232581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232581 | jpeeler | 2009-12-02 15:57:42 -0600 (Wed, 02 Dec 2009)
	  | 7 lines Send ack (response/message) after receiving manager
	  action userevent (closes issue #16264) Reported by: dimas
	  Patches: event-ack.patch uploaded by dimas (license 88) ........
	  ................

	* main/manager.c, /: Merged revisions 232576 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232576 |
	  jpeeler | 2009-12-02 15:32:50 -0600 (Wed, 02 Dec 2009) | 8 lines
	  Make manager response to "Action: events" finish with empty line
	  (closes issue #16275) Reported by: vnovy Patches: manager.c.diff
	  uploaded by vnovy (license 922) ........

2009-12-02 17:10 +0000 [r232358]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_amd.c: Merged revisions 232356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r232356 | file | 2009-12-02 13:06:54 -0400 (Wed, 02 Dec 2009) |
	  12 lines Merged revisions 232355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232355 | file | 2009-12-02 13:04:52 -0400 (Wed, 02 Dec 2009) | 5
	  lines Fix a bug where if you hung up very quickly after calling
	  AMD it would overwrite the AMDSTATUS of HANGUP with TOOLONG.
	  (closes issue #16239) Reported by: CGMChris ........
	  ................

2009-12-02 17:02 +0000 [r232353]  David Vossel <dvossel@digium.com>

	* /, main/acl.c: Merged revisions 232351 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r232351 | dvossel | 2009-12-02 11:00:15 -0600 (Wed, 02 Dec 2009)
	  | 12 lines Merged revisions 232350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232350 | dvossel | 2009-12-02 10:59:18 -0600 (Wed, 02 Dec 2009)
	  | 6 lines ast_outaddrfor doesn't do htons() on port, looks odd in
	  strace. (closes issue #16290) Reported by: wdoekes ........
	  ................

2009-12-02 16:42 +0000 [r232347]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 232345 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232345 |
	  file | 2009-12-02 12:40:14 -0400 (Wed, 02 Dec 2009) | 7 lines Add
	  support for handling the 415 Unsupported media type response like
	  we do for a 488 Not acceptable here response. (closes issue
	  #16186) Reported by: atis Patches: sip_t38_response_415.patch
	  uploaded by atis (license 242) ........

2009-12-02 15:43 +0000 [r232271]  David Vossel <dvossel@digium.com>

	* funcs/func_groupcount.c, /: Merged revisions 232269 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r232269 | dvossel | 2009-12-02 09:42:54 -0600
	  (Wed, 02 Dec 2009) | 15 lines Merged revisions 232268 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232268 | dvossel | 2009-12-02 09:41:36 -0600 (Wed, 02 Dec 2009)
	  | 9 lines fixes segfault in func_groupcount closes issue #16337)
	  Reported by: Parantido Patches: issue_16337.diff uploaded by
	  dvossel (license 671) Tested by: Parantido, dvossel ........
	  ................

2009-12-02 14:55 +0000 [r232231]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 232230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232230 |
	  file | 2009-12-02 10:54:28 -0400 (Wed, 02 Dec 2009) | 5 lines Fix
	  a bug where a scheduled item ID would get retained on
	  registrations in a certain scenario causing code to execute
	  during reload that should not. (issue AST-263) ........

2009-12-02 00:51 +0000 [r232093]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 232091 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r232091 | jpeeler | 2009-12-01 18:45:18 -0600
	  (Tue, 01 Dec 2009) | 17 lines Merged revisions 232090 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232090 | jpeeler | 2009-12-01 18:42:58 -0600 (Tue, 01 Dec 2009)
	  | 10 lines Do not modify the gain settings on data calls. (The
	  digital flag actually represents a data call.) (closes issue
	  #15972) Reported by: udosw Patches: transcap_digital_fix.diff.txt
	  uploaded by alecdavis (license 585) Tested by: alecdavis ........
	  ................

2009-12-01 23:39 +0000 [r232010-232014]  Russell Bryant <russell@digium.com>

	* /, funcs/func_lock.c: Merged revisions 232012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r232012 |
	  russell | 2009-12-01 17:38:34 -0600 (Tue, 01 Dec 2009) | 2 lines
	  Fix a build error on FreeBSD. ........

	* /, main/file.c: Merged revisions 232008 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r232008 | russell | 2009-12-01 17:27:53 -0600 (Tue, 01 Dec 2009)
	  | 9 lines Merged revisions 232007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r232007 | russell | 2009-12-01 17:25:36 -0600 (Tue, 01 Dec 2009)
	  | 2 lines Fix a warning pointed out by buildbot. ........
	  ................

2009-12-01 22:00 +0000 [r231929]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 231927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231927 | jpeeler | 2009-12-01 15:54:21 -0600 (Tue, 01 Dec 2009)
	  | 19 lines Merged revisions 231911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231911 | jpeeler | 2009-12-01 15:29:31 -0600 (Tue, 01 Dec 2009)
	  | 12 lines Fix crash with invalid frame data The crash was
	  happening as a result of a frame containing an invalid data
	  pointer, but was set with data length of zero. The few times the
	  issue was reproduced it _seemed_ that the frame was queued
	  properly, that is the data pointer was set to NULL. I never could
	  reproduce the crash so as a last resort the crash has been fixed,
	  but a check in __ast_read has been added to give as much
	  information about the source of problematic frames in the future.
	  (closes issue #16058) Reported by: atis ........ ................

2009-12-01 21:21 +0000 [r231876]  David Vossel <dvossel@digium.com>

	* main/pbx.c, /: Merged revisions 231867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231867 | dvossel | 2009-12-01 15:20:19 -0600 (Tue, 01 Dec 2009)
	  | 9 lines Merged revisions 231853 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231853 | dvossel | 2009-12-01 15:14:31 -0600 (Tue, 01 Dec 2009)
	  | 3 lines WaitExten m option with no parameters generates frame
	  with zero datalen but non-null data ptr ........ ................

2009-12-01 15:48 +0000 [r231742]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/file.c: Merged revisions 231741 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231741 | mnicholson | 2009-12-01 09:47:36 -0600 (Tue, 01 Dec
	  2009) | 9 lines Merged revisions 231740 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231740 | mnicholson | 2009-12-01 09:34:57 -0600 (Tue, 01 Dec
	  2009) | 2 lines Ignore unknown formats in ast_format_str_reduce()
	  and return an error if no know formats are found. ........
	  ................

2009-11-30 21:55 +0000 [r231694]  Kevin P. Fleming <kpfleming@digium.com>

	* main/udptl.c, /, channels/chan_sip.c, include/asterisk/udptl.h:
	  Merged revisions 231692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231692 |
	  kpfleming | 2009-11-30 15:47:42 -0600 (Mon, 30 Nov 2009) | 22
	  lines Another round of UDPTL stack fixes/improvements: 1) Allow
	  users of UDPTL stack to associate a character-string tag with a
	  UDPTL session, so that log/error/debug messages generated by the
	  UDPTL stack can be 'connected' to the endpoint that caused them
	  to be generated. 2) Improve comments (and process) of calculating
	  the far end's maximum IFP size when redundancy mode is in use for
	  error correction. 3) When an IFP larger than the calculated 'far
	  max IFP' size is presented for writing, truncate it rather than
	  putting in the buffer and allowing the buffer to overflow; this
	  will cause the ends to retrain to a lower bit rate that produces
	  IFPs of an appropriate size if possible, and if not possible, the
	  FAX transfer will fail completely. In these cases, it is due to
	  the one endpoint supplying a T38FaxMaxDatagram value that is
	  improperly calculated and is too low to be of use; we have
	  configuration options available to override this behavior. 4)
	  Eliminate use of T38FaxMaxDatagram value in udptl.conf; it is no
	  longer needed. ........

2009-11-30 21:36 +0000 [r231690]  Matthew Nicholson <mnicholson@digium.com>

	* apps/app_voicemail.c, include/asterisk/file.h, /, main/file.c,
	  main/app.c: Merged revisions 231688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231688 | mnicholson | 2009-11-30 15:31:55 -0600 (Mon, 30 Nov
	  2009) | 15 lines Merged revisions 231614 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231614 | mnicholson | 2009-11-30 15:11:44 -0600 (Mon, 30 Nov
	  2009) | 8 lines Remove duplicate entries from voicemail format
	  lists. This prevents app_voicemail from entering an infinite loop
	  when the same format is specified twice in the format list.
	  (closes issue #15625) Reported by: Shagg63 Tested by: mnicholson
	  Review: https://reviewboard.asterisk.org/r/429/ ........
	  ................

2009-11-30 20:58 +0000 [r231608]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_queue.c: Turn off debug mode in 1.6.1; fix such that
	  debug mode and non-debug mode functions return the same types.
	  (Fixes an issue brought up in chat by twilson)

2009-11-30 20:47 +0000 [r231604]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 231602 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231602 |
	  file | 2009-11-30 16:44:30 -0400 (Mon, 30 Nov 2009) | 5 lines
	  When receiving SDP that matches the version of the last one do
	  not treat it as a fatal error. (closes issue #16238) Reported by:
	  seandarcy ........

2009-11-30 18:57 +0000 [r231512-231559]  David Vossel <dvossel@digium.com>

	* apps/app_queue.c, /: Merged revisions 231556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231556 |
	  dvossel | 2009-11-30 12:55:07 -0600 (Mon, 30 Nov 2009) | 11 lines
	  app_queue crashes randomly, often during call-transfers This
	  patch adds a ref to the queue_ent object's parent call_queue in
	  queue_exec() so the call_queue won't be destroyed while the the
	  queue_ent still holds a pointer to it. (closes issue 0015686)
	  Tested by: dvossel, aragon ........

	* main/rtp.c, /: Merged revisions 231491 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231491 | dvossel | 2009-11-30 11:28:28 -0600 (Mon, 30 Nov 2009)
	  | 17 lines Merged revisions 231441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231441 | dvossel | 2009-11-30 11:14:08 -0600 (Mon, 30 Nov 2009)
	  | 11 lines fixes crash caused by RTP comfort noise payload
	  greater than 24 bytes AST-2009-010 (closes issue #16242) Reported
	  by: amorsen Patches: issue16242.diff uploaded by oej (license
	  306) Tested by: amorsen, oej, dvossel ........ ................

2009-11-25 22:34 +0000 [r231301]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 231299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r231299 | tilghman | 2009-11-25 16:33:02 -0600 (Wed, 25 Nov 2009)
	  | 9 lines Merged revisions 231298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r231298 | tilghman | 2009-11-25 16:31:57 -0600 (Wed, 25 Nov 2009)
	  | 2 lines After a frame duplication failure, unlock the channel
	  before returning. ........ ................

2009-11-25 15:44 +0000 [r231190]  Matthew Nicholson <mnicholson@digium.com>

	* /, pbx/pbx_lua.c: Merged revisions 231189 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231189 |
	  mnicholson | 2009-11-25 09:42:48 -0600 (Wed, 25 Nov 2009) | 4
	  lines Load pbx_lua with global symbols to allow linking with
	  other lua libraries. Found by Maxim Litnitskiy. ........

2009-11-24 20:35 +0000 [r231135]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_queue.c, /: Merged revisions 231134 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231134 |
	  tilghman | 2009-11-24 14:31:28 -0600 (Tue, 24 Nov 2009) | 7 lines
	  Found a few places where queue refcounts were counted
	  incorrectly. Also add debug statements. (closes issue #15982,
	  closes issue #15984) Reported by: atis Patches:
	  20091111__issue15982.diff.txt uploaded by tilghman (license 14)
	  Tested by: atis ........

2009-11-24 18:54 +0000 [r231097]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 231095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r231095 |
	  jpeeler | 2009-11-24 12:50:36 -0600 (Tue, 24 Nov 2009) | 11 lines
	  Fix erroneous hangup extension execution ast_spawn_extension
	  behaves differently from 1.4 in that hangups and extensions that
	  do not exist do not return an error, whereas in 1.6 it does. This
	  is now taken into account so that the AST_FLAG_BRIDGE_HANGUP_RUN
	  flag gets set properly. (closes issue #16106) Reported by:
	  ajohnson Tested by: ajohnson ........

2009-11-23 15:47 +0000 [r230883]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  230881 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r230881 |
	  file | 2009-11-23 09:45:45 -0600 (Mon, 23 Nov 2009) | 7 lines
	  Change fax detection in chan_sip so it behaves as one would
	  expect. Internally the way T.38 is negotiated has changed and the
	  option no longer reflects a behavior that is valid. It will now
	  look for a CNG tone on received calls and if present send the
	  call to the 'fax' extension. It is then up to the application or
	  channel to request the switch over to T.38. ........

2009-11-23 15:36 +0000 [r230790-230879]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 230877 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r230877 | kpfleming | 2009-11-23 09:34:16 -0600 (Mon, 23 Nov
	  2009) | 9 lines Merged revisions 230839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r230839 | kpfleming | 2009-11-23 09:09:24 -0600 (Mon, 23 Nov
	  2009) | 1 line Correct fix for issue #16268... the reporter's
	  original patch was very close to correct. ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 230773 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r230773 | kpfleming | 2009-11-23 08:15:48 -0600 (Mon, 23 Nov
	  2009) | 12 lines Merged revisions 230772 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r230772 | kpfleming | 2009-11-23 08:13:56 -0600 (Mon, 23 Nov
	  2009) | 5 lines Ensure that SDP parsing does not ignore the last
	  line of the SDP. (closes issue #16268) Reported by: sgimeno
	  ........ ................

2009-11-20 22:37 +0000 [r230728]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 230726 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r230726 | dvossel | 2009-11-20 16:35:54 -0600 (Fri, 20 Nov 2009)
	  | 7 lines fixes iax2 show cache locking error, thanks alecdavis!
	  (closes issue #16094) Reported by: alecdavis Patches:
	  bug16094.diff.txt uploaded by alecdavis (license 585) Tested by:
	  alecdavis, dvossel ........

2009-11-20 21:08 +0000 [r230630]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/features.c: Merged revisions 230628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r230628 | mnicholson | 2009-11-20 15:01:10 -0600 (Fri, 20 Nov
	  2009) | 15 lines Merged revisions 230627 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r230627 | mnicholson | 2009-11-20 14:53:06 -0600 (Fri, 20 Nov
	  2009) | 8 lines Copy the peer CDR's userfield to the bridge CDR
	  if it exists. This is necessary for the recordagentcalls option
	  in chan_agent to store the recorded file name in the bridge CDR.
	  (closes issue #14590) Reported by: msetim Patches:
	  queue_agent_userfield.patch uploaded by Laureano (license 265)
	  Tested by: Laureano, mnicholson ........ ................

2009-11-20 17:32 +0000 [r230511-230586]  David Vossel <dvossel@digium.com>

	* /, include/asterisk/audiohook.h, main/audiohook.c: Merged
	  revisions 230583 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r230583 |
	  dvossel | 2009-11-20 11:26:20 -0600 (Fri, 20 Nov 2009) | 6 lines
	  audiohook signal trigger on every status change (issue #14618)
	  Review: https://reviewboard.asterisk.org/r/434/ ........

	* apps/app_mixmonitor.c, /: Merged revisions 230509 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r230509 | dvossel | 2009-11-19 15:26:21 -0600
	  (Thu, 19 Nov 2009) | 17 lines Merged revisions 230508 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r230508 | dvossel | 2009-11-19 15:22:46 -0600 (Thu, 19 Nov 2009)
	  | 10 lines fixes MixMonitor thread not exiting when
	  StopMixMonitor is used (closes issue #16152) Reported by: AlexMS
	  Patches: stopmixmonitor_1.4.diff uploaded by dvossel (license
	  671) Tested by: dvossel, AlexMS Review:
	  https://reviewboard.asterisk.org/r/424/ ........ ................

2009-11-30  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.11

	* AST-2009-010

	* SDP parser regression fix (issue #16268, issue #16238)

2009-11-18  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.10

2009-11-13  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.10-rc3

2009-11-13 15:57 +0000 [r229914]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 229912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r229912 |
	  file | 2009-11-13 09:56:16 -0600 (Fri, 13 Nov 2009) | 2 lines Fix
	  T.38 negotiation regression introduced with the SDP parser
	  changes. ........

2009-11-12 23:31 +0000 [r229751]  Jason Parker <jparker@digium.com>

	* channels/chan_oss.c, /: Merged revisions 229750 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r229750 |
	  qwell | 2009-11-12 17:30:10 -0600 (Thu, 12 Nov 2009) | 1 line Fix
	  mute toggling on OSS channels. ........

2009-11-12 16:48 +0000 [r229672]  David Vossel <dvossel@digium.com>

	* funcs/func_audiohookinherit.c, /: Merged revisions 229670 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r229670 | dvossel | 2009-11-12 10:44:39 -0600
	  (Thu, 12 Nov 2009) | 12 lines Merged revisions 229669 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229669 | dvossel | 2009-11-12 10:41:49 -0600 (Thu, 12 Nov 2009)
	  | 6 lines fixes merging error, datastore was being freed in the
	  wrong function. (closes issue #16219) Reported by: aragon
	  ........ ................

2009-11-11 20:48 +0000 [r229569]  David Ruggles <thedavidfactor@gmail.com>

	* doc/externalivr.txt: Merged revisions 229568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r229568 |
	  diruggles | 2009-11-11 15:47:06 -0500 (Wed, 11 Nov 2009) | 9
	  lines Remove non-functional feature from ExternalIVR
	  documentation Remove non-functional socket implementation of
	  ExternalIVR from documentation (closes issue #16225) Reported by:
	  thedavidfactor Patches: externalivr.txt.20091111.1542.patch
	  uploaded by thedavidfactor (license 903) ........

2009-11-11 19:54 +0000 [r229491-229501]  David Brooks <dbrooks@digium.com>

	* main/pbx.c, /: Merged revisions 229499 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r229499 | dbrooks | 2009-11-11 13:48:18 -0600 (Wed, 11 Nov 2009)
	  | 15 lines Merged revisions 229498 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229498 | dbrooks | 2009-11-11 13:46:19 -0600 (Wed, 11 Nov 2009)
	  | 8 lines Solaris doesn't like NULL going to ast_log Solaris will
	  crash if NULL is passed to ast_log. This simple patch simply uses
	  S_OR to get around this. (closes issue #15392) Reported by:
	  yrashk ........ ................

	* /, apps/app_softhangup.c: Merged revisions 229460 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r229460 | dbrooks | 2009-11-11 12:13:56 -0600 (Wed, 11 Nov 2009)
	  | 7 lines Flags not initialized in app_softhangup.c, causing
	  undefined behavior Trivial patch [kobaz] to initialize an
	  ast_flags = {0} (closes issue #16129) Reported by: kobaz ........

2009-11-10 22:17 +0000 [r229364]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 229361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r229361 | tilghman | 2009-11-10 16:14:22 -0600 (Tue, 10 Nov 2009)
	  | 19 lines Merged revisions 229360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229360 | tilghman | 2009-11-10 16:09:16 -0600 (Tue, 10 Nov 2009)
	  | 12 lines If two pattern classes start with the same digit and
	  have the same number of characters, they will compare equal. The
	  example given in the issue report is that of [234] and [246],
	  which have these characteristics, yet they are clearly not
	  equivalent. The code still uses these two characteristics, yet
	  when the two scores compare equal, an additional check will be
	  done to compare all characters within the class to verify
	  equality. (closes issue #15421) Reported by: jsmith Patches:
	  20091109__issue15421__2.diff.txt uploaded by tilghman (license
	  14) Tested by: jsmith, thedavidfactor ........ ................

2009-11-10 22:04 +0000 [r229358]  David Ruggles <thedavidfactor@gmail.com>

	* doc/externalivr.txt: Merged revisions 229356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r229356 | diruggles | 2009-11-10 17:01:50 -0500 (Tue, 10 Nov
	  2009) | 16 lines Merged revisions 229355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229355 | diruggles | 2009-11-10 16:45:15 -0500 (Tue, 10 Nov
	  2009) | 9 lines Fix ExternalIVR Documentation Remove
	  documentation for event that doesn't function (closes issue
	  #16220) Reported by: thedavidfactor Patches:
	  externalivr.txt.20091110.1622.patch uploaded by thedavidfactor
	  (license 903) ........ ................

2009-11-10 21:31 +0000 [r229353]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, /: Merged revisions 229351 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r229351 |
	  tilghman | 2009-11-10 15:22:50 -0600 (Tue, 10 Nov 2009) | 7 lines
	  When GOSUB is invoked within an AGI, it may not exit correctly.
	  (closes issue #16216) Reported by: atis Patches:
	  20091110__atis_work.diff.txt uploaded by tilghman (license 14)
	  Tested by: atis ........

2009-11-10 20:09 +0000 [r229284]  Joshua Colp <jcolp@digium.com>

	* /, codecs/codec_g726.c: Merged revisions 229282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r229282 | file | 2009-11-10 16:06:13 -0400 (Tue, 10 Nov 2009) |
	  15 lines Merged revisions 229281 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229281 | file | 2009-11-10 16:03:14 -0400 (Tue, 10 Nov 2009) | 8
	  lines Remove broken support for direct transcoding between G.726
	  RFC3551 and G.726 AAL2. On some systems the translation core
	  would actually consider g726aal2 -> g726 -> signed linear to be a
	  quicker path then g726aal2 -> signed linear which exposed this
	  problem. (closes issue #15504) Reported by: globalnetinc ........
	  ................

2009-11-10 17:53 +0000 [r229233]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 229168 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r229168 | dvossel | 2009-11-10 11:16:49 -0600
	  (Tue, 10 Nov 2009) | 15 lines Merged revisions 229167 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229167 | dvossel | 2009-11-10 11:15:57 -0600 (Tue, 10 Nov 2009)
	  | 9 lines don't crash on log message in solaris AST-2009-006
	  (closes issue #16206) Reported by: bklang Tested by: bklang
	  ........ ................

2009-11-10 17:38 +0000 [r229230]  David Ruggles <thedavidfactor@gmail.com>

	* doc/externalivr.txt: Merged revisions 229228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r229228 | diruggles | 2009-11-10 12:33:47 -0500 (Tue, 10 Nov
	  2009) | 18 lines Merged revisions 229191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r229191 | diruggles | 2009-11-10 12:23:59 -0500 (Tue, 10 Nov
	  2009) | 11 lines Document ExternalIVR event tag collision
	  ExternalIVR uses the D tag for two different event types. This
	  documents that behavior and how to differentiate between the two
	  cases. Also includes a minor spelling fix and clarification
	  (closes issue #16211) Reported by: thedavidfactor Patches:
	  externalivr.txt.20091109.1507.patch uploaded by thedavidfactor
	  (license 903) ........ ................

2009-11-10 15:38 +0000 [r229099]  Matthew Nicholson <mnicholson@digium.com>

	* channels/chan_sip.c: Reverted revision 202008. (closes issue
	  #16175) Reported by: paul-tg

2009-11-10 15:36 +0000 [r229095-229098]  David Vossel <dvossel@digium.com>

	* res/res_config_pgsql.c: reverting changes made by r229095 as they
	  are not applicable to 1.6.1

	* res/res_config_pgsql.c, /: Merged revisions 229093 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r229093 | dvossel | 2009-11-10 09:27:45 -0600 (Tue, 10 Nov 2009)
	  | 11 lines fixes pgsql double free of threadstorage A thread
	  storage variable was being freed incorrectly, which resulted in a
	  double free if two queries were made in the same thread. (closes
	  issue #16011) Reported by: cristiandimache Patches:
	  issue16011.diff uploaded by dvossel (license 671) ........

2009-11-10 11:22 +0000 [r229067]  Gavin Henry <ghenry@suretecsystems.com>

	* contrib/scripts/asterisk.ldap-schema, /: Merged revisions 229050
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r229050 | ghenry | 2009-11-10 11:16:10 +0000 (Tue, 10
	  Nov 2009) | 20 lines Schema file additions * Added
	  AsteriskDialplan, AsteriskAccount and AsteriskMailbox
	  objectClasses to allow standalone dialplan, account and mailbox
	  entries (STRUCTURAL) * Added new Fields: - AstAccountLanguage,
	  AstAccountTransport, AstAccountPromiscRedir, -
	  AstAccountAccountCode, AstAccountSetVar, AstAccountAllowOverlap,
	  - AstAccountVideoSupport, AstAccountIgnoreSDPVersion * Removed
	  redundant IPaddr (there's already IPAddress) - Gives more
	  configuration Flags for SIP-Users available (tested) - Allows to
	  create Asterisk Attributes in defined Asterisk ObjectClasses
	  without extensibleObject (which really should be the last
	  resort); gives also additional possibilities for LDAP-filter
	  (closes issue #15874) Reported by: Medozas Patches:
	  asterisk.ldap-schema.patch uploaded by Medozas (license 41)
	  Tested by: Medozas, suretec ........

2009-11-09 22:52 +0000 [r229016]  Terry Wilson <twilson@digium.com>

	* channels/chan_local.c, /: Merged revisions 229015 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r229015 | twilson | 2009-11-09 16:50:22 -0600 (Mon, 09 Nov 2009)
	  | 8 lines Don't crash when bridge->tech_pvt == NULL This is a
	  similar solution to what is in place for chan_agent (closes issue
	  #16003) Reported by: atis Tested by: twilson ........

2009-11-09 22:18 +0000 [r229014]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: fixes segfault when transferring a queue
	  caller In sip_hangup we attempted to lock p->owner after we set
	  it to NULL. Thanks to fhackenberger for reporting the issue and
	  submitting a patch. (closes issue 0015848) Reported by:
	  fhackenberger Patches: digium_bug_0015848 uploaded by
	  fhackenberger (license 592) Tested by: fhackenberger, lmadsen,
	  TomS, shin-shoryuken, dvossel

2009-11-09  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.10-rc2

2009-11-09 15:39 +0000 [r228899]  Leif Madsen <lmadsen@digium.com>

	* main/channel.c: Merged revisions 228897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228897 | lmadsen | 2009-11-09 09:38:38 -0600 (Mon, 09 Nov 2009)
	  | 14 lines Merged revisions 228896 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228896 | lmadsen | 2009-11-09 09:37:43 -0600 (Mon, 09 Nov 2009)
	  | 6 lines Update WARNING message. Update a WARNING message to
	  give a suggested fix when encountered. (closes issue #16198)
	  Reported by: atis Tested by: atis ........ ................

2009-11-09 14:54 +0000 [r228860]  Matthew Nicholson <mnicholson@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 228858 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r228858 | mnicholson | 2009-11-09 08:37:07 -0600
	  (Mon, 09 Nov 2009) | 15 lines Merged revisions 228827 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228827 | mnicholson | 2009-11-09 08:16:03 -0600 (Mon, 09 Nov
	  2009) | 8 lines Perform limited bounds checking when destroying
	  ast_mutex_t structures to make sure we don't try to use negative
	  indices. (closes issue #15588) Reported by: zerohalo Patches:
	  20090820__issue15588.diff.txt uploaded by tilghman (license 14)
	  Tested by: zerohalo ........ ................

2009-11-06 22:37 +0000 [r228695]  David Vossel <dvossel@digium.com>

	* main/channel.c, /: Merged revisions 228693 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228693 | dvossel | 2009-11-06 16:35:44 -0600 (Fri, 06 Nov 2009)
	  | 16 lines Merged revisions 228692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228692 | dvossel | 2009-11-06 16:33:27 -0600 (Fri, 06 Nov 2009)
	  | 9 lines fixes audiohook write crash occuring in chan_spy
	  whisper mode. After writing to the audiohook list in ast_write(),
	  frames were being freed incorrectly. Under certain conditions
	  this resulted in a double free crash. (closes issue #16133)
	  Reported by: wetwired ........ ................

2009-11-06 20:37 +0000 [r228650]  Matthew Nicholson <mnicholson@digium.com>

	* funcs/func_base64.c, /, main/utils.c: Merged revisions 228620 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r228620 | mnicholson | 2009-11-06 13:47:11 -0600
	  (Fri, 06 Nov 2009) | 15 lines Merged revisions 228378 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228378 | mnicholson | 2009-11-06 10:26:59 -0600 (Fri, 06 Nov
	  2009) | 8 lines Properly handle '=' while decoding base64
	  messages and null terminate strings returned from BASE64_DECODE.
	  (closes issue #15271) Reported by: chappell Patches:
	  base64_fix.patch uploaded by chappell (license 8) Tested by:
	  kobaz ........ ................

2009-11-06 18:41 +0000 [r228550]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 228548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228548 | file | 2009-11-06 14:37:59 -0400 (Fri, 06 Nov 2009) |
	  11 lines Merged revisions 228547 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228547 | file | 2009-11-06 14:32:58 -0400 (Fri, 06 Nov 2009) | 4
	  lines Don't overwrite caller ID name on a trunk with the
	  configured fullname when using users.conf (issue ABE-1989)
	  ........ ................

2009-11-06  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.10-rc1

2009-11-06 17:53 +0000 [r228502]  Joshua Colp <jcolp@digium.com>

	* /, doc/tex/localchannel.tex: Merged revisions 228499 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r228499 | file | 2009-11-06 13:52:00 -0400 (Fri, 06 Nov 2009) | 2
	  lines Fix the localchannel.tex file. ........

2009-11-06 17:24 +0000 [r228422-228451]  David Vossel <dvossel@digium.com>

	* /, codecs/codec_ilbc.c: Merged revisions 228441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r228441 |
	  dvossel | 2009-11-06 11:22:31 -0600 (Fri, 06 Nov 2009) | 3 lines
	  Fixes merging issue from 1.4, frame data is held in data.ptr in
	  trunk ........

	* /, codecs/codec_ilbc.c: Merged revisions 228420 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228420 | dvossel | 2009-11-06 11:09:01 -0600 (Fri, 06 Nov 2009)
	  | 19 lines Merged revisions 228418 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228418 | dvossel | 2009-11-06 11:07:13 -0600 (Fri, 06 Nov 2009)
	  | 13 lines fixes segfault in iLBC For reasons not yet known, it
	  appears possible for an ast_frame to have a datalen greater than
	  zero while the actual data is NULL during Packet Loss
	  Concealment. Most codecs don't support PLC so this doesn't affect
	  them. This patch catches the malformed frame and prevents the
	  crash from occuring. Additional efforts to determine why it is
	  possible for a frame to look like this are still being
	  investigated. (issue #16979) ........ ................

2009-11-06 16:44 +0000 [r228412]  Joshua Colp <jcolp@digium.com>

	* /, main/abstract_jb.c: Merged revisions 228410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228410 | file | 2009-11-06 12:42:23 -0400 (Fri, 06 Nov 2009) |
	  14 lines Merged revisions 228409 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228409 | file | 2009-11-06 12:41:20 -0400 (Fri, 06 Nov 2009) | 7
	  lines Fix a bug caused by a partially invalid frame (from the
	  jitterbuffer) passing through the Asterisk core. (closes issue
	  #15560) Reported by: jvandal (closes issue #15709) Reported by:
	  covici ........ ................

2009-11-06 15:44 +0000 [r228267-228341]  David Vossel <dvossel@digium.com>

	* /, main/astfd.c: Merged revisions 228339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r228339 | dvossel | 2009-11-06 09:42:46 -0600 (Fri, 06 Nov 2009)
	  | 12 lines Merged revisions 228338 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228338 | dvossel | 2009-11-06 09:41:41 -0600 (Fri, 06 Nov 2009)
	  | 5 lines fixes crash in astfd.c (closes issue #15981) Reported
	  by: slavon ........ ................

	* funcs/func_audiohookinherit.c, /: Merged revisions 228268 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r228268 | dvossel | 2009-11-06 09:04:24 -0600 (Fri, 06
	  Nov 2009) | 9 lines fixes memory leak in func_audiohookinherit.c
	  (closes issue #15394) Reported by: boroda Patches:
	  bug15394_memoryleak_diff2.txt uploaded by dbrooks (license 790)
	  Tested by: dbrooks, boroda ........

	* /, channels/chan_sip.c: Merged revisions 227238 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r227238 |
	  dvossel | 2009-11-03 11:12:52 -0600 (Tue, 03 Nov 2009) | 5 lines
	  user.conf entries in SIP were not having their peer type set.
	  (closes issue #16120) Reported by: jsmith ........

2009-11-05 22:13 +0000 [r228193-228197]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_meetme.c: Merged revisions 228196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r228196 |
	  tilghman | 2009-11-05 16:12:45 -0600 (Thu, 05 Nov 2009) | 2 lines
	  Yet another error message in the dialplan (thanks,
	  rmudgett/russellb) ........

	* /, apps/app_meetme.c: Merged revisions 228191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r228191 |
	  tilghman | 2009-11-05 15:24:21 -0600 (Thu, 05 Nov 2009) | 7 lines
	  MEETME_INFO should not return a literal error message to the
	  dialplan. (closes issue #15450) Reported by: JimVanM Patches:
	  meetmeinfopatch.diff.txt uploaded by dbrooks (license 790) Tested
	  by: JimVanM ........

2009-11-05 21:24 +0000 [r228192]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 228189 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r228189 |
	  jpeeler | 2009-11-05 15:23:06 -0600 (Thu, 05 Nov 2009) | 11 lines
	  Fix the fix for chanspy option o In 224178, I assumed the
	  uploaded patch was correct as it had received positive feedback.
	  The flags were being checked in the incorrect location. Upon
	  testing the fix this time it was also found that the flags from
	  the dialplan weren't being copied to the
	  chanspy_translation_helper. (closes issue #16167) Reported by:
	  marhbere ........

2009-11-05 19:41 +0000 [r228147]  David Brooks <dbrooks@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 228145 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r228145 | dbrooks | 2009-11-05 13:34:50 -0600
	  (Thu, 05 Nov 2009) | 16 lines Merged revisions 228078 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228078 | dbrooks | 2009-11-05 12:59:41 -0600 (Thu, 05 Nov 2009)
	  | 9 lines chan_misdn Asterisk 1.4.27-rc2 crash Crash related to
	  chan_misdn connection. Patch submitted by gknispel_proformatique,
	  tested by francesco_r. "I have many crash since i have upgraded
	  to Asterisk 1.4.27-rc2. Attached a full bt." This patch zeros out
	  an ast_frame. (closes issue #16041) Reported by: francesco_r
	  ........ ................

2009-11-05 19:19 +0000 [r228090]  Jason Parker <jparker@digium.com>

	* channels/chan_vpb.cc, /: Merged revisions 228080 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r228080 | qwell | 2009-11-05 13:16:29 -0600
	  (Thu, 05 Nov 2009) | 15 lines Merged revisions 228079 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r228079 | qwell | 2009-11-05 13:14:25 -0600 (Thu, 05 Nov 2009) |
	  8 lines Fix crash on VPB exception when no hardware is present.
	  (closes issue #14970) Reported by: tzafrir Patches:
	  vpb_exception.diff uploaded by tzafrir (license 46) Tested by:
	  markwaters ........ ................

2009-11-05 17:10 +0000 [r228016]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_externalivr.c: Merged revisions 228015 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r228015 | tilghman | 2009-11-05 11:08:02 -0600 (Thu, 05 Nov 2009)
	  | 4 lines Don't crash if no arguments are passed. (closes issue
	  #16119) Reported by: thedavidfactor ........

2009-11-04 23:56 +0000 [r227948]  Jeff Peeler <jpeeler@digium.com>

	* res/res_monitor.c, /: Merged revisions 227945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r227945 | jpeeler | 2009-11-04 17:50:59 -0600 (Wed, 04 Nov 2009)
	  | 21 lines Merged revisions 227944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227944 | jpeeler | 2009-11-04 17:47:08 -0600 (Wed, 04 Nov 2009)
	  | 14 lines Fix incorrect filename comparsion after monitor file
	  change The logic to detect if a requested file is indeed a
	  different file from the current file was incorrect. The main
	  issue being confusion of the use of filename_base which was
	  previously set without pathing information and then compared to
	  another full path. Robust file comparison logic has been added to
	  properly check if two files are the same even if symlinks are
	  used. (closes issue #15313) Reported by: caspy Patches:
	  20091103__issue15313__1.4.diff.txt uploaded by jpeeler (license
	  325) but mostly tilghman's work ........ ................

2009-11-04 21:15 +0000 [r227761-227832]  Matthew Nicholson <mnicholson@digium.com>

	* apps/app_dial.c, /: Merged revisions 227829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r227829 | mnicholson | 2009-11-04 15:03:33 -0600 (Wed, 04 Nov
	  2009) | 17 lines Merged revisions 227827 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227827 | mnicholson | 2009-11-04 14:52:27 -0600 (Wed, 04 Nov
	  2009) | 10 lines This patch modifies the Dial application to
	  monitor the calling channel for hangups while playing back
	  announcements. (closes issue #16005) Reported by: falves11
	  Patches: dial-announce-hangup-fix1.diff uploaded by mnicholson
	  (license 96) Tested by: mnicholson, falves11 Review:
	  https://reviewboard.asterisk.org/r/407/ ........ ................

	* channels/chan_sip.c: Modify the SDP parsing code to parse session
	  and media level items separately. With the new code, media level
	  proprieties should no longer be confused with session level
	  proprieties. This change also reorganizes some of the SDP parsing
	  code which should make it easier to manage in the future. (closes
	  issue #14994) Reported by: frawd

2009-11-04 19:27 +0000 [r227723-227745]  Joshua Colp <jcolp@digium.com>

	* /, static-http/prototype.js: Merged revisions 227739 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r227739 | file | 2009-11-04 15:26:19 -0400 (Wed,
	  04 Nov 2009) | 12 lines Merged revisions 227735 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227735 | file | 2009-11-04 15:25:37 -0400 (Wed, 04 Nov 2009) | 5
	  lines Fix a security issue where it may be possible for someone
	  to execute a cross-site AJAX request exploit. (AST-2009-009)
	  ........ ................

	* /, channels/chan_sip.c: Merged revisions 227712 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r227712 | file | 2009-11-04 15:20:46 -0400 (Wed, 04 Nov 2009) |
	  12 lines Merged revisions 227700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227700 | file | 2009-11-04 15:17:39 -0400 (Wed, 04 Nov 2009) | 5
	  lines Fix a security issue where sending a REGISTER with a
	  differing username in the From URI and Authorization header would
	  reveal whether it was valid or not. (AST-2009-008) ........
	  ................

2009-11-03 20:01 +0000 [r227374]  Jason Parker <jparker@digium.com>

	* Makefile, /, main/Makefile: Merged revisions 227372 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r227372 | qwell | 2009-11-03 13:59:46 -0600 (Tue, 03 Nov 2009) |
	  9 lines Fix some build issues on Solaris. (closes issue #14517)
	  (SWP-109) Reported by: asgaroth Patches: bug_14517.diff uploaded
	  by snuffy (license 35) Tested by: asgaroth, snuffy, dougm, qwell
	  ........

2009-11-03 19:49 +0000 [r227363-227370]  Leif Madsen <lmadsen@digium.com>

	* apps/app_controlplayback.c, /: Merged revisions 227368 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r227368 | lmadsen | 2009-11-03 13:48:53 -0600 (Tue, 03
	  Nov 2009) | 8 lines Change warning message to debug message.
	  app_controlplayback outputs a warning, when in fact it is normal.
	  (closes issue #16071) Reported by: atis Patches:
	  controlplayback_warning.patch uploaded by atis (license 242)
	  ........

	* configs/extensions.conf.sample, /: Merged revisions 227361 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r227361 | lmadsen | 2009-11-03 13:25:18 -0600 (Tue, 03
	  Nov 2009) | 11 lines Additional fixes to the
	  extensions.conf.sample file. Update the extensions.conf.sample
	  [stdexten] context so that we use the variable instead of
	  requiring it to be passed explicitly. Also updated uses of the
	  [stdexten] context throughout. (closes issue #15858) Reported by:
	  pprindeville Patches: stdexten-context-update.txt uploaded by
	  lmadsen (license 10) Tested by: pprindeville ........

2009-11-03 18:11 +0000 [r227279]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Merged revisions 227275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227275 | rmudgett | 2009-11-03 11:55:47 -0600 (Tue, 03 Nov 2009)
	  | 4 lines Make sure the outgoing flag is cleared if a new channel
	  fails to get created for outgoing calls. This is the relevant
	  portion of asterisk/trunk -r226648 ........

2009-11-03 15:38 +0000 [r227169]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 227167 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r227167 | file | 2009-11-03 11:37:08 -0400 (Tue, 03 Nov 2009) |
	  12 lines Merged revisions 227166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227166 | file | 2009-11-03 11:36:16 -0400 (Tue, 03 Nov 2009) | 5
	  lines Fix a bug where an RPID header could be generated with a
	  blank username in the URI. (closes issue #15909) Reported by:
	  kobaz ........ ................

2009-11-03 15:24 +0000 [r227164]  Leif Madsen <lmadsen@digium.com>

	* configs/extensions.conf.sample, /: Merged revisions 227162 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r227162 | lmadsen | 2009-11-03 09:19:47 -0600 (Tue, 03
	  Nov 2009) | 7 lines Update extensions.conf.sample file to fix
	  incorrect extensions. (closes issue #15857) Reported by:
	  pprindeville Patches: stdexten.patch#2 uploaded by pprindeville
	  (license 347) Tested by: pprindeville ........

2009-11-03 13:32 +0000 [r227155]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 227091 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r227091 | oej | 2009-11-03 12:11:15 +0100 (Tis, 03 Nov 2009) | 15
	  lines Merged revisions 227088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r227088 | oej | 2009-11-03 11:29:59 +0100 (Tis, 03 Nov 2009) | 7
	  lines Use proper response code when violating Contact ACL's.
	  https://reviewboard.asterisk.org/r/415/ Thanks kpfleming for a
	  quick review. (EDVX-003) ........ ................

2009-11-02 21:05 +0000 [r226977]  David Brooks <dbrooks@digium.com>

	* channels/chan_sip.c: SIP channel name uniqueness SIP channel
	  names were supposed to be unique by way of a name suffix derived
	  from the pointer to the channel's private data. Uniqueness was
	  preserved on 32-bit systems, but not on 64-bit systems. This
	  patch, as suggested by kpfleming, replaces this suffix with a
	  simple incremented unsigned int. (closes issue #15152) Reported
	  by: palbrecht Review: https://reviewboard.asterisk.org/r/420/

2009-11-02 18:11 +0000 [r226892]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 226890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r226890 | file | 2009-11-02 14:08:54 -0400 (Mon, 02 Nov 2009) |
	  18 lines Merged revisions 226889 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226889 | file | 2009-11-02 14:08:11 -0400 (Mon, 02 Nov 2009) |
	  11 lines Fix a bug where the recorded privacy introduction file
	  would not get removed if the caller hung up while the called
	  party had not yet answered. This was fixed by introducing an
	  argument to the 'n' option which, when enabled, removes the
	  introduction file under all scenarios. This was done to preserve
	  the behavior that has existed for quite some time. (closes issue
	  #14674) Reported by: ulogic Patches: bug14674.patch uploaded by
	  jpeeler (license 325) ........ ................

2009-11-02 17:17 +0000 [r226814]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/init.d/rc.redhat.asterisk: Merged revisions 226812 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r226812 | tilghman | 2009-11-02 11:15:31 -0600
	  (Mon, 02 Nov 2009) | 15 lines Merged revisions 226811 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226811 | tilghman | 2009-11-02 11:14:20 -0600 (Mon, 02 Nov 2009)
	  | 8 lines Don't allow two separate instances of safe_asterisk
	  when restarting from the init script. (closes issue #14562)
	  Reported by: davidw Patches: Initially
	  20091022__issue14562.diff.txt uploaded by tilghman (license 14)
	  Modified to 20091030__Issue14562_diff.txt uploaded by davidw
	  (license 780) Tested by: davidw ........ ................

2009-10-29 18:15 +0000 [r226534]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /, doc/tex/localchannel.tex: Merged
	  revisions 226532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r226532 | file | 2009-10-29 15:13:42 -0300 (Thu, 29 Oct 2009) |
	  13 lines Merged revisions 226531 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226531 | file | 2009-10-29 15:11:26 -0300 (Thu, 29 Oct 2009) | 6
	  lines Add an option to enabling passing music on hold start and
	  stop requests through instead of acting on them in chan_local.
	  (closes issue #14709) Reported by: dimas ........
	  ................

2009-10-28 20:15 +0000 [r226380-226386]  Leif Madsen <lmadsen@digium.com>

	* configs/sip.conf.sample: Merged revisions 226384 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r226384 | lmadsen | 2009-10-28 15:11:07 -0500
	  (Wed, 28 Oct 2009) | 17 lines Merged revisions 226382 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226382 | lmadsen | 2009-10-28 15:06:13 -0500 (Wed, 28 Oct 2009)
	  | 9 lines Update documentation in sip.conf.sample. Update the
	  documentation in sip.conf.sample in order to make it more clear
	  that directmedia/canreinvite do not cause Asterisk to ignore
	  reINVITEs. It is only used to stop Asterisk from generating a
	  reINVITE, but does not stop it from accepting them if necessary.
	  (closes issue #15644) Reported by: lmadsen ........
	  ................

	* /, doc/tex/channelvariables.tex: Merged revisions 226378 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r226378 | lmadsen | 2009-10-28 14:50:00 -0500
	  (Wed, 28 Oct 2009) | 15 lines Merged revisions 226377 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226377 | lmadsen | 2009-10-28 14:48:29 -0500 (Wed, 28 Oct 2009)
	  | 7 lines Update CALLINGSUBADDR channel variable documentation.
	  (closes issue #15734) Reported by: alecdavis Patches:
	  channelvariables.tex.diff.txt uploaded by alecdavis (license 585)
	  Tested by: alecdavis ........ ................

2009-10-28 18:05 +0000 [r226169-226307]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 226305 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r226305 | tilghman | 2009-10-28 13:04:05 -0500
	  (Wed, 28 Oct 2009) | 9 lines Merged revisions 226304 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r226304 | tilghman | 2009-10-28 13:02:25 -0500 (Wed, 28
	  Oct 2009) | 2 lines Fix documentation (pointed out by
	  TheDavidFactor on #-dev) ........ ................

	* main/manager.c, /: Merged revisions 226159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r226159 | tilghman | 2009-10-27 15:22:07 -0500 (Tue, 27 Oct 2009)
	  | 14 lines Merged revisions 226138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r226138 | tilghman | 2009-10-27 15:16:49 -0500 (Tue, 27 Oct 2009)
	  | 7 lines Manager output is not always NULL-terminated, so force
	  a NULL at the end of the filestream. (closes issue #15495)
	  Reported by: pdf Patches: 20090916__issue15495.diff.txt uploaded
	  by tilghman (license 14) Tested by: pdf ........ ................

2009-10-27 17:04 +0000 [r226100]  Terry Wilson <twilson@digium.com>

	* /, res/res_http_post.c: Merged revisions 226099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r226099 |
	  twilson | 2009-10-27 11:48:54 -0500 (Tue, 27 Oct 2009) | 2 lines
	  Don't prepend the URI prefix to the post directory ........

2009-10-26 23:48 +0000 [r226053]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, configure, configure.ac: detect ARM Linux EABI OSARCH as
	  linux-gnu instead of linux-gnueabi * Set OSARCH to linux-gnu even
	  if host_os is linux-gnueabi * When checking if we are Linux,
	  check OSARCH rather than host_os The newer ARM ABI ("EABI") shows
	  the OS name 'linux-gnueabi' rather than 'linux-gnu' . This patch
	  sets OSARCH to be 'linux-gnu' even in such a case. OSARCH is
	  tested for the value of 'linux-gnu' in one or two places in the
	  tree. This patch also fixes the check libcap to check for $OSARCH
	  rather than $host_os . See also:
	  http://wiki.debian.org/ArmEabiPort Merged revisions 225957 via
	  svnmerge from http://svn.digium.com/svn/asterisk/branches/1.4
	  Merged revisions 226018 via svnmerge from
	  http://svn.digium.com/svn/asterisk/trunk

2009-10-26 19:41 +0000 [r225913]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 225912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r225912 |
	  jpeeler | 2009-10-26 14:40:26 -0500 (Mon, 26 Oct 2009) | 12 lines
	  ACL check not present for verifying SIP INVITEs The ACL check in
	  check_peer_ok was missing and has now been restored. The missing
	  check allowed for calls to be made on prohibited networks where
	  an ACL was defined in sip.conf and the allowguest option was set
	  to off. See the AST security advisory below for more information.
	  Merge code associated with AST-2009-007. (closes issue #16091)
	  Reported by: thom4fun ........

2009-10-26 15:51 +0000 [r225870]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_fax.c: Backport audio handling loop fixes from trunk
	  version of app_fax. This backport resolves some issues handling
	  audio frames during FAX processing, and ensures that the FAX
	  application doesn't accidentally get notified of a T.38
	  switchover at the end of a successful FAX. (issue #16127)

2009-10-23 14:50 +0000 [r225652]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 225650 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r225650 |
	  dvossel | 2009-10-23 09:41:50 -0500 (Fri, 23 Oct 2009) | 3 lines
	  Fixes an iterator memory leak and uninitialized memory ........

2009-10-23 14:07 +0000 [r225584]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: Merged revisions 225582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r225582 | kpfleming | 2009-10-23 09:02:42 -0500 (Fri, 23 Oct
	  2009) | 17 lines Merged revisions 225581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r225581 | kpfleming | 2009-10-23 09:00:01 -0500 (Fri, 23 Oct
	  2009) | 10 lines Don't force menuselect.makeopts to be rebuilt on
	  every build. For some reason the menuselect.makeopts file was
	  listed as PHONY in the Makefile, resulting in 'make' needing to
	  rebuild it for every build. This then resulted in the embedded
	  module rules being rebuilt on every build, which can be slow and
	  is unnecessary. This patch fixes the problem by properly allowing
	  'make' to know when the menuselect.makeopts file needs to be
	  rebuilt (defining the proper dependencies). ........
	  ................

2009-10-22 22:07 +0000 [r225490]  David Vossel <dvossel@digium.com>

	* main/tcptls.c, /, channels/chan_sip.c, apps/app_externalivr.c,
	  include/asterisk/tcptls.h: Merged revisions 225445 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r225445 | dvossel | 2009-10-22 14:55:51 -0500 (Thu, 22 Oct 2009)
	  | 50 lines SIP TCP/TLS: move client connection setup/write into
	  tcp helper thread, various related locking/memory fixes. What
	  this patch fixes 1.Moves sip TCP/TLS connection setup into the
	  TCP helper thread: Connection setup takes awhile and before this
	  it was being done while holding the monitor lock. 2.Moves TCP/TLS
	  writing to the TCP helper thread: Through the use of a packet
	  queue and an alert pipe, the TCP helper thread can now be woken
	  up to write data as well as read data. 3.Locking error: sip_xmit
	  returned an XMIT_ERROR without giving up the tcptls_session lock.
	  This lock has been completely removed from sip_xmit and placed in
	  the new sip_tcptls_write() function. 4.Memory leak: When creating
	  a tcptls_client the tls_cfg was alloced but never freed unless
	  the tcptls_session failed to start. Now the session_args for a
	  sip client are an ao2 object which frees the tls_cfg on
	  destruction. 5.Pointer to stack variable: During
	  sip_prepare_socket the creation of a client's
	  ast_tcptls_session_args was done on the stack and stored as a
	  pointer in the newly created tcptls_session. Depending on the
	  events that followed, there was a slight possibility that pointer
	  could have been accessed after the stack returned. Given the new
	  changes, it is always accessed after the stack returns which is
	  why I found it. Notable code changes 1.I broke tcptls.c's
	  ast_tcptls_client_start() function into two functions. One for
	  creating and allocating the new tcptls_session, and a separate
	  one for starting and handling the new connection. This allowed me
	  to create the tcptls_session, launch the helper thread, and then
	  establish the connection within the helper thread. 2.Writes to a
	  tcptls_session are now done within the helper thread. This is
	  done by using an alert pipe to wake up the thread if new data
	  needs to be sent. The thread's sip_threadinfo object contains the
	  alert pipe as well as the packet queue. 3.Since the threadinfo
	  object contains the alert pipe, it must now be accessed outside
	  of the helper thread for every write (queuing of a packet). For
	  easy lookup, I moved the threadinfo objects from a linked list to
	  an ao2_container. (closes issue #13136) Reported by: pabelanger
	  Tested by: dvossel, whys (closes issue #15894) Reported by:
	  dvossel Tested by: dvossel Review:
	  https://reviewboard.asterisk.org/r/380/ ........

2009-10-22 21:54 +0000 [r225487]  Leif Madsen <lmadsen@digium.com>

	* doc/valgrind.txt, contrib/valgrind.supp (added): Merged revisions
	  225485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r225485 | lmadsen | 2009-10-22 16:52:30 -0500 (Thu, 22 Oct 2009)
	  | 19 lines Merged revisions 225484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r225484 | lmadsen | 2009-10-22 16:51:52 -0500 (Thu, 22 Oct 2009)
	  | 11 lines Clean valgrind output by suppressing false errors.
	  Update valgrind.txt documentation and add valgrind.supp file in
	  order to allow those who are creating valgrind output to have
	  less false errors in the logfile. (closes issue #16007) Reported
	  by: atis Patches: valgrind.txt.diff uploaded by atis (license
	  242) asterisk2.supp uploaded by atis (license 242) Tested by:
	  atis, amorsen ........ ................

2009-10-22 17:14 +0000 [r225362]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /, apps/app_meetme.c, include/asterisk/channel.h:
	  Merged revisions 225360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r225360 | tilghman | 2009-10-22 12:11:23 -0500 (Thu, 22 Oct 2009)
	  | 11 lines Merged revisions 225105 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r225105 | tilghman | 2009-10-21 11:02:12 -0500 (Wed, 21 Oct 2009)
	  | 4 lines Fix documentation for ast_softhangup() and correct the
	  misuse thereof. (closes issue #16103) Reported by: majorbloodnok
	  ........ ................

2009-10-21 22:02 +0000 [r225062-225309]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 225307 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r225307 | dvossel | 2009-10-21 16:58:46 -0500
	  (Wed, 21 Oct 2009) | 20 lines Merged revisions 225243 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r225243 | dvossel | 2009-10-21 15:58:08 -0500 (Wed, 21 Oct 2009)
	  | 13 lines IAX2: VNAK loop caused by signaling frames with no
	  destination call number It is possible for the PBX thread to
	  queue up signaling frames before a destination call number is
	  received. This can result in signaling frames being sent out with
	  no destination call number. Since recent versions of Asterisk
	  require accurate destination callnumbers for all Full Frames,
	  this can cause a VNAK loop to occur. To resolve this no signaling
	  frames are sent until a destination callnumber is received, and
	  destination call numbers are now only required for iax_pvt
	  matching when the frame is an ACK. Review:
	  https://reviewboard.asterisk.org/r/413/ ........ ................

	* channels/chan_iax2.c, configs/iax.conf.sample, /,
	  channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  225033 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r225033 | dvossel | 2009-10-21 09:39:10 -0500 (Wed, 21 Oct 2009)
	  | 27 lines Merged revisions 225032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r225032 | dvossel | 2009-10-21 09:37:04 -0500 (Wed, 21 Oct 2009)
	  | 20 lines IAX/SIP shrinkcallerid option The shrinking of caller
	  id removes '(', ' ', ')', non-trailing '.', and '-' from the
	  string. This means values such as 555.5555 and test-test result
	  in 555555 and testtest. There are instances, such as Skype
	  integration, where a specific value is passed via caller id that
	  must be preserved unmodified. This patch makes the shrinking of
	  caller id optional in chan_sip and chan_iax in order to support
	  such cases. By default this option is on to preserve previous
	  expected behavior. (closes issue #15940) Reported by: dimas
	  Patches: v2-15940.patch uploaded by dimas (license 88)
	  15940_shrinkcallerid_trunk.c uploaded by dvossel (license 671)
	  Tested by: dvossel Review:
	  https://reviewboard.asterisk.org/r/408/ ........ ................

2009-10-21 03:17 +0000 [r224935]  Russell Bryant <russell@digium.com>

	* include/asterisk/frame.h, include/asterisk/translate.h,
	  main/dsp.c, main/frame.c, /, main/translate.c,
	  include/asterisk/dsp.h, codecs/codec_dahdi.c: Merged revisions
	  224932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r224932 | russell | 2009-10-20 22:09:04 -0500 (Tue, 20 Oct 2009)
	  | 12 lines Merged revisions 224931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224931 | russell | 2009-10-20 21:59:54 -0500 (Tue, 20 Oct 2009)
	  | 5 lines Isolate frames returned from a DSP instance or codec
	  translator. The reasoning for these changes are the same as what
	  I wrote in the commit message for rev 222878. ........
	  ................

2009-10-20 22:11 +0000 [r224858]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_speex.c, /, main/audiohook.c: Merged revisions 224856
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r224856 | tilghman | 2009-10-20 17:09:07 -0500
	  (Tue, 20 Oct 2009) | 12 lines Merged revisions 224855 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224855 | tilghman | 2009-10-20 17:07:11 -0500 (Tue, 20 Oct 2009)
	  | 5 lines Pay attention to the return value of the manipulate
	  function. While this looks like an optimization, it prevents a
	  crash from occurring when used with certain audiohook callbacks
	  (diagnosed with SVN trunk, backported to 1.4 to keep the source
	  consistent across versions). ........ ................

2009-10-20 17:49 +0000 [r224776]  Joshua Colp <jcolp@digium.com>

	* /, main/features.c: Merged revisions 224774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r224774 | file | 2009-10-20 14:47:34 -0300 (Tue, 20 Oct 2009) |
	  12 lines Merged revisions 224773 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224773 | file | 2009-10-20 14:46:37 -0300 (Tue, 20 Oct 2009) | 5
	  lines Add support for relaying early media in the features
	  attended transfer option. (closes issue #14828) Reported by:
	  licedey ........ ................

2009-10-19 23:56 +0000 [r224673]  Kevin P. Fleming <kpfleming@digium.com>

	* main/rtp.c: Merged revisions 224671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r224671 | kpfleming | 2009-10-19 18:47:39 -0500 (Mon, 19 Oct
	  2009) | 14 lines Merged revisions 224670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224670 | kpfleming | 2009-10-19 18:44:07 -0500 (Mon, 19 Oct
	  2009) | 7 lines Correct timestamp calculations when RTP sample
	  rates over 8kHz are used. While testing some endpoints that
	  support 16kHz and 32kHz sample rates, some log messages were
	  generated due to calc_rxstamp() computing timestamps in a way
	  that produced odd results, so this patch sanitizes the result of
	  the computations. ........ ................

2009-10-19 19:51 +0000 [r224570]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 224567 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r224567 | file | 2009-10-19 16:49:09 -0300 (Mon, 19 Oct 2009) |
	  12 lines Merged revisions 224565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224565 | file | 2009-10-19 16:47:50 -0300 (Mon, 19 Oct 2009) | 5
	  lines Do not attempt early media bridging (ie: direct RTP setup)
	  if options are enabled that should prevent it. (closes issue
	  #14763) Reported by: cupotka ........ ................

2009-10-17 02:02 +0000 [r224333-224336]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: fix typo, sorry

	* channels/chan_dahdi.c, /: Merged revisions 224331 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r224331 | jpeeler | 2009-10-16 20:36:08 -0500
	  (Fri, 16 Oct 2009) | 20 lines Merged revisions 224330 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224330 | jpeeler | 2009-10-16 20:32:47 -0500 (Fri, 16 Oct 2009)
	  | 13 lines Fix stale caller id data from being reported in AMI
	  NewChannel event The problem here is that chan_dahdi is designed
	  in such a way to set certain values in the dahdi_pvt only once.
	  One of those such values is the configured caller id data in
	  chan_dahdi.conf. For PRI, the configured caller id data could be
	  overwritten during a call. Instead of saving the data and
	  restoring, it was decided that for all non-analog channels it was
	  simply best to not set the configured caller id in the first
	  place and also clear it at the end of the call. (closes issue
	  #15883) Reported by: jsmith ........ ................

2009-10-16 20:53 +0000 [r224263]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 224261 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r224261 | rmudgett | 2009-10-16 15:40:57 -0500
	  (Fri, 16 Oct 2009) | 25 lines Merged revisions 224260 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r224260 | rmudgett | 2009-10-16 15:25:23 -0500 (Fri, 16 Oct 2009)
	  | 18 lines Never released PRI channels when using Busy() or
	  Congestion() dialplan apps. When the Busy() or Congestion()
	  application is used towards ISDN (an ISDN progress is sent), the
	  responding ISDN Disconnect or Release may contain the ISDN cause
	  user busy or one of the congestion causes. In chan_dahdi.c these
	  causes will only set the needbusy or needcongestion flags and not
	  activate the softhangup procedure. Unfortunately only the latter
	  can interrupt the endless wait loop of Busy()/Congestion().
	  Result: PRI channels staying in state busy for the rest of
	  asterisk life or until the other end times out and forces the
	  call to clear. (in issue 0014292) Reported by: tomaso Patches:
	  disc_rel_userbusy.patch uploaded by tomaso (license 564) (This
	  patch is unrelated to the issue.) ........ ................

2009-10-15 15:58 +0000 [r224180]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 224178 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r224178 |
	  jpeeler | 2009-10-15 10:57:14 -0500 (Thu, 15 Oct 2009) | 11 lines
	  Readd removed ability to allow listening to one side of the call
	  in app_chanspy (Option o) (closes issue #15675) Reported by:
	  john8675309 Patches: issue15675patchtrunk.txt uploaded by dbrooks
	  (license 790) Tested by: jgutierrez on users list:
	  http://lists.digium.com/pipermail/asterisk-users/2009-October/239155.html
	  ........

2009-10-12 23:55 +0000 [r223834]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_dial.c, /: Merged revisions 223832 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r223832 | jpeeler | 2009-10-12 18:48:09 -0500 (Mon, 12 Oct 2009)
	  | 15 lines Merged revisions 223804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r223804 | jpeeler | 2009-10-12 18:12:50 -0500 (Mon, 12 Oct 2009)
	  | 8 lines Ensure ringing continues for branched calls after
	  progress is received While waiting for an answer, don't send
	  progress for branched calls for which ringing was sent. (closes
	  issue #15028) Reported by: fnordian ........ ................

2009-10-12 21:03 +0000 [r223758]  David Vossel <dvossel@digium.com>

	* configs/iax.conf.sample, /: Merged revisions 223756 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r223756 | dvossel | 2009-10-12 15:58:27 -0500 (Mon, 12 Oct 2009)
	  | 5 lines Clarifies trunkmaxsize, trunkfreq, and trunkmtu iax2
	  options SWP-151 ........

2009-10-12 14:32 +0000 [r223654]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c, apps/app_fax.c: Merged revisions 223652
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r223652 | kpfleming | 2009-10-12 09:25:29 -0500 (Mon, 12
	  Oct 2009) | 13 lines Remove automatic switching from T.38 to
	  voice mode in chan_sip. chan_sip has some code to automatically
	  switch from T.38 mode to voice mode when a voice frame is written
	  to the channel while it is in T.38 mode; this was intended to
	  handle the situation when a FAX transmission has ended and the
	  channel is not yet hung up, but is causing problems at the
	  beginning of FAX sessions as well when there are still voice
	  frames 'in flight' at the time the T.38 negotiation completes.
	  This patch removes the automatic switchover, and changes app_fax
	  to explicitly switch off T.38 mode when the FAX transmission
	  process ends. (closes issue #16025) Reported by: jamicque
	  ........

2009-10-11 17:31 +0000 [r223489]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 223487 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r223487 | russell | 2009-10-11 12:25:42 -0500 (Sun, 11 Oct 2009)
	  | 17 lines Merged revisions 223485-223486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r223485 | russell | 2009-10-11 12:22:52 -0500 (Sun, 11 Oct 2009)
	  | 6 lines Don't use data outside of its scope. The purpose of
	  this code was to have a hangup frame put on the list of deferred
	  frames. However, the code that read the hangup frame was outside
	  of the scope of where the hangup frame was declared. ........
	  r223486 | russell | 2009-10-11 12:25:06 -0500 (Sun, 11 Oct 2009)
	  | 2 lines Remove some unnecessary code. ........ ................

2009-10-09 23:11 +0000 [r223405]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, channels/chan_h323.c: Fix interpretation
	  of PRIREDIRECTIONREASON set by chan_sip. This commit is the
	  simplest way to solve a problem that has already been solved in
	  trunk with the "COLP/CONP and Redirecting party information into
	  Asterisk" commit. In trunk the redirection reason is translated
	  into a generic redirect reason. I would have had to do the same
	  fix except chan_sip never reads PRIREDIRECTREASON. So both
	  chan_dahdi and chan_h323 have been modified to interpret the one
	  different redirect reason of "no-answer" properly and set the
	  ISDN reason code 2 of "no reply". (closes issue #15033) Reported
	  by: steinwej

2009-10-09 21:00 +0000 [r223332]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_fax.c: Merged revisions 223330 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r223330 |
	  kpfleming | 2009-10-09 15:58:44 -0500 (Fri, 09 Oct 2009) | 10
	  lines Initiate T.38 switchover when acting as called party,
	  regardless of FAX direction. SendFAX() and ReceiveFAX() can be
	  given options to indicate whether they should act as the calling
	  or called party; this mode should be used to decide whether to
	  initiate a switchover to T.38, not the direction that the FAX
	  transfer will take place. (closes issue #16039) Reported by:
	  jamicque ........

2009-10-09 18:36 +0000 [r223277]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /: Merged revisions 223273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r223273 | mnicholson | 2009-10-09 13:34:08 -0500 (Fri, 09 Oct
	  2009) | 14 lines Merged revisions 223225 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r223225 | mnicholson | 2009-10-09 13:20:11 -0500 (Fri, 09 Oct
	  2009) | 8 lines Signal timeouts by returning AST_CONTROL_RINGING
	  when originating calls. (closes issue #15104) Reported by:
	  nblasgen Patches: manager-timeout1.diff uploaded by mnicholson
	  (license 96) Tested by: nblasgen, mnicholson ........
	  ................

2009-10-09 18:25 +0000 [r223241]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /: Merged revisions 223215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r223215 | mmichelson | 2009-10-09 13:17:34 -0500 (Fri, 09 Oct
	  2009) | 9 lines Recorded merge of revisions 223213 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r223213 | mmichelson | 2009-10-09 13:17:12 -0500 (Fri,
	  09 Oct 2009) | 3 lines Fix potential memory leak in app_dial.c
	  ........ ................

2009-10-09 17:56 +0000 [r223209]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 223206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r223206 | dvossel | 2009-10-09 12:53:37 -0500 (Fri, 09 Oct 2009)
	  | 16 lines Merged revisions 223205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r223205 | dvossel | 2009-10-09 12:52:35 -0500 (Fri, 09 Oct 2009)
	  | 10 lines fixes sip registration using authuser in user.conf
	  (closes issue #14954) Reported by: tornblad Tested by:
	  mmichelson, tornblad, dvossel ........ ................

2009-10-09 17:27 +0000 [r223171]  Matthew Nicholson <mnicholson@digium.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 223136 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r223136 | mnicholson | 2009-10-09 12:14:38 -0500 (Fri, 09 Oct
	  2009) | 8 lines Don't close the sqlite database when reloading.
	  Only close the database when unloading. (closes issue #15953)
	  Reported by: frawd Patches: sqlite3_rev220097.diff uploaded by
	  frawd (license 610) Tested by: frawd ........

2009-10-09 17:10 +0000 [r223090-223134]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 223132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r223132 |
	  dvossel | 2009-10-09 11:54:02 -0500 (Fri, 09 Oct 2009) | 9 lines
	  'auth=' did not parse md5 secret correctly (closes issue #15949)
	  Reported by: ebroad Patches: authparsefix.patch uploaded by
	  ebroad (license 878) 15949_trunk.diff uploaded by dvossel
	  (license 671) Tested by: ebroad ........

	* /, channels/chan_sip.c: Merged revisions 223088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r223088 |
	  dvossel | 2009-10-09 10:49:30 -0500 (Fri, 09 Oct 2009) | 14 lines
	  p->peerauth is always empty in transmit_register() When using
	  callbackextension or specifing the peer name in a registration
	  string, the peer's specific auth settings set by the "auth="
	  strings within the peer definition are not used by the
	  registration. Thanks to ebroad for reporting the issue and
	  providing the patch. (closes issue #15955) Reported by: ebroad
	  Patches: regauthfix.patch uploaded by ebroad (license 878)
	  ........

2009-10-08 19:57 +0000 [r222882]  Russell Bryant <russell@digium.com>

	* include/asterisk/frame.h, include/asterisk/file.h, main/frame.c,
	  /, main/file.c: Merged revisions 222880 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r222880 | russell | 2009-10-08 14:52:03 -0500 (Thu, 08 Oct 2009)
	  | 51 lines Merged revisions 222878 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r222878 | russell | 2009-10-08 14:45:47 -0500 (Thu, 08 Oct 2009)
	  | 44 lines Make filestream frame handling safer by isolating
	  frames before returning them. This patch is related to a number
	  of issues on the bug tracker that show crashes related to freeing
	  frames that came from a filestream. A number of fixes have been
	  made over time while trying to figure out these problems, but
	  there re still people seeing the crash. (Note that some of these
	  bug reports include information about other problems. I am
	  specifically addressing the filestream frame crash here.) I'm
	  still not clear on what the exact problem is. However, what is
	  _very_ clear is that we have seen quite a few problems over time
	  related to unexpected behavior when we try to use embedded frames
	  as an optimization. In some cases, this optimization doesn't
	  really provide much due to improvements made in other areas. In
	  this case, the patch modifies filestream handling such that the
	  embedded frame will not be returned. ast_frisolate() is used to
	  ensure that we end up with a completely mallocd frame. In
	  reality, though, we will not actually have to malloc every time.
	  For filestreams, the frame will almost always be allocated and
	  freed in the same thread. That means that the thread local frame
	  cache will be used. So, going this route doesn't hurt. With this
	  patch in place, some people have reported success in not seeing
	  the crash anymore. (SWP-150) (AST-208) (ABE-1834) (issue #15609)
	  Reported by: aragon Patches: filestream_frisolate-1.4.diff2.txt
	  uploaded by russell (license 2) Tested by: aragon, russell
	  (closes issue #15817) Reported by: zerohalo Tested by: zerohalo
	  (closes issue #15845) Reported by: marhbere Review:
	  https://reviewboard.asterisk.org/r/386/ ........ ................

2009-10-08 19:42 +0000 [r222875]  David Vossel <dvossel@digium.com>

	* main/netsock.c, /, include/asterisk/netsock.h: Merged revisions
	  222873 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r222873 |
	  dvossel | 2009-10-08 14:35:30 -0500 (Thu, 08 Oct 2009) | 6 lines
	  fixes an ast_netsock_list memory leak. ABE-1998 Review:
	  https://reviewboard.asterisk.org/r/395/ ........

2009-10-08 16:49 +0000 [r222694-222801]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn_config.c, /: Merged revisions 222799 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r222799 | rmudgett | 2009-10-08 11:44:33 -0500
	  (Thu, 08 Oct 2009) | 19 lines Merged revisions 222797 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r222797 | rmudgett | 2009-10-08 11:33:06 -0500 (Thu, 08 Oct 2009)
	  | 12 lines Fix memory leak if chan_misdn config parameter is
	  repeated. Memory leak when the same config option is set more
	  than once in an misdn.conf section. Why must this be considered?
	  Templates! Defining a template with default port options and
	  later adding to or overriding some of them. Patches:
	  memleak-misdn.patch JIRA ABE-1998 ........ ................

	* channels/chan_misdn.c, /: Merged revisions 222692 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r222692 | rmudgett | 2009-10-07 16:56:36 -0500
	  (Wed, 07 Oct 2009) | 21 lines Merged revisions 222691 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r222691 | rmudgett | 2009-10-07 16:51:24 -0500 (Wed, 07 Oct 2009)
	  | 14 lines chan_misdn.c:process_ast_dsp() memory leak misdn.conf:
	  astdtmf must be set to "yes". With "no", buffer loss does not
	  occur. The translated frame "f2" when passing through
	  ast_dsp_process() is not freed whenever it is not used further in
	  process_ast_dsp(). Then in the end it is never ever freed.
	  Patches: translate.patch JIRA ABE-1993 ........ ................

2009-10-07 17:46 +0000 [r222545]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 222543 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r222543 | dvossel | 2009-10-07 12:44:52 -0500 (Wed, 07 Oct 2009)
	  | 14 lines Merged revisions 222542 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r222542 | dvossel | 2009-10-07 12:41:21 -0500 (Wed, 07 Oct 2009)
	  | 8 lines crash on transfer handle_invite_replaces() attempts to
	  uplock a pvt's owner channel without first verifing that it
	  exists. (issue #16027) ........ ................

2009-10-06 23:58 +0000 [r222353-222465]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 222463 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r222463 | jpeeler | 2009-10-06 18:56:01 -0500
	  (Tue, 06 Oct 2009) | 14 lines Merged revisions 222462 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r222462 | jpeeler | 2009-10-06 18:51:19 -0500 (Tue, 06 Oct 2009)
	  | 8 lines Add missing unlock(s) in dahdi_read (two cases in
	  trunk) (closes issue #15683) Reported by: alecdavis ........
	  ................

	* channels/chan_dahdi.c: Fix potential crash when entire span
	  request is received. The variable index used in this scenario for
	  accessing the dahdi_pvts was wrong and was most likely copied
	  from the several other places it is used correctly. (closes issue
	  #15998) Reported by: tsearle Patches: dahdi_reset_crash.patch
	  uploaded by tsearle (license 373) Modified:
	  branches/1.4/channels/chan_dahdi.c

	* channels/chan_dahdi.c, /: Merged revisions 222351 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r222351 | jpeeler | 2009-10-06 15:35:19 -0500 (Tue, 06 Oct 2009)
	  | 9 lines Fix 222298 (crash during destruction of second channel
	  when variable set with setvar). I mistakenly reasoned that setvar
	  would be used on all channels. Since it can be set per channel,
	  give each dahdi channel a copy of the variable. (related to
	  #15899) ........

2009-10-06 19:34 +0000 [r222310]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_pgsql.c, /, cdr/cdr_pgsql.c: Recorded merge of
	  revisions 222309 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r222309 |
	  tilghman | 2009-10-06 14:31:39 -0500 (Tue, 06 Oct 2009) | 10
	  lines Change schema query to involve the use of an optional
	  schema parameter. This change is done in such a way as to allow
	  the driver to continue to function with older databases which
	  don't have these features. (closes issue #16000) Reported by:
	  jamicque Patches: 20091002__issue16000.diff.txt uploaded by
	  tilghman (license 14) 20091002__issue16000__1.6.1.diff.txt
	  uploaded by tilghman (license 14) Tested by: jamicque ........

2009-10-06 19:26 +0000 [r222303]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 222298 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r222298 | jpeeler | 2009-10-06 14:24:59 -0500 (Tue, 06 Oct 2009)
	  | 9 lines Fix crash during destruction of second channel when
	  variable set with setvar. The setvar line in chan_dahdi.conf is
	  shared among all the channels, so make sure to only free the
	  resources only when the last channel is destroyed. (closes issue
	  #15899) Reported by: tzafrir ........

2009-10-06 19:20 +0000 [r222282]  Tilghman Lesher <tlesher@digium.com>

	* res/ael/pval.c, /: Merged revisions 222273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r222273 |
	  tilghman | 2009-10-06 14:17:11 -0500 (Tue, 06 Oct 2009) | 5 lines
	  When we call a gosub routine, the variables should be scoped to
	  avoid contaminating the caller. This affected the ~~EXTEN~~ hack,
	  where a subroutine might have changed the value before it was
	  used in the caller. Patch by myself, tested by ebroad on
	  #asterisk ........

2009-11-04  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.9

	* AST-2009-008 and AST-2009-009

2009-10-26  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.8

	* AST-2009-007

2009-10-06  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.7-rc2

2009-10-06 01:36 +0000 [r222112-222186]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_queue.c, channels/chan_iax2.c, main/astobj2.c,
	  res/res_odbc.c, /, channels/chan_sip.c, funcs/func_dialgroup.c,
	  include/asterisk/astobj2.h, res/res_phoneprov.c,
	  channels/chan_console.c, res/res_musiconhold.c: Merged revisions
	  222176 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r222176 | kpfleming | 2009-10-05 20:24:24 -0500 (Mon, 05 Oct
	  2009) | 27 lines Recorded merge of revisions 222152 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r222152 | kpfleming | 2009-10-05 20:16:36 -0500 (Mon, 05
	  Oct 2009) | 20 lines Fix ao2_iterator API to hold references to
	  containers being iterated. See Mantis issue for details of what
	  prompted this change. Additional notes: This patch changes the
	  ao2_iterator API in two ways: F_AO2I_DONTLOCK has become an enum
	  instead of a macro, with a name that fits our naming policy;
	  also, it is now necessary to call ao2_iterator_destroy() on any
	  iterator that has been created. Currently this only releases the
	  reference to the container being iterated, but in the future this
	  could also release other resources used by the iterator, if the
	  iterator implementation changes to use additional resources.
	  (closes issue #15987) Reported by: kpfleming Review:
	  https://reviewboard.asterisk.org/r/383/ ........ ................

	* main/udptl.c, /, channels/chan_sip.c, configs/udptl.conf.sample,
	  UPGRADE.txt, configs/sip.conf.sample: Merged revisions 222110 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r222110 | kpfleming | 2009-10-05 14:45:00 -0500 (Mon, 05
	  Oct 2009) | 25 lines Allow non-compliant T.38 endpoints to be
	  supportable via configuration option. Many T.38 endpoints
	  incorrectly send the maximum IFP frame size they can accept as
	  the T38FaxMaxDatagram value in their SDP, when in fact this value
	  is supposed to be the maximum UDPTL payload size (datagram size)
	  they can accept. If the value they supply is small enough (a
	  commonly supplied value is '72'), T.38 UDPTL transmissions will
	  likely fail completely because the UDPTL packets will not have
	  enough room for a primary IFP frame and the redundancy used for
	  error correction. If this occurs, the Asterisk UDPTL stack will
	  emit log messages warning that data loss may occur, and that the
	  value may need to be overridden. This patch extends the
	  't38pt_udptl' configuration option in sip.conf to allow the
	  administrator to override the value supplied by the remote
	  endpoint and supply a value that allows T.38 FAX transmissions to
	  be successful with that endpoint. In addition, in any SIP call
	  where the override takes effect, a debug message will be printed
	  to that effect. This patch also removes the T38FaxMaxDatagram
	  configuration option from udptl.conf.sample, since it has not
	  actually had any effect for a number of releases. In addition,
	  this patch cleans up the T.38 documentation in sip.conf.sample
	  (which incorrectly documented that T.38 support was passthrough
	  only). (issue #15586) Reported by: globalnetinc ........

2009-10-02 17:36 +0000 [r222035]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 222030 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r222030 | dvossel | 2009-10-02 12:34:07 -0500
	  (Fri, 02 Oct 2009) | 9 lines Merged revisions 222026 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r222026 | dvossel | 2009-10-02 12:32:13 -0500 (Fri, 02
	  Oct 2009) | 3 lines Removes unnecessary unlock, clarifies a
	  memcpy. ........ ................

2009-10-02 17:01 +0000 [r221969-221973]  Tilghman Lesher <tlesher@digium.com>

	* main/astobj2.c, /, funcs/func_lock.c: Merged revisions 221971 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r221971 | tilghman | 2009-10-02 11:59:57 -0500
	  (Fri, 02 Oct 2009) | 9 lines Merged revisions 221970 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r221970 | tilghman | 2009-10-02 11:58:03 -0500 (Fri, 02
	  Oct 2009) | 2 lines Ensure the result of the hash function is
	  positive. Negative array offsets suck. ........ ................

	* funcs/func_lock.c: Hash needs to return a positive integer

2009-10-02 13:04 +0000 [r221964]  Sean Bright <sean@malleable.com>

	* funcs/func_strings.c: Revert XML docs that ended up in the 1.6.0
	  and 1.6.1 branches during a merge.

2009-10-02 03:06 +0000 [r221922]  Tilghman Lesher <tlesher@digium.com>

	* /, main/logger.c: Merged revisions 221920 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221920 |
	  tilghman | 2009-10-01 22:04:34 -0500 (Thu, 01 Oct 2009) | 4 lines
	  Initialize a variable that we check immediately upon startup.
	  (closes issue #15973) Reported by: atis ........

2009-10-02 01:26 +0000 [r221871]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn/isdn_lib_intern.h, /:
	  Merged revisions 221844 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r221844 | rmudgett | 2009-10-01 20:09:31 -0500 (Thu, 01 Oct 2009)
	  | 33 lines Merged revisions 221769 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221769 | rmudgett | 2009-10-01 18:18:28 -0500 (Thu, 01 Oct 2009)
	  | 26 lines Occasionally losing use of B channels in chan_misdn. I
	  have not been able to reproduce the problem of losing channels.
	  However, I have seen in the code a reentrancy problem that might
	  give these symptoms. The reentrancy patch does several things: 1)
	  Guards B channel and B channel structure allocation. 2) Makes the
	  B channel structure find routines more precise in locating
	  records. 3) Never leave a B channel allocated if we received
	  cause 44. The last item may cause temporary outgoing call
	  problems, but they should clear when the line becomes idle.
	  (closes issue #15490) Reported by: slutec18 Patches:
	  issue15490_channel_alloc_reentrancy.patch uploaded by rmudgett
	  (license 664) Tested by: rmudgett, slutec18 (closes issue #15458)
	  Reported by: FabienToune Patches:
	  issue15458_channel_alloc_reentrancy.patch uploaded by rmudgett
	  (license 664) Tested by: FabienToune, rmudgett, slutec18 ........
	  ................

2009-10-02 00:06 +0000 [r221743-221779]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, main/rtp.c, /, main/say.c: Merged revisions
	  221777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r221777 | tilghman | 2009-10-01 18:59:15 -0500 (Thu, 01 Oct 2009)
	  | 9 lines Merged revisions 221776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221776 | tilghman | 2009-10-01 18:53:12 -0500 (Thu, 01 Oct 2009)
	  | 2 lines Fix a bunch of off-by-one errors ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 221705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221705 |
	  tilghman | 2009-10-01 15:09:46 -0500 (Thu, 01 Oct 2009) | 2 lines
	  Revision 220906 (a merge from 1.4) was not merged correctly,
	  causing a problem with non-dynamic peers. ........

2009-10-01 19:52 +0000 [r221702]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 221697 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221697 |
	  dvossel | 2009-10-01 14:33:33 -0500 (Thu, 01 Oct 2009) | 9 lines
	  outbound tls connections were not defaulting to port 5061 (closes
	  issue #15854) Reported by: dvossel Patches:
	  sip_port_config_trunk.diff uploaded by dvossel (license 671)
	  Tested by: dvossel ........

2009-10-01 17:01 +0000 [r221661]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 221554,221589 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r221554 | oej | 2009-10-01 02:00:04 -0500 (Thu,
	  01 Oct 2009) | 3 lines Simplify code for porturi, use TRUE/FALSE
	  constructs when it's just TRUE or FALSE. ................ r221589
	  | mnicholson | 2009-10-01 10:26:20 -0500 (Thu, 01 Oct 2009) | 9
	  lines Merged revisions 221588 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221588 | mnicholson | 2009-10-01 10:24:00 -0500 (Thu, 01 Oct
	  2009) | 2 lines Use unsigned ints for portinuri flags. ........
	  ................

2009-10-01 16:19 +0000 [r221602]  Kevin P. Fleming <kpfleming@digium.com>

	* main/udptl.c, /, configs/udptl.conf.sample, UPGRADE.txt: Merged
	  revisions 221592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221592 |
	  kpfleming | 2009-10-01 11:16:09 -0500 (Thu, 01 Oct 2009) | 12
	  lines Remove ability to control T.38 FAX error correction from
	  udptl.conf. chan_sip has had the ability to control T.38 FAX
	  error correction mode on a per-peer (or global) basis for a
	  couple of releases now, which is where it should have been all
	  along. This patch removes the ability to configure it in
	  udptl.conf, but issues a warning if the user tries to do, telling
	  them to look at sip.conf.sample for how to configure it now. For
	  any SIP peers that are T.38 enabled in sip.conf, there is already
	  a default for FEC error correction even if the user does not
	  specify any mode, so this change will not turn off error
	  correction by default, it will have the same default value that
	  has been in the udptl.conf sample file. ........

2009-09-30 23:10 +0000 [r221478-221487]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 221484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221484 |
	  mnicholson | 2009-09-30 18:04:03 -0500 (Wed, 30 Sep 2009) | 2
	  lines Cleaned up merge from r221432 ........

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  221432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r221432 | mnicholson | 2009-09-30 15:40:20 -0500 (Wed, 30 Sep
	  2009) | 17 lines Merged revisions 221360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221360 | mnicholson | 2009-09-30 14:36:06 -0500 (Wed, 30 Sep
	  2009) | 10 lines Fix SRV lookup and Request-URI generation in
	  chan_sip. This patch adds a new field "portinuri" to the sip
	  dialog struct and the sip peer struct. That field is used during
	  RURI generation to determine if the port should be included in
	  the RURI. It is also used in some places to determine if an SRV
	  lookup should occur. (closes issue #14418) Reported by: klaus3000
	  Tested by: klaus3000, mnicholson Review:
	  https://reviewboard.asterisk.org/r/369/ ........ ................

2009-09-30 21:41 +0000 [r221370-221470]  Matthias Nick <mnick@digium.com>

	* apps/app_queue.c, /: Merged revisions 221436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r221436 |
	  mnick | 2009-09-30 16:15:01 -0500 (Wed, 30 Sep 2009) | 2 lines
	  Prevents from division by zero ........

	* configs/cdr_custom.conf.sample, /, funcs/func_strings.c: Merged
	  revisions 221368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r221368 | mnick | 2009-09-30 14:42:36 -0500 (Wed, 30 Sep 2009) |
	  23 lines Merged revisions 221153,221157,221303 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221153 | mnick | 2009-09-30 10:37:39 -0500 (Wed, 30 Sep 2009) |
	  2 lines check bounds - prevents for buffer overflow ........
	  r221157 | mnick | 2009-09-30 10:41:46 -0500 (Wed, 30 Sep 2009) |
	  8 lines added a new dialplan function 'CSV_QUOTE' and changed the
	  cdr_custom.sample.conf (closes issue #15471) Reported by: dkerr
	  Patches: csv_quote_14.txt uploaded by mnick (license ) Tested by:
	  mnick ........ r221303 | mnick | 2009-09-30 14:02:00 -0500 (Wed,
	  30 Sep 2009) | 2 lines changed the prototype definition of
	  csv_quote ........ ................

2009-09-30 18:58 +0000 [r221302]  Terry Wilson <twilson@digium.com>

	* main/rtp.c, /, channels/chan_sip.c, include/asterisk/rtp.h,
	  configs/sip.conf.sample: Merged revisions 221266 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r221266 | twilson | 2009-09-30 12:52:30 -0500
	  (Wed, 30 Sep 2009) | 32 lines Merged revisions 221086 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221086 | twilson | 2009-09-30 09:49:11 -0500 (Wed, 30 Sep 2009)
	  | 25 lines Change the SSRC by default when our media stream
	  changes Be default, change SSRC when doing an audio stream
	  changes Asterisk doesn't honor marker bit when reinvited to
	  already-bridged RTP streams,resulting in far-end stack discarding
	  packets with "old" timestamps that areactually part of a new
	  stream. This patch sends AST_CONTROL_SRCUPDATE whenever there is
	  a reinvite, unless the 'constantssrc' is set to true in sip.conf.
	  The original issue reported to Digium support detailed the
	  following situation: ITSP <-> Asterisk 1.4.26.2 <-> SIP-based
	  Application Server Call comes in fromITSP, Asterisk dials the app
	  server which sends a re-invite back toAsterisk--not to negotiate
	  to send media directly to the ITSP, but to indicatethat it's
	  changing the stream it's sending to Asterisk. The app
	  servergenerates a new SSRC, sequence numbers, timestamps, and
	  sets the marker bit on the new stream. Asterisk passes through
	  the teimstamp of the new stream, butdoes not reset the SSRC,
	  sequence numbers, or set the marker bit. When the timestamp on
	  the new stream is older than the timestamp on the originalstream,
	  the ITSP (which doesn't know there has been any change) discards
	  the newframes because it thinks they are too old. This patch
	  addresses this by changing the SSRC on a stream update unless
	  constantssrc=true is set in sip.conf. Review:
	  https://reviewboard.asterisk.org/r/374/ ........ ................

2009-09-30 16:57 +0000 [r221203]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 221201 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r221201 | tilghman | 2009-09-30 11:56:42 -0500 (Wed, 30 Sep 2009)
	  | 14 lines Merged revisions 221200 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r221200 | tilghman | 2009-09-30 11:55:21 -0500 (Wed, 30 Sep 2009)
	  | 7 lines Avoid a potential NULL dereference. (closes issue
	  #15865) Reported by: kobaz Patches: 20090915__issue15865.diff.txt
	  uploaded by tilghman (license 14) Tested by: kobaz ........
	  ................

2009-09-30 14:55 +0000 [r221088]  Sean Bright <sean@malleable.com>

	* apps/app_voicemail.c, /: Merged revisions 221085 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r221085 | seanbright | 2009-09-30 10:47:58 -0400 (Wed, 30 Sep
	  2009) | 9 lines Clarify documentation for VoiceMailMain()'s a()
	  option. We require box numbers, not names as the documentation
	  implies. (issue #14740) Reported by: pj Patches:
	  __20090729-app_voicemail-documentation.patch uploaded by lmadsen
	  (license 10) Tested by: seanbright, lmadsen ........

2009-09-30 04:41 +0000 [r220998-221046]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_lock.c: Recorded merge of revisions 221044 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r221044 | tilghman | 2009-09-29 23:32:36 -0500 (Tue, 29
	  Sep 2009) | 8 lines Allow locks to be inherited through a
	  masquerade without causing starvation. (closes issue #14859)
	  Reported by: atis Patches: 20090821__issue14859.diff.txt uploaded
	  by tilghman (license 14) 20090925__issue14859__1.6.1.diff.txt
	  uploaded by tilghman (license 14) Tested by: atis, tilghman
	  ........

	* /, channels/chan_sip.c: Merged revisions 220906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r220906 | tilghman | 2009-09-29 14:57:37 -0500 (Tue, 29 Sep 2009)
	  | 16 lines Merged revisions 220873 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r220873 | tilghman | 2009-09-29 12:59:26 -0500 (Tue, 29 Sep 2009)
	  | 9 lines Reduce CPU usage related to building a peer merely for
	  devicestates. This fixes a 100% CPU problem in the SIP driver,
	  found by profiling the driver while the problem was occurring.
	  (closes issue #14309) Reported by: pkempgen Patches:
	  20090924__issue14309.diff.txt uploaded by tilghman (license 14)
	  Tested by: pkempgen, vrban ........ ................

2009-09-29 20:25 +0000 [r220938]  Matthew Nicholson <mnicholson@digium.com>

	* apps/app_chanspy.c: Avoid a deadlock in chanspy, just in case the
	  spyee is masqueraded and chanspy_ds_chan_fixup() is called with
	  the channel locked. (closes issue #15965) Reported by: atis
	  Patches: chanspy-deadlock-fix1.diff uploaded by mnicholson
	  (license 96) Tested by: atis

2009-09-29 17:05 +0000 [r220835]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 220833 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r220833 | jpeeler | 2009-09-29 11:58:29 -0500 (Tue, 29 Sep 2009)
	  | 12 lines Make deletion of temporary greetings work properly
	  with IMAP_STORAGE When imapgreetings was set to yes, the message
	  was being deleted but wasn't actually being expunged. When
	  imapgreetings was set to no, the file based message was not being
	  deleted at all. All good now! (closes issue #14949) Reported by:
	  noahisaac Patches: vm_tempgreeting_removal.patch uploaded by
	  noahisaac (license 748), modified by me ........

2009-09-28 19:13 +0000 [r220724]  Sean Bright <sean@malleable.com>

	* /, Makefile.rules: Merged revisions 220721 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r220721 | seanbright | 2009-09-28 15:11:20 -0400 (Mon, 28 Sep
	  2009) | 10 lines Merged revisions 220717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r220717 | seanbright | 2009-09-28 15:09:25 -0400 (Mon, 28 Sep
	  2009) | 3 lines When selecting DONT_OPTIMIZE in menuselect,
	  explicitly pass -O0 to the compiler so we override any default
	  optimization levels for a particular install. ........
	  ................

2009-09-26 15:12 +0000 [r220588]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/aes.h: Merged revisions 220586 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r220586 | tilghman | 2009-09-26 10:10:28 -0500 (Sat, 26 Sep 2009)
	  | 2 lines Allow AES to compile, when OpenSSL is not present.
	  ........

2009-09-24 20:38 +0000 [r220371]  David Vossel <dvossel@digium.com>

	* main/tcptls.c, /: Merged revisions 220365 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r220365 |
	  dvossel | 2009-09-24 15:37:20 -0500 (Thu, 24 Sep 2009) | 8 lines
	  fixes tcptls_session memory leak caused by ref count error
	  (closes issue #15939) Reported by: dvossel Review:
	  https://reviewboard.asterisk.org/r/375/ ........

2009-09-24 19:42 +0000 [r220291]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_playback.c, main/pbx.c, /, apps/app_disa.c: Merged
	  revisions 220289 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r220289 | tilghman | 2009-09-24 14:41:02 -0500 (Thu, 24 Sep 2009)
	  | 13 lines Merged revisions 220288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r220288 | tilghman | 2009-09-24 14:39:41 -0500 (Thu, 24 Sep 2009)
	  | 6 lines Implicitly sending a progress signal breaks some
	  applications. Call Progress() in your dialplan if you explicitly
	  want progress to be sent. (Reverts change 216430, closes issue
	  #15957) Reported by: Pavel Troller on the Asterisk-Dev mailing
	  list
	  http://lists.digium.com/pipermail/asterisk-dev/2009-September/039897.html
	  ........ ................

2009-09-24 18:22 +0000 [r220102-220220]  Sean Bright <sean@malleable.com>

	* Makefile, /: Merged revisions 220217 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r220217 | seanbright | 2009-09-24 14:19:41 -0400 (Thu, 24 Sep
	  2009) | 9 lines Merged revisions 220213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r220213 | seanbright | 2009-09-24 14:18:18 -0400 (Thu, 24 Sep
	  2009) | 1 line Resolve parallel build warnings. Reported by Klaus
	  Darilion on the asterisk-dev mailing list. ........
	  ................

	* Makefile, build_tools/mkpkgconfig, /: Merged revisions 220100 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r220100 | seanbright | 2009-09-24 10:44:08 -0400
	  (Thu, 24 Sep 2009) | 9 lines Merged revisions 220099 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r220099 | seanbright | 2009-09-24 10:41:57 -0400 (Thu,
	  24 Sep 2009) | 2 lines Remove the remaining bashisms in the
	  Makefile/mkpkgconfig ........ ................

2009-09-24 08:40 +0000 [r220030]  Michiel van Baak <michiel@vanbaak.info>

	* build_tools/mkpkgconfig, /: Merged revisions 220028 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r220028 | mvanbaak | 2009-09-24 10:36:18 +0200
	  (Thu, 24 Sep 2009) | 14 lines Merged revisions 220027 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r220027 | mvanbaak | 2009-09-24 10:33:50 +0200 (Thu, 24 Sep 2009)
	  | 7 lines mkpkgconfig does not need bash so make it use /bin/sh
	  This fixes building on all systems that don't have bash at
	  /bin/bash Reported by _ys on #asterisk-dev Tested by _ys on
	  #asterisk-dev ........ ................

2009-09-24 07:44 +0000 [r219988]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_directory.c, /: Merged revisions 219987 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r219987 | tilghman | 2009-09-24 02:39:44 -0500 (Thu, 24 Sep 2009)
	  | 8 lines Fix two possible crashes, one only in 1.6.1 and one in
	  1.6.1 forward. (closes issue #15739) Reported by: DLNoah, jeffg
	  Patches: 20090914__issue15739.diff.txt uploaded by tilghman
	  (license 14) 20090922__issue15739.diff.txt uploaded by tilghman
	  (license 14) Tested by: DLNoah, jeffg ........

2009-09-22 21:47 +0000 [r219820]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 219818 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r219818 | tilghman | 2009-09-22 16:43:22 -0500
	  (Tue, 22 Sep 2009) | 17 lines Merged revisions 219816 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219816 | tilghman | 2009-09-22 16:37:03 -0500 (Tue, 22 Sep 2009)
	  | 10 lines When IMAP variables were changed during a reload,
	  Voicemail did not use the new values. This change introduces a
	  configuration version variable, which ensures that connections
	  with the old values are not reused but are allowed to expire
	  normally. (closes issue #15934) Reported by: viniciusfontes
	  Patches: 20090922__issue15934.diff.txt uploaded by tilghman
	  (license 14) Tested by: viniciusfontes ........ ................

2009-09-21 17:02 +0000 [r219723]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 219721 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r219721 | dvossel | 2009-09-21 11:59:05 -0500
	  (Mon, 21 Sep 2009) | 9 lines Merged revisions 219720 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r219720 | dvossel | 2009-09-21 11:55:53 -0500 (Mon, 21
	  Sep 2009) | 3 lines Reverting merge 219520. This change was not
	  necessary. ........ ................

2009-09-20 18:21 +0000 [r219667]  Tilghman Lesher <tlesher@digium.com>

	* /, main/file.c: Merged revisions 219654 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r219654 | tilghman | 2009-09-20 12:55:49 -0500 (Sun, 20 Sep 2009)
	  | 15 lines Merged revisions 219653 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219653 | tilghman | 2009-09-20 12:52:05 -0500 (Sun, 20 Sep 2009)
	  | 8 lines Really stop the stream, when ast_closestream() is
	  called. (closes issue #15129) Reported by: bmh Patches:
	  20090918__issue15129.diff.txt uploaded by tilghman (license 14)
	  Review: https://reviewboard.asterisk.org/r/372/ ........
	  ................

2009-09-19 03:10 +0000 [r219589]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 219587 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r219587 | russell | 2009-09-18 21:59:52 -0500
	  (Fri, 18 Sep 2009) | 13 lines Merged revisions 219586 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219586 | russell | 2009-09-18 21:51:13 -0500 (Fri, 18 Sep 2009)
	  | 6 lines Make sure the iax_pvt exists before dereferencing it.
	  This fixes the latest crash posted on issue 15609. (issue #15609)
	  ........ ................

2009-09-18 23:22 +0000 [r219453-219522]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 219520 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r219520 | dvossel | 2009-09-18 18:20:58 -0500
	  (Fri, 18 Sep 2009) | 15 lines Merged revisions 219519 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219519 | dvossel | 2009-09-18 18:19:50 -0500 (Fri, 18 Sep 2009)
	  | 9 lines iax2 frame double free The iax frame's retrans sched id
	  was written over right before iax2_frame_free was called. In
	  iax2_frame_free that retrans id is used to delete the sched item.
	  By writing over the retrans field before the sched item could be
	  deleted, it was possible for a retransmit to occur on a freed
	  frame. ........ ................

	* /, channels/chan_sip.c: Merged revisions 219451 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r219451 | dvossel | 2009-09-18 11:20:41 -0500 (Fri, 18 Sep 2009)
	  | 20 lines Merged revisions 219450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219450 | dvossel | 2009-09-18 11:19:15 -0500 (Fri, 18 Sep 2009)
	  | 14 lines via-header branches not updated correctly on INVITE
	  INVITE requests must always contain a new unique branch id. When
	  a new branch id is created for an INVITE, the dialog's
	  invite_branch variable must be updated so CANCEL requests use the
	  correct branch id. (closes issue #15262) Reported by: maniax
	  Patches: asterisk-1.6.1.0-sip-branch.patch uploaded by tweety
	  (license 608) invite_new_branch_trunk.diff uploaded by dvossel
	  (license 671) Tested by: maniax, dvossel ........
	  ................

2009-09-18 13:57 +0000 [r219414]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 219412 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r219412 | tilghman | 2009-09-18 08:54:51 -0500 (Fri, 18 Sep 2009)
	  | 6 lines Missing value setting line for maxsecs/maxmessage
	  (closes issue #15696) Reported by: fhackenberger Patches:
	  maxsecs.patch uploaded by fhackenberger (license 592) ........

2009-09-17 22:36 +0000 [r219367]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 219324 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r219324 | mmichelson | 2009-09-17 17:22:01 -0500 (Thu, 17 Sep
	  2009) | 12 lines Merged revisions 219320 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219320 | mmichelson | 2009-09-17 17:20:50 -0500 (Thu, 17 Sep
	  2009) | 6 lines Send a 100 Trying response when we detect a
	  spiral. This was problematic during spiral tests at SIPit...
	  along with some other things as well. ........ ................

2009-09-17 22:04 +0000 [r219306]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 219304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r219304 | dvossel | 2009-09-17 16:59:21 -0500 (Thu, 17 Sep 2009)
	  | 27 lines Merged revisions 219303 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219303 | dvossel | 2009-09-17 16:29:37 -0500 (Thu, 17 Sep 2009)
	  | 21 lines INVITE w/Replaces deadlock fix This patch cleans up
	  the locking logic in chan_sip.c's handle_invite_replaces()
	  function as well as making use of ast_do_masquerade() rather than
	  forcing the masquerade on an ast_read(). The code had several
	  redundant unlocks that would result in 'freed more times than
	  we've locked!' errors. I cleaned these up as well as moving all
	  the unlock logic to the end of the function. This patch should
	  also resolve the issue people were having with the replacecall
	  channel never being unlocked with one legged calls. (closes issue
	  #15151) Reported by: irroot Patches: invite_w_replaces_1.4.diff
	  uploaded by dvossel (license 671) Tested by: irroot, dvossel
	  Review: https://reviewboard.asterisk.org/r/371/ ........
	  ................

2009-09-17 19:58 +0000 [r219266]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 219264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r219264 |
	  file | 2009-09-17 14:57:39 -0500 (Thu, 17 Sep 2009) | 2 lines
	  Ensure no spaces exist before "refresher=" when doing the
	  comparison. ........

2009-09-17  Leif Madsen <lmadsen@digium.com>

	* Released Asterisk 1.6.1.7-rc1

2009-09-17 15:44 +0000 [r219199]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /, include/asterisk/cdr.h,
	  include/asterisk/channel.h: Merged revisions 219139 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r219139 | mnicholson | 2009-09-17 10:18:01 -0500
	  (Thu, 17 Sep 2009) | 17 lines Merged revisions 219136 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219136 | mnicholson | 2009-09-17 09:58:39 -0500 (Thu, 17 Sep
	  2009) | 10 lines Prevent a potential race condition and crash
	  when hanging up a channel by removing the channel from the
	  channel list before begining channel tear down. This fix may
	  potentially cause problems with CDR backends that access the
	  channel a CDR is associated with via the channel list. This fix
	  makes the channel unavabile at the time when the CDR backend is
	  invoked. This has been documented in include/asterisk/cdr.h.
	  (closes issue #15316) Reported by: vmarrone Tested by: mnicholson
	  Review: https://reviewboard.asterisk.org/r/362/ ........
	  ................

2009-09-16 23:52 +0000 [r219062]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c, configs/extensions.conf.sample, /: Merged
	  revisions 219061 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r219061 | tilghman | 2009-09-16 18:42:12 -0500 (Wed, 16 Sep 2009)
	  | 15 lines Merged revisions 219023 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r219023 | tilghman | 2009-09-16 18:21:53 -0500 (Wed, 16 Sep 2009)
	  | 8 lines Properly deal with quotes in the arguments of '#exec'
	  includes. (closes issue #15583) Reported by: pkempgen Patches:
	  20090726__issue15583.diff.txt uploaded by tilghman (license 14)
	  20090726__issue15583-1.4-4.diff.txt uploaded by pkempgen (license
	  169) Tested by: pkempgen ........ ................

2009-09-16 19:27 +0000 [r218936]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218933 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218933 |
	  mmichelson | 2009-09-16 14:25:36 -0500 (Wed, 16 Sep 2009) | 12
	  lines Reverse order of args to fread. This way, we don't always
	  write a null byte into byte 1 of the buffer (closes issue #15905)
	  Reported by: ebroad Patches: freadfix.patch uploaded by ebroad
	  (license 878) Tested by: ebroad ........

2009-09-16 19:24 +0000 [r218932]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218918 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218918 |
	  file | 2009-09-16 13:31:47 -0500 (Wed, 16 Sep 2009) | 5 lines On
	  TCP and TLS connections do not attempt to stop retransmission of
	  the packet internally. This was preventing responses from being
	  properly processed because the packet was not being found causing
	  handle_response to return prematurely. ........

2009-09-16 18:23 +0000 [r218890]  David Brooks <dbrooks@digium.com>

	* main/pbx.c, /: Merged revisions 218868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218868 | dbrooks | 2009-09-16 13:06:42 -0500 (Wed, 16 Sep 2009)
	  | 20 lines Merged revisions 218867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218867 | dbrooks | 2009-09-16 13:00:45 -0500 (Wed, 16 Sep 2009)
	  | 13 lines Fixes CID pattern matching behavior to mirror that of
	  extension pattern matching. Pattern matching for extensions uses
	  a type of scoring system, giving values for specificity to each
	  character in the pattern. Unfortunately, this is done character
	  by character, in order. This does lead to some less specific
	  patterns being first in line for matching, but it will usually
	  get the job done. This patch merely brings CID matching to the
	  same level as extension matching. This patch does not attempt to
	  tackle the problem shared by extension matching. (closes issue
	  #14708) Reported by: klaus3000 ........ ................

2009-09-16 13:37 +0000 [r218801]  Russell Bryant <russell@digium.com>

	* contrib/firmware/iax/iaxy.bin (removed), /, UPGRADE.txt: Merged
	  revisions 218799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218799 | russell | 2009-09-16 08:34:41 -0500 (Wed, 16 Sep 2009)
	  | 16 lines Merged revisions 218798 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218798 | russell | 2009-09-16 08:33:43 -0500 (Wed, 16 Sep 2009)
	  | 9 lines Remove the IAXy firmware from Asterisk. The firmware
	  can now be found on downloads.digium.com, where the rest of our
	  binary downloads live. This was the last part of our Asterisk
	  tarballs that was considered non-free by Debian. :-) (closes
	  issue #15838) Reported by: paravoid ........ ................

2009-09-15 22:46 +0000 [r218727-218734]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 218731 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r218731 | tilghman | 2009-09-15 17:33:10 -0500
	  (Tue, 15 Sep 2009) | 13 lines Merged revisions 218730 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218730 | tilghman | 2009-09-15 17:27:41 -0500 (Tue, 15 Sep 2009)
	  | 6 lines If the user enters the same password as before, don't
	  signal an error when the change does nothing. (closes issue
	  #15492) Reported by: cbbs70a Patches:
	  20090713__issue15492.diff.txt uploaded by tilghman (license 14)
	  ........ ................

	* /, channels/chan_gtalk.c: Merged revisions 139281,175058,175089
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  (closes issue #13985) ................ r139281 | phsultan |
	  2008-08-21 04:55:31 -0500 (Thu, 21 Aug 2008) | 5 lines Fix two
	  memory leaks in chan_gtalk, thanks Eliel! (closes issue #13310)
	  Reported by: eliel Patches: chan_gtalk.c.patch uploaded by eliel
	  (license 64) ................ r175058 | phsultan | 2009-02-12
	  04:31:36 -0600 (Thu, 12 Feb 2009) | 20 lines Merged revisions
	  175029 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175029 | phsultan | 2009-02-12 11:16:21 +0100 (Thu, 12 Feb 2009)
	  | 12 lines Set the initiator attribute to lowercase in our
	  replies when receiving calls. This attribute contains a JID that
	  identifies the initiator of the GoogleTalk voice session. The
	  GoogleTalk client discards Asterisk's replies if the initiator
	  attribute contains uppercase characters. (closes issue #13984)
	  Reported by: jcovert Patches: chan_gtalk.2.patch uploaded by
	  jcovert (license 551) Tested by: jcovert ........
	  ................ r175089 | phsultan | 2009-02-12 08:25:03 -0600
	  (Thu, 12 Feb 2009) | 6 lines Issue a warning message if our
	  candidate's IP is the loopback address. (closes issue #13985)
	  Reported by: jcovert Tested by: phsultan ................

2009-09-15 19:27 +0000 [r218689]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218687 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218687 |
	  dvossel | 2009-09-15 14:22:37 -0500 (Tue, 15 Sep 2009) | 2 lines
	  upward bound checking for port string to int conversion ........

2009-09-15 16:18 +0000 [r218592]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218586 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218586 | mnicholson | 2009-09-15 11:15:02 -0500 (Tue, 15 Sep
	  2009) | 15 lines Merged revisions 218578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218578 | mnicholson | 2009-09-15 11:03:54 -0500 (Tue, 15 Sep
	  2009) | 8 lines Send request contact header field with response
	  to registrer queries instead of the address of record. (closes
	  issue #14438) Reported by: ravindrad Patches: regquerypatch
	  uploaded by ravindrad (license 684) Tested by: ravindrad ........
	  ................

2009-09-15 16:05 +0000 [r218581]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_followme.c, /: Merged revisions 218579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218579 | tilghman | 2009-09-15 11:04:41 -0500 (Tue, 15 Sep 2009)
	  | 16 lines Merged revisions 218577 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218577 | tilghman | 2009-09-15 11:01:17 -0500 (Tue, 15 Sep 2009)
	  | 9 lines Ensure FollowMe sets language in channels it creates.
	  Also, not in the original bug report, but related fields are
	  accountcode and musicclass, and the inheritance of datastores.
	  (closes issue #15372) Reported by: Romik Patches:
	  20090828__issue15372.diff.txt uploaded by tilghman (license 14)
	  Tested by: cervajs ........ ................

2009-09-15 15:42 +0000 [r218574]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218566 |
	  mmichelson | 2009-09-15 10:40:14 -0500 (Tue, 15 Sep 2009) | 4
	  lines Use a better method of ensuring null-termination of the
	  buffer while reading the SDP when using TCP. ........

2009-09-15 15:41 +0000 [r218569]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: Merged revisions 218430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218430 | jpeeler | 2009-09-14 17:38:25 -0500 (Mon, 14 Sep 2009)
	  | 18 lines Merged revisions 218401 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218401 | jpeeler | 2009-09-14 16:47:11 -0500 (Mon, 14 Sep 2009)
	  | 11 lines Fix handling of DAHDI_EVENT_REMOVED event to prevent
	  crash in do_monitor. After talking to rmudgett about some of his
	  recent iflist locking changes, it was determined that the only
	  place that would destroy a channel without being explicitly to do
	  so was in handle_init_event. The loop to walk the interface list
	  has been modified to wait to destroy the channel until the
	  dahdi_pvt of the channel to be destroyed is no longer needed.
	  (closes issue #15378) Reported by: samy ........ ................

2009-09-15 15:12 +0000 [r218506]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 218499,218504 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r218499 | mmichelson | 2009-09-15 09:59:50 -0500 (Tue,
	  15 Sep 2009) | 3 lines Fix off-by-one error when reading SDP sent
	  over TCP. ........ r218504 | mmichelson | 2009-09-15 10:05:53
	  -0500 (Tue, 15 Sep 2009) | 3 lines Ensure that SDP read from TCP
	  socket is null-terminated. ........

2009-09-15 15:04 +0000 [r218502]  Kevin P. Fleming <kpfleming@digium.com>

	* sounds/Makefile, /: Merged revisions 218500 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r218500 | kpfleming | 2009-09-15 11:02:21 -0400 (Tue, 15 Sep
	  2009) | 9 lines Merged revisions 218497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218497 | kpfleming | 2009-09-15 10:55:58 -0400 (Tue, 15 Sep
	  2009) | 1 line Use proper hostname for downloading sound files.
	  ........ ................

2009-09-14 19:49 +0000 [r218363]  Tilghman Lesher <tlesher@digium.com>

	* sounds/Makefile, apps/app_voicemail.c, /,
	  configs/voicemail.conf.sample: Merged revisions 218361 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r218361 | tilghman | 2009-09-14 14:29:48 -0500
	  (Mon, 14 Sep 2009) | 11 lines Recorded merge of revisions 218331
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218331 | tilghman | 2009-09-14 14:16:35 -0500 (Mon, 14 Sep 2009)
	  | 4 lines Don't say "Please try again" if we don't give the user
	  another chance to try again. (issue #15055, SWP-129) Reported by:
	  jthurman ........ ................

2009-09-14 18:17 +0000 [r218297]  Joshua Colp <jcolp@digium.com>

	* /, main/features.c: Merged revisions 218295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218295 |
	  file | 2009-09-14 13:16:39 -0500 (Mon, 14 Sep 2009) | 2 lines Do
	  not attempt to add a parking extension if an error occurred while
	  reading the configuration. ........

2009-09-14 15:17 +0000 [r218227]  Matthew Nicholson <mnicholson@digium.com>

	* /, apps/app_directed_pickup.c: Merged revisions 218224 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r218224 | mnicholson | 2009-09-14 09:57:23 -0500
	  (Mon, 14 Sep 2009) | 14 lines Merged revisions 218223 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r218223 | mnicholson | 2009-09-14 09:53:57 -0500 (Mon, 14 Sep
	  2009) | 8 lines Ensure we don't pickup ourselves when doing
	  pickup by exten. (closes issue #15100) Reported by: lmsteffan
	  Patches: (modified) pickup.patch uploaded by lmsteffan (license
	  779) ........ ................

2009-09-13 21:48 +0000 [r218218]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* channels/chan_phone.c, /: gcc 4.4: Remove a nop memset size 0
	  that annoys gcc This memset doesn't write beyond the end of the
	  buffer. (tmpbuf has size of 4). Merged revisions 218184 via
	  svnmerge from http://svn.digium.com/svn/asterisk/trunk

2009-09-12 13:15 +0000 [r218112]  Michiel van Baak <michiel@vanbaak.info>

	* main/rtp.c: Use the ip for the new 'rtp set debug ip <foo>'.
	  Since 1.6.X still has the deprecated 'rtp debug ip <foo>' this
	  patch is different from the fix that went into trunk (closes
	  issue 0015711) Reported by: davidw Patches:
	  2009082800-rtpdebug.diff.txt uploaded by mvanbaak (license 7)
	  Tested by: davidw

2009-09-11 05:59 +0000 [r217924-218054]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 218050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r218050 |
	  tilghman | 2009-09-11 00:58:11 -0500 (Fri, 11 Sep 2009) | 3 lines
	  Check the origination priority for more matches, not the current
	  priority. Found by Pavel Troller on the -dev list. ........

	* apps/app_queue.c, /: Merged revisions 217990 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r217990 | tilghman | 2009-09-10 18:54:51 -0500 (Thu, 10 Sep 2009)
	  | 10 lines Merged revisions 217989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r217989 | tilghman | 2009-09-10 18:52:22 -0500 (Thu, 10 Sep 2009)
	  | 3 lines Don't ring another channel, if there's not enough time
	  for a queue member to answer. (Fixes AST-228) ........
	  ................

	* channels/chan_iax2.c, contrib/scripts/iax-friends.sql, /,
	  channels/chan_sip.c: Merged revisions 217916 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217916 |
	  tilghman | 2009-09-10 18:12:16 -0500 (Thu, 10 Sep 2009) | 2 lines
	  Make calltoken support work with realtime users and peers.
	  ........

2009-09-10 21:23 +0000 [r217826]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 217807 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r217807 | dvossel | 2009-09-10 16:07:47 -0500
	  (Thu, 10 Sep 2009) | 28 lines Merged revisions 217806 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r217806 | dvossel | 2009-09-10 16:06:07 -0500 (Thu, 10 Sep 2009)
	  | 22 lines IAX2 encryption regression The IAX2 Call Token
	  security patch inadvertently broke the use of encryption due to
	  the reorganization of code in the socket_process() function. When
	  encryption is used, an incoming full frame must first be
	  decrypted before the information elements can be parsed. The
	  security release mistakenly moved IE parsing before decryption in
	  order to process the new Call Token IE. To resolve this,
	  decryption of full frames is once again done before looking into
	  the frame. This involves searching for an existing callno,
	  checking the pvt to see if encryption is turned on, and
	  decrypting the packet before the internal fields of the full
	  frame are accessed. (closes issue #15834) Reported by: karesmakro
	  Patches: iax2_encryption_fix_1.4.diff uploaded by dvossel
	  (license 671) Tested by: dvossel, karesmakro Review:
	  https://reviewboard.asterisk.org/r/355/ ........ ................

2009-09-10 19:55 +0000 [r217738]  mnick <mnick@localhost>:

	* /, res/res_musiconhold.c: Merged revisions 217730 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r217730 | mnick | 2009-09-10 14:39:41 -0500 (Thu, 10 Sep 2009) |
	  17 lines Sets the correct musicclass after an announcement
	  (closes issue #15279) Reported by: mbeckwell Patches: patch.txt
	  uploaded by mnick (license ) Tested by: mnick (closes issue
	  #15832) Reported by: mbeckwell Patches: patch.txt uploaded by
	  mnick (license 874) Tested by: mnick ........

2009-09-10 18:18 +0000 [r217642]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Merged revisions
	  217638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217638 |
	  tilghman | 2009-09-10 13:17:14 -0500 (Thu, 10 Sep 2009) | 4 lines
	  Verify support for wide ODBC character types before using them.
	  (closes issue #15870) Reported by: nic_bellamy ........

2009-09-10 12:11 +0000 [r217595]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 217593 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217593 |
	  oej | 2009-09-10 14:06:55 +0200 (Tor, 10 Sep 2009) | 8 lines
	  Include ActionID in all events that are responsed to AMI Action
	  SIPShowRegistry (closes issue #15868) Reported by: nic_bellamy
	  Patches: manager_SIPshowregistry_actionid.patch uploaded by nic
	  bellamy (license 299) ........

2009-09-09 20:30 +0000 [r217518]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, res/res_phoneprov.c: gcc 4.4 fix: union instead of cast gcc
	  4.4 has more strict rules for aliasing. It doesn't like a struct
	  sockaddr_in pointer pointing to a struct sockaddr. So we make it
	  a union. Merged revisions 217445 via svnmerge from
	  http://svn.digium.com/svn/asterisk/trunk

2009-09-09 11:02 +0000 [r217370]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 217368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217368 |
	  oej | 2009-09-09 12:39:43 +0200 (Ons, 09 Sep 2009) | 2 lines Not
	  having any TLS session to write to is a serious XMIT_ERROR.
	  ........

2009-09-08 22:20 +0000 [r217295]  Sean Bright <sean@malleable.com>

	* /, apps/app_meetme.c: Merged revisions 217286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217286 |
	  seanbright | 2009-09-08 18:17:08 -0400 (Tue, 08 Sep 2009) | 4
	  lines Fix compilation of app_meetme. Reported by ebroad in
	  #asterisk-bugs ........

2009-09-08 20:32 +0000 [r217213]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_meetme.c: Merged revisions 217199 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r217199 | tilghman | 2009-09-08 15:28:41 -0500 (Tue, 08 Sep 2009)
	  | 14 lines Merged revisions 217156 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r217156 | tilghman | 2009-09-08 15:01:45 -0500 (Tue, 08 Sep 2009)
	  | 7 lines When MOH is playing on the channel, announcements sent
	  through the conference are not heard. (closes issue #14588)
	  Reported by: voipas Patches: 20090716__issue14588__2.diff.txt
	  uploaded by tilghman (license 14) Tested by: lmadsen, twisted,
	  tilghman ........ ................

2009-09-08 16:39 +0000 [r217076]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 217074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217074 |
	  kpfleming | 2009-09-08 11:37:28 -0500 (Tue, 08 Sep 2009) | 9
	  lines Ensure that the default autoconf CFLAGS are not used. A
	  recent change to the configure script that allows the user to
	  specify CFLAGS and/or LDFLAGS to the script had the unfortunate
	  side effect of letting autoconf's default CFLAGS (-g -O2) feed in
	  to the rest of the build system, thereby overriding the
	  DONT_OPTIMIZE setting in menuselect. That problem is now
	  corrected. ........

2009-09-08 15:36 +0000 [r217035]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_limit.c: Merged revisions 217033 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r217033 |
	  tilghman | 2009-09-08 10:30:18 -0500 (Tue, 08 Sep 2009) | 4 lines
	  Remove what appears to be an unnecessary define. (closes issue
	  #15851) Reported by: tzafrir ........

2009-09-08 14:27 +0000 [r216995]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 216993 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216993 |
	  dvossel | 2009-09-08 09:26:30 -0500 (Tue, 08 Sep 2009) | 14 lines
	  caller id number empty parse_uri was not being given the correct
	  scheme's, as a result, uri parsing did not parse the username
	  correctly. One of the side effects of this is an empty caller id.
	  (closes issue #15839) Reported by: ebroad Patches:
	  blank_cidv2.patch uploaded by ebroad (license 878)
	  parse_uri_fix.diff uploaded by dvossel (license 671) Tested by:
	  ebroad, dvossel ........

2009-09-07 16:41 +0000 [r216646-216844]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 216842 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216842 |
	  oej | 2009-09-07 18:35:12 +0200 (MÃ¥n, 07 Sep 2009) | 2 lines
	  Make sure we reset global_exclude_static at channel reload
	  ........

	* /, channels/chan_sip.c: Merged revisions 216695 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216695 |
	  oej | 2009-09-07 15:06:19 +0200 (MÃ¥n, 07 Sep 2009) | 8 lines If
	  there is no session timer setting in the INVITE, set it to
	  default value (not unset minimum = -1) Patch by oej closes issue
	  #15621 Reported by: fnordian Tested by: atis ........

	* configs/sip.conf.sample: Make code and documentation agree with
	  each other

	* CHANGES, channels/chan_sip.c: Turning off premature media by
	  default

	* apps/app_playback.c, main/pbx.c, /, channels/chan_sip.c,
	  apps/app_disa.c, configs/sip.conf.sample: Merged revisions 216438
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r216438 | oej | 2009-09-04 16:02:34 +0200 (Fre,
	  04 Sep 2009) | 35 lines Merged revisions 216430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r216430 | oej | 2009-09-04 15:45:48 +0200 (Fre, 04 Sep 2009) | 27
	  lines Make apps send PROGRESS control frame for early media and
	  fix too early media issue in SIP The issue at hand is that some
	  legacy (dying) PBX systems send empty media frames on PRI links
	  *before* any call progress. The SIP channel receives these frames
	  and by default signals 183 Session progress and starts sending
	  media. This will cause phones to play silence and ignore the
	  later 180 ringing message. A bad user experience. The fix is
	  twofold: - We discovered that asterisk apps that support early
	  media ("noanswer") did not send any PROGRESS frame to indicate
	  early media. Fixed. - We introduce a setting in chan_sip so that
	  users can disable any relay of media frames before the outbound
	  channel actually indicates any sort of call progress. In 1.4,
	  1.6.0 and 1.6.1, this will be disabled for backward
	  compatibility. In later versions of Asterisk, this will be
	  enabled. We don't assume that it will change your Asterisk phone
	  experience - only for the better. We encourage third-party
	  application developers to make sure that if they have
	  applications that wants to send early media, add a PROGRESS
	  control frame transmission to make sure that all channel drivers
	  actually will start sending early media. This has not been the
	  default in Asterisk previous to this patch, so if you got
	  inspiration from our code, you need to update accordingly. Sorry
	  for the trouble and thanks for your support. This code has been
	  running for a few months in a large scale installation (over 250
	  servers with PRI and/or BRI links to old PBX systems). That's no
	  proof that this is an excellent patch, but, well, it's tested :-)
	  ........ ................

2009-09-04 19:51 +0000 [r216599]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 216594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216594 |
	  dvossel | 2009-09-04 14:32:07 -0500 (Fri, 04 Sep 2009) | 7 lines
	  sip peer matching by address only with TCP/TLS This patch removes
	  the contact header matching logic and adds logic to match all
	  tcp/tls connections by ip only Review:
	  https://reviewboard.asterisk.org/r/354/ ........

2009-09-04 19:32 +0000 [r216596]  Sean Bright <sean@malleable.com>

	* apps/app_voicemail.c, /: Merged revisions 216593 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r216593 | seanbright | 2009-09-04 15:29:02 -0400 (Fri, 04 Sep
	  2009) | 1 line Use ast_free() instead of free(). ........

2009-09-04 17:53 +0000 [r216549-216552]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 216551 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r216551 | tilghman | 2009-09-04 12:50:21 -0500 (Fri, 04 Sep 2009)
	  | 2 lines Fix trunk breakage. ........

	* main/pbx.c, /, UPGRADE-1.6.txt: Merged revisions 216547 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r216547 | tilghman | 2009-09-04 12:31:44 -0500 (Fri, 04
	  Sep 2009) | 3 lines Enable turning off the application delimiter
	  warning with the 'dontwarn' option. Suggested on the -dev list,
	  and implemented in an alternate way by me. ........

2009-09-04 15:09 +0000 [r216440-216508]  Michiel van Baak <michiel@vanbaak.info>

	* /, main/utils.c: Merged revisions 216506 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r216506 | mvanbaak | 2009-09-04 17:05:05 +0200 (Fri, 04 Sep 2009)
	  | 9 lines Merged revisions 216435 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r216435 | mvanbaak | 2009-09-04 15:56:10 +0200 (Fri, 04 Sep 2009)
	  | 2 lines make asterisk compile under devmode with DEBUG_THREADS
	  enabled on OpenBSD ........ ................

	* /, include/asterisk/lock.h: Merged revisions 216437 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r216437 | mvanbaak | 2009-09-04 16:00:38 +0200 (Fri, 04 Sep 2009)
	  | 2 lines make sure canlog is set so we can compile with
	  DEBUG_THREADS enabled on OpenBSD ........

2009-09-04 13:56 +0000 [r216266-216434]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 216368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216368 |
	  russell | 2009-09-04 08:14:25 -0500 (Fri, 04 Sep 2009) | 12 lines
	  Do not treat every SIP peer as if they were configured with
	  insecure=port. There was a problem in the function responsible
	  for doing peer matching by IP address and port number such that
	  during the second pass for checking for a peer configured with
	  insecure=port, it would end up treating every peer as if it had
	  been configured that way. These changes fix the logic in the peer
	  IP and port comparison callback to handle insecure=port checking
	  properly. This problem was introduced when SIP peers were
	  converted to astobj2. Many thanks to dvossel for noticing this
	  while working on another peer matching issue. ........

	* doc/IAX2-security.txt (added), /: Merged revisions 216264 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r216264 | russell | 2009-09-04 05:48:44 -0500
	  (Fri, 04 Sep 2009) | 16 lines Merged revisions 216263 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r216263 | russell | 2009-09-04 05:48:00 -0500
	  (Fri, 04 Sep 2009) | 9 lines Merged revisions 216262 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r216262 | russell | 2009-09-04 05:47:37 -0500 (Fri, 04
	  Sep 2009) | 2 lines Add a plain text version of the IAX2 security
	  document. ........ ................ ................

2009-09-04 06:13 +0000 [r216224]  Michiel van Baak <michiel@vanbaak.info>

	* main/astobj2.c, /: Merged revisions 216222 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r216222 |
	  mvanbaak | 2009-09-04 08:08:33 +0200 (Fri, 04 Sep 2009) | 3 lines
	  make sure 'start' is always initialized. Makes asterisk compile
	  with --enable-dev-mode ........

2009-09-03 19:42 +0000 [r216013-216098]  Russell Bryant <russell@digium.com>

	* UPGRADE.txt: tweak

	* /, UPGRADE.txt: Merged revisions 216092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r216092 | russell | 2009-09-03 14:38:35 -0500 (Thu, 03 Sep 2009)
	  | 16 lines Merged revisions 216085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r216085 | russell | 2009-09-03 14:36:46 -0500
	  (Thu, 03 Sep 2009) | 9 lines Merged revisions 216080 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r216080 | russell | 2009-09-03 14:35:23 -0500 (Thu, 03
	  Sep 2009) | 2 lines Add a note about IAX2 to UPGRADE.txt.
	  ........ ................ ................

	* /, doc/IAX2-security.pdf (added): Merged revisions 216009 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r216009 | russell | 2009-09-03 13:45:54 -0500
	  (Thu, 03 Sep 2009) | 16 lines Merged revisions 216008 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r216008 | russell | 2009-09-03 13:44:58 -0500
	  (Thu, 03 Sep 2009) | 9 lines Merged revisions 216005 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r216005 | russell | 2009-09-03 13:42:24 -0500 (Thu, 03
	  Sep 2009) | 2 lines Add IAX2 security document related to
	  AST-2009-006. ........ ................ ................

2009-09-03 18:41 +0000 [r216004]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, channels/iax2-parser.c, main/astobj2.c,
	  configs/iax.conf.sample, include/asterisk/acl.h,
	  channels/iax2-parser.h, /, include/asterisk/astobj2.h,
	  channels/iax2.h, main/acl.c: Merged revisions 215955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r215955 | dvossel | 2009-09-03 11:31:54 -0500 (Thu, 03 Sep 2009)
	  | 6 lines Merge code associated with AST-2009-006 (closes issue
	  #12912) Reported by: rathaus Tested by: tilghman, russell,
	  dvossel, dbrooks ........

2009-09-03  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.6 released

	* AST-2009-006

2009-08-28  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.5 released

2009-08-11  Tilghman Lesher <tlesher@digium.com>

	* Asterisk 1.6.1.5-rc1 released

2009-08-10 19:51 +0000 [r211569-211586]  Tilghman Lesher <tlesher@digium.com>

	* doc/CODING-GUIDELINES, /: Merged revisions 211584 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r211584 | tilghman | 2009-08-10 14:49:41 -0500
	  (Mon, 10 Aug 2009) | 9 lines Merged revisions 211583 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r211583 | tilghman | 2009-08-10 14:48:48 -0500 (Mon, 10
	  Aug 2009) | 1 line Conversion specifiers, not format specifiers
	  ........ ................

	* channels/chan_iax2.c, res/ael/pval.c, main/cdr.c, main/channel.c,
	  main/manager.c, apps/app_setcallerid.c, apps/app_rpt.c,
	  main/asterisk.c, res/res_config_pgsql.c, apps/app_dahdibarge.c,
	  funcs/func_rand.c, funcs/func_timeout.c, apps/app_record.c,
	  codecs/codec_speex.c, apps/app_morsecode.c, main/acl.c,
	  funcs/func_cut.c, cdr/cdr_pgsql.c, apps/app_followme.c,
	  main/enum.c, res/res_config_sqlite.c, main/config.c,
	  agi/eagi-sphinx-test.c, channels/misdn_config.c,
	  channels/chan_dahdi.c, funcs/func_channel.c, apps/app_macro.c,
	  apps/app_sms.c, pbx/pbx_config.c, apps/app_verbose.c, main/dsp.c,
	  apps/app_voicemail.c, apps/app_adsiprog.c, funcs/func_speex.c,
	  channels/chan_sip.c, res/res_limit.c, channels/chan_agent.c,
	  agi/eagi-test.c, funcs/func_math.c, main/utils.c,
	  channels/iax2-provision.c, apps/app_talkdetect.c,
	  main/indications.c, channels/chan_oss.c, main/cli.c,
	  res/res_config_curl.c, pbx/pbx_loopback.c, res/res_smdi.c,
	  apps/app_osplookup.c, channels/chan_misdn.c,
	  channels/chan_skinny.c, pbx/pbx_dundi.c, utils/extconf.c,
	  apps/app_mixmonitor.c, channels/chan_mgcp.c, main/timing.c,
	  main/pbx.c, doc/CODING-GUIDELINES, utils/muted.c,
	  apps/app_readfile.c, /, apps/app_meetme.c, apps/app_privacy.c,
	  apps/app_waituntil.c, cdr/cdr_adaptive_odbc.c,
	  pbx/dundi-parser.c, res/res_http_post.c, res/res_musiconhold.c,
	  apps/app_queue.c, main/netsock.c, utils/frame.c,
	  channels/chan_usbradio.c, funcs/func_enum.c,
	  channels/chan_phone.c, apps/app_waitforring.c, pbx/pbx_spool.c,
	  funcs/func_odbc.c, apps/app_minivm.c, main/features.c,
	  res/res_agi.c, main/http.c, res/snmp/agent.c,
	  res/res_config_ldap.c, apps/app_chanspy.c, apps/app_stack.c,
	  res/res_odbc.c, funcs/func_dialplan.c, main/dnsmgr.c,
	  main/frame.c, apps/app_waitforsilence.c, funcs/func_strings.c,
	  apps/app_disa.c, apps/app_alarmreceiver.c: AST-2009-005

2009-08-10 14:12 +0000 [r211349]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 211347 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r211347 |
	  file | 2009-08-10 11:07:44 -0300 (Mon, 10 Aug 2009) | 5 lines Fix
	  retrieval of the port used for the video stream when adding SDP
	  to a SIP message. (closes issue #15121) Reported by: jsmith
	  ........

2009-08-09 15:43 +0000 [r211234-211277]  Tilghman Lesher <tlesher@digium.com>

	* /, main/astfd.c: Merged revisions 211275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r211275 | tilghman | 2009-08-09 10:42:02 -0500 (Sun, 09 Aug 2009)
	  | 9 lines Merged revisions 211274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r211274 | tilghman | 2009-08-09 10:41:01 -0500 (Sun, 09 Aug 2009)
	  | 2 lines Small oops. Clear the flags which have been checked.
	  ........ ................

	* apps/app_stack.c, /: Merged revisions 211232 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r211232 |
	  tilghman | 2009-08-09 02:11:22 -0500 (Sun, 09 Aug 2009) | 4 lines
	  Check for NULL frame, before dereferencing pointer. (closes issue
	  #15617) Reported by: rain ........

2009-08-07 20:17 +0000 [r211115]  Russell Bryant <russell@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 211113 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r211113 | russell | 2009-08-07 15:12:21 -0500 (Fri, 07 Aug 2009)
	  | 11 lines Recorded merge of revisions 211112 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r211112 | russell | 2009-08-07 15:11:31 -0500 (Fri, 07 Aug 2009)
	  | 4 lines Resolve a deadlock involving app_chanspy and
	  masquerades. (ABE-1936) ........ ................

2009-08-07 18:19 +0000 [r211047]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_queue.c, /: Merged revisions 211040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r211040 | tilghman | 2009-08-07 13:17:41 -0500 (Fri, 07 Aug 2009)
	  | 21 lines Merged revisions 211038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r211038 | tilghman | 2009-08-07 13:16:28 -0500 (Fri, 07 Aug 2009)
	  | 14 lines QUEUE_MEMBER_LIST _really_ wants the interface name,
	  not the membername. This is a partial revert of revision 82590,
	  which was an attempted cleanup, but in reality, it broke
	  QUEUE_MEMBER_LIST, which has always been intended as a method by
	  which component interfaces could be queried from the queue.
	  Membername isn't useful here, because that field cannot be used
	  to obtain further information about the member. See the
	  documentation on QUEUE_MEMBER_LIST, RemoveQueueMember,
	  QUEUE_MEMBER_PENALTY, and the various AMI commands which take a
	  member argument for further justification. (closes issue #15664)
	  Reported by: rain Patches: app_queue-queue_member_list.diff
	  uploaded by rain (license 327) ........ ................

2009-08-07 13:09 +0000 [r210994]  Kevin P. Fleming <kpfleming@digium.com>

	* main/udptl.c, /: Merged revisions 210992 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r210992 |
	  kpfleming | 2009-08-07 08:08:00 -0500 (Fri, 07 Aug 2009) | 13
	  lines Workaround broken T.38 endpoints that offer tiny
	  MaxDatagram sizes. Some T.38 endpoints treat T38FaxMaxDatagram as
	  the maximum IFP size that should be sent to them, rather than the
	  maximum packet payload size. If such an endpoint also requests
	  UDPRedundancy as the error correction mode, we'll end up
	  calculating a tiny maximum IFP size, so small as to be unusable.
	  This patch sets a lower bound on what we'll consider the remote's
	  maximum IFP size to be, assuming that endpoints that do this
	  really can accept larger packets than they've offered to accept.
	  (closes issue #15649) Reported by: dazza76 ........

2009-08-06 21:47 +0000 [r210910-210916]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 210914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r210914 | tilghman | 2009-08-06 16:46:01 -0500 (Thu, 06 Aug 2009)
	  | 14 lines Merged revisions 210913 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r210913 | tilghman | 2009-08-06 16:45:01 -0500 (Thu, 06 Aug 2009)
	  | 7 lines Because channel information can be accessed outside of
	  the channel thread, we must lock the channel prior to modifying
	  it. (closes issue #15397) Reported by: caspy Patches:
	  20090714__issue15397.diff.txt uploaded by tilghman (license 14)
	  Tested by: caspy ........ ................

	* apps/app_stack.c, include/asterisk/app.h, /, main/app.c: Merged
	  revisions 210908 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r210908 |
	  tilghman | 2009-08-06 16:29:26 -0500 (Thu, 06 Aug 2009) | 9 lines
	  Allow Gosub to recognize quote delimiters without consuming them.
	  (closes issue #15557) Reported by: rain Patches:
	  20090723__issue15557.diff.txt uploaded by tilghman (license 14)
	  Tested by: rain Review: https://reviewboard.asterisk.org/r/316/
	  ........

2009-08-06 17:48 +0000 [r210819]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 210817 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r210817 |
	  file | 2009-08-06 14:47:04 -0300 (Thu, 06 Aug 2009) | 11 lines
	  Accept additional T.38 reinvites after an initial one has been
	  handled. Discussion of this subject has yielded that it is not
	  actually acceptable to change T.38 parameters after the initial
	  reinvite but declining is harsh and can cause the fax to fail
	  when it may be possible to allow it to continue. This patch
	  changes things so that additional T.38 reinvites are accepted but
	  parameter changes ignored. This gives the fax a fighting chance.
	  (closes issue #15610) Reported by: huangtx2009 ........

2009-08-05 20:28 +0000 [r210681]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 210640 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r210640 | rmudgett | 2009-08-05 14:40:03 -0500
	  (Wed, 05 Aug 2009) | 21 lines Merged revisions 210575 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r210575 | rmudgett | 2009-08-05 14:18:56 -0500 (Wed, 05 Aug 2009)
	  | 14 lines Dialplan starts execution before the channel setup is
	  complete. * Issue 15655: For the case where dialing is complete
	  for an incoming call, dahdi_new() was asked to start the PBX and
	  then the code set more channel variables. If the dialplan hungup
	  before these channel variables got set, asterisk would likely
	  crash. * Fixed potential for overlap incoming call to erroneously
	  set channel variables as global dialplan variables if the
	  ast_channel structure failed to get allocated. * Added missing
	  set of CALLINGSUBADDR in the dialing is complete case. (closes
	  issue #15655) Reported by: alecdavis ........ ................

2009-08-05 18:57 +0000 [r210567]  Leif Madsen <lmadsen@digium.com>

	* doc/tex/imapstorage.tex, /: Merged revisions 210564 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r210564 | lmadsen | 2009-08-05 13:49:58 -0500
	  (Wed, 05 Aug 2009) | 19 lines Merged revisions 210563 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r210563 | lmadsen | 2009-08-05 13:46:21 -0500 (Wed, 05 Aug 2009)
	  | 11 lines Update imapstorage.txt documentation. Updated the
	  imapstorage.txt documentation to reflect that issues with
	  c-client versions older than 2007 seem to cause crashing issues
	  that are not seen with more recent versions. Documentation has
	  been updated to reflect this. (closes issue #14496) Reported by:
	  vbcrlfuser Patches: __20090727-imap-documentation-patch.txt
	  uploaded by lmadsen (license 10) Tested by: lmadsen, mmichelson,
	  dbrooks ........ ................

2009-08-04 14:54 +0000 [r210240]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: Merged revisions 210238 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r210238 | kpfleming | 2009-08-04 09:53:00 -0500 (Tue, 04 Aug
	  2009) | 16 lines Merged revisions 210237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r210237 | kpfleming | 2009-08-04 09:51:39 -0500 (Tue, 04 Aug
	  2009) | 10 lines Eliminate spurious compiler warnings from system
	  headers on *BSD platforms. Ensure that system headers located in
	  /usr/local/include are actually treated as system headers by the
	  compiler, and not as local headers which are subject to warnings
	  from the -Wundef compiler option and others. (closes issue
	  #15606) Reported by: mvanbaak ........ ................

2009-08-01 11:32 +0000 [r209836-209900]  Russell Bryant <russell@digium.com>

	* main/db1-ast/mpool/mpool.c, /: Merged revisions 209887 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r209887 | russell | 2009-08-01 06:29:25 -0500
	  (Sat, 01 Aug 2009) | 12 lines Merged revisions 209879 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r209879 | russell | 2009-08-01 06:27:25 -0500 (Sat, 01 Aug 2009)
	  | 5 lines Resolve a valgrind warning about a read from
	  uninitialized memory. (issue #15396) Reported by: aragon ........
	  ................

	* apps/app_milliwatt.c, /: Merged revisions 209839 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r209839 | russell | 2009-08-01 06:02:07 -0500
	  (Sat, 01 Aug 2009) | 20 lines Merged revisions 209838 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r209838 | russell | 2009-08-01 05:59:05 -0500 (Sat, 01 Aug 2009)
	  | 13 lines Modify how Playtones() is used in Milliwatt() to
	  resolve gain issue. When Milliwatt() was changed internally to
	  use Playtones() so that the proper tone was used, it introduced a
	  drop in gain in the output signal. So, use the playtones API
	  directly and specify a volume argument such that the output
	  matches the gain of the original Milliwatt() code. (closes issue
	  #15386) Reported by: rue_mohr Patches: issue_15386.rev2.diff
	  uploaded by russell (license 2) Tested by: rue_mohr ........
	  ................

	* /, main/event.c: Merged revisions 209835 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209835 |
	  russell | 2009-08-01 05:43:40 -0500 (Sat, 01 Aug 2009) | 6 lines
	  Fix ast_event_queue_and_cache() to actually do the cache() part.
	  (closes issue #15624) Reported by: ffossard Tested by: russell
	  ........

2009-08-01 01:25 +0000 [r209781]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/misdn/isdn_lib.c, utils/frame.c, /, main/Makefile,
	  channels/misdn/ie.c: Merged revisions 209760-209761 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r209760 | kpfleming | 2009-07-31 20:03:07 -0500
	  (Fri, 31 Jul 2009) | 13 lines Merged revisions 209759 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r209759 | kpfleming | 2009-07-31 19:52:00 -0500 (Fri, 31 Jul
	  2009) | 7 lines Minor changes inspired by testing with latest
	  GCC. The latest GCC (what will become 4.5.x) has a few new
	  warnings, that in these cases found some either downright buggy
	  code, or at least seriously poorly designed code that could be
	  improved. ........ ................ r209761 | kpfleming |
	  2009-07-31 20:04:06 -0500 (Fri, 31 Jul 2009) | 1 line Revert
	  accidental Makefile change. ................

2009-07-31 21:58 +0000 [r209714]  Russell Bryant <russell@digium.com>

	* /, main/event.c: Merged revisions 209711 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209711 |
	  russell | 2009-07-31 16:53:31 -0500 (Fri, 31 Jul 2009) | 2 lines
	  Fix some places where ast_event_type was used instead of
	  ast_event_ie_type. ........

2009-07-30 18:46 +0000 [r209593]  David Brooks <dbrooks@digium.com>

	* include/asterisk/abstract_jb.h, channels/chan_dahdi.c,
	  contrib/init.d/rc.debian.asterisk, /, apps/app_sms.c,
	  codecs/lpc10/pitsyn.c, channels/chan_console.c: Merged revisions
	  209554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209554 |
	  dbrooks | 2009-07-30 11:07:05 -0500 (Thu, 30 Jul 2009) | 6 lines
	  Fixes numerous spelling errors. Patch submitted by alecdavis.
	  (closes issue #15595) Reported by: alecdavis ........

2009-07-30 14:40 +0000 [r209517]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 209516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209516 |
	  mmichelson | 2009-07-30 09:38:21 -0500 (Thu, 30 Jul 2009) | 8
	  lines Fix a crash that can result if text codecs are allowed but
	  textsupport is disabled. (closes issue #15596) Reported by:
	  fabled Patches: sip-red.patch uploaded by fabled (license 448)
	  ........

2009-07-28 00:19 +0000 [r209327]  Tilghman Lesher <tlesher@digium.com>

	* /, sounds/sounds.xml: Merged revisions 209317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r209317 | tilghman | 2009-07-27 19:14:12 -0500 (Mon, 27 Jul 2009)
	  | 9 lines Merged revisions 209315 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r209315 | tilghman | 2009-07-27 19:12:03 -0500 (Mon, 27 Jul 2009)
	  | 2 lines Publish French extra sounds ........ ................

2009-07-27 21:44 +0000 [r209262-209281]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_fax.c: Merged revisions 209279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209279 |
	  kpfleming | 2009-07-27 16:43:36 -0500 (Mon, 27 Jul 2009) | 7
	  lines Cleanup T.38 negotiation changes. Convert LOG_NOTICE
	  messages about T.38 negotiation in debug level 1 messages, clean
	  up some looping logic, and correct an improper use of ast_free()
	  for freeing an ast_frame. ........

	* /, apps/app_fax.c: Merged revisions 209256 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209256 |
	  kpfleming | 2009-07-27 16:21:43 -0500 (Mon, 27 Jul 2009) | 10
	  lines Make T.38 switchover in ReceiveFAX synchronous. In receive
	  mode, if the channel that ReceiveFAX is running on supports T.38,
	  we should *always* attempt to switch T.38, rather than listening
	  for an incoming CNG tone and only triggering on that. The channel
	  may be using a low-bitrate codec that distorts the CNG tone, the
	  sending FAX endpoint may not send CNG at all, or there could be a
	  variety of other reasons that we don't detect it, but in all
	  those cases if T.38 is available we certainly want to use it.
	  ........

2009-07-27 20:57 +0000 [r209237]  Mark Michelson <mmichelson@digium.com>

	* main/rtp.c, /: Merged revisions 209235 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209235 |
	  mmichelson | 2009-07-27 15:54:54 -0500 (Mon, 27 Jul 2009) | 5
	  lines Gracefully handle malformed RTP text packets. AST-2009-004
	  ........

2009-07-27 20:28 +0000 [r209233]  David Brooks <dbrooks@digium.com>

	* res/res_jabber.c, main/loader.c, channels/chan_dahdi.c,
	  channels/chan_vpb.cc, res/res_smdi.c, /,
	  include/asterisk/module.h, main/features.c, res/res_agi.c: Merged
	  revisions 209098 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209098 |
	  dbrooks | 2009-07-27 11:33:50 -0500 (Mon, 27 Jul 2009) | 6 lines
	  Fixing typos. Replaces "recieved" with "received" and "initilize"
	  with "initialize" (closes issue #15571) Reported by: alecdavis
	  ........

2009-07-27 20:17 +0000 [r209134-209199]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 209197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r209197 | mmichelson | 2009-07-27 15:11:42 -0500 (Mon, 27 Jul
	  2009) | 9 lines Honor channel's music class when using realtime
	  music on hold. (closes issue #15051) Reported by: alexh Patches:
	  15051.patch uploaded by mmichelson (license 60) Tested by: alexh
	  ........

	* main/udptl.c, /, configs/udptl.conf.sample: Merged revisions
	  209132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r209132 | mmichelson | 2009-07-27 12:50:04 -0500 (Mon, 27 Jul
	  2009) | 24 lines Merged revisions 209131 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r209131 | mmichelson | 2009-07-27 12:44:06 -0500 (Mon, 27 Jul
	  2009) | 18 lines Allow for UDPTL to use only even-numbered ports
	  if desired. There are some VoIP providers out there that will not
	  accept SDP offers with odd numbered UDPTL ports. While it is my
	  personal opinion that these VoIP providers are misinterpreting
	  RFC 2327, it really is not a big deal to play along with their
	  silly little games. Of course, since restricting UDPTL ports to
	  only even numbers reduces the range of available ports by half,
	  so the option to use only even port numbers is off by default. A
	  user can enable the behavior by setting use_even_ports=yes in
	  udptl.conf. (closes issue #15182) Reported by: CGMChris Patches:
	  15182.patch uploaded by mmichelson (license 60) Tested by:
	  CGMChris ........ ................

2009-07-27 15:40 +0000 [r209058]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: Merged revisions 209056 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r209056 |
	  kpfleming | 2009-07-27 10:38:59 -0500 (Mon, 27 Jul 2009) | 10
	  lines Restore explicit export of ASTCFLAGS/ASTLDFLAGS and
	  underscore-variants to sub-makes. During the recent Makefile
	  improvements I made, it seemed the 'make' was automatically
	  carrying down the ASTCFLAGS/ASTLDFLAGS settings to sub-makes, so
	  I removed the explict export of them. However, there are some
	  circumstances where make does this, and some where it does not,
	  so I've brought them back to ensure they are always exported. I
	  also removed an extraneous double setting of _ASTLDFLAGS on *BSD
	  platforms. ........

2009-07-27 01:22 +0000 [r208926]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_iax2.c, /, main/translate.c: Merged revisions
	  208924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208924 | jpeeler | 2009-07-26 20:20:37 -0500 (Sun, 26 Jul 2009)
	  | 9 lines Merged revisions 208923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208923 | jpeeler | 2009-07-26 20:18:31 -0500 (Sun, 26 Jul 2009)
	  | 2 lines Fix logic errors from 208746 ........ ................

2009-07-26 14:04 +0000 [r208888]  Michiel van Baak <michiel@vanbaak.info>

	* contrib/scripts/install_prereq, /: Merged revisions 208886 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r208886 | mvanbaak | 2009-07-26 16:00:52 +0200 (Sun, 26
	  Jul 2009) | 2 lines add OpenBSD to the install_prereq script
	  ........

2009-07-25 06:25 +0000 [r208754]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_iax2.c, /, channels/chan_skinny.c,
	  main/translate.c: Merged revisions 208749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208749 | jpeeler | 2009-07-25 01:23:18 -0500 (Sat, 25 Jul 2009)
	  | 13 lines Merged revisions 208746 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208746 | jpeeler | 2009-07-25 01:19:50 -0500 (Sat, 25 Jul 2009)
	  | 7 lines Fix compiling under dev-mode with gcc 4.4.0. Mostly
	  trivial changes, but I did not know of any other way to fix the
	  "dereferencing type-punned pointer will break strict-aliasing
	  rules" error without creating a tmp variable in chan_skinny.
	  ........ ................

2009-07-24 18:52 +0000 [r208595]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c, /: Merged revisions 208593 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208593 | russell | 2009-07-24 13:42:32 -0500 (Fri, 24 Jul 2009)
	  | 14 lines Merged revisions 208592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208592 | russell | 2009-07-24 13:38:24 -0500 (Fri, 24 Jul 2009)
	  | 7 lines Do not log an ERROR if autoservice_stop() returns -1.
	  This does not indicate an error. A return of -1 just means that
	  the channel has been hung up. (reported in #asterisk-dev)
	  ........ ................

2009-07-24 18:32 +0000 [r208590]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 208588 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208588 | mmichelson | 2009-07-24 13:31:04 -0500 (Fri, 24 Jul
	  2009) | 16 lines Merged revisions 208587 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208587 | mmichelson | 2009-07-24 13:26:50 -0500 (Fri, 24 Jul
	  2009) | 10 lines Only send a BYE when hanging up a channel that
	  is up. For cases where Asterisk sends an INVITE and receives a
	  non 2XX final response, Asterisk would follow the INVITE
	  transaction by immediately sending a BYE, which was unnecessary.
	  (closes issue #14575) Reported by: chris-mac ........
	  ................

2009-07-24 15:05 +0000 [r208550]  Kevin P. Fleming <kpfleming@digium.com>

	* main/udptl.c, /, channels/chan_sip.c, include/asterisk/udptl.h:
	  Merged revisions 208548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r208548 |
	  kpfleming | 2009-07-24 10:02:53 -0500 (Fri, 24 Jul 2009) | 8
	  lines Resolve a T.38 negotiation issue left over from the
	  udptl-updates merge. The udptl-updates branch that was merged
	  yesterday failed to properly send back T.38 SDP responses with
	  the correct error correction mode, if the incoming SDP from the
	  other end caused us to change error correction modes. This patch
	  corrects that situation. ........

2009-07-24 14:38 +0000 [r208544]  Michiel van Baak <michiel@vanbaak.info>

	* contrib/scripts/install_prereq, /: Merged revisions 208542 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r208542 | mvanbaak | 2009-07-24 16:35:49 +0200 (Fri, 24
	  Jul 2009) | 13 lines use aptitude for debian based systems The
	  function to check wether we need to install packages was using
	  dpkg-query which was gives wrong output on Debian 5 Also, the
	  apt-get has been replaced with aptitude because aptitude is now
	  the preferred way to handle packages on Debian (closes issue
	  #15570) Reported by: mvanbaak Patches:
	  2009072400_installprereq-aptitude.diff uploaded by mvanbaak
	  (license 7) ........

2009-07-23 22:32 +0000 [r208484-208503]  Kevin P. Fleming <kpfleming@digium.com>

	* UPGRADE.txt: Use correct formatting for T.38 change note in
	  UPGRADE.txt

	* include/asterisk/frame.h, main/rtp.c, main/channel.c,
	  main/udptl.c, main/frame.c, /, channels/chan_sip.c,
	  apps/app_fax.c, UPGRADE.txt, include/asterisk/udptl.h: Merged
	  revisions 208464 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r208464 |
	  kpfleming | 2009-07-23 16:57:24 -0500 (Thu, 23 Jul 2009) | 46
	  lines Rework of T.38 negotiation and UDPTL API to address
	  interoperability problems Over the past couple of months, a
	  number of issues with Asterisk negotiating (and successfully
	  completing) T.38 sessions with various endpoints have been found.
	  This patch attempts to address many of them, primarily focused
	  around ensuring that the endpoints' MaxDatagram size is honored,
	  and in addition by ensuring that T.38 session parameter
	  negotiation is performed correctly according to the ITU T.38
	  Recommendation. The major changes here are: 1) T.38 applications
	  in Asterisk (app_fax) only generate/receive IFP packets, they do
	  not ever work with UDPTL packets. As a result of this, they
	  cannot be allowed to generate packets that would overflow the
	  other endpoints' MaxDatagram size after the UDPTL stack adds any
	  error correction information. With this patch, the application is
	  told the maximum *IFP* size it can generate, based on a
	  calculation using the far end MaxDatagram size and the active
	  error correction mode on the T.38 session. The same is true for
	  sending *our* MaxDatagram size to the remote endpoint; it is
	  computed from the value that the application says it can accept
	  (for a single IFP packet) combined with the active error
	  correction mode. 2) All treatment of T.38 session parameters as
	  'capabilities' in chan_sip has been removed; these parameters are
	  not at all like audio/video stream capabilities. There are strict
	  rules to follow for computing an answer to a T.38 offer, and
	  chan_sip now follows those rules, using the desired parameters
	  from the application (or channel) that wants to accept the T.38
	  negotiation. 3) chan_sip now stores and forwards
	  ast_control_t38_parameters structures for tracking 'our' and
	  'their' T.38 session parameters; this greatly simplifies
	  negotiation, especially for pass-through calls. 4) Since T.38
	  negotiation without specifying parameters or receiving the final
	  negotiated parameters is not very worthwhile, the AST_CONTROL_T38
	  control frame has been removed. A note has been added to
	  UPGRADE.txt about this removal, since any out-of-tree
	  applications that use it will no longer function properly until
	  they are upgraded to use AST_CONTROL_T38_PARAMETERS. Review:
	  https://reviewboard.asterisk.org/r/310/ ........

2009-07-23 20:45 +0000 [r208459]  David Brooks <dbrooks@digium.com>

	* apps/app_rpt.c, res/res_smdi.c, pbx/pbx_dundi.c: Just replacing
	  typos "recieved" with "received". (closes issue #15360) Reported
	  by: okrief

2009-07-23 19:35 +0000 [r208390]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 208388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208388 | mmichelson | 2009-07-23 14:34:49 -0500 (Thu, 23 Jul
	  2009) | 24 lines Merged revisions 208386 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208386 | mmichelson | 2009-07-23 14:24:21 -0500 (Thu, 23 Jul
	  2009) | 17 lines Fix a problem where a 491 response could be sent
	  out of dialog. This generalizes the fix for issue 13849. The
	  initial fix corrected the problem that Asterisk would reply with
	  a 491 if a reinvite were received from an endpoint and we had not
	  yet received an ACK from that endpoint for the initial INVITE it
	  had sent us. This expansion also allows Asterisk to appropriately
	  handle an INVITE with authorization credentials if Asterisk had
	  not received an ACK from the previous transaction in which
	  Asterisk had responded to an unauthorized INVITE with a 407.
	  (closes issue #14239) Reported by: klaus3000 Patches: 14239.patch
	  uploaded by mmichelson (license 60) Tested by: klaus3000 ........
	  ................

2009-07-23 19:24 +0000 [r208385]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 208383 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r208383 | jpeeler | 2009-07-23 14:21:50 -0500
	  (Thu, 23 Jul 2009) | 12 lines Merged revisions 208380 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208380 | jpeeler | 2009-07-23 14:19:53 -0500 (Thu, 23 Jul 2009)
	  | 6 lines Only set the priindication setting when not performing
	  a reload (closes issue #14696) Reported by: fdecher ........
	  ................

2009-07-23 16:30 +0000 [r208265-208318]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 208314 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208314 | mmichelson | 2009-07-23 11:29:37 -0500 (Thu, 23 Jul
	  2009) | 9 lines Merged revisions 208312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208312 | mmichelson | 2009-07-23 11:29:18 -0500 (Thu, 23 Jul
	  2009) | 3 lines Remove inaccurate XXX comment. ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 208263 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r208263 | mmichelson | 2009-07-23 10:46:34 -0500 (Thu, 23 Jul
	  2009) | 15 lines Merged revisions 208262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r208262 | mmichelson | 2009-07-23 10:43:07 -0500 (Thu, 23 Jul
	  2009) | 8 lines Properly handle 183 responses which do not
	  contain an SDP. (closes issue #15442) Reported by: ffloimair
	  Patches: 15442.patch uploaded by mmichelson (license 60) Tested
	  by: tkarl, ffloimair ........ ................

2009-07-22 21:45 +0000 [r208115]  Jason Parker <jparker@digium.com>

	* /, apps/app_festival.c: Merged revisions 208113 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r208113 |
	  qwell | 2009-07-22 16:43:57 -0500 (Wed, 22 Jul 2009) | 9 lines
	  Restore an int declaration on PPC platforms. This x is one crafty
	  little bugger... It was used for 2 different things (one of which
	  was only done on PPC) in 1.4. One of the uses were removed in
	  trunk, and with it went the declaration. (closes issue #14038)
	  Reported by: ffloimair ........

2009-07-21 22:48 +0000 [r207948]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 207946 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r207946 | tilghman | 2009-07-21 17:45:32 -0500
	  (Tue, 21 Jul 2009) | 15 lines Merged revisions 207945 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207945 | tilghman | 2009-07-21 17:38:54 -0500 (Tue, 21 Jul 2009)
	  | 8 lines Force an error if a blank is passed to QUOTE (because
	  the documentation states the argument is not optional). This
	  change makes URIENCODE and QUOTE behave similarly, since the
	  documentation states that the argument is not optional, for both.
	  (closes issue #15439) Reported by: pkempgen Patches:
	  20090706__issue15439.diff.txt uploaded by tilghman (license 14)
	  ........ ................

2009-07-21 20:29 +0000 [r207784-207861]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 207854 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r207854 | jpeeler | 2009-07-21 15:26:02 -0500
	  (Tue, 21 Jul 2009) | 16 lines Merged revisions 207827 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207827 | jpeeler | 2009-07-21 15:16:55 -0500 (Tue, 21 Jul 2009)
	  | 9 lines Wait for wink before dialing when using E&M wink
	  signaling There was already code for other signaling types in
	  dahdi_handle_event to handle dialing if a dial operation dial
	  string was present. Simply add SIG_EMWINK to the list. (closes
	  issue #14434) Reported by: araasch ........ ................

	* channels/chan_dahdi.c: Revert r207637, this approach could
	  potentially block for an unacceptable amount of time.

2009-07-21 14:31 +0000 [r207726]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 207723 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r207723 | mmichelson | 2009-07-21 09:29:40 -0500 (Tue, 21 Jul
	  2009) | 11 lines Merged revisions 207714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207714 | mmichelson | 2009-07-21 09:26:00 -0500 (Tue, 21 Jul
	  2009) | 5 lines Document default timeout for AMI originations.
	  AST-224 ........ ................

2009-07-21 13:48 +0000 [r207684]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/Makefile, doc/video_console.txt, Makefile, agi/Makefile,
	  codecs/Makefile, utils/Makefile, funcs/Makefile,
	  codecs/lpc10/Makefile, main/db1-ast/Makefile, /, main/Makefile,
	  codecs/gsm/Makefile, Makefile.moddir_rules, Makefile.rules,
	  pbx/Makefile, res/Makefile: Merged revisions 207680 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r207680 | kpfleming | 2009-07-21 08:28:04 -0500
	  (Tue, 21 Jul 2009) | 18 lines Merged revisions 207647 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207647 | kpfleming | 2009-07-21 08:04:44 -0500 (Tue, 21 Jul
	  2009) | 12 lines Ensure that user-provided CFLAGS and LDFLAGS are
	  honored. This commit changes the build system so that
	  user-provided flags (in ASTCFLAGS and ASTLDFLAGS) are supplied to
	  the compiler/linker *after* all flags provided by the build
	  system itself, so that the user can effectively override the
	  build system's flags if desired. In addition, ASTCFLAGS and
	  ASTLDFLAGS can now be provided *either* in the environment before
	  running 'make', or as variable assignments on the 'make' command
	  line. As a result, the use of COPTS and LDOPTS is no longer
	  necessary, so they are no longer documented, but are still
	  supported so as not to break existing build systems that supply
	  them when building Asterisk. ........ ................

2009-07-21 04:45 +0000 [r207637]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: Wait for wink before dialing when using
	  E&M wink signaling This patch adds a new dahdi_wait function to
	  specifically wait for the wink event. If the wink is not
	  eventually received the channel is hung up. (closes issue #14434)
	  Reported by: araasch Patches: emwinkmod uploaded by araasch
	  (license 693)

2009-07-20 20:02 +0000 [r207426]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 207424 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r207424 | mmichelson | 2009-07-20 14:48:12 -0500 (Mon, 20 Jul
	  2009) | 39 lines Merged revisions 207423 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207423 | mmichelson | 2009-07-20 14:39:59 -0500 (Mon, 20 Jul
	  2009) | 33 lines Answer video SDP offers properly when
	  videosupport is not enabled. Copied from Review board: In issue
	  12434, the reporter describes a situation in which audio and
	  video is offered on the call, but because videosupport is
	  disabled in sip.conf, Asterisk gives no response at all to the
	  video offer. According to RFC 3264, all media offers should have
	  a corresponding answer. For offers we do not intend to actually
	  reply to with meaningful values, we should still reply with the
	  port for the media stream set to 0. In this patch, we take note
	  of what types of media have been offered and save the information
	  on the sip_pvt. The SDP in the response will take into account
	  whether media was offered. If we are not otherwise going to
	  answer a media offer, we will insert an appropriate m= line with
	  the port set to 0. It is important to note that this patch is
	  pretty much a bandage being applied to a broken bone. The patch
	  *only* helps for situations where video is offered but
	  videosupport is disabled and when udptl_pt is disabled but T.38
	  is offered. Asterisk is not guaranteed to respond to every media
	  offer. Notable cases are when multiple streams of the same type
	  are offered. The 2 media stream limit is still present with this
	  patch, too. In trunk and the 1.6.X branches, things will be a bit
	  different since Asterisk also supports text in SDPs as well.
	  (closes issue #12434) Reported by: mnnojd Review:
	  https://reviewboard.asterisk.org/r/311 Review:
	  https://reviewboard.asterisk.org/r/313 ........ ................

2009-07-20 16:40 +0000 [r207363]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 207361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r207361 | russell | 2009-07-20 11:36:15 -0500 (Mon, 20 Jul 2009)
	  | 16 lines Merged revisions 207360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207360 | russell | 2009-07-20 11:26:24 -0500 (Mon, 20 Jul 2009)
	  | 9 lines Only do the chan->fdno check in ast_read() in a
	  developer build. I changed this check to only happen in a
	  dev-mode build. I also added a comment explaining what is going
	  on. I also made it so that detection of this situation does not
	  affect ast_read() operation. (closes issue #14723) Reported by:
	  seadweller ........ ................

2009-07-18 04:17 +0000 [r207321]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Recorded merge of revisions 207317 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r207317 | tilghman | 2009-07-17 23:16:44 -0500 (Fri, 17
	  Jul 2009) | 3 lines Flag field in wrong position. Reported by
	  "Hoggins!" on asterisk-dev list. ........

2009-07-18 02:09 +0000 [r207287]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn_config.c,
	  channels/misdn/isdn_lib_intern.h, channels/misdn/isdn_lib.h,
	  doc/tex/misdn.tex, channels/chan_misdn.c, main/callerid.c,
	  configs/misdn.conf.sample: Merged revisions 145293,158010 from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 to make
	  merging easier. These changes are already on trunk.
	  ................ r145293 | rmudgett | 2008-09-30 18:55:24 -0500
	  (Tue, 30 Sep 2008) | 54 lines channels/chan_misdn.c
	  channels/misdn/isdn_lib.c * Miscellaneous other fixes from trunk
	  to make merging easier later. ........ r145200 | rmudgett |
	  2008-09-30 16:00:54 -0500 (Tue, 30 Sep 2008) | 7 lines *
	  Miscellaneous formatting changes to make v1.4 and trunk more
	  merge compatible in the mISDN area. channels/chan_misdn.c *
	  Eliminated redundant code in cb_events() EVENT_SETUP ........
	  r144257 | crichter | 2008-09-24 03:42:55 -0500 (Wed, 24 Sep 2008)
	  | 9 lines improved helptext of misdn_set_opt. ........ r142181 |
	  rmudgett | 2008-09-09 12:30:52 -0500 (Tue, 09 Sep 2008) | 1 line
	  Cleaned up comment ........ r138738 | rmudgett | 2008-08-18
	  16:07:28 -0500 (Mon, 18 Aug 2008) | 30 lines
	  channels/chan_misdn.c * Made bearer2str() use
	  allowed_bearers_array[] * Made use the causes.h defines instead
	  of hardcoded numbers. * Made use Asterisk presentation indicator
	  values if either of the mISDN presentation or screen options are
	  negative. * Updated the misdn_set_opt application option
	  descriptions. * Renamed the awkward Caller ID presentation
	  misdn_set_opt application option value not_screened to
	  restricted. Deprecated the not_screened option value.
	  channels/misdn/isdn_lib.c * Made use the causes.h defines instead
	  of hardcoded numbers. * Fixed some spelling errors and typos. *
	  Added all defined facility code strings to fac2str().
	  channels/misdn/isdn_lib.h * Added doxygen comments to struct
	  misdn_bchannel. channels/misdn/isdn_lib_intern.h * Added doxygen
	  comments to struct misdn_stack. channels/misdn_config.c
	  configs/misdn.conf.sample * Updated the mISDN presentation and
	  screen parameter descriptions. doc/misdn.txt (doc/tex/misdn.tex)
	  * Updated the misdn_set_opt application option descriptions. *
	  Fixed some spelling errors and typos. ................ r158010 |
	  rmudgett | 2008-11-19 19:46:09 -0600 (Wed, 19 Nov 2008) | 9 lines
	  Merged revision 157977 from
	  https://origsvn.digium.com/svn/asterisk/team/group/issue8824
	  ........ Fixes JIRA ABE-1726 The dial extension could be empty if
	  you are using MISDN_KEYPAD to control ISDN provider features.
	  ................

2009-07-17 22:30 +0000 [r207227-207256]  Tilghman Lesher <tlesher@digium.com>

	* /, doc/voicemail_odbc_postgresql.txt: Merged revisions 207255 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r207255 | tilghman | 2009-07-17 17:29:50 -0500 (Fri, 17
	  Jul 2009) | 2 lines Add flag here, too (as requested by jsmith)
	  ........

	* /, doc/tex/odbcstorage.tex, UPGRADE.txt: Recorded merge of
	  revisions 207224 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r207224 |
	  tilghman | 2009-07-17 17:04:43 -0500 (Fri, 17 Jul 2009) | 2 lines
	  Document the "flag" field in the voicemessages table. ........

2009-07-17 19:39 +0000 [r207101-207158]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 207156 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r207156 | jpeeler | 2009-07-17 14:37:38 -0500
	  (Fri, 17 Jul 2009) | 14 lines Merged revisions 207155 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r207155 | jpeeler | 2009-07-17 14:36:19 -0500 (Fri, 17 Jul 2009)
	  | 7 lines Fix format specifier to print out an unsigned long
	  long. Yep, it's even ifdefed out code. But it made it to the RR
	  list... (closes issue #14726) Reported by: lmadsen ........
	  ................

	* configs/chan_dahdi.conf.sample, /: Merged revisions 207095 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r207095 | jpeeler | 2009-07-17 14:16:35 -0500 (Fri, 17
	  Jul 2009) | 2 lines Update some missing allowed options for
	  overlapdial ........

2009-07-17 17:53 +0000 [r206870-207031]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 207029 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r207029 |
	  dvossel | 2009-07-17 12:51:44 -0500 (Fri, 17 Jul 2009) | 6 lines
	  sip option flags handled incorrectly (closes issue #15376)
	  Reported by: Takehiko Ooshima Tested by: dvossel,
	  Takehiko_Ooshima ........

	* /, channels/chan_sip.c: Merged revisions 206939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r206939 | dvossel | 2009-07-17 11:13:22 -0500 (Fri, 17 Jul 2009)
	  | 20 lines Merged revisions 206938 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206938 | dvossel | 2009-07-17 11:05:06 -0500 (Fri, 17 Jul 2009)
	  | 14 lines SIP incorrect From: header information when callpres
	  is prohib Some ITSP make use of the "Anonymous" display name to
	  detect a requirement to withhold caller id across the PSTN. This
	  does not work if the display name is "Unknown". (closes issue
	  #14465) Reported by: Nick_Lewis Patches:
	  chan_sip.c-callerpres.patch uploaded by Nick (license 657)
	  chan_sip.c-callerpres_trunk.patch uploaded by dvossel (license
	  671) Tested by: Nick_Lewis, dvossel ........ ................

	* /, funcs/func_timeout.c: Merged revisions 206877 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r206877 | dvossel | 2009-07-16 16:45:14 -0500 (Thu, 16 Jul 2009)
	  | 6 lines TIMEOUT(absolute) returned negative value. (closes
	  issue #15513) Reported by: ys ........

	* configs/iax.conf.sample, /: Merged revisions 206873 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r206873 | dvossel | 2009-07-16 16:33:51 -0500
	  (Thu, 16 Jul 2009) | 12 lines Merged revisions 206872 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206872 | dvossel | 2009-07-16 16:33:19 -0500 (Thu, 16 Jul 2009)
	  | 6 lines error in iax.conf related IP-based access control
	  (closes issue #15518) Reported by: pkempgen ........
	  ................

	* /, main/callerid.c: Merged revisions 206868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r206868 | dvossel | 2009-07-16 16:25:22 -0500 (Thu, 16 Jul 2009)
	  | 14 lines Merged revisions 206867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206867 | dvossel | 2009-07-16 16:24:16 -0500 (Thu, 16 Jul 2009)
	  | 8 lines avoid segfault caused by user error If the CALLERPRES()
	  dialplan function is set to nothing, a segfault occurs. This is
	  user error to begin with, but I'd rather see a cli warning
	  message than have Asterisk crash on me. ........ ................

2009-07-16 16:53 +0000 [r206810]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_realtime.c, /: Merged revisions 206808 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r206808 | tilghman | 2009-07-16 11:51:05 -0500
	  (Thu, 16 Jul 2009) | 13 lines Merged revisions 206807 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206807 | tilghman | 2009-07-16 11:27:35 -0500 (Thu, 16 Jul 2009)
	  | 6 lines Fix a memory leak. (closes issue #15517) Reported by:
	  adomjan Patches: func_realtime.c-ast_variable_destroy.diff
	  uploaded by adomjan (license 487) ........ ................

2009-07-15 22:06 +0000 [r206774]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 206768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r206768 |
	  dvossel | 2009-07-15 17:04:13 -0500 (Wed, 15 Jul 2009) | 8 lines
	  Session timer were not activated if Supported header field in
	  INVITE had both "timer" and other options. (closes issue #15403)
	  Reported by: makoto Patches: sip-session-timer.patch uploaded by
	  makoto (license ........

2009-07-15 21:40 +0000 [r206764]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn/isdn_lib_intern.h, /:
	  Merged revisions 206707 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r206707 | rmudgett | 2009-07-15 16:14:41 -0500 (Wed, 15 Jul 2009)
	  | 33 lines Merged revisions 206706 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r206706 | rmudgett | 2009-07-15 15:44:55 -0500
	  (Wed, 15 Jul 2009) | 26 lines Merged revision 206700 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.2-...
	  .......... Fixed chan_misdn crash because mISDNuser library is
	  not thread safe. With Asterisk the mISDNuser library is driven by
	  two threads concurrently: 1.
	  channels/misdn/isdn_lib.c::manager_event_handler() 2.
	  channels/misdn/isdn_lib.c::misdn_lib_isdn_event_catcher() Calls
	  into the library are done concurrently and recursively from
	  isdn_lib.c. Both threads can fiddle with the master/child
	  layer3_proc_t lists. One thread may traverse the list when the
	  other interrupts it and then removes the list element which the
	  first thread was currently handling. This is exactly what caused
	  the crash. About 60 calls were needed to a Gigaset CX475 before
	  it occurred once. This patch adds locking when calling into the
	  mISDNuser library. This also fixes some cb_log calls with wrong
	  port parameter. JIRA ABE-1913 Patches: misdn-locking.patch
	  (Modified with mostly cosmetic changes) ..........
	  ................ ................

2009-07-15 20:21 +0000 [r206704]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 206702 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r206702 |
	  dvossel | 2009-07-15 15:20:01 -0500 (Wed, 15 Jul 2009) | 10 lines
	  callerid(num) is wrong when username is missing A domain only sip
	  uri <sip:123.123.123.123> would return 123.123.123.123 as callid
	  num. Now, if the username is missing from a uri, the callerid num
	  field is left empty. (closes issue #15476) Reported by: viraptor
	  ........

2009-07-15 16:03 +0000 [r206638]  Sean Bright <sean@malleable.com>

	* /, codecs/codec_dahdi.c: Merged revisions 206636 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r206636 | seanbright | 2009-07-15 12:00:24 -0400
	  (Wed, 15 Jul 2009) | 9 lines Merged revisions 206635 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r206635 | seanbright | 2009-07-15 11:57:51 -0400 (Wed,
	  15 Jul 2009) | 1 line Only print debug info in codec_dahdi if we
	  are asking for it. ........ ................

2009-07-14 20:25 +0000 [r206596]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/meetme.sql: Recorded merge of revisions 206567
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r206567 | tilghman | 2009-07-14 15:14:45 -0500 (Tue, 14
	  Jul 2009) | 6 lines Document all meetme realtime fields, and in
	  the process, make some field lengths more consistent. (closes
	  issue #15493) Reported by: lasko Patches: meetme.diff uploaded by
	  lasko (license 833) ........

2009-07-14 18:32 +0000 [r206558]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn/isdn_lib.h,
	  channels/chan_misdn.c, /: Merged revisions 206489 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r206489 | rmudgett | 2009-07-14 12:01:48 -0500
	  (Tue, 14 Jul 2009) | 35 lines Merged revisions 206487 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206487 | rmudgett | 2009-07-14 11:44:47 -0500 (Tue, 14 Jul 2009)
	  | 28 lines Fixes several call transfer issues with chan_misdn. *
	  issue #14355 - Crash if attempt to transfer a call to an
	  application. Masquerade the other pair of the four asterisk
	  channels involved in the two calls. The held call already must be
	  a bridged call (not an applicaton) or it would have been
	  rejected. * issue #14692 - Held calls are not automatically
	  cleared after transfer. Allow the core to initate disconnect of
	  held calls to the ISDN port. This also fixes a similar case where
	  the party on hold hangs up before being transferred or taken off
	  hold. * JIRA ABE-1903 - Orphaned held calls left in
	  music-on-hold. Do not simply block passing the hangup event on
	  held calls to asterisk core. * Fixed to allow held calls to be
	  transferred to ringing calls. Previously, held calls could only
	  be transferred to connected calls. * Eliminated unused call
	  states to simplify hangup code. * Eliminated most uses of
	  "holded" because it is not a word. (closes issue #14355) (closes
	  issue #14692) Reported by: sodom Patches:
	  misdn_xfer_v14_r205839.patch uploaded by rmudgett (license 664)
	  Tested by: rmudgett ........ ................

2009-07-14 14:56 +0000 [r206388]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 206386 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r206386 | russell | 2009-07-14 09:51:44 -0500
	  (Tue, 14 Jul 2009) | 20 lines Merged revisions 206385 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r206385 | russell | 2009-07-14 09:48:00 -0500
	  (Tue, 14 Jul 2009) | 13 lines Merged revisions 206384 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r206384 | russell | 2009-07-14 09:45:47 -0500 (Tue, 14 Jul 2009)
	  | 6 lines Ensure apathetic replies are sent out on the proper
	  socket. chan_iax2 supports multiple address bindings. The
	  send_apathetic_reply() function did not attempt to send its
	  response on the same socket that the incoming message came in on.
	  ........ ................ ................

2009-07-14 01:35 +0000 [r206372]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/chan_misdn.c, /: Merged
	  revisions 206341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r206341 | rmudgett | 2009-07-13 19:48:59 -0500 (Mon, 13 Jul 2009)
	  | 11 lines Merged revisions 206284 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r206284 | rmudgett | 2009-07-13 19:17:28 -0500 (Mon, 13 Jul 2009)
	  | 4 lines Fix some memory leaks in chan_misdn. JIRA ABE-1911
	  ........ ................

2009-07-13 23:33 +0000 [r206282]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 206280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r206280 |
	  dvossel | 2009-07-13 18:26:51 -0500 (Mon, 13 Jul 2009) | 9 lines
	  dns lookup of peername rather than peer's host in
	  transmit_register() (closes issue #15052) Reported by: fsantulli
	  Patches: chan_sip_bug_15052_[20090626204511].patch uploaded by
	  fsantulli (license 818) Tested by: fsantulli ........

2009-07-13 16:24 +0000 [r206186]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 206185 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r206185 | tilghman | 2009-07-13 11:23:07 -0500 (Mon, 13 Jul 2009)
	  | 2 lines Remove reference to non-existent help file ........

2009-07-10 21:52 +0000 [r205987]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 205985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205985 |
	  dvossel | 2009-07-10 16:42:10 -0500 (Fri, 10 Jul 2009) | 16 lines
	  SIP register not using peer's outbound proxy If callbackextension
	  is defined for a peer it successfully causes a registration to
	  occur, but the registration ignores the outboundproxy settings
	  for the peer. This patch allows the peer to be passed to
	  obproxy_get() in transmit_register(). (closes issue #14344)
	  Reported by: Nick_Lewis Patches:
	  callbackextension_peer_trunk.diff uploaded by dvossel (license
	  671) Tested by: dvossel Review:
	  https://reviewboard.asterisk.org/r/294/ ........

2009-07-10 18:45 +0000 [r205941]  Kevin P. Fleming <kpfleming@digium.com>

	* main/udptl.c, /: Merged revisions 205939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205939 |
	  kpfleming | 2009-07-10 13:44:09 -0500 (Fri, 10 Jul 2009) | 1 line
	  Update comments about the level of T.38 support in Asterisk.
	  ........

2009-07-10 17:50 +0000 [r205881]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 205878 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205878 | mmichelson | 2009-07-10 12:39:57 -0500 (Fri, 10 Jul
	  2009) | 30 lines Merged revisions 205877 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r205877 | mmichelson | 2009-07-10 12:39:13 -0500
	  (Fri, 10 Jul 2009) | 23 lines Merged revisions 205776 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r205776 | mmichelson | 2009-07-10 10:56:45 -0500
	  (Fri, 10 Jul 2009) | 16 lines Merged revisions 205775 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205775 | mmichelson | 2009-07-10 10:51:36 -0500 (Fri, 10 Jul
	  2009) | 10 lines Ensure that outbound NOTIFY requests are
	  properly routed through stateful proxies. With this change, we
	  make note of Record-Route headers present in any SUBSCRIBE
	  request that we receive so that our outbound NOTIFY requests will
	  have the proper Route headers in them. (closes issue #14725)
	  Reported by: ibc ........ ................ ................
	  ................

2009-07-10 16:48 +0000 [r205842]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 205840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205840 | dvossel | 2009-07-10 11:42:04 -0500 (Fri, 10 Jul 2009)
	  | 37 lines Merged revisions 205804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205804 | dvossel | 2009-07-10 11:23:59 -0500 (Fri, 10 Jul 2009)
	  | 31 lines SIP registration auth loop caused by stale nonce If an
	  endpoint sends two registration requests in a very short period
	  of time with the same nonce, both receive 401 responses from
	  Asterisk, each with a different nonce (the second 401 containing
	  the current nonce and the first one being stale). If the endpoint
	  responds to the first 401, it does not match the current nonce so
	  Asterisk sends a third 401 with a newly generated nonce (which
	  updates the current nonce)... Now if the endpoint responds to the
	  second 401, it does not match the current nonce either and
	  Asterisk sends a fourth 401 with a newly generated nonce... This
	  loop goes on and on. There appears to be a simple fix for this.
	  If the nonce from the request does not match our nonce, but is a
	  good response to a previous nonce, instead of sending a 401 with
	  a newly generated nonce, use the current one instead. This breaks
	  the loop as the nonce is not updated until a response is
	  received. Additional logic has been added to make sure no nonce
	  can be responded to twice though. (closes issue #15102) Reported
	  by: Jamuel Patches: patch-bug_0015102 uploaded by Jamuel (license
	  809) nonce_sip.diff uploaded by dvossel (license 671) Tested by:
	  Jamuel Review: https://reviewboard.asterisk.org/r/289/ ........
	  ................

2009-07-10 15:57 +0000 [r205778]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 205776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205776 | mmichelson | 2009-07-10 10:56:45 -0500 (Fri, 10 Jul
	  2009) | 16 lines Merged revisions 205775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205775 | mmichelson | 2009-07-10 10:51:36 -0500 (Fri, 10 Jul
	  2009) | 10 lines Ensure that outbound NOTIFY requests are
	  properly routed through stateful proxies. With this change, we
	  make note of Record-Route headers present in any SUBSCRIBE
	  request that we receive so that our outbound NOTIFY requests will
	  have the proper Route headers in them. (closes issue #14725)
	  Reported by: ibc ........ ................

2009-07-10 15:36 +0000 [r205772]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_fax.c: Merged revisions 205770 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205770 |
	  kpfleming | 2009-07-10 10:28:11 -0500 (Fri, 10 Jul 2009) | 12
	  lines Fix some remaining T.38 negotiation problems in app_fax.
	  Revision 205696 did not quite fix all the issues with the T.38
	  negotiation changes and app_fax; this patch corrects them, along
	  with a couple of other minor issues. (closes issue #15480)
	  Reported by: dimas Patches: test2-15480.patch uploaded by dimas
	  (license 88) ........

2009-07-09 23:51 +0000 [r205730]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Merged revisions 205728 via svn merge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205728 | rmudgett | 2009-07-09 18:37:53 -0500 (Thu, 09 Jul 2009)
	  | 21 lines No audio on calls from Asterisk to various ISDN
	  devices until DTMF sent by caller. Add missing clearing of the
	  dialing flag when the ISDN call is CONNECTED. (i.e. When libpri
	  generates the event PRI_EVENT_ANSWER.) (closes issue #15420)
	  Reported by: scottbmilne Patches: bug15420-1.4.25.1-diff2.txt
	  uploaded by alecdavis (license 585) Tested by: scottbmilne,
	  alecdavis (closes issue #15416) Reported by: avinoash (closes
	  issue #15389) Reported by: alecdavis This patch should also fix
	  the following issue: (issue #15205) Reported by: vinsik ........

2009-07-09 21:27 +0000 [r205698]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/frame.h, /, channels/chan_sip.c, apps/app_fax.c:
	  Merged revisions 205696 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205696 |
	  kpfleming | 2009-07-09 16:20:23 -0500 (Thu, 09 Jul 2009) | 16
	  lines Repair ability of SendFAX/ReceiveFAX to respond to T.38
	  switchover. Recent changes in T.38 negotiation in Asterisk caused
	  these applications to not respond when the other endpoint
	  initiated a switchover to T.38; this resulted in the T.38
	  switchover failing, and the FAX attempt to be made using an audio
	  connection, instead of T.38 (which would usually cause the FAX to
	  fail completely). This patch corrects this problem, and the
	  applications will now correctly respond to the T.38 switchover
	  request. In addition, the response will include the appopriate
	  T.38 session parameters based on what the other end offered and
	  what our end is capable of. (closes issue #14849) Reported by:
	  afosorio ........

2009-07-09 16:20 +0000 [r205596-205605]  David Vossel <dvossel@digium.com>

	* include/asterisk/time.h, /: Merged revisions 205600 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r205600 | dvossel | 2009-07-09 11:19:09 -0500
	  (Thu, 09 Jul 2009) | 9 lines Merged revisions 205599 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r205599 | dvossel | 2009-07-09 11:18:09 -0500 (Thu, 09
	  Jul 2009) | 2 lines Changing ast_samp2tv to not use floating
	  point. ........ ................

	* channels/chan_iax2.c, include/asterisk/frame.h, main/rtp.c, /:
	  Merged revisions 205479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205479 | dvossel | 2009-07-08 18:19:09 -0500 (Wed, 08 Jul 2009)
	  | 16 lines Merged revisions 205471 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205471 | dvossel | 2009-07-08 18:15:54 -0500 (Wed, 08 Jul 2009)
	  | 10 lines Fixes 8khz assumptions Many calculations assume 8khz
	  is the codec rate. This is not always the case. This patch only
	  addresses chan_iax.c and res_rtp_asterisk.c, but I am sure there
	  are other areas that make this assumption as well. Review:
	  https://reviewboard.asterisk.org/r/306/ ........ ................

2009-07-09 08:33 +0000 [r205534]  Michiel van Baak <michiel@vanbaak.info>

	* /, main/ssl.c: Merged revisions 205532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205532 |
	  mvanbaak | 2009-07-09 10:31:24 +0200 (Thu, 09 Jul 2009) | 5 lines
	  pthread_self returns a pthread_t which is not an unsigned int on
	  all pthread implementations. Casting it to an unsigned int fixes
	  compiler warnings. Tested on OpenBSD and Linux both 32 and 64 bit
	  ........

2009-07-08 22:16 +0000 [r205414]  David Vossel <dvossel@digium.com>

	* include/asterisk/devicestate.h, main/pbx.c, /,
	  main/devicestate.c, include/asterisk/pbx.h: Merged revisions
	  205412 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205412 | dvossel | 2009-07-08 17:15:06 -0500 (Wed, 08 Jul 2009)
	  | 12 lines Merged revisions 205409 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205409 | dvossel | 2009-07-08 16:35:12 -0500 (Wed, 08 Jul 2009)
	  | 6 lines moving ast_devstate_to_extenstate to pbx.c from
	  devicestate.c ast_devstate_to_extenstate belongs in pbx.c. This
	  change fixes a compile time error with chan_vpb as well. ........
	  ................

2009-07-08 19:27 +0000 [r205352]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 205350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205350 | mmichelson | 2009-07-08 14:26:55 -0500 (Wed, 08 Jul
	  2009) | 20 lines Merged revisions 205349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205349 | mmichelson | 2009-07-08 14:26:13 -0500 (Wed, 08 Jul
	  2009) | 14 lines Prevent phantom calls to queue members. If a
	  caller were to hang up while a periodic announcement or position
	  were being said, the return value for those functions would
	  incorrectly indicate that the caller was still in the queue. With
	  these changes, the problem does not occur. (closes issue #14631)
	  Reported by: latinsud Patches: queue_announce_ghost_call2.diff
	  uploaded by latinsud (license 745) (with small modification from
	  me) ........ ................

2009-07-08 18:21 +0000 [r205299]  Jason Parker <jparker@digium.com>

	* config.guess, config.sub, /: Merged revisions 205291 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r205291 | qwell | 2009-07-08 13:19:46 -0500
	  (Wed, 08 Jul 2009) | 9 lines Merged revisions 205288 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r205288 | qwell | 2009-07-08 13:19:03 -0500 (Wed, 08 Jul
	  2009) | 1 line Update config.guess and config.sub from the
	  savannah.gnu.org git repo. ........ ................

2009-07-08 18:07 +0000 [r205279]  David Brooks <dbrooks@digium.com>

	* /, main/features.c: Merged revisions 205254 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205254 |
	  dbrooks | 2009-07-08 12:26:26 -0500 (Wed, 08 Jul 2009) | 8 lines
	  Fixes Park() argument handling Park() was not respecting the
	  arguments passed to it. Any extension/context/priority given to
	  it was being ignored. This patch remedies this. (closes issue
	  #15380) Reported by: DLNoah ........

2009-07-08 16:59 +0000 [r205222]  Tilghman Lesher <tlesher@digium.com>

	* main/say.c: oops, fixing build

2009-07-08 16:56 +0000 [r205218]  David Vossel <dvossel@digium.com>

	* include/asterisk/time.h, /: Merged revisions 205216 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r205216 | dvossel | 2009-07-08 11:54:24 -0500
	  (Wed, 08 Jul 2009) | 17 lines Merged revisions 205215 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205215 | dvossel | 2009-07-08 11:53:40 -0500 (Wed, 08 Jul 2009)
	  | 10 lines ast_samp2tv needs floating point for 16khz audio In
	  ast_samp2tv(), (1000000 / _rate) = 62.5 when _rate is 16000. The
	  .5 is currently stripped off because we don't calculate using
	  floating points. This causes madness with 16khz audio. (issue
	  ABE-1899) Review: https://reviewboard.asterisk.org/r/305/
	  ........ ................

2009-07-08 16:29 +0000 [r205203]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c: Merged revisions 205196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r205196 | tilghman | 2009-07-08 11:27:50 -0500 (Wed, 08 Jul 2009)
	  | 9 lines Merged revisions 205188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r205188 | tilghman | 2009-07-08 11:26:15 -0500 (Wed, 08 Jul 2009)
	  | 2 lines Add redirection warnings for the invalid language codes
	  previously removed. ........ ................

2009-07-08 15:57 +0000 [r205147-205153]  Russell Bryant <russell@digium.com>

	* /, main/ssl.c: Merged revisions 205151 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r205151 |
	  russell | 2009-07-08 10:56:28 -0500 (Wed, 08 Jul 2009) | 2 lines
	  Use tabs instead of spaces for indentation. ........

	* res/res_jabber.c, main/asterisk.c, /, main/Makefile,
	  res/res_crypto.c, main/ssl.c (added),
	  include/asterisk/_private.h: Merged revisions 205120 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r205120 | russell | 2009-07-08 10:17:19 -0500 (Wed, 08 Jul 2009)
	  | 16 lines Move OpenSSL initialization to a single place, make
	  library usage thread-safe. While doing some reading about
	  OpenSSL, I noticed a couple of things that needed to be improved
	  with our usage of OpenSSL. 1) We had initialization of the
	  library done in multiple modules. This has now been moved to a
	  core function that gets executed during Asterisk startup. We
	  already link OpenSSL into the core for TCP/TLS functionality, so
	  this was the most logical place to do it. 2) OpenSSL is not
	  thread-safe by default. However, making it thread safe is very
	  easy. We just have to provide a couple of callbacks. One callback
	  returns a thread ID. The other handles locking. For more
	  information, start with the "Is OpenSSL thread-safe?" question on
	  the FAQ page of openssl.org. ........

2009-07-06 14:24 +0000 [r204976]  Ryan Brindley <rbrindley@digium.com>

	* main/config.c, /: Merged revisions 202753 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202753 |
	  rbrindley | 2009-06-23 16:25:17 -0500 (Tue, 23 Jun 2009) | 9
	  lines If we delete the info, lets also delete the lines (closes
	  issue 0014509) Reported by: timeshell Patches:
	  20090504__bug14509.diff.txt uploaded by tilghman (license 14)
	  Tested by: awk, timeshell ........

2009-07-06 13:40 +0000 [r204950]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, /: Merged revisions 204948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r204948 |
	  kpfleming | 2009-07-06 08:38:29 -0500 (Mon, 06 Jul 2009) | 7
	  lines Improve handling of AST_CONTROL_T38 and
	  AST_CONTROL_T38_PARAMETERS for non-T.38-capable channels. This
	  change allows applications that request T.38 negotiation on a
	  channel that does not support it to get the proper indication
	  that it is not supported, rather than thinking that negotiation
	  was started when it was not. ........

2009-07-02 22:05 +0000 [r204837]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 204835 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r204835 | rmudgett | 2009-07-02 17:01:28 -0500
	  (Thu, 02 Jul 2009) | 17 lines Merged revisions 204834 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204834 | rmudgett | 2009-07-02 16:59:43 -0500 (Thu, 02 Jul 2009)
	  | 10 lines Removed confusing warning message "Got Busy in
	  Connected State" If an incoming mISDN call is answered with the
	  Answer application and a subsequent Dial gets a busy endpoint
	  then it is valid for that already connected channel to get the
	  busy indication. Asterisk will play the busy tones until the
	  dialplan plays something else or hangs up the call. (closes issue
	  #11974) Reported by: fvdb ........ ................

2009-07-02 16:28 +0000 [r204736]  David Vossel <dvossel@digium.com>

	* include/asterisk/devicestate.h, main/pbx.c, /,
	  main/devicestate.c: Merged revisions 204710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r204710 | dvossel | 2009-07-02 11:03:44 -0500 (Thu, 02 Jul 2009)
	  | 21 lines Merged revisions 204681 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204681 | dvossel | 2009-07-02 10:05:57 -0500 (Thu, 02 Jul 2009)
	  | 14 lines Improved mapping of extension states from combined
	  device states. This fixes a few issues with incorrect extension
	  states and adds a cli command, core show device2extenstate, to
	  display all possible state mappings. (closes issue #15413)
	  Reported by: legart Patches: exten_helper.diff uploaded by
	  dvossel (license 671) Tested by: dvossel, legart, amilcar Review:
	  https://reviewboard.asterisk.org/r/301/ ........ ................

2009-06-30 21:30 +0000 [r204612]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c, UPGRADE.txt: Merged revisions 204563 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r204563 | tilghman | 2009-06-30 15:41:04 -0500
	  (Tue, 30 Jun 2009) | 13 lines Merged revisions 204556 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204556 | tilghman | 2009-06-30 15:23:51 -0500 (Tue, 30 Jun 2009)
	  | 6 lines More incorrect language codes, plus ensuring that
	  regionalizations use the specified language, and not English for
	  grammar. (closes issue #15022) Reported by: greenfieldtech
	  Patches: 20090519__issue15022.diff.txt uploaded by tilghman
	  (license 14) ........ ................

2009-06-30 18:52 +0000 [r204477]  Jason Parker <jparker@digium.com>

	* /, main/say.c: Merged revisions 204475 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r204475 | qwell | 2009-06-30 13:48:35 -0500 (Tue, 30 Jun 2009) |
	  9 lines Merged revisions 204474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204474 | qwell | 2009-06-30 13:47:06 -0500 (Tue, 30 Jun 2009) |
	  1 line Fix ast_say_counted_noun to correctly handle Polish. Fix a
	  comment typo in passing. ........ ................

2009-06-30 18:44 +0000 [r204472]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /, main/say.c, UPGRADE.txt: Recorded merge
	  of revisions 204470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r204470 | tilghman | 2009-06-30 13:36:24 -0500 (Tue, 30 Jun 2009)
	  | 18 lines Recorded merge of revisions 204469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204469 | tilghman | 2009-06-30 13:23:35 -0500 (Tue, 30 Jun 2009)
	  | 11 lines "tw" is the language specification for Twi (from
	  Ghana) not Taiwanese. (closes issue #15346) Reported by: volivier
	  Patches: 20090617__issue15346__1.4.diff.txt uploaded by tilghman
	  (license 14) 20090617__issue15346__trunk.diff.txt uploaded by
	  tilghman (license 14) 20090617__issue15346__1.6.0.diff.txt
	  uploaded by tilghman (license 14)
	  20090617__issue15346__1.6.1.diff.txt uploaded by tilghman
	  (license 14) 20090617__issue15346__1.6.2.diff.txt uploaded by
	  tilghman (license 14) Tested by: volivier ........
	  ................

2009-06-29 22:53 +0000 [r204249-204303]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 204301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r204301 | mmichelson | 2009-06-29 17:50:35 -0500 (Mon, 29 Jun
	  2009) | 15 lines Merged revisions 204300 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204300 | mmichelson | 2009-06-29 17:45:34 -0500 (Mon, 29 Jun
	  2009) | 9 lines Add error message so that it is clear why a SIP
	  peer was not processed when a DNS lookup fails on a host or
	  outboundproxy. (closes issue #13432) Reported by: p_lindheimer
	  Patches: outboundproxy.patch uploaded by p (license 558) ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 204247 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r204247 | mmichelson | 2009-06-29 16:48:54 -0500 (Mon, 29 Jun
	  2009) | 32 lines Merged revisions 204243,204246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r204243 | mmichelson | 2009-06-29 16:23:43 -0500 (Mon, 29 Jun
	  2009) | 22 lines Fix a problem where chan_sip would ignore "old"
	  but valid responses. chan_sip has had a problem for quite a long
	  time that would manifest when Asterisk would send multiple SIP
	  responses on the same dialog before receiving a response. The
	  problem occurred because chan_sip only kept track of the highest
	  outgoing sequence number used on the dialog. If Asterisk sent two
	  requests out, and a response arrived for the first request sent,
	  then Asterisk would ignore the response. The result was that
	  Asterisk would continue retransmitting the requests and ignoring
	  the responses until the maximum number of retransmissions had
	  been reached. The fix here is to rearrange the code a bit so that
	  instead of simply comparing the sequence number of the response
	  to our latest outgoing sequence number, we walk our list of
	  outstanding packets and determine if there is a match. If there
	  is, we continue. If not, then we ignore the response. In doing
	  this, I found a few completely useless variables that I have now
	  removed. (closes issue #11231) Reported by: flefoll Review:
	  https://reviewboard.asterisk.org/r/298 ........ r204246 |
	  mmichelson | 2009-06-29 16:37:05 -0500 (Mon, 29 Jun 2009) | 3
	  lines Fix build oops. ........ ................

2009-06-27 01:18 +0000 [r203918]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 203909 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r203909 | rmudgett | 2009-06-26 20:07:52 -0500
	  (Fri, 26 Jun 2009) | 23 lines Merged revisions 203908 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203908 | rmudgett | 2009-06-26 19:55:12 -0500 (Fri, 26 Jun 2009)
	  | 16 lines The ISDN CPE side should not exclusively pick B
	  channels normally. Before this patch, Asterisk unconditionally
	  picked B channels exclusively on the CPE side and normally
	  allowed alternative B channels on the network side. Now Asterisk
	  does the opposite. Reasons for the CPE side to normally not pick
	  B channels exclusively: * For CPE point-to-multipoint mode (i.e.
	  phone side), the CPE side does not have enough information to
	  exclusively pick B channels. (There may be other devices on the
	  line.) * Q.931 gives preference to the network side picking B
	  channels. * Some telcos require the CPE side to not pick B
	  channels exclusively. (closes issue #14383) Reported by:
	  mbrancaleoni ........ ................

2009-06-26 22:13 +0000 [r203856]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 203853 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r203853 | jpeeler | 2009-06-26 17:11:31 -0500
	  (Fri, 26 Jun 2009) | 12 lines Merged revisions 203848 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203848 | jpeeler | 2009-06-26 17:09:19 -0500 (Fri, 26 Jun 2009)
	  | 5 lines Make sure to recreate the dahdi pseudo channel after
	  dahdi restart (closes issue #14477) Reported by: timking ........
	  ................

2009-06-26 21:26 +0000 [r203781-203823]  Russell Bryant <russell@digium.com>

	* /, main/file.c: Merged revisions 203802 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r203802 | russell | 2009-06-26 16:21:48 -0500 (Fri, 26 Jun 2009)
	  | 22 lines Merged revisions 203785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203785 | russell | 2009-06-26 16:16:39 -0500 (Fri, 26 Jun 2009)
	  | 15 lines Don't fast forward past the end of a message. This is
	  nice change for users of the voicemail application. If someone
	  gets a little carried away with fast forwarding through a
	  message, they can easily get to the end and accidentally exit the
	  voicemail application by hitting the fast forward key during the
	  following prompt. This adds some safety by not allowing a fast
	  forward past the end of a message. (closes issue #14554) Reported
	  by: lacoursj Patches: 21761.patch uploaded by lacoursj (license
	  707) Tested by: lacoursj ........ ................

	* /, channels/chan_sip.c: Merged revisions 203779 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r203779 |
	  russell | 2009-06-26 15:45:00 -0500 (Fri, 26 Jun 2009) | 5 lines
	  Ensure the TCP read buffer is fully initialized before handling
	  each packet. (closes issue #14452) Reported by: umberto71
	  ........

2009-06-26 20:18 +0000 [r203727]  David Brooks <dbrooks@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 203721 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r203721 | dbrooks | 2009-06-26 15:13:51 -0500 (Fri, 26 Jun 2009)
	  | 16 lines Fixing voicemail's error in checking max silence vs
	  min message length Max silence was represented in milliseconds,
	  yet vmminsecs (minmessage) was represented as seconds. Also, the
	  inequality was reversed. The warning, if triggered, was "Max
	  silence should be less than minmessage or you may get empty
	  messages", which should have been logged if max silence was
	  greater than minmessage, but the check was for less than. Also,
	  conforming if statement to coding guidelines. closes issue
	  #15331) Reported by: markd Review:
	  https://reviewboard.asterisk.org/r/293/ ........

2009-06-26 19:56 +0000 [r203718]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: reverse whitespace change 203713 that was
	  based on looking at sig_analog (which has about a 1000 line
	  indentation change that is not worth doing here)

2009-06-26 19:48 +0000 [r203714]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 203710 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r203710 | dvossel | 2009-06-26 14:47:11 -0500 (Fri, 26 Jun 2009)
	  | 7 lines moving debug message from level 0 to 1. (closes issue
	  #15404) Reported by: leobrown Patches: iax_codec_debug.patch
	  uploaded by leobrown (license 541) ........

2009-06-26 19:48 +0000 [r203713]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: whitespace fix

2009-06-26 19:37 +0000 [r203704]  Russell Bryant <russell@digium.com>

	* include/asterisk/devicestate.h, main/pbx.c, /,
	  main/devicestate.c: Merged revisions 203702 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r203702 |
	  russell | 2009-06-26 14:31:14 -0500 (Fri, 26 Jun 2009) | 5 lines
	  Make invalid hints report Unavailable instead of Idle. (closes
	  issue #14413) Reported by: pj ........

2009-06-26 19:31 +0000 [r203703]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/frame.h, main/rtp.c, main/channel.c,
	  main/frame.c, /, channels/chan_sip.c, apps/app_fax.c,
	  configs/sip.conf.sample: Merged revisions 203699 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r203699 | file | 2009-06-26 16:27:24 -0300 (Fri, 26 Jun 2009) | 2
	  lines Improve T.38 negotiation by exchanging session parameters
	  between application and channel. ........

2009-06-26 19:28 +0000 [r203700]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 203672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r203672 | jpeeler | 2009-06-26 14:03:25 -0500 (Fri, 26 Jun 2009)
	  | 16 lines Check if polarityonanswerdelay has elapsed before
	  setting a channel as answered after a polarity reversal.
	  Previously on a polarity switch event chan_dahdi would set the
	  channel immediately as answered. This would cause problems if a
	  polarity reversal occurred when the line was picked up as the
	  dial would not have yet occurred. Now if the polarity reversal
	  occurs before delay has elapsed after coming off hook or an
	  answer, it is ignored. Also, some refactoring was done in
	  _handle_event. (closes issue #13917) Reported by: alecdavis
	  Patches: chan_dahdi.bug13917.feb09.diff2.txt uploaded by
	  alecdavis (license 585) Tested by: alecdavis ........

2009-06-25 21:46 +0000 [r203446]  David Vossel <dvossel@digium.com>

	* main/ast_expr2.fl, main/ast_expr2.c, /: Merged revisions 203444
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r203444 | dvossel | 2009-06-25 16:45:32 -0500 (Thu, 25
	  Jun 2009) | 4 lines fixes a few redundant conditions (issue
	  #15269) ........

2009-06-25 21:19 +0000 [r203393]  Terry Wilson <twilson@digium.com>

	* main/cli.c, /: Merged revisions 203381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r203381 | twilson | 2009-06-25 16:15:11 -0500 (Thu, 25 Jun 2009)
	  | 11 lines Merged revisions 203380 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203380 | twilson | 2009-06-25 16:13:10 -0500 (Thu, 25 Jun 2009)
	  | 4 lines I didn't see that Mark already fixed the underlying
	  issue! Yay for removing useless code. ........ ................

2009-06-25 21:07 +0000 [r203378]  Russell Bryant <russell@digium.com>

	* /, main/features.c: Merged revisions 203376 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r203376 | russell | 2009-06-25 16:04:55 -0500 (Thu, 25 Jun 2009)
	  | 16 lines Merged revisions 203375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203375 | russell | 2009-06-25 16:02:18 -0500 (Thu, 25 Jun 2009)
	  | 9 lines Fix a case where CDR answer time could be before the
	  start time involving parking. (closes issue #13794) Reported by:
	  davidw Patches: 13794.patch uploaded by murf (license 17)
	  13794.patch.160 uploaded by murf (license 17) Tested by: murf,
	  dbrooks ........ ................

2009-06-25 19:27 +0000 [r203274]  Jason Parker <jparker@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 203258 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r203258 | qwell | 2009-06-25 14:22:46 -0500 (Thu, 25 Jun 2009) |
	  10 lines Unmute when we get a dtmfup (we muted on dtmfdown)
	  event. This would occasionally cause one-way audio when using
	  hardware DTMF detection. (closes issue #14761) Reported by:
	  tzafrir Patches: v1-14761.patch uploaded by dimas (license 88)
	  Tested by: tzafrir, dimas ........

2009-06-25 16:07 +0000 [r203118]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 203116 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r203116 | russell | 2009-06-25 11:04:10 -0500 (Thu, 25 Jun 2009)
	  | 18 lines Merged revisions 203115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203115 | russell | 2009-06-25 11:02:16 -0500 (Thu, 25 Jun 2009)
	  | 11 lines Resolve a crash related to a T.38 reinvite race
	  condition. This change resolves a crash observed locally during
	  some T.38 testing. A call was set up using a call file, and when
	  the T.38 reinvite came in, the channel state was still
	  AST_STATE_DOWN. The reason is explained by a comment in the code
	  that previously lived in the handling of AST_STATE_RINGING. This
	  change modifies the logic to handle the same race condition for
	  any channel state that is not UP. (closes ABE-1895) ........
	  ................

2009-06-24 21:22 +0000 [r203057]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 203037 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r203037 | rmudgett | 2009-06-24 16:08:55 -0500
	  (Wed, 24 Jun 2009) | 15 lines Merged revisions 203036 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r203036 | rmudgett | 2009-06-24 16:01:43 -0500 (Wed, 24 Jun 2009)
	  | 8 lines Improved chan_dahdi.conf pritimer error checking. Valid
	  format is: pritimer=timer_name,timer_value * Fixed segfault if
	  the ',' is missing. * Completely check the range returned by
	  pri_timer2idx() to prevent possible access outside array bounds.
	  ........ ................

2009-06-24 18:30 +0000 [r202969]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 202967 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202967 | mmichelson | 2009-06-24 13:29:10 -0500 (Wed, 24 Jun
	  2009) | 9 lines Merged revisions 202966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202966 | mmichelson | 2009-06-24 13:28:47 -0500 (Wed, 24 Jun
	  2009) | 3 lines Use the handy UNLINK macro instead of hand-coding
	  the same thing in-line. ........ ................

2009-06-24 18:10 +0000 [r202927]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 202925 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202925 |
	  file | 2009-06-24 15:08:17 -0300 (Wed, 24 Jun 2009) | 2 lines
	  Ensure the default settings are applied for T.38 when we set it
	  up for a peer. ........

2009-06-23 22:11 +0000 [r202764]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 202761 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r202761 | mattf | 2009-06-23 17:08:43 -0500 (Tue, 23 Jun 2009) |
	  1 line I could have sworn I committed this patch ages ago, but...
	  bug fix with setting NAI properly on linksets in certain
	  situations. ........

2009-06-23 16:34 +0000 [r202674]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 202672 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202672 | dvossel | 2009-06-23 11:31:30 -0500 (Tue, 23 Jun 2009)
	  | 18 lines Merged revisions 202671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202671 | dvossel | 2009-06-23 11:28:46 -0500 (Tue, 23 Jun 2009)
	  | 12 lines MWI NOTIFY contains a wrong URI if Asterisk listens to
	  non-standard port and transport (closes issue #14659) Reported
	  by: klaus3000 Patches: patch_chan_sip_fixMWIuri_1.4.txt uploaded
	  by klaus3000 (license 65) mwi_port-transport_trunk.diff uploaded
	  by dvossel (license 671) Tested by: dvossel, klaus3000 Review:
	  https://reviewboard.asterisk.org/r/288/ ........ ................

2009-06-22 20:18 +0000 [r202503]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 202497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202497 | russell | 2009-06-22 15:11:04 -0500 (Mon, 22 Jun 2009)
	  | 11 lines Merged revisions 202496 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202496 | russell | 2009-06-22 15:08:53 -0500 (Mon, 22 Jun 2009)
	  | 4 lines Report CallerID change during a masquerade. Reported
	  by: markster ........ ................

2009-06-22 16:31 +0000 [r202472]  Sean Bright <sean@malleable.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 202417 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r202417 | seanbright | 2009-06-22 12:09:50 -0400 (Mon, 22 Jun
	  2009) | 4 lines Fix lock usage in cdr_sqlite3_custom to avoid
	  potential crashes during reload. Pointed out by Russell while
	  working on the CEL branch. ........

2009-06-22 16:14 +0000 [r202418]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 202415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202415 | russell | 2009-06-22 11:05:08 -0500 (Mon, 22 Jun 2009)
	  | 9 lines Merged revisions 202414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202414 | russell | 2009-06-22 11:00:00 -0500 (Mon, 22 Jun 2009)
	  | 2 lines Make Polycom subscription type override check more
	  explicit. ........ ................

2009-06-22 15:41 +0000 [r202412]  David Vossel <dvossel@digium.com>

	* main/loader.c, /, include/asterisk/module.h: Merged revisions
	  202410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202410 |
	  dvossel | 2009-06-22 10:33:35 -0500 (Mon, 22 Jun 2009) | 5 lines
	  attempting to load running modules Modules placed in the priority
	  heap for loading were not properly removed from the linked list.
	  This resulted in some modules attempting to load twice. ........

2009-06-22 15:10 +0000 [r202339-202345]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 202343 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202343 | mmichelson | 2009-06-22 09:58:24 -0500 (Mon, 22 Jun
	  2009) | 36 lines Merged revisions 202341-202342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202341 | mmichelson | 2009-06-22 09:42:55 -0500 (Mon, 22 Jun
	  2009) | 26 lines Fix a situation in which Asterisk would not stop
	  retransmitting 487s. If a CANCEL were received by Asterisk, we
	  would send a 487 in response to the original INVITE and a 200 OK
	  for the CANCEL. If there were a network hiccup which caused the
	  200 OK and the 487 to be lost, then the UA communicating with
	  Asterisk may try to retransmit its CANCEL. Asterisk's response to
	  this used to be to try sending another 487 to the canceled INVITE
	  and another 200 OK to the CANCEL. The problem here is that the
	  originally-sent 487 was sent "reliably" meaning that it will be
	  retransmitted until it is received properly. So when we receive
	  the second CANCEL it is likely that the first batch of 487s we
	  sent is still going strong and reaches the UA. The result was
	  that the second set of 487s would be retransmitted constantly
	  until the maximum number of retries had been reached. The fix for
	  this is that if we receive a second CANCEL for an INVITE, then we
	  cancel the retransmission of the first set of 487s and start a
	  second set. This causes the dialog to be terminated reasonably.
	  (closes issue #14584) Reported by: klaus3000 Patches:
	  14584_v2.patch uploaded by mmichelson (license 60) Tested by:
	  klaus3000 ........ r202342 | mmichelson | 2009-06-22 09:44:58
	  -0500 (Mon, 22 Jun 2009) | 3 lines Remove an extra debug line
	  left from previous commit. ........ ................

	* /, channels/chan_sip.c: Merged revisions 202337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r202337 | mmichelson | 2009-06-22 09:35:09 -0500 (Mon, 22 Jun
	  2009) | 31 lines Merged revisions 202336 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r202336 | mmichelson | 2009-06-22 09:34:05 -0500 (Mon, 22 Jun
	  2009) | 25 lines Fix a possible infinite loop in SDP parsing
	  during glare situation. There was a while loop in
	  get_ip_and_port_from_sdp which was controlled by a call to
	  get_sdp_iterate. The loop would exit either if what we were
	  searching for was found or if the return was NULL. The problem is
	  that get_sdp_iterate never returns NULL. This means that if what
	  we were searching for was not present, the loop would run
	  infinitely. This modification of the loop fixes the problem.
	  (closes issue #15213) Reported by: schmidts (closes issue #15349)
	  Reported by: samy (closes issue #14464) Reported by: pj (closes
	  issue #15345) Reported by: aragon Patches: sip_inf_loop.patch
	  uploaded by mmichelson (license 60) Tested by: aragon ........
	  ................

2009-06-21 16:15 +0000 [r202260-202264]  Russell Bryant <russell@digium.com>

	* cdr/cdr_manager.c, /: Merged revisions 202262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202262 |
	  russell | 2009-06-21 11:11:48 -0500 (Sun, 21 Jun 2009) | 2 lines
	  Fix possibility of crashiness during reload in custom fields
	  handling. ........

	* cdr/cdr_manager.c, /: Merged revisions 202258 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202258 |
	  russell | 2009-06-21 11:00:23 -0500 (Sun, 21 Jun 2009) | 2 lines
	  Standardize return values of load_config() so reload() doesn't
	  report an error on success. ........

2009-06-20 19:14 +0000 [r202185]  Sean Bright <sean@malleable.com>

	* /, apps/app_fax.c: Merged revisions 202183 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r202183 |
	  seanbright | 2009-06-20 15:09:47 -0400 (Sat, 20 Jun 2009) | 5
	  lines Fix version detection for API changes in spandsp. (closes
	  issue #15355) Reported by: deuffy ........

2009-06-19 21:08 +0000 [r202008]  Matthew Nicholson <mnicholson@digium.com>

	* channels/chan_sip.c: Added deadlock protection to
	  try_suggested_sip_codec in chan_sip.c. Review:
	  https://reviewboard.asterisk.org/r/287/

2009-06-19 20:26 +0000 [r201996]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 201994 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r201994 | dvossel | 2009-06-19 15:24:37 -0500
	  (Fri, 19 Jun 2009) | 14 lines Merged revisions 201993 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201993 | dvossel | 2009-06-19 15:22:02 -0500 (Fri, 19 Jun 2009)
	  | 8 lines timestamp was being converted to host order as a short
	  rather than a long (closes issue #15361) Reported by: ffloimair
	  Patches: ts_issue.diff uploaded by dvossel (license 671) ........
	  ................

2009-06-19 15:48 +0000 [r201784-201905]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 201904 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r201904 | tilghman | 2009-06-19 10:47:55 -0500 (Fri, 19 Jun 2009)
	  | 4 lines Fix 2 typos and add support for wide character types.
	  Reported by Benny Amorsen via the asterisk-users mailing list.
	  http://lists.digium.com/pipermail/asterisk-users/2009-June/233622.html
	  ........

	* main/features.c: If the "h" extension fails, give it another
	  chance in main/pbx.c. If the "h" extension fails, give it another
	  chance in main/pbx.c, when it returns from the bridge code. Fixes
	  an issue where the "h" extension may occasionally not fire, when
	  a Dial is executed from a Macro. Debugged in #asterisk with user
	  tompaw.

	* /, apps/Makefile: Merged revisions 201783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201783 |
	  tilghman | 2009-06-18 15:52:36 -0500 (Thu, 18 Jun 2009) | 6 lines
	  One of the changes in 1.6.1 was to allow app_directory to use
	  functionality within app_voicemail for directory functions. It is
	  therefore no longer necessary for app_directory to be linked
	  against the ODBC libraries (and it never was necessary for
	  app_directory to be linked against IMAP, though it was). ........

2009-06-18 16:51 +0000 [r201680]  David Vossel <dvossel@digium.com>

	* channels/misdn/isdn_lib.c, utils/conf2ael.c, main/ast_expr2.c,
	  utils/stereorize.c, main/ast_expr2f.c, res/ael/ael_lex.c,
	  utils/ael_main.c, utils/extconf.c, channels/xpmr/xpmr.c,
	  pbx/pbx_config.c, res/res_config_ldap.c, apps/app_rpt.c,
	  main/asterisk.c, codecs/gsm/src/gsm_destroy.c, /,
	  channels/h323/ast_h323.cxx: Merged revisions 201678 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r201678 | dvossel | 2009-06-18 11:37:42 -0500 (Thu, 18 Jun 2009)
	  | 11 lines fixes some memory leaks and redundant conditions
	  (closes issue #15269) Reported by: contactmayankjain Patches:
	  patch.txt uploaded by contactmayankjain (license 740)
	  memory_leak_stuff.trunk.diff uploaded by dvossel (license 671)
	  Tested by: contactmayankjain, dvossel ........

2009-06-18 15:36 +0000 [r201613]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 201610 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r201610 | russell | 2009-06-18 10:27:10 -0500
	  (Thu, 18 Jun 2009) | 36 lines Merged revisions 201600 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201600 | russell | 2009-06-18 10:24:31 -0500 (Thu, 18 Jun 2009)
	  | 29 lines Fix memory corruption and leakage related reloads of
	  non files mode MoH classes. For Music on Hold classes that are
	  not files mode, meaning that we are executing an application that
	  will feed us audio data, we use a thread to monitor the external
	  application and read audio from it. This thread also makes use of
	  the MoH class object. In the MoH class destructor, we used
	  pthread_cancel() to ask the thread to exit. Unfortunately, the
	  code did not wait to ensure that the thread actually went away.
	  What needed to be done is a pthread_join() to ensure that the
	  thread fully cleans up before we proceed. By adding this one
	  line, we resolve two significant problems: 1) Since the thread
	  was never joined, it never fully goes away. So, on every reload
	  of non-files mode MoH, an unused thread was sticking around. 2)
	  There was a race condition here where the application monitoring
	  thread could still try to access the MoH class, even though the
	  thread executing the MoH reload has already destroyed it. (issue
	  #15109) Reported by: jvandal (issue #15123) Reported by:
	  axisinternet (issue #15195) Reported by: amorsen (issue AST-208)
	  ........ ................

2009-06-18 15:24 +0000 [r201601]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 201570 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201570 |
	  dvossel | 2009-06-18 10:16:05 -0500 (Thu, 18 Jun 2009) | 11 lines
	  parsing extension correctly from sip register lines If a
	  transport type was specified, but no extension, parsing of the
	  extension would return whatever was after the transport rather
	  than defaulting to 's'. (closes issue #15111) Reported by: ffs
	  Patches: chan_sip.c_register-parser.patch uploaded by ffs
	  (license 730) Tested by: ffs, dvossel ........

2009-06-17 21:32 +0000 [r201532]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 201531 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r201531 | tilghman | 2009-06-17 16:31:39 -0500 (Wed, 17 Jun 2009)
	  | 7 lines Initialize additional variables, to prevent a possible
	  crash. (closes issue #15186) Reported by: ajohnson Patches:
	  20090528__issue15186.diff.txt uploaded by tilghman (license 14)
	  Tested by: ajohnson ........

2009-06-17 20:11 +0000 [r201460-201464]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 201462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201462 |
	  mmichelson | 2009-06-17 15:10:01 -0500 (Wed, 17 Jun 2009) | 12
	  lines Fix problem with no audio due to ignoring the SDP. A recent
	  change to our SDP version comparison made audio not function on
	  some calls. This was because of a test wherein we were trying to
	  see if an unsigned value was less than 0. This is a dumb
	  comparison and arguably the compiler should have warned about it.
	  Alas, though, it slipped past. Now it's fixed by changing the
	  variable to be a signed type. Found by several developers. Tested
	  by mnicholson and dbrooks. ........

	* main/channel.c, /: Merged revisions 201458 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r201458 | mmichelson | 2009-06-17 15:04:12 -0500 (Wed, 17 Jun
	  2009) | 15 lines Merged revisions 201450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201450 | mmichelson | 2009-06-17 14:59:31 -0500 (Wed, 17 Jun
	  2009) | 9 lines Change the datastore traversal in
	  ast_do_masquerade to use a safe list traversal. It is possible
	  for datastore fixup functions to remove the datastore from the
	  list and free it. In particular, the queue_transfer_fixup in
	  app_queue does this. While I don't yet know of this causing any
	  crashes, it certainly could. Found while discussing a separate
	  issue with Brian Degenhardt. ........ ................

2009-06-17 20:01 +0000 [r201448-201456]  David Vossel <dvossel@digium.com>

	* doc/datastores.txt, /: Merged revisions 201453 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201453 |
	  dvossel | 2009-06-17 15:00:51 -0500 (Wed, 17 Jun 2009) | 3 lines
	  ast_channel_datastore_alloc is no longer used. updating
	  datastores.txt to reflect that. ........

	* apps/app_mixmonitor.c, /: Merged revisions 201445 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r201445 | dvossel | 2009-06-17 14:45:35 -0500
	  (Wed, 17 Jun 2009) | 25 lines Merged revisions 201423 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201423 | dvossel | 2009-06-17 14:28:12 -0500 (Wed, 17 Jun 2009)
	  | 19 lines StopMixMonitor race condition (not giving up file
	  immediately) StopMixMonitor only indicates to the MixMonitor
	  thread to stop writing to the file. It does not guarantee that
	  the recording's file handle is available to the dialplan
	  immediately after execution. This results in a race condition. To
	  resolve this, the filestream pointer is placed in a datastore on
	  the channel. When StopMixMonitor is called, the datastore is
	  retrieved from the channel and the filestream is closed
	  immediately before returning to the dialplan. Documentation
	  indicating the use of StopMixMonitor to free files has been
	  updated as well. (closes issue #15259) Reported by: travisghansen
	  Tested by: dvossel Review:
	  https://reviewboard.asterisk.org/r/283/ ........ ................

2009-06-17 19:39 +0000 [r201444]  David Brooks <dbrooks@digium.com>

	* /, channels/chan_sip.c: Merged revisions 201381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r201381 | dbrooks | 2009-06-17 14:15:07 -0500 (Wed, 17 Jun 2009)
	  | 16 lines Merged revisions 201380 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201380 | dbrooks | 2009-06-17 13:45:50 -0500 (Wed, 17 Jun 2009)
	  | 9 lines Checks for NULL sip_pvt pointer in
	  chan_sip.c->acf_channel_read() Zombie channels could be passed,
	  and chan_sip.c wasn't checking for it. Could crash Asterisk. Now
	  checking for NULL pointer. (closes issue #15330) Reported by:
	  okrief Tested by: dbrooks ........ ................

2009-06-17 15:32 +0000 [r201365]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 201344 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201344 |
	  dvossel | 2009-06-17 10:20:26 -0500 (Wed, 17 Jun 2009) | 16 lines
	  SIP registry ref count error During a sip reload, the list of
	  sip_registry objects are supposed to be traversed, unlinked, and
	  destroyed, but destruction never takes place due to a ref
	  counting error. This causes a memory leak when registry items are
	  removed from sip.conf and reloaded. While the registries are
	  removed from the global list, they are not removed from the
	  scheduler. Because of this, SIP register attempts continue to be
	  sent out for the item even though it may no longer be in the
	  .conf. (closes issue #15295) Reported by: amorsen Review:
	  https://reviewboard.asterisk.org/r/282/ ........

2009-06-17 12:05 +0000 [r201264]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 201262 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r201262 | kpfleming | 2009-06-17 07:04:17 -0500
	  (Wed, 17 Jun 2009) | 15 lines Merged revisions 201261 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r201261 | kpfleming | 2009-06-17 07:03:25 -0500 (Wed, 17 Jun
	  2009) | 9 lines Correct AST_LIST_APPEND_LIST behavior when list
	  to be appended is empty. When the list to be appended is empty,
	  and the list to be appended to is *not*, AST_LIST_APPEND_LIST
	  would actually cause the target list to become broken, and no
	  longer have a pointer to its last entry. This patch fixes the
	  problem. (reported by Stanislaw Pitucha on the asterisk-dev
	  mailing list) ........ ................

2009-06-16 22:31 +0000 [r201225]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 201223 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201223 |
	  dvossel | 2009-06-16 17:29:30 -0500 (Tue, 16 Jun 2009) | 2 lines
	  fix issue with build_contact introduced by the "SIP trasnport
	  type issues" commit ........

2009-06-16 19:42 +0000 [r200989-201096]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/frame.h, apps/app_chanspy.c,
	  apps/app_mixmonitor.c, main/channel.c, main/autoservice.c,
	  main/frame.c, /, apps/app_meetme.c, main/slinfactory.c,
	  include/asterisk/linkedlists.h, main/file.c,
	  include/asterisk/channel.h: Merged revisions 201056 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r201056 | kpfleming | 2009-06-16 13:54:30 -0500
	  (Tue, 16 Jun 2009) | 18 lines Merged revisions 200991 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r200991 | kpfleming | 2009-06-16 12:05:38 -0500 (Tue, 16 Jun
	  2009) | 11 lines Improve support for media paths that can
	  generate multiple frames at once. There are various media paths
	  in Asterisk (codec translators and UDPTL, primarily) that can
	  generate more than one frame to be generated when the application
	  calling them expects only a single frame. This patch addresses a
	  number of those cases, at least the primary ones to solve the
	  known problems. In addition it removes the broken TRACE_FRAMES
	  support, fixes a number of bugs in various frame-related API
	  functions, and cleans up various code paths affected by these
	  changes. https://reviewboard.asterisk.org/r/175/ ........
	  ................

	* /, configure, autoconf/ast_gcc_attribute.m4, configure.ac: Merged
	  revisions 201090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r201090 |
	  kpfleming | 2009-06-16 14:27:12 -0500 (Tue, 16 Jun 2009) | 5
	  lines Another minor fix to compiler attribute checking.
	  Defaulting to 'static' for the function scope was bad... so
	  remove it. ........

	* /, configure, autoconf/ast_gcc_attribute.m4, configure.ac: Merged
	  revisions 200985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r200985 |
	  kpfleming | 2009-06-16 11:32:36 -0500 (Tue, 16 Jun 2009) | 7
	  lines Fix problems with new compiler attribute checking in
	  configure script. The last changes to ast_gcc_attribute.m4 caused
	  some problems checking for various attributes, because the scope
	  of the symbol the attribute is applied to can be important; this
	  patch allows the scope to be specified for the check. ........

2009-06-16 16:34 +0000 [r200987]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 200946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r200946 |
	  dvossel | 2009-06-16 11:03:30 -0500 (Tue, 16 Jun 2009) | 32 lines
	  SIP transport type issues What this patch addresses: 1.
	  ast_sip_ouraddrfor() by default binds to the UDP address/port
	  reguardless if the sip->pvt is of type UDP or not. Now when no
	  remapping is required, ast_sip_ouraddrfor() checks the sip_pvt's
	  transport type, attempting to set the address and port to the
	  correct TCP/TLS bindings if necessary. 2. It is not necessary to
	  send the port number in the Contact header unless the port is
	  non-standard for the transport type. This patch fixes this and
	  removes the todo note. 3. In sip_alloc(), the default dialog
	  built always uses transport type UDP. Now sip_alloc() looks at
	  the sip_request (if present) and determines what transport type
	  to use by default. 4. When changing the transport type of a
	  sip_socket, the file descriptor must be set to -1 and in some
	  cases the tcptls_session's ref count must be decremented and set
	  to NULL. I've encountered several issues associated with this
	  process and have created a function, set_socket_transport(), to
	  handle the setting of the socket type. (closes issue #13865)
	  Reported by: st Patches: dont_add_port_if_tls.patch uploaded by
	  Kristijan (license 753) 13865.patch uploaded by mmichelson
	  (license 60) tls_port_v5.patch uploaded by vrban (license 756)
	  transport_issues.diff uploaded by dvossel (license 671) Tested
	  by: mmichelson, Kristijan, vrban, jmacz, dvossel Review:
	  https://reviewboard.asterisk.org/r/278/ ........

2009-06-16 16:04 +0000 [r200947]  Michiel van Baak <michiel@vanbaak.info>

	* apps/app_voicemail.c, /: Merged revisions 200943 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r200943 | mvanbaak | 2009-06-16 17:51:36 +0200 (Tue, 16 Jun 2009)
	  | 9 lines add FILE_STORAGE to Voicemail Build Options Voicemail
	  can only use one storage module at the moment. Because it's
	  unclear that selecting one of the storage modules in menuselect
	  will disable filesystem storage we now have a FILE_STORAGE option
	  that conflicts with the other modules. (closes issue #15333)
	  ........

2009-06-16 01:32 +0000 [r200707-200766]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in,
	  autoconf/ast_gcc_attribute.m4: Merged revisions 200764 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r200764 | kpfleming | 2009-06-15 20:28:08 -0500 (Mon, 15
	  Jun 2009) | 11 lines Ensure that configure-script testing for
	  compiler attributes actually works. The configure script tests
	  for compiler attributes didn't actually enable enough warnings or
	  provide a proper test harness to determine whether the compiler
	  supports the attribute in question or not; this caused gcc 4.1 to
	  report that it supports 'weakref', but it doesn't actually
	  support it in the way that is needed for our optional API
	  mechanism. The new configure script test will properly
	  distinguish between full support and partial support for this
	  attribute, among others. ........

	* CHANGES, /: Merged revisions 200726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r200726 |
	  kpfleming | 2009-06-15 20:03:22 -0500 (Mon, 15 Jun 2009) | 6
	  lines Document the new automatic 'ignoresdpversion' behavior.
	  Asterisk will now automatically ignore incorrect incoming SDP
	  version numbers when necessary to complete a T.38 re-INVITE
	  operation. ........

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  165180,200689 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165180 |
	  mnicholson | 2008-12-17 12:49:12 -0600 (Wed, 17 Dec 2008) | 14
	  lines This patch adds a new 'ignoresdpversion' option to
	  sip.conf. When this is enabled (either globally or for a specific
	  peer), chan_sip will treat any SDP data it receives as new data
	  and update the media stream accordingly. By default, Asterisk
	  will only modify the media stream if the SDP session version
	  received is different from the current SDP session version. This
	  option is required to interoperate with devices that have
	  non-standard SDP session version implementations (observed by toc
	  on the bug tracker with Microsoft OCS which always uses 0 as the
	  session version). http://reviewboard.digium.com/r/94/ (closes
	  issue #13958) Reported by: toc Tested by: toc ........ r200689 |
	  kpfleming | 2009-06-15 15:42:38 -0500 (Mon, 15 Jun 2009) | 12
	  lines Accept T.38 re-INVITE responses with invalid SDP versions.
	  This commit changes the 'incoming SDP version' check logic a bit
	  more; when 'ignoresdpversion' is *not* set for a peer, if we
	  initiate a re-INVITE to switch to T.38, we'll always accept the
	  peer's SDP response, even if they don't properly increment the
	  SDP version number as they should. If this situation occurs, a
	  warning message will be generated suggesting that the peer's
	  configuration be changed to include the 'ignoresdpversion'
	  configuration option (although ideally they'd fix their SIP
	  implementation to be RFC compliant). AST-221 ........

2009-06-15 15:23 +0000 [r200516]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 200514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r200514 | mmichelson | 2009-06-15 10:22:11 -0500 (Mon, 15 Jun
	  2009) | 11 lines Merged revisions 200513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r200513 | mmichelson | 2009-06-15 10:21:46 -0500 (Mon, 15 Jun
	  2009) | 5 lines Add INFO to our allowed methods so that endpoints
	  know they may send it to us. AST-223 ........ ................

2009-06-12 19:08 +0000 [r200363]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 200361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r200361 | mmichelson | 2009-06-12 14:07:51 -0500 (Fri, 12 Jun
	  2009) | 16 lines Merged revisions 200360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r200360 | mmichelson | 2009-06-12 14:06:41 -0500 (Fri, 12 Jun
	  2009) | 10 lines Suppress a warning message and give a better
	  return code when generating inband ringing after a call is
	  answered. (closes issue #15158) Reported by: madkins Patches:
	  15158.patch uploaded by mmichelson (license 60) Tested by:
	  madkins ........ ................

2009-06-11 22:44 +0000 [r200229]  Sean Bright <sean@malleable.com>

	* Makefile, /: Merged revisions 199781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r199781 |
	  seanbright | 2009-06-09 14:08:53 -0400 (Tue, 09 Jun 2009) | 2
	  lines Fix all of the parallel build warnings issued when running
	  make -j#. ........

2009-06-11 21:25 +0000 [r200171]  Terry Wilson <twilson@digium.com>

	* main/rtp.c: Don't access rtp->rtcp->* if rtp->rtcp is null

2009-06-11 21:18 +0000 [r200152]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 200146 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r200146 |
	  mmichelson | 2009-06-11 16:17:14 -0500 (Thu, 11 Jun 2009) | 5
	  lines Fix a crash due to a potentially NULL p->options. Thanks to
	  mnicholson for pointing it out. ........

2009-06-11 12:16 +0000 [r200041]  Leif Madsen <lmadsen@digium.com>

	* build_tools/make_version_h, /, build_tools/make_version_c: Merged
	  revisions 200039 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r200039 |
	  lmadsen | 2009-06-11 08:15:09 -0400 (Thu, 11 Jun 2009) | 8 lines
	  Fix path for .flavor and .version (issue #14737) Reported by:
	  davidw Patches: flavor.patch uploaded by davidw (license 780)
	  Tested by: davidw ........

2009-06-10 20:35 +0000 [r199996]  David Brooks <dbrooks@digium.com>

	* main/pbx.c, /: Fixes the argument order in definition of
	  new_find_extension(). In the definition of new_find_extension(),
	  the arguments 'callerid' and 'label' were swapped. The prototype
	  declaration and all calls to the function are ordered 'callerid'
	  then 'label', but the function itself was ordered 'label' then
	  'callerid'. (closes issue #15303) Reported by: JimDickenson

2009-06-10 20:18 +0000 [r199963]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 199958 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r199958 |
	  mmichelson | 2009-06-10 15:15:48 -0500 (Wed, 10 Jun 2009) | 6
	  lines Only try to use the invite_branch on outgoing INVITEs with
	  auth credentials. I have added a comment to the code to help ease
	  understanding of the logic here as well. ........

2009-06-10 16:13 +0000 [r199859]  Sean Bright <sean@malleable.com>

	* include/asterisk/utils.h, /: Merged revisions 199857 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r199857 | seanbright | 2009-06-10 12:10:23 -0400
	  (Wed, 10 Jun 2009) | 9 lines Merged revisions 199856 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r199856 | seanbright | 2009-06-10 12:08:35 -0400 (Wed,
	  10 Jun 2009) | 2 lines __WORDSIZE is not available on all
	  platforms, so use sizeof(void *) instead. ........
	  ................

2009-06-09 20:50 +0000 [r199745-199820]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 199818 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r199818 |
	  dvossel | 2009-06-09 15:47:57 -0500 (Tue, 09 Jun 2009) | 11 lines
	  CLI NOTIFY sending wrong transport type. SIP's cli NOTIFY command
	  only used UDP rather than copying the transport type from the
	  peer. (closes issue #15283) Reported by: jthurman Patches:
	  sip-notify-tcp-svn199728.patch uploaded by jthurman (license 614)
	  Tested by: jthurman, dvossel ........

	* main/loader.c, /, res/res_timing_pthread.c,
	  include/asterisk/module.h, res/res_timing_dahdi.c: Merged
	  revisions 199743 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r199743 |
	  dvossel | 2009-06-09 11:22:04 -0500 (Tue, 09 Jun 2009) | 11 lines
	  module load priority This patch adds the option to give a module
	  a load priority. The value represents the order in which a
	  module's load() function is initialized. The lower the value, the
	  higher the priority. The value is only checked if the
	  AST_MODFLAG_LOAD_ORDER flag is set. If the AST_MODFLAG_LOAD_ORDER
	  flag is not set, the value will never be read and the module will
	  be given the lowest possible priority on load. Since some modules
	  are reliant on a timing interface, the timing modules have been
	  given a high load priorty. (closes issue #15191) Reported by:
	  alecdavis Tested by: dvossel Review:
	  https://reviewboard.asterisk.org/r/262/ ........

2009-06-08 19:39 +0000 [r199633]  Sean Bright <sean@malleable.com>

	* include/asterisk/utils.h, /: Merged revisions 199630 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r199630 | seanbright | 2009-06-08 15:33:09 -0400
	  (Mon, 08 Jun 2009) | 32 lines Merged revisions 199626,199628 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r199626 | seanbright | 2009-06-08 15:24:32 -0400 (Mon, 08 Jun
	  2009) | 21 lines Increase the size of our thread stack on 64 bit
	  processors. We were setting the stack size for each thread to
	  240KB regardless of architecture, which meant that in some
	  scenarios we actually had less available stack space on 64 bit
	  processors (pointers use 8 bytes instead of 4). So now we
	  calculate the stack size we reserve based on the platform's
	  __WORDSIZE, which gives us: 32 bit -> 240KB 64 bit -> 496KB 128
	  bit -> 1008KB (that's right, we're ready for 128 bit processors)
	  Patch typed by me but written by several members of
	  #asterisk-dev, including Kevin, Tilghman, and Qwell. (closes
	  issue #14932) Reported by: jpiszcz Patches:
	  06052009_issue14932.patch uploaded by seanbright (license 71)
	  Tested by: seanbright ........ r199628 | seanbright | 2009-06-08
	  15:28:33 -0400 (Mon, 08 Jun 2009) | 2 lines Fix a typo in the
	  stack size calculation just introduced. ........ ................

2009-06-08 17:35 +0000 [r199590]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Recorded merge of revisions 199588 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r199588 | mmichelson | 2009-06-08 12:32:04 -0500 (Mon,
	  08 Jun 2009) | 9 lines Fix a deadlock that could occur when
	  setting rtp stats on SIP calls. (closes issue #15143) Reported
	  by: cristiandimache Patches: 15143.patch uploaded by mmichelson
	  (license 60) Tested by: cristiandimache ........

2009-06-05 21:32 +0000 [r199300]  David Vossel <dvossel@digium.com>

	* include/asterisk/devicestate.h, /, main/devicestate.c: Merged
	  revisions 199298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r199298 | dvossel | 2009-06-05 16:21:22 -0500 (Fri, 05 Jun 2009)
	  | 21 lines Merged revisions 199297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r199297 | dvossel | 2009-06-05 16:19:56 -0500 (Fri, 05 Jun 2009)
	  | 14 lines Fixes issue with hints giving unexpected results.
	  Hints with two or more devices that include ONHOLD gave
	  unexpected results. (closes issue #15057) Reported by:
	  p_lindheimer Patches: onhold_trunk.diff uploaded by dvossel
	  (license 671) pbx.c.1.4.patch uploaded by p (license 558)
	  devicestate.c.trunk.patch uploaded by p (license 671) Tested by:
	  p_lindheimer, dvossel Review:
	  https://reviewboard.asterisk.org/r/254/ ........ ................

2009-06-05 13:51 +0000 [r199229]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 199227 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r199227 | mmichelson | 2009-06-05 08:51:08 -0500 (Fri, 05 Jun
	  2009) | 14 lines Correct "dahdi show channels" output when
	  specifying a group. Since a DAHDI channel may belong to multiple
	  groups, we need to use a bitwise and instead of equivalence to
	  determine whether to display the channel information. (closes
	  issue #15248) Reported by: gentian Patches: 15248.patch uploaded
	  by mmichelson (license 60) Tested by: gentian ........

2009-06-04 19:16 +0000 [r199141]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 199139 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r199139 | dvossel | 2009-06-04 14:10:16 -0500
	  (Thu, 04 Jun 2009) | 9 lines Merged revisions 199138 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r199138 | dvossel | 2009-06-04 14:00:15 -0500 (Thu, 04
	  Jun 2009) | 3 lines Additional updates to AST-2009-001 ........
	  ................

2009-06-04 14:53 +0000 [r199053]  Sean Bright <sean@malleable.com>

	* main/asterisk.c, main/loader.c, /, include/asterisk/_private.h:
	  Merged revisions 199051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r199051 | seanbright | 2009-06-04 10:31:24 -0400 (Thu, 04 Jun
	  2009) | 47 lines Merged revisions 199022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r199022 | seanbright | 2009-06-04 10:14:57 -0400 (Thu, 04 Jun
	  2009) | 40 lines Safely handle AMI connections/reload requests
	  that occur during startup. During asterisk startup, a lock on the
	  list of modules is obtained by the primary thread while each
	  module is initialized. Issue 13778 pointed out a problem with
	  this approach, however. Because the AMI is loaded before other
	  modules, it is possible for a module reload to be issued by a
	  connected client (via Action: Command), causing a deadlock. The
	  resolution for 13778 was to move initialization of the manager to
	  happen after the other modules had already been lodaded. While
	  this fixed this particular issue, it caused a problem for users
	  (like FreePBX) who call AMI scripts via an #exec in a
	  configuration file (See issue 15189). The solution I have come up
	  with is to defer any reload requests that come in until after the
	  server is fully booted. When a call comes in to ast_module_reload
	  (from wherever) before we are fully booted, the request is added
	  to a queue of pending requests. Once we are done booting up, we
	  then execute these deferred requests in turn. Note that I have
	  tried to make this a bit more intelligent in that it will not
	  queue up more than 1 request for the same module to be reloaded,
	  and if a general reload request comes in ('module reload') the
	  queue is flushed and we only issue a single deferred reload for
	  the entire system. As for how this will impact existing
	  installations - Before 13778, a reload issued before module
	  initialization was completed would result in a deadlock. After
	  13778, you simply couldn't connect to the manager during startup
	  (which causes problems with #exec-that-calls-AMI configuration
	  files). I believe this is a good general purpose solution that
	  won't negatively impact existing installations. (closes issue
	  #15189) (closes issue #13778) Reported by: p_lindheimer Patches:
	  06032009_15189_deferred_reloads.diff uploaded by seanbright
	  (license 71) Tested by: p_lindheimer, seanbright Review:
	  https://reviewboard.asterisk.org/r/272/ ........ ................

2009-06-03 15:26 +0000 [r198826-198887]  David Vossel <dvossel@digium.com>

	* main/channel.c, /, main/features.c, include/asterisk/channel.h:
	  Merged revisions 198856 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r198856 |
	  dvossel | 2009-06-02 16:17:49 -0500 (Tue, 02 Jun 2009) | 10 lines
	  Generic call forward api, ast_call_forward() The function
	  ast_call_forward() forwards a call to an extension specified in
	  an ast_channel's call_forward string. After an ast_channel is
	  called, if the channel's call_forward string is set this function
	  can be used to forward the call to a new channel and terminate
	  the original one. I have included this api call in both
	  channel.c's ast_request_and_dial() and feature.c's
	  feature_request_and_dial(). App_dial and app_queue already
	  contain call forward logic specific for their application and
	  options. (closes issue #13630) Reported by: festr Review:
	  https://reviewboard.asterisk.org/r/271/ ........

	* channels/chan_iax2.c, /: Merged revisions 198824 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r198824 | dvossel | 2009-06-02 12:55:35 -0500 (Tue, 02 Jun 2009)
	  | 8 lines fixes issue with channels not going down after transfer
	  Iax2 currently does not support native bridging if the timeoutms
	  value is set. We check for that in iax2_bridge, but then set
	  timeoutms to 0 by default. If the timeoutms is not provided it is
	  set to -1. By setting timeoutms to 0 it is processed causing a
	  bridging retry loop. (closes issue #15216) Reported by: oxymoron
	  Tested by: dvossel ........

2009-06-02 13:50 +0000 [r198793]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  198791 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r198791 |
	  file | 2009-06-02 10:48:06 -0300 (Tue, 02 Jun 2009) | 5 lines
	  Correct documentation for the register line, specifically where
	  the domain should be specified. (closes issue #14367) Reported
	  by: Nick_Lewis ........

2009-06-01 18:44 +0000 [r198628]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/meetme.sql: Merged revisions 198626 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r198626 | tilghman | 2009-06-01 13:40:35 -0500 (Mon, 01
	  Jun 2009) | 2 lines Add information for new meetme realtime
	  fields ........

2009-05-31 01:58 +0000 [r198441]  Eliel C. Sardanons <eliels@gmail.com>

	* /, res/res_timing_dahdi.c: Merged revisions 198437 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r198437 | eliel | 2009-05-30 21:22:15 -0400 (Sat, 30 May 2009) |
	  11 lines Avoid a crash when res_timing_dahdi is unloaded but
	  wasn't properly loaded. if dahdi_test_timer() fails,
	  timing_funcs_handle remains NULL causing a crash when calling
	  ast_unregister_timing_interface() with a NULL pointer. (closes
	  issue #15234) Reported by: eliel Patches: timing_dahdi1.diff
	  uploaded by eliel (license 64) ........

2009-05-30 20:21 +0000 [r198373-198390]  Sean Bright <sean@malleable.com>

	* res/res_jabber.c, /: Merged revisions 198375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r198375 |
	  seanbright | 2009-05-30 16:11:33 -0400 (Sat, 30 May 2009) | 13
	  lines Properly terminate the receive buffer before sending to
	  iksemel. aji_io_recv takes the maximum number of bytes to read
	  (instead of the total buffer size), so we have to subtract 1 from
	  our buffer size. Without this, when we receive packets that are
	  larger than our buffer, iksemel will choke and things get wonky.
	  (closes issue #15232) Reported by: lp0 Patches:
	  05302009_res_jabber.c.patch uploaded by seanbright (license 71)
	  Tested by: seanbright, lp0 ........

	* res/res_jabber.c, /: Merged revisions 198371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r198371 | seanbright | 2009-05-30 15:38:58 -0400 (Sat, 30 May
	  2009) | 19 lines Merged revisions 198370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r198370 | seanbright | 2009-05-30 15:36:20 -0400 (Sat, 30 May
	  2009) | 12 lines Properly terminate AMI JabberSend response
	  messages. The response message (either Error or Success) needs an
	  extra trailing \r\n after the fields to inform the client that
	  the message is complete. (closes issue #14876) Reported by: srt
	  Patches: 05302009_1.4_res_jabber.c.diff uploaded by seanbright
	  (license 71) asterisk_14876.patch uploaded by srt (license 378)
	  trunk-14876-2.diff uploaded by phsultan (license 73) ........
	  ................

2009-05-30 03:49 +0000 [r198314]  Russell Bryant <russell@digium.com>

	* res/res_smdi.c, /: Merged revisions 198312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r198312 | russell | 2009-05-29 22:43:23 -0500 (Fri, 29 May 2009)
	  | 12 lines Merged revisions 198311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r198311 | russell | 2009-05-29 22:42:46 -0500 (Fri, 29 May 2009)
	  | 5 lines Fix a crash that occurred when MWI SMDI messages
	  expired. (closes issue #14561) Reported by: cmoss28 ........
	  ................

2009-05-30 03:28 +0000 [r198295]  Sean Bright <sean@malleable.com>

	* apps/app_dial.c, /: Merged revisions 198285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r198285 | seanbright | 2009-05-29 23:26:06 -0400 (Fri, 29 May
	  2009) | 15 lines Merged revisions 198251 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r198251 | seanbright | 2009-05-29 22:46:41 -0400 (Fri, 29 May
	  2009) | 8 lines Treat an empty FORWARD_CONTEXT the same way we
	  treat a missing one. (closes issue #15056) Reported by:
	  p_lindheimer Patches: 05292009_bug15056.diff uploaded by
	  seanbright (license 71) Tested by: p_lindheimer ........
	  ................

2009-05-30 02:34 +0000 [r198249]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 198248 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r198248 |
	  file | 2009-05-29 23:31:48 -0300 (Fri, 29 May 2009) | 2 lines
	  When removing all packets from a dialog we also need to free the
	  data if present. ........

2009-05-29 23:05 +0000 [r198147-198187]  Russell Bryant <russell@digium.com>

	* /, configs/modules.conf.sample: Merged revisions 198186 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r198186 | russell | 2009-05-29 18:04:31 -0500 (Fri, 29
	  May 2009) | 2 lines Suggesting that only a single timing module
	  be loaded is no longer necessary. ........

	* /, res/res_timing_pthread.c: Merged revisions 198183 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r198183 | russell | 2009-05-29 17:33:31 -0500 (Fri, 29 May 2009)
	  | 2 lines Improve handling of trying to ACK too many timer
	  expirations. ........

	* /, res/res_timing_pthread.c: Merged revisions 198146 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r198146 | russell | 2009-05-29 15:06:59 -0500 (Fri, 29 May 2009)
	  | 38 lines Resolve issues with choppy sound when using
	  res_timing_pthread. The situation that caused this problem was
	  when continuous mode was being turned on and off while a rate was
	  set for a timing interface. A very easy way to replicate this bug
	  was to do a Playback() from behind a Local channel. In this
	  scenario, a rate gets set on the channel for doing file playback.
	  At the same time, continuous mode gets turned on and off about
	  every 20 ms as frames get queued on to the PBX side channel from
	  the other side of the Local channel. Essentially, this module
	  treated continuous mode and a set rate as mutually exclusive
	  states for the timer to be in. When I dug deep enough, I observed
	  the following pattern: 1) Set timer to tick every 20 ms. 2) Wait
	  almost 20 ms ... 3) Continuous mode gets turned on for a queued
	  up frame 4) Continuous mode gets turned off 5) The timer goes
	  back to its tick per 20 ms. state but starts counting at 0 ms. 6)
	  Goto step 2. Sometimes, res_timing_pthread would make it 20 ms
	  and produce a timer tick, but not most of the time. This is what
	  produced the choppy sound (or sometimes no sound at all). Now,
	  the module treats continuous mode and a set rate as completely
	  independent timer modes. They can be enabled and disabled
	  independently of each other and things work as expected. (closes
	  issue #14412) Reported by: dome Patches: issue14412.diff.txt
	  uploaded by russell (license 2) issue14412-1.6.1.0.diff.txt
	  uploaded by russell (license 2) Tested by: DennisD, russell
	  ........

2009-05-29 19:13 +0000 [r198074]  Matthew Nicholson <mnicholson@digium.com>

	* main/cdr.c, main/channel.c, /, include/asterisk/cdr.h: Merged
	  revisions 198072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r198072 | mnicholson | 2009-05-29 14:04:24 -0500 (Fri, 29 May
	  2009) | 21 lines Merged revisions 198068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r198068 | mnicholson | 2009-05-29 13:53:01 -0500 (Fri, 29 May
	  2009) | 15 lines Use AST_CDR_NOANSWER instead of AST_CDR_NULL as
	  the default CDR disposition. This change also involves the
	  addition of an AST_CDR_FLAG_ORIGINATED flag that is used on
	  originated channels to distinguish: them from dialed channels.
	  (closes issue #12946) Reported by: meral Patches: null-cdr2.diff
	  uploaded by mnicholson (license 96) Tested by: mnicholson,
	  dbrooks (closes issue #15122) Reported by: sum Tested by: sum
	  ........ ................

2009-05-29 18:39 +0000 [r198065]  Joshua Colp <jcolp@digium.com>

	* /, main/file.c: Merged revisions 198064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r198064 |
	  file | 2009-05-29 15:39:04 -0300 (Fri, 29 May 2009) | 2 lines Fix
	  a memory leak of the write buffer when writing a file. ........

2009-05-29 18:17 +0000 [r198005]  Sean Bright <sean@malleable.com>

	* Makefile, /: Merged revisions 198000 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r198000 | seanbright | 2009-05-29 14:15:15 -0400 (Fri, 29 May
	  2009) | 15 lines Merged revisions 197998 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r197998 | seanbright | 2009-05-29 14:14:12 -0400 (Fri, 29 May
	  2009) | 8 lines Fix 'make config' target for Slackware. There was
	  a missing semi-colon after the echo statement in the Makefile
	  that was causing problems for some users. Fix suggested by
	  reporter. (closes issue #15225) Reported by: pdavis ........
	  ................

2009-05-29 16:19 +0000 [r197969]  Russell Bryant <russell@digium.com>

	* /, res/res_timing_pthread.c: Merged revisions 197960 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r197960 | russell | 2009-05-29 11:15:30 -0500 (Fri, 29 May 2009)
	  | 2 lines Trim trailing whitespace so that I can work on this bug
	  without it bothering me. :-) ........

2009-05-28 23:59 +0000 [r197897]  Leif Madsen <lmadsen@digium.com>

	* apps/app_mixmonitor.c: Update MixMonitor documentation. Updated
	  the MixMonitor documentation for the 'b' option so that it is
	  more obvious that you must not optimize awat the Local channel
	  when using this option. (issue #14829)

2009-05-28 18:47 +0000 [r197700]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 197697 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r197697 | file | 2009-05-28 15:45:11 -0300 (Thu, 28 May 2009) | 2
	  lines Fix a bug where the trunkmtu setting was not set to the
	  default value of 1240 on load but was on reload. ........

2009-05-28 18:26 +0000 [r197696]  Eliel C. Sardanons <eliels@gmail.com>

	* /, channels/chan_sip.c: Merged revisions 197621 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r197621 | eliel | 2009-05-28 12:01:48 -0400 (Thu, 28 May 2009) |
	  19 lines Merged revisions 197562 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r197562 | eliel | 2009-05-28 11:21:32 -0400 (Thu, 28 May 2009) |
	  13 lines Use the address we already know when reloading a peer
	  with nat=yes. If we already have an address for a peer, and we
	  are reloading the sip configuration, try to use that address to
	  contact the peer, instead of getting it from the Contact. (closes
	  issue #15194) Reported by: ibc Patches: sip.patch uploaded by
	  eliel (license 64) Tested by: manwe ........ ................

2009-05-28 16:08 +0000 [r197623]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c: 'iax show peer blah' now outputs whether or
	  not peer 'blah' is in trunk mode or not.

2009-05-28 15:39 +0000 [r197545-197618]  Mark Michelson <mmichelson@digium.com>

	* main/rtp.c, /, channels/chan_sip.c, include/asterisk/rtp.h:
	  Merged revisions 197606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r197606 | mmichelson | 2009-05-28 10:32:19 -0500 (Thu, 28 May
	  2009) | 22 lines Recorded merge of revisions 197588 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r197588 | mmichelson | 2009-05-28 10:27:49 -0500 (Thu,
	  28 May 2009) | 16 lines Allow for media to arrive from an
	  alternate source when responding to a reinvite with 491. When we
	  receive a SIP reinvite, it is possible that we may not be able to
	  process the reinvite immediately since we have also sent a
	  reinvite out ourselves. The problem is that whoever sent us the
	  reinvite may have also sent a reinvite out to another party, and
	  that reinvite may have succeeded. As a result, even though we are
	  not going to accept the reinvite we just received, it is
	  important for us to not have problems if we suddenly start
	  receiving RTP from a new source. The fix for this is to grab the
	  media source information from the SDP of the reinvite that we
	  receive. This information is passed to the RTP layer so that it
	  will know about the alternate source for media. Review:
	  https://reviewboard.asterisk.org/r/252 ........ ................

	* apps/app_chanspy.c, /, include/asterisk/audiohook.h,
	  main/audiohook.c: Merged revisions 197543 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r197543 | mmichelson | 2009-05-28 09:58:06 -0500 (Thu, 28 May
	  2009) | 27 lines Merged revisions 197537 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r197537 | mmichelson | 2009-05-28 09:49:13 -0500 (Thu, 28 May
	  2009) | 21 lines Add flags to chanspy audiohook so that audio
	  stays in sync. There are two flags being added to the chanspy
	  audiohook here. One is the pre-existing
	  AST_AUDIOHOOK_TRIGGER_SYNC flag. With this set, we ensure that
	  the read and write slinfactories on the audiohook do not skew
	  beyond a certain tolerance. In addition, there is a new audiohook
	  flag added here, AST_AUDIOHOOK_SMALL_QUEUE. With this flag set,
	  we do not allow for a slinfactory to build up a substantial
	  amount of audio before flushing it. For this particular issue,
	  this means that the person spying on the call will hear the
	  conversations in real time with very little delay in the audio.
	  (closes issue #13745) Reported by: geoffs Patches: 13745.patch
	  uploaded by mmichelson (license 60) Tested by: snblitz ........
	  ................

2009-05-28 14:54 +0000 [r197470-197540]  Joshua Colp <jcolp@digium.com>

	* /, main/utils.c: Merged revisions 197538 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r197538 |
	  file | 2009-05-28 11:51:43 -0300 (Thu, 28 May 2009) | 5 lines Fix
	  a bug in stringfields where it did not actually free the pools of
	  memory. (closes issue #15074) Reported by: pj ........

	* /, channels/chan_sip.c: Merged revisions 197467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r197467 | file | 2009-05-28 10:47:45 -0300 (Thu, 28 May 2009) |
	  15 lines Merged revisions 197466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r197466 | file | 2009-05-28 10:44:58 -0300 (Thu, 28 May 2009) | 8
	  lines Fix a bug where the flag indicating the presence of rport
	  would get overwritten by the nat setting. The presence of rport
	  is now stored as a separate flag. Once the dialog is setup and
	  authenticated (or it passes through unauthenticated) the proper
	  nat flag is set. (closes issue #13823) Reported by: dimas
	  ........ ................

2009-05-28 11:40 +0000 [r197440]  Gavin Henry <ghenry@suretecsystems.com>

	* contrib/scripts/asterisk.ldap-schema,
	  contrib/scripts/asterisk.ldif, doc/ldap.txt,
	  configs/res_ldap.conf.sample: issue #15155 and issue #15156 from
	  trunk

2009-05-27 20:11 +0000 [r197262]  Sean Bright <sean@malleable.com>

	* Makefile, /: Merged revisions 197260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r197260 |
	  seanbright | 2009-05-27 16:08:16 -0400 (Wed, 27 May 2009) | 6
	  lines Use bash explicitly when calling build_tools/mkpkgconfig
	  from the Makefile. Since we use bashisms in
	  build_tools/mkpkgconfig, we should call on bash explicitly when
	  running from the Makefile, otherwise we get errors during a 'make
	  install.' (closes issue #15209) Reported by: seandarcy ........

2009-05-27 19:29 +0000 [r197245]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_cut.c: Recorded merge of revisions 197209 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r197209 | tilghman | 2009-05-27 14:20:56 -0500
	  (Wed, 27 May 2009) | 12 lines Recorded merge of revisions 197194
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r197194 | tilghman | 2009-05-27 14:09:42 -0500 (Wed, 27 May 2009)
	  | 5 lines Use a different determinator on whether to print the
	  delimiter, since leading fields may be blank. (closes issue
	  #15208) Reported by: ramonpeek Patch by me, though inspired in
	  part by a patch from ramonpeek ........ ................

2009-05-27 17:21 +0000 [r197145]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, include/asterisk/channel.h: Fix broken attended
	  transfers The bridge was terminating immediately after the
	  attended transfer was completed. The problem was because upon
	  reentering ast_channel_bridge nexteventts was checked to see if
	  it was set and if so could possibly return AST_BRIDGE_COMPLETE.
	  (closes issue #15183) Reported by: andrebarbosa Tested by:
	  andrebarbosa, tootai, loloski

2009-05-27 16:12 +0000 [r197091]  Sean Bright <sean@malleable.com>

	* configs/smdi.conf.sample, configs/extensions.conf.sample,
	  configs/sla.conf.sample, configs/chan_dahdi.conf.sample, /,
	  configs/vpb.conf.sample: Merged revisions 197089 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r197089 | seanbright | 2009-05-27 12:07:57 -0400 (Wed, 27 May
	  2009) | 6 lines Fix references to /etc/dahdi/system.conf and
	  /etc/asterisk/chan_dahdi.conf in the sample configuration files.
	  (closes issue #15207) Reported by: seandarcy ........

2009-05-27 15:59 +0000 [r197087]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes merge issue for r196453.

2009-05-27 13:05 +0000 [r196990]  Sean Bright <sean@malleable.com>

	* /, channels/chan_alsa.c: Merged revisions 196988 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r196988 | seanbright | 2009-05-27 09:02:54 -0400 (Wed, 27 May
	  2009) | 9 lines Display an error message when chan_alsa fails to
	  load due to a missing or inaccessible configuration file. Before
	  this change, when chan_alsa failed to load due to a missing or
	  inaccessible configuration file, no message would be displayed.
	  With this change, when chan_alsa fails to load due to a missing
	  or inaccessible configuration file, a message will be displayed.
	  (closes issue #14760) Reported by: Nick_Lewis Patches:
	  chan_alsa.c-confload.patch uploaded by Nick (license 657)
	  ........

2009-05-26 22:42 +0000 [r196869-196947]  Russell Bryant <russell@digium.com>

	* /, autoconf/ast_check_osptk.m4 (added), configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Merged revisions
	  196946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r196946 |
	  russell | 2009-05-26 17:40:34 -0500 (Tue, 26 May 2009) | 8 lines
	  Update configure script to check for OSP toolkit 3.5.0. (closes
	  issue #14988) Reported by: tzafrir Patches: configure.ac.diff
	  uploaded by homesick (license 91) new_ast_check_osptk.m4 uploaded
	  by homesick (license 91) ........

	* /, res/res_convert.c: Merged revisions 196843 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r196843 | russell | 2009-05-26 13:20:57 -0500 (Tue, 26 May 2009)
	  | 16 lines Merged revisions 196826 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r196826 | russell | 2009-05-26 13:14:36 -0500 (Tue, 26 May 2009)
	  | 9 lines Resolve a file handle leak. The frames here should have
	  always been freed. However, out of luck, there was never any
	  memory leaked. However, after file streams became reference
	  counted, this code would leak the file stream for the file being
	  read. (closes issue #15181) Reported by: jkroon ........
	  ................

2009-05-26 13:46 +0000 [r196660-196723]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 196721 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r196721 |
	  file | 2009-05-26 10:43:13 -0300 (Tue, 26 May 2009) | 7 lines Fix
	  a bug where the sip unregister CLI command did not completely
	  unregister the peer. (closes issue #15118) Reported by: alecdavis
	  Patches: chan_sip_unregister.diff2.txt uploaded by alecdavis
	  (license 585) ........

	* contrib/scripts/safe_asterisk, /: Merged revisions 196658 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r196658 | file | 2009-05-26 10:06:50 -0300 (Tue,
	  26 May 2009) | 14 lines Merged revisions 196657 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r196657 | file | 2009-05-26 10:06:09 -0300 (Tue, 26 May 2009) | 7
	  lines Remove some bash specific stuff from safe_asterisk. (closes
	  issue #10812) Reported by: paravoid Patches:
	  safe_asterisk_bashism.diff uploaded by tzafrir (license 46)
	  ........ ................

2009-05-22 22:35 +0000 [r196453]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  196416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r196416 |
	  dvossel | 2009-05-22 16:09:45 -0500 (Fri, 22 May 2009) | 19 lines
	  SIP set outbound transport type from Registration In sip.conf the
	  transport option allows for the configuration of what transport
	  types (udp, tcp, and tls) a peer will accept, but only the first
	  type listed was used for outbound connections. This patch changes
	  this. Now the default transport type is only used until the peer
	  registers. When registration takes place the transport type is
	  parsed out of the Contact header. If the Contact header's
	  transport type is equal to one that the peer supports, the peer's
	  default transport type for outbound connections is set to match
	  the Contact header's type. If the Contact header's transport type
	  is not present, then the peer's default transport type is set to
	  match the one the peer registered with. When a peer unregisters
	  or the registration expires, the default transport type for that
	  peer is reset. (closes issue #12282) Reported by: rjain Patches:
	  reg_patch_1.diff uploaded by dvossel (license 671) Tested by:
	  dvossel (closes issue #14727) Reported by: pj Patches:
	  reg_patch_3.diff uploaded by dvossel (license 671) Tested by: pj,
	  dvossel Review: https://reviewboard.asterisk.org/r/249/ ........

2009-05-22 13:58 +0000 [r196119]  Joshua Colp <jcolp@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 196117 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r196117 | file | 2009-05-22 10:56:47 -0300 (Fri,
	  22 May 2009) | 12 lines Merged revisions 196116 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r196116 | file | 2009-05-22 10:54:17 -0300 (Fri, 22 May 2009) | 5
	  lines Fix a bug where using immediate with mISDN caused a cause
	  code of 16 to get sent back instead of 1 if the 's' extension did
	  not exist. (closes issue #12286) Reported by: lmamane ........
	  ................

2009-05-21 19:13 +0000 [r195998]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 195995 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r195995 | dvossel | 2009-05-21 14:11:49 -0500
	  (Thu, 21 May 2009) | 20 lines Merged revisions 195991 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195991 | dvossel | 2009-05-21 14:04:56 -0500 (Thu, 21 May 2009)
	  | 14 lines Sign problem calculating timestamp for iax frame leads
	  to no audio on the receiving peer. There are rare cases in which
	  a frame's delivery timestamp is slightly less than the iax2_pvt's
	  offset. This causes the pvt's timestamp to be a small negative
	  number, but since the timestamp value is unsigned it looks like a
	  huge positive number. This patch checks for this negative case
	  and sets the ms to zero. A similar check is already done right
	  below this one in the 'else' statement. (closes issue #15032)
	  Reported by: guillecabeza Patches: chan_iax2.c.patch_timestamp
	  uploaded by guillecabeza (license 380) Tested by: guillecabeza
	  (closes issue #14216) Reported by: Andrey Sofronov ........
	  ................

2009-05-21 16:19 +0000 [r195892]  Matthew Nicholson <mnicholson@digium.com>

	* main/cdr.c, /, include/asterisk/cdr.h: Merged revisions 195882
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r195882 | mnicholson | 2009-05-21 10:33:55 -0500
	  (Thu, 21 May 2009) | 20 lines Merged revisions 195881 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195881 | mnicholson | 2009-05-21 10:25:50 -0500 (Thu, 21 May
	  2009) | 13 lines This commit prevents cdr records with
	  AST_CDR_FLAG_ANSLOCKED and AST_CDR_FLAG_LOCKED from being updated
	  in certain cases. This is accomplished by adding two functions to
	  update the answer time and disposition of calls that checks for
	  the proper lock flags. These functions are used in the
	  ast_bridge_call() function so that ForkCDR(A) calls are
	  respected. This patch also modifies the way ast_bridge_call()
	  chooses the cdr record to base the bridged_cdr on. Previously the
	  first unlocked cdr record would be chosen, now instead the first
	  cdr record is chosen and forked cdr records are moved to the
	  bridge_cdr. This allows the original cdr record and any forked
	  cdr records to be properly updated with answer and end times.
	  (closes issue #13797) Reported by: sh0t Tested by: sh0t (closes
	  issue #14744) Reported by: deepesh ........ ................

2009-05-20 23:31 +0000 [r195841]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, /: Merged revisions 195839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r195839 |
	  tilghman | 2009-05-20 18:30:05 -0500 (Wed, 20 May 2009) | 3 lines
	  If a variable had a blank value upon the initial setting, then it
	  would do nothing. Identified by Dmitry Andrianov via private
	  email, fixed by me. ........

2009-05-20 17:34 +0000 [r195638-195705]  Joshua Colp <jcolp@digium.com>

	* /, main/features.c: Merged revisions 195698 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195698 | file | 2009-05-20 14:33:02 -0300 (Wed, 20 May 2009) |
	  12 lines Merged revisions 195688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195688 | file | 2009-05-20 14:30:25 -0300 (Wed, 20 May 2009) | 5
	  lines Fix some code that wrongly assumed a pointer would always
	  be non-NULL when dealing with CDRs after a bridge. (closes issue
	  #15079) Reported by: barryf ........ ................

	* /, apps/app_meetme.c: Merged revisions 195636 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195636 | file | 2009-05-20 14:14:42 -0300 (Wed, 20 May 2009) |
	  12 lines Merged revisions 195635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195635 | file | 2009-05-20 14:14:00 -0300 (Wed, 20 May 2009) | 5
	  lines Fix a bug where the MeetMe option 'D' did not actually
	  prompt for the pin. (closes issue #15050) Reported by: pmhaddad
	  ........ ................

2009-05-19 20:18 +0000 [r195526]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 195521 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r195521 | tilghman | 2009-05-19 15:16:01 -0500
	  (Tue, 19 May 2009) | 14 lines Merged revisions 195520 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195520 | tilghman | 2009-05-19 15:12:20 -0500 (Tue, 19 May 2009)
	  | 7 lines Ensure thread keys are initialized before attempting to
	  access them. (closes issue #14889) Reported by: jaroth Patches:
	  app_voicemail.c.patch uploaded by msirota (license 758) Tested
	  by: msirota, BlargMaN ........ ................

2009-05-19 14:47 +0000 [r195451]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 195449 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195449 | file | 2009-05-19 11:43:54 -0300 (Tue, 19 May 2009) |
	  14 lines Merged revisions 195448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195448 | file | 2009-05-19 11:41:45 -0300 (Tue, 19 May 2009) | 7
	  lines Fix a bug where direct RTP setup would partially occur even
	  when disabled if the calling channel was answered. (issue #13545)
	  Reported by: davidw (issue #14244) Reported by: mbnwa ........
	  ................

2009-05-18 21:31 +0000 [r195429]  Eliel C. Sardanons <eliels@gmail.com>

	* main/manager.c, /: Merged revisions 195369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r195369 |
	  eliel | 2009-05-18 16:49:20 -0400 (Mon, 18 May 2009) | 8 lines
	  Fix the CLI command 'manager show command' documentation and
	  functionality. The CLI command 'manager show command' supports
	  passing multiple action names in the same line, but it was not
	  allowing that because of a incorrect check in the argumentes
	  counter. Also the documentation was updated to show that this
	  usage of the command is possible. ........

2009-05-18 20:54 +0000 [r195358-195372]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_queue.c, include/asterisk/smdi.h, apps/app_voicemail.c,
	  res/res_smdi.c, /, include/asterisk/monitor.h: Recorded merge of
	  revisions 195370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195370 | tilghman | 2009-05-18 15:52:33 -0500 (Mon, 18 May 2009)
	  | 15 lines Recorded merge of revisions 195366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195366 | tilghman | 2009-05-18 15:24:13 -0500 (Mon, 18 May 2009)
	  | 8 lines Add a similar dependency on SMDI for voicemail as
	  already exists for ADSI. (closes issue #14846) Reported by: pj
	  Patches: 20090413__bug14846__1.4.diff.txt uploaded by tilghman
	  (license 14) 20090507__issue14846__1.6.0.diff.txt uploaded by
	  tilghman (license 14) 20090507__issue14846__1.6.1.diff.txt
	  uploaded by tilghman (license 14) ........ ................

	* main/asterisk.c, /: Merged revisions 195320 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r195320 |
	  tilghman | 2009-05-18 14:17:15 -0500 (Mon, 18 May 2009) | 9 lines
	  Move the spawn of astcanary down, until after the call to
	  daemon(3). This avoids possible conflicts with the internal
	  implementation of daemon(3). (closes issue #15093) Reported by:
	  tzafrir Patches: 20090513__issue15093__2.diff.txt uploaded by
	  tilghman (license 14) Tested by: tzafrir ........

2009-05-18 19:00 +0000 [r195318]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_externalivr.c: Merged revisions 195316 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r195316 | mmichelson | 2009-05-18 13:58:26 -0500 (Mon, 18 May
	  2009) | 18 lines Fix externalivr's setvariable command so that it
	  properly sets multiple variables. The command had a for loop that
	  was guaranteed to only execute once since the continuation
	  operation of the loop would set the input buffer NULL. I rewrote
	  the loop so that its operation was more obvious, and it would set
	  multiple variables correctly. I also reduced stack space required
	  for the function, constified the input string, and modified the
	  function so that it would not modify the input string while I was
	  at it. (closes issue #15114) Reported by: chris-mac Patches:
	  15114.patch uploaded by mmichelson (license 60) Tested by:
	  chris-mac ........

2009-05-18 15:55 +0000 [r195209]  Joshua Colp <jcolp@digium.com>

	* main/frame.c, /: Merged revisions 195207 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195207 | file | 2009-05-18 12:53:26 -0300 (Mon, 18 May 2009) |
	  14 lines Merged revisions 195206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195206 | file | 2009-05-18 12:51:22 -0300 (Mon, 18 May 2009) | 7
	  lines Fix a typo which caused loss of audio when using G729 in
	  some scenarios with a smoother present. (closes issue #15105)
	  Reported by: bamby Patches: process-vad-correctly.diff uploaded
	  by bamby (license 430) ........ ................

2009-05-18 15:13 +0000 [r195167]  Eliel C. Sardanons <eliels@gmail.com>

	* apps/app_dial.c, main/pbx.c, /, apps/app_macro.c: Merged
	  revisions 195162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r195162 |
	  eliel | 2009-05-18 10:45:23 -0400 (Mon, 18 May 2009) | 9 lines
	  Warn about the use of the application WaitExten() within a
	  Macro(). Update applications documentation to warn the user about
	  the use of the WaitExten() application within a Macro().
	  Recommend the use of Read() instead. (closes issue #14444)
	  Reported by: ewieling ........

2009-05-18 13:58 +0000 [r195091-195098]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 195096 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195096 | file | 2009-05-18 10:56:16 -0300 (Mon, 18 May 2009) |
	  12 lines Merged revisions 195095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195095 | file | 2009-05-18 10:53:39 -0300 (Mon, 18 May 2009) | 5
	  lines Fix a bug where the codecs of the called party leg were not
	  properly sent back to the caller call leg when reinvited. (closes
	  issue #13569) Reported by: bkw918 ........ ................

	* /, channels/chan_sip.c: Merged revisions 195089 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r195089 |
	  file | 2009-05-18 10:36:17 -0300 (Mon, 18 May 2009) | 5 lines Fix
	  a bug where specifying an empty outboundproxy would cause packets
	  to get sent to ourself. (closes issue #15106) Reported by:
	  timeshell ........

2009-05-18 13:07 +0000 [r195023]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 195021 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r195021 | russell | 2009-05-18 07:59:11 -0500 (Mon, 18 May 2009)
	  | 12 lines Recorded merge of revisions 195020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r195020 | russell | 2009-05-18 07:57:46 -0500 (Mon, 18 May 2009)
	  | 5 lines Don't try to unlock a bogus channel. (closes issue
	  #15144) Reported by: cristiandimache ........ ................

2009-05-15 22:46 +0000 [r194835-194876]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 194874 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r194874 | dvossel | 2009-05-15 17:44:44 -0500
	  (Fri, 15 May 2009) | 23 lines Merged revisions 194873 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194873 | dvossel | 2009-05-15 17:43:13 -0500 (Fri, 15 May 2009)
	  | 17 lines IAX2 REGAUTH loop IAX was not sending REGREJ to
	  terminate invalid registrations. Instead it sent another REGAUTH
	  if the authentication challenge failed. This caused a loop of
	  REGREQ and REGAUTH frames. (Related to Security fix AST-2009-001)
	  (closes issue #14867) Reported by: aragon Tested by: dvossel
	  (closes issue #14717) Reported by: mobeck Patches:
	  regauth_loop_update_patch.diff uploaded by dvossel (license 671)
	  Tested by: dvossel ........ ................

	* channels/chan_iax2.c, channels/iax2-parser.c,
	  channels/iax2-parser.h, /, channels/iax2.h: Merged revisions
	  194833 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194833 | dvossel | 2009-05-15 15:52:12 -0500 (Fri, 15 May 2009)
	  | 24 lines Merged revisions 194557,194685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194557 | dvossel | 2009-05-14 17:59:43 -0500 (Thu, 14 May 2009)
	  | 10 lines IAX2 "Ghost" Channels There is a bug tracker issue
	  where people are reporting "Ghost" channels in their 'iax2 show
	  channels' output. The confusion is caused by channels being
	  listed as "(NONE)" with format "unknown". These are not channels
	  of coarse. They are usually just pending registration or poke
	  requests, but it is confusing output. To help make sense of this
	  I have added two columns to 'iax2 show channels'. One shows the
	  first message which started the transaction, and the second shows
	  the last message sent by either side of the call. This helps
	  diagnose why the entry exists and why it may not go away. (closes
	  issue #14207) Reported by: clive18 Review:
	  https://reviewboard.asterisk.org/r/246/ ........ r194685 |
	  dvossel | 2009-05-15 10:40:37 -0500 (Fri, 15 May 2009) | 6 lines
	  Update to previous IAX2 "Ghost" Channels patch. Fixed some
	  comments made on reviewboard for the previous patch. (issue
	  #14207) ........ ................

2009-05-15 18:44 +0000 [r194716-194767]  Russell Bryant <russell@digium.com>

	* configs/logger.conf.sample, /: Merged revisions 194765 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r194765 | russell | 2009-05-15 13:43:42 -0500
	  (Fri, 15 May 2009) | 10 lines Merged revisions 194764 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194764 | russell | 2009-05-15 13:43:18 -0500 (Fri, 15 May 2009)
	  | 2 lines Fix some spelling fail. ........ ................

	* /, codecs/g722/g722_encode.c, codecs/g722/g722_decode.c: Merged
	  revisions 194722 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r194722 |
	  russell | 2009-05-15 12:59:08 -0500 (Fri, 15 May 2009) | 4 lines
	  Shuttle some bits around to address some gain issues with G.722.
	  (closes AST-209) ........

	* codecs/Makefile, codecs/g722/Makefile (removed), /: Merged
	  revisions 194718 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r194718 |
	  russell | 2009-05-15 12:37:12 -0500 (Fri, 15 May 2009) | 2 lines
	  Further simplify codec_g722 build. ........

	* codecs/Makefile, /: Merged revisions 194714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r194714 |
	  russell | 2009-05-15 12:24:39 -0500 (Fri, 15 May 2009) | 2 lines
	  Actually force running make for g722. ........

2009-05-14 22:30 +0000 [r194542]  Kevin P. Fleming <kpfleming@digium.com>

	* /: Merged revisions 194520 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194520 | kpfleming | 2009-05-14 17:26:02 -0500 (Thu, 14 May
	  2009) | 9 lines Merged revisions 194509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194509 | kpfleming | 2009-05-14 17:23:49 -0500 (Thu, 14 May
	  2009) | 1 line Update URL to Reviewboard ........
	  ................

2009-05-14 22:23 +0000 [r194507]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 194496 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194496 | mmichelson | 2009-05-14 17:20:51 -0500 (Thu, 14 May
	  2009) | 30 lines Merged revisions 194484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194484 | mmichelson | 2009-05-14 17:17:55 -0500 (Thu, 14 May
	  2009) | 24 lines Fix a race condition where a reinvite could
	  trigger a 482 response. The loop detection/spiral detection code
	  in chan_sip used the owner channel's state as a criterion for
	  determining if the incoming INVITE is a looped request. The
	  problem with this is that the INVITE-handling code happens in a
	  different thread than the thread that marks the owner channel as
	  being up. As a result, if a reinvite were to come in very
	  quickly, say from another Asterisk on the same LAN, it was
	  possible for the reinvite to arrive before the owner channel had
	  been set to the up state. This patch corrects the problem by
	  using the invitestate of the sip_pvt instead, since that can be
	  guaranteed to be set correctly by the time the reinvite arrives.
	  Since there is a switch statement further in the INVITE-handling
	  code, the AST_STATE_RINGING state also checks the invitestate of
	  the sip_pvt in case we should actually be treating the channel as
	  if it were up already. (closes issue #12215) Reported by: jpyle
	  Patches: 12215_confirmed.patch uploaded by mmichelson (license
	  60) Tested by: lmadsen ........ ................

2009-05-14 17:07 +0000 [r194436]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 194434 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r194434 |
	  file | 2009-05-14 14:05:33 -0300 (Thu, 14 May 2009) | 7 lines Fix
	  a bug where the 'T' option to Meetme did not work. (closes issue
	  #15031) Reported by: Stochastic (closes issue #13801) Reported
	  by: justdave ........

2009-05-13 13:41 +0000 [r194212]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 194209 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194209 | file | 2009-05-13 10:39:10 -0300 (Wed, 13 May 2009) |
	  18 lines Merged revisions 194208 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194208 | file | 2009-05-13 10:38:01 -0300 (Wed, 13 May 2009) |
	  11 lines Fix RFC2833 issues with DTMF getting duplicated and with
	  duration wrapping over. (closes issue #14815) Reported by:
	  geoff2010 Patches: v1-14815.patch uploaded by dimas (license 88)
	  Tested by: geoff2010, file, dimas, ZX81, moliveras (closes issue
	  #14460) Reported by: moliveras Tested by: moliveras ........
	  ................

2009-05-13 00:54 +0000 [r194140]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 194138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194138 | tilghman | 2009-05-12 19:52:49 -0500 (Tue, 12 May 2009)
	  | 14 lines Merged revisions 194137 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194137 | tilghman | 2009-05-12 19:52:03 -0500 (Tue, 12 May 2009)
	  | 7 lines Fix logic for how to proceed with a single digit
	  extension. (closes issue #15091) Reported by: andrew Patches:
	  20090512__issue15091.diff.txt uploaded by tilghman (license 14)
	  Tested by: andrew ........ ................

2009-05-12 23:01 +0000 [r194062]  Matthew Nicholson <mnicholson@digium.com>

	* apps/app_queue.c, /: Merged revisions 194057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r194057 | mnicholson | 2009-05-12 17:32:13 -0500 (Tue, 12 May
	  2009) | 22 lines Merged revisions 194028 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r194028 | mnicholson | 2009-05-12 17:15:45 -0500 (Tue, 12 May
	  2009) | 16 lines This change modifies app_queue to properly
	  generate CDR records in failure situations. This involves setting
	  a proper cdr disposition coresponding to the given failure
	  condition and ensuring the proper information is stored in the
	  cdr record. (closes issue #13691) Reported by: dferrer Tested by:
	  mnicholson (closes issue #13637) Reported by: atis Tested by:
	  atis ........ ................

2009-05-12 20:51 +0000 [r193961]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 193954 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r193954 |
	  mmichelson | 2009-05-12 15:28:13 -0500 (Tue, 12 May 2009) | 18
	  lines Update spiral support in trunk and 1.6.X to match what is
	  in 1.4. In 1.4, a SIP spiral is treated the same way as a call
	  forward. This works much better than what is currently in trunk
	  and 1.6.X. The code in trunk and 1.6.X did not create a new call
	  to the recipient of the spiral, instead trying to continue the
	  same call. In addition to just being plain wrong, this also had
	  the side effect of only being able to spiral calls to other SIP
	  channels. With this in place, as long as call forwards are
	  honored, SIP spirals will work properly. This means that it will
	  work for outbound calls made by the Queue, Dial, and Page
	  applications. For originated calls and spool calls, however, the
	  spiral will not work properly until a generic call forward
	  mechanism is introduced into Asterisk. (relates to issue #13630)
	  ........

2009-05-12 20:42 +0000 [r193822-193958]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 193956 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193956 | tilghman | 2009-05-12 15:40:22 -0500
	  (Tue, 12 May 2009) | 13 lines Merged revisions 193955 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193955 | tilghman | 2009-05-12 15:39:21 -0500 (Tue, 12 May 2009)
	  | 6 lines Avoid initializing routines if the authentication
	  fails. Fixes a crash (RR) issue. (closes issue #14508) Reported
	  by: tiziano Patches: 20090221_2_wrongmailbox.diff.txt uploaded by
	  tiziano (license 377) ........ ................

	* apps/app_voicemail.c, /: Merged revisions 193870 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r193870 | tilghman | 2009-05-12 12:29:33 -0500 (Tue, 12 May 2009)
	  | 2 lines Convert a THREADSTORAGE object into a simple malloc'd
	  object (as suggested by Russell on -dev) ........

	* apps/app_voicemail.c, /: Recorded merge of revisions 193756 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193756 | tilghman | 2009-05-11 17:50:47 -0500
	  (Mon, 11 May 2009) | 25 lines Recorded merge of revisions 193755
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193755 | tilghman | 2009-05-11 17:48:20 -0500 (Mon, 11 May 2009)
	  | 18 lines Move 300 bytes around on the stack, to make more room
	  for an extension buffer. This allows more concurrent extensions
	  to be copied for a single voicemail, without creating a
	  possibility of upsetting existing users, where a dialplan could
	  run out of stack space where it had run fine before.
	  Alternatively, we could have allocated off the heap, but that is
	  a larger change and would have increased the chance for
	  instability introduced by this change. This is really solved
	  starting in 1.6.0.11, as the use of an ast_str buffer allows an
	  unlimited number of extensions (up to available memory). We
	  additionally create a new warning message when the buffer length
	  is exceeded, permitting administrators to see an issue after the
	  fact, whereas previously the list was silently truncated. (closes
	  issue #14739) Reported by: p_lindheimer Patches:
	  20090417__bug14739.diff.txt uploaded by tilghman (license 14)
	  Tested by: p_lindheimer ........ ................

2009-05-11 19:16 +0000 [r193616]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 193614 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193614 | rmudgett | 2009-05-11 14:11:29 -0500
	  (Mon, 11 May 2009) | 19 lines Merged revisions 193613 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193613 | rmudgett | 2009-05-11 14:09:00 -0500 (Mon, 11 May 2009)
	  | 12 lines Sent wrong message to clear a call we started if the
	  other end has not responed yet. In the state MISDN_CALLING (i.e.
	  SETUP was sent but no answer has arrived yet), it is not allowed
	  to clear the call with RELEASE_COMPLETE. It must be cleared with
	  DISCONNECT. A RELEASE_COMPLETE is only allowed as an answer to a
	  SETUP. (See Q.931 ch. 5.3.2, 5.3.2.a, 5.3.2.b) Patches:
	  chan-misdn-ccstate7.patch uploaded by customer. JIRA ABE-1862
	  ........ ................

2009-05-11 18:07 +0000 [r193547]  Leif Madsen <lmadsen@digium.com>

	* /, funcs/func_channel.c: Recorded merge of revisions 193545 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193545 | lmadsen | 2009-05-11 14:01:44 -0400
	  (Mon, 11 May 2009) | 14 lines Recorded merge of revisions 193544
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193544 | lmadsen | 2009-05-11 13:35:17 -0400 (Mon, 11 May 2009)
	  | 7 lines Document CHANNEL(transfercapability) in CLI
	  documentation. (issue #15073) Reported by: pkempgen Patches:
	  20090511__issue15073.diff.txt uploaded by tilghman (license 14)
	  ........ ................

2009-05-08 20:51 +0000 [r193389]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 193387 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r193387 |
	  dvossel | 2009-05-08 15:32:51 -0500 (Fri, 08 May 2009) | 7 lines
	  TCP not matching valid peer. find_peer() does not find a valid
	  peer when using pvt->recv as the sockaddr_in argument. Because of
	  the way TCP works, the port number in pvt->recv is not what we're
	  looking for at all. There is currently only one place that
	  find_peer searches for a peer using the sockaddr_in argument. If
	  the peer is not found after using pvt->recv (works for UDP since
	  the port number will be correct), a temp sockaddr_in struct is
	  made using the Contact header in the sip_request. This has the
	  correct port number in it. Review:
	  http://reviewboard.digium.com/r/236/ ........

2009-05-08 15:36 +0000 [r193335]  Sean Bright <sean@malleable.com>

	* funcs/func_devstate.c, /: Merged revisions 193274 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r193274 | seanbright | 2009-05-08 11:18:40 -0400 (Fri, 08 May
	  2009) | 2 lines Fix the spelling of UNAVAILABLE in func_devstate
	  CLI completion. ........

2009-05-08 14:54 +0000 [r193265]  David Vossel <dvossel@digium.com>

	* channels/misdn_config.c, /: Merged revisions 193263 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193263 | dvossel | 2009-05-08 09:52:19 -0500
	  (Fri, 08 May 2009) | 15 lines Merged revisions 193262 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193262 | dvossel | 2009-05-08 09:51:09 -0500 (Fri, 08 May 2009)
	  | 9 lines "misdn show config" segfaults asterisk, if no MSN lists
	  (closes issue #14976) Reported by: alecdavis Patches:
	  misdn_config.diff.txt uploaded by alecdavis (license 585) Tested
	  by: alecdavis, FabienToune ........ ................

2009-05-08 14:10 +0000 [r193196]  Kevin P. Fleming <kpfleming@digium.com>

	* configs/logger.conf.sample, /, main/logger.c: Merged revisions
	  193194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r193194 | kpfleming | 2009-05-08 09:06:15 -0500 (Fri, 08 May
	  2009) | 13 lines Merged revisions 193193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193193 | kpfleming | 2009-05-08 09:03:28 -0500 (Fri, 08 May
	  2009) | 7 lines Make absolute paths for logger channels work
	  properly (Note: This is not a new feature, it was previously
	  undocumented and broken.) The Asterisk logger has a feature to
	  support absolute pathnames for logger channels, but the code
	  implementing the feature was broken. This has been fixed, and the
	  absolute path feature is now documented in the sample
	  logger.conf. ........ ................

2009-05-07 23:44 +0000 [r193122]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 193120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r193120 | tilghman | 2009-05-07 18:42:28 -0500 (Thu, 07 May 2009)
	  | 26 lines Merged revisions 193119 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193119 | tilghman | 2009-05-07 18:41:11 -0500 (Thu, 07 May 2009)
	  | 19 lines Fix Background within a Macro for FreePBX. If the
	  single digit DTMF is an extension in the specified context, then
	  go there and signal no DTMF. Otherwise, we should exit with that
	  DTMF. If we're in Macro, we'll exit and seek that DTMF as the
	  beginning of an extension in the Macro's calling context. If
	  we're not in Macro, then we'll simply seek that extension in the
	  calling context. Previously, someone complained about the
	  behavior as it related to the interior of a Gosub routine, and
	  the fix (#14011) inadvertently broke FreePBX (#14940). This
	  change should fix both of these situations, but with the possible
	  incompatibility that if a single digit extension does not exist
	  (but a longer extension COULD have matched), it would have
	  previously gone immediately to the "i" extension, but will now
	  need to wait for a timeout. (closes issue #14940) Reported by:
	  p_lindheimer Patches: 20090420__bug14940.diff.txt uploaded by
	  tilghman (license 14) Tested by: p_lindheimer ........
	  ................

2009-05-07 22:42 +0000 [r193079]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 193077 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r193077 | rmudgett | 2009-05-07 17:24:04 -0500
	  (Thu, 07 May 2009) | 12 lines Merged revisions 193050 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r193050 | rmudgett | 2009-05-07 17:17:06 -0500 (Thu, 07 May 2009)
	  | 5 lines Give a more helpful message when an incoming call's
	  dialed extension does not match. Added the dialed extension and
	  context to the chan_misdn messages warning that the dialed number
	  cannot be matched in the dialplan. ........ ................

2009-05-07 17:52 +0000 [r192935-193007]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_odbc.c: Merged revisions 193006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r193006 |
	  tilghman | 2009-05-07 12:51:13 -0500 (Thu, 07 May 2009) | 7 lines
	  Second result should not contain data from the first result.
	  (closes issue #15039) Reported by: jims Patches:
	  20090506__issue15039.diff.txt uploaded by tilghman (license 14)
	  Tested by: jims ........

	* channels/chan_unistim.c, /: Merged revisions 192938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r192938 | tilghman | 2009-05-07 12:13:36 -0500 (Thu, 07 May 2009)
	  | 6 lines Send DTMF frame before playing back audio. (closes
	  issue #14858) Reported by: barryf Patches:
	  20090507__bug14858.diff.txt uploaded by tilghman (license 14)
	  ........

	* /, channels/chan_sip.c: Merged revisions 192933 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r192933 | tilghman | 2009-05-07 11:43:56 -0500 (Thu, 07 May 2009)
	  | 17 lines Merged revisions 192932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192932 | tilghman | 2009-05-07 11:29:08 -0500 (Thu, 07 May 2009)
	  | 10 lines Eliminate repetition of fullcontact during
	  reconstruction. If the fullcontact field appears in both the
	  sippeers and the sipregs table, then during reconstruction of the
	  field, it will otherwise be doubled. (closes issue #14754)
	  Reported by: Alexei Gradinari Patches:
	  20090506__bug14754.diff.txt uploaded by tilghman (license 14)
	  Tested by: lmadsen ........ ................

2009-05-06 22:19 +0000 [r192869]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 192861 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r192861 | jpeeler | 2009-05-06 17:17:27 -0500 (Wed, 06 May 2009)
	  | 17 lines Merged revisions 192858 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192858 | jpeeler | 2009-05-06 17:15:19 -0500 (Wed, 06 May 2009)
	  | 10 lines Make ParkedCall application stop execution of the
	  dialplan after hang up Just changed park_exec to always return
	  non-zero. I really wasn't entirely sure at first if this was a
	  bug. Decided it was since it would be surprising when not using
	  ParkedCall in the dialplan to hang up and have dialplan execution
	  continue. (closes issue #14555) Reported by: francesco_r ........
	  ................

2009-05-06 17:53 +0000 [r192812]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 190946 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r190946 | mattf | 2009-04-28 17:05:05 -0500 (Tue, 28 Apr 2009) |
	  1 line Make sure that we do not clear the down flag on the BRI
	  during PTMP link transients. Also refix SS7 audio that the early
	  media patch broke. ........

2009-05-06 17:39 +0000 [r192636-192809]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 192808 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r192808 | file | 2009-05-06 14:38:51 -0300 (Wed, 06 May 2009) |
	  10 lines Fix a bug where a timer would be created but not
	  acknowledged. This scenario crept up if chan_iax2 was loaded with
	  no configuration file present. It would create a timer and tell
	  it to go at an interval but the thread that normally acknowledges
	  it would not be created because no configuration file was
	  present. The timer will now be closed if no configuration file is
	  present. (closes issue #15014) Reported by: madkins ........

	* /, channels/chan_sip.c: Merged revisions 192634 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r192634 | file | 2009-05-06 10:34:35 -0300 (Wed, 06 May 2009) |
	  14 lines Merged revisions 192633 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192633 | file | 2009-05-06 10:30:51 -0300 (Wed, 06 May 2009) | 7
	  lines Update some old logic to stop both begin and end DTMF
	  frames from reaching the core if rfc2833 is not enabled. (closes
	  issue #15036) Reported by: dimas Patches: v1-15036.patch uploaded
	  by dimas (license 88) ........ ................

2009-05-05 20:02 +0000 [r192527]  Sean Bright <sean@malleable.com>

	* /, static-http/astman.js: Merged revisions 192525 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r192525 | seanbright | 2009-05-05 15:57:49 -0400
	  (Tue, 05 May 2009) | 18 lines Merged revisions 192524 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192524 | seanbright | 2009-05-05 15:56:11 -0400 (Tue, 05 May
	  2009) | 11 lines Fix Javascript error when using astman.js in
	  Internet Explorer. Internet Explorer (tested with 7.0) does not
	  like trailing commas on constructs like object initializers, so
	  get rid of them to avoid some errors. (closes issue #15026)
	  Reported by: rajnishgiri Patches: bug15026.patch uploaded by
	  seanbright (license 71) Tested by: seanbright ........
	  ................

2009-05-05 18:26 +0000 [r192401-192473]  Joshua Colp <jcolp@digium.com>

	* /, main/features.c: Merged revisions 192462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r192462 | file | 2009-05-05 15:23:58 -0300 (Tue, 05 May 2009) |
	  15 lines Merged revisions 192454 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192454 | file | 2009-05-05 15:22:27 -0300 (Tue, 05 May 2009) | 8
	  lines Fix an incorrect assumption that certain values on the
	  channel will always exist when they may not. The CDR code
	  involved with bridges wrongly assumed that the currently
	  executing application and data values will always exist. It is
	  possible for this to be false when call forwarding is involved.
	  (closes issue #14984) Reported by: gincantalupo ........
	  ................

	* apps/app_followme.c, /: Merged revisions 192430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r192430 | file | 2009-05-05 14:46:51 -0300 (Tue, 05 May 2009) |
	  12 lines Merged revisions 192429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192429 | file | 2009-05-05 14:43:30 -0300 (Tue, 05 May 2009) | 5
	  lines Fix a bug where the followme application would continue
	  trying numbers after the caller hung up. (closes issue #13624)
	  Reported by: sgenyuk ........ ................

	* /, channels/chan_sip.c: Merged revisions 192387 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r192387 |
	  file | 2009-05-05 11:22:47 -0300 (Tue, 05 May 2009) | 10 lines
	  Fix a bug with setting t38pt_udptl at the user or peer level. If
	  an incoming call authenticated as a user or peer and t38pt_udptl
	  was not set to yes in general then no UDPTL session would be
	  present and any T38 related things would fail. This commit
	  changes it so that if after authenticating T38 is enabled but no
	  UDPTL session is present one will be created. (issue AST-215)
	  ........

2009-05-05 13:37 +0000 [r192281-192359]  Kevin P. Fleming <kpfleming@digium.com>

	* main/astobj2.c, include/asterisk/stringfields.h, /, main/utils.c:
	  Merged revisions 192357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r192357 |
	  kpfleming | 2009-05-05 15:18:21 +0200 (Tue, 05 May 2009) | 5
	  lines Correct some flaws in the memory accounting code for
	  stringfields and ao2 objects Under some conditions, the memory
	  allocation for stringfields and ao2 objects would not have
	  supplied valid file/function names for MALLOC_DEBUG tracking, so
	  this commit corrects that. ........

	* main/astobj2.c, main/datastore.c, main/channel.c, /,
	  include/asterisk/astobj2.h, include/asterisk/datastore.h,
	  include/asterisk/channel.h: Merged revisions 192318 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r192318 | kpfleming | 2009-05-05 12:34:19 +0200 (Tue, 05 May
	  2009) | 5 lines Properly account for memory allocated for
	  channels and datastores As in previous commits, when channels are
	  allocated (with ast_channel_alloc) or datastores are allocated
	  (with ast_datastore_alloc) properly account for the memory being
	  owned by the caller, instead of the allocator function itself.
	  ........

	* include/asterisk/stringfields.h, /, main/utils.c: Merged
	  revisions 192279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r192279 |
	  kpfleming | 2009-05-05 10:51:06 +0200 (Tue, 05 May 2009) | 5
	  lines Ensure that string pools allocated to hold stringfields are
	  properly accounted in MALLOC_DEBUG mode This commit modifies the
	  stringfield pool allocator to remember the 'owner' of the
	  stringfield manager the pool is being allocated for, and ensures
	  that pools allocated in the future when fields are populated are
	  owned by that file/function. ........

2009-05-04 22:48 +0000 [r192216]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 192214 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r192214 | dvossel | 2009-05-04 17:44:51 -0500
	  (Mon, 04 May 2009) | 17 lines Merged revisions 192213 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r192213 | dvossel | 2009-05-04 17:37:31 -0500 (Mon, 04 May 2009)
	  | 11 lines global mohinterpret setting is ignored mohinterpret
	  and mohsuggest global variables were not copied over during
	  build_users and build_peers. (closes issue #14728) Reported by:
	  dimas Patches: v1-14728.patch uploaded by dimas (license 88)
	  Tested by: dimas, dvossel ........ ................

2009-05-04 19:30 +0000 [r192172]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, res/res_agi.c: Recorded merge of revisions 192171
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r192171 | tilghman | 2009-05-04 14:29:13 -0500 (Mon, 04
	  May 2009) | 8 lines Restore 'asyncagi break' command to 1.6.1 and
	  higher. (closes issue #14985) Reported by: nikkk Patches:
	  20090428__bug14985.diff.txt uploaded by tilghman (license 14)
	  20090429__bug14985__1.6.1.diff.txt uploaded by tilghman (license
	  14) Tested by: nikkk ........

2009-05-04 19:20 +0000 [r192154]  Kevin P. Fleming <kpfleming@digium.com>

	* main/astobj2.c, /, include/asterisk/astobj2.h: Merged revisions
	  192059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r192059 |
	  kpfleming | 2009-05-04 18:24:16 +0200 (Mon, 04 May 2009) | 5
	  lines Ensure that astobj2 memory allocations are properly
	  accounted for when MALLOC_DEBUG is used This commit ensures that
	  all astobj2 allocated objects are properly accounted for in
	  MALLOC_DEBUG mode by passing down the file/function/line
	  information from the module/function that actually called the
	  astobj2 allocation function. ........

2009-05-04 18:44 +0000 [r192134]  Tilghman Lesher <tlesher@digium.com>

	* autoconf/ast_ext_tool_check.m4, /: Merged revisions 192132 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r192132 | tilghman | 2009-05-04 13:42:56 -0500 (Mon, 04
	  May 2009) | 6 lines Pass libraries in LIBS, not LDFLAGS. (closes
	  issue #14671) Reported by: Chainsaw Patches:
	  asterisk-1.6.0.6-toolcheck-libs-not-ldflags.patch uploaded by
	  Chainsaw (license 723) ........

2009-05-04 17:30 +0000 [r192094]  Leif Madsen <lmadsen@digium.com>

	* apps/app_forkcdr.c: Resolve grammatical mistakes in the
	  application description in app_forkcdr. (closes issue #14801)
	  Reported by: festr

2009-05-04 10:00 +0000 [r191957]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configs/modules.conf.sample: Merged revisions 191955 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r191955 | kpfleming | 2009-05-04 11:57:36 +0200 (Mon, 04
	  May 2009) | 8 lines Ensure that by default only one console
	  channel driver is loaded This configuration file was changed to
	  ensure that only one console channel driver (chan_oss) is loaded
	  by default, but the change would only work if chan_console was
	  not built. Now it will work as expected; if chan_alsa or
	  chan_console are built and installed, they will not be loaded
	  unless explicity requested. ........

2009-05-02 18:45 +0000 [r191777]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/logger.c: Merged revisions 191775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191775 |
	  kpfleming | 2009-05-02 20:39:48 +0200 (Sat, 02 May 2009) | 5
	  lines Fix an error in queue_log file rotation optimization code
	  This code was copy-and-pasted without properly changing
	  references to event_rotate into queue_rotate, so under some
	  conditions the log rotation would rotate queue_log even though it
	  was not necessary. ........

2009-05-02 15:52 +0000 [r191702]  Sean Bright <sean@malleable.com>

	* main/asterisk.c, /: Merged revisions 191700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191700 |
	  seanbright | 2009-05-02 11:45:07 -0400 (Sat, 02 May 2009) | 1
	  line Update copyright year to 2009 ........

2009-05-01 20:02 +0000 [r191553-191562]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 191560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r191560 | tilghman | 2009-05-01 15:01:21 -0500 (Fri, 01 May 2009)
	  | 13 lines Merged revisions 191559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r191559 | tilghman | 2009-05-01 15:00:23 -0500 (Fri, 01 May 2009)
	  | 6 lines SIP Response 410 maps to cause code 22 (or 23), not 1.
	  (closes issue #14993) Reported by: BigJimmy Patches: causepatch
	  uploaded by BigJimmy (license 371) ........ ................

	* channels/chan_iax2.c, /: Merged revisions 191494 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r191494 | tilghman | 2009-05-01 13:18:00 -0500 (Fri, 01 May 2009)
	  | 4 lines Set debug message back to DEBUG level. (closes issue
	  #15007) Reported by: hulber ........

2009-05-01 18:20 +0000 [r191505]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 191489 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r191489 | jpeeler | 2009-05-01 13:09:23 -0500 (Fri, 01 May 2009)
	  | 15 lines Merged revisions 191488 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r191488 | jpeeler | 2009-05-01 12:40:46 -0500 (Fri, 01 May 2009)
	  | 9 lines Fix DTMF not being sent to other side after a partial
	  feature match This fixes a regression from commit 176701. The
	  issue was that ast_generic_bridge never exited after the feature
	  digit timeout had elapsed, which prevented the queued DTMF from
	  being sent to the other side. This issue was reported to me
	  directly. ........ ................

2009-05-01 16:26 +0000 [r191454]  Sean Bright <sean@malleable.com>

	* apps/app_queue.c: Fix a crash in app_queue with very long member
	  lists. A user reported via #asterisk that with very long lists of
	  members, a crash occurs in ast_strdupa, so just use a single
	  buffer and ast_copy_string instead of stack allocating copys of
	  each interface name. (Related to revision 191041 in branches/1.4)

2009-04-30 17:45 +0000 [r191223-191369]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /, configure, include/asterisk/autoconfig.h.in,
	  configure.ac: Merged revisions 191367 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191367 |
	  tilghman | 2009-04-30 12:40:58 -0500 (Thu, 30 Apr 2009) | 3 lines
	  Detect eaccess (or euidaccess) before using it. Reported by
	  Andrew Lindh via the -dev list. ........

	* main/asterisk.c, /: Merged revisions 191283 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191283 |
	  tilghman | 2009-04-30 01:47:13 -0500 (Thu, 30 Apr 2009) | 11
	  lines Change working directory to / under certain conditions. If
	  backgrounding and no core will be produced, then changing the
	  directory won't break anything; likewise, if the CWD isn't
	  accessible by the current user, then a core wasn't possible
	  anyway. (closes issue #14831) Reported by: chris-mac Patches:
	  20090428__bug14831.diff.txt uploaded by tilghman (license 14)
	  20090430__bug14831.diff.txt uploaded by tilghman (license 14)
	  Tested by: chris-mac ........

	* /, channels/h323/ast_h323.cxx, channels/chan_h323.c: Merged
	  revisions 191219 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191219 |
	  tilghman | 2009-04-29 18:06:56 -0500 (Wed, 29 Apr 2009) | 2 lines
	  Make H.323 compile with FDLEAK detection code enabled ........

2009-04-29 18:40 +0000 [r191138]  David Brooks <dbrooks@digium.com>

	* pbx/pbx_config.c, /: Merged revisions 191136 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r191136 |
	  dbrooks | 2009-04-29 13:32:58 -0500 (Wed, 29 Apr 2009) | 3 lines
	  Removing crufty code that is no longer necessary. Code cleanup.
	  ........

2009-04-29 08:45 +0000 [r190988]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c, /: Merged revisions 190830 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r190830 | transnexus | 2009-04-28 17:10:42 +0800 (Tue, 28 Apr
	  2009) | 2 lines Updated for OSP Toolkit 3.5. ........

2009-04-28 17:33 +0000 [r190906]  Tilghman Lesher <tlesher@digium.com>

	* doc/tex/cdrdriver.tex, /: Merged revisions 190904 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r190904 | tilghman | 2009-04-28 12:31:43 -0500 (Tue, 28 Apr 2009)
	  | 2 lines UniqueID column has a maximum size of 150 ........

2009-04-28 14:13 +0000 [r190731-190863]  Kevin P. Fleming <kpfleming@digium.com>

	* /, Makefile.rules: Merged revisions 190861 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r190861 |
	  kpfleming | 2009-04-28 09:12:09 -0500 (Tue, 28 Apr 2009) | 5
	  lines Remove Makefile rules for bison and flex sources We never,
	  ever want these files to processed automatically, because we
	  store the output files in Subversion and users should never need
	  to rebuild them. ........

	* /, configure, include/asterisk/autoconfig.h.in: Merged revisions
	  190725 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r190725 | kpfleming | 2009-04-27 14:30:54 -0500 (Mon, 27 Apr
	  2009) | 13 lines Merged revisions 190721 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r190721 | kpfleming | 2009-04-27 14:29:46 -0500 (Mon, 27 Apr
	  2009) | 7 lines Fix 'inconsistent line endings' when autoconf
	  2.63 is used Attempt to make configure script regeneration 'safe'
	  using autoconf 2.63, which embeds a bare CR into the script, thus
	  making Subversion complain about inconsistent line endings This
	  commit changes the MIME type of the configure script to be
	  'binary' thus making Subversion no longer inspect line endings,
	  and as a bonus 'svn diff' will no longer try to generate diff
	  output for it, which is not generally useful anyway. ........
	  ................

2009-04-27 19:36 +0000 [r190728]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 190726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r190726 |
	  tilghman | 2009-04-27 14:34:48 -0500 (Mon, 27 Apr 2009) | 4 lines
	  Don't warn on pipe in the System call. (closes issue #14979)
	  Reported by: pj ........

2009-08-10  Tilghman Lesher <tlesher@digium.com>

	* Asterisk 1.6.1.4 released

	* AST-2009-005

2009-07-27  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.2 released

	* AST-2009-004

2009-06-05  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.1 released

2009-06-04  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c: Additional updates for AST-2009-001

2009-06-04  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c: REGAUTH loop fix related to AST-2009-001

2009-04-27  Leif Madsen <lmadsen@digium.com>

	* Create Asterisk 1.6.1.0

2009-04-20  Leif Madsen <lmadsen@digium.com>

	* Create Asterisk 1.6.1.0-rc5

2009-04-20 17:08 +0000 [r189352]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 189350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r189350 |
	  file | 2009-04-20 14:05:15 -0300 (Mon, 20 Apr 2009) | 10 lines
	  Fix a bug with non-UDP connections that caused dialogs to not get
	  freed. This issue crept up because of a reference count issue on
	  non-UDP based dialogs. The dialog reference count was increased
	  when transmitting a packet reliably but never decreased. This
	  caused the dialog structure to hang around despite being unlinked
	  from the dialogs container. (closes issue #14919) Reported by:
	  vrban ........

2009-04-20 14:06 +0000 [r189280]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 189278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r189278 | mmichelson | 2009-04-20 09:05:27 -0500 (Mon, 20 Apr
	  2009) | 18 lines Merged revisions 189277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r189277 | mmichelson | 2009-04-20 09:04:41 -0500 (Mon, 20 Apr
	  2009) | 12 lines Move the check for chan->fdno == -1 to after the
	  zombie/hangup check. Many users were finding that their hung up
	  channels were staying up and causing 100% CPU usage. (issue
	  #14723) Reported by: seadweller Patches: 14723_1-4-tip.patch
	  uploaded by mmichelson (license 60) Tested by: falves11, bamby
	  ........ ................

2009-04-18 01:38 +0000 [r189206]  David Vossel <dvossel@digium.com>

	* /, channels/chan_agent.c: Merged revisions 189204 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r189204 | dvossel | 2009-04-17 20:28:45 -0500
	  (Fri, 17 Apr 2009) | 18 lines Merged revisions 189203 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r189203 | dvossel | 2009-04-17 20:27:19 -0500 (Fri, 17 Apr 2009)
	  | 12 lines Fixed autologoff in agents.conf not working when agent
	  logs in via AgentLogin app An agent logs in by calling an
	  extension that calls the AgentLogin app. In agents.conf
	  ackcall=always is set, so when they get a call they have the
	  choice to either acknowledge it or ignore it. autologoff=10 is
	  set as well, so if the agent ignores the call over 10sec one may
	  assume that the agent should be logged out (and in this case
	  hungup on as well), but this was not happening. (closes issue
	  #14091) Reported by: evandro Patches: autologoff.diff uploaded by
	  dvossel (license 671) Review:
	  http://reviewboard.digium.com/r/225/ ........ ................

2009-04-17 21:55 +0000 [r189139]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, channels/chan_misdn.c, /: Merged
	  revisions 189137 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r189137 | rmudgett | 2009-04-17 16:48:10 -0500 (Fri, 17 Apr 2009)
	  | 17 lines Merged revisions 188833,189134 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188833 | rmudgett | 2009-04-16 16:37:58 -0500 (Thu, 16 Apr 2009)
	  | 4 lines Only disable mISDN DSP if Asterisk DSP is enabled.
	  Leave jitter setting alone. JIRA ABE-1835 ........ r189134 |
	  rmudgett | 2009-04-17 16:27:55 -0500 (Fri, 17 Apr 2009) | 4 lines
	  Modifed/added some debug messages. JIRA ABE-1835 ........
	  ................

2009-04-17 20:21 +0000 [r189103]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 189097 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r189097 |
	  mmichelson | 2009-04-17 15:20:23 -0500 (Fri, 17 Apr 2009) | 13
	  lines Prevent a crash when SIP blonde transferring an unbridged
	  call. If one attempts to use the attended transfer button on a
	  SIP phone to transfer an unbridged call (such as a call to an
	  IVR) but hangs up while the target of the transfer is still
	  ringing, we need to not crash. The problem was that ast_hangup
	  was called from outside the channel thread. AST-211 ........

2009-04-17 19:46 +0000 [r189080]  Sean Bright <sean.bright@gmail.com>

	* main/asterisk.c, /: Merged revisions 189077 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r189077 |
	  seanbright | 2009-04-17 15:36:38 -0400 (Fri, 17 Apr 2009) | 1
	  line Fix copy/paste error with 'transmit silence' flag. ........

2009-04-17 17:33 +0000 [r189069]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, /: Merged revisions 189010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r189010 | mnicholson | 2009-04-17 10:44:18 -0500 (Fri, 17 Apr
	  2009) | 12 lines Merged revisions 189009 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r189009 | mnicholson | 2009-04-17 10:43:09 -0500 (Fri, 17 Apr
	  2009) | 5 lines Make Busy() application set the CDR disposition
	  to BUSY. (closes issue #14306) Reported by: cristiandimache
	  ........ ................

2009-04-17 14:48 +0000 [r188940-188949]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 188947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r188947 | file | 2009-04-17 11:44:56 -0300 (Fri, 17 Apr 2009) |
	  22 lines Merged revisions 188946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188946 | file | 2009-04-17 11:41:25 -0300 (Fri, 17 Apr 2009) |
	  15 lines Fix a bug where a value used to create the channel name
	  was bogus. This commit fixes the scenario where an incoming call
	  is authenticated using a peer entry. Previously the channel name
	  was created using either the username setting from the sip.conf
	  entry or the IP address that the call came from. Now the channel
	  name will be created using the peer name itself. This commit will
	  not change the way the channel name is generated for users or
	  friends. (closes issue #14256) Reported by: Nick_Lewis Patches:
	  chan_sip.c-chname.patch uploaded by Nick (license 657) Tested by:
	  Nick_Lewis, file ........ ................

	* channels/chan_dahdi.c, /: Merged revisions 188938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r188938 | file | 2009-04-17 11:26:53 -0300 (Fri,
	  17 Apr 2009) | 11 lines Merged revisions 188937 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188937 | file | 2009-04-17 11:25:57 -0300 (Fri, 17 Apr 2009) | 4
	  lines Fix a situation where the DAHDI channel private structure
	  lock was not unlocked when it should have been. (issue AST-210)
	  ........ ................

2009-04-16 22:05 +0000 [r188776-188838]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 188836 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r188836 | tilghman | 2009-04-16 16:57:37 -0500 (Thu, 16 Apr 2009)
	  | 14 lines Merged revisions 188835 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188835 | tilghman | 2009-04-16 16:41:13 -0500 (Thu, 16 Apr 2009)
	  | 7 lines Only update realtime, if global option rtupdate !=
	  false (closes issue #14885) Reported by: deepesh Patches:
	  20090413__bug14885.diff.txt uploaded by tilghman (license 14)
	  Tested by: deepesh ........ ................

	* apps/app_voicemail.c, /: Merged revisions 188774 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r188774 | tilghman | 2009-04-16 16:03:31 -0500
	  (Thu, 16 Apr 2009) | 11 lines Merged revisions 188773 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188773 | tilghman | 2009-04-16 16:02:29 -0500 (Thu, 16 Apr 2009)
	  | 4 lines Umask should not be exported into global namespace.
	  (closes issue #14912) Reported by: jcapp ........
	  ................

2009-04-15 22:12 +0000 [r188649]  David Vossel <dvossel@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 188647 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r188647 | dvossel | 2009-04-15 17:10:04 -0500
	  (Wed, 15 Apr 2009) | 18 lines Merged revisions 188646 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188646 | dvossel | 2009-04-15 17:08:40 -0500 (Wed, 15 Apr 2009)
	  | 12 lines National prefix inserted even when caller ID not
	  available When the caller ID is restricted, the expected behavior
	  is for the caller id to be blank. In chan_dahdi, the national
	  prefix is placed onto the callers number even if its restricted
	  (empty) causing the caller id to be the national prefix rather
	  than blank. (closes issue #13207) Reported by: shawkris Patches:
	  national_prefix.diff uploaded by dvossel (license 671) Review:
	  http://reviewboard.digium.com/r/220/ ........ ................

2009-04-15 20:20 +0000 [r188473-188596]  Mark Michelson <mmichelson@digium.com>

	* /, main/file.c: Merged revisions 188585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r188585 | mmichelson | 2009-04-15 15:17:33 -0500 (Wed, 15 Apr
	  2009) | 13 lines Merged revisions 188582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r188582 | mmichelson | 2009-04-15 15:04:20 -0500 (Wed, 15 Apr
	  2009) | 7 lines Update ast_readvideo_callback to match
	  ast_readaudio_callback. This fixes potential refcount errors that
	  may occur on ast_filestreams. AST-208 ........ ................

	* apps/app_queue.c, /: Merged revisions 188470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188470 |
	  mmichelson | 2009-04-14 18:28:13 -0500 (Tue, 14 Apr 2009) | 3
	  lines Fix a couple of queue member reference leaks. ........

2009-04-14 17:43 +0000 [r188254-188415]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 188413 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188413 |
	  file | 2009-04-14 14:40:50 -0300 (Tue, 14 Apr 2009) | 5 lines Fix
	  an incorrect clock rate when sending T140 text. (closes issue
	  #14029) Reported by: epicac ........

	* /, channels/chan_sip.c: Merged revisions 188247 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188247 |
	  file | 2009-04-14 10:14:21 -0300 (Tue, 14 Apr 2009) | 7 lines Fix
	  a bug with the change I made yesterday to outbound proxy support.
	  Per discussion with oej on IRC we need the actual IP address, not
	  the outbound proxy IP address, in the sa field. Upon further
	  inspection this should make the behaviour of all other uses of
	  the outbound proxy in the code. ........

2009-04-14 05:46 +0000 [r188208-188212]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 188210 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188210 |
	  tilghman | 2009-04-14 00:45:13 -0500 (Tue, 14 Apr 2009) | 2 lines
	  As suggested by Russell, warn users when their dialplan arguments
	  contain pipes, but not commas. ........

	* /, utils/smsq.c: Merged revisions 188206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188206 |
	  tilghman | 2009-04-14 00:27:53 -0500 (Tue, 14 Apr 2009) | 6 lines
	  Application delimiter is ',', not '|'. (closes issue #14881)
	  Reported by: stegro Patches: smsq.patch uploaded by stegro
	  (license 752) ........

2009-04-13 19:33 +0000 [r188104]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 188102 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r188102 | mmichelson | 2009-04-13 14:31:48 -0500 (Mon, 13 Apr
	  2009) | 5 lines Fix another crash related to cached realtime
	  music on hold. This was another off-by-one problem caused by
	  moh_register. ........

2009-04-13 16:32 +0000 [r188069]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 188067 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188067 |
	  file | 2009-04-13 13:28:06 -0300 (Mon, 13 Apr 2009) | 10 lines
	  Fix a bug where using an outbound proxy would cause the local
	  address to be 127.0.0.1. Copy the outbound proxy IP address into
	  the SIP dialog structure as the IP address we will be sending to.
	  This has to be done because the logic that determines what local
	  IP address to use in the SIP messages is not aware of an outbound
	  proxy being in place. It only knows what IP address we are
	  sending to. (closes issue #12006) Reported by: mnicholson
	  ........

2009-04-13 14:20 +0000 [r188038]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 188032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r188032 |
	  mmichelson | 2009-04-13 09:17:56 -0500 (Mon, 13 Apr 2009) | 6
	  lines Set all queue variables on both the caller and member
	  channels. This allows for the variables to be accessed if a
	  member macro is run. Thanks to Grigoriy Puzankin for bringing
	  this up on the -dev list. ........

2009-04-10 20:28 +0000 [r187914]  Jeff Peeler <jpeeler@digium.com>

	* channels/Makefile, /: Merged revisions 187906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r187906 |
	  jpeeler | 2009-04-10 15:26:46 -0500 (Fri, 10 Apr 2009) | 12 lines
	  Fix module embedding for chan_h323. Include libchanh323.a in the
	  modules.link file so that all the symbols can be resolved at link
	  time. (closes issue #11966) Reported by: dome Patches:
	  issue_11966.patch uploaded by kpfleming (license 421) Tested by:
	  jpeeler ........

2009-04-10 17:30 +0000 [r187767]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/sip-friends.sql,
	  contrib/scripts/realtime_pgsql.sql, /: Merged revisions 187764
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r187764 | tilghman | 2009-04-10 12:29:34 -0500
	  (Fri, 10 Apr 2009) | 9 lines Merged revisions 187763 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r187763 | tilghman | 2009-04-10 12:28:46 -0500 (Fri, 10
	  Apr 2009) | 2 lines Add lastms column to the contributed table
	  designs ........ ................

2009-04-10 16:54 +0000 [r187723]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/embed_modules.xml: Merged revisions 187721 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r187721 | kpfleming | 2009-04-10 11:51:44 -0500 (Fri, 10
	  Apr 2009) | 5 lines clean up some patterns for files to remove
	  add embedding support for bridge and test modules ........

2009-04-10 16:03 +0000 [r187678]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 187674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r187674 |
	  tilghman | 2009-04-10 10:59:40 -0500 (Fri, 10 Apr 2009) | 4 lines
	  Ensure pvt is not NULL before dereferencing it. (closes issue
	  #14784) Reported by: pj ........

2009-04-10 16:00 +0000 [r187676]  Russell Bryant <russell@digium.com>

	* tests/test_heap.c, /: Merged revisions 187675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r187675 |
	  russell | 2009-04-10 11:00:29 -0500 (Fri, 10 Apr 2009) | 2 lines
	  Disable test modules by default. ........

2009-04-10 03:56 +0000 [r187600]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, main/pbx.c, main/manager.c, /,
	  include/asterisk/linkedlists.h, main/features.c, main/http.c,
	  main/app.c, include/asterisk/lock.h, main/audiohook.c: Merged
	  revisions 187599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r187599 |
	  tilghman | 2009-04-09 22:55:27 -0500 (Thu, 09 Apr 2009) | 2 lines
	  Modify headers and macros, according to Russell's suggestions on
	  the -dev list ........

2009-04-09 19:14 +0000 [r187495]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 187488 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r187488 | mmichelson | 2009-04-09 13:58:41 -0500 (Thu, 09 Apr
	  2009) | 24 lines Merged revisions 187484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r187484 | mmichelson | 2009-04-09 13:51:20 -0500 (Thu, 09 Apr
	  2009) | 18 lines Handle a SIP race condition (reinvite before an
	  ACK) properly. RFC 5047 explains the proper course of action to
	  take if a reINVITE is received before the ACK from a previous
	  invite transaction. What we are to do is to treat the reINVITE as
	  if it were both an ACK and a reINVITE and process it normally.
	  Later, when we receive the ACK we had been expecting, we will
	  ignore it since its CSeq is less than the current iseqno of the
	  sip_pvt representing this dialog. (closes issue #13849) Reported
	  by: klaus3000 Patches: 13849_v2.patch uploaded by mmichelson
	  (license 60) Tested by: mmichelson, klaus3000 ........
	  ................

2009-04-09 18:54 +0000 [r187486]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /, include/asterisk/linkedlists.h,
	  include/asterisk/lock.h: Merged revisions 187483 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r187483 | tilghman | 2009-04-09 13:40:01 -0500
	  (Thu, 09 Apr 2009) | 15 lines Merged revisions 187428 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r187428 | tilghman | 2009-04-09 13:08:20 -0500 (Thu, 09 Apr 2009)
	  | 8 lines Race condition between ast_cli_command() and 'module
	  unload' could cause a deadlock. Add lock timeouts to avoid this
	  potential deadlock. (closes issue #14705) Reported by: jamessan
	  Patches: 20090320__bug14705.diff.txt uploaded by tilghman
	  (license 14) Tested by: jamessan ........ ................

2009-04-09 17:43 +0000 [r187427]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 187421,187424 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r187421 | mmichelson | 2009-04-09 12:30:39 -0500 (Thu,
	  09 Apr 2009) | 21 lines Fix a crash in res_musiconhold when using
	  cached realtime moh. The moh_register function links an mohclass
	  and then immediately unrefs the class since the container now has
	  a reference. The problem with using realtime music on hold is
	  that the class is allocated, registered, and started in one fell
	  swoop. The refcounting logic resulted in the count being off by
	  one. The same problem did not happen when using a static config
	  because the allocation and registration of an mohclass is a
	  separate operation from starting moh. This also did not affect
	  non-cached realtime moh because the classes are not registered at
	  all. I also have modified res_musiconhold to use the _t_ variants
	  of the ao2_ functions so that more info can be gleaned when
	  attempting to trace the refcounts. I found this to be incredibly
	  helpful for debugging this issue and there's no good reason to
	  remove it. (closes issue #14661) Reported by: sum ........
	  r187424 | mmichelson | 2009-04-09 12:34:39 -0500 (Thu, 09 Apr
	  2009) | 3 lines Use safe macro practices even though they really
	  aren't necessary. ........

2009-04-09 17:22 +0000 [r187305-187388]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 187381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r187381 |
	  tilghman | 2009-04-09 12:20:49 -0500 (Thu, 09 Apr 2009) | 4 lines
	  Allow '/' in username portion of register; this is a regression.
	  (closes issue #14668) Reported by: Netview ........

	* /, channels/chan_sip.c, apps/app_sendtext.c: Merged revisions
	  187363 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r187363 | tilghman | 2009-04-09 11:39:43 -0500 (Thu, 09 Apr 2009)
	  | 10 lines Merged revisions 187362 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r187362 | tilghman | 2009-04-09 11:38:37 -0500 (Thu, 09 Apr 2009)
	  | 3 lines Permit zero-length text messages in SIP. (Related to an
	  issue posted to the -users list, subject "AEL2, BASE64_DECODE and
	  hexadecimal") ........ ................

	* main/asterisk.c, agi/Makefile, build_tools/cflags.xml,
	  utils/Makefile, include/asterisk.h, /, main/Makefile,
	  main/file.c, main/astfd.c (added): Merged revisions 187302 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r187302 | tilghman | 2009-04-08 23:59:05 -0500
	  (Wed, 08 Apr 2009) | 14 lines Merged revisions 187300-187301 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r187300 | tilghman | 2009-04-08 23:31:38 -0500 (Wed, 08 Apr 2009)
	  | 3 lines Add debugging mode for diagnosing file descriptor
	  leaks. (Related to issue #14625) ........ r187301 | tilghman |
	  2009-04-08 23:32:40 -0500 (Wed, 08 Apr 2009) | 2 lines Oops,
	  missed this file in the last commit. ........ ................

2009-04-08 16:53 +0000 [r186987-187048]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 187046 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r187046 | mmichelson | 2009-04-08 11:52:20 -0500
	  (Wed, 08 Apr 2009) | 16 lines Merged revisions 187045 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r187045 | mmichelson | 2009-04-08 11:52:03 -0500 (Wed, 08 Apr
	  2009) | 10 lines Fix a small logical error when loading moh
	  classes. We were unconditionally incrementing the number of
	  mohclasses registered. However, we should actually only increment
	  if the call to moh_register was successful. While this probably
	  has never caused problems, I noticed it and decided to fix it
	  anyway. ........ ................

	* main/channel.c, /: Merged revisions 186985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186985 | mmichelson | 2009-04-08 10:27:41 -0500 (Wed, 08 Apr
	  2009) | 30 lines Merged revisions 186984 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186984 | mmichelson | 2009-04-08 10:26:46 -0500 (Wed, 08 Apr
	  2009) | 24 lines Make a couple of changes with regards to a new
	  message printed in ast_read(). "ast_read() called with no
	  recorded file descriptor" is a new message added after a bug was
	  discovered. Unfortunately, it seems there are a bunch of places
	  that potentially make such calls to ast_read() and trigger this
	  error message to be displayed. This commit does two things to
	  help to make this message appear less. First, the message has
	  been downgraded to a debug level message if dev mode is not
	  enabled. The message means a lot more to developers than it does
	  to end users, and so developers should take an effort to be sure
	  to call ast_read only when a channel is ready to be read from.
	  However, since this doesn't actually cause an error in operation
	  and is not something a user can easily fix, we should not spam
	  their console with these messages. Second, the message has been
	  moved to after the check for any pending masquerades. ast_read()
	  being called with no recorded file descriptor should not
	  interfere with a masquerade taking place. This could be seen as a
	  simple way of resolving issue #14723. However, I still want to
	  try to clear out the existing ways of triggering this message,
	  since I feel that would be a better resolution for the issue.
	  ........ ................

2009-04-08 05:07 +0000 [r186900]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 186899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r186899 |
	  tilghman | 2009-04-08 00:06:22 -0500 (Wed, 08 Apr 2009) | 2 lines
	  Add lastms to the require API call. ........

2009-04-08 00:10 +0000 [r186835-186844]  Mark Michelson <mmichelson@digium.com>

	* /, formats/format_wav.c, formats/format_wav_gsm.c: Merged
	  revisions 186842 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186842 | mmichelson | 2009-04-07 19:09:28 -0500 (Tue, 07 Apr
	  2009) | 14 lines Merged revisions 186841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186841 | mmichelson | 2009-04-07 19:09:04 -0500 (Tue, 07 Apr
	  2009) | 8 lines Fix a few typos of the word "frequency." (closes
	  issue #14842) Reported by: jvandal Patches: frequency-typo.diff
	  uploaded by jvandal (license 413) ........ ................

	* /, channels/chan_sip.c: Merged revisions 186837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r186837 |
	  mmichelson | 2009-04-07 19:01:49 -0500 (Tue, 07 Apr 2009) | 7
	  lines Fix bad merge from fix for issue 13867. (closes issue
	  #14686) Reported by: davidw ........

	* main/channel.c, /: Merged revisions 186833 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186833 | mmichelson | 2009-04-07 18:50:56 -0500 (Tue, 07 Apr
	  2009) | 15 lines Merged revisions 186832 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186832 | mmichelson | 2009-04-07 18:49:49 -0500 (Tue, 07 Apr
	  2009) | 8 lines Set the AST_FEATURE_WARNING_ACTIVE flag when a
	  p2p bridge returns AST_BRIDGE_RETRY. Without this flag set,
	  warning sounds will not be properly played to either party of the
	  bridge. (closes issue #14845) Reported by: adomjan ........
	  ................

2009-04-07 22:33 +0000 [r186806]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 186799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186799 | tilghman | 2009-04-07 17:23:46 -0500 (Tue, 07 Apr 2009)
	  | 10 lines Merged revisions 186775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186775 | tilghman | 2009-04-07 17:16:50 -0500 (Tue, 07 Apr 2009)
	  | 3 lines Fix Macro documentation to match current (and intended)
	  behavior. (See -dev mailing list) ........ ................

2009-04-07 20:53 +0000 [r186722]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 186720 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186720 | mmichelson | 2009-04-07 15:46:18 -0500 (Tue, 07 Apr
	  2009) | 12 lines Merged revisions 186719 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186719 | mmichelson | 2009-04-07 15:43:49 -0500 (Tue, 07 Apr
	  2009) | 6 lines Ensure that \r\n is printed after the ActionID in
	  an OriginateResponse. (closes issue #14847) Reported by: kobaz
	  ........ ................

2009-04-03 20:21 +0000 [r186466]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 186461 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r186461 | kpfleming | 2009-04-03 15:20:01 -0500
	  (Fri, 03 Apr 2009) | 11 lines Merged revisions 186458 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186458 | kpfleming | 2009-04-03 15:19:20 -0500 (Fri, 03 Apr
	  2009) | 5 lines Fix a bug where DAHDI/Zaptel channels would not
	  properly switch formats when requested Don't offer
	  AST_FORMAT_SLINEAR on DAHDI/Zaptel channels... while it could
	  provide a slight performance benefit, the translation core in
	  Asterisk has some flaws when a channel driver offers multiple raw
	  formats. this fix is much simpler than fixing the translation
	  core to solve that issue (although that will be done later).
	  ........ ................

2009-04-03 20:04 +0000 [r186448]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /, configs/voicemail.conf.sample: Merged
	  revisions 186444,186447 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186444 | tilghman | 2009-04-03 14:30:34 -0500 (Fri, 03 Apr 2009)
	  | 14 lines Merged revisions 186415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186415 | tilghman | 2009-04-03 14:06:58 -0500 (Fri, 03 Apr 2009)
	  | 7 lines Distinguish in a sent email between simple sends and
	  forwards. (closes issue #11678) Reported by: jamessan Patches:
	  20090330__bug11678.diff.txt uploaded by tilghman (license 14)
	  Tested by: tilghman, lmadsen ........ ................ r186447 |
	  tilghman | 2009-04-03 14:59:55 -0500 (Fri, 03 Apr 2009) | 9 lines
	  Merged revisions 186445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186445 | tilghman | 2009-04-03 14:56:48 -0500 (Fri, 03 Apr 2009)
	  | 2 lines Found a conflict in the last commit, due to multiple
	  targets ........ ................

2009-04-03 16:38 +0000 [r186381]  David Vossel <dvossel@digium.com>

	* /, main/audiohook.c: Merged revisions 186379 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r186379 |
	  dvossel | 2009-04-03 11:29:47 -0500 (Fri, 03 Apr 2009) | 4 lines
	  audio_audiohook_write_list() did not correctly update sample size
	  after ast_translate. audio_audiohook_write_list() did not take
	  into account that the sample size may change after translation
	  depending on if the original frame is is 8khz or 16khz. the
	  sample size is now updated after translating to reflect this
	  possibility. This caused the audio on the receiving end to sound
	  terrible. Thanks to jcolp and mmichelson for helping me work this
	  out. (issue AST-197) ........

2009-04-03  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1.0-rc4 released.

2009-04-03 15:54 +0000 [r186323]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/crypto.h, /: Merged revisions 186321 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r186321 | file | 2009-04-03 12:52:50 -0300 (Fri,
	  03 Apr 2009) | 12 lines Merged revisions 186320 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186320 | file | 2009-04-03 12:48:56 -0300 (Fri, 03 Apr 2009) | 5
	  lines Fix a problem with the crypto variable definitions not
	  actually being defined properly. (closes issue #14804) Reported
	  by: jvandal ........ ................

2009-04-03 14:33 +0000 [r186288]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 186286 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r186286 | mmichelson | 2009-04-03 09:32:05 -0500 (Fri, 03 Apr
	  2009) | 20 lines Fix the ability to retrieve voicemail messages
	  from IMAP. A recent change made interactive vm_states no longer
	  get added to the list of vm_states and instead get stored in
	  thread-local storage. In trunk and all the 1.6.X branches, the
	  problem is that when we search for messages in a voicemail box,
	  we would attempt to update the appropriate vm_state struct by
	  directly searching in the list of vm_states instead of using the
	  get_vm_state_by_imap_user function. This meant we could not find
	  the interactive vm_state that we wanted. (closes issue #14685)
	  Reported by: BlargMaN Patches: 14685.patch uploaded by mmichelson
	  (license 60) Tested by: BlargMaN, qualleyiv, mmichelson ........

2009-04-03 02:06 +0000 [r186232]  Russell Bryant <russell@digium.com>

	* cdr/cdr_radius.c, /: Merged revisions 186230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186230 | russell | 2009-04-02 21:03:48 -0500 (Thu, 02 Apr 2009)
	  | 29 lines Merged revisions 186229 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186229 | russell | 2009-04-02 20:57:44 -0500 (Thu, 02 Apr 2009)
	  | 21 lines Fix a memory leak in cdr_radius. I came across this
	  while doing some testing of my ast_channel_ao2 branch. After
	  running a test overnight that generated over 5 million calls,
	  Asterisk had taken up about 1 GB of my system memory. So, I
	  re-ran the test with MALLOC_DEBUG turned on. However, it showed
	  no leaks in Asterisk during the test, even though Asterisk was
	  still consuming it somehow. Instead, I turned to valgrind, which
	  when run with --leak-check=full, told me exactly where the leak
	  came from, which was from allocations inside the radiusclient-ng
	  library. This explains why MALLOC_DEBUG did not report it. After
	  a bit of analysis, I found that we were leaking a little bit of
	  memory every time a CDR record was passed to cdr_radius. I don't
	  actually have a radius server set up to receive CDR records.
	  However, I always have my development systems compile and install
	  all modules. In addition to making sure there are not build
	  errors across modules, always loading modules helps find bugs
	  like this, too, so it is strongly recommend for all developers.
	  ........ ................

2009-04-02 21:59 +0000 [r186177]  Mark Michelson <mmichelson@digium.com>

	* configs/features.conf.sample, /: Merged revisions 186175 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r186175 | mmichelson | 2009-04-02 16:56:21 -0500
	  (Thu, 02 Apr 2009) | 11 lines Merged revisions 186174 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r186174 | mmichelson | 2009-04-02 16:55:34 -0500 (Thu, 02 Apr
	  2009) | 5 lines Fix instructions in one-step parking comment to
	  make more sense. Changed a capital K to a lowercase k. ........
	  ................

2009-04-02 17:27 +0000 [r186108]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 186101 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r186101 | kpfleming | 2009-04-02 12:26:07 -0500
	  (Thu, 02 Apr 2009) | 9 lines Merged revisions 186081 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r186081 | kpfleming | 2009-04-02 12:21:29 -0500 (Thu, 02
	  Apr 2009) | 3 lines ensure that the buffer passed to
	  DAHDI_SET_BUFINFO is fully initialized ........ ................

2009-04-02 17:14 +0000 [r186062]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  186060 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r186060 | tilghman | 2009-04-02 12:10:28 -0500 (Thu, 02 Apr 2009)
	  | 16 lines Merged revisions 186059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r186059 | tilghman | 2009-04-02 12:09:13 -0500
	  (Thu, 02 Apr 2009) | 9 lines Merged revisions 186056 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r186056 | tilghman | 2009-04-02 12:02:18 -0500 (Thu, 02
	  Apr 2009) | 2 lines Fix for AST-2009-003 ........
	  ................ ................

2009-04-02 13:53 +0000 [r185956]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 185953 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r185953 | kpfleming | 2009-04-02 08:51:44 -0500
	  (Thu, 02 Apr 2009) | 11 lines Merged revisions 185952 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185952 | kpfleming | 2009-04-02 08:43:43 -0500 (Thu, 02 Apr
	  2009) | 5 lines the DAHDI_GETCONF, DAHDI_SETCONF and
	  DAHDI_GET_PARAMS ioctls were recently corrected to show that they
	  do, in fact, read data from userspace as part of their work. due
	  to this fix, valgrind now reports a number of cases where
	  chan_dahdi passed an uninitialized (or partially) buffer to these
	  ioctls, which could lead to unexpected behavior. this patch
	  corrects chan_dahdi to ensure that buffers passed to these ioctls
	  are always fully initialized. ........ ................

2009-04-01 19:06 +0000 [r185848]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 185846 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185846 | dvossel | 2009-04-01 14:03:32 -0500 (Wed, 01 Apr 2009)
	  | 16 lines Merged revisions 185845 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185845 | dvossel | 2009-04-01 14:02:00 -0500 (Wed, 01 Apr 2009)
	  | 10 lines Fixes issue with dropped calles due to re-Invite glare
	  and re-Invites never executing after a 491 Acknowledgement for
	  491 responses were never being processed because it didn't match
	  our pending invite's seqno. Since the ACK was never processed,
	  the 491 frame would continue to be retransmitted until eventually
	  the call was dropped due to max retries. Now during a pending
	  invite, if we receive another invite, we send an 491 and hold on
	  to that glare invite's seqno in the "glareinvite" variable for
	  that sip_pvt struct. When ACK's are received, we first check to
	  see if it is in response to our pending invite, if not we check
	  to see if it is in response to a glare invite. In this case, it
	  is in response to the glare invite and must be dealt with or the
	  call is dropped. I've changed the wait time for resending the
	  re-Invite after receving a 491 response to comply with RFC 3261.
	  Before this patch the scheduled re-Invite would only change a
	  flag indicating that the re-Invite should be sent out, now it
	  actually sends it out as well. (closes issue #12013) Reported by:
	  alx Review: http://reviewboard.digium.com/r/213/ ........
	  ................

2009-04-01 13:50 +0000 [r185774]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 185772 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185772 | russell | 2009-04-01 08:48:26 -0500 (Wed, 01 Apr 2009)
	  | 14 lines Merged revisions 185771 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185771 | russell | 2009-04-01 08:47:30 -0500 (Wed, 01 Apr 2009)
	  | 6 lines Fix a case where DTMF could bypass audiohooks. This
	  change fixes a situation where an audiohook that wants DTMF would
	  not actually get it. This is in the code path where we end DTMF
	  digit length emulation while handling a NULL frame. ........
	  ................

2009-03-31 22:38 +0000 [r185666]  Kevin P. Fleming <kpfleming@digium.com>

	* utils, /: Merged revisions 185664 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r185664 |
	  kpfleming | 2009-03-31 17:35:07 -0500 (Tue, 31 Mar 2009) | 1 line
	  ignore copied (generated) file ........

2009-03-31 22:05 +0000 [r185471-185602]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 185600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185600 | mmichelson | 2009-03-31 17:02:48 -0500 (Tue, 31 Mar
	  2009) | 12 lines Merged revisions 185599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185599 | mmichelson | 2009-03-31 17:00:01 -0500 (Tue, 31 Mar
	  2009) | 6 lines Fix crash that would occur if an empty member was
	  specified in queues.conf. (closes issue #14796) Reported by: pida
	  ........ ................

	* apps/app_voicemail.c, /: Merged revisions 185469 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r185469 | mmichelson | 2009-03-31 14:46:18 -0500
	  (Tue, 31 Mar 2009) | 14 lines Merged revisions 185468 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185468 | mmichelson | 2009-03-31 14:45:30 -0500 (Tue, 31 Mar
	  2009) | 8 lines Fix Russian voicemail intro to say the word
	  "messages" properly. (closes issue #14736) Reported by: chappell
	  Patches: voicemail_no_messages.diff uploaded by chappell (license
	  8) ........ ................

2009-03-31 17:48 +0000 [r185427]  David Brooks <dbrooks@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 185363 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r185363 | dbrooks | 2009-03-31 11:46:57 -0500
	  (Tue, 31 Mar 2009) | 44 lines Merged revisions 185362 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185362 | dbrooks | 2009-03-31 11:37:12 -0500 (Tue, 31 Mar 2009)
	  | 35 lines Fix incorrect parsing in chan_gtalk when xmpp contains
	  extra whitespaces To drill into the xmpp to find the capabilities
	  between channels, chan_gtalk calls iks_child() and iks_next().
	  iks_child() and iks_next() are functions in the iksemel xml
	  parsing library that traverse xml nodes. The bug here is that
	  both iks_child() and iks_next() will return the next iks_struct
	  node *regardless* of type. chan_gtalk expects the next node to be
	  of type IKS_TAG, which in most cases, it is, but in this case (a
	  call being made from the Empathy IM client), there exists
	  iks_struct nodes which are not IKS_TAG data (they are extraneous
	  whitespaces), and chan_gtalk doesn't handle that case, so
	  capabilities don't match, and a call cannot be made.
	  iks_first_tag() and iks_next_tag(), on the other hand, will not
	  return the very next iks_struct, but will check to see if the
	  next iks_struct is of type IKS_TAG. If it isn't, it will be
	  skipped, and the next struct of type IKS_TAG it finds will be
	  returned. This assures that chan_gtalk will find the iks_struct
	  it is looking for. This fix simply changes all calls to
	  iks_child() and iks_next() to become calls to iks_first_tag() and
	  iks_next_tag(), which resolves the capability matching. The
	  following is a payload listing from Empathy, which, due to the
	  extraneous whitespace, will not be parsed correctly by iksemel:
	  <iq from='dbrooksjab@235-22-24-10/Telepathy'
	  to='astjab@235-22-24-10/asterisk' type='set' id='542757715704'>
	  <session xmlns='http://www.google.com/session'
	  initiator='dbrooksjab@235-22-24-10/Telepathy' type='initiate'
	  id='1837267342'> <description
	  xmlns='http://www.google.com/session/phone'> <payload-type
	  clockrate='16000' name='speex' id='96'/> <payload-type
	  clockrate='8000' name='PCMA' id='8'/> <payload-type
	  clockrate='8000' name='PCMU' id='0'/> <payload-type
	  clockrate='90000' name='MPA' id='97'/> <payload-type
	  clockrate='16000' name='SIREN' id='98'/> <payload-type
	  clockrate='8000' name='telephone-event' id='99'/> </description>
	  </session> </iq> Review: http://reviewboard.digium.com/r/181/
	  ........ ................

2009-03-31 14:57 +0000 [r185263]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c, /: Merged revisions 185261 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r185261 |
	  russell | 2009-03-31 09:53:45 -0500 (Tue, 31 Mar 2009) | 5 lines
	  Don't free() an astobj2 object. (closes issue #14672) Reported
	  by: makoto ........

2009-03-31 14:10 +0000 [r185199]  Joshua Colp <jcolp@digium.com>

	* /, main/audiohook.c: Merged revisions 185197 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185197 | file | 2009-03-31 11:07:36 -0300 (Tue, 31 Mar 2009) |
	  15 lines Merged revisions 185196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185196 | file | 2009-03-31 11:06:39 -0300 (Tue, 31 Mar 2009) | 8
	  lines Fix crash when moving audiohooks between channels. Handle
	  the scenario where we are called to move audiohooks between
	  channels and the source channel does not actually have any on it.
	  (closes issue #14734) Reported by: corruptor ........
	  ................

2009-03-30 20:50 +0000 [r185126-185127]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn_config.c, /, configs/misdn.conf.sample: Merged
	  revisions 185123 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185123 | rmudgett | 2009-03-30 15:42:14 -0500 (Mon, 30 Mar 2009)
	  | 9 lines Merged revisions 185121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185121 | rmudgett | 2009-03-30 15:40:11 -0500 (Mon, 30 Mar 2009)
	  | 1 line Update the channel allocation method documentation.
	  ........ ................

	* channels/misdn/isdn_lib.c, /: Merged revisions 185122 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r185122 | rmudgett | 2009-03-30 15:41:24 -0500
	  (Mon, 30 Mar 2009) | 26 lines Merged revisions 185120 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185120 | rmudgett | 2009-03-30 15:38:11 -0500 (Mon, 30 Mar 2009)
	  | 19 lines Make chan_misdn BRI TE side normally defer channel
	  selection to the NT side. Channel allocation collisions are not
	  handled by chan_misdn very well. This patch simply avoids the
	  problem for BRI only. For PRI, allocation collisions are still
	  possible but less likely since there are simply more channels
	  available and each end could use a different allocation strategy.
	  misdn.conf options available: te_choose_channel - Use to force
	  the TE side to allocate channels. method - Specify the channel
	  allocation strategy. (closes issue #13488) Reported by:
	  Christian_Pinedo Patches: isdn_lib.patch.txt uploaded by crich
	  Tested by: crich, siepkes, festr ........ ................

2009-03-30 16:47 +0000 [r185088]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 185072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r185072 | mmichelson | 2009-03-30 11:26:48 -0500 (Mon, 30 Mar
	  2009) | 45 lines Merged revisions 185031 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r185031 | mmichelson | 2009-03-30 11:17:35 -0500 (Mon, 30 Mar
	  2009) | 39 lines Fix queue weight behavior so that calls in
	  low-weight queues are not inappropriately blocked. (This is
	  copied and pasted from the review request I made for this patch)
	  Asterisk has some odd behavior when queue weights are used. The
	  current logic used when potentially calling a queue member is: If
	  the member we are going to call is part of another queue and
	  _that other queue has any callers in it_ and has a higher weight
	  than the queue we are calling from, then don't try to contact
	  that member. The issue here is what I have marked with
	  underscores. If the higher-weighted queue has any callers in it
	  at all, then the queue member will be unreachable from the
	  lower-weighted queue. This has the potential to be really really
	  bad if using a queue strategy, such as leastrecent or
	  fewestcalls, with the potential to call the same member
	  repeatedly. The fix proposed by garychen on issue 13220 is very
	  simple and, as far as I can see, works well for this situation.
	  With this set of changes, the logic used becomes: If the member
	  we are going to call is part of another queue, the other queue
	  has a higher weight than the queue we are calling from, and the
	  higher weight queue has at least as many callers as available
	  members, then do not try to contact the queue member. If the
	  higher weighted queue has fewer callers than available members,
	  then there is no reason to deny the call to this member since the
	  other queue can afford to spare a member. Since the fix involved
	  writing a generic function for determining the number of
	  available members in the queue, I also modified the is_our_turn
	  function to make use of the new num_available_members function to
	  determine if it is our turn to try calling a member. There is one
	  small behavior change. Before writing this patch, if you had
	  autofill disabled, then if you were the head caller in a queue,
	  you would automatically be told that it was your turn to try
	  calling a member. This did not take into account whether there
	  were actually any queue members available to take the call. Now
	  we actually make sure there is at least one member available to
	  take the call if autofill is disabled. (closes issue #13220)
	  Reported by: garychen Review:
	  http://reviewboard.digium.com/r/202/ ........ ................

2009-03-30 14:41 +0000 [r184950]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 184948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184948 | file | 2009-03-30 11:37:47 -0300 (Mon, 30 Mar 2009) |
	  21 lines Merged revisions 184947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184947 | file | 2009-03-30 11:35:47 -0300 (Mon, 30 Mar 2009) |
	  14 lines Improve our handling of T38 in the initial INVITE from a
	  device. We now answer with matching media streams to what is
	  requested. If an INVITE is received with both a T38 and RTP media
	  stream this means we answer with both. For any outgoing calls
	  created as a result of this inbound one no T38 is requested in
	  the initial INVITE. Instead if we start receiving udptl packets
	  we trigger a reinvite on the outbound side. (closes issue #12437)
	  Reported by: marsosa Tested by: pinga-fogo, okrief, file, afu
	  Review: http://reviewboard.digium.com/r/208/ ........
	  ................

2009-03-30 13:57 +0000 [r184912]  Russell Bryant <russell@digium.com>

	* channels/h323/Makefile.in, /: Merged revisions 184910 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r184910 | russell | 2009-03-30 08:55:44 -0500 (Mon, 30
	  Mar 2009) | 4 lines Fix build error when chan_h323 is not being
	  built. (reported by cai1982 in #asterisk-dev) ........

2009-03-29 05:52 +0000 [r184840-184845]  Russell Bryant <russell@digium.com>

	* apps/app_followme.c, /: Merged revisions 184843 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184843 | russell | 2009-03-29 00:52:20 -0500 (Sun, 29 Mar 2009)
	  | 13 lines Merged revisions 184842 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184842 | russell | 2009-03-29 00:51:55 -0500 (Sun, 29 Mar 2009)
	  | 5 lines Ensure targs variable is fully initialized. (closes
	  issue #14758) Reported by: tim_ringenbach ........
	  ................

	* channels/Makefile, /: Merged revisions 184838 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184838 |
	  russell | 2009-03-29 00:32:04 -0500 (Sun, 29 Mar 2009) | 8 lines
	  Simplify chan_h323 build to not require a second run of "make".
	  (closes issue #14715) Reported by: jthurman Patches:
	  h323-makefile-1.6.2.0-beta1.patch uploaded by jthurman (license
	  614) Tested by: tzafrir, russell ........

2009-03-27 19:17 +0000 [r184765]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_iax2.c, main/timing.c, main/channel.c, /,
	  include/asterisk/timing.h, include/asterisk/channel.h: Merged
	  revisions 184762 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184762 |
	  kpfleming | 2009-03-27 14:10:32 -0500 (Fri, 27 Mar 2009) | 12
	  lines Improve timing interface to remember which provider
	  provided a timer The ability to load/unload timing interfaces is
	  nice, but it means that when a timer is allocated, it may come
	  from provider A, but later provider B becomes the 'preferred'
	  provider. If this happens, all timer API calls on the timer that
	  was provided by provider A will actually be handed to provider B,
	  which will say WTF and return an error. This patch changes the
	  timer API to include a pointer to the provider of the timer
	  handle so that future operations on the timer will be forwarded
	  to the proper provider. (closes issue #14697) Reported by: moy
	  Review: http://reviewboard.digium.com/r/211/ ........

2009-03-27 18:09 +0000 [r184728]  Russell Bryant <russell@digium.com>

	* main/manager.c, /, apps/app_minivm.c: Merged revisions 184726 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r184726 | russell | 2009-03-27 13:04:43 -0500 (Fri, 27
	  Mar 2009) | 2 lines Use ast_random() instead of rand() to ensure
	  we use the best RNG available. ........

2009-03-27 15:54 +0000 [r184675]  Joshua Colp <jcolp@digium.com>

	* /, res/res_agi.c: Merged revisions 184673 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184673 |
	  file | 2009-03-27 12:46:46 -0300 (Fri, 27 Mar 2009) | 7 lines Fix
	  speech structure leak in the AGI speech recognition integration.
	  The AGI dialplan applications did not destroy the speech
	  structure automatically if it was not destroyed by the running
	  AGI script. They will now do this. (issue LUMENVOX-15) ........

2009-03-27 14:04 +0000 [r184631]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, include/asterisk/utils.h, main/pbx.c, /,
	  res/ais/evt.c, main/event.c, pbx/pbx_dundi.c: Merged revisions
	  184630 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184630 |
	  russell | 2009-03-27 09:00:18 -0500 (Fri, 27 Mar 2009) | 2 lines
	  Change g_eid to ast_eid_default. ........

2009-03-27 13:22 +0000 [r184587]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 184566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184566 | file | 2009-03-27 10:15:26 -0300 (Fri, 27 Mar 2009) |
	  16 lines Merged revisions 184565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184565 | file | 2009-03-27 10:06:45 -0300 (Fri, 27 Mar 2009) | 9
	  lines Fix an issue where nat=yes would not always take effect for
	  the RTP session on outgoing calls. If calls were placed using an
	  IP address or hostname the global nat setting was copied over but
	  was not set on the RTP session itself. This caused the RTP stack
	  to not perform symmetric RTP actions. (closes issue #14546)
	  Reported by: acunningham ........ ................

2009-03-27 02:25 +0000 [r184513-184547]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 184531 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r184531 | russell | 2009-03-26 21:20:23 -0500 (Thu, 26 Mar 2009)
	  | 20 lines Fix some issues with rwlock corruption that caused
	  deadlock like symptoms. When dvossel and I were doing some load
	  testing last week, we noticed that we could make Asterisk trunk
	  lock up instantly when we started generating a bunch of calls.
	  The backtraces of locked threads were bizarre, and many were
	  stuck on an _unlock_ of an rwlock. The changes are: 1) Fix a
	  number of places where a backtrace would be loaded into an
	  invalid index of the backtrace array. It's an off by one error,
	  which ends up writing over the rwlock itself. 2) Ensure that in
	  the array of held locks, we NULL out an index once it is not
	  being used so that it's not confusing when analyzing its
	  contents. 3) Remove a bunch of logging referring to an rwlock
	  operating being done with "deep reentrancy". It is normal for
	  _many_ threads to hold a read lock on an rwlock. ........

	* /, main/file.c: Merged revisions 184515 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184515 |
	  russell | 2009-03-26 20:40:28 -0500 (Thu, 26 Mar 2009) | 2 lines
	  Don't act surprised if we get a -1 indication. ........

	* include/asterisk/heap.h, /, main/heap.c: Merged revisions 184512
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r184512 | russell | 2009-03-26 20:35:56 -0500 (Thu, 26
	  Mar 2009) | 2 lines Pass more useful information through to lock
	  tracking when DEBUG_THREADS is on. ........

2009-03-26 22:19 +0000 [r184451]  Kevin P. Fleming <kpfleming@digium.com>

	* sounds/Makefile, /: Merged revisions 184448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184448 | kpfleming | 2009-03-26 17:18:14 -0500 (Thu, 26 Mar
	  2009) | 9 lines Merged revisions 184447 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184447 | kpfleming | 2009-03-26 17:17:32 -0500 (Thu, 26 Mar
	  2009) | 3 lines use new, improved 8kHz prompts ........
	  ................

2009-03-26 21:18 +0000 [r184394]  David Vossel <dvossel@digium.com>

	* /, apps/app_test.c: Merged revisions 184389 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184389 | dvossel | 2009-03-26 16:09:37 -0500 (Thu, 26 Mar 2009)
	  | 14 lines Merged revisions 184388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184388 | dvossel | 2009-03-26 16:07:32 -0500 (Thu, 26 Mar 2009)
	  | 8 lines pri loop TestClient/TestServer fails: server SEND DTMF
	  8 app_test was failing when sending the last DTMF digit, 8,
	  because of the 100ms pause issued after DTMF is sent. During this
	  pause the other side would hang up causing the test to look like
	  it failed. Now the other side waits a second before hanging up.
	  (closes issue #12442) Reported by: tzafrir ........
	  ................

2009-03-25 22:13 +0000 [r184325-184345]  Russell Bryant <russell@digium.com>

	* /, main/event.c: Merged revisions 184344 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184344 |
	  russell | 2009-03-25 17:11:35 -0500 (Wed, 25 Mar 2009) | 2 lines
	  Remove unneeded AST_LIST_ENTRY() and comment on the purpose of
	  ast_event_ref. ........

	* channels/chan_iax2.c, channels/chan_dahdi.c,
	  include/asterisk/event.h, channels/chan_skinny.c, res/ais/evt.c,
	  main/event.c, include/asterisk/strings.h, main/asterisk.c,
	  channels/chan_mgcp.c, apps/app_voicemail.c,
	  channels/chan_unistim.c, include/asterisk/devicestate.h, /,
	  channels/chan_sip.c, main/devicestate.c,
	  include/asterisk/_private.h: Merged revisions 184339 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r184339 | russell | 2009-03-25 16:57:19 -0500 (Wed, 25 Mar 2009)
	  | 35 lines Improve performance of the ast_event cache
	  functionality. This code comes from
	  svn/asterisk/team/russell/event_performance/. Here is a summary
	  of the changes that have been made, in order of both invasiveness
	  and performance impact, from smallest to largest. 1) Asterisk
	  1.6.1 introduces some additional logic to be able to handle
	  distributed device state. This functionality comes at a cost. One
	  relatively minor change in this patch is that the extra
	  processing required for distributed device state is now
	  completely bypassed if it's not needed. 2) One of the things that
	  I noticed when profiling this code was that a _lot_ of time was
	  spent doing string comparisons. I changed the way strings are
	  represented in an event to include a hash value at the front. So,
	  before doing a string comparison, we do an integer comparison on
	  the hash. 3) Finally, the code that handles the event cache has
	  been re-written. I tried to do this in a such a way that it had
	  minimal impact on the API. I did have to change one API call,
	  though - ast_event_queue_and_cache(). However, the way it works
	  now is nicer, IMO. Each type of event that can be cached (MWI,
	  device state) has its own hash table and rules for hashing and
	  comparing objects. This by far made the biggest impact on
	  performance. For additional details regarding this code and how
	  it was tested, please see the review request. (closes issue
	  #14738) Reported by: russell Review:
	  http://reviewboard.digium.com/r/205/ ........

	* /: add reviewboard:url property.

2009-03-25 19:26 +0000 [r184282]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 184280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184280 |
	  file | 2009-03-25 16:22:06 -0300 (Wed, 25 Mar 2009) | 5 lines Fix
	  issue with a T38 reinvite being sent even if not configured to do
	  so. If we receive a T38 request negotiate control frame we should
	  only attempt to do so if the option is enabled on the dialog.
	  ........

2009-03-25 15:12 +0000 [r184223]  Eliel C. Sardanons <eliels@gmail.com>

	* main/asterisk.c, /: Merged revisions 184220 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184220 | eliel | 2009-03-25 10:38:19 -0400 (Wed, 25 Mar 2009) |
	  19 lines Merged revisions 184188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184188 | eliel | 2009-03-25 10:12:54 -0400 (Wed, 25 Mar 2009) |
	  13 lines Avoid destroying the CLI line when moving the cursor
	  backward and trying to autocomplete. When moving the cursor
	  backward and pressing TAB to autocomplete, a NULL is put in the
	  line and we are loosing what we have already wrote after the
	  actual cursor position. (closes issue #14373) Reported by: eliel
	  Patches: asterisk.c.patch uploaded by eliel (license 64) Tested
	  by: lmadsen ........ ................

2009-03-25 01:55 +0000 [r184149]  Russell Bryant <russell@digium.com>

	* main/timing.c, utils/Makefile, /, include/asterisk/compat.h:
	  Merged revisions 184147 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r184147 |
	  russell | 2009-03-24 20:42:10 -0500 (Tue, 24 Mar 2009) | 5 lines
	  Fix build issues on Mac OSX. (closes issue #14714) Reported by:
	  ygor ........

2009-03-24 22:42 +0000 [r184081]  Mark Michelson <mmichelson@digium.com>

	* apps/app_senddtmf.c, /: Merged revisions 184079 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r184079 | mmichelson | 2009-03-24 17:40:39 -0500 (Tue, 24 Mar
	  2009) | 15 lines Merged revisions 184078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r184078 | mmichelson | 2009-03-24 17:34:45 -0500 (Tue, 24 Mar
	  2009) | 9 lines Change NULL pointer check to be ast_strlen_zero.
	  The 'digit' variable is guaranteed to be non-NULL, so the if
	  statement could never evaluate true. Changing to ast_strlen_zero
	  makes the logic correct. This was found while reviewing
	  ast_channel_ao2 code review. ........ ................

2009-03-24 21:47 +0000 [r184039]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 184037 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r184037 | russell | 2009-03-24 16:40:44 -0500 (Tue, 24 Mar 2009)
	  | 6 lines Exclude slin16, siren7, and siren14 from bandwidth=low
	  and =medium The default codec configuration for chan_iax2 is
	  bandwidth=low. I noticed slin16 being negotiated as the codec in
	  some test calls, but that no longer happens after this change.
	  ........

2009-03-24 15:28 +0000 [r183867-183916]  Tilghman Lesher <tlesher@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 183914 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r183914 | tilghman | 2009-03-24 10:26:42 -0500
	  (Tue, 24 Mar 2009) | 10 lines Merged revisions 183913 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183913 | tilghman | 2009-03-24 10:25:42 -0500 (Tue, 24 Mar 2009)
	  | 3 lines Additionally note that the operator option needs an 'o'
	  extension. (Related to issue #14731) ........ ................

	* /, main/http.c: Merged revisions 183865 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r183865 |
	  tilghman | 2009-03-23 18:28:20 -0500 (Mon, 23 Mar 2009) | 2 lines
	  Allow browsers to cache images and other static content. (This is
	  a regression over 1.4) ........

2009-03-23 18:59 +0000 [r183768]  Mark Michelson <mmichelson@digium.com>

	* res/res_monitor.c, /: Merged revisions 183766 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r183766 | mmichelson | 2009-03-23 13:58:03 -0500 (Mon, 23 Mar
	  2009) | 13 lines Merged revisions 183700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183700 | mmichelson | 2009-03-23 12:59:28 -0500 (Mon, 23 Mar
	  2009) | 7 lines Fix a memory leak in res_monitor.c The only way
	  that this leak would occur is if Monitor were started using the
	  Manager interface and no File: header were given. Discovered
	  while reviewing the ast_channel_ao2 review request. ........
	  ................

2009-03-23 18:12 +0000 [r183703]  Leif Madsen <lmadsen@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 183701 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r183701 | lmadsen | 2009-03-23 14:06:40 -0400 (Mon, 23 Mar 2009)
	  | 7 lines Fixes a documentation error introduced during the CLI
	  cleanup at AstriDevCon 2008. (closes issue #14655) Reported by:
	  ulogic Patches: chan_dahdi.patch uploaded by ulogic (license 728)
	  Tested by: lmadsen ........

2009-03-20 17:08 +0000 [r183563]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 183560 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r183560 | russell | 2009-03-20 12:00:58 -0500
	  (Fri, 20 Mar 2009) | 10 lines Merged revisions 183559 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183559 | russell | 2009-03-20 11:53:25 -0500 (Fri, 20 Mar 2009)
	  | 2 lines Fix a crash in IAX2 registration handling found during
	  load testing with dvossel. ........ ................

2009-03-19 20:33 +0000 [r183438]  David Vossel <dvossel@digium.com>

	* include/asterisk/features.h, apps/app_dial.c, /, main/features.c:
	  Merged revisions 183436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r183436 | dvossel | 2009-03-19 15:30:39 -0500 (Thu, 19 Mar 2009)
	  | 13 lines Merged revisions 183386 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183386 | dvossel | 2009-03-19 14:40:07 -0500 (Thu, 19 Mar 2009)
	  | 6 lines Cleaning up a few things in detect disconnect patch
	  Initialized ast_call_feature in detect_disconnect to avoid
	  accessing uninitialized memory. Cleaned up /param tags in
	  features.h. No longer send dynamic features in
	  ast_feature_detect. issue #11583 ........ ................

2009-03-19 19:19 +0000 [r183333]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 183321 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r183321 | tilghman | 2009-03-19 14:17:31 -0500
	  (Thu, 19 Mar 2009) | 15 lines Merged revisions 183319 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183319 | tilghman | 2009-03-19 14:15:33 -0500 (Thu, 19 Mar 2009)
	  | 8 lines Delay signalling progress until a PRI channel really
	  signals progress. (closes issue #13034) Reported by: klaus3000
	  Patches: 20090316__bug13034.diff.txt uploaded by tilghman
	  (license 14) patch_trunk_183progress_klaus3000.txt uploaded by
	  klaus3000 (license 65) Tested by: klaus3000 ........
	  ................

2009-03-19 18:14 +0000 [r183249]  Russell Bryant <russell@digium.com>

	* main/loader.c, /, configure, include/asterisk/autoconfig.h.in,
	  configure.ac: Merged revisions 183242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r183242 | russell | 2009-03-19 13:00:15 -0500 (Thu, 19 Mar 2009)
	  | 10 lines Merged revisions 183241 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183241 | russell | 2009-03-19 12:52:52 -0500 (Thu, 19 Mar 2009)
	  | 2 lines Remove the use of RTLD_NOLOAD, as it is not behaving
	  like expected. ........ ................

2009-03-19 18:11 +0000 [r183246]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 183244 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r183244 |
	  mmichelson | 2009-03-19 13:10:34 -0500 (Thu, 19 Mar 2009) | 16
	  lines Fix a memory leak associated with queues. For every attempt
	  that app_queue made to place an outbound call to a queue member,
	  we would allocate a queue_end_bridge structure. When the bridge
	  for the call had completed, we would free the structure.
	  Unfortunately not all call attempts actually end up bridged to a
	  member, so we need to be more selective of when to allocate the
	  structure. With this change, the allocation occurs in an area
	  where we can guarantee that the call will be bridged. (closes
	  issue #14680) Reported by: caspy Patches: 14680.patch uploaded by
	  mmichelson (license 60) Tested by: caspy ........

2009-03-19 17:08 +0000 [r183198]  David Vossel <dvossel@digium.com>

	* include/asterisk/features.h, apps/app_dial.c, /, main/features.c:
	  Merged revisions 183172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r183172 | dvossel | 2009-03-19 11:28:33 -0500 (Thu, 19 Mar 2009)
	  | 20 lines Merged revisions 183126 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183126 | dvossel | 2009-03-19 11:15:16 -0500 (Thu, 19 Mar 2009)
	  | 17 lines Allow disconnect feature before a call is bridged
	  feature.conf has a disconnect option. By default this option is
	  set to '*', but it could be anything. If a user wishes to
	  disconnect a call before the other side answers, only '*' will
	  work, regardless if the disconnect option is set to something
	  else. This is because features are unavailable until bridging
	  takes place. The default disconnect option, '*', was hardcoded in
	  app_dial, which doesn't make any sense from a user perspective
	  since they may expect it to be something different. This patch
	  allows features to be detected from outside of the bridge, but
	  not operated on. In this case, the disconnect feature can be
	  detected before briding and handled outside of features.c.
	  (closes issue #11583) Reported by: sobomax Patches:
	  patch-apps__app_dial.c uploaded by sobomax (license 359)
	  11583.latest-patch uploaded by murf (license 17)
	  detect_disconnect.diff uploaded by dvossel (license 671) Tested
	  by: sobomax, dvossel Review: http://reviewboard.digium.com/r/195/
	  ........ ................

2009-03-19 16:09 +0000 [r183121]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 183117 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r183117 | mmichelson | 2009-03-19 11:07:54 -0500 (Thu, 19 Mar
	  2009) | 20 lines Merged revisions 183115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r183115 | mmichelson | 2009-03-19 11:04:02 -0500 (Thu, 19 Mar
	  2009) | 14 lines Fix an issue where cancelled outgoing SIP calls
	  would erroneously report the device as "in use." A user was
	  having an issue where if an outgoing SIP call was canceled, the
	  SIP device would remain in use if we had not received any
	  response to the initial INVITE we sent out. The SIP device would
	  remain in use until the autocongestion timer was exhausted. I
	  tracked down the cause of this to be the section of code I am
	  removing here. I asked several people what the purpose of this
	  code was meant to be, but no one could give me any sort of answer
	  as to why this was here. The person who was having this issue has
	  been using this patch for several months and it has stopped the
	  problems they have had. AST-196 ........ ................

2009-03-19  Leif Madsen <lmadsen@digium.com>

	* Release Asterisk 1.6.1.0-rc3

2009-03-19 15:43 +0000 [r183067-183110]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 183108 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r183108 |
	  file | 2009-03-19 12:37:23 -0300 (Thu, 19 Mar 2009) | 11 lines
	  Improve our triggering of a T38 switchover internally when
	  triggered by a received reinvite. Previously we reached across
	  the channel bridge to get the other party's SIP dialog structure
	  in order to trigger an outgoing reinvite. This is extremely
	  dangerous to do and only works if bridged to another SIP channel.
	  This patch changes this to use the T38 control frame method of
	  requesting a switchover. This change also causes the SIP channel
	  driver to propogate back whether the switchover worked or not
	  instead of blindly accepting the incoming T38 reinvite. Review:
	  http://reviewboard.digium.com/r/200/ ........

	* main/channel.c, /: Merged revisions 183057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r183057 |
	  file | 2009-03-18 19:22:56 -0300 (Wed, 18 Mar 2009) | 6 lines Fix
	  an issue where a T38 control frame would get dropped. If two
	  channels were bridged together using a generic bridge the T38
	  control frame would get passed up instead of being indicated on
	  the other channel. ........

2009-03-18 21:19 +0000 [r183030]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/h323/ast_h323.cxx: Merged revisions 183028 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r183028 | jpeeler | 2009-03-18 16:18:27 -0500 (Wed, 18
	  Mar 2009) | 4 lines Add some code removed by mistake from commit
	  182722 that works around a file descriptor leak in versions of
	  PWLib prior to 1.12.0. ........

2009-03-18 14:32 +0000 [r182946]  Russell Bryant <russell@digium.com>

	* main/poll.c, main/io.c, main/channel.c, channels/chan_skinny.c,
	  configure, apps/app_mp3.c, res/res_agi.c,
	  include/asterisk/poll-compat.h, channels/chan_alsa.c,
	  main/asterisk.c, apps/app_nbscat.c, /, main/Makefile,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  include/asterisk/io.h, main/utils.c, include/asterisk/channel.h:
	  Merged revisions 182847 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r182847 | russell | 2009-03-17 21:28:55 -0500 (Tue, 17 Mar 2009)
	  | 52 lines Merged revisions 182810 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r182810 | russell | 2009-03-17 21:09:13 -0500 (Tue, 17 Mar 2009)
	  | 44 lines Fix cases where the internal poll() was not being used
	  when it needed to be. We have seen a number of problems caused by
	  poll() not working properly on Mac OSX. If you search around,
	  you'll find a number of references to using select() instead of
	  poll() to work around these issues. In Asterisk, we've had poll.c
	  which implements poll() using select() internally. However, we
	  were still getting reports of problems. vadim investigated a bit
	  and realized that at least on his system, even though we were
	  compiling in poll.o, the system poll() was still being used. So,
	  the primary purpose of this patch is to ensure that we're using
	  the internal poll() when we want it to be used. The changes are:
	  1) Remove logic for when internal poll should be used from the
	  Makefile. Instead, put it in the configure script. The logic in
	  the configure script is the same as it was in the Makefile.
	  Ideally, we would have a functionality test for the problem, but
	  that's not actually possible, since we would have to be able to
	  run an application on the _target_ system to test poll()
	  behavior. 2) Always include poll.o in the build, but it will be
	  empty if AST_POLL_COMPAT is not defined. 3) Change uses of poll()
	  throughout the source tree to ast_poll(). I feel that it is good
	  practice to give the API call a new name when we are changing its
	  behavior and not using the system version directly in all cases.
	  So, normally, ast_poll() is just redefined to poll(). On systems
	  where AST_POLL_COMPAT is defined, ast_poll() is redefined to
	  ast_internal_poll(). 4) Change poll() in main/poll.c to be
	  ast_internal_poll(). It's worth noting that any code that still
	  uses poll() directly will work fine (if they worked fine before).
	  So, for example, out of tree modules that are using poll() will
	  not stop working or anything. However, for modules to work
	  properly on Mac OSX, ast_poll() needs to be used. (closes issue
	  #13404) Reported by: agalbraith Tested by: russell, vadim
	  http://reviewboard.digium.com/r/198/ ........ ................

2009-03-17 20:52 +0000 [r182724]  Jeff Peeler <jpeeler@digium.com>

	* channels/h323/chan_h323.h, channels/h323/compat_h323.cxx, /,
	  channels/h323/ast_h323.cxx, configure,
	  autoconf/ast_check_openh323.m4, channels/h323/compat_h323.h,
	  channels/chan_h323.c, channels/h323/ast_h323.h: Merged revisions
	  182722 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182722 |
	  jpeeler | 2009-03-17 15:47:31 -0500 (Tue, 17 Mar 2009) | 15 lines
	  Allow H.323 Plus library to be used in addition to the OpenH323
	  library Chan_h323 can now be compiled against both the previously
	  supported versions of OpenH323 as well as the current H.323 Plus
	  (version 1.20.2). The configure script has been modified to look
	  in the default install location of h323 to hopefully help avoid
	  using the environment variables OPENH323DIR and PWLIBDIR. Also,
	  the CLI command "h323 show version" has been added which
	  indicates which version of h323 is in use. (closes issue #11261)
	  Reported by: vhatz Patches: asterisk-1.6.0.6-h323plus.patch
	  uploaded by jthurman (license 614) ........

2009-03-17 15:31 +0000 [r182570]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 182553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182553 |
	  russell | 2009-03-17 10:22:12 -0500 (Tue, 17 Mar 2009) | 5 lines
	  Tweak the handling of the frame list inside of ast_answer(). This
	  does not change any behavior, but moves the frames from the local
	  frame list back to the channel read queue using an O(n) algorithm
	  instead of O(n^2). ........

2009-03-17 15:00 +0000 [r182527-182533]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, /: Merged revisions 182530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182530 |
	  kpfleming | 2009-03-17 09:59:33 -0500 (Tue, 17 Mar 2009) | 2
	  lines correct logic flaw in ast_answer() changes in r182525
	  ........

	* main/channel.c, /, main/features.c, include/asterisk/channel.h:
	  Merged revisions 182525 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182525 |
	  kpfleming | 2009-03-17 09:38:11 -0500 (Tue, 17 Mar 2009) | 11
	  lines Improve behavior of ast_answer() to not lose incoming
	  frames ast_answer(), when supplied a delay before returning to
	  the caller, use ast_safe_sleep() to implement the delay.
	  Unfortunately during this time any incoming frames are discarded,
	  which is problematic for T.38 re-INVITES and other sorts of
	  channel operations. When a delay is not passed to ast_answer(),
	  it still delays for up to 500 milliseconds, waiting for media to
	  arrive. Again, though, it discards any control frames, or
	  non-voice media frames. This patch rectifies this situation, by
	  storing all incoming frames during the delay period on a list,
	  and then requeuing them onto the channel before returning to the
	  caller. http://reviewboard.digium.com/r/196/ ........

2009-03-17 05:54 +0000 [r182452]  Tilghman Lesher <tlesher@digium.com>

	* main/db.c, /: Merged revisions 182450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r182450 | tilghman | 2009-03-17 00:51:54 -0500 (Tue, 17 Mar 2009)
	  | 14 lines Merged revisions 182449 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r182449 | tilghman | 2009-03-17 00:50:52 -0500 (Tue, 17 Mar 2009)
	  | 7 lines Fix race in astdb The underlying db1 implementation
	  does not fully isolate the pages retrieved from astdb, so the
	  lock protecting accesses needs to be extended until the copy from
	  the shared memory structure is done. (closes issue #14682)
	  Reported by: makoto ........ ................

2009-03-16 17:53 +0000 [r182284]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 182282 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r182282 | dvossel | 2009-03-16 12:49:58 -0500
	  (Mon, 16 Mar 2009) | 13 lines Merged revisions 182281 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r182281 | dvossel | 2009-03-16 12:47:42 -0500 (Mon, 16 Mar 2009)
	  | 7 lines Randomize IAX2 encryption padding The 16-32 byte random
	  padding at the beginning of an encrypted IAX2 frame turns out to
	  not be all that random at all. This patch calls ast_random to
	  fill the padding buffer with random data. The padding is
	  randomized at the beginning of every encrypted call and for every
	  encrypted retransmit frame. Review:
	  http://reviewboard.digium.com/r/193/ ........ ................

2009-03-16 17:38 +0000 [r182280]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /, funcs/func_env.c: Merged revisions
	  182211,182278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r182211 | tilghman | 2009-03-16 10:50:55 -0500 (Mon, 16 Mar 2009)
	  | 14 lines Merged revisions 182208 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r182208 | tilghman | 2009-03-16 10:39:15 -0500 (Mon, 16 Mar 2009)
	  | 7 lines Fixup glare detection, to fix a memory leak of a local
	  pvt structure. (closes issue #14656) Reported by: caspy Patches:
	  20090313__bug14656__2.diff.txt uploaded by tilghman (license 14)
	  Tested by: caspy ........ ................ r182278 | tilghman |
	  2009-03-16 12:33:38 -0500 (Mon, 16 Mar 2009) | 7 lines Fix an
	  off-by-one error in the FILE() function, and extend FILE()'s
	  length parameter to work like variable substitution. Previously,
	  FILE() returned one less character than specified, due to the
	  terminating NULL. Both the offset and length parameters now
	  behave identically to the way variable substitution offsets and
	  lengths also work. (closes issue #14670) Reported by: BMC
	  ................

2009-03-16 14:00 +0000 [r182173]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 182171 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182171 |
	  file | 2009-03-16 10:58:24 -0300 (Mon, 16 Mar 2009) | 7 lines Fix
	  a memory leak in the ast_answer / __ast_answer API call. For a
	  channel that is not yet answered this API call will wait until a
	  voice frame is received on the channel before returning. It does
	  this by waiting for frames on the channel and reading them in.
	  The frames read in were not freed when they should have been.
	  ........

2009-03-13 21:27 +0000 [r182068-182123]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 182121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182121 |
	  mmichelson | 2009-03-13 16:26:20 -0500 (Fri, 13 Mar 2009) | 6
	  lines Change faulty comparison used when announcing average hold
	  minutes and seconds (closes issue #14227) Reported by: caspy
	  ........

	* /, main/features.c: Merged revisions 182029 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r182029 | mmichelson | 2009-03-13 12:26:43 -0500 (Fri, 13 Mar
	  2009) | 41 lines Merged revisions 181990 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181990 | mmichelson | 2009-03-13 12:12:32 -0500 (Fri, 13 Mar
	  2009) | 35 lines Check the DYNAMIC_FEATURES of both the chan and
	  peer when interpreting DTMF. Dynamic features defined in the
	  applicationmap section of features.conf allow one to specify
	  whether the caller, callee, or both have the ability to use the
	  feature. The documentation in the features.conf.sample file could
	  be interpreted to mean that one only needs to set the
	  DYNAMIC_FEATURES channel variable on the calling channel in order
	  to allow for the callee to be able to use the features which he
	  should have permission to use. However, the DYNAMIC_FEATURES
	  variable would only be read from the channel of the participant
	  that pressed the DTMF sequence to activate the feature. The
	  result of this was that the callee was unable to use dynamic
	  features unless the dialplan writer had taken measures to be sure
	  that the DYNAMIC_FEATURES variable was set on the callee's
	  channel. This commit changes the behavior of
	  ast_feature_interpret to concatenate the values of
	  DYNAMIC_FEATURES from both parties involved in the bridge. The
	  features themselves determine who has permission to use them, so
	  there is no reason to believe that one side of the bridge could
	  gain the ability to perform an action that they should not have
	  the ability to perform. Kevin Fleming pointed out on the
	  asterisk-users list that the typical way that this was worked
	  around in the past was by setting _DYNAMIC_FEATURES on the
	  calling channel so that the value would be inherited by the
	  called channel. While this works, the documentation alone is not
	  enough to figure out why this is necessary for the callee to be
	  able to use dynamic features. In this particular case, changing
	  the code to match the documentation is safe, easy, and will
	  generally make things easier for people for future installations.
	  This bug was originally reported on the asterisk-users list by
	  David Ruggles. (closes issue #14657) Reported by: mmichelson
	  Patches: 14657.patch uploaded by mmichelson (license 60) ........
	  ................

2009-03-13 17:29 +0000 [r182042]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 182022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r182022 |
	  file | 2009-03-13 14:25:09 -0300 (Fri, 13 Mar 2009) | 7 lines Fix
	  an issue with requesting a T38 reinvite before the call is
	  answered. The code responsible for sending the T38 reinvite did
	  not check if an INVITE was already being handled. This caused
	  things to get confused and the call to fail. The code now defers
	  sending the T38 reinvite until the current INVITE is done being
	  handled. (issue AST-191) ........

2009-03-13 16:58 +0000 [r181987]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 181985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181985 |
	  kpfleming | 2009-03-13 11:55:38 -0500 (Fri, 13 Mar 2009) | 1 line
	  improve a bit of suboptimal code ........

2009-03-12 21:45 +0000 [r181771-181849]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 181846 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181846 |
	  mmichelson | 2009-03-12 16:43:51 -0500 (Thu, 12 Mar 2009) | 3
	  lines Run the macro on the queue member's channel when he
	  answers, not the caller's channel. ........

	* /, channels/chan_sip.c: Merged revisions 181769 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r181769 | mmichelson | 2009-03-12 13:30:58 -0500 (Thu, 12 Mar
	  2009) | 28 lines Merged revisions 181768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181768 | mmichelson | 2009-03-12 13:29:48 -0500 (Thu, 12 Mar
	  2009) | 22 lines Properly send a 487 on an INVITE we have not
	  responded to if we receive a BYE. If we receive an INVITE from an
	  endpoint and then later receive a BYE from that same endpoint
	  before we have sent a final response for the INVITE, then we need
	  to respond to the INVITE with a 487. There was logic in the code
	  prior to this commit which seemed to exist solely to handle this
	  situation, but there was one condition in an if statement which
	  was incorrect. The only way we would send a 487 was if the
	  sip_pvt had no owner channel. This made no sense since we created
	  the owner channel when we received the INVITE, meaning that the
	  majority of the time we would never send the 487. The 487 being
	  sent should not rely on whether we have created a channel. Its
	  delivery should be dependent on the current state of the initial
	  INVITE transaction. With this commit, that logic is now correctly
	  in place. (closes issue #14149) Reported by: legranjl Patches:
	  14149.patch uploaded by mmichelson (license 60) Tested by:
	  legranjl ........ ................

2009-03-12 18:07 +0000 [r181733]  Tilghman Lesher <tlesher@digium.com>

	* /, main/translate.c: Merged revisions 181731 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181731 |
	  tilghman | 2009-03-12 12:32:13 -0500 (Thu, 12 Mar 2009) | 9 lines
	  Adjust translation table column widths based upon the translation
	  times. Previously, only 5 columns were displayed, and if a
	  translation time exceeded 99,999 useconds, it would be displayed
	  as 0, instead of its actual time. (closes issue #14532) Reported
	  by: pj Patches: 20090311__bug14532.diff.txt uploaded by tilghman
	  (license 14) Tested by: pj ........

2009-03-12 16:58 +0000 [r181614-181667]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 181665 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r181665 | file | 2009-03-12 13:56:58 -0300 (Thu,
	  12 Mar 2009) | 9 lines Merged revisions 181664 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181664 | file | 2009-03-12 13:56:20 -0300 (Thu, 12 Mar 2009) | 2
	  lines Fix incorrect usage of strncasecmp... I really meant to use
	  strcasecmp. ........ ................

	* /, res/res_musiconhold.c: Merged revisions 181661 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r181661 | file | 2009-03-12 13:53:52 -0300 (Thu,
	  12 Mar 2009) | 19 lines Merged revisions 181659-181660 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181659 | file | 2009-03-12 13:50:37 -0300 (Thu, 12 Mar 2009) | 8
	  lines Fix another scenario where depending on configuration the
	  stream would not get read. For custom commands we don't know
	  whether the audio is coming from a stream or not so we are going
	  to have to read the data despite no channels. (closes issue
	  #14416) Reported by: caspy ........ r181660 | file | 2009-03-12
	  13:52:45 -0300 (Thu, 12 Mar 2009) | 2 lines Fix logic flaw in
	  previous commit. ........ ................

	* /, res/res_musiconhold.c: Merged revisions 181656 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r181656 | file | 2009-03-12 13:32:20 -0300 (Thu,
	  12 Mar 2009) | 17 lines Merged revisions 181655 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181655 | file | 2009-03-12 13:29:19 -0300 (Thu, 12 Mar 2009) |
	  10 lines Fix issue with streaming MOH failing if nobody is
	  listening. When a music class is setup to actually provide music
	  on hold from a stream we need to constantly read audio from it
	  since it will constantly be providing audio. This is now done
	  despite there being no channels listening to it. (closes issue
	  #14416) Reported by: caspy ........ ................

	* apps/app_dial.c, /: Merged revisions 181612 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181612 |
	  file | 2009-03-12 10:24:12 -0300 (Thu, 12 Mar 2009) | 5 lines Fix
	  crash when sleep and retries argument was not given to RetryDial
	  application. (closes issue #14647) Reported by: sherpya ........

2009-03-12 01:05 +0000 [r181544]  Richard Mudgett <rmudgett@digium.com>

	* /, build_tools/make_version: Merged revisions 181542 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r181542 | rmudgett | 2009-03-11 20:00:29 -0500 (Wed, 11 Mar 2009)
	  | 1 line Use the correct branch integrated property when
	  generating the version string ........

2009-03-11 23:21 +0000 [r181521]  Michiel van Baak <michiel@vanbaak.info>

	* /, configs/sip.conf.sample: Merged revisions 181499 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk Provide
	  correct hint to debug SIP trouble in the default config (closes
	  issue #14646) Reported by: strk

2009-03-11 22:27 +0000 [r181474]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 181465 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181465 |
	  russell | 2009-03-11 17:25:57 -0500 (Wed, 11 Mar 2009) | 2 lines
	  Make handling of the BRIDGE_PLAY_SOUND variable thread-safe.
	  ........

2009-03-11 22:23 +0000 [r181457]  Jason Parker <jparker@digium.com>

	* /, configure, configure.ac: Merged revisions 181444 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r181444 | qwell | 2009-03-11 17:20:13 -0500
	  (Wed, 11 Mar 2009) | 11 lines Merged revisions 181436 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181436 | qwell | 2009-03-11 17:18:42 -0500 (Wed, 11 Mar 2009) |
	  4 lines Allow prefix to set localstatedir (when used and
	  different from the default). This is similar to the /etc change
	  that was made for the non-FreeBSD case. ........ ................

2009-03-11 22:16 +0000 [r181426-181430]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 181428 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181428 |
	  russell | 2009-03-11 17:14:55 -0500 (Wed, 11 Mar 2009) | 2 lines
	  Make handling of the BRIDGEPVTCALLID variable thread-safe.
	  ........

	* main/channel.c, /: Merged revisions 181424 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r181424 | russell | 2009-03-11 16:49:29 -0500 (Wed, 11 Mar 2009)
	  | 17 lines Merged revisions 181423 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181423 | russell | 2009-03-11 16:42:58 -0500 (Wed, 11 Mar 2009)
	  | 9 lines Make code that updates BRIDGEPEER variable thread-safe.
	  It is not safe to read the name field of an ast_channel without
	  the channel locked. This patch fixes some places in channel.c
	  where this was being done, and lead to crashes related to
	  masquerades. (closes issue #14623) Reported by: guillecabeza
	  ........ ................

2009-03-11 17:40 +0000 [r181373]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, channels/iax2-parser.h, /: Merged revisions
	  181371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r181371 | dvossel | 2009-03-11 12:34:57 -0500 (Wed, 11 Mar 2009)
	  | 17 lines Merged revisions 181340 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181340 | dvossel | 2009-03-11 12:25:31 -0500 (Wed, 11 Mar 2009)
	  | 11 lines encrypted IAX2 during packet loss causes decryption to
	  fail on retransmitted frames If an iax channel is encrypted, and
	  a retransmit frame is sent, that packet's iseqno is updated while
	  it is encrypted. This causes the entire frame to be corrupted.
	  When the corrupted frame is sent, the other side decrypts it and
	  sends a VNAK back because the decrypted frame doesn't make any
	  sense. When we get the VNAK, we look through the sent queue and
	  send the same corrupted frame causing a loop. To fix this,
	  encrypted frames requiring retransmission are decrypted, updated,
	  then re-encrypted. Since key-rotation may change the key held by
	  the pvt struct, the keys used for encryption/decryption are held
	  within the iax_frame to guarantee they remain correct. (closes
	  issue #14607) Reported by: stevenla Tested by: dvossel Review:
	  http://reviewboard.digium.com/r/192/ ........ ................

2009-03-11 17:29 +0000 [r181298-181359]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 181345 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r181345 | file | 2009-03-11 14:26:40 -0300 (Wed, 11 Mar 2009) |
	  21 lines Merged revisions 181328 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181328 | file | 2009-03-11 14:22:52 -0300 (Wed, 11 Mar 2009) |
	  14 lines Fix issue where an attended transfer could not be
	  completed under a rare scenario. When completing an attended
	  transfer chan_sip does a check to make sure the extension in the
	  URI portion of the Refer-To header is a local valid extension. We
	  don't actually need to check this since we know for sure the
	  other channel is already up and talking to the extension. Some
	  devices do not put the extension in the Refer-To header either,
	  which can cause the extension check to fail. We now no longer do
	  this check if it is an attended transfer. (closes issue #14628)
	  Reported by: sverre Patches: 14628.diff uploaded by file (license
	  11) ........ ................

	* /, channels/chan_sip.c: Merged revisions 181296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r181296 | file | 2009-03-11 13:40:48 -0300 (Wed, 11 Mar 2009) |
	  16 lines Merged revisions 181295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181295 | file | 2009-03-11 13:36:50 -0300 (Wed, 11 Mar 2009) | 9
	  lines Fix a problem with inband DTMF detection on outgoing SIP
	  calls when dtmfmode=auto. When dtmfmode was set to auto the
	  inband DTMF detector was not setup on outgoing SIP calls. This
	  caused inband DTMF detection to fail. The inband DTMF detector is
	  now setup for both dtmfmode inband and auto. (closes issue
	  #13713) Reported by: makoto ........ ................

2009-03-11 15:54 +0000 [r181199-181283]  Jeff Peeler <jpeeler@digium.com>

	* channels/h323/ast_h323.cxx: add missing header file

	* pbx/pbx_config.c, utils/Makefile, include/asterisk/utils.h,
	  include/asterisk/astmm.h, /, channels/chan_sip.c,
	  channels/h323/ast_h323.cxx, main/features.c, utils/extconf.c:
	  Merged revisions 181135 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r181135 |
	  jpeeler | 2009-03-10 23:06:44 -0500 (Tue, 10 Mar 2009) | 20 lines
	  Fix malloc debug macros to work properly with h323. The main
	  problem here was that cstdlib was undefining free thereby causing
	  the proper debug macros to not be used. ast_h323.cxx has been
	  changed to call ast_free instead to avoid the issue. A few other
	  issues were addressed: - There were a few instances of functions
	  improperly passing ast_free instead of ast_free_ptr. - Some clean
	  up was done to avoid the debug macros intentionally being
	  redefined. (copied below from Kevin's commit, appreciate the
	  help) - disable astmm.h from doing anything when STANDALONE is
	  defined, which is used by the tools in the utils/ directory that
	  use parts of Asterisk header files in hackish ways; also ensure
	  that utils/extconf.c and utils/conf2ael.c are compiled with
	  STANDALONE defined. (closes issue #13593) Reported by: pj
	  ........

2009-03-11 01:04 +0000 [r181035]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 181032-181033 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r181032 | mmichelson | 2009-03-10 19:46:47 -0500
	  (Tue, 10 Mar 2009) | 19 lines Merged revisions 181029,181031 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r181029 | mmichelson | 2009-03-10 19:30:26 -0500 (Tue, 10 Mar
	  2009) | 9 lines Fix incorrect tag checking on transfers when
	  pedantic=yes is enabled. (closes issue #14611) Reported by:
	  klaus3000 Patches: patch_chan_sip_attended_transfer_1.4.23.txt
	  uploaded by klaus3000 (license 65) Tested by: klaus3000 ........
	  r181031 | mmichelson | 2009-03-10 19:32:40 -0500 (Tue, 10 Mar
	  2009) | 3 lines Remove unused variables. ........
	  ................ r181033 | mmichelson | 2009-03-10 19:49:00 -0500
	  (Tue, 10 Mar 2009) | 3 lines Add missing comment that quotes RFC
	  3891 ................

2009-03-10 22:07 +0000 [r180947]  Jason Parker <jparker@digium.com>

	* /, configure, configure.ac, autoconf/ast_prog_sed.m4,
	  autoconf/ast_check_gnu_make.m4: Merged revisions 180944 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r180944 | qwell | 2009-03-10 17:03:41 -0500
	  (Tue, 10 Mar 2009) | 9 lines Merged revisions 180941 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r180941 | qwell | 2009-03-10 17:02:18 -0500 (Tue, 10 Mar
	  2009) | 1 line Make things happier when using autoconf 2.62+
	  ........ ................

2009-03-10 14:42 +0000 [r180802]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, /: Merged revisions 180800 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r180800 |
	  file | 2009-03-10 11:40:38 -0300 (Tue, 10 Mar 2009) | 5 lines
	  Reset the thread local string buffer when handling the UserEvent
	  action. (closes issue #14593) Reported by: JimDickenson ........

2009-03-09 21:22 +0000 [r180740]  Jeff Peeler <jpeeler@digium.com>

	* include/asterisk/heap.h, include/asterisk/http.h,
	  include/asterisk/logger.h, main/tcptls.c,
	  include/asterisk/res_odbc.h, include/asterisk/doxyref.h,
	  include/asterisk/event.h, include/asterisk/audiohook.h,
	  include/asterisk/dsp.h, include/asterisk/lock.h,
	  include/asterisk/udptl.h, include/asterisk/dnsmgr.h,
	  include/asterisk/utils.h, include/asterisk/devicestate.h, /,
	  include/asterisk/taskprocessor.h, include/asterisk/astobj2.h,
	  include/asterisk/channel.h, include/asterisk/tcptls.h,
	  include/asterisk/manager.h, main/enum.c,
	  include/asterisk/callerid.h, include/asterisk/app.h,
	  include/asterisk/linkedlists.h, include/asterisk/sched.h,
	  include/asterisk/datastore.h, include/asterisk/timing.h,
	  include/asterisk/dlinkedlists.h, include/asterisk/pbx.h,
	  include/asterisk/enum.h, include/asterisk/config.h,
	  include/asterisk/rtp.h, include/asterisk/extconf.h,
	  main/devicestate.c: Merged revisions 180719 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r180719 |
	  jpeeler | 2009-03-09 15:58:17 -0500 (Mon, 09 Mar 2009) | 16 lines
	  Add Doxygen documentation for API changes from 1.6.0 to 1.6.1
	  Copied from my review board description: This is a continuation
	  of the API changes documentation started for describing changes
	  between releases. Most of the API changes were pretty simple
	  needing only to be brought to attention via the new "Asterisk API
	  Changes" list. However, if you see anything that needs further
	  explanation feel free to supplement what is there. The current
	  method of documenting is to add (in the header file): \version
	  <ver number> <description of changes> and then to add the
	  function to the change list in doxyref.h on the AstAPIChanges
	  page. I also made sure all the functions that were newly added
	  were tagged with \since 1.6.1. I think this is a good habit to
	  start both for the historical aspect as well as for the future
	  ability to easily add a "New Asterisk API" page. Review:
	  http://reviewboard.digium.com/r/190/ ........

2009-03-06 18:26 +0000 [r180585]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 180579 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r180579 | mmichelson | 2009-03-06 12:25:44 -0600
	  (Fri, 06 Mar 2009) | 9 lines Merged revisions 180567 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r180567 | mmichelson | 2009-03-06 12:23:09 -0600 (Fri,
	  06 Mar 2009) | 2 lines Make compilation succeed in dev-mode when
	  IMAP storage is enabled. ........ ................

2009-03-06 17:35 +0000 [r180537]  David Vossel <dvossel@digium.com>

	* main/enum.c, /: Merged revisions 180534 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r180534 | dvossel | 2009-03-06 11:26:38 -0600 (Fri, 06 Mar 2009)
	  | 15 lines Merged revisions 180532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180532 | dvossel | 2009-03-06 11:19:55 -0600 (Fri, 06 Mar 2009)
	  | 9 lines Fix handling of backreferences for ENUM lookups enum.c
	  did not handle regex backtraces correctly. The '\1' in the regex
	  is a backreference that requires a pattern match to be inserted.
	  The way the code used to work is that it would find the
	  backreference and insert the entire input string minus the '+'.
	  This is incorrect. The regexec() function takes in a variable
	  called pmatch which is an array of structs containing the start
	  and end indexes for each backreference substring. The original
	  code actually passed the pmatch array pointer into regexec but
	  never did anything with it. Now when a backtrace is found, the
	  backtrace number is looked up in the pmatch array and the correct
	  substring is inserted. (closes issue #14576) Reported by:
	  chris-mac Review: http://reviewboard.digium.com/r/187/ ........
	  ................

2009-03-05 23:28 +0000 [r180425-180467]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 180465 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r180465 | mmichelson | 2009-03-05 17:26:58 -0600
	  (Thu, 05 Mar 2009) | 22 lines Merged revisions 180464 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180464 | mmichelson | 2009-03-05 17:26:11 -0600 (Thu, 05 Mar
	  2009) | 16 lines [IMAP] Fix message retrieval issues when
	  identical mailbox names were defined in separate contexts. There
	  was a fix put in a while back so that an X-Asterisk-VM-Context
	  message header was added to stored IMAP voicemails. This would
	  allow for us to differentiate if the same mailbox name was used
	  in multiple contexts. The problem still left was that not all
	  places where messages were retrieved actually attempted to use
	  this header for information when retrieving messages. This commit
	  fixes that so that MWI and message retrieval from VoiceMailMain
	  work as expected. (closes issue #13853) Reported by: vicks1
	  Patches: 13853_v2.patch uploaded by mmichelson (license 60)
	  Tested by: lmadsen ........ ................

	* apps/app_voicemail.c, /, configs/voicemail.conf.sample: Merged
	  revisions 180383 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r180383 | mmichelson | 2009-03-05 13:14:14 -0600 (Thu, 05 Mar
	  2009) | 31 lines Merged revisions 180380 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180380 | mmichelson | 2009-03-05 12:58:48 -0600 (Thu, 05 Mar
	  2009) | 25 lines Fix broken mailbox parsing when searchcontexts
	  option is enabled. When using the searchcontexts option in
	  voicemail.conf, the code made the assumption that all mailbox
	  names defined were unique across all contexts. However, the code
	  did nothing to actually enforce this assumption, nor did it do
	  anything to alert a user that he may have created an ambiguity in
	  his voicemail.conf file by defining the same mailbox name in
	  multiple contexts. With this change, we now will issue a nice
	  long warning if searchcontexts is on and we encounter the same
	  mailbox name in multiple contexts and ignore any duplicates after
	  the first box. Whether searchcontexts is enabled or not, if we
	  come across a duplicate mailbox in the same context, then we will
	  issue a warning and ignore the duplicated mailbox. I have also
	  added a small note to voicemail.conf.sample in the explanation
	  for searchcontexts explaining that you cannot define the same
	  mailbox in multiple contexts if you have enabled the option.
	  (closes issue #14599) Reported by: lmadsen Patches: 14599.patch
	  uploaded by mmichelson (license 60) (with slight modification)
	  Tested by: lmadsen ........ ................

2009-03-05 18:40 +0000 [r180378]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/frame.h, main/rtp.c, main/frame.c, /: Merged
	  revisions 180373 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r180373 | kpfleming | 2009-03-05 12:29:38 -0600 (Thu, 05 Mar
	  2009) | 15 lines Merged revisions 180372 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180372 | kpfleming | 2009-03-05 12:22:16 -0600 (Thu, 05 Mar
	  2009) | 9 lines Fix problems when RTP packet frame size is
	  changed During some code analysis, I found that calling
	  ast_rtp_codec_setpref() on an ast_rtp session does not work as
	  expected; it does not adjust the smoother that may on the RTP
	  session, in fact it summarily drops it, even if it has data in
	  it, even if the current format's framing size has not changed.
	  This is not good. This patch changes this behavior, so that if
	  the packetization size for the current format changes, any
	  existing smoother is safely updated to use the new size, and if
	  no smoother was present, one is created. A new API call for
	  smoothers, ast_smoother_reconfigure(), was required to implement
	  these changes. Review: http://reviewboard.digium.com/r/184/
	  ........ ................

2009-03-04  Leif Madsen <lmadsen@digium.com>

	* Released Asterisk 1.6.1.0-rc2

2009-03-04 21:09 +0000 [r180263]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 180261 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r180261 |
	  russell | 2009-03-04 15:01:05 -0600 (Wed, 04 Mar 2009) | 54 lines
	  Resolve object matching issues related to the removal of the
	  sip_user object. Previously, chan_sip had both sip_peer and
	  sip_user objects in memory. A patch went in to remove sip_user to
	  simplify the code, since everything could be done with just
	  sip_peer. This patch resolves some regressions found that were
	  introduced by those changes. This code comes from
	  svn/asterisk/team/group/sip-object-matching/. Here is a list of
	  the changes that have been made: 1) When doing a match by name
	  with the find_peer() function, make it much easier to specify
	  which objects should be matched by having a parameter that
	  specifies exactly which object types should be considered. Also,
	  update find_by_name() to handle this parameter. Finally, update
	  all code to use the new option values. 2) When looking up an
	  object for an outbound request by name, consider peers only.
	  (create_addr()) 3) Only match peers on an incoming registration
	  request. 4) When doing authentication (except for SUBSCRIBE),
	  look up users by name, instead of all objects by name. 5) When
	  doing authentication (except for SUBSCRIBE), after looking for a
	  user by name, look for a peer by IP address, instead of all
	  objects by IP address. 6) When handling the SIP qualify CLI
	  command or manager action, look for a peer by name, instead of
	  any object by name. 7) When handling the SIP unregister CLI
	  command, look for a peer by name, instead of any object by name.
	  9) In sip_do_debug_peer(), search for a peer by name, instead of
	  any object by name. 9) When handling the SIPPEER() dialplan
	  function, search for a peer by name, instead of any object by
	  name. 10) In the following session timer related functions,
	  st_get_se(), st_get_refresher(), and st_get_mode(), when looking
	  for an object for a given sip_pvt using pvt->peername, look for a
	  peer by name, instead of any object by name. 11) Fix build_peer()
	  to properly handle the case where separate type=peer and
	  type=user entries were specified in sip.conf. (closes issue
	  #14505) Reported by: lmadsen Review:
	  http://reviewboard.digium.com/r/172/ ........

2009-03-04 19:27 +0000 [r180122-180197]  Joshua Colp <jcolp@digium.com>

	* /, main/callerid.c: Merged revisions 180195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r180195 | file | 2009-03-04 15:24:59 -0400 (Wed, 04 Mar 2009) |
	  11 lines Merged revisions 180194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180194 | file | 2009-03-04 15:22:50 -0400 (Wed, 04 Mar 2009) | 4
	  lines Look for the number in a callerid string starting from the
	  end. This way a value using <> can exist in the name portion.
	  (issue #AST-194) ........ ................

	* apps/app_dial.c, /: Merged revisions 180120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r180120 |
	  file | 2009-03-04 10:39:28 -0400 (Wed, 04 Mar 2009) | 7 lines
	  Remove duplicate 'k' and 'K' Dial options. (closes issue #14601)
	  Reported by: alecdavis Patches: app_dial.optionk.diff.txt
	  uploaded by alecdavis (license 585) ........

2009-03-03 23:39 +0000 [r180080]  David Vossel <dvossel@digium.com>

	* main/channel.c, include/asterisk/app.h, apps/app_read.c, /,
	  main/app.c: Merged revisions 180032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r180032 |
	  dvossel | 2009-03-03 17:21:18 -0600 (Tue, 03 Mar 2009) | 14 lines
	  app_read does not break from prompt loop with user terminated
	  empty string In app.c, ast_app_getdata is called to stream the
	  prompts and receive DTMF input. If ast_app_getdata() receives an
	  empty string caused by the user inputing the end of string
	  character, in this case '#', it should break from the prompt loop
	  and return to app_read, but instead it cycles through all the
	  prompts. I've added a return value for this special case in
	  ast_readstring() which uses an enum I've delcared in apps.h. This
	  enum is now used as a return value for ast_app_getdata(). (closes
	  issue #14279) Reported by: Marquis Patches: fix_app_read.patch
	  uploaded by Marquis (license 32) read-ampersanmd.patch2 uploaded
	  by dvossel (license 671) Tested by: Marquis, dvossel Review:
	  http://reviewboard.digium.com/r/177/ ........

2009-03-03 23:31 +0000 [r180077]  Steve Murphy <murf@digium.com>

	* main/ast_expr2.fl, main/ast_expr2.c, utils/Makefile,
	  utils/expr2.testinput, /, main/ast_expr2.h, main/ast_expr2.y,
	  main/ast_expr2f.c: Merged revisions 179973 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179973 | murf | 2009-03-03 15:12:02 -0700 (Tue, 03 Mar 2009) |
	  33 lines Merged revisions 179807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 I had some
	  work to do to port these changes to trunk; the check_expr stuff
	  hasn't been updated here for quite some time, it appears. I added
	  some more tests to the check_expr2 suite. I had to play around
	  with the makefile a bit, etc. I added STANDALONE2 #ifdefs to
	  ast_expr2.y so as not to conflict structure with aelparse.
	  ........ r179807 | murf | 2009-03-03 11:11:34 -0700 (Tue, 03 Mar
	  2009) | 19 lines These changes allow AEL to better check ${}
	  constructs within $[...], that are concatenated with text. I
	  modified and added rules in ast_expr2.fl to better handle the
	  concatenations. I added some default routines to ast_expr2.y so
	  the standalone would compile. It also looks like I haven't run
	  this thru bison since 2.1, so it's good to get this updated. The
	  Makefile has comments added now for check_expr2 and check_expr to
	  explain what they are for, and how to run them. The testexpr2s
	  stuff has been removed, in favor of check_expr2. expr2.testinput
	  has been updated to include the two expressions that inspired
	  these changes (from mcnobody on #asterisk this morning) The
	  regression has been run and all looks well. ........
	  ................

2009-03-03 22:49 +0000 [r179939-180009]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /, configs/queues.conf.sample: Merged revisions
	  180007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r180007 | mmichelson | 2009-03-03 16:49:07 -0600 (Tue, 03 Mar
	  2009) | 22 lines Merged revisions 180006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r180006 | mmichelson | 2009-03-03 16:48:18 -0600 (Tue, 03 Mar
	  2009) | 17 lines Clarify some documentation of queues.conf.sample
	  It had always been possible to explicitly specify a "blank" value
	  for a sound file in queues.conf and have no sound played back.
	  The problem with this is that it would result in some ugly CLI
	  warnings from file.c. This commit introduces a check when playing
	  a file in app_queue to see if the name of the file is zero-length
	  and return early if that is the case. Also, the ability to
	  specify the blank sound files in queues.conf is now mentioned
	  more clearly in queues.conf.sample (closes issue #14227) Reported
	  by: caspy ........ ................

	* doc/timing.txt (added), /, res/res_timing_dahdi.c: Merged
	  revisions 179937 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r179937 |
	  mmichelson | 2009-03-03 14:59:16 -0600 (Tue, 03 Mar 2009) | 20
	  lines Add documentation for timing modules used in Asterisk This
	  document specifies the timing modules available in Asterisk
	  beginning with Asterisk 1.6.1. The document goes into detail
	  about the differences between each and gives a general overview
	  of what timing is used for in Asterisk. There is also a section
	  which can be used to help customize your setup or to troubleshoot
	  timing issues you may have. I also added messages to the DAHDI
	  timing test used in res_timing_dahdi.c that points to this new
	  documentation if people experience problems. Big thanks to all
	  who contributed comments on this. (closes issue #14490) Reported
	  by: mmichelson Patches: timing.txt uploaded by mmichelson
	  (license 60) Review: http://reviewboard.digium.com/r/164/
	  ........

2009-03-03 20:09 +0000 [r179905]  Russell Bryant <russell@digium.com>

	* /, apps/app_directed_pickup.c: Merged revisions 179903 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r179903 | bmd | 2009-03-03 14:02:20 -0600 (Tue, 03 Mar
	  2009) | 1 line fix a leaked channel lock (and future deadlock)
	  when we try to pick up our own channel ........

2009-03-03 18:30 +0000 [r179843]  Joshua Colp <jcolp@digium.com>

	* /, main/features.c: Merged revisions 179841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179841 | file | 2009-03-03 14:28:46 -0400 (Tue, 03 Mar 2009) |
	  16 lines Merged revisions 179840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179840 | file | 2009-03-03 14:27:09 -0400 (Tue, 03 Mar 2009) | 9
	  lines Do not assume that the bridge_cdr is still attached to the
	  channel when the 'h' exten is finished executing. It is possible
	  for a masquerade operation to occur when the 'h' exten is
	  operating. This operation moves the CDR records around causing
	  the bridge_cdr to no longer exist on the channel where it is
	  expected to. We can not safely modify it afterwards because of
	  this, so don't even try. (closes issue #14564) Reported by: meric
	  ........ ................

2009-03-03 16:48 +0000 [r179744]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 179742 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179742 | russell | 2009-03-03 10:47:28 -0600 (Tue, 03 Mar 2009)
	  | 14 lines Merged revisions 179741 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179741 | russell | 2009-03-03 10:45:46 -0600 (Tue, 03 Mar 2009)
	  | 6 lines Ensure chan->fdno always gets reset to -1 after
	  handling a channel fd event. Since setting fdno to -1 had to be
	  moved, a couple of other code paths that do process an fd event
	  return early and do not pass through the code path where it was
	  moved to. So, set it to -1 in a few other places, too. ........
	  ................

2009-03-03 14:41 +0000 [r179674]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 179672 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179672 | file | 2009-03-03 10:40:04 -0400 (Tue, 03 Mar 2009) |
	  10 lines Merged revisions 179671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179671 | file | 2009-03-03 10:38:09 -0400 (Tue, 03 Mar 2009) | 3
	  lines Move where fdno is set to the default value to *after* the
	  read callback of the channel driver is called. We have to do this
	  as the underlying channel driver may need the fdno value to
	  determine what to read. ........ ................

2009-03-03 13:56 +0000 [r179611]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 179609 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179609 | russell | 2009-03-03 07:54:41 -0600 (Tue, 03 Mar 2009)
	  | 17 lines Merged revisions 179608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179608 | russell | 2009-03-03 07:53:52 -0600 (Tue, 03 Mar 2009)
	  | 9 lines Make it easier to detect an improper call to
	  ast_read(). When you call ast_waitfor() on a channel, the index
	  into the channel fds array that holds the file descriptor that
	  poll() determines has input available is stored in fdno. This
	  patch clears out this value after a call to ast_read() and also
	  reports errors if ast_read() is called without an fdno set. From
	  a discussion on the asterisk-dev list. ........ ................

2009-03-03 00:04 +0000 [r179539]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 179537 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179537 | jpeeler | 2009-03-02 18:01:51 -0600 (Mon, 02 Mar 2009)
	  | 21 lines Merged revisions 179536 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179536 | jpeeler | 2009-03-02 17:54:39 -0600 (Mon, 02 Mar 2009)
	  | 15 lines Fix bridging regression from commit 176701 This fixes
	  a bad regression where the bridge would exit after an attended
	  transfer was made. The problem was due to nexteventts getting set
	  after the masquerade which caused the bridge to return
	  AST_BRIDGE_COMPLETE. (closes issue #14315) Reported by:
	  tim_ringenbach ........ ................

2009-03-02 23:39 +0000 [r179535]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 179533 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179533 | russell | 2009-03-02 17:36:38 -0600 (Mon, 02 Mar 2009)
	  | 48 lines Merged revisions 179532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179532 | russell | 2009-03-02 17:34:13 -0600 (Mon, 02 Mar 2009)
	  | 40 lines Move ast_waitfor() down to avoid the results of the
	  API call becoming stale. This call to ast_waitfor() was being
	  done way too soon in this section of code. Specifically, there
	  was code in between the call to waitfor and the code that uses
	  the result that puts the channel in autoservice. By putting the
	  channel in autoservice, the previous results of ast_waitfor()
	  become meaningless, as the autoservice thread will do it's own
	  ast_waitfor() and ast_read() on the channel. So, when we came
	  back out of autoservice and eventually hit the block of code that
	  calls ast_read() on the channel, there may not actually be any
	  input on the channel available. Even though the previous call to
	  ast_waitfor() in app_meetme said there was input, the autoservice
	  thread has since serviced the channel for some period of time.
	  This bug manifested itself while dvossel was doing some testing
	  of MeetMe in Asterisk trunk. He was using the timerfd timing
	  module. When the code hit ast_read() erroneously, it determined
	  that it must have been called because of input on the timer fd,
	  as chan->fdno was set to AST_TIMING_FD, since that was the cause
	  of the last legitimate call to ast_read() done by autoservice. In
	  this test, an IAX2 channel was calling into the MeetMe
	  conference. It was _much_ more likely to be seen with an IAX2
	  channel because of the way audio is handled. Every audio frame
	  that comes in results in a call to ast_queue_frame(), which then
	  uses ast_timer_enable_continuous() to notify the channel thread
	  that a frame is waiting to be handled. So, the chances of
	  ast_waitfor() indicating that a channel needs servicing due to a
	  timer event on an IAX2 event is very high. Finally, it is
	  interesting to note that if a different timing interface was
	  being used, this bug would probably not be noticed. When
	  ast_read() is called and erroneously thinks that there is a timer
	  event to handle, it calls the ast_timer_ack() function. The
	  pthread and dahdi timing modules handle the ack() function being
	  called when there is no event by simply ignoring it. In the case
	  of the timerfd module, it results in a read() on the timer fd
	  that will block forever, as there is no data to read. This caused
	  Asterisk to lock up very quickly. Thanks to dvossel and
	  mmichelson for the fun debugging session. :-) ........
	  ................

2009-03-02 23:12 +0000 [r179471]  Tilghman Lesher <tlesher@digium.com>

	* /, main/app.c: Merged revisions 179469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179469 | tilghman | 2009-03-02 17:10:18 -0600 (Mon, 02 Mar 2009)
	  | 17 lines Merged revisions 179468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179468 | tilghman | 2009-03-02 17:09:01 -0600 (Mon, 02 Mar 2009)
	  | 10 lines When ending a recording with silence detection,
	  remember to reduce the duration. The end of the recording is
	  correspondingly trimmed, but the duration was not trimmed by the
	  number of seconds trimmed, so the saved duration was necessarily
	  longer than the actual soundfile duration. (closes issue #14406)
	  Reported by: sasargen Patches: 20090226__bug14406.diff.txt
	  uploaded by tilghman (license 14) Tested by: sasargen ........
	  ................

2009-03-02 23:04 +0000 [r179464]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 179462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179462 | russell | 2009-03-02 17:00:30 -0600 (Mon, 02 Mar 2009)
	  | 16 lines Merged revisions 179461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179461 | russell | 2009-03-02 16:58:18 -0600 (Mon, 02 Mar 2009)
	  | 8 lines Ensure that only one thread is calling ast_settimeout()
	  on a channel at a time. For example, with an IAX2 channel, you
	  can have both the channel thread and the chan_iax2 processing
	  threads calling this function, and doing so twice at the same
	  time is a bad thing. (Found in a debugging session with dvossel
	  and mmichelson) ........ ................

2009-03-02 20:18 +0000 [r179407]  Jason Parker <jparker@digium.com>

	* /, main/editline/configure, main/editline/np/unvis.c,
	  main/editline/sys.h, main/editline/configure.in: Merged revisions
	  179396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r179396 | qwell | 2009-03-02 14:16:51 -0600 (Mon, 02 Mar 2009) |
	  9 lines Merged revisions 179395 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r179395 | qwell | 2009-03-02 14:14:57 -0600 (Mon, 02 Mar 2009) |
	  1 line Remove several silly warnings in editline. One about a
	  broken preprocessor directive, and another about strlcpy/strlcat.
	  (closes issue #14264) Reported by: dimas ........
	  ................

2009-03-02 17:19 +0000 [r179362]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 179361 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r179361 | tilghman | 2009-03-02 11:18:48 -0600 (Mon, 02 Mar 2009)
	  | 2 lines Backport 1.6.0 fix to trunk (failsafe if db is not
	  loaded) ........

2009-03-02 14:14 +0000 [r179293]  Joshua Colp <jcolp@digium.com>

	* /, main/audiohook.c: Merged revisions 179291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r179291 |
	  file | 2009-03-02 10:13:45 -0400 (Mon, 02 Mar 2009) | 7 lines Fix
	  issue where changing the volume of both directions of audio did
	  not work. (closes issue #14574) Reported by: KNK Patches:
	  audiohook_volume_fix.diff uploaded by KNK (license 545) ........

2009-03-01 23:28 +0000 [r179221-179256]  Mark Michelson <mmichelson@digium.com>

	* apps/app_speech_utils.c, /: Merged revisions 179254 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r179254 | mmichelson | 2009-03-01 17:25:23 -0600 (Sun, 01 Mar
	  2009) | 5 lines Swap reversed timevals. This was pointed out by
	  ScribbleJ in #asterisk-dev. Thanks very much, ScribbleJ! ........

	* /, channels/chan_sip.c: Merged revisions 179219 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r179219 |
	  mmichelson | 2009-03-01 15:45:08 -0600 (Sun, 01 Mar 2009) | 18
	  lines Properly free memory and remove scheduler entries when a
	  transmission failure occurs. Previously, only the "data" field of
	  the sip_pkt created during __sip_reliable_xmit was freed when
	  XMIT_ERROR was returned by __sip_xmit. When retrans_pkt was
	  called, this inevitably resulted in the reading and writing of
	  freed memory. XMIT_ERROR is a condition meaning that we don't
	  want to attempt resending the packet at all. The proper action to
	  take is to remove the scheduler entry we just created, free the
	  packet's data as well as the packet itself, and unlink it from
	  the list of packets on the sip_pvt structure. (closes issue
	  #14455) Reported by: Nick_Lewis Patches: 14455.patch uploaded by
	  mmichelson (license 60) Tested by: Nick_Lewis ........

2009-02-27 21:48 +0000 [r179166]  Russell Bryant <russell@digium.com>

	* configs/ais.conf.sample, res/res_ais.c, /,
	  doc/distributed_devstate.txt: Merged revisions 179164 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r179164 | russell | 2009-02-27 15:47:18 -0600 (Fri, 27
	  Feb 2009) | 2 lines Mark res_ais as experimental, as the binary
	  event format is subject to change. ........

2009-02-27 21:34 +0000 [r179163]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 179161 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r179161 | tilghman | 2009-02-27 15:32:13 -0600 (Fri, 27 Feb 2009)
	  | 3 lines If config file is blank, don't load module. (Closes
	  issue #14563) ........

2009-02-27 21:25 +0000 [r179160]  Russell Bryant <russell@digium.com>

	* /, UPGRADE.txt: Merged revisions 179154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r179154 |
	  russell | 2009-02-27 15:23:12 -0600 (Fri, 27 Feb 2009) | 2 lines
	  Add a note about the ordering of entries in sip.conf in 1.6.1.
	  ........

2009-02-27 19:06 +0000 [r179059]  Jason Parker <jparker@digium.com>

	* /, doc/tex/channelvariables.tex: Merged revisions 179057 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r179057 | qwell | 2009-02-27 13:04:57 -0600 (Fri, 27 Feb
	  2009) | 8 lines Update documentation for DIALEDTIME and
	  ANSWEREDTIME variables. (closes issue #14566) Reported by:
	  klaus3000 Patches: ANSWEREDTIME-1.4-patch.txt uploaded by
	  klaus3000 (license 65) ANSWEREDTIME-trunk-patch.txt uploaded by
	  klaus3000 (license 65) ........

2009-02-27 03:56 +0000 [r178988]  Steve Murphy <murf@digium.com>

	* configs/features.conf.sample, /, main/features.c: Merged
	  revisions 178986 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r178986 | murf | 2009-02-26 20:45:58 -0700 (Thu, 26 Feb 2009) |
	  26 lines Merged revisions 178956 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 In this
	  case, it's just a matter of reducing the default timeouts from
	  2000 to 1000 msec, as the max def feature digit timeout is no
	  longer halved. ........ r178956 | murf | 2009-02-26 14:27:32
	  -0700 (Thu, 26 Feb 2009) | 18 lines This change moves the default
	  feature digit timeout to 1000 ms from the previous default of
	  500. As per bug 14515, a dev discussion arrived at a "mediated
	  concensus" of a default feature digit timeout of 1.0 sec. Some
	  voted for 1300; ctooley thought 1500 for distracted phone users
	  in phone booths; kpfleming put his foot down at 1.0 sec. Users
	  who found the previous default max delay of 250 msec perfect, are
	  welcome to override the new default. Notice that I said that 250
	  msec was the default; wait a minute, you might say, the config
	  file said it was 500 msec!; well, because of the bug fix for
	  14515, we found that 500 msec was actually enforcing a max of
	  250. The bug fix would restore 500 msec, but we felt even that
	  was a bit tight for most users... 2000 msec was pushed earlier by
	  mmichelson, so that reduces to 1000 msec after the bug fix.
	  Enjoy! ........ ................

2009-02-26 17:50 +0000 [r178875]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 178871 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r178871 | dvossel | 2009-02-26 11:46:12 -0600 (Thu, 26 Feb 2009)
	  | 6 lines IAX2 prune realtime, minor tweak to last fix A return
	  statement was missing which caused unexpected cli output. issue
	  #14479 ........

2009-02-26 17:38 +0000 [r178869]  Steve Murphy <murf@digium.com>

	* /, main/features.c: Merged revisions 178828 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r178828 | murf | 2009-02-26 10:22:11 -0700 (Thu, 26 Feb 2009) |
	  34 lines Merged revisions 178804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178804 | murf | 2009-02-26 10:09:03 -0700 (Thu, 26 Feb 2009) |
	  28 lines This patch prevents the feature detection timeout from
	  being cut in half. Because the ast_channel_bridge() call will
	  return 0 and pass a frame pointer for both DTMF_BEGIN and
	  DTMF_END, the feature_timer field in hte config struct is getting
	  decremented twice, which effectively cuts the digittimeout in
	  half. I added conditions to the if statement to only let DTMF_END
	  frames to flow thru, which solved the problem. Also, when the
	  frame pointer is null, let control flow thru-- this usually
	  happens on timeouts. I added a comment to the code to explain
	  what's going on and why. Many thanks to sodom for reporting this
	  problem. Personnally, it always seemed like something was wrong
	  with the featuredigittimeout, but I never could quite decide
	  what... and was too busy to investigate. This bug forced the
	  issue, and now we know. Sodom had other issues in 14515, but I
	  couldn't reproduce them. If he still has problems, and wants to
	  get them solved, he is welcome to reopen 14515. (closes issue
	  #14515) Reported by: sodom Patches: 14515.patch uploaded by murf
	  (license 17) Tested by: murf, sodom ........ ................

2009-02-26 16:44 +0000 [r178803]  Joshua Colp <jcolp@digium.com>

	* /, main/file.c: Merged revisions 178801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r178801 |
	  file | 2009-02-26 12:42:36 -0400 (Thu, 26 Feb 2009) | 5 lines Fix
	  an issue where the timer for file playback would not be stopped
	  if DAHDI was not installed. (closes issue #14541) Reported by:
	  grant ........

2009-02-26 16:07 +0000 [r178769]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 178767 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r178767 | dvossel | 2009-02-26 09:50:22 -0600 (Thu, 26 Feb 2009)
	  | 8 lines IAX2 prune realtime fix Iax2 prune realtime had issues.
	  If "iax2 prune realtime all" was called, it would appear like the
	  command was successful, but in reality nothing happened. This is
	  because the reload that was supposed to take place checks the
	  config files, sees no changes, and does nothing. If there had
	  been a change in the the config file, the realtime users would
	  have been marked for deletion and everything would have been
	  fine. Now prune_users() and prune_peers() are called instead of
	  reload_config() to prune all users/peers that are realtime. These
	  functions remove all users/peers with the rtfriend and delme
	  flags set. iax2_prune_realtime() also lacked the code to properly
	  delete a single friend. For example. if iax2 prune realtime
	  <friend> was called, only the peer instance would be removed. The
	  user would still remain. (closes issue #14479) Reported by:
	  mousepad99 Review: http://reviewboard.digium.com/r/176/ ........

2009-02-25 12:46 +0000 [r178511]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, /: Merged revisions 178509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r178509 | russell | 2009-02-25 06:45:30 -0600 (Wed, 25 Feb 2009)
	  | 10 lines Merged revisions 178508 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178508 | russell | 2009-02-25 06:43:36 -0600 (Wed, 25 Feb 2009)
	  | 2 lines Update the copyright year for the main page of the
	  doxygen documentation. ........ ................

2009-02-24 23:28 +0000 [r178383-178448]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample, /: Merged revisions 178446 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r178446 | tilghman | 2009-02-24 17:27:23 -0600
	  (Tue, 24 Feb 2009) | 12 lines Merged revisions 178445 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178445 | tilghman | 2009-02-24 17:25:24 -0600 (Tue, 24 Feb 2009)
	  | 5 lines Add section about the #exec command in configuration
	  files. (closes issue #14540) Reported by: jtodd Patch by: jtodd,
	  with additional notes by tilghman (license 14) ........
	  ................

	* main/asterisk.c, /: Merged revisions 178381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r178381 |
	  tilghman | 2009-02-24 14:52:44 -0600 (Tue, 24 Feb 2009) | 2 lines
	  Apparently, a void cast doesn't override warn_unused_result.
	  ........

2009-02-24 20:44 +0000 [r178379-178380]  Russell Bryant <russell@digium.com>

	* Makefile: revert accidental Makefile change.

	* main/rtp.c, Makefile, /: Merged revisions 178374 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r178374 | russell | 2009-02-24 14:39:57 -0600
	  (Tue, 24 Feb 2009) | 14 lines Merged revisions 178373 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178373 | russell | 2009-02-24 14:36:19 -0600 (Tue, 24 Feb 2009)
	  | 6 lines Only set dtmfcount on BEGIN, and ensure it gets reset
	  to 0 properly. (issue #14460) Reported by: moliveras Tested by:
	  russell ........ ................

2009-02-24 20:41 +0000 [r178305-178377]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 178375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r178375 |
	  tilghman | 2009-02-24 14:40:02 -0600 (Tue, 24 Feb 2009) | 2 lines
	  The 3 possible errors with pipe(2) are all impossible in this
	  situation. ........

	* main/asterisk.c, /, utils/astcanary.c: Merged revisions 178342
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r178342 | tilghman | 2009-02-24 14:06:48 -0600 (Tue, 24
	  Feb 2009) | 2 lines Use a SIGPIPE to kill the process, instead of
	  depending upon the astcanary process being inherited by init.
	  ........

	* /, utils/astcanary.c: Merged revisions 178303 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r178303 |
	  tilghman | 2009-02-24 11:51:36 -0600 (Tue, 24 Feb 2009) | 7 lines
	  Cause astcanary to exit if Asterisk exits abnormally and doesn't
	  kill astcanary. Also, add some documentation supporting the use
	  of astcanary. (closes issue #14538) Reported by: KNK Patches:
	  asterisk-1.6.x-astcanary.diff uploaded by KNK (license 545)
	  ........

2009-02-24 15:22 +0000 [r178232]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 178213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r178213 | file | 2009-02-24 11:18:38 -0400 (Tue, 24 Feb 2009) |
	  16 lines Merged revisions 178205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178205 | file | 2009-02-24 11:16:07 -0400 (Tue, 24 Feb 2009) | 9
	  lines Skip check for extension when subscribing for MWI. Since
	  the remote side is not actually subscribing to a specific
	  extension when subscribing for MWI just skip the check to see if
	  the extension exists. They can't use it to specify the mailbox
	  either since we require configuration of that in sip.conf (closes
	  issue #14531) Reported by: festr ........ ................

2009-02-23 23:22 +0000 [r178172]  Russell Bryant <russell@digium.com>

	* main/rtp.c, /: Merged revisions 178142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r178142 | russell | 2009-02-23 17:11:37 -0600 (Mon, 23 Feb 2009)
	  | 22 lines Merged revisions 178141 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r178141 | russell | 2009-02-23 17:09:01 -0600 (Mon, 23 Feb 2009)
	  | 14 lines Fix infinite DTMF when a BEGIN is received without an
	  END. This commit is related to rev 175124 of 1.4 where a previous
	  attempt was made to fix this problem. The problem with the
	  previous patch was that the inserted code needed to go _before_
	  setting the lastrxts to the current timestamp. Because those were
	  the same, the dtmfcount variable was never decremented, and so
	  the END was never sent. In passing, I removed the dtmfsamples
	  variable which was completed unused. I also removed a redundant
	  setting of the lastrxts variable. (closes issue #14460) Reported
	  by: moliveras ........ ................

2009-02-21 16:04 +0000 [r177945]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 177944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177944 |
	  tilghman | 2009-02-21 09:59:49 -0600 (Sat, 21 Feb 2009) | 2 lines
	  On update, test against the existence of sipregs. ........

2009-02-21 12:51 +0000 [r177851]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_sip.c: Merged revisions 177849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177849 |
	  mvanbaak | 2009-02-21 13:22:32 +0100 (Sat, 21 Feb 2009) | 2 lines
	  make chan_sip.c compile on OpenBSD again. ........

2009-02-20 23:05 +0000 [r177789]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 177787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r177787 | tilghman | 2009-02-20 17:02:35 -0600 (Fri, 20 Feb 2009)
	  | 16 lines Merged revisions 177786 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r177786 | tilghman | 2009-02-20 16:59:52 -0600 (Fri, 20 Feb 2009)
	  | 9 lines Don't print the CR-NL combination when we aren't
	  outputting to the manager. An embedded CR-NL in a CLI command
	  screws up several AMI parsers that don't expect to see that
	  combination in the middle of output. (Closes issue #14305)
	  Reported by: martins Patch by: tilghman ........ ................

2009-02-20 22:27 +0000 [r177785]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, apps/app_fax.c: Merged revisions 177699 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177699 |
	  dhubbard | 2009-02-20 14:29:00 -0600 (Fri, 20 Feb 2009) | 9 lines
	  Make app_fax compatible with spandsp-0.0.6pre4 Prior to
	  spandsp-0.0.6pre4 the t30_stats_t structure used a
	  pages_transferred integer to indicate the number of pages
	  transferred (so far) during the fax session. The
	  spandsp-0.0.6pre4 release removed the pages_transferred integer
	  and replaced it with two different integers - pages_tx and
	  pages_rx. This revision uses the new integers for
	  spandsp-0.0.6pre4 while maintaining backwards compatibility for
	  previous spandsp releases. ........

2009-02-20 22:15 +0000 [r177760-177764]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/strings.h: Oops, last merge broke 1.6.1 branch

	* apps/app_system.c, include/asterisk/app.h, /, main/app.c: Merged
	  revisions 177664 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177664 |
	  tilghman | 2009-02-20 11:29:51 -0600 (Fri, 20 Feb 2009) | 8 lines
	  Allow semicolons to be escaped, when passing arguments to the
	  System command. (closes issue #14231) Reported by: jcovert
	  Patches: 20090113__bug14231__2.diff.txt uploaded by Corydon76
	  (license 14) corrected_20090113__bug14231__2.diff.txt uploaded by
	  jcovert (license 551) Tested by: jcovert ........

	* include/asterisk/threadstorage.h, /: Merged revisions 177732 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177732 | tilghman | 2009-02-20 15:25:37 -0600
	  (Fri, 20 Feb 2009) | 10 lines Merged revisions 177701 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r177701 | tilghman | 2009-02-20 15:15:01 -0600 (Fri, 20 Feb 2009)
	  | 3 lines This exception does not appear to still be true for
	  Solaris 10, and OpenSolaris definitely needs it to be removed.
	  Fixed for snuff-home on -dev channel. ........ ................

2009-02-20 20:34 +0000 [r177700]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, include/asterisk/frame.h: Fixes issue with
	  undefined audio codecs in chan_iax2 During iax2 call negotiation,
	  supported codecs are passed in an Information Element containing
	  a 2 byte field where each bit correlates to a specific codec. In
	  1.6 only audio codec bits 0-12 are defined, leaving bits 13-14
	  undefined. By default all bits are enabled unless specified
	  otherwise. Since its a 2 byte field and 13-14 are not defined,
	  these bits are never turned off. In trunk, bits 13-14 are
	  defined, which means 1.6 is advertising support for codecs it
	  does not have when talking to trunk. I fixed this by adding
	  #define for undefined audio codec bits. These bits are then
	  removed from iax2's full bandwidth capabilities. (closes issue
	  #14283) Reported by: jcovert

2009-02-20 17:28 +0000 [r177663]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 177661 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r177661 | tilghman | 2009-02-20 11:22:19 -0600 (Fri, 20 Feb 2009)
	  | 2 lines Oops, merge broke trunk ........

2009-02-20 00:38 +0000 [r177626]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 177624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177624 |
	  jpeeler | 2009-02-19 18:35:53 -0600 (Thu, 19 Feb 2009) | 7 lines
	  Set sip_request ast_str data to NULL so ast_str_copy allocates
	  space properly in copy_request (issue #14478) Reported by:
	  erik_dedecker ........

2009-02-20 00:26 +0000 [r177623]  Steve Murphy <murf@digium.com>

	* /, main/Makefile, main/ast_expr2f.c: Merged revisions 177595 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177595 | murf | 2009-02-19 16:56:50 -0700 (Thu,
	  19 Feb 2009) | 32 lines Merged revisions 177540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 Trunk was
	  already pretty 8-bit clean; but I'm still removing the --full
	  from the flex command so everything is uniform. ........ r177540
	  | murf | 2009-02-19 15:51:37 -0700 (Thu, 19 Feb 2009) | 21 lines
	  This patch fixes a problem with 8-bit input to the ast_expr2
	  scanner. The real culprit was the --full argument to flex in the
	  Makefile! This causes a 7-bit scanner to be generated. I reviewed
	  the rules and found one rule where I needed to specifically
	  include 8-bit chars for a token. I tested against the text
	  supplied by ibercom, and all looks very well. This has been there
	  a surprisingly long time! (closes issue #14498) Reported by:
	  ibercom Patches: 14498.patch uploaded by murf (license 17) Tested
	  by: murf ........ ................

2009-02-19 22:35 +0000 [r177539]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 177537 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177537 | tilghman | 2009-02-19 16:33:00 -0600
	  (Thu, 19 Feb 2009) | 14 lines Merged revisions 177536 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r177536 | tilghman | 2009-02-19 16:26:01 -0600 (Thu, 19 Feb 2009)
	  | 7 lines Fix up potential crashes, by reducing the sharing
	  between interactive and non-interactive threads. (closes issue
	  #14253) Reported by: Skavin Patches: 20090219__bug14253.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: Skavin ........
	  ................

2009-02-19 16:46 +0000 [r177389]  Jeff Peeler <jpeeler@digium.com>

	* /, include/asterisk/channel.h: Merged revisions 177387 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r177387 | jpeeler | 2009-02-19 10:45:02 -0600 (Thu, 19
	  Feb 2009) | 3 lines Fix another merge error from 176708 ........

2009-02-19 16:40 +0000 [r177386]  Joshua Colp <jcolp@digium.com>

	* apps/app_speech_utils.c, /: Merged revisions 177384 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177384 | file | 2009-02-19 12:38:41 -0400 (Thu,
	  19 Feb 2009) | 10 lines Merged revisions 177383 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r177383 | file | 2009-02-19 12:37:25 -0400 (Thu, 19 Feb 2009) | 3
	  lines If we are able to create a speech structure unset the ERROR
	  variable in case it was previously set. (issue #LUMENVOX-13)
	  ........ ................

2009-02-19 15:57 +0000 [r177358]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 177356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177356 |
	  jpeeler | 2009-02-19 09:56:31 -0600 (Thu, 19 Feb 2009) | 4 lines
	  Fix mismerge from revision 176708 pointed out by Kaloyan Kovachev
	  on the asterisk-dev mailing list. Thanks! ........

2009-02-19 00:17 +0000 [r177294]  Steve Murphy <murf@digium.com>

	* /, res/ael/ael.tab.c, res/ael/ael.y: Merged revisions 177286 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177286 | murf | 2009-02-18 16:50:57 -0700 (Wed,
	  18 Feb 2009) | 39 lines Merged revisions 177225 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r177225 | murf | 2009-02-18 15:43:14 -0700 (Wed, 18 Feb 2009) |
	  34 lines This patch fixes a regression of sorts that was
	  introduced in rev 24425. It basically fixes AST-190/ABE-1782.
	  What was wrong: the user has 6000 extensions in one context; and
	  then 6000 contexts, one per extension. The parser could only
	  handle about 4893 of the 6000 extens in the single context. This
	  was due to the regression I mentioned. To get rid of shift/reduce
	  conflicts, Luigi set up right-recursive lists for globals,
	  context elements, switch lists, and statements. Right recursive
	  lists got rid of the warnings, but instead, they use up a
	  tremendous amount of stack space when the lists are long. I saw
	  this a few years back, and resolved not to fix it until someone
	  complained. That day has arrived! After the changes were made, I
	  ran the regression test suite, and there were no problems. I took
	  the test case the user provided, and added 100,000 extensions to
	  the single context, that already had 6,000 extens in it. (I'll
	  see your 6, and raise you 100!) It takes a few minutes to read it
	  all in, check it and generate code for it, but no problems. So, I
	  think I can say that fundamentally, there are no longer any
	  limits on the number of items you can place in contexts,
	  statement blocks, switches, or globals, beyond your virt mem
	  constraints. ........ ................

2009-02-18 23:15 +0000 [r177230]  Kevin P. Fleming <kpfleming@digium.com>

	* main/frame.c, /: Merged revisions 177229 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177229 |
	  kpfleming | 2009-02-18 17:09:58 -0600 (Wed, 18 Feb 2009) | 3
	  lines fix two very minor bugs: if anyone ever uses SLINEAR16 as a
	  format in RTP, ensure that the samples are byte-swapped to
	  network order if needed. also, when a smoother is operating on a
	  format that has a sample rate other than 8000 samples per second,
	  use the proper sample rate for computing delivery timestamps.
	  ........

2009-02-18 23:03 +0000 [r177228]  David Vossel <dvossel@digium.com>

	* /, main/features.c: Merged revisions 177226 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177226 |
	  dvossel | 2009-02-18 16:51:38 -0600 (Wed, 18 Feb 2009) | 9 lines
	  Locking issue in action_bridge and bridge_exec action_bridge()
	  and bridge_exec() both search for the channels to bridge to, and
	  then immediately drop the lock. Instead, they should hold the
	  lock until the masquerade is complete. This will guarantee the
	  channel remains and prevent any other weirdness from occurring.
	  In action_bridge() some more weirdness comes into play. Both
	  channels are needlessly locked at the same time and perform the
	  exact same logic. It makes sense from a coding organizational
	  standpoint, but could cause a theoretical deadlock so I split the
	  code up. There is an issue associated with this, but since its a
	  rather complicated thing to reproduce I'm not certain this alone
	  will close it. issue# 14296 Review:
	  http://reviewboard.digium.com/r/167/ ........

2009-02-18 20:16 +0000 [r177164]  Jeff Peeler <jpeeler@digium.com>

	* channels/h323/chan_h323.h, channels/h323/cisco-h225.cxx,
	  channels/h323/compat_h323.cxx, autoconf/ast_check_pwlib.m4,
	  channels/h323/cisco-h225.h, /, channels/h323/caps_h323.cxx,
	  channels/h323/ast_ptlib.h (added), channels/h323/ast_h323.cxx,
	  configure, channels/h323/compat_h323.h, configure.ac,
	  channels/h323/caps_h323.h, autoconf/ast_prog_sed.m4,
	  channels/h323/ast_h323.h: Merged revisions 177162 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r177162 | jpeeler | 2009-02-18 14:11:57 -0600 (Wed, 18 Feb 2009)
	  | 14 lines Modify h323 to build against PTLib as well as the
	  older PWLib Several changes in PTLib have occurred requiring
	  build time detection. Changes accounted for include the library
	  name change, config option change, install location change, and a
	  boolean type change which is handled by ast_ptlib.h. Also, the
	  sed check has been modified to properly work with autoconf >=
	  2.62. (closes issue #14224) Reported by: bergolth Patches:
	  asterisk-autoconf-sed.patch uploaded by bergolth (license 661)
	  asterisk-pwlib-v3.patch uploaded by bergolth (license 661) Tested
	  by: jpeeler ........

2009-02-18 19:30 +0000 [r177158]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 177101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177101 |
	  russell | 2009-02-18 13:12:49 -0600 (Wed, 18 Feb 2009) | 8 lines
	  Re-add 'o' option to MeetMe, reverting rev 62297. Enabling this
	  option by default proved to be a bad idea, as the talker
	  detection is not very reliable. So, make it optional again, and
	  off by default. (issue #13801) Reported by: justdave ........

2009-02-18 19:09 +0000 [r177100]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/config.h: Merged revisions 177098 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r177098 | tilghman | 2009-02-18 13:05:15 -0600
	  (Wed, 18 Feb 2009) | 9 lines Merged revisions 177096 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r177096 | tilghman | 2009-02-18 12:30:38 -0600 (Wed, 18
	  Feb 2009) | 2 lines Document the return value of the update
	  method (as requested on -dev list) ........ ................

2009-02-18 17:26 +0000 [r177037]  Doug Bailey <dbailey@digium.com>

	* /, main/utils.c: Merged revisions 177035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177035 |
	  dbailey | 2009-02-18 11:24:07 -0600 (Wed, 18 Feb 2009) | 2 lines
	  Fixed error where a check for an zero length, terminated string
	  was needed. ........

2009-02-18 17:14 +0000 [r177007]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 177005 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r177005 |
	  file | 2009-02-18 13:11:52 -0400 (Wed, 18 Feb 2009) | 6 lines Fix
	  ordering of output for a ChannelUpdate manager event. (closes
	  issue #14497) Reported by: vinsik Patches:
	  chan_update_fix-chan_sip.c.diff uploaded by vinsik (license 623)
	  ........

2009-02-18 16:20 +0000 [r176962]  Doug Bailey <dbailey@digium.com>

	* /, main/utils.c: Merged revisions 176948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176948 |
	  dbailey | 2009-02-18 10:09:12 -0600 (Wed, 18 Feb 2009) | 2 lines
	  Need to take into account the \0 terminator of the old string to
	  determine the amount available. ........

2009-02-18 15:59 +0000 [r176946]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 176943 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176943 |
	  murf | 2009-02-18 08:35:26 -0700 (Wed, 18 Feb 2009) | 45 lines
	  This patch fixes merge_contexts_and_delete so it does not
	  deadlock when hints are present. Reason: when I re-engineered the
	  merge_and_delete func to reduce its lock time, I failed to notice
	  that the functions it calls still also do locking as before. This
	  leads to deadlocks on dialplan reloads, when there are actually
	  living, subscribed hints registered in the system. While the
	  reporter come across this problem while using AEL, I might note
	  that these deadlocks should also happen if extensions.conf were
	  used. Here I added these routines to pbx.c:
	  ast_add_extension_nolock add_pri_lockopt
	  ast_add_extension2_lockopt find_context add_hint_nolock All of
	  the above routines are static and restricted to be used only
	  within pbx.c, and more specifically within the
	  merge_contexts_and_delete routine. They are pretty much the same
	  as their counterparts except they don't lock contexts or hints.
	  Most of them now do the real work of their name-alike, with
	  optional locking via extra arguments, and are called by their
	  name-alike. The goal was to have the original functions so they
	  would behave exactly as before. Both PJ and I tested these fixes,
	  and the deadlocking problem is no longer encountered. (closes
	  issue #14357) Reported by: pj Patches: 14357.diff uploaded by
	  murf (license 17) Tested by: pj, murf ........

2009-02-18 06:15 +0000 [r176903-176906]  Russell Bryant <russell@digium.com>

	* include/asterisk/heap.h, /: Merged revisions 176904 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r176904 | russell | 2009-02-18 00:14:47 -0600 (Wed, 18 Feb 2009)
	  | 2 lines Add example code for a heap traversal. ........

	* main/pbx.c, /: Merged revisions 176901 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176901 |
	  russell | 2009-02-18 00:00:40 -0600 (Wed, 18 Feb 2009) | 9 lines
	  Fix a number of incorrect uses of strncpy(). The big problem here
	  is that the 3rd argument provided in these uses of strncpy() did
	  not reserve a byte for the null terminator, leaving the potential
	  for writing one byte past the end of the buffer. Aside from this,
	  there were coding guidelines violations with regards to spacing,
	  as well as hard coded lengths being used instead of sizeof().
	  ........

2009-02-18 00:23 +0000 [r176809]  Shaun Ruffell <sruffell@digium.com>

	* /, codecs/codec_dahdi.c: Merged revisions 176760 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r176760 | sruffell | 2009-02-17 16:28:41 -0600 (Tue, 17 Feb 2009)
	  | 10 lines Several changes to codec_dahdi to play nice with G723.
	  This commit brings in the changes that were living out on the
	  svn/asterisk/team/sruffell/asterisk-trunk-transcoder branch.
	  codec_dahdi.c now always uses signed linear as the simple codec
	  so that a soft g729 codec will not end up being preferred to the
	  hardware codec. There are also changes to allow codec_dahdi.c to
	  feed packets to the hardware in the native sample size of the
	  codec. This solves problems with choppy audio when using G723.
	  ........

2009-02-17 22:21 +0000 [r176731]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, channels/chan_sip.c: Merged revisions 176705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176705 |
	  dhubbard | 2009-02-17 15:59:38 -0600 (Tue, 17 Feb 2009) | 11
	  lines create a UDPTL structure in create_addr_from_peer() if it
	  does not already exist for T38 This is required to create a UDPTL
	  structure in create_addr_from_peer() to handle the scenario where
	  't38pt_udptl=yes' is not defined in the [general] section of
	  sip.conf but is defined the peer's context. I tested this patch
	  by enabling t38pt_udptl in the [general] section on one system
	  and only enabling t38pt_udptl in a peer's context on the system
	  sending a fax. Without the patch, the sending system will fail to
	  initiate T38 negotiation with the warning message, "No way to add
	  SDP without an UDPTL structure". When this patch is applied the
	  sending side will successfully initiate T38 negotiation. ........

2009-02-17 22:15 +0000 [r176711]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /, main/features.c, include/asterisk/channel.h:
	  Merged revisions 176708 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r176708 | jpeeler | 2009-02-17 16:08:00 -0600 (Tue, 17 Feb 2009)
	  | 23 lines Merged revisions 176701 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176701 | jpeeler | 2009-02-17 15:54:34 -0600 (Tue, 17 Feb 2009)
	  | 17 lines Modify bridging to properly evaluate DTMF after first
	  warning is played The main problem is currently if the Dial flag
	  L is used with a warning sound, DTMF is not evaluated after the
	  first warning sound. To fix this, a flag has been added in
	  ast_generic_bridge for playing the warning which ensures that if
	  a scheduled warning is missed, multiple warrnings are not played
	  back (due to a feature evaluation or waiting for digits).
	  ast_channel_bridge was modified to store the nexteventts in the
	  ast_bridge_config structure as that information was lost every
	  time ast_channel_bridge was reentered, causing a hangup due to
	  incorrect time calculations. (closes issue #14315) Reported by:
	  tim_ringenbach Reviewed on reviewboard:
	  http://reviewboard.digium.com/r/163/ ........ ................

2009-02-17 21:41 +0000 [r176699]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/frame.h, /: Merged revisions 176697 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r176697 | mmichelson | 2009-02-17 15:40:09 -0600 (Tue, 17 Feb
	  2009) | 3 lines Clear up documentation of AST_FRIENDLY_OFFSET in
	  frame.h ........

2009-02-17 21:24 +0000 [r176675]  Russell Bryant <russell@digium.com>

	* main/timing.c, main/channel.c, /, res/res_timing_pthread.c,
	  res/res_timing_dahdi.c, include/asterisk/timing.h: Merged
	  revisions 176666 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176666 |
	  russell | 2009-02-17 15:22:40 -0600 (Tue, 17 Feb 2009) | 16 lines
	  Update the timing API to have better support for multiple timing
	  interfaces. 1) Add module use count handling so that timing
	  modules can be unloaded. 2) Implement unload_module() functions
	  for the timing interface modules. 3) Allow multiple timing
	  modules to be loaded, and use the one with the highest priority
	  value. 4) Report which timing module is being use in the "timing
	  test" CLI command. (closes issue #14489) Reported by: russell
	  Review: http://reviewboard.digium.com/r/162/ ........

2009-02-17 21:16 +0000 [r176644]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, channels/chan_local.c, /: Merged revisions
	  176592,176642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176592 |
	  tilghman | 2009-02-17 12:49:20 -0600 (Tue, 17 Feb 2009) | 4 lines
	  Add assertions in the quest to track down a refcount leak.
	  (closes issue #14485) Reported by: davevg ........ r176642 |
	  tilghman | 2009-02-17 15:14:18 -0600 (Tue, 17 Feb 2009) | 8 lines
	  Prior to masquerade, move the group definitions to the channel
	  performing the masq, so that the group count lingers past the
	  bridge. (closes issue #14275) Reported by: kowalma Patches:
	  20090216__bug14275.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: kowalma ........

2009-02-17 20:57 +0000 [r176559-176637]  Russell Bryant <russell@digium.com>

	* tests/test_heap.c (added), /: Merged revisions 176635 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r176635 | russell | 2009-02-17 14:56:26 -0600 (Tue, 17
	  Feb 2009) | 4 lines Add a test module for the heap
	  implementation. Review: http://reviewboard.digium.com/r/160/
	  ........

	* include/asterisk/heap.h (added), /, main/Makefile, main/heap.c
	  (added): Merged revisions 176632 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176632 |
	  russell | 2009-02-17 14:51:10 -0600 (Tue, 17 Feb 2009) | 8 lines
	  Add an implementation of the heap data structure. A heap is a
	  convenient data structure for implementing a priority queue. Code
	  from svn/asterisk/team/russell/heap/. Review:
	  http://reviewboard.digium.com/r/160/ ........

	* apps/app_queue.c, main/pbx.c, /: Merged revisions 176557 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r176557 | russell | 2009-02-17 11:33:38 -0600 (Tue, 17
	  Feb 2009) | 12 lines Fix a race condition that caused device
	  states to become incorrect for hints. The problem here is that
	  the hint processing code was subscribed to the wrong event type.
	  So, it started processing state for a hint too soon, before the
	  device state cache had been updated. Also, fix a similar bug in
	  app_queue, as it was also subscribed to the wrong event type.
	  (closes issue #14461) Reported by: alecdavis ........

2009-02-17 14:48 +0000 [r176461-176503]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 176501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176501 |
	  tilghman | 2009-02-17 08:39:36 -0600 (Tue, 17 Feb 2009) | 3 lines
	  In this version, we can combine the queries, because we support
	  dropping nonexistent columns. ........

	* /, channels/chan_sip.c: Merged revisions 176459 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r176459 | tilghman | 2009-02-16 19:58:39 -0600 (Mon, 16 Feb 2009)
	  | 17 lines Merged revisions 176426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176426 | tilghman | 2009-02-16 18:49:22 -0600 (Mon, 16 Feb 2009)
	  | 10 lines After a 'sip reload', qualifies for realtime peers
	  weren't immediately restarted, instead waiting until the next
	  registration. We're now caching the qualify across a
	  reload/restart and starting the qualify immediately upon loading
	  the peer. (closes issue #14196) Reported by: pdf Patches:
	  20090120__bug14196_1.4.diff.txt uploaded by pdf (license 663)
	  Tested by: pdf ........ ................

2009-02-16 23:57 +0000 [r176362]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 176355 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r176355 | dvossel | 2009-02-16 17:33:55 -0600
	  (Mon, 16 Feb 2009) | 13 lines Merged revisions 176354 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176354 | dvossel | 2009-02-16 17:30:52 -0600 (Mon, 16 Feb 2009)
	  | 8 lines Fixes issue with AST_CONTROL_SRCUPDATE not being
	  relayed correctly during bridging This should have been committed
	  with rev176247, but I missed it. srcupdate frames no longer break
	  out of the native bridge, but are not being sent to the other
	  call leg either. This fixs that. issue #13749 ........
	  ................

2009-02-16 23:17 +0000 [r176321]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 176320 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r176320 | tilghman | 2009-02-16 17:14:08 -0600 (Mon, 16 Feb 2009)
	  | 7 lines Use the correct list macros for deleting an item from
	  the middle of a list. (issue #13777) Reported by: pj Patches:
	  20090203__bug13777.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: pj ........

2009-02-16 22:00 +0000 [r176259]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/stringfields.h, /, main/utils.c: Merged
	  revisions 176255 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r176255 | kpfleming | 2009-02-16 15:45:54 -0600 (Mon, 16 Feb
	  2009) | 13 lines Merged revisions 176216 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176216 | kpfleming | 2009-02-16 15:10:38 -0600 (Mon, 16 Feb
	  2009) | 3 lines fix a flaw in the ast_string_field_build() family
	  of API calls; these functions made no attempt to reuse the space
	  already allocated to a field, so every time the field was written
	  it would allocate new space, leading to what appeared to be a
	  memory leak. ........ r176254 | kpfleming | 2009-02-16 15:41:46
	  -0600 (Mon, 16 Feb 2009) | 3 lines correct a logic error in the
	  last stringfields commit... don't mark additional space as
	  allocated if the string was built using already-allocated space
	  ........ ................

2009-02-16 21:50 +0000 [r176257]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_meetme.c: Merged revisions 176253 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r176253 | mmichelson | 2009-02-16 15:40:40 -0600 (Mon, 16 Feb
	  2009) | 24 lines Merged revisions 176249,176252 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176249 | mmichelson | 2009-02-16 15:34:27 -0600 (Mon, 16 Feb
	  2009) | 14 lines Open the DAHDI pseudo device and set it to be
	  nonblocking atomically Apparently on FreeBSD, attempting to set
	  the O_NONBLOCKING flag separately from opening the file was
	  causing an "inappropriate ioctl for device" error. While I cannot
	  fathom why this would be happening, I certainly am not opposed to
	  making the code a bit more compact/efficient if it also fixes a
	  bug. (closes issue #14482) Reported by: ys Patches: meetme.patch
	  uploaded by ys (license 281) Tested by: ys ........ r176252 |
	  mmichelson | 2009-02-16 15:39:21 -0600 (Mon, 16 Feb 2009) | 3
	  lines Remove unused variable and make dev-mode compilation happy
	  ........ ................

2009-02-16 21:36 +0000 [r176251]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 176248 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r176248 | dvossel | 2009-02-16 15:30:17 -0600
	  (Mon, 16 Feb 2009) | 11 lines Merged revisions 175597 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r175597 | dvossel | 2009-02-13 14:11:55 -0600 (Fri, 13
	  Feb 2009) | 4 lines Fixed iax2 key rotation backwards
	  compatibility Turns key rotation back on by default. Added bit
	  into encryption IE to indicate whether or not key rotation is
	  supported or not. If it is not supported then it is not enabled,
	  which insures backwards compatibility. This eliminates the need
	  for the keyrotate option in iax.conf, so it has been removed.
	  ........ ................

2009-02-16 18:38 +0000 [r176176]  Mark Michelson <mmichelson@digium.com>

	* /, main/logger.c: Merged revisions 176174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r176174 |
	  mmichelson | 2009-02-16 12:25:57 -0600 (Mon, 16 Feb 2009) | 11
	  lines Assist proper thread synchronization when stopping the
	  logger thread. I was finding that on my dev box, occasionally
	  attempting to "stop now" in trunk would cause Asterisk to hang. I
	  traced this to the fact that the logger thread was waiting on a
	  condition which had already been signalled. The logger thread
	  also need to be sure to check the value of the
	  close_logger_thread variable. The close_logger_thread variable is
	  only checked when the list of logmessages is empty. This allows
	  for the logger thread to print and free any pending messages
	  before exiting. ........

2009-02-16 17:10 +0000 [r176102]  Russell Bryant <russell@digium.com>

	* /, channels/chan_features.c (removed): Merged revisions 176100
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r176100 | russell | 2009-02-16 11:09:24 -0600 (Mon, 16
	  Feb 2009) | 4 lines Remove chan_features. Review:
	  http://reviewboard.digium.com/r/161/ ........

2009-02-16 17:07 +0000 [r176099]  Tilghman Lesher <tlesher@digium.com>

	* configs/func_odbc.conf.sample: Eliminate mention of a variable
	  which exists only in trunk. (Thanks, jsmith)

2009-02-16 15:38 +0000 [r176032]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 176030 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r176030 | file | 2009-02-16 11:36:19 -0400 (Mon, 16 Feb 2009) |
	  16 lines Merged revisions 176029 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r176029 | file | 2009-02-16 11:33:53 -0400 (Mon, 16 Feb 2009) | 9
	  lines Don't have the Via header stored as a stringfield as it can
	  change often during the lifetime of a dialog. This issue crept up
	  with subscriptions on the AA50. When an outgoing NOTIFY is sent a
	  new branch value is created and the Via header is changed to
	  reflect it. Since this was a stringfield a new spot in the pool
	  was used for the value while the old was left untouched/unused.
	  If the current pool was full a new pool was created. This would
	  cause memory usage to increase steadily. (issue #AA50-2332)
	  ........ ................

2009-02-16 09:42 +0000 [r176023]  Michiel van Baak <michiel@vanbaak.info>

	* include/asterisk/manager.h, doc/unistim.txt,
	  channels/chan_unistim.c, /, channels/chan_sip.c: Merged revisions
	  175952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r175952 | mvanbaak | 2009-02-16 01:26:59 +0100 (Mon, 16 Feb 2009)
	  | 10 lines Merged revisions 175921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175921 | mvanbaak | 2009-02-16 00:37:03 +0100 (Mon, 16 Feb 2009)
	  | 3 lines fix mis-spelling of the word registered. Reported by
	  De_Mon on #asterisk-dev. ........ ................

2009-02-15 21:28 +0000 [r175831-175890]  Russell Bryant <russell@digium.com>

	* main/sched.c, /, include/asterisk/sched.h: Merged revisions
	  175882 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175882 |
	  russell | 2009-02-15 15:27:33 -0600 (Sun, 15 Feb 2009) | 2 lines
	  Make ast_sched_report() and ast_sched_dump() thread safe.
	  ........

	* main/sched.c, /, channels/chan_sip.c, include/asterisk/sched.h:
	  Merged revisions 175829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175829 |
	  russell | 2009-02-15 14:56:27 -0600 (Sun, 15 Feb 2009) | 14 lines
	  Fix a number of problems with ast_sched_report(). 1) It had
	  numerous coding guidelines violations with regards to formatting.
	  2) It allocated memory using ast_calloc() that was never freed.
	  3) It didn't check for failure from the allocation. 4) It used
	  sprintf() and strcat() to build the result, doing zero checking
	  to prevent writing past the end of the provided buffer. The
	  function also lacks API documentation, but that has not been
	  addressed in this commit. ........

2009-02-13 20:48 +0000 [r175662]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, configs/iax.conf.sample, channels/iax2.h:
	  Merged revisions 175597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175597 |
	  dvossel | 2009-02-13 14:11:55 -0600 (Fri, 13 Feb 2009) | 4 lines
	  Fixed iax2 key rotation backwards compatibility Turns key
	  rotation back on by default. Added bit into encryption IE to
	  indicate whether or not key rotation is supported or not. If it
	  is not supported then it is not enabled, which insures backwards
	  compatibility. This eliminates the need for the keyrotate option
	  in iax.conf, so it has been removed. ........

2009-02-13 19:52 +0000 [r175593]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 175591 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r175591 | mmichelson | 2009-02-13 13:49:38 -0600
	  (Fri, 13 Feb 2009) | 22 lines Merged revisions 175590 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175590 | mmichelson | 2009-02-13 13:47:48 -0600 (Fri, 13 Feb
	  2009) | 16 lines Fix a potential crash situation when using IMAP
	  voicemail If calling into VoiceMailMain when using IMAP storage,
	  it was possible to crash Asterisk by hanging up the phone when
	  prompted for a voicemail mailbox. This patch fixes the issue.
	  While it may appear that this patch is superficial, it allows
	  code execution to continue to the failure case just below the
	  IMAP_STORAGE code block where this patch has been applied (closes
	  issue #14473) Reported by: dwpaul Patches:
	  voicemail_imap_crash_no_mailbox.patch uploaded by dwpaul (license
	  689) ........ ................

2009-02-13 16:44 +0000 [r175551]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_record.c: Merged revisions 175549 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175549 |
	  file | 2009-02-13 12:41:15 -0400 (Fri, 13 Feb 2009) | 4 lines Add
	  an option to keep the recorded file upon hangup. (closes issue
	  #14341) Reported by: fnordian ........

2009-02-12 21:41 +0000 [r175370]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 175368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175368 |
	  russell | 2009-02-12 15:41:01 -0600 (Thu, 12 Feb 2009) | 2 lines
	  Remove useless string copy, and make sscanf safe again ........

2009-02-12 21:27 +0000 [r175342]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, /: Merged revisions 175334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r175334 | tilghman | 2009-02-12 15:25:14 -0600 (Thu, 12 Feb 2009)
	  | 16 lines Merged revisions 175311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175311 | tilghman | 2009-02-12 15:19:40 -0600 (Thu, 12 Feb 2009)
	  | 9 lines Fix crashes when receiving certain T.38 packets. Also,
	  increase the maximum size of T.38 packets and warn users when
	  they try to set the limits above those maximums. (closes issue
	  #13050) Reported by: schern Patches: 20090212__bug13050.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: schern ........
	  ................

2009-02-12 20:51 +0000 [r175300]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 175298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r175298 | jpeeler | 2009-02-12 14:48:56 -0600 (Thu, 12 Feb 2009)
	  | 15 lines Merged revisions 175294 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175294 | jpeeler | 2009-02-12 14:34:36 -0600 (Thu, 12 Feb 2009)
	  | 9 lines Fix ParkedCall event information for From field in the
	  case of a blind transfer If the parker information can not be
	  obtained from the peer, try and see if the BLINDTRANSFER channel
	  variable has been set. Previously, a blind transfer to the
	  ParkAndAnnounce app would return nothing for the From. Closes
	  AST-189 ........ ................

2009-02-12 20:48 +0000 [r175257-175297]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 175295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175295 |
	  russell | 2009-02-12 14:45:47 -0600 (Thu, 12 Feb 2009) | 2 lines
	  Avoid using ast_strdupa() in a loop. ........

	* build_tools/cflags.xml, /: Merged revisions 175255 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r175255 | russell | 2009-02-12 13:11:08 -0600 (Thu, 12 Feb 2009)
	  | 4 lines Don't enable something by default that has a dependency
	  on something _not_ enabled by default. menuselect was not happy
	  with this. ........

2009-02-12 18:50 +0000 [r175251]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 175250 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r175250 | kpfleming | 2009-02-12 12:48:52 -0600 (Thu, 12 Feb
	  2009) | 1 line correct warning message to not refer specifically
	  to DAHDI ........

2009-02-12 18:01 +0000 [r175190]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 175188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r175188 | jpeeler | 2009-02-12 12:00:11 -0600 (Thu, 12 Feb 2009)
	  | 12 lines Merged revisions 175187 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175187 | jpeeler | 2009-02-12 11:57:10 -0600 (Thu, 12 Feb 2009)
	  | 6 lines Fix crash in event of failed attempt to transfer to
	  parking The peer may not necessarily exist, such as in the case
	  of a transfer to ParkAndAnnounce. In this case don't try to play
	  a sound to it. ........ ................

2009-02-12 17:09 +0000 [r175130]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 175127 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r175127 | dvossel | 2009-02-12 11:07:17 -0600 (Thu, 12 Feb 2009)
	  | 4 lines Setting key rotation to be off by default Key rotation
	  breaks compatibility between (trunk/1.6.1) and (1.2/1.4/1.6.0).
	  As a follow up to this, I am investigating possible ways to allow
	  key rotation to be on by default and not affect the other
	  branches, but for now it must be turned off. ........

2009-02-12 17:08 +0000 [r175129]  Russell Bryant <russell@digium.com>

	* main/rtp.c, /: Merged revisions 175125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r175125 | russell | 2009-02-12 10:57:25 -0600 (Thu, 12 Feb 2009)
	  | 35 lines Merged revisions 175124 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r175124 | russell | 2009-02-12 10:51:13 -0600 (Thu, 12 Feb 2009)
	  | 27 lines Don't send DTMF for infinite time if we do not receive
	  an END event. I thought that this was going to end up being a
	  pretty gnarly fix, but it turns out that there was actually
	  already a configuration option in rtp.conf, dtmftimeout, that was
	  intended to handle this situation. However, in between Asterisk
	  1.2 and Asterisk 1.4, the code that processed the option got
	  lost. So, this commit brings it back to life. The default timeout
	  is 3 seconds. However, it is worth noting that having this be
	  configurable at all is not really the recommended behavior in RFC
	  2833. From Section 3.5 of RFC 2833: Limiting the time period of
	  extending the tone is necessary to avoid that a tone "gets
	  stuck". Regardless of the algorithm used, the tone SHOULD NOT be
	  extended by more than three packet interarrival times. A slight
	  extension of tone durations and shortening of pauses is generally
	  harmless. Three seconds will pretty much _always_ be far more
	  than three packet interarrival times. However, that behavior is
	  not required, so I'm going to leave it with our legacy behavior
	  for now. Code from svn/asterisk/team/russell/issue_14460 (closes
	  issue #14460) Reported by: moliveras ........ ................

2009-02-12 16:35 +0000 [r174947-175123]  Mark Michelson <mmichelson@digium.com>

	* main/astobj2.c, /, include/asterisk/astobj2.h: Merged revisions
	  175121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r175121 |
	  mmichelson | 2009-02-12 10:28:06 -0600 (Thu, 12 Feb 2009) | 11
	  lines Make lock information for ao2_trylock be more useful and
	  gnarly Core show locks information involving an ao2_trylock did
	  not show the function that called ao2_trylock, but would instead
	  show ao2_trylock as the source of the lock. This is not useful
	  when trying to debug locking issues. One bizarre note is that
	  this logic is already in 1.4 but somehow did not get merged to
	  trunk or the 1.6.X branches. ........

	* apps/app_queue.c, /: Merged revisions 174951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174951 |
	  mmichelson | 2009-02-11 17:12:57 -0600 (Wed, 11 Feb 2009) | 3
	  lines Fix a bit of odd logic for announcing position. Sync with
	  1.6.0's logic ........

	* apps/app_queue.c, /: Merged revisions 174948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174948 |
	  mmichelson | 2009-02-11 17:03:08 -0600 (Wed, 11 Feb 2009) | 20
	  lines Fix odd "thank you" sound playing behavior in app_queue.c
	  If someone has configured the queue to play an position or
	  holdtime announcement, then it is odd and potentially unexpected
	  to hear a "Thank you for your patience" sound when no position or
	  holdtime was actually announced. This fixes the announcement so
	  that the "thanks" sound is only played in the case that a
	  position or holdtime was actually announced. There is a way that
	  the "thank you" sound can be played without a position or
	  holdtime, and that is to set announce-frequency to a value but
	  keep announce-position and announce-holdtime both turned off.
	  (closes issue #14227) Reported by: caspy Patches: 14227_v3.patch
	  uploaded by putnopvut (license 60) Tested by: caspy ........

	* apps/app_dial.c, main/channel.c, main/pbx.c, /,
	  apps/app_dictate.c, apps/app_waitforsilence.c,
	  include/asterisk/channel.h: Merged revisions 174945 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r174945 | mmichelson | 2009-02-11 16:41:01 -0600 (Wed, 11 Feb
	  2009) | 29 lines Fix 'd' option for app_dial and add new option
	  to Answer application The 'd' option would not work for channel
	  types which use RTP to transport DTMF digits. The only way to
	  allow for this to work was to answer the channel if we saw that
	  this option was enabled. I realized that this may cause issues
	  with CDRs, specifically with giving false dispositions and answer
	  times. I therefore modified ast_answer to take another parameter
	  which would tell if the CDR should be marked answered. I also
	  extended this to the Answer application so that the channel may
	  be answered but not CDRified if desired. I also modified
	  app_dictate and app_waitforsilence to only answer the channel if
	  it is not already up, to help not allow for faulty CDR answer
	  times. All of these changes are going into Asterisk trunk. For
	  1.6.0 and 1.6.1, however, all the changes except for the change
	  to the Answer application will go in since we do not introduce
	  new features into stable branches (closes issue #14164) Reported
	  by: DennisD Patches: 14164.patch uploaded by putnopvut (license
	  60) Tested by: putnopvut Review:
	  http://reviewboard.digium.com/r/145 ........

2009-02-11 14:46 +0000 [r174846]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 174844 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174844 |
	  file | 2009-02-11 10:44:47 -0400 (Wed, 11 Feb 2009) | 10 lines
	  Tell the device state core a change happened when a channel is
	  freed but not a specific state. We need to do this because while
	  we know that the freeing of the channel may cause something to
	  become not in use we do not know this for sure. There may be
	  another channel that is still up which would cause it to be in
	  use. (closes issue #13238) Reported by: kowalma Patches:
	  20090121__bug13238.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: alecdavis ........

2009-02-10 23:21 +0000 [r174769-174823]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 174805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174805 |
	  mmichelson | 2009-02-10 17:17:03 -0600 (Tue, 10 Feb 2009) | 11
	  lines Fix potential for stack overflows in app_chanspy.c When
	  using the 'g' or 'e' options, the stack allocations that were
	  used could cause a stack overflow if a spyer stayed on the line
	  long enough without actually successfully spying on anyone. The
	  problem has been corrected by using static buffers and copying
	  the contents of the appropriate strings into them instead of
	  using functions like alloca or ast_strdupa ........

	* main/manager.c, /: Merged revisions 174764 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174764 |
	  mmichelson | 2009-02-10 15:45:14 -0600 (Tue, 10 Feb 2009) | 21
	  lines Fix an fd leak that would occur in HTTP AMI sessions The
	  explanation behind this fix is a bit complicated, and I've
	  already typed it up in the code as a huge comment inside of
	  manager.c, so I'll give the abridged version here. We needed a
	  way to separate action-specific data from session-specific data.
	  Unfortunately, the only way to maintain API compatibility and to
	  not have to change every single manager action was to rename the
	  current mansession structure and wrap it inside a new mansession
	  structure which actually contains action- specific data. (closes
	  issue #14364) Reported by: awk Patches: 14364_better.patch
	  uploaded by putnopvut (license 60) Tested by: putnopvut Review:
	  http://reviewboard.digium.com/r/148/ ........

2009-02-10 20:17 +0000 [r174714]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 174710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174710 |
	  file | 2009-02-10 16:15:43 -0400 (Tue, 10 Feb 2009) | 4 lines
	  Only decrease inringing count if above zero. (issue #13238)
	  Reported by: kowalma ........

2009-02-10 18:18 +0000 [r174590]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/jitterbuf.c: Merged revisions 174584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r174584 | mnicholson | 2009-02-10 12:16:31 -0600 (Tue, 10 Feb
	  2009) | 25 lines Merged revisions 174583 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174583 | mnicholson | 2009-02-10 11:52:42 -0600 (Tue, 10 Feb
	  2009) | 18 lines Improve behavior of jitterbuffer when
	  maxjitterbuffer is set. This change improves the way the
	  jitterbuffer handles maxjitterbuffer and dramatically reduces the
	  number of frames dropped when maxjitterbuffer is exceeded. In the
	  previous jitterbuffer, when maxjitterbuffer was exceeded, all new
	  frames were dropped until the jitterbuffer is empty. This change
	  modifies the code to only drop frames until maxjitterbuffer is no
	  longer exceeded. Also, previously when maxjitterbuffer was
	  exceeded, dropped frames were not tracked causing stats for
	  dropped frames to be incorrect, this change also addresses that
	  problem. (closes issue #14044) Patches: bug14044-1.diff uploaded
	  by mnicholson (license 96) Tested by: mnicholson Review:
	  http://reviewboard.digium.com/r/144/ ........ ................

2009-02-10 17:49 +0000 [r174545-174582]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 174580 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174580 |
	  file | 2009-02-10 13:48:29 -0400 (Tue, 10 Feb 2009) | 4 lines Set
	  the type for the peer structure to be a peer as the default.
	  (closes issue #14447) Reported by: triccyx ........

	* /, channels/chan_sip.c: Merged revisions 174543 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174543 |
	  file | 2009-02-10 11:37:07 -0400 (Tue, 10 Feb 2009) | 6 lines
	  Make the logic for inuse and inringing manipluation match that of
	  1.4. The old broken logic would reset the values back to 0 during
	  certain scenarios causing the wrong state to be reported. (closes
	  issue #14399) Reported by: caspy (issue #13238) Reported by:
	  kowalma ........

2009-02-10 07:07 +0000 [r174471-174504]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, apps/app_voicemail.c, /: Merged revisions
	  174503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174503 |
	  tilghman | 2009-02-10 01:06:29 -0600 (Tue, 10 Feb 2009) | 2 lines
	  Fix0ring build ........

	* apps/app_stack.c, /: Merged revisions 174470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174470 |
	  tilghman | 2009-02-09 23:39:33 -0600 (Mon, 09 Feb 2009) | 2 lines
	  Remove the usage of the KeepAlive app, as it no longer exists.
	  ........

2009-02-10 05:13 +0000 [r174428-174440]  Steve Murphy <murf@digium.com>

	* apps/app_osplookup.c: This patch corrects warnings which seem to
	  appear only on 64-bit compilers, gcc-4.3.2.

	* apps/app_rpt.c: One final fix in the 1.6.1 release only; some
	  variables the compiler worries "may not be initialized".

	* apps/app_rpt.c, /: Merged revisions 174435 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174435 |
	  murf | 2009-02-09 21:49:02 -0700 (Mon, 09 Feb 2009) | 8 lines
	  This patch removes the use of AST_PBX_KEEPALIVE from app_rpt.c.
	  (closes issue #14435) Reported by: D_McNaul ........

	* apps/app_rpt.c, /: Merged revisions 174432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174432 |
	  murf | 2009-02-09 21:36:22 -0700 (Mon, 09 Feb 2009) | 3 lines
	  More intptr_t work. ........

	* apps/app_rpt.c, /: Merged revisions 174370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r174370 | murf | 2009-02-09 19:45:56 -0700 (Mon, 09 Feb 2009) |
	  10 lines Merged revisions 174369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174369 | murf | 2009-02-09 19:27:40 -0700 (Mon, 09 Feb 2009) | 5
	  lines This patch solves some compiler complaints in both 32 and
	  64-bit environments. ........ ................

2009-02-09 17:47 +0000 [r174330]  David Vossel <dvossel@digium.com>

	* /, apps/app_externalivr.c: Merged revisions 174325 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r174325 | dvossel | 2009-02-09 11:26:02 -0600 (Mon, 09 Feb 2009)
	  | 9 lines Fixes issue with hangups not being sent and external
	  process never terminating. The ignore_hangup, run_dead, and
	  noanswer flags were never initilized to zero causing hangups to
	  never be issued. If the external script expects to be notified of
	  a hangup and never receives one, it runs indefinitely. (closes
	  issue #14251) Reported by: chris-mac Tested by: dvossel ........

2009-02-09 17:30 +0000 [r174326-174329]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 174327 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r174327 |
	  mmichelson | 2009-02-09 11:27:32 -0600 (Mon, 09 Feb 2009) | 3
	  lines Fix something I messed up in the merge I just did ........

	* /, channels/chan_sip.c: Merged revisions 174301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r174301 | mmichelson | 2009-02-09 11:20:55 -0600 (Mon, 09 Feb
	  2009) | 20 lines Merged revisions 174282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174282 | mmichelson | 2009-02-09 11:11:05 -0600 (Mon, 09 Feb
	  2009) | 12 lines Don't do an SRV lookup if a port is specified
	  RFC 3263 says to do A record lookups on a hostname if a port has
	  been specified, so that's what we're going to do. See section
	  4.2. (closes issue #14419) Reported by: klaus3000 Patches:
	  patch_chan_sip_nosrvifport_1.4.23.txt uploaded by klaus3000
	  (license 65) ........ ................

2009-02-09 14:50 +0000 [r174221]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 174219 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r174219 | file | 2009-02-09 10:49:24 -0400 (Mon,
	  09 Feb 2009) | 11 lines Merged revisions 174218 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174218 | file | 2009-02-09 10:48:21 -0400 (Mon, 09 Feb 2009) | 4
	  lines Don't overwrite our pointer to the music class when music
	  on hold stops. We will use this if it starts again to see if we
	  can resume the music where it left off. (closes issue #14407)
	  Reported by: mostyn ........ ................

2009-02-07 16:18 +0000 [r174154]  Russell Bryant <russell@digium.com>

	* /, res/snmp/agent.c: Merged revisions 174149 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r174149 | russell | 2009-02-07 10:16:50 -0600 (Sat, 07 Feb 2009)
	  | 10 lines Merged revisions 174148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174148 | russell | 2009-02-07 10:15:07 -0600 (Sat, 07 Feb 2009)
	  | 2 lines Fix a race condition that could cause a crash. ........
	  ................

2009-02-07 00:09 +0000 [r174086]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, channels/chan_sip.c: Merged revisions 174084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r174084 | dhubbard | 2009-02-06 17:51:56 -0600 (Fri, 06 Feb 2009)
	  | 13 lines Merged revisions 174082 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r174082 | dhubbard | 2009-02-06 17:36:03 -0600 (Fri, 06 Feb 2009)
	  | 5 lines check ast_strlen_zero() before calling ast_strdupa() in
	  sip_uri_headers_cmp() and sip_uri_params_cmp() The reporter
	  didn't actually upload a properly-formed patch, instead a
	  modified chan_sip.c file was uploaded. I created a patch to
	  determine the changes, then modified the suggested changes to
	  create a proper fix. The summary above is a complete description
	  of the changes. (closes issue #13547) Reported by: tecnoxarxa
	  Patches: chan_sip.c.gz uploaded by tecnoxarxa (license 258)
	  Tested by: tecnoxarxa ........ ................

2009-02-06 19:30 +0000 [r173994-174043]  Joshua Colp <jcolp@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 174041 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r174041 | file | 2009-02-06 15:28:53 -0400 (Fri, 06 Feb 2009) | 4
	  lines Don't subscribe to a mailbox on pseudo channels. It is
	  futile. This solves an issue where duplicated pseudo channels
	  would cause a crash because the first one would unsubscribe and
	  the next one would also try to unsubscribe the same subscription.
	  (closes issue #14322) Reported by: amessina ........

	* /, channels/chan_sip.c: Merged revisions 173974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173974 | file | 2009-02-06 13:18:35 -0400 (Fri, 06 Feb 2009) |
	  15 lines Merged revisions 173967-173968 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173967 | file | 2009-02-06 13:14:15 -0400 (Fri, 06 Feb 2009) | 4
	  lines Some clients do not put the call-id for replaces at the
	  beginning, so support it being anywhere in the string. (closes
	  issue #14350) Reported by: fhackenberger ........ r173968 | file
	  | 2009-02-06 13:15:01 -0400 (Fri, 06 Feb 2009) | 2 lines Remove a
	  debug message I put in by accident. ........ ................

2009-02-06 17:05 +0000 [r173964-173966]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 173952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173952 | mnicholson | 2009-02-06 10:28:19 -0600 (Fri, 06 Feb
	  2009) | 14 lines Merged revisions 173917 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173917 | mnicholson | 2009-02-06 10:20:23 -0600 (Fri, 06 Feb
	  2009) | 7 lines Limit the addition of the Contact header in SIP
	  responses according to various SIP RFCs. (closes issue #13602)
	  Reported by: hjourdain Tested by: mnicholson ........
	  ................

	* main/ast_expr2.c, /, channels/chan_sip.c, main/ast_expr2.h:
	  revert revision 173964

	* main/ast_expr2.c, /, channels/chan_sip.c, main/ast_expr2.h:
	  Merged revisions 173952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173952 | mnicholson | 2009-02-06 10:28:19 -0600 (Fri, 06 Feb
	  2009) | 14 lines Merged revisions 173917 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173917 | mnicholson | 2009-02-06 10:20:23 -0600 (Fri, 06 Feb
	  2009) | 7 lines Limit the addition of the Contact header in SIP
	  responses according to various SIP RFCs. (closes issue #13602)
	  Reported by: hjourdain Tested by: mnicholson ........
	  ................

2009-02-06 16:01 +0000 [r173904]  Joshua Colp <jcolp@digium.com>

	* apps/app_chanspy.c, /, main/audiohook.c: Merged revisions 173902
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r173902 | file | 2009-02-06 11:59:17 -0400 (Fri, 06 Feb
	  2009) | 4 lines Always detach and destroy the whisper and barge
	  audiohooks. Additionally also allow an audiohook to be detached
	  if it has not been attached. (closes issue #14414) Reported by:
	  bluecrow76 ........

2009-02-06 10:26 +0000 [r173850]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 173848 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173848 |
	  russell | 2009-02-06 04:25:09 -0600 (Fri, 06 Feb 2009) | 2 lines
	  Resolve a memory leak that would occur on an invalid channel
	  given to Action: Status ........

2009-02-05 23:53 +0000 [r173779]  Mark Michelson <mmichelson@digium.com>

	* configs/extensions.conf.sample, /: Merged revisions 173776 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r173776 | mmichelson | 2009-02-05 17:48:48 -0600 (Thu,
	  05 Feb 2009) | 14 lines Update extensions.conf.sample to be
	  correct. In trunk, the only necessary change pointed out was that
	  the call to ChanIsAvail uses an option that has been removed. For
	  the 1.6.1 branch, however, it appears that the sample file is
	  badly in need of updating since there are |'s used all over the
	  place there. My tentative plan is just to copy trunk's sample
	  config file to those branches since the info there is most
	  up-to-date and should be correct for use in 1.6.1 Thanks to macli
	  in #asterisk-dev for bringing this up ........

2009-02-05 23:51 +0000 [r173778]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_sqlite.c: Oops, merge from trunk broke 1.6.1

2009-02-05 23:31 +0000 [r173775]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 173773 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r173773 | mmichelson | 2009-02-05 17:28:19 -0600 (Thu, 05 Feb
	  2009) | 7 lines Properly set "seen" and "unseen" flags when
	  moving messages from the new to the old folder when using IMAP
	  for voicemail storage (closes issue #13905) Reported by: jaroth
	  Patches: foldermove_v2.patch uploaded by jaroth (license 50)
	  ........

2009-02-05 21:06 +0000 [r173699]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 173697 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r173697 | jpeeler | 2009-02-05 15:00:26 -0600
	  (Thu, 05 Feb 2009) | 18 lines Merged revisions 173696 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173696 | jpeeler | 2009-02-05 14:47:51 -0600 (Thu, 05 Feb 2009)
	  | 12 lines Add new configuration option to make shared IMAP
	  mailboxes function as expected. The new option is "imapvmshareid"
	  which is an ID to tag multiple mailboxes using the same IMAP
	  storage location to function as one mailbox. This allows all
	  messages to be retrieved for any user in the group. The patch
	  alters the 'X-Asterisk-VM-Extension' header that is responsible
	  for matching voicemails for a given user. (closes issue #13673)
	  Reported by: howardwilkinson ........ ................

2009-02-05 20:35 +0000 [r173695]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 173693 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173693 | mmichelson | 2009-02-05 14:30:45 -0600 (Thu, 05 Feb
	  2009) | 20 lines Merged revisions 173692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173692 | mmichelson | 2009-02-05 14:29:09 -0600 (Thu, 05 Feb
	  2009) | 12 lines Fix situations where queue members could be
	  autopaused unexpectedly Specifically, this patch prevents us from
	  autopausing members when we receive a busy or congestion frame
	  from them. (closes issue #14376) Reported by: fiddur Patches:
	  14376.patch uploaded by putnopvut (license 60) Tested by: fiddur
	  ........ ................

2009-02-05 19:37 +0000 [r173658]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_sqlite.c, /: Merged revisions 173657 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r173657 | tilghman | 2009-02-05 13:36:29 -0600 (Thu, 05 Feb 2009)
	  | 2 lines Change the first field, or we don't get the necessary
	  field separation. ........

2009-02-05 18:50 +0000 [r173541-173595]  Mark Michelson <mmichelson@digium.com>

	* apps/app_mixmonitor.c, /: Merged revisions 173593 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r173593 | mmichelson | 2009-02-05 12:48:55 -0600
	  (Thu, 05 Feb 2009) | 11 lines Merged revisions 173592 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173592 | mmichelson | 2009-02-05 12:47:24 -0600 (Thu, 05 Feb
	  2009) | 3 lines Add some missing cleanup to app_mixmonitor
	  ........ ................

	* apps/app_mixmonitor.c, /: Merged revisions 173589 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r173589 | mmichelson | 2009-02-05 12:34:06 -0600
	  (Thu, 05 Feb 2009) | 33 lines Merged revisions 173559 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173559 | mmichelson | 2009-02-05 11:34:33 -0600 (Thu, 05 Feb
	  2009) | 25 lines Fix a problem where a channel pointer becomes
	  invalid due to masquerading or hanging up. app_mixmonitor runs
	  its own thread to monitor the channel's activity and write the
	  mixed audio to a file. Since this thread runs independently of
	  the channel, it is possible that the mixmonitor thread's channel
	  pointer will point to freed memory when the channel either is
	  masqueraded or hangs up (technically, both cases are hangups, but
	  we need to handle the cases slightly differently). The solution
	  for this is to employ a datastore, which has the nice benefit of
	  allowing us to hook into channel masquerades and hangups and
	  update our pointer as necessary. If this looks familiar, this
	  same technique is employed in app_chanspy. app_chanspy is a bit
	  more involved since it does a lot more operations on the channel
	  that is being spied upon. app_mixmonitor does have an extra touch
	  that app_chanspy doesn't have, though. Since there is a thread
	  race between the channel's thread and the mixmonitor thread on a
	  hangup, we em- ploy a condition-and-boolean combination to ensure
	  that the channel thread finishes with our structure before the
	  mixmonitor thread attempts to free it. No crashes! (closes issue
	  #14374) Reported by: aragon Patches: 14374.patch uploaded by
	  putnopvut (license 60) Tested by: aragon, putnopvut ........
	  ................

	* apps/app_queue.c, /: Merged revisions 173507 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173507 |
	  mmichelson | 2009-02-04 16:16:19 -0600 (Wed, 04 Feb 2009) | 7
	  lines Fix some areas where the incorrect interface was passed to
	  ast_device_state I swear it feels like I already did this once...
	  (closes issue #14359) Reported by: francesco_r ........

2009-02-04 21:32 +0000 [r173506]  David Vossel <dvossel@digium.com>

	* channels/chan_iax2.c, channels/iax2-parser.h, /: Merged revisions
	  173502 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173502 |
	  dvossel | 2009-02-04 15:25:14 -0600 (Wed, 04 Feb 2009) | 9 lines
	  Fixes issue with IAX2 transfer not handing off calls. Reverts
	  changes in 116884 Fixes issue with IAX2 transfers not taking
	  place. As it was, a call that was being transfered would never be
	  handed off correctly to the call ends because of how call numbers
	  were stored in a hash table. The hash table,
	  "iax_peercallno_pvt", storing all the current call numbers did
	  not take into account the complications associated with
	  transferring a call, so a separate hash table was required. This
	  second hash table "iax_transfercallno_pvt" handles calls being
	  transfered, once the call transfer is complete the call is
	  removed from the transfer hash table and added to the peer hash
	  table resuming normal operations. Addition functions were created
	  to handle storing, removing, and comparing items in the
	  iax_transfercallno_pvt table. The changes reverted in 116884
	  caused backwards compatibility issues involving iax2 transfer
	  with 1.6.0, 1.4, and 1.2. (closes issue #13468) Reported by:
	  nicox Tested by: dvossel ........

2009-02-04 21:28 +0000 [r173505]  Jeff Peeler <jpeeler@digium.com>

	* include/asterisk/features.h, /, main/features.c: Merged revisions
	  173500 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173500 | jpeeler | 2009-02-04 15:17:53 -0600 (Wed, 04 Feb 2009)
	  | 23 lines Merged revisions 173211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173211 | jpeeler | 2009-02-03 15:57:01 -0600 (Tue, 03 Feb 2009)
	  | 17 lines Parking attempts made to one end of a bridge no longer
	  will hang up due to a parking failure. Parking attempts made
	  using either one-touch, or doing either a blind or assisted
	  transfer to the parking extension now keep up the bridge instead
	  of hanging up the attempted parked party. Normal causes for the
	  parking attempt to fail includes the specific specified extension
	  (via PARKINGEXTEN) not being available or if all the parking
	  spaces are currently in use. To avoid having to reverse a
	  masquerade park_space_reserve was made to provide foresight if a
	  parking attempt will succeed and if so reserve the parking space.
	  (closes issue #13494) Reported by: mdu113 Reviewed by Russell:
	  http://reviewboard.digium.com/r/133/ ........ ................

2009-02-04 18:52 +0000 [r173459]  Tilghman Lesher <tlesher@digium.com>

	* main/tcptls.c, /: Merged revisions 173458 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173458 |
	  tilghman | 2009-02-04 12:48:06 -0600 (Wed, 04 Feb 2009) | 9 lines
	  When using a socket as a FILE *, the stdio functions will
	  sometimes try to do an fseek() on the stream, which is an invalid
	  operation for a socket. Turning off buffering explicitly lets the
	  stdio functions know they cannot do this, thus avoiding a
	  potential error. (closes issue #14400) Reported by: fnordian
	  Patches: tcptls.patch uploaded by fnordian (license 110) ........

2009-02-04 17:46 +0000 [r173356-173399]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 173397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173397 | mmichelson | 2009-02-04 11:45:14 -0600 (Wed, 04 Feb
	  2009) | 11 lines Merged revisions 173396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173396 | mmichelson | 2009-02-04 11:44:48 -0600 (Wed, 04 Feb
	  2009) | 3 lines Revert my previous change because it was stupid
	  ........ ................

	* apps/app_chanspy.c, /: Merged revisions 173393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173393 | mmichelson | 2009-02-04 11:41:02 -0600 (Wed, 04 Feb
	  2009) | 11 lines Merged revisions 173392 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173392 | mmichelson | 2009-02-04 11:40:29 -0600 (Wed, 04 Feb
	  2009) | 3 lines Add a missing unlock. Extremely unlikely to ever
	  matter, but it's needed. ........ ................

	* /, main/file.c: Merged revisions 173354 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173354 |
	  mmichelson | 2009-02-04 09:30:12 -0600 (Wed, 04 Feb 2009) | 30
	  lines Fix a problem where file playback would cause fds to remain
	  open forever The problem came from the fact that a frame read
	  from a format interpreter was not freed. Adding a call to
	  ast_frfree fixed this. The explanation for why this caused the
	  problem is a bit complex, but here goes: There was a problem in
	  all versions of Asterisk where the embedded frame of a filestream
	  structure was referenced after the filestream was freed. This was
	  fixed by adding reference counting to the filestream structure.
	  The refcount would increase every time that a filestream's frame
	  pointer was pointing to an actual frame of data. When the frame
	  was freed, the refcount would decrease. Once the refcount reached
	  0, the filestream was freed, and as part of the operation, the
	  open files were closed as well. Thus it becomes more clear why a
	  missing ast_frfree would cause a reference leak and cause the
	  files to not be closed. You may ask then if there was a frame
	  leak before this patch. The answer to that is actually no! The
	  filestream code was "smart" enough to know that since the frame
	  we received came from a format interpreter, the frame had no
	  malloced data and thus didn't need to be freed. Now, however,
	  there is cleanup that needs to be done when we finish with the
	  frame, so we do need to call ast_frfree on the frame to be sure
	  that the refcount for the filestream is decremented
	  appropriately. (closes issue #14384) Reported by: fiddur Patches:
	  14384.patch uploaded by putnopvut (license 60) Tested by: fiddur,
	  putnopvut ........

2009-02-04 00:46 +0000 [r173313]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 173311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r173311 |
	  tilghman | 2009-02-03 18:43:52 -0600 (Tue, 03 Feb 2009) | 10
	  lines Ensure that commas placed in the middle of extension
	  character classes do not interfere with correct parsing of the
	  extension. Also, if an unterminated character class DOES make its
	  way into the pbx core (through some other method), ensure that it
	  does not crash Asterisk. (closes issue #14362) Reported by:
	  Nick_Lewis Patches: 20090129__bug14362.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: Corydon76 ........

2009-02-03 00:26 +0000 [r173115]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample, /: Merged revisions 173104 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r173104 | tilghman | 2009-02-02 18:24:52 -0600
	  (Mon, 02 Feb 2009) | 12 lines Merged revisions 173070 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173070 | tilghman | 2009-02-02 18:15:59 -0600 (Mon, 02 Feb 2009)
	  | 5 lines Add warning to standard config, that globals may be
	  overridden by other dialplan configuration files. (closes issue
	  #14388) Reported by: macli ........ ................

2009-02-03 00:01 +0000 [r173069]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Merged revisions 173067 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r173067 | twilson | 2009-02-02 17:57:25 -0600 (Mon, 02 Feb 2009)
	  | 9 lines Merged revisions 173066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r173066 | twilson | 2009-02-02 17:48:06 -0600 (Mon, 02 Feb 2009)
	  | 2 lines Fix a feature inheritance bug I added after code review
	  ........ ................

2009-02-02 18:15 +0000 [r172895]  Leif Madsen <lmadsen@digium.com>

	* /, configs/res_ldap.conf.sample: Merged revisions 172894 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r172894 | lmadsen | 2009-02-02 13:13:40 -0500 (Mon, 02
	  Feb 2009) | 7 lines Update the res_ldap.conf file with a better
	  working example. (closes issue #13861) Reported by: scramatte
	  Patches: __20080110-res_ldap.conf-2.patch uploaded by blitzrage
	  (license 10) Tested by: jcovert ........

2009-02-01 02:45 +0000 [r172708-172743]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 172741 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r172741 | tilghman | 2009-01-31 20:44:23 -0600 (Sat, 31 Jan 2009)
	  | 4 lines Blank argument crashes Asterisk (closes issue #14377)
	  Reported by: amorsen ........

	* /, funcs/func_strings.c: Merged revisions 172706 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r172706 | tilghman | 2009-01-31 10:40:59 -0600 (Sat, 31 Jan 2009)
	  | 7 lines Don't increment the loop, now that incrementing is
	  taken care of by the decoder function. (closes issue #14363)
	  Reported by: andrew53 Patches: func_strings_filter.patch uploaded
	  by andrew53 (license 519) ........

2009-01-31 00:07 +0000 [r172636-172638]  Terry Wilson <twilson@digium.com>

	* configs/features.conf.sample, /: Merged revisions 172581 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r172581 | twilson | 2009-01-30 15:50:03 -0600 (Fri, 30
	  Jan 2009) | 2 lines Remove incorret line from sample config
	  ........

	* CHANGES, configs/features.conf.sample, apps/app_dial.c,
	  main/global_datastores.c, /, main/features.c,
	  include/asterisk/global_datastores.h: Merged revisions 172580 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r172580 | twilson | 2009-01-30 15:29:12 -0600
	  (Fri, 30 Jan 2009) | 44 lines Merged revisions 172517 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r172517 | twilson | 2009-01-30 11:47:41 -0600 (Fri, 30 Jan 2009)
	  | 37 lines Fix feature inheritance with builtin features When
	  using builtin features like parking and transfers, the
	  AST_FEATURE_* flags would not be set correctly for all instances
	  when either performing a builtin attended transfer, or parking a
	  call and getting the timeout callback. Also, there was no way on
	  a per-call basis to specify what features someone should have on
	  picking up a parked call (since that doesn't involve the Dial()
	  command). There was a global option for setting whether or not
	  all users who pickup a parked call should have
	  AST_FEATURE_REDIRECT set, but nothing for DISCONNECT, AUTOMON, or
	  PARKCALL. This patch: 1) adds the BRIDGE_FEATURES dialplan
	  variable which can be set either in the dialplan or with setvar
	  in channels that support it. This variable can be set to any
	  combination of 't', 'k', 'w', and 'h' (case insensitive matching
	  of the equivalent dial options), to set what features should be
	  activated on this channel. The patch moves the setting of the
	  features datastores into the bridging code instead of app_dial to
	  help facilitate this. 2) adds global options parkedcallparking,
	  parkedcallhangup, and parkedcallrecording to be similar to the
	  parkedcalltransfers option for globally setting features. 3) has
	  builtin_atxfer call builtin_parkcall if being transfered to the
	  parking extension since tracking everything through multiple
	  masquerades, etc. is difficult and error-prone 4) attempts to fix
	  all cases of return calls from parking and completed builtin
	  transfers not having the correct permissions (closes issue
	  #14274) Reported by: aragon Patches:
	  fix_feature_inheritence.diff.txt uploaded by otherwiseguy
	  (license 396) Tested by: aragon, otherwiseguy Review
	  http://reviewboard.digium.com/r/138/ ........ ................

2009-01-30 22:24 +0000 [r172609]  Mark Michelson <mmichelson@digium.com>

	* /, include/asterisk/channel.h: Merged revisions 172598 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r172598 | mmichelson | 2009-01-30 16:22:04 -0600 (Fri,
	  30 Jan 2009) | 3 lines Fix redefinition of flag in channel.h
	  ........

2009-01-30 08:27 +0000 [r172509]  Olle Johansson <oej@edvina.net>

	* CHANGES: Remove an extra "the" and restructure a bit

2009-01-29 23:53 +0000 [r172504]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_rpt.c, main/asterisk.c, /, autoconf/ast_func_fork.m4,
	  configure, main/app.c: Merged revisions 172441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r172441 | tilghman | 2009-01-29 17:15:40 -0600 (Thu, 29 Jan 2009)
	  | 16 lines Merged revisions 172438 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r172438 | tilghman | 2009-01-29 16:54:29 -0600 (Thu, 29 Jan 2009)
	  | 9 lines Lose the CAP_NET_ADMIN at every fork, instead of at
	  startup. Otherwise, if Asterisk runs as a non-root user and the
	  administrator does a 'restart now', Asterisk loses the ability to
	  set QOS on packets. (closes issue #14004) Reported by: nemo
	  Patches: 20090105__bug14004.diff.txt uploaded by Corydon76
	  (license 14) Tested by: Corydon76 ........ ................

2009-01-29 22:05 +0000 [r172435]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /: Merged
	  revisions 172400 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r172400 |
	  rmudgett | 2009-01-29 14:38:34 -0600 (Thu, 29 Jan 2009) | 12
	  lines channels/chan_dahdi.c * Added doxygen comments to the major
	  dahdi structures. * Fixed PRI and SS7 using an incorrect string
	  value if the extension delimiter is not present in the Dial()
	  function. * Fixed SS7 not checking if the dialed extension is at
	  least as long as the stripmsd option. * Fixed PRI not handling
	  unknown TON/NPI prefix letters correctly. * Fixed some
	  uninitialized string variables on FXS ports.
	  configs/chan_dahdi.conf.sample * Updated some documentation.
	  ........

2009-01-29 20:54 +0000 [r172317-172402]  Tilghman Lesher <tlesher@digium.com>

	* utils/muted.c, /: Merged revisions 146514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk (closes issue
	  #14360) Reported by: oej ........ r146514 | russell | 2008-10-05
	  17:11:30 -0500 (Sun, 05 Oct 2008) | 2 lines Make this build on my
	  mac. ........

	* configs/func_odbc.conf.sample, /: Merged revisions 172315 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r172315 | tilghman | 2009-01-29 10:48:25 -0600 (Thu, 29
	  Jan 2009) | 2 lines Better document mode=multirow, based upon a
	  conversation with Jared. ........

2009-01-29 13:50 +0000 [r172272]  Leif Madsen <lmadsen@digium.com>

	* contrib/scripts/realtime_pgsql.sql, /: Merged revisions 172271
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r172271 | lmadsen | 2009-01-29 08:47:27 -0500 (Thu, 29
	  Jan 2009) | 5 lines The realtime_pgsql.sql script is missing a
	  couple of fields. closes issue #14339) Reported by: fiddur
	  Patches: realtime_pgsql.sql.diff uploaded by fiddur (license 678)
	  ........

2009-01-29 11:24 +0000 [r172218-172235]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 172234 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r172234 |
	  oej | 2009-01-29 12:19:29 +0100 (Tor, 29 Jan 2009) | 7 lines Make
	  sure register= line supports both port and expiry at the same
	  time. (closes issue #14185) Reported by: Nick_Lewis Patches:
	  chan_sip.c-expiryrequest6.patch uploaded by Nick (license 657)
	  Tested by: Nick_Lewis ........

	* /, channels/chan_sip.c: Merged revisions 172173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r172173 | oej | 2009-01-29 10:18:01 +0100 (Tor, 29 Jan 2009) | 24
	  lines Merged revisions 172169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r172169 | oej | 2009-01-29 09:48:18 +0100 (Tor, 29 Jan 2009) | 16
	  lines Make sure that we always add the hangupcause headers. In
	  some cases, the owner was disconnected before we checked for the
	  cause. This patch implements a temporary storage in the pvt and
	  use that instead. The code is based on ideas from code from
	  Adomjan in issue #13385 (Add support for Reason: header) Thanks
	  to Klaus Darillion for testing! (closes issue #14294) related to
	  issue #13385 Reported by: klaus3000 and adomjan Patches:
	  bug14294b.diff uploaded by oej (license 306) Based on
	  20080829_chan_sip.c-q850reason_header.patch uploaded by adomjan
	  (license 487) Tested by: oej, klaus3000 ........ ................

	* /, configs/sip.conf.sample: Merged revisions 171880 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r171880 | oej | 2009-01-28 14:26:31 +0100 (Ons, 28 Jan 2009) | 2
	  lines Add some more notes about device matching. ........

2009-01-28  Leif Madsen <lmadsen@digium.com>

	* Asterisk 1.6.1-rc1 released

2009-01-28 22:52 +0000 [r172133]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 172131 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r172131 | tilghman | 2009-01-28 16:48:01 -0600 (Wed, 28 Jan 2009)
	  | 7 lines Fix how we skip fields (to avoid fields which don't
	  exist) when doing an UPDATE. (closes issue #14205) Reported by:
	  maxgo Patches: 20090128__bug14205__5.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: blitzrage ........

2009-01-28 20:56 +0000 [r172067]  Steve Murphy <murf@digium.com>

	* apps/app_channelredirect.c, main/pbx.c, main/manager.c, /,
	  main/features.c, include/asterisk/channel.h: Merged revisions
	  172063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r172063 | murf | 2009-01-28 13:31:06 -0700 (Wed, 28 Jan 2009) |
	  52 lines Merged revisions 172030 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r172030 | murf | 2009-01-28 11:51:16 -0700 (Wed, 28 Jan 2009) |
	  46 lines This patch fixes h-exten running misbehavior in
	  manager-redirected situations. What it does: 1. A new Flag value
	  is defined in include/asterisk/channel.h,
	  AST_FLAG_BRIDGE_HANGUP_DONT, which used as a messenge to the
	  bridge hangup exten code not to run the h-exten there (nor
	  publish the bridge cdr there). It will done at the pbx-loop level
	  instead. 2. In the manager Redirect code, I set this flag on the
	  channel if the channel has a non-null pbx pointer. I did the same
	  for the second (chan2) channel, which gets run if name2 is set...
	  and the first succeeds. 3. I restored the ending of the cdr for
	  the pbx loop h-exten running code. Don't know why it was removed
	  in the first place. 4. The first attempt at the fix for this bug
	  was to place code directly in the async_goto routine, which was
	  called from a large number of places, and could affect a large
	  number of cases, so I tested that fix against a fair number of
	  transfer scenarios, both with and without the patch. In the
	  process, I saw that putting the fix in async_goto seemed not to
	  affect any of the blind or attended scenarios, but still, I was
	  was highly concerned that some other scenarios I had not tested
	  might be negatively impacted, so I refined the patch to its
	  current scope, and jmls tested both. In the process, tho, I saw
	  that blind xfers in one situation, when the one-touch blind-xfer
	  feature is used by the peer, we got strange h-exten behavior. So,
	  I inserted code to swap CDRs and to set the HANGUP_DONT field, to
	  get uniform behavior. 5. I added code to the bridge to obey the
	  HANGUP_DONT flag, skipping both publishing the bridge CDR, and
	  running the h-exten; they will be done at the pbx-loop (higher)
	  level instead. 6. I removed all the debug logs from the patch
	  before committing. 7. I moved the AUTOLOOP set/reset in the
	  h-exten code in res_features so it's only done if the h-exten is
	  going to be run. A very minor performance improvement, but
	  technically correct. (closes issue #14241) Reported by: jmls
	  Patches: 14241_redirect_no_bridgeCDR_or_h_exten_via_transfer
	  uploaded by murf (license 17) Tested by: murf, jmls ........
	  ................

2009-01-28 17:29 +0000 [r171966]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 171964 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r171964 | tilghman | 2009-01-28 11:27:40 -0600
	  (Wed, 28 Jan 2009) | 9 lines Merged revisions 171963 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r171963 | tilghman | 2009-01-28 11:25:18 -0600 (Wed, 28
	  Jan 2009) | 2 lines Clarify log message (suggested by manxpower
	  on #asterisk-dev) ........ ................

2009-01-28 13:21 +0000 [r171857]  Olle Johansson <oej@edvina.net>

	* configs/sip.conf.sample: Merged revisions 171838 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r171838 | oej | 2009-01-28 14:11:44 +0100 (Ons,
	  28 Jan 2009) | 10 lines Merged revisions 171837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171837 | oej | 2009-01-28 14:07:27 +0100 (Ons, 28 Jan 2009) | 2
	  lines Add a better explanation of the difference between the
	  device namespace and the dialplan for newbies. ........
	  ................

2009-01-27 22:01 +0000 [r171620-171693]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 171691 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r171691 | mmichelson | 2009-01-27 15:58:39 -0600
	  (Tue, 27 Jan 2009) | 47 lines Merged revisions 171689 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171689 | mmichelson | 2009-01-27 15:55:08 -0600 (Tue, 27 Jan
	  2009) | 39 lines Fix devicestate problems for "always-on" agent
	  channels A revision to chan_agent attempted to "inherit" the
	  device state of the underlying channel in order to report the
	  device state of an agent channel more accurately. The problem
	  with the logic here is that it makes no sense to use this for
	  always-on agents. If the agent is logged in, then to the
	  underlying channel, the agent will always appear to be "in use,"
	  no matter if the agent is on a call or not. The reason is that to
	  the underlying channel, the channel is currently in use on a call
	  to the AgentLogin application. The most common cause that I found
	  for this issue to occur was for a SIP channel to be the
	  underlying channel type for an Agent channel. If the SIP phone
	  re-registers, then the registration will cause the device state
	  core to query the device state of the SIP channel. Since the SIP
	  channel is in use, the Agent channel would also inherit this
	  status. Once the agent channel was set to "in use" there was no
	  way that the device state could change on that channel unless the
	  agent logged out. The solution for this problem is a bit
	  different in 1.4 than it is in the other branches. In 1.4, there
	  will be a one-line fix to make sure that only callback agents
	  will inherit device state from their underlying channel type. For
	  the other branches of Asterisk, since callback support has been
	  removed, there is also no need for device state inheritance in
	  chan_agent, so I will simply be removing it from the code. In
	  addition, the 1.4 source is getting a new comment to help the
	  next person who edits chan_agent.c. I'm adding a comment that a
	  agent_pvt's loginchan field may be used to determine if the agent
	  is a callback agent or not. (closes issue #14173) Reported by:
	  nathan Patches: 14173.patch uploaded by putnopvut (license 60)
	  Tested by: nathan, aramirez ........ ................

	* /, main/slinfactory.c: Merged revisions 171622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r171622 | mmichelson | 2009-01-27 14:11:30 -0600 (Tue, 27 Jan
	  2009) | 26 lines Merged revisions 171621 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171621 | mmichelson | 2009-01-27 14:06:01 -0600 (Tue, 27 Jan
	  2009) | 18 lines Prevent a crash from occurring when a jitter
	  buffer interpolated frame is removed from a slinfactory
	  slinfactory used the "samples" field of an ast_frame in order to
	  determine the amount of data contained within the frame. In
	  certain cases, such as jitter buffer interpolated frames, the
	  frame would have a non-zero value for "samples" but have NULL
	  "data" This caused a problem when a memcpy call in
	  ast_slinfactory_read would attempt to access invalid memory. The
	  solution in use here is to never feed frames into the slinfactory
	  if they have NULL "data" (closes issue #13116) Reported by:
	  aragon Patches: 13116.diff uploaded by putnopvut (license 60)
	  ........ ................

	* apps/app_queue.c, /: Merged revisions 171618 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r171618 |
	  mmichelson | 2009-01-27 13:30:54 -0600 (Tue, 27 Jan 2009) | 24
	  lines Fix queue crashes that would occur after the calling
	  channel was masqueraded. The data passed to the
	  end_bridge_callback was assumed to be data which was still
	  stack'd. The problem was that with some call features, attended
	  transfers in particular, a new bridge thread is started once the
	  feature completes, meaning that when the end_bridge_callback is
	  called, the end_bridge_callback_data was invalid. To fix this
	  problem, there are two measures taken 1. Instead of pointing to
	  stacked data, we now used heap-allocated data for passing to the
	  end_bridge_callback in app_queue 2. Since bridges can end
	  multiple times on a single logical call, we wait until the final
	  bridge is broken to actually set any queue variables. This is
	  accomplished through reference-counting and the use of an
	  end_bridge_callback_data_fixup function in app_queue.c (closes
	  issue #14260) Reported by: ccesario Patches: 14260.patch uploaded
	  by putnopvut (license 60) Tested by: ccesario ........

2009-01-27 15:19 +0000 [r171540]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 171528 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r171528 | oej | 2009-01-27 16:00:19 +0100 (Tis, 27 Jan 2009) | 23
	  lines Solving the same issue, but a bit different in trunk...
	  Merged revisions 171527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171527 | oej | 2009-01-27 15:33:20 +0100 (Tis, 27 Jan 2009) | 13
	  lines Use the same branch tag in CANCEL as in INVITE Originally
	  putnopvut implemented some changes in revision 142079 that
	  according to the bug report seemed to have worked then, but
	  somehow fails now. I guess code, as humans, get old and forget
	  stuff. Anyway, this bug caused CANCEL not to work with picky
	  systems. Thanks Fredrik for pointing out where the bug in the SIP
	  messaging was. (closes issue #14346) Reported by: oej Patches:
	  bug14346.diff uploaded by oej (license 306) Tested by: oej
	  ........ ................

2009-01-26 14:58 +0000 [r171361]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 171326 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r171326 | oej | 2009-01-26 14:44:40 +0100 (MÃ¥n, 26 Jan 2009) |
	  17 lines Merged revisions 171264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171264 | oej | 2009-01-26 13:51:53 +0100 (MÃ¥n, 26 Jan 2009) | 9
	  lines Don't retransmit 401 on REGISTER requests when
	  alwaysauthreject=yes (closes issue #14284) Reported by: klaus3000
	  Patches: patch_chan_sip_unreliable_1.4.23_14284.txt uploaded by
	  klaus3000 (license 65) Tested by: klaus3000 ........
	  ................

2009-01-26 00:04 +0000 [r171190]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_oss.c, /: Merged revisions 171188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r171188 | tilghman | 2009-01-25 17:58:00 -0600 (Sun, 25 Jan 2009)
	  | 13 lines Merged revisions 171187 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r171187 | tilghman | 2009-01-25 17:44:01 -0600 (Sun, 25 Jan 2009)
	  | 6 lines Correctly track the hookstate (closes issue #13686)
	  Reported by: itiliti Patches: 20081013__bug13686.diff.txt
	  uploaded by Corydon76 (license 14) ........ ................

2009-01-25 13:40 +0000 [r170982]  Sean Bright <sean.bright@gmail.com>

	* /, apps/app_page.c: Merged revisions 170980 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170980 | seanbright | 2009-01-25 08:35:48 -0500 (Sun, 25 Jan
	  2009) | 16 lines Merged revisions 170979 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170979 | seanbright | 2009-01-25 08:33:20 -0500 (Sun, 25 Jan
	  2009) | 9 lines Resolve a logic error that was causing Page() to
	  crash when more than one channel was specified. (closes issue
	  #14308) Reported by: bluefox Patches: 20090124__bug14308.diff.txt
	  uploaded by seanbright (license 71) Tested by: kc0bvu ........
	  ................

2009-01-25 02:52 +0000 [r170945]  Russell Bryant <russell@digium.com>

	* include/asterisk/utils.h, /: Merged revisions 170943 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r170943 | russell | 2009-01-24 20:49:30 -0600 (Sat, 24 Jan 2009)
	  | 6 lines Change ARRAY_LEN() to be more C++ safe. When the second
	  part of this macro is written as 0[a] instead of a[0], it will
	  force a failure if the macro is used on a C++ object that
	  overloads the [] operator. ........

2009-01-24 13:57 +0000 [r170839]  Tilghman Lesher <tlesher@digium.com>

	* configs/res_odbc.conf.sample, /: Merged revisions 170837 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r170837 | tilghman | 2009-01-24 07:55:53 -0600
	  (Sat, 24 Jan 2009) | 9 lines Merged revisions 170836 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r170836 | tilghman | 2009-01-24 07:55:02 -0600 (Sat, 24
	  Jan 2009) | 2 lines Remove superfluous implementation note
	  (closes issue #14319) ........ ................

2009-01-23 23:53 +0000 [r170831]  Richard Mudgett <rmudgett@digium.com>

	* /, doc/tex/Makefile: Merged revisions 170794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r170794 |
	  rmudgett | 2009-01-23 17:10:34 -0600 (Fri, 23 Jan 2009) | 1 line
	  Fix asterisk.pdf generation if branch name has an underscore in
	  it. ........

2009-01-23 22:59 +0000 [r170792]  Russell Bryant <russell@digium.com>

	* /, doc/tex/Makefile: Merged revisions 170790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r170790 |
	  russell | 2009-01-23 16:58:37 -0600 (Fri, 23 Jan 2009) | 2 lines
	  Don't blow up if a branch name has an underscore in it ........

2009-01-23 20:57 +0000 [r170693-170722]  Mark Michelson <mmichelson@digium.com>

	* configs/res_odbc.conf.sample, /: Merged revisions 170720 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r170720 | mmichelson | 2009-01-23 14:56:07 -0600
	  (Fri, 23 Jan 2009) | 16 lines Merged revisions 170719 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170719 | mmichelson | 2009-01-23 14:55:26 -0600 (Fri, 23 Jan
	  2009) | 8 lines Add notes to the idlecheck explanation in
	  res_odbc.conf.sample (closes issue #14319) Reported by: klaus3000
	  Patches: patch_idlecheck_res_odbc.conf.sample.txt uploaded by
	  klaus3000 (license 65) ........ ................

	* contrib/i18n.testsuite.conf, /: Merged revisions 170677 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r170677 | mmichelson | 2009-01-23 14:23:00 -0600
	  (Fri, 23 Jan 2009) | 22 lines Merged revisions 170671 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170671 | mmichelson | 2009-01-23 14:21:51 -0600 (Fri, 23 Jan
	  2009) | 14 lines Update contrib/i18n.testsuite.conf to not use
	  deprecated syntax * Convert Wait,1 to Wait(1) * Convert
	  SetLanguage to Set(CHANNEL(language)) * Use 'n' for all
	  priorities beyond the first Also added test for Chinese numbers,
	  too. (closes issue #14320) Reported by: dant Patches:
	  i18n.testsuite.conf.issue14320.v2.diff uploaded by dant (license
	  670) ........ ................

2009-01-23 20:20 +0000 [r170664]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 170652 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170652 | file | 2009-01-23 16:18:05 -0400 (Fri, 23 Jan 2009) |
	  11 lines Merged revisions 170648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170648 | file | 2009-01-23 16:16:39 -0400 (Fri, 23 Jan 2009) | 4
	  lines When a channel is answered make sure any indications
	  currently playing stop. Usually the phone would do this but if
	  the channel was already answered then they are being generated by
	  Asterisk and we darn well need to stop them. (closes issue
	  #14249) Reported by: RadicAlish ........ ................

2009-01-23 19:37 +0000 [r170637]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 170608 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r170608 | tilghman | 2009-01-23 13:25:10 -0600
	  (Fri, 23 Jan 2009) | 9 lines Merged revisions 170588 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r170588 | tilghman | 2009-01-23 13:20:44 -0600 (Fri, 23
	  Jan 2009) | 2 lines Additions to AST-2009-001 ........
	  ................

2009-01-23 19:10 +0000 [r170507-170571]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 170569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170569 | file | 2009-01-23 15:09:18 -0400 (Fri, 23 Jan 2009) |
	  11 lines Merged revisions 170568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170568 | file | 2009-01-23 15:06:54 -0400 (Fri, 23 Jan 2009) | 4
	  lines When a call is forwarded stop any active indications. The
	  new channel will provide an indication, if need be, itself.
	  (closes issue #14310) Reported by: RadicAlish ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 170505 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170505 | file | 2009-01-23 14:09:45 -0400 (Fri, 23 Jan 2009) |
	  11 lines Merged revisions 170504 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170504 | file | 2009-01-23 14:04:08 -0400 (Fri, 23 Jan 2009) | 4
	  lines Use the on hold flag to see if the call is on hold or not.
	  It is possible that our address for them will still be valid even
	  though they are on hold. (closes issue #14295) Reported by:
	  klaus3000 ........ ................

2009-01-23 17:49 +0000 [r170502]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_h323.c: Merged revisions 170501 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r170501 | mvanbaak | 2009-01-23 18:46:02 +0100 (Fri, 23 Jan 2009)
	  | 1 line let's use SENTINEL where needed ........

2009-01-23 16:35 +0000 [r170458]  Doug Bailey <dbailey@digium.com>

	* channels/chan_dahdi.c: MWI messages included in CID spill was not
	  being properly handled and prevented the call from being
	  processed (issue #14313) Reported by: seandarcy Tested by:
	  dbailey

2009-01-23 15:51 +0000 [r170395]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 170393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170393 | mmichelson | 2009-01-23 09:44:27 -0600 (Fri, 23 Jan
	  2009) | 36 lines Merged revisions 170392 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170392 | mmichelson | 2009-01-23 09:40:39 -0600 (Fri, 23 Jan
	  2009) | 28 lines Fix broken call pickup There was a subtle change
	  in ast_do_masquerade which resulted in failed attempts to pickup
	  calls. The problem was that the value of the AST_FLAG_OUTGOING
	  flag was copied from the clone to the original channel. In the
	  case of call pickup, this meant that the AST_FLAG_OUTGOING flag
	  ended up being cleared on the channel that was attempting to
	  execute the pickup. Because this flag was not set, when ast_read
	  came across an answer frame, it ignored it. The result of this
	  was that the calling channel was never properly answered. This
	  fix changes the behavior in ast_do_masquerade to set the flags on
	  the original channel to the union of the flags on the clone
	  channel. This way, if the AST_FLAG_OUTGOING flag is set on either
	  of the two channels involved in the masquerade, the resulting
	  channel will have the flag set as well. (closes issue #14206)
	  Reported by: francesco_r Patches: 14206.patch uploaded by
	  putnopvut (license 60) Tested by: francesco_r, aragon, putnopvut
	  ........ ................

2009-01-22 20:06 +0000 [r170242]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 170240 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170240 | file | 2009-01-22 16:04:39 -0400 (Thu, 22 Jan 2009) |
	  14 lines Merged revisions 170239 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170239 | file | 2009-01-22 16:02:35 -0400 (Thu, 22 Jan 2009) | 7
	  lines Don't crash if RTCP is not enabled on an RTP structure but
	  statistics are output. (closes issue #14234) Reported by: jcovert
	  Patches: rtp.c.patch-1.6.0.3 uploaded by jcovert (license 551)
	  rtp.c.patch-svn-165599 uploaded by jcovert (license 551) ........
	  ................

2009-01-22 17:21 +0000 [r170178]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_config.c, /: Merged revisions 170165 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170165 | tilghman | 2009-01-22 11:19:28 -0600 (Thu, 22 Jan 2009)
	  | 13 lines Merged revisions 170158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170158 | tilghman | 2009-01-22 11:18:07 -0600 (Thu, 22 Jan 2009)
	  | 6 lines Allow global variables after substitution to be as long
	  as other variables. (closes issue #14263) Reported by: markd
	  Patches: 20090120__bug14263.diff.txt uploaded by Corydon76
	  (license 14) ........ ................

2009-01-22 16:54 +0000 [r170049-170150]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 170148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170148 | file | 2009-01-22 12:52:21 -0400 (Thu, 22 Jan 2009) |
	  11 lines Merged revisions 170147 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170147 | file | 2009-01-22 12:50:54 -0400 (Thu, 22 Jan 2009) | 4
	  lines If we are unable to request a DAHDI pseudo channel and we
	  are using the user introduction without review option make sure
	  it gets unset so other code does not blindly assume a DAHDI
	  pseudo channel exists. (closes issue #14282) Reported by:
	  cheesegrits ........ ................

	* main/pbx.c, /: Merged revisions 170051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r170051 | file | 2009-01-22 11:14:50 -0400 (Thu, 22 Jan 2009) |
	  13 lines Merged revisions 170050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r170050 | file | 2009-01-22 11:13:56 -0400 (Thu, 22 Jan 2009) | 6
	  lines Do a string comparison instead of pointer comparison since
	  some people specify the context they are actually in as an
	  argument to get around some funkiness. (closes issue #14011)
	  Reported by: dveiga Patches: pbx.c.patch uploaded by dveiga
	  (license 665) ........ ................

	* apps/app_parkandannounce.c, /: Merged revisions 170047 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r170047 | file | 2009-01-22 11:01:54 -0400 (Thu, 22 Jan
	  2009) | 4 lines Clear the autoloop flag when parsing and setting
	  the context/extension/priority to go back to. When the channel
	  executes a PBX again we want it to start out at the point we
	  explicitly say and at that point it will not yet be doing
	  autoloop. (closes issue #14304) Reported by: jcovert ........

2009-01-22 00:46 +0000 [r169946]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 169944 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r169944 | tilghman | 2009-01-21 18:44:52 -0600
	  (Wed, 21 Jan 2009) | 16 lines Merged revisions 169943 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169943 | tilghman | 2009-01-21 18:43:31 -0600 (Wed, 21 Jan 2009)
	  | 9 lines AST_RWLOCK_INIT_VALUE is always defined. What we really
	  wanted to ask is whether autoconf detected a static initializer
	  value. This fixes rwlocks on all such platforms (mainly, Mac OS
	  X). (closes issue #13767) Reported by: jcovert Patches:
	  20090121__bug13767.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: jcovert, Corydon76 ........ ................

2009-01-21 23:28 +0000 [r169871]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, /: Merged revisions 169869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r169869 | file | 2009-01-21 19:25:27 -0400 (Wed, 21 Jan 2009) |
	  11 lines Merged revisions 169867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169867 | file | 2009-01-21 19:20:47 -0400 (Wed, 21 Jan 2009) | 4
	  lines Read lock the contexts to maintain the locking order when
	  we are notified that the state of a device has changed. (closes
	  issue #13839) Reported by: mcallist ........ ................

2009-01-21 22:23 +0000 [r169830]  Michiel van Baak <michiel@vanbaak.info>

	* /, doc/tex/extensions.tex: Merged revisions 169793 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r169793 | mvanbaak | 2009-01-21 23:04:16 +0100 (Wed, 21 Jan 2009)
	  | 2 lines remove duplicated sentence. ........

2009-01-21 22:11 +0000 [r169792-169796]  Mark Michelson <mmichelson@digium.com>

	* /, main/say.c: Merged revisions 169794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169794 |
	  mmichelson | 2009-01-21 16:10:02 -0600 (Wed, 21 Jan 2009) | 17
	  lines Fix a crash when saying certain numbers in Chinese This
	  commit fixes a crash that was occurring when attempting to say a
	  number between 10000 and 100000 due to dividing by 0. This also
	  removes some places where a "zero" is spoken when it should not
	  be. (closes issue #14291) Reported by: dant Patches:
	  say.c-14291.diff uploaded by dant (license 670) Tested by: dant
	  ........

	* /, channels/chan_sip.c: Merged revisions 169791 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169791 |
	  mmichelson | 2009-01-21 15:53:55 -0600 (Wed, 21 Jan 2009) | 18
	  lines Further fix some oddities in sip show users and sip show
	  peers logic ccesario on IRC pointed out that his sip peers were
	  not displayed properly when he would issue the command "sip show
	  peers." The problem was that the onlymatchonip field was used to
	  determine if the endpoint was a "peer" or "user." The tricky part
	  is that a "friend" is supposed to be treated as both a "user" and
	  a "peer" but the logic would not allow "friends" to show up as
	  "peers" since onlymatchonip was set to FALSE for friends. I have
	  modified the sip_peer structure to more explicitly keep track of
	  what type endpoint it is so that the various manager and CLI
	  commands will display the expected information Reported by
	  ccesario via IRC Tested by ccesario ........

2009-01-21 21:05 +0000 [r169725]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 169723 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r169723 | tilghman | 2009-01-21 15:03:40 -0600 (Wed, 21 Jan 2009)
	  | 15 lines Merged revisions 169722 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169722 | tilghman | 2009-01-21 15:02:32 -0600 (Wed, 21 Jan 2009)
	  | 8 lines Extra NULLs in the output cause some terminal types to
	  abort in the middle of a color code, causing terminal weirdness.
	  (closes issue #14130) Reported by: coolmig Patches:
	  20090121__bug14130.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: Corydon76, coolmig ........ ................

2009-01-21 17:40 +0000 [r169674]  Steve Murphy <murf@digium.com>

	* utils/refcounter.c, /: Merged revisions 169673 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169673 |
	  murf | 2009-01-21 10:21:40 -0700 (Wed, 21 Jan 2009) | 14 lines
	  This patch corrects a segfault reported in 14289, due to a null
	  ptr being refd. Yes, seanbright is right in the bug comments,
	  that is the fix. Sorry for this oversight; I guess my personal
	  usage didn't have this happen! murf (closes issue #14289)
	  Reported by: jamesgolovich ........

2009-01-21 10:49 +0000 [r169622-169626]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 169625 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169625 |
	  russell | 2009-01-21 04:49:00 -0600 (Wed, 21 Jan 2009) | 2 lines
	  Remove properties that erroneously got merged into trunk ........

	* main/tcptls.c, /: Merged revisions 169620 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169620 |
	  russell | 2009-01-21 04:26:07 -0600 (Wed, 21 Jan 2009) | 10 lines
	  Fix a regression in TCP support. This patch fixes a problem that
	  caused chan_sip to think that every open TCP session was to a
	  remote address of 0.0.0.0:0. (closes issue #14287) Reported by:
	  jamesgolovich Patches: bug-14287.diff.txt uploaded by
	  jamesgolovich (license 176) ........

2009-01-21 00:35 +0000 [r169559-169613]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 169611 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169611 |
	  mmichelson | 2009-01-20 18:33:32 -0600 (Tue, 20 Jan 2009) | 22
	  lines Fix device state parsing issues for channel names with
	  multiple slashes The fix being applied is a bit different for
	  trunk and the 1.6.X branches. For trunk, we only wish to strip
	  off the characters beyond the second slash if the channel is a
	  Local channel (i.e. we are removing the /n from the device name).
	  Other channel technologies with multiple slashes (e.g. DAHDI)
	  need the information after the second slash in order to get the
	  proper device state information. In addition to this fix, the
	  1.6.X branches are receiving a much more important fix as well.
	  The problem in 1.6.X is that the member's device name was being
	  directly changed instead of having a copy changed. This meant
	  that we would strip off the second slash and trailing characters
	  and then leave the member's device name like that permanently
	  thereafter. (closes issue #14014) Reported by: kebl0155 Patches:
	  14014_number2.patch uploaded by putnopvut (license 60) Tested by:
	  kebl0155 ........

	* apps/app_queue.c, /: Merged revisions 169574 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169574 |
	  mmichelson | 2009-01-20 15:57:24 -0600 (Tue, 20 Jan 2009) | 6
	  lines Use the default timeout for a queue instead of -1 (closes
	  issue #14272) Reported by: timking ........

	* /, channels/chan_sip.c: Merged revisions 169557 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169557 |
	  mmichelson | 2009-01-20 14:10:31 -0600 (Tue, 20 Jan 2009) | 19
	  lines Convert the character pointers in a sip_request to be
	  pointer offsets When an ast_str expands to hold more data, any
	  pointers that were pointing to the data prior to the expansion
	  will be pointing at invalid memory. This change makes such
	  pointers used in chan_sip.c instead be offsets from the beginning
	  of the string so that the same math may be applied no matter
	  where in memory the string resides. To help ease this transition,
	  a macro called REQ_OFFSET_TO_STR has been added to chan_sip.c so
	  that given a sip_request and an offset, the string at that offset
	  is returned. (closes issue #14220) Reported by: riksta Tested by:
	  putnopvut Review http://reviewboard.digium.com/r/126/ ........

2009-01-20 19:31 +0000 [r169488-169554]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Merged revisions 169510 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169510 |
	  twilson | 2009-01-20 13:22:24 -0600 (Tue, 20 Jan 2009) | 7 lines
	  Make a proper builtin attended transfer to parking work This is
	  an ugly hack from 1.4 that allows the timeout callback from a
	  parked call to use the right channel name for the callback when
	  the park is done with a builtin attended transfer (that isn't
	  completed early). This hasn't ever worked in trunk and no one has
	  complained yet, so eh. ........

	* /, main/features.c: Merged revisions 169486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r169486 | twilson | 2009-01-20 12:48:14 -0600 (Tue, 20 Jan 2009)
	  | 13 lines Merged revisions 169485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169485 | twilson | 2009-01-20 12:40:56 -0600 (Tue, 20 Jan 2009)
	  | 6 lines Don't play audio to the channel if we've masqueraded
	  (closes issue #14066) Reported by: bluefox Tested by:
	  otherwiseguy, bluefox ........ ................

2009-01-19 20:10 +0000 [r169368]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /, apps/app_userevent.c: Merged revisions 169365
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r169365 | tilghman | 2009-01-19 14:05:52 -0600
	  (Mon, 19 Jan 2009) | 11 lines Merged revisions 169364 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169364 | tilghman | 2009-01-19 13:49:25 -0600 (Mon, 19 Jan 2009)
	  | 4 lines Truncate userevents at the end of a line, when the
	  command exceeds the buffer. (closes issue #14278) Reported by:
	  fnordian ........ ................

2009-01-19 15:55 +0000 [r169213]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_local.c, /: Merged revisions 169211 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r169211 | mmichelson | 2009-01-19 09:54:06 -0600
	  (Mon, 19 Jan 2009) | 21 lines Merged revisions 169210 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r169210 | mmichelson | 2009-01-19 09:52:15 -0600 (Mon, 19 Jan
	  2009) | 13 lines Prevent a crash in chan_local due to a potential
	  NULL pointer dereference Move the check for if both channels on a
	  local_pvt have generators to below where p->chan is checked for
	  NULLity (NULLness?). This prevents a crash from occurring if
	  p->chan is NULL. (closes issue #14189) Reported by: sascha
	  Patches: 14189.patch uploaded by putnopvut (license 60) Tested
	  by: sascha ........ ................

2009-01-17 18:46 +0000 [r169154]  Doug Bailey <dbailey@digium.com>

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample: Add
	  discriminator for when ring pulse alert signal is used to preface
	  MWI spills This prevents the situation when MWI messages are
	  added to caller ID spills causing the channel to be hung up

2009-01-17 01:59 +0000 [r168981-169082]  Terry Wilson <twilson@digium.com>

	* main/tcptls.c, /, main/http.c, include/asterisk/tcptls.h: Merged
	  revisions 169080 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169080 |
	  twilson | 2009-01-16 19:56:36 -0600 (Fri, 16 Jan 2009) | 8 lines
	  Fix qualify for TCP peer (closes issue #14192) Reported by:
	  pabelanger Patches: asterisk-bug14192.diff.txt uploaded by
	  jamesgolovich (license 176) Tested by: jamesgolovich ........

	* /, channels/chan_sip.c: Merged revisions 169044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r169044 |
	  twilson | 2009-01-16 18:03:39 -0600 (Fri, 16 Jan 2009) | 8 lines
	  Fix port :0 added to SIP INVITE URI when outboundproxy used
	  (closes issue #14233) Reported by: chris-mac Patches:
	  asterisk-bug14233.diff.txt uploaded by jamesgolovich (license
	  176) Tested by: jamesgolovich, chris-mac, otherwiseguy ........

	* /, main/features.c: Merged revisions 168941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168941 | twilson | 2009-01-16 16:16:23 -0600 (Fri, 16 Jan 2009)
	  | 19 lines Merged revisions 168716 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168716 | twilson | 2009-01-15 12:22:49 -0600 (Thu, 15 Jan 2009)
	  | 12 lines Convert call to park_call_full to
	  masq_park_call_announce Since we removed the AST_PBX_KEEPALIVE
	  return value, we need to use masqueraded parking, otherwise we
	  will try to call ast_hangup() in __pbx_run() and in
	  do_parking_thread() and then promptly crash. (closes issue
	  #14215) Reported by: waverly360 Tested by: otherwiseguy (closes
	  issue #14228) Reported by: kobaz Tested by: otherwiseguy ........
	  ................

2009-01-16 22:46 +0000 [r168979]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168976 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168976 | mmichelson | 2009-01-16 16:43:09 -0600 (Fri, 16 Jan
	  2009) | 26 lines Merged revisions 168975 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168975 | mmichelson | 2009-01-16 16:42:13 -0600 (Fri, 16 Jan
	  2009) | 18 lines Account for possible NULL pointer when we
	  receive a 408 in response to a REGISTER It may be that by the
	  time we receive a reply to a REGISTER request, the attempt has
	  timed out and thus the registry structure pointed to by the
	  corresponding sip_pvt has gone away. This situation was handled
	  properly for a 200 OK response, but the 408 case assumed that the
	  sip_registry struct was non-NULL, thus potentially causing a
	  crash This commit fixes this assumption and prints out a message
	  to the console if we should receive a late 408 response to a
	  REGISTER (closes issue #14211) Reported by: aborghi Patches:
	  14211.diff uploaded by putnopvut (license 60) Tested by: aborghi
	  ........ ................

2009-01-16 18:55 +0000 [r168836]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/say.h, apps/app_voicemail.c, /, main/say.c:
	  Merged revisions 168832 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168832 | tilghman | 2009-01-16 12:49:09 -0600 (Fri, 16 Jan 2009)
	  | 13 lines Merged revisions 168828 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168828 | tilghman | 2009-01-16 12:41:35 -0600 (Fri, 16 Jan 2009)
	  | 6 lines Fix the conjugation of Russian and Ukrainian languages.
	  (related to issue #12475) Reported by: chappell Patches:
	  vm_multilang.patch uploaded by chappell (license 8) ........
	  ................

2009-01-16 00:47 +0000 [r168739-168748]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, /: Merged revisions 168746 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168746 | murf | 2009-01-15 17:34:31 -0700 (Thu, 15 Jan 2009) |
	  20 lines Merged revisions 168745 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168745 | murf | 2009-01-15 17:19:12 -0700 (Thu, 15 Jan 2009) |
	  14 lines This patch fixes a problem where a goto (or jump, in
	  this case) fails a consistency check because it can't find a
	  matching extension. The problem was a missing instruction to end
	  the range notation in the code where it converts the pattern into
	  a regex and uses the regex code to determine the match. I tested
	  using the AEL code the user supplied, and now, the consistency
	  check passes. (closes issue #14141) Reported by: dimas ........
	  ................

	* main/ast_expr2.c, /, main/ast_expr2.h, main/ast_expr2.y: Merged
	  revisions 168737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168737 |
	  murf | 2009-01-15 13:54:59 -0700 (Thu, 15 Jan 2009) | 16 lines
	  This patch allows null args in ast_expr2 func calls, and fixes
	  commas being converted to pipes, which was 1.4 type stuff. If the
	  user says count=ENUMLOOKUP(${EXTEN},ALL,c,,enum.mydomain.tld);
	  then it won't complain about the empty arg (c,,...) and fabled's
	  patch won't let it swap the commas for pipes. Ran it thru my
	  dialplan and no complaints. (closes issue #14169) Reported by:
	  fabled Patches: function-argument-separator-fix.diff uploaded by
	  fabled (license 448) ........

2009-01-15 19:17 +0000 [r168729]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Merged revisions 168728 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168728 |
	  mmichelson | 2009-01-15 13:16:29 -0600 (Thu, 15 Jan 2009) | 3
	  lines Fix the compactheaders option in sip.conf ........

2009-01-15 19:05 +0000 [r168727]  Olle Johansson <oej@edvina.net>

	* /, configs/extconfig.conf.sample: Merged revisions 168722 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168722 | oej | 2009-01-15 19:47:14 +0100 (Tor,
	  15 Jan 2009) | 10 lines Merged revisions 168721 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168721 | oej | 2009-01-15 19:43:43 +0100 (Tor, 15 Jan 2009) | 2
	  lines Meetme actually has realtime but wasn't documented ........
	  ................

2009-01-15 19:00 +0000 [r168726]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168725 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168725 |
	  mmichelson | 2009-01-15 13:00:06 -0600 (Thu, 15 Jan 2009) | 17
	  lines Remove an unneeded condition for line addition to a SIP
	  request/response In Asterisk 1.4 and 1.6.0, the sip_request
	  structure had a statically allocated buffer to hold the text of
	  the request. There was a check in the add_line function to not
	  attempt to write the line into the buffer if we did not have room
	  for it. In trunk and Asterisk versions starting with 1.6.1, an
	  expandable ast_str structure is used to hold the text. Since it
	  may grow to fit an arbitrarily sized string, this check in
	  add_line is no longer valid. I found this oddity while attempting
	  to fix issue #14220; however, I do not believe that this is the
	  fix for that issue since the output supplied by the reporter did
	  not contain the warning message that would be printed had this
	  condition been satisfied. ........

2009-01-15 18:20 +0000 [r168714-168715]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Merged revisions 168711 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r168711 | oej | 2009-01-15 18:55:53 +0100 (Tor, 15 Jan 2009) | 4
	  lines Clarify some misunderstandings and make it even more clear
	  that you can refer to a peer in the register= line. ........

	* /, channels/chan_sip.c: Merged revisions 168712 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168712 |
	  oej | 2009-01-15 19:08:59 +0100 (Tor, 15 Jan 2009) | 3 lines Make
	  sure that we have the same terminology in sip.conf.sample and the
	  source code warning. Thanks Nick Lewis for pointing this out in
	  the bug tracker. ........

2009-01-15 15:37 +0000 [r168707]  Sean Bright <sean.bright@gmail.com>

	* /, apps/app_meetme.c: Merged revisions 168705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168705 |
	  seanbright | 2009-01-15 10:33:18 -0500 (Thu, 15 Jan 2009) | 11
	  lines Add a missing unlock and properly handle the 'maxusers'
	  setting on MeetMe conferences. We were using the 'user number'
	  field to compare against the maximum allowed users, which works
	  assuming users with lower user numbers didn't leave the
	  conference. (closes issue #14117) Reported by: sergedevorop
	  Patches: 20090114__bug14117-2.diff.txt uploaded by seanbright
	  (license 71) Tested by: sergedevorop ........

2009-01-15 00:15 +0000 [r168631]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 168629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168629 | mmichelson | 2009-01-14 18:14:17 -0600 (Wed, 14 Jan
	  2009) | 24 lines Merged revisions 168628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168628 | mmichelson | 2009-01-14 18:11:01 -0600 (Wed, 14 Jan
	  2009) | 16 lines Fix some crashes from bad datastore handling in
	  app_queue.c * The queue_transfer_fixup function was searching for
	  and removing the datastore from the incorrect channel, so this
	  was fixed. * Most datastore operations regarding the
	  queue_transfer datastore were being done without the channel
	  locked, so proper channel locking was added, too. (closes issue
	  #14086) Reported by: ZX81 Patches: 14086v2.patch uploaded by
	  putnopvut (license 60) Tested by: ZX81, festr ........
	  ................

2009-01-14 21:55 +0000 [r168625]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn/isdn_lib.c, /: Merged revisions 168623 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168623 | rmudgett | 2009-01-14 15:51:06 -0600
	  (Wed, 14 Jan 2009) | 11 lines Merged revisions 168622 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168622 | rmudgett | 2009-01-14 15:48:22 -0600 (Wed, 14 Jan 2009)
	  | 4 lines * Fixed create_process() allocation of process ID
	  values. The allocated process IDs could overflow their respective
	  NT and TE fields. Affects outgoing calls. ........
	  ................

2009-01-14 21:30 +0000 [r168621]  Steve Murphy <murf@digium.com>

	* /, apps/app_page.c: Merged revisions 168613 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168613 | murf | 2009-01-14 13:51:26 -0700 (Wed, 14 Jan 2009) | 9
	  lines Merged revisions 168608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168608 | murf | 2009-01-14 12:34:35 -0700 (Wed, 14 Jan 2009) | 1
	  line app_page was failing to compile in dev-mode on my gcc-4.2.4
	  system. This change gets rid of the warning. ........
	  ................

2009-01-14 21:00 +0000 [r168618]  Sean Bright <sean.bright@gmail.com>

	* contrib/scripts/autosupport, /: Merged revisions 168615 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168615 | seanbright | 2009-01-14 15:58:26 -0500
	  (Wed, 14 Jan 2009) | 16 lines Merged revisions 168614 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168614 | seanbright | 2009-01-14 15:52:00 -0500 (Wed, 14 Jan
	  2009) | 9 lines Update autosupport script to supply info for both
	  Zaptel and DAHDI in 1.4 and be sure to run dahdi_test in 1.6.x
	  and trunk instead of zttest. (closes issue #14132) Reported by:
	  dsedivec Patches: asterisk-1.4-autosupport.patch uploaded by
	  dsedivec (license 638) asterisk-trunk-autosupport.patch uploaded
	  by dsedivec (license 638) ........ ................

2009-01-14 20:18 +0000 [r168611]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168610 |
	  mmichelson | 2009-01-14 14:13:48 -0600 (Wed, 14 Jan 2009) | 9
	  lines Restore the "sip show users" and "sip show user" CLI
	  commands (closes issue #14180) Reported by: amorsen Patches:
	  sip_show_users_161v3.diff uploaded by putnopvut (license 60)
	  Tested by: blitzrage, amorsen ........

2009-01-14 19:12 +0000 [r168606]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, /: Merged revisions 168604 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168604 | tilghman | 2009-01-14 13:11:14 -0600 (Wed, 14 Jan 2009)
	  | 14 lines Merged revisions 168603 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168603 | tilghman | 2009-01-14 13:02:55 -0600 (Wed, 14 Jan 2009)
	  | 7 lines Don't read into a buffer without first checking if a
	  value is beyond the end. (closes issue #13600) Reported by: atis
	  Patches: 20090106__bug13600.diff.txt uploaded by Corydon76
	  (license 14) Tested by: atis ........ ................

2009-01-14 02:11 +0000 [r168582-168596]  Terry Wilson <twilson@digium.com>

	* /, apps/app_page.c: Merged revisions 168594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168594 | twilson | 2009-01-13 20:00:40 -0600 (Tue, 13 Jan 2009)
	  | 27 lines Merged revisions 168593 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168593 | twilson | 2009-01-13 19:27:18 -0600 (Tue, 13 Jan 2009)
	  | 20 lines Don't overflow when paging more than 128 extensions
	  The number of available slots for calls in app_page was hardcoded
	  to 128. Proper bounds checking was not in place to enforce this
	  limit, so if more than 128 extensions were passed to the Page()
	  app, Asterisk would crash. This patch instead dynamically
	  allocates memory for the ast_dial structures and removes the
	  (non-functional) arbitrary limit. This issue would have special
	  importance to anyone who is dynamically creating the argument
	  passed to the Page application and allowing more than 128
	  extensions to be added by an outside user via some external
	  interface. The patch posted by a_villacis was slightly modified
	  for some coding guidelines and other cleanups. Thanks,
	  a_villacis! (closes issue #14217) Reported by: a_villacis
	  Patches: 20080912-asterisk-app_page-fix-buffer-overflow.patch
	  uploaded by a (license 660) Tested by: otherwiseguy ........
	  ................

	* /, res/res_http_post.c: Merged revisions 168588 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168588 |
	  twilson | 2009-01-13 17:05:43 -0600 (Tue, 13 Jan 2009) | 5 lines
	  Fully overwrite a same-named file when uploading (closes issue
	  #14190) Reported by: timking ........

	* /, channels/chan_sip.c: Merged revisions 168578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168578 | twilson | 2009-01-13 16:22:34 -0600 (Tue, 13 Jan 2009)
	  | 14 lines Merged revisions 168551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168551 | twilson | 2009-01-13 12:34:14 -0600 (Tue, 13 Jan 2009)
	  | 7 lines Don't pass a value with a side effect to a macro
	  (closes issue #14176) Reported by: paraeco Patches:
	  chan_sip.c.diff uploaded by paraeco (license 658) ........
	  ................

2009-01-13 19:35 +0000 [r168565]  Russell Bryant <russell@digium.com>

	* main/indications.c, main/channel.c, channels/chan_misdn.c,
	  channels/chan_skinny.c, funcs/func_channel.c, main/app.c,
	  res/snmp/agent.c, res/res_indications.c, channels/chan_unistim.c,
	  main/pbx.c, apps/app_read.c, /, include/asterisk/indications.h,
	  apps/app_readexten.c, apps/app_disa.c,
	  include/asterisk/channel.h: Merged revisions 168562 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168562 | russell | 2009-01-13 13:22:13 -0600
	  (Tue, 13 Jan 2009) | 10 lines Merged revisions 168561 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168561 | russell | 2009-01-13 13:13:05 -0600 (Tue, 13 Jan 2009)
	  | 2 lines Revert unnecessary indications API change from rev
	  122314 ........ ................

2009-01-13 17:52 +0000 [r168528-168549]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_logic.c: Merged revisions 168547 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168547 | tilghman | 2009-01-13 11:51:12 -0600 (Tue, 13 Jan 2009)
	  | 13 lines Merged revisions 168546 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168546 | tilghman | 2009-01-13 11:48:00 -0600 (Tue, 13 Jan 2009)
	  | 6 lines If either conditional is NULL, don't try copying it.
	  (closes issue #14226) Reported by: caspy Patches:
	  20090113__bug14226.diff.txt uploaded by Corydon76 (license 14)
	  ........ ................

	* /, channels/chan_alsa.c: Merged revisions 168526 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168526 | tilghman | 2009-01-12 17:45:51 -0600
	  (Mon, 12 Jan 2009) | 12 lines Merged revisions 167095 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167095 | tilghman | 2008-12-31 18:01:22 -0600 (Wed, 31 Dec 2008)
	  | 5 lines Repeat attempts to write when we receive -EAGAIN from
	  the driver, as detailed in the ALSA sample code (see
	  http://www.alsa-project.org/alsa-doc/alsa-lib/_2test_2pcm_8c-example.html#a32)
	  Reported by: Jerry Geis (via the -users list) Fixed by: me
	  (license 14) ........ ................

2009-01-12 23:13 +0000 [r168524]  Mark Michelson <mmichelson@digium.com>

	* main/srv.c, /: Merged revisions 168523 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168523 |
	  mmichelson | 2009-01-12 17:12:30 -0600 (Mon, 12 Jan 2009) | 11
	  lines bump the verbosity of a message in srv.c up by one. It used
	  to be at this level prior to a large patch merge which converted
	  ast_verbose calls to ast_verb (closes issue #14221) Reported by:
	  jcovert Patches: srv.c.patch uploaded by jcovert (license 551)
	  ........

2009-01-12 22:00 +0000 [r168510-168519]  Jeff Peeler <jpeeler@digium.com>

	* /, res/res_agi.c: Merged revisions 168517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168517 | jpeeler | 2009-01-12 15:51:46 -0600 (Mon, 12 Jan 2009)
	  | 12 lines Merged revisions 168516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168516 | jpeeler | 2009-01-12 15:42:34 -0600 (Mon, 12 Jan 2009)
	  | 5 lines (closes issue #13881) Reported by: hoowa Update the app
	  CDR field for AGI commands that are not executing an application
	  via "exec". ........ ................

	* /, channels/chan_agent.c: Merged revisions 168508 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168508 | jpeeler | 2009-01-12 14:53:04 -0600
	  (Mon, 12 Jan 2009) | 15 lines Merged revisions 168507 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168507 | jpeeler | 2009-01-12 14:26:22 -0600 (Mon, 12 Jan 2009)
	  | 9 lines (closes issue #12269) Reported by: IgorG Tested by:
	  denisgalvao This gits rid of the notion of an owning_app allowing
	  the request and hangup to be initiated by different threads.
	  Originating from an active agent channel requires this. The
	  implementation primarily changes __login_exec to wait on a
	  condition variable rather than a lock. Review:
	  http://reviewboard.digium.com/r/35/ ........ ................

2009-01-12 17:26 +0000 [r168500]  Olle Johansson <oej@edvina.net>

	* /, apps/app_minivm.c: Merged revisions 168497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168497 |
	  oej | 2009-01-12 17:31:27 +0100 (MÃ¥n, 12 Jan 2009) | 2 lines
	  Better to use the proper app name ........

2009-01-12 15:05 +0000 [r168488]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ ........

2009-01-12 14:58 +0000 [r168484]  Russell Bryant <russell@digium.com>

	* /, configs/indications.conf.sample: Merged revisions 168481 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168481 | russell | 2009-01-12 08:57:49 -0600
	  (Mon, 12 Jan 2009) | 10 lines Merged revisions 168480 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168480 | russell | 2009-01-12 08:57:27 -0600 (Mon, 12 Jan 2009)
	  | 2 lines s/ringdance/ringcadence/ for Bulgaria ........
	  ................

2009-01-10 01:44 +0000 [r168336]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168334 |
	  tilghman | 2009-01-09 19:42:45 -0600 (Fri, 09 Jan 2009) | 2 lines
	  sizeof for a stringfield is 4. Kinda low for reconstructing a
	  field value. ........

2009-01-09 23:18 +0000 [r168272]  Kevin P. Fleming <kpfleming@digium.com>

	* sounds/Makefile, /: Merged revisions 168270 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168270 | kpfleming | 2009-01-09 17:16:08 -0600 (Fri, 09 Jan
	  2009) | 9 lines Merged revisions 168267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168267 | kpfleming | 2009-01-09 17:12:29 -0600 (Fri, 09 Jan
	  2009) | 1 line update to use new sound file packages that include
	  license files ........ ................

2009-01-09 23:12 +0000 [r168266]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 168192 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168192 | rmudgett | 2009-01-09 15:43:30 -0600
	  (Fri, 09 Jan 2009) | 10 lines Merged revisions 168191 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168191 | rmudgett | 2009-01-09 15:28:42 -0600 (Fri, 09 Jan 2009)
	  | 3 lines * Fix for JIRA AST-175/ABE-1757 * Miscellaneous doxygen
	  comments added. ........ ................

2009-01-09 22:23 +0000 [r168209]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 168200 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r168200 | russell | 2009-01-09 16:21:05 -0600
	  (Fri, 09 Jan 2009) | 10 lines Merged revisions 168198 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168198 | russell | 2009-01-09 16:14:38 -0600 (Fri, 09 Jan 2009)
	  | 2 lines Make this compile for mvanbaak ........
	  ................

2009-01-09 21:57 +0000 [r168196]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 168193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r168193 | mmichelson | 2009-01-09 15:53:26 -0600 (Fri, 09 Jan
	  2009) | 21 lines Merged revisions 168128 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r168128 | mmichelson | 2009-01-09 14:08:04 -0600 (Fri, 09 Jan
	  2009) | 13 lines Add check_via calls to more request handlers
	  INFO, NOTIFY, OPTIONS, REFER, and MESSAGE requests were not
	  checking the topmost Via to determine where to send the response.
	  Adding check_via calls to those request handlers solves this.
	  (closes issue #13071) Reported by: baron Patches: check_via.patch
	  uploaded by baron (license 531) Tested by: baron ........
	  ................

2009-01-09 20:30 +0000 [r168157]  Terry Wilson <twilson@digium.com>

	* /, res/res_phoneprov.c: Merged revisions 168142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168142 |
	  twilson | 2009-01-09 14:25:25 -0600 (Fri, 09 Jan 2009) | 7 lines
	  Don't leak memory if phoneprov.conf does not exist (closes issue
	  #14203) Reported by: jamesgolovich Patches:
	  asterisk-phoneprovleak.diff.txt uploaded by jamesgolovich
	  (license 176) ........

2009-01-09 18:42 +0000 [r168092]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 168090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168090 |
	  tilghman | 2009-01-09 12:30:55 -0600 (Fri, 09 Jan 2009) | 3 lines
	  When using ast_str with a non-ast_str-enabled API, we need to
	  update the buffer or otherwise, we cannot use ast_str_strlen().
	  ........

2009-01-09 16:41 +0000 [r168015]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/logger.c: Merged revisions 168014 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r168014 |
	  mnicholson | 2009-01-09 10:32:34 -0600 (Fri, 09 Jan 2009) | 5
	  lines Use ast_safe_system() in logger.c instead of system()
	  (closes issue #14194) Reported by: pabelanger ........

2009-01-09 00:45 +0000 [r167972]  Terry Wilson <twilson@digium.com>

	* apps/app_dial.c, /: Merged revisions 167935 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r167935 |
	  twilson | 2009-01-08 18:13:12 -0600 (Thu, 08 Jan 2009) | 2 lines
	  Set peer context and exten values so MACRO_EXTEN and
	  MACRO_CONTEXT will be set ........

2009-01-08 22:45 +0000 [r167836-167905]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 167894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167894 | tilghman | 2009-01-08 16:37:20 -0600 (Thu, 08 Jan 2009)
	  | 13 lines Merged revisions 167840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167840 | tilghman | 2009-01-08 16:08:56 -0600 (Thu, 08 Jan 2009)
	  | 6 lines Don't truncate database results at 255 chars. (closes
	  issue #14069) Reported by: evandro Patches:
	  20081214__bug14069.diff.txt uploaded by Corydon76 (license 14)
	  ........ ................

	* /, apps/app_minivm.c: Merged revisions 167835 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r167835 |
	  tilghman | 2009-01-08 15:32:45 -0600 (Thu, 08 Jan 2009) | 6 lines
	  Textual changes, consistency in status variable naming, and other
	  minor bugs. (closes issue #13943) Reported by: Marquis Patches:
	  minivm_trunk_fixes3.patch uploaded by Marquis (license 32)
	  ........

2009-01-08 17:28 +0000 [r167701-167727]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 167720 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167720 | kpfleming | 2009-01-08 11:26:03 -0600 (Thu, 08 Jan
	  2009) | 9 lines Merged revisions 167714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167714 | kpfleming | 2009-01-08 11:24:21 -0600 (Thu, 08 Jan
	  2009) | 1 line remove an unnecessary argument to queue_request()
	  ........ ................

	* /, channels/chan_sip.c: Merged revisions 167700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167700 | kpfleming | 2009-01-08 10:43:26 -0600 (Thu, 08 Jan
	  2009) | 12 lines Merged revisions 167620 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167620 | kpfleming | 2009-01-07 17:32:21 -0600 (Wed, 07 Jan
	  2009) | 5 lines When a SIP request or response arrives for a
	  dialog with an associated Asterisk channel, and the lock on that
	  channel cannot be obtained because it is held by another thread,
	  instead of dropping the request/response, queue it for later
	  processing when the channel lock becomes available.
	  http://reviewboard.digium.com/r/123/ ........ ................

2009-01-08 14:30 +0000 [r167663]  Leif Madsen <lmadsen@digium.com>

	* contrib/scripts/sip-friends.sql, /: Merged revisions 167662 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r167662 | lmadsen | 2009-01-08 09:27:53 -0500 (Thu, 08
	  Jan 2009) | 1 line Oops... fix the fieldname I changed yesterday
	  to be right. ........

2009-01-07 22:37 +0000 [r167544-167573]  Russell Bryant <russell@digium.com>

	* /, main/file.c: Merged revisions 167569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167569 | russell | 2009-01-07 16:36:34 -0600 (Wed, 07 Jan 2009)
	  | 10 lines Merged revisions 167566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167566 | russell | 2009-01-07 16:35:36 -0600 (Wed, 07 Jan 2009)
	  | 2 lines Fix the last couple of places where free() was
	  improperly used directly. ........ ................

	* /, main/file.c: Merged revisions 167555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167555 | russell | 2009-01-07 16:27:23 -0600 (Wed, 07 Jan 2009)
	  | 10 lines Merged revisions 167554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167554 | russell | 2009-01-07 16:26:42 -0600 (Wed, 07 Jan 2009)
	  | 2 lines Don't fclose() the file early, the filestream
	  destructor will handle it. ........ ................

	* /, main/file.c: Merged revisions 167546 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167546 | russell | 2009-01-07 16:20:31 -0600 (Wed, 07 Jan 2009)
	  | 10 lines Merged revisions 167545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167545 | russell | 2009-01-07 16:19:47 -0600 (Wed, 07 Jan 2009)
	  | 2 lines Only try to close the file if one was actually opened
	  ........ ................

	* /, main/file.c: Merged revisions 167542 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167542 | russell | 2009-01-07 16:05:29 -0600 (Wed, 07 Jan 2009)
	  | 12 lines Merged revisions 167541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167541 | russell | 2009-01-07 16:03:59 -0600 (Wed, 07 Jan 2009)
	  | 4 lines Don't use free() directly. This caused a crash since
	  ast_filestream is now an ao2 object. Reported by JunK-Y on IRC,
	  #asterisk-dev ........ ................

2009-01-07 18:32 +0000 [r167502]  BJ Weschke <bweschke@btwtech.com>

	* apps/app_followme.c, /: Merged revisions 167478 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r167478 |
	  bweschke | 2009-01-07 13:20:31 -0500 (Wed, 07 Jan 2009) | 7 lines
	  Answer the channel if it has not already been answered and we've
	  already found a valid profile for followme. (closes issue #14140)
	  Reported by: dimas Patches: 14140.patch uploaded by dimas
	  ........

2009-01-07 18:27 +0000 [r167491]  Leif Madsen <lmadsen@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 167477 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r167477 | lmadsen | 2009-01-07 13:18:45 -0500 (Wed, 07
	  Jan 2009) | 8 lines Update queues.conf.sample documentation.
	  Update the queues.conf.sample documentation to mention that you
	  need to preload chan_local.so as well if you plan on using Local
	  channels for queue members, and you're preloading pbx_config.so.
	  (closes issue #14179) Reported by: CrashHD Tested by: CrashHD
	  ........

2009-01-07 17:46 +0000 [r167456]  Russell Bryant <russell@digium.com>

	* main/indications.c, /: Merged revisions 167442 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167442 | russell | 2009-01-07 11:35:39 -0600 (Wed, 07 Jan 2009)
	  | 12 lines Merged revisions 167432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167432 | russell | 2009-01-07 11:29:53 -0600 (Wed, 07 Jan 2009)
	  | 4 lines Treat an empty string the same way as a NULL country
	  argument. In passing, simplify the handling of returning a
	  default tone zone. ........ ................

2009-01-07 14:41 +0000 [r167376]  Leif Madsen <lmadsen@digium.com>

	* contrib/scripts/sip-friends.sql, /: Merged revisions 167373 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r167373 | lmadsen | 2009-01-07 09:26:19 -0500 (Wed, 07
	  Jan 2009) | 1 line Update the sip-friends.sql file to use the
	  non-deprecated 'defaultname' instead of 'username' and remove an
	  extra comma that would cause the script to fail as-is ........

2009-01-06 21:38 +0000 [r167306]  Mark Michelson <mmichelson@digium.com>

	* main/db.c, /: Merged revisions 167301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167301 | mmichelson | 2009-01-06 15:36:44 -0600 (Tue, 06 Jan
	  2009) | 16 lines Merged revisions 167299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167299 | mmichelson | 2009-01-06 15:35:57 -0600 (Tue, 06 Jan
	  2009) | 8 lines Use the correct variable when creating the format
	  string (closes issue #14177) Reported by: nic_bellamy Patches:
	  asterisk-trunk-svn-r167242-ast_db_gettree.patch uploaded by nic
	  (license 299) ........ ................

2009-01-06 21:10 +0000 [r167268]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 167265 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r167265 | tilghman | 2009-01-06 15:02:33 -0600
	  (Tue, 06 Jan 2009) | 16 lines Merged revisions 167260 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r167260 | tilghman | 2009-01-06 14:48:05 -0600
	  (Tue, 06 Jan 2009) | 9 lines Merged revisions 167259 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r167259 | tilghman | 2009-01-06 14:44:03 -0600 (Tue, 06
	  Jan 2009) | 2 lines Security fix AST-2009-001. ........
	  ................ ................

2009-01-05 17:10 +0000 [r167182]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 167180 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r167180 | mmichelson | 2009-01-05 10:59:36 -0600 (Mon, 05 Jan
	  2009) | 49 lines Merged revisions 167179 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r167179 | mmichelson | 2009-01-05 10:51:59 -0600 (Mon, 05 Jan
	  2009) | 41 lines A couple of changes to T.38 SDP attribute
	  handling There are some boolean attributes for T.38 such as
	  T38FaxFillBitRemoval, T38FaxTranscodingMMR, and
	  T38FaxTranscodingJBIG. By simply being present, we should treat
	  these as a "true" value. The current code, however, was requiring
	  a 1 or 0 as the value of the attribute in order to parse it. This
	  is due to the fact that there are some T.38 endpoints and
	  gateways that also transmit this information incorrectly. This
	  patch follows the "be liberal in what you accept and strict in
	  what you send" philosophy by accepting both the correctly- and
	  incorrectly-formatted attributes, but only sending information as
	  it is supposed to be sent. It was also discovered that a
	  particular type of T.38 gateway sends some non-standard T.38 SDP
	  attributes. Instead of using T38FaxMaxDatagram and T38MaxBitRate,
	  it used T38MaxDatagram and T38FaxMaxRate respectively. We now
	  will properly accept these attributes as well. Note that there
	  are a lot of patches cited in the below commit message template.
	  This is because the person who submitted these patches is an
	  awesome person and wrote 1.4, 1.6.0, and 1.6.1 variants. (closes
	  issue #13976) Reported by: linulin Patches:
	  chan_sip.c.1.4-update1.diff uploaded by arcivanov (license 648)
	  chan_sip.c.1.6.0-update1.diff uploaded by arcivanov (license 648)
	  chan_sip.c.1.6.1-update1.diff uploaded by arcivanov (license 648)
	  chan_sip.c.1.4-relaxedT38_update1.diff uploaded by arcivanov
	  (license 648) chan_sip.c.1.6.0-relaxedT38_update1.diff uploaded
	  by arcivanov (license 648)
	  chan_sip.c.1.6.1-relaxedT38_update1.diff uploaded by arcivanov
	  (license 648) Tested by: arcivanov ........ ................

2009-01-05 16:46 +0000 [r167178]  Tilghman Lesher <tlesher@digium.com>

	* /, UPGRADE-1.6.txt: Merged revisions 167176 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r167176 |
	  tilghman | 2009-01-05 10:44:47 -0600 (Mon, 05 Jan 2009) | 7 lines
	  More clearly explain that quote marks are no longer necessary.
	  (closes issue #13718) Reported by: davidw Patches:
	  20081020__bug13718.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: blitzrage ........

2008-12-31 19:38 +0000 [r166957]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 166954 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r166954 | tilghman | 2008-12-31 13:34:28 -0600
	  (Wed, 31 Dec 2008) | 12 lines Merged revisions 166953 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166953 | tilghman | 2008-12-31 13:20:35 -0600 (Wed, 31 Dec 2008)
	  | 5 lines Also inherit the musiconhold class. (Closes #14153)
	  Reported by: Jerry Geis, via the users list. Patch by: me
	  (license 14) ........ ................

2008-12-30 20:57 +0000 [r166910]  Terry Wilson <twilson@digium.com>

	* phoneprov/polycom_line.xml, doc/realtimetext.txt, /,
	  res/res_phoneprov.c, doc/sip-retransmit.txt,
	  doc/tex/phoneprov.tex, res/res_http_post.c: Merged revisions
	  166908 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166908 |
	  twilson | 2008-12-30 14:50:05 -0600 (Tue, 30 Dec 2008) | 2 lines
	  Fix some svn:keywords ........

2008-12-29 18:16 +0000 [r166863]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, apps/app_dial.c, /: Merged revisions 166861 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r166861 | mmichelson | 2008-12-29 12:04:52 -0600 (Mon,
	  29 Dec 2008) | 14 lines Update app_queue to deal with the removal
	  of AST_PBX_KEEPALIVE When placing a call to a queue which ran a
	  gosub on the member's channel, Asterisk would crash every time,
	  stemming from the fact that the member's channel was being hung
	  up unexpectedly when the Gosub completed. The necessary change
	  was pretty much copied and pasted from app_dial's similar changes
	  made last week. I also took the opportunity to change a LOG_DEBUG
	  message in app_dial to use ast_debug. I am guessing this was due
	  to a direct merge from 1.4 that was not corrected to use trunk's
	  preferred syntax. ........

2008-12-29 14:52 +0000 [r166858]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Per kpfleming add a note describing why you
	  must never change the first element of peer_finding_info.

2008-12-28 15:16 +0000 [r166775]  Russell Bryant <russell@digium.com>

	* channels/misdn_config.c, /: Merged revisions 166773 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r166773 | russell | 2008-12-28 09:15:14 -0600
	  (Sun, 28 Dec 2008) | 12 lines Merged revisions 166772 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166772 | russell | 2008-12-28 09:13:48 -0600 (Sun, 28 Dec 2008)
	  | 4 lines Use strncat() instead of an sprintf() in which source
	  and target buffers overlap
	  http://lists.digium.com/pipermail/asterisk-dev/2008-December/035919.html
	  ........ ................

2008-12-24 01:15 +0000 [r166730]  Steve Murphy <murf@digium.com>

	* apps/app_queue.c, include/asterisk/features.h, apps/app_dial.c,
	  main/pbx.c, /, main/features.c, apps/app_macro.c,
	  include/asterisk/pbx.h: Merged revisions 166665 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk This merged from
	  trunk with no conflicts. I tested mostly the 'tired' cases, and
	  for the most part ignored the tests for reconnecting and dialing
	  in to fetch a parked call, after the first case. ................
	  r166665 | murf | 2008-12-23 11:13:49 -0700 (Tue, 23 Dec 2008) |
	  153 lines Merged revisions 166093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 In order to
	  merge this 1.4 patch into trunk, I had to resolve some conflicts
	  and wait for Russell to make some changes to res_agi. I re-ran
	  all the tests; 39 calls in all, and made fairly careful notes and
	  comparisons: I don't want this to blow up some aspect of
	  asterisk; I completely removed the KEEPALIVE from the pbx.h
	  decls. The first 3 scenarios involving feature park; feature xfer
	  to 700; hookflash park to Park() app call all behave the same,
	  don't appear to leave hung channels, and no crashes. ........
	  r166093 | murf | 2008-12-19 15:30:32 -0700 (Fri, 19 Dec 2008) |
	  131 lines This merges the masqpark branch into 1.4 These changes
	  eliminate the need for (and use of) the KEEPALIVE return code in
	  res_features.c; There are other places that use this result code
	  for similar purposes at a higher level, these appear to be left
	  alone in 1.4, but attacked in trunk. The reason these changes are
	  being made in 1.4, is that parking ends a channel's life, in some
	  situations, and the code in the bridge (and some other places),
	  was not checking the result code properly, and dereferencing the
	  channel pointer, which could lead to memory corruption and
	  crashes. Calling the masq_park function eliminates this danger in
	  higher levels. A series of previous commits have replaced some
	  parking calls with masq_park, but this patch puts them ALL to
	  rest, (except one, purposely left alone because a masquerade is
	  done anyway), and gets rid of the code that tests the KEEPALIVE
	  result, and the NOHANGUP_PEER result codes. While bug 13820
	  inspired this work, this patch does not solve all the problems
	  mentioned there. I have tested this patch (again) to make sure I
	  have not introduced regressions. Crashes that occurred when a
	  parked party hung up while the parking party was listening to the
	  numbers of the parking stall being assigned, is eliminated. These
	  are the cases where parking code may be activated: 1. Feature one
	  touch (eg. *3) 2. Feature blind xfer to parking lot (eg ##700) 3.
	  Run Park() app from dialplan (eg sip xfer to 700) (eg. dahdi
	  hookflash xfer to 700) 4. Run Park via manager. The interesting
	  testing cases for parking are: I. A calls B, A parks B a. B hangs
	  up while A is getting the numbers announced. b. B hangs up after
	  A gets the announcement, but before the parking time expires c. B
	  waits, time expires, A is redialed, A answers, B and A are
	  connected, after which, B hangs up. d. C picks up B while still
	  in parking lot. II. A calls B, B parks A a. A hangs up while B is
	  getting the numbers announced. b. A hangs up after B gets the
	  announcement, but before the parking time expires c. A waits,
	  time expires, B is redialed, B answers, A and B are connected,
	  after which, A hangs up. d. C picks up A while still in parking
	  lot. Testing this throroughly involves acting all the
	  permutations of I and II, in situations 1,2,3, and 4. Since I
	  added a few more changes (ALL references to KEEPALIVE in the
	  bridge code eliimated (I missed one earlier), I retested most of
	  the above cases, and no crashes. H-extension weirdness. Current
	  h-extension execution is not completely correct for several of
	  the cases. For the case where A calls B, and A parks B, the 'h'
	  exten is run on A's channel as soon as the park is accomplished.
	  This is expected behavior. But when A calls B, and B parks A,
	  this will be current behavior: After B parks A, B is hung up by
	  the system, and the 'h' (hangup) exten gets run, but the channel
	  mentioned will be a derivative of A's... Thus, if A is DAHDI/1,
	  and B is DAHDI/2, the h-extension will be run on channel
	  Parked/DAHDI/1-1<ZOMBIE>, and the start/answer/end info will be
	  those relating to Channel A. And, in the case where A is
	  reconnected to B after the park time expires, when both parties
	  hang up after the joyful reunion, no h-exten will be run at all.
	  In the case where C picks up A from the parking lot, when either
	  A or C hang up, the h-exten will be run for the C channel. CDR's
	  are a separate issue, and not addressed here. As to WHY this
	  strange behavior occurs, the answer lies in the procedure
	  followed to accomplish handing over the channel to the parking
	  manager thread. This procedure is called masquerading. In the
	  process, a duplicate copy of the channel is created, and most of
	  the active data is given to the new copy. The original channel
	  gets its name changed to XXX<ZOMBIE> and keeps the PBX
	  information for the sake of the original thread (preserving its
	  role as a call originator, if it had this role to begin with),
	  while the new channel is without this info and becomes a call
	  target (a "peer"). In this case, the parking lot manager thread
	  is handed the new (masqueraded) channel. It will not run an
	  h-exten on the channel if it hangs up while in the parking lot.
	  The h exten will be run on the original channel instead, in the
	  original thread, after the bridge completes. See bug 13820 for
	  our intentions as to how to clean up the h exten behavior.
	  Review: http://reviewboard.digium.com/r/29/ ........
	  ................

2008-12-23 20:56 +0000 [r166698]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/app.h, /, channels/chan_sip.c, main/app.c:
	  Merged revisions 166696 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166696 |
	  tilghman | 2008-12-23 14:47:08 -0600 (Tue, 23 Dec 2008) | 7 lines
	  Allow semicolons and extended characters in user-specified SIP
	  headers. (closes issue #14110) Reported by: gork Patches:
	  20081222__bug14110__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: gork, putnopvut ........

2008-12-23 15:20 +0000 [r166571]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 166569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r166569 | mmichelson | 2008-12-23 09:17:54 -0600 (Tue, 23 Dec
	  2008) | 20 lines Merged revisions 166568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166568 | mmichelson | 2008-12-23 09:16:26 -0600 (Tue, 23 Dec
	  2008) | 12 lines Fix a crash resulting from a datastore with
	  inheritance but no duplicate callback The fix for this is to
	  simply set the newly created datastore's data pointer to NULL if
	  it is inherited but has no duplicate callback. (closes issue
	  #14113) Reported by: francesco_r Patches: 14113.patch uploaded by
	  putnopvut (license 60) Tested by: francesco_r ........
	  ................

2008-12-23 04:34 +0000 [r166535]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 166533 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r166533 | tilghman | 2008-12-22 22:32:15 -0600 (Mon, 22 Dec 2008)
	  | 11 lines Merged revisions 166509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166509 | tilghman | 2008-12-22 22:05:25 -0600 (Mon, 22 Dec 2008)
	  | 4 lines Use the integer form of condition for integer
	  comparisons. (closes issue #14127) Reported by: andrew ........
	  ................

2008-12-22 23:27 +0000 [r166440-166472]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_agi.c: Merged revisions 166470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166470 |
	  mmichelson | 2008-12-22 17:25:34 -0600 (Mon, 22 Dec 2008) | 11
	  lines Always use the value of the AGISIGHUP when running an AGI.
	  Prior to this patch, the value of AGISIGUP was not always honored
	  when set on a channel. (closes issue #13711) Reported by:
	  fmueller Patches: 13711.patch uploaded by putnopvut (license 60)
	  ........

	* channels/chan_dahdi.c, /: Merged revisions 166382 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r166382 | mmichelson | 2008-12-22 15:08:03 -0600
	  (Mon, 22 Dec 2008) | 44 lines Merged revisions 166380 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166380 | mmichelson | 2008-12-22 14:56:29 -0600 (Mon, 22 Dec
	  2008) | 36 lines Fix a deadlock relating to channel locks and
	  autoservice It has been discovered that if a channel is locked
	  prior to a call to ast_autoservice_stop, then it is likely that a
	  deadlock will occur. The reason is that the call to
	  ast_autoservice_stop has a check built into it to be sure that
	  the thread running autoservice is not currently trying to
	  manipulate the channel we are about to pull out of autoservice.
	  The autoservice thread, however, cannot advance beyond where it
	  currently is, though, because it is trying to acquire the lock of
	  the channel for which autoservice is attempting to be stopped.
	  The gist of all this is that a channel MUST NOT be locked when
	  attempting to stop autoservice on the channel. In this particular
	  case, the channel was locked by a call to ast_read. A call to
	  ast_exists_extension led to autoservice being started and stopped
	  due to the existence of dialplan switches. It may be that there
	  are future commits which handle the same symptoms but in a
	  different location, but based on my looks through the code, it is
	  very rare to see a construct such as this one. (closes issue
	  #14057) Reported by: rtrauntvein Patches: 14057v3.patch uploaded
	  by putnopvut (license 60) Tested by: rtrauntvein Review:
	  http://reviewboard.digium.com/r/107/ ........ ................

2008-12-22 21:46 +0000 [r166277-166438]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 166436 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r166436 | russell | 2008-12-22 15:45:28 -0600 (Mon, 22 Dec 2008)
	  | 2 lines Cosmetic change - don't mix struct initializer styles.
	  ........

	* /, res/res_musiconhold.c: Merged revisions 166377 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r166377 | russell | 2008-12-22 14:26:48 -0600 (Mon, 22 Dec 2008)
	  | 2 lines Fix a bad typo. ........

	* main/astobj2.c, /: Merged revisions 166342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166342 |
	  russell | 2008-12-22 11:44:23 -0600 (Mon, 22 Dec 2008) | 2 lines
	  Remove some error messages. This is the default handler that is
	  valid to use. ........

	* /, main/utils.c: Merged revisions 166317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r166317 | russell | 2008-12-22 11:29:10 -0600 (Mon, 22 Dec 2008)
	  | 10 lines Merged revisions 166297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r166297 | russell | 2008-12-22 11:22:56 -0600 (Mon, 22 Dec 2008)
	  | 2 lines Fix up timeout handling in ast_carefulwrite(). ........
	  ................

	* include/asterisk/utils.h, main/manager.c, /, main/utils.c: Merged
	  revisions 166282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166282 |
	  russell | 2008-12-22 11:09:36 -0600 (Mon, 22 Dec 2008) | 12 lines
	  Introduce ast_careful_fwrite() and use in AMI to prevent partial
	  writes. This patch introduces a function to do careful writes on
	  a file stream which will handle timeouts and partial writes. It
	  is currently used in AMI to address the issue that has been
	  reported. However, there are probably a few other places where
	  this could be used. (closes issue #13546) Reported by: srt Tested
	  by: russell http://reviewboard.digium.com/r/104/ ........

	* /, res/res_musiconhold.c: Merged revisions 166273 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r166273 | russell | 2008-12-22 10:10:40 -0600 (Mon, 22 Dec 2008)
	  | 7 lines Re-work ref count handling of MoH classes using astobj2
	  to resolve crashes. (closes issue #13566) Reported by:
	  igorcarneiro Tested by: russell Review:
	  http://reviewboard.digium.com/r/106/ ........

2008-12-22 16:17 +0000 [r166275]  Mark Michelson <mmichelson@digium.com>

	* /, funcs/func_timeout.c, main/file.c: Merged revisions 166267 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r166267 | mmichelson | 2008-12-22 10:07:59 -0600 (Mon,
	  22 Dec 2008) | 17 lines Fix a file playback crash and explicitly
	  initialize values in func_timeout.c A crash was brought up on the
	  bugtracker. The first run through valgrind was full of legitimate
	  complaints of uninitialized values in func_timeout when setting a
	  response timeout. These were fixed but the crash persisted. A
	  second run through showed the real problem. The reference
	  counting used for filestreams was incorrect because there were
	  some missing increments when a frame was read from a format
	  module. (closes issue #14118) Reported by: blitzrage Patches:
	  14118v2.patch uploaded by putnopvut (license 60) Tested by:
	  blitzrage ........

2008-12-22 16:10 +0000 [r166272]  Joshua Colp <jcolp@digium.com>

	* main/dnsmgr.c, /: Merged revisions 166268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166268 |
	  file | 2008-12-22 12:08:13 -0400 (Mon, 22 Dec 2008) | 7 lines
	  Record the previous port in the temporary address structure so
	  that the comparison does not treat the host as having changed
	  even if it did not. This would have been uninitialized before and
	  would have led to a baddddd port. (closes issue #13628) Reported
	  by: pananix Patches: bug13628.patch uploaded by jpeeler (license
	  325) Tested by: file, blitzrage ........

2008-12-22 14:19 +0000 [r166260]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c: Merged revisions 166258 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166258 |
	  russell | 2008-12-22 08:16:54 -0600 (Mon, 22 Dec 2008) | 26 lines
	  Remove AST_PBX_KEEPALIVE usage from res_agi. This patch removes
	  the usage of AST_PBX_KEEPALIVE from res_agi. The only usage was
	  for the AGI command, "asyncagi break". This patch removes this
	  feature. Normally, a feature would not be removed like this.
	  However, this code is broken and usage of it will result in a
	  memory leak. Usage of this feature will make the AGI code return
	  a result of AST_PBX_KEEPALIVE. The PBX handler assumes that
	  another thread has assumed ownership of the channel. The channel
	  thread will exit without destroying the channel. Unfortunately,
	  _no_ thread has ownership of the channel at this point. There are
	  a couple of serious problems here: 1) The only way to recover the
	  caller is to issue a channel redirect. This will work, but this
	  will be done with a masquerade, and the old ast_channel structure
	  will be lost. 2) Until the channel redirect happens, there is no
	  code servicing the channel. That means nothing is reading audio
	  or handling events coming from the channel. This is very bad. The
	  recommended way to get this same "break" functionality is to
	  issue the redirect while the channel is still being handled by
	  the AGI code. That way, there will be no memory leak, and there
	  will be no period of time that the channel is not being serviced.
	  ........

2008-12-19 23:45 +0000 [r166098-166164]  Mark Michelson <mmichelson@digium.com>

	* /, main/audiohook.c: Merged revisions 166162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166162 |
	  mmichelson | 2008-12-19 17:45:00 -0600 (Fri, 19 Dec 2008) | 6
	  lines Get rid of an extra space. I don't know how this crept back
	  in when I had already fixed it earlier ........

	* funcs/func_audiohookinherit.c: Switch documentation formats for
	  func_audiohookinherit.c 1.6.1 does not have xml documentation, so
	  I reverted to the old way here.

	* main/channel.c, funcs/func_audiohookinherit.c (added), /,
	  include/asterisk/audiohook.h, main/audiohook.c: Merged revisions
	  166092,166095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r166092 |
	  mmichelson | 2008-12-19 16:26:16 -0600 (Fri, 19 Dec 2008) | 28
	  lines Adding a new dialplan function AUDIOHOOK_INHERIT This
	  function is being added as a method to allow for an audiohook to
	  move to a new channel during a channel masquerade. The most
	  obvious use for such a facility is for MixMonitor when a transfer
	  is performed. Prior to the addition of this functionality, if a
	  channel running MixMonitor was transferred by another party, then
	  the recording would stop once the transfer had completed. By
	  using AUDIOHOOK_INHERIT, you can make MixMonitor continue
	  recording the call even after the transfer has completed. It has
	  also been determined that since this is seen by most as a bug fix
	  and is not an invasive change, this functionality will also be
	  backported to 1.4 and merged into the 1.6.0 branches, even though
	  they are feature-frozen. (closes issue #13538) Reported by: mbit
	  Patches: 13538.patch uploaded by putnopvut (license 60) Tested
	  by: putnopvut Review: http://reviewboard.digium.com/r/102/
	  ........ r166095 | mmichelson | 2008-12-19 16:40:57 -0600 (Fri,
	  19 Dec 2008) | 5 lines Remove the verbatim tag from the author
	  line I could have sworn I already did that before, though...
	  ........

2008-12-19 15:08 +0000 [r165892]  Russell Bryant <russell@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 165890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r165890 | russell | 2008-12-19 09:05:09 -0600 (Fri, 19 Dec 2008)
	  | 17 lines Merged revisions 165889 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165889 | russell | 2008-12-19 09:03:02 -0600 (Fri, 19 Dec 2008)
	  | 9 lines Ensure that the chanspy datastore is fully initialized.
	  This patch resolved some random crash issues observed by a user
	  on a BSD system (closes issue #14111) Reported by: ys Patches:
	  app_chanspy.c.diff uploaded by ys (license 281) ........
	  ................

2008-12-18  Leif Madsen <leif@digium.com>

	* Asterisk 1.6.1-beta4 released.

2008-12-18 21:57 +0000 [r165808]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 165797 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r165797 | tilghman | 2008-12-18 15:41:02 -0600
	  (Thu, 18 Dec 2008) | 15 lines Merged revisions 165767 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165767 | tilghman | 2008-12-18 15:14:47 -0600 (Thu, 18 Dec 2008)
	  | 8 lines Add mutexes around accesses to the IMAP library
	  interface. This prevents certain crashes, especially when shared
	  mailboxes are used. (closes issue #13653) Reported by:
	  howardwilkinson Patches:
	  asterisk-1.4.21.2-appvoicemail-sharedimap-lock.patch uploaded by
	  howardwilkinson (license 590) Tested by: jpeeler ........
	  ................

2008-12-18 21:47 +0000 [r165804]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 165801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r165801 | russell | 2008-12-18 15:44:47 -0600 (Thu, 18 Dec 2008)
	  | 19 lines Merged revisions 165796 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165796 | russell | 2008-12-18 15:39:25 -0600 (Thu, 18 Dec 2008)
	  | 11 lines Make ast_carefulwrite() be more careful. This patch
	  handles some additional cases that could result in partial writes
	  to the file description. This was done to address complaints
	  about partial writes on AMI. (issue #13546) (more changes needed
	  to address potential problems in 1.6) Reported by: srt Tested by:
	  russell Review: http://reviewboard.digium.com/r/99/ ........
	  ................

2008-12-18 21:24 +0000 [r165794]  Joshua Colp <jcolp@digium.com>

	* apps/app_queue.c, channels/chan_oss.c, channels/chan_dahdi.c,
	  channels/chan_misdn.c, /, channels/chan_sip.c, pbx/pbx_ael.c:
	  Merged revisions 165792 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165792 |
	  file | 2008-12-18 17:21:44 -0400 (Thu, 18 Dec 2008) | 6 lines
	  Numerous documentation updates. (closes issue #13970) Reported
	  by: pkempgen Patches: __20081217_cli_usage_fixes.patch.txt
	  uploaded by blitzrage (license 10) ........

2008-12-18 19:45 +0000 [r165728]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c, main/pbx.c, /, include/asterisk/pbx.h: Merged
	  revisions 165723 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165723 |
	  russell | 2008-12-18 13:33:42 -0600 (Thu, 18 Dec 2008) | 14 lines
	  Remove the need for AST_PBX_KEEPALIVE with the GoSub option from
	  Dial. This is part of an effort to completely remove
	  AST_PBX_KEEPALIVE and other similar return codes from the source.
	  While this usage was perfectly safe, there are others that are
	  problematic. Since we know ahead of time that we do not want to
	  PBX to destroy the channel, the PBX API has been changed so that
	  information can be provided as an argument, instead, thus
	  removing the need for the KEEPALIVE return value. Further changes
	  to get rid of KEEPALIVE and related code is being done by murf.
	  There is a patch up for that on review 29. Review:
	  http://reviewboard.digium.com/r/98/ ........

2008-12-18 19:36 +0000 [r165725]  Mark Michelson <mmichelson@digium.com>

	* res/res_odbc.c, /: Merged revisions 165724 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165724 |
	  mmichelson | 2008-12-18 13:34:33 -0600 (Thu, 18 Dec 2008) | 8
	  lines Fix crashes in res_odbc. The variable "class" was being set
	  NULL just prior to being dereferenced in an ao2_link call. I have
	  moved the setting of the variable to NULL until after the
	  ao2_link call. ........

2008-12-18 18:58 +0000 [r165664]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 165662 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r165662 | russell | 2008-12-18 12:54:47 -0600
	  (Thu, 18 Dec 2008) | 15 lines Merged revisions 165661 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165661 | russell | 2008-12-18 12:52:18 -0600 (Thu, 18 Dec 2008)
	  | 7 lines Set the process group ID on the MOH process so that all
	  children will get killed (closes issue #14099) Reported by: caspy
	  Patches: res_musiconhold.c.patch.killpg.try2 uploaded by caspy
	  (license 645) ........ ................

2008-12-18 18:47 +0000 [r165660]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 165658 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r165658 | tilghman | 2008-12-18 12:36:48 -0600 (Thu, 18 Dec 2008)
	  | 2 lines Fix 2 resource leaks and fix another pipe-to-comma
	  conversion ........

2008-12-18 17:59 +0000 [r165605-165606]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merge in changes to return chan_sip to
	  matching based on how it was previously done and how it is done
	  in trunk. It will do name based for users and friends and IP
	  based for peers. (closes issue #14107) Reported by: jsmith

	* main/rtp.c, /: Merged revisions 165599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r165599 | file | 2008-12-18 13:13:32 -0400 (Thu, 18 Dec 2008) |
	  11 lines Merged revisions 165591 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165591 | file | 2008-12-18 13:11:42 -0400 (Thu, 18 Dec 2008) | 4
	  lines Only care about a compatible codec for early bridging if we
	  are actually bridging to another channel. If we are not we
	  actually want to bring the audio back to us. (closes issue
	  #13545) Reported by: davidw ........ ................

2008-12-18 16:48 +0000 [r165543]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, /: Merged revisions 165541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165541 |
	  tilghman | 2008-12-18 10:36:48 -0600 (Thu, 18 Dec 2008) | 2 lines
	  Fix reference counts of the class and add an assertion to the
	  end. ........

2008-12-17 21:48 +0000 [r165332]  Mark Michelson <mmichelson@digium.com>

	* res/res_odbc.c, /: Merged revisions 165330 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165330 |
	  mmichelson | 2008-12-17 15:46:19 -0600 (Wed, 17 Dec 2008) | 3
	  lines Fix a refcount leak in res_odbc ........

2008-12-17 21:31 +0000 [r165329]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 165325 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165325 |
	  tilghman | 2008-12-17 15:28:51 -0600 (Wed, 17 Dec 2008) | 2 lines
	  Oops, broke trunk ........

2008-12-17 21:25 +0000 [r165324]  Mark Michelson <mmichelson@digium.com>

	* apps/app_directory.c, apps/app_queue.c, apps/app_voicemail.c, /,
	  res/res_realtime.c: Merged revisions 165318 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r165318 | mmichelson | 2008-12-17 15:17:20 -0600 (Wed, 17 Dec
	  2008) | 15 lines Merged revisions 165255 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165255 | mmichelson | 2008-12-17 14:51:38 -0600 (Wed, 17 Dec
	  2008) | 7 lines Fix some memory leaks found while looking at how
	  realtime configs are handled. Also cleaned up some coding
	  guidelines violations in app_realtime.c, mostly related to
	  spacing ........ ................

2008-12-17 21:22 +0000 [r165323]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 165319 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r165319 | tilghman | 2008-12-17 15:18:57 -0600 (Wed, 17 Dec 2008)
	  | 11 lines Merged revisions 165317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r165317 | tilghman | 2008-12-17 15:14:37 -0600 (Wed, 17 Dec 2008)
	  | 4 lines Reverse the fix from issue #6176 and add proper
	  handling for that issue. (Closes issue #13962, closes issue
	  #13363) Fixed by myself (license 14) ........ ................

2008-12-17 21:02 +0000 [r165279]  Steve Murphy <murf@digium.com>

	* /, utils/extconf.c: Merged revisions 165254 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165254 |
	  murf | 2008-12-17 13:50:19 -0700 (Wed, 17 Dec 2008) | 5 lines
	  This patch is here committed to satisfy the buildbot, who has a
	  problem with the const. ........

2008-12-17 20:02 +0000 [r165242]  Terry Wilson <twilson@digium.com>

	* /, res/res_phoneprov.c: Merged revisions 165219 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165219 |
	  twilson | 2008-12-17 13:55:10 -0600 (Wed, 17 Dec 2008) | 2 lines
	  Polycom phones close the connection after reading a little bit of
	  the firmware files, we should stop sending in that case. Also,
	  make that case print out a debug statement instead of a scary
	  WARNING. ........

2008-12-17 19:54 +0000 [r165218]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 165216 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r165216 |
	  file | 2008-12-17 15:52:40 -0400 (Wed, 17 Dec 2008) | 4 lines
	  Call proxy_update so that the IP address gets populated. Sending
	  stuff to 0.0.0.0 is silly! (closes issue #14055) Reported by:
	  chris-mac ........

2008-12-17 17:56 +0000 [r165146]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 165142-165143 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r165142 | mmichelson | 2008-12-17 11:52:50 -0600 (Wed,
	  17 Dec 2008) | 10 lines Use the create_vm_state_from_user
	  function in a place where it was not being used before. Also,
	  I've moved the urgent folder check in messagecount() up a bit so
	  that the flow is a bit better. This was something I noticed while
	  taking a look at issue #13973, although I don't think this is the
	  underlying cause of the issue. ........ r165143 | mmichelson |
	  2008-12-17 11:53:37 -0600 (Wed, 17 Dec 2008) | 3 lines And
	  actually assign the function to a pointer... ........

2008-12-17 05:53 +0000 [r165093]  Steve Murphy <murf@digium.com>

	* utils/conf2ael.c, pbx/ael/ael-test/ref.ael-vtest13,
	  utils/check_expr.c, utils/Makefile,
	  pbx/ael/ael-test/ref.ael-vtest17, /, pbx/pbx_ael.c,
	  utils/ael_main.c, utils/extconf.c: Merged revisions 165071 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk I
	  might add here that in I tested the merged fixes from trunk in
	  both 1.6.0 and 1.6.1 via both 'make' and ./runtests in the ael
	  regression tests for all but DEBUG_CHANNEL_LOCKS,
	  DEBUG_SCHEDULER, and CHANNEL_TRACE options. ........ r165071 |
	  murf | 2008-12-16 22:04:56 -0700 (Tue, 16 Dec 2008) | 31 lines A
	  possibly "horrible fix" for a "horribly broken" situation. As
	  stuff shifts around in the asterisk code, the miscellaneous
	  inclusions from the standalone stuff gets broken. There's no easy
	  fix for this situation. I made sure that everything in utils
	  builds without problem ***AND*** that aelparse runs the
	  regressions correctly with the following make menuselect options
	  both on and off: DONT_OPTIMIZE DEBUG_THREADS DEBUG_CHANNEL_LOCKS
	  MALLOC_DEBUG MTX_PROFILE DEBUG_SCHEDULER DEBUG_THREADLOCALS
	  DETECT_DEADLOCKS CHANNEL_TRACE I think from now on, I'm going to
	  #undef all these features in the various utils native files; I
	  guess I could do the same for the copied-in files, surrounded by
	  STANDALONE ifdef. A standalone isn't going to care about threads,
	  mutexes, etc. ........

2008-12-16 23:07 +0000 [r164980]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 164978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164978 | mmichelson | 2008-12-16 17:06:04 -0600 (Tue, 16 Dec
	  2008) | 15 lines Merged revisions 164977 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164977 | mmichelson | 2008-12-16 17:04:27 -0600 (Tue, 16 Dec
	  2008) | 7 lines After looking through SIP registration code most
	  of the day, this is one of the few things I could find that was
	  just plain wrong. Even though it probably isn't possible for it
	  to happen, it seems weird to have code that checks if a pointer
	  is NULL and then immediately dereferences that pointer if it was
	  NULL. ........ ................

2008-12-16 22:52 +0000 [r164960]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_record.c: Merged revisions 164942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164942 |
	  jpeeler | 2008-12-16 16:45:39 -0600 (Tue, 16 Dec 2008) | 6 lines
	  (closes issue #13669) Reported by: pj Delete file recording if
	  recording terminated from a hangup. ........

2008-12-16 21:40 +0000 [r164813-164884]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 164882 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164882 | russell | 2008-12-16 15:39:15 -0600 (Tue, 16 Dec 2008)
	  | 17 lines Merged revisions 164881 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164881 | russell | 2008-12-16 15:38:29 -0600 (Tue, 16 Dec 2008)
	  | 9 lines Fix an issue where DEBUG_THREADS may erroneously report
	  that a thread is exiting while holding a lock. If the last lock
	  attempt was a trylock, and it failed, it will still be in the
	  list of locks so that it can be reported. (closes issue #13219)
	  Reported by: pj ........ ................

	* /, apps/app_macro.c: Merged revisions 164877 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164877 | russell | 2008-12-16 15:12:49 -0600 (Tue, 16 Dec 2008)
	  | 14 lines Merged revisions 164876 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164876 | russell | 2008-12-16 15:10:44 -0600 (Tue, 16 Dec 2008)
	  | 6 lines Do not dereference the channel if AST_PBX_KEEPALIVE has
	  been returned. This is a bug I noticed while looking at the code
	  for app_macro. This return code means that another thread has
	  assumed ownership of the channel and it can no longer be touched.
	  (I hate this return code with a passion, by the way.) ........
	  ................

	* main/manager.c, /: Merged revisions 164807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164807 | russell | 2008-12-16 14:41:51 -0600 (Tue, 16 Dec 2008)
	  | 17 lines Merged revisions 164806 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164806 | russell | 2008-12-16 14:35:25 -0600 (Tue, 16 Dec 2008)
	  | 9 lines Add "restart gracefully" to the AMI blacklist of CLI
	  commands. "module unload" was already identified as a command
	  that can not be used from the AMI. "restart gracefully"
	  effectively unloads all modules, and will run in to the same
	  problems. (closes issue #13894) Reported by: kernelsensei
	  ........ ................

2008-12-16 20:18 +0000 [r164805]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 164801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164801 |
	  murf | 2008-12-16 13:04:46 -0700 (Tue, 16 Dec 2008) | 36 lines
	  (closes issue #14076) Reported by: toc Tested by: murf OK, Well
	  this issue has had its share of flip-flopping. I found the
	  following: 1. the code in question, in ext_cmp1 in pbx.c, would
	  not allow two extensions that vary only by any dashes contained
	  within them, to be defined in the same context. 2. for input
	  dialstrings, dashes are NOT ignored. So, skipping them when
	  sorting patterns seemed a bit silly. Thus, you might declare ext
	  891 in a context, but if you try dialing 8-9-1, it will NOT match
	  891. So, I proposed to remove the code from ext_cmp1 to skip the
	  spaces and dashes. Just kept us from declaring 891 and 8-9-1 in
	  the same context, forcing users to generate otherwise uselessly
	  obfuscated dialplan code to get the same effect. Then, I tried
	  out 1.4, and found that: 1. you can declare 891 and 8-9-1 in the
	  same context! 2. You can't define 891, and have 8-9-1 match it!
	  Nor can you define 8-9-1, and have 891 match it! So, it appears
	  that my proposal simply restores the pbx to behaving as it did in
	  1.4. ........

2008-12-16 19:54 +0000 [r164799]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/safe_asterisk, /: Merged revisions 164798 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r164798 | tilghman | 2008-12-16 13:54:11 -0600 (Tue, 16
	  Dec 2008) | 4 lines Set up umask as a possible configuration
	  option. (closes issue #13753) Reported by: irroot ........

2008-12-16 17:18 +0000 [r164677-164739]  Russell Bryant <russell@digium.com>

	* include/asterisk/threadstorage.h, /, main/threadstorage.c: Merged
	  revisions 164737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164737 | russell | 2008-12-16 11:14:01 -0600 (Tue, 16 Dec 2008)
	  | 22 lines Merged revisions 164736 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164736 | russell | 2008-12-16 11:06:29 -0600 (Tue, 16 Dec 2008)
	  | 14 lines Fix memory leak and invalid reporting issues with
	  DEBUG_THREADLOCALS. One issue was that the ast_mutex_* API was
	  being used within the context of the thread local data
	  destructors. We would go off and allocate more thread local data
	  while the pthread lib was in the middle of destroying it all.
	  This led to a memory leak. Another issue was an invalid argument
	  being provided to the the object_add API call. (closes issue
	  #13678) Reported by: ys Tested by: Russell ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 164675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164675 | russell | 2008-12-16 10:00:29 -0600 (Tue, 16 Dec 2008)
	  | 19 lines Merged revisions 164672 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164672 | russell | 2008-12-16 09:56:37 -0600 (Tue, 16 Dec 2008)
	  | 11 lines Fix a memory leak related to the use of the "setvar"
	  configuration option. The problem was that these variables were
	  being appended to the list of vars on the sip_pvt every time a
	  re-registration or re-subscription came in. Since it's just a
	  waste of memory to put them there unless the request was an
	  INVITE, then the fix is to check the request type before copying
	  the vars. (closes issue #14037) Reported by: marvinek Tested by:
	  russell ........ ................

2008-12-16 15:47 +0000 [r164662]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 164659 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164659 |
	  file | 2008-12-16 11:44:28 -0400 (Tue, 16 Dec 2008) | 4 lines
	  When using externhost make sure the port gets set to the bindaddr
	  port if one was not specified in the externhost value itself.
	  (closes issue #13634) Reported by: performer ........

2008-12-16 15:42 +0000 [r164658]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 164648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164648 | murf | 2008-12-16 08:31:54 -0700 (Tue, 16 Dec 2008) |
	  13 lines Merged revisions 164634 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164634 | murf | 2008-12-16 08:15:58 -0700 (Tue, 16 Dec 2008) | 5
	  lines I added a sentence to clarify why - and ' ' are ignored in
	  patterns as per bug 14076. Leif says he'll put some stuff about
	  it in the extensions.conf sample, etc. ........ ................

2008-12-16 15:02 +0000 [r164521-164625]  Russell Bryant <russell@digium.com>

	* /, apps/app_minivm.c: Merged revisions 164623 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164623 |
	  russell | 2008-12-16 09:00:27 -0600 (Tue, 16 Dec 2008) | 5 lines
	  Set MINIVM_ACCMESS_STATUS in all cases. Also, remove a variable
	  that was not needed. (closes issue #14081) Reported by: pkempgen
	  ........

	* /, res/res_musiconhold.c: Merged revisions 164606 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r164606 | russell | 2008-12-16 08:31:02 -0600
	  (Tue, 16 Dec 2008) | 13 lines Merged revisions 164605 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164605 | russell | 2008-12-16 08:28:10 -0600 (Tue, 16 Dec 2008)
	  | 5 lines Don't try to change working directory if a directory
	  was not configured. (closes issue #14089) Reported by: caspy
	  ........ ................

	* channels/chan_dahdi.c, /: Merged revisions 164602 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r164602 | russell | 2008-12-16 08:17:45 -0600 (Tue, 16 Dec 2008)
	  | 7 lines Fix usage of the DAHDI_VMWI ioctl. (closes issue
	  #14090) Reported by: alecdavis Patches:
	  chan_dahdi.VMWI_ioctl.diff.txt uploaded by alecdavis (license
	  585) ........

	* channels/chan_iax2.c, /: Merged revisions 164525 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r164525 | russell | 2008-12-15 16:25:46 -0600 (Mon, 15 Dec 2008)
	  | 6 lines Open a timer before loading configuration so that the
	  trunking configuration option will take effect. (closes issue
	  #14082) Reported by: seandarcy ........

	* channels/chan_iax2.c, /: Merged revisions 164522 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r164522 | russell | 2008-12-15 16:22:43 -0600 (Mon, 15 Dec 2008)
	  | 4 lines Fix log message to refer to the generic timing
	  interface, not DAHDI specifically (inspired by issue #14082)
	  ........

	* main/frame.c, /: Merged revisions 164519 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164519 |
	  russell | 2008-12-15 15:53:30 -0600 (Mon, 15 Dec 2008) | 7 lines
	  Make sure we handle a uint32_t payload in ast_frdup() (closes
	  issue #14080) Reported by: fnordian Patches: frame.patch uploaded
	  by fnordian (license 110) ........

2008-12-15 19:54 +0000 [r164421-164425]  Mark Michelson <mmichelson@digium.com>

	* /, include/asterisk/pbx.h: Merged revisions 164423 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r164423 | mmichelson | 2008-12-15 13:53:29 -0600
	  (Mon, 15 Dec 2008) | 11 lines Merged revisions 164422 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164422 | mmichelson | 2008-12-15 13:53:08 -0600 (Mon, 15 Dec
	  2008) | 3 lines Add the deadlock note to ast_spawn_extension as
	  well ........ ................

	* /, include/asterisk/channel.h, include/asterisk/pbx.h: Merged
	  revisions 164419 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164419 | mmichelson | 2008-12-15 13:51:24 -0600 (Mon, 15 Dec
	  2008) | 12 lines Merged revisions 164416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164416 | mmichelson | 2008-12-15 13:45:07 -0600 (Mon, 15 Dec
	  2008) | 4 lines Add notes to autoservice and pbx doxygen
	  regarding a potential deadlock scenario so that it is avoided in
	  the future ........ ................

2008-12-15 18:27 +0000 [r164355]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 164349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164349 |
	  tilghman | 2008-12-15 12:09:58 -0600 (Mon, 15 Dec 2008) | 4 lines
	  When querying for the structure of the CDR table, remove the
	  schema, if it exists. (Closes issue #14058) ........

2008-12-15 18:14 +0000 [r164314-164353]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 164351 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r164351 | file | 2008-12-15 14:12:24 -0400 (Mon, 15 Dec 2008) |
	  13 lines Merged revisions 164350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164350 | file | 2008-12-15 14:11:21 -0400 (Mon, 15 Dec 2008) | 6
	  lines Do not try to unlock a non-existant channel if the transfer
	  fails. (closes issue #13800) Reported by: dwagner Patches:
	  asterisk-1.4.22-chan-sip-nullp.patch uploaded by tweety (license
	  608) ........ ................

	* /, main/file.c: Merged revisions 164312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164312 |
	  file | 2008-12-15 13:24:28 -0400 (Mon, 15 Dec 2008) | 4 lines Use
	  ast_seekstream to return the file stream back to the beginning
	  instead of directly seeking to zero. This is because some audio
	  formats have headers at the front that need to be skipped, which
	  will be done by the format module. (closes issue #14079) Reported
	  by: elguero ........

2008-12-15 16:32 +0000 [r164276-164300]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, main/features.c: Merged revisions 164203 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r164203 | russell | 2008-12-15 08:40:24 -0600
	  (Mon, 15 Dec 2008) | 39 lines Merged revisions 164201 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r164201 | russell | 2008-12-15 08:31:37 -0600 (Mon, 15 Dec 2008)
	  | 31 lines Handle a case where a call can be bridged to a channel
	  that is still ringing. The issue that was reported was about a
	  case where a RINGING channel got redirected to an extension to
	  pick up a call from parking. Once the parked call got taken out
	  of parking, it heard silence until the other side answered.
	  Ideally, the caller that was parked would get a ringing
	  indication. This patch fixes this case so that the caller
	  receives ringback once it comes out of parking until the other
	  side answers. The fixes are: - Make sure we remember that a
	  channel was an outgoing channel when doing a masquerade. This
	  prevents an erroneous ast_answer() call on the channel, which
	  causes a bogus 200 OK to be sent in the case of SIP. - Add some
	  additional comments to explain related parts of code. - Update
	  the handling of the ast_channel visible_indication field. Storing
	  values that are not stateful is pointless. Control frames that
	  are events or commands should be ignored. - When a bridge first
	  starts, check to see if the peer channel needs to be given
	  ringing indication because the calling side is still ringing. -
	  Rework ast_indicate_data() a bit for the sake of readability.
	  (closes issue #13747) Reported by: davidw Tested by: russell
	  Review: http://reviewboard.digium.com/r/90/ ........
	  ................

	* /, pbx/pbx_dundi.c: Merged revisions 164272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164272 |
	  russell | 2008-12-15 10:17:55 -0600 (Mon, 15 Dec 2008) | 8 lines
	  When a reload is issued, always process the configuration for
	  dundi.conf. The reason is that a reload can be used to refresh
	  DNS lookups for defined peers. Even if the config file hasn't
	  changed, we want to process it for that purpose. (closes issue
	  #13776) Reported by: kombjuder ........

2008-12-15 16:18 +0000 [r164273-164274]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 164270 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164270 |
	  mmichelson | 2008-12-15 10:16:47 -0600 (Mon, 15 Dec 2008) | 4
	  lines Fix a compile warning and a logic error that could have
	  been bad for non-realtime queues ........

	* apps/app_queue.c, /: Merged revisions 164268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164268 |
	  mmichelson | 2008-12-15 10:10:43 -0600 (Mon, 15 Dec 2008) | 17
	  lines Fix up a few issues with regards to queues * Fix reference
	  counting used in the __queues_show function * Add code to be sure
	  that the "queue show" command does not print information for a
	  realtime queue which has been deleted from the backend * Add a
	  missing unref to the realtime queue loading function for the case
	  where a queue is in the module's container but has been deleted
	  from the realtime backend (closes issue #14033) Reported by:
	  cristiandimache Patches: 14033.patch uploaded by putnopvut
	  (license 60) Tested by: cristiandimache ........

2008-12-15 15:50 +0000 [r164266]  Joshua Colp <jcolp@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, apps/app_fax.c,
	  configure.ac: Merged revisions 164257 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r164257 |
	  file | 2008-12-15 11:41:22 -0400 (Mon, 15 Dec 2008) | 4 lines
	  Make app_fax compatible with newer versions of spandsp. This
	  remains backwards compatible with earlier versions though so do
	  not fret. (closes issue #14073) Reported by: seandarcy ........

2008-12-13 01:01 +0000 [r163914]  Joshua Colp <jcolp@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 163912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163912 |
	  file | 2008-12-12 20:59:24 -0400 (Fri, 12 Dec 2008) | 2 lines
	  Only detach and destroy the whisper audiohooks if they are
	  actually in use. ........

2008-12-13 00:08 +0000 [r163875]  Terry Wilson <twilson@digium.com>

	* apps/app_queue.c, /: Merged revisions 163873 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163873 |
	  twilson | 2008-12-12 17:48:26 -0600 (Fri, 12 Dec 2008) | 6 lines
	  When using realtime queues, app_queue wasn't updating the
	  strategy if it was changed in the realtime backend. This patch
	  resolves the issue for almost all situations. It is currently not
	  supported to switch to the linear strategy via realtime since the
	  ao2_container for members will have been set to have multiple
	  buckets and therefore the members would be unordered. (closes
	  issue #14034) Reported by: cristiandimache Tested by:
	  otherwiseguy, cristiandimache ........

2008-12-12 23:08 +0000 [r163830]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 163829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ ........

2008-12-12 22:05 +0000 [r163764]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, main/editline/read.c, /: Merged revisions 163762
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r163762 | tilghman | 2008-12-12 16:04:26 -0600
	  (Fri, 12 Dec 2008) | 14 lines Merged revisions 163761 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163761 | tilghman | 2008-12-12 16:03:10 -0600 (Fri, 12 Dec 2008)
	  | 7 lines Simple fix for Ctrl-C not immediately exiting Asterisk,
	  but also add a pointer inside editline to look back to
	  asterisk.c, so others don't spend as much time as I did looking
	  (in the wrong place) for the appropriate function. Reported by:
	  ZX81, via the #asterisk-users channel Fixed by: me (license 14)
	  ........ ................

2008-12-12 19:58 +0000 [r163715]  Steve Murphy <murf@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 163675 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r163675 | murf | 2008-12-12 12:16:32 -0700 (Fri, 12 Dec 2008) | 1
	  line demote always-appearing debug message (for certain boards)
	  to ast_debug lev 3 msg instead ........

2008-12-12 18:53 +0000 [r163656-163672]  Russell Bryant <russell@digium.com>

	* main/tcptls.c, /, channels/chan_sip.c: Merged revisions 163670
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r163670 | russell | 2008-12-12 12:45:03 -0600 (Fri, 12
	  Dec 2008) | 6 lines Rename a number of tcptls_session variables.
	  There are no functional changes here. The name "ser" was used in
	  a lot of places. However, it is a relic from when the struct was
	  a server_instance, not a session_instance. It was renamed since
	  it represents both a server or client connection. ........

	* /, channels/chan_sip.c: Merged revisions 163667 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163667 |
	  russell | 2008-12-12 12:33:27 -0600 (Fri, 12 Dec 2008) | 5 lines
	  Fix a small race condition in sip_tcp_locate(). We must increase
	  the reference count on the tcptls_session _before_ unlocking the
	  thread list. ........

	* /, channels/chan_sip.c: Merged revisions 163642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163642 |
	  russell | 2008-12-12 12:19:47 -0600 (Fri, 12 Dec 2008) | 7 lines
	  Resolve crashes when using SIP TCP/TLS with qualify. The problem
	  was a reference count error on the tcptls_session structure.
	  (closes issue #13989) Reported by: Nugget ........

2008-12-12 18:19 +0000 [r163640]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 163629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163629 |
	  file | 2008-12-12 14:17:12 -0400 (Fri, 12 Dec 2008) | 4 lines
	  When a device registers we need to unlink them (if linked) from
	  the peers_by_ip container and link them back in since their IP
	  address has changed. This would have manifested itself if you
	  configured a new device (as type=peer), registered, and then
	  tried to place a call from the device. Since the peer was not
	  linked into the peers_by_ip container it would have never been
	  found. (closes issue #13811) Reported by: pj ........

2008-12-12 17:26 +0000 [r163624]  Michiel van Baak <michiel@vanbaak.info>

	* res/res_monitor.c, /: Merged revisions 163612 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163612 |
	  mvanbaak | 2008-12-12 18:22:47 +0100 (Fri, 12 Dec 2008) | 7 lines
	  Document default Monitor file location. (closes issue #14065)
	  Reported by: kshumard Patches:
	  res_monitor.documentation.patch.txt uploaded by kshumard (license
	  92) ........

2008-12-12 16:57 +0000 [r163581]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /, channels/chan_sip.c: Merged revisions 163579
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r163579 | file | 2008-12-12 12:55:15 -0400 (Fri, 12 Dec
	  2008) | 4 lines Since chan_sip is callback devicestate driven do
	  not pass in actual states, pass in unknown so we get asked.
	  Additionally do not pass in an actual device state value in
	  ast_setstate since the channel may be callback driven. (closes
	  issue #13525) Reported by: pj ........

2008-12-12 14:48 +0000 [r163514-163515]  Russell Bryant <russell@digium.com>

	* main/channel.c, main/autoservice.c, /,
	  include/asterisk/channel.h: Merged revisions 163449 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r163449 | russell | 2008-12-12 07:55:30 -0600
	  (Fri, 12 Dec 2008) | 34 lines Merged revisions 163448 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163448 | russell | 2008-12-12 07:44:08 -0600 (Fri, 12 Dec 2008)
	  | 26 lines Resolve issues that could cause DTMF to be processed
	  out of order. These changes come from team/russell/issue_12658 1)
	  Change autoservice to put digits on the head of the channel's
	  frame readq instead of the tail. If there were frames on the
	  readq that autoservice had not yet read, the previous code would
	  have resulted in out of order processing. This required a new API
	  call to queue a frame to the head of the queue instead of the
	  tail. 2) Change up the processing of DTMF in ast_read(). Some of
	  the problems were the result of having two sources of pending
	  DTMF frames. There was the dtmfq and the more generic readq. Both
	  were used for pending DTMF in various scenarios. Simplifying
	  things to only use the frame readq avoids some of the problems.
	  3) Fix a bug where a DTMF END frame could get passed through when
	  it shouldn't have. If code set END_DTMF_ONLY in the middle of
	  digit emulation, and a digit arrived before emulation was
	  complete, digits would get processed out of order. (closes issue
	  #12658) Reported by: dimas Tested by: russell, file Review:
	  http://reviewboard.digium.com/r/85/ ........ ................

	* /, pbx/pbx_dundi.c: Merged revisions 163512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163512 | russell | 2008-12-12 08:44:06 -0600 (Fri, 12 Dec 2008)
	  | 13 lines Merged revisions 163511 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163511 | russell | 2008-12-12 08:40:31 -0600 (Fri, 12 Dec 2008)
	  | 5 lines Specify uint32_t for variables storing a CRC32 so that
	  it is actually 32 bits on 64-bit machines, as well. (inspired by
	  issue #13879) ........ ................

2008-12-11 23:48 +0000 [r163386]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 163384 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163384 | tilghman | 2008-12-11 17:38:56 -0600 (Thu, 11 Dec 2008)
	  | 16 lines Merged revisions 163383 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163383 | tilghman | 2008-12-11 17:35:55 -0600 (Thu, 11 Dec 2008)
	  | 9 lines When a Ctrl-C or Ctrl-D ends a remote console, on
	  certain shells, the terminal is messed up. By intercepting those
	  events with a signal handler in the remote console, we can avoid
	  those issues. (closes issue #13464) Reported by: tzafrir Patches:
	  20081110__bug13464.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: blitzrage ........ ................

2008-12-11 22:52 +0000 [r163319]  Matt Nicholson <mnicholson@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 163317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163317 | mnicholson | 2008-12-11 16:49:59 -0600 (Thu, 11 Dec
	  2008) | 16 lines Merged revisions 163316 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163316 | mnicholson | 2008-12-11 16:44:31 -0600 (Thu, 11 Dec
	  2008) | 9 lines Clean up the dundi cache every 5 minutes. (closes
	  issue #13819) Reported by: adomjan Patches:
	  pbx_dundi.c-clearcache.patch uploaded by adomjan (license 487)
	  dundi_clearecache3.diff uploaded by mnicholson (license 96)
	  Tested by: adomjan ........ ................

2008-12-11 21:50 +0000 [r163252-163256]  Russell Bryant <russell@digium.com>

	* /, funcs/func_strings.c, funcs/func_cut.c: Merged revisions
	  163254 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163254 | russell | 2008-12-11 15:48:08 -0600 (Thu, 11 Dec 2008)
	  | 16 lines Merged revisions 163253 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163253 | russell | 2008-12-11 15:46:29 -0600 (Thu, 11 Dec 2008)
	  | 8 lines Fix some observed slowdowns in dialplan processing. The
	  change is to remove autoservice usage from dialplan functions
	  that do not need it because they do not perform operations that
	  potentially block. (closes issue #13940) Reported by: tbelder
	  ........ ................

	* /, res/res_timing_pthread.c: Merged revisions 163241 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r163241 | russell | 2008-12-11 15:21:31 -0600 (Thu, 11 Dec 2008)
	  | 8 lines Fix a problem where continuous mode will get
	  inadvertently get turned off if set_rate() is used while
	  continuous mode was already turned on. (closes issue #13738)
	  Reported by: smurfix Patches: res.patch.fixed uploaded by smurfix
	  (license 547) ........

2008-12-11 21:00 +0000 [r163214]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /, configs/voicemail.conf.sample: Merged
	  revisions 163213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163213 |
	  mmichelson | 2008-12-11 14:57:44 -0600 (Thu, 11 Dec 2008) | 9
	  lines Add an option to voicemail.conf to allow urgent messages to
	  be forwarded as not urgent. (closes issue #14063) Reported by:
	  jaroth Patches: urgfwd_v2.patch uploaded by jaroth (license 50)
	  ........

2008-12-11 20:10 +0000 [r163173]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 163171 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r163171 |
	  russell | 2008-12-11 14:07:47 -0600 (Thu, 11 Dec 2008) | 16 lines
	  Fix the "failed" extension for outgoing calls. The conversion to
	  use ast_check_hangup() everywhere instead of checking the
	  softhangup flag directly introduced this problem. The issue is
	  that ast_check_hangup() checked for tech_pvt to be NULL.
	  Unfortunately, this will be NULL is some valid circumstances,
	  such as with a dummy channel. The fix is simple. Don't check
	  tech_pvt. It's pointless, because the code path that sets this to
	  NULL is when the channel hangup callback gets called. This
	  happens inside of ast_hangup(), which is the same function
	  responsible for freeing the channel. Any code calling
	  ast_check_hangup() better not be calling it after that point, and
	  if so, we have a bigger problem at hand. (closes issue #14035)
	  Reported by: erogoza ........

2008-12-11 20:05 +0000 [r163170]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 163168 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r163168 | tilghman | 2008-12-11 14:02:35 -0600 (Thu, 11 Dec 2008)
	  | 5 lines Sometimes even Linux needs -lm to link libtonezone,
	  such as when libtonezone is compiled statically. (closes issue
	  #13887) Reported by: tzafrir ........

2008-12-11 17:16 +0000 [r163100]  Russell Bryant <russell@digium.com>

	* /, main/features.c: Merged revisions 163094 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163094 | russell | 2008-12-11 11:06:16 -0600 (Thu, 11 Dec 2008)
	  | 19 lines Merged revisions 163092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163092 | russell | 2008-12-11 10:54:51 -0600 (Thu, 11 Dec 2008)
	  | 11 lines Fix an issue that made it so you could only have a
	  single caller executing a custom feature at a time. This was
	  especially problematic when custom features ran for any
	  appreciable amount of time. The fix turned out to be quite
	  simple. The dynamic features are now stored in a read/write list
	  instead of a list using a mutex. (closes issue #13478) Reported
	  by: neutrino88 Fix suggested by file ........ ................

2008-12-11 16:54 +0000 [r163091]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 163089 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163089 | tilghman | 2008-12-11 10:52:24 -0600 (Thu, 11 Dec 2008)
	  | 13 lines Merged revisions 163088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163088 | tilghman | 2008-12-11 10:51:27 -0600 (Thu, 11 Dec 2008)
	  | 6 lines Don't wait forever, if there's a specified recording
	  timeout. (closes issue #13885) Reported by: bamby Patches:
	  res_agi.c.patch uploaded by bamby (license 430) ........
	  ................

2008-12-11 16:49 +0000 [r163083-163087]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 163085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163085 | mmichelson | 2008-12-11 10:47:34 -0600 (Thu, 11 Dec
	  2008) | 12 lines Merged revisions 163084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163084 | mmichelson | 2008-12-11 10:46:22 -0600 (Thu, 11 Dec
	  2008) | 4 lines Revert this cast to long. Using time_t here
	  causes build failures on a FreeBSD 32-bit build. ........
	  ................

	* apps/app_queue.c, /: Merged revisions 163081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r163081 | mmichelson | 2008-12-11 10:33:16 -0600 (Thu, 11 Dec
	  2008) | 22 lines Merged revisions 163080 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r163080 | mmichelson | 2008-12-11 10:24:43 -0600 (Thu, 11 Dec
	  2008) | 14 lines Fix a potential crash due to unsafe datastore
	  handling. This patch also contains a conversion from using long
	  to time_t for representing times for a queue, as well as some
	  whitespace fixes. (closes issue #14060) Reported by: nivek
	  Patches: datastore_fixup.patch.corrected uploaded by nivek
	  (license 636) with slight modification from me Tested by: nivek
	  ........ ................

2008-12-11 15:07 +0000 [r163006]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 162997 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r162997 |
	  file | 2008-12-11 11:05:49 -0400 (Thu, 11 Dec 2008) | 4 lines
	  When a device registers to use it is entirely possible that they
	  may be in use, so tell the core that we don't know the devstate
	  and have it ask us for it. (closes issue #13525) Reported by: pj
	  ........

2008-12-10 23:13 +0000 [r162949]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 162922,162930 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r162922 |
	  tilghman | 2008-12-10 16:48:09 -0600 (Wed, 10 Dec 2008) | 7 lines
	  Checking global variables here actually overwrote the previous
	  substitution by channel variables, and in any case, was
	  redundant; pbx_substitute_variables_helper ALREADY does
	  substitution for global variables. (closes issue #13327) Reported
	  by: pj ........ r162930 | tilghman | 2008-12-10 17:01:14 -0600
	  (Wed, 10 Dec 2008) | 2 lines Previously missing line, now the
	  substitution works correctly ........

2008-12-10 22:54 +0000 [r162896-162929]  Jeff Peeler <jpeeler@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 162927 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162927 | jpeeler | 2008-12-10 16:53:34 -0600
	  (Wed, 10 Dec 2008) | 11 lines Merged revisions 162926 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162926 | jpeeler | 2008-12-10 16:52:51 -0600 (Wed, 10 Dec 2008)
	  | 3 lines Oops, inverted logic for a strcasecmp check. Pointed
	  out by mmichelson, thanks! ........ ................

	* /, res/res_musiconhold.c: Merged revisions 162891 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162891 | jpeeler | 2008-12-10 16:11:46 -0600
	  (Wed, 10 Dec 2008) | 13 lines Merged revisions 162874 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162874 | jpeeler | 2008-12-10 16:04:18 -0600 (Wed, 10 Dec 2008)
	  | 5 lines (closes issue #13229) Reported by:
	  clegall_proformatique Ensure that moh_generate does not return
	  prematurely before local_ast_moh_stop is called. Also, the sleep
	  in mp3_spawn now only occurs for http locations since it seems to
	  have been added originally only for failing media streams.
	  ........ ................

2008-12-10 19:05 +0000 [r162741-162807]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 162805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162805 | file | 2008-12-10 15:02:57 -0400 (Wed, 10 Dec 2008) |
	  13 lines Merged revisions 162804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162804 | file | 2008-12-10 15:01:17 -0400 (Wed, 10 Dec 2008) | 6
	  lines Fix subscription based MWI up a bit. We only want to put
	  sip: at the beginning of the URI if it is not already there and
	  revert code to ignore destination check if subscribing for MWI.
	  (closes issue #12560) Reported by: vsauer Patches: patch001.diff
	  uploaded by ramonpeek (license 266) ........ ................

	* /, channels/chan_sip.c: Merged revisions 162739 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162739 | file | 2008-12-10 13:53:09 -0400 (Wed, 10 Dec 2008) |
	  13 lines Merged revisions 162738 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162738 | file | 2008-12-10 13:50:43 -0400 (Wed, 10 Dec 2008) | 6
	  lines When a SIP peer unregisters set the expiry time back to 0
	  so that the 200 OK contains an expires of 0. (closes issue
	  #13599) Reported by: hjourdain Patches: chan_sip.c.diff uploaded
	  by hjourdain (license 583) ........ ................

2008-12-10 16:39 +0000 [r162666-162669]  Mark Michelson <mmichelson@digium.com>

	* doc/tex/misdn.tex, /: Merged revisions 162667 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162667 | mmichelson | 2008-12-10 10:39:10 -0600 (Wed, 10 Dec
	  2008) | 16 lines Merged revisions 162659 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162659 | mmichelson | 2008-12-10 10:10:25 -0600 (Wed, 10 Dec
	  2008) | 8 lines Add missing documentation to misdn.txt (closes
	  issue #14052) Reported by: festr Patches: misdn.txt.patch
	  uploaded by festr (license 443) ........ ................

	* /, channels/chan_sip.c: Merged revisions 162664 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162664 | mmichelson | 2008-12-10 10:34:35 -0600 (Wed, 10 Dec
	  2008) | 19 lines Merged revisions 162663 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162663 | mmichelson | 2008-12-10 10:24:56 -0600 (Wed, 10 Dec
	  2008) | 11 lines Revert fix for issue 13570. It has caused more
	  problems than it helped to fix. (closes issue #13783) Reported
	  by: navkumar (closes issue #14025) Reported by: ffs ........
	  ................

2008-12-10 16:08 +0000 [r162622-162658]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 162656 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162656 | file | 2008-12-10 12:06:59 -0400 (Wed, 10 Dec 2008) |
	  13 lines Merged revisions 162653 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162653 | file | 2008-12-10 12:05:29 -0400 (Wed, 10 Dec 2008) | 6
	  lines Increment the sequence number on the end packets for
	  RFC2833. After reading the RFC some more and doing some testing I
	  agree with this change. (closes issue #12983) Reported by: vt
	  Patches: dtmf_inc_seqnum_on_end_pkts.diff uploaded by vt (license
	  520) ........ ................

	* /, channels/chan_sip.c: Merged revisions 162619 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r162619 |
	  file | 2008-12-10 11:22:26 -0400 (Wed, 10 Dec 2008) | 4 lines
	  When transmitting a register set the socket port to the local one
	  for the transport being used, not the port for the remote server.
	  (closes issue #13633) Reported by: performer ........

2008-12-10 11:37 +0000 [r162585]  Michiel van Baak <michiel@vanbaak.info>

	* /, res/snmp/agent.c: Merged revisions 162583 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r162583 |
	  mvanbaak | 2008-12-10 12:34:09 +0100 (Wed, 10 Dec 2008) | 5 lines
	  Make res_snmp.so compile on OpenBSD. OpenBSD uses an old version
	  of gcc which throws an error if you use a macro that's not
	  #defined ........

2008-12-09 23:45 +0000 [r162490]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/stringfields.h, /: Merged revisions 162488 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r162488 | kpfleming | 2008-12-09 17:41:02 -0600 (Tue, 09
	  Dec 2008) | 1 line it does help if the compiler attribute syntax
	  is correct ........

2008-12-09 23:12 +0000 [r162472]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 162466 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162466 | tilghman | 2008-12-09 17:10:34 -0600
	  (Tue, 09 Dec 2008) | 9 lines Merged revisions 162463 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r162463 | tilghman | 2008-12-09 17:08:53 -0600 (Tue, 09
	  Dec 2008) | 2 lines Oops, should be "tz", not "zonetag". ........
	  ................

2008-12-09 22:34 +0000 [r162416]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, include/asterisk/utils.h, /, main/utils.c:
	  Merged revisions 162414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162414 | russell | 2008-12-09 16:25:06 -0600 (Tue, 09 Dec 2008)
	  | 16 lines Merged revisions 162413 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162413 | russell | 2008-12-09 16:17:39 -0600 (Tue, 09 Dec 2008)
	  | 8 lines Remove the test_for_thread_safety() function
	  completely. The test is not valid. Besides, if we actually
	  suspected that recursive mutexes were not working, we would get a
	  ton of LOG_ERROR messages when DEBUG_THREADS is turned on.
	  (inspired by a discussion on the asterisk-dev list) ........
	  ................

2008-12-09 22:02 +0000 [r162372]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 162355 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162355 | tilghman | 2008-12-09 15:57:09 -0600
	  (Tue, 09 Dec 2008) | 11 lines Merged revisions 162348 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162348 | tilghman | 2008-12-09 15:53:25 -0600 (Tue, 09 Dec 2008)
	  | 4 lines We appear to have documented tz= in the [general]
	  section of voicemail.conf, without actually having implemented
	  it. Oops. (Reported by Olivier on the -users list) ........
	  ................

2008-12-09 21:18 +0000 [r162344]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_directed_pickup.c: Merged revisions 162342 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162342 | file | 2008-12-09 17:16:37 -0400 (Tue,
	  09 Dec 2008) | 11 lines Merged revisions 162341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162341 | file | 2008-12-09 17:14:29 -0400 (Tue, 09 Dec 2008) | 4
	  lines Add 'down' as a valid state for directed call pickup. This
	  creeps up when we receive session progress when dialing a device
	  and not ringing. (closes issue #14005) Reported by: ddl ........
	  ................

2008-12-09 21:03 +0000 [r162302]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 162291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162291 | russell | 2008-12-09 14:59:54 -0600 (Tue, 09 Dec 2008)
	  | 17 lines Merged revisions 162286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162286 | russell | 2008-12-09 14:57:35 -0600 (Tue, 09 Dec 2008)
	  | 9 lines Fix an issue where callers on an incoming call on an
	  SLA trunk would not hear ringback. We need to make sure that we
	  don't start writing audio to the trunk channel until we're
	  actually ready to answer it. Otherwise, the channel driver will
	  treat it as inband progress, even though all they are getting is
	  silence. (closes issue #12471) Reported by: mthomasslo ........
	  ................

2008-12-09 20:48 +0000 [r162278]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_festival.c: Merged revisions 162275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162275 | file | 2008-12-09 16:46:11 -0400 (Tue, 09 Dec 2008) |
	  11 lines Merged revisions 162273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162273 | file | 2008-12-09 16:44:32 -0400 (Tue, 09 Dec 2008) | 4
	  lines Fix double declaration of 'x' on the PPC platform. (closes
	  issue #14038) Reported by: ffloimair ........ ................

2008-12-09 20:47 +0000 [r162277]  Steve Murphy <murf@digium.com>

	* res/ael/ael.flex, /, res/ael/ael_lex.c: Merged revisions 162271
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162271 | murf | 2008-12-09 13:40:31 -0700 (Tue,
	  09 Dec 2008) | 9 lines Merged revisions 162264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162264 | murf | 2008-12-09 13:20:54 -0700 (Tue, 09 Dec 2008) | 1
	  line In discussion with seanbright on #asterisk-dev, I have added
	  a default rule, and an option to suppress the default rule from
	  being generated in the flex output, for the sake of those OS's
	  where they didn't tweak flex's ECHO macro, and the compiler
	  doesn't like it. The regressions are OK with this. ........
	  ................

2008-12-09 20:31 +0000 [r162269]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, /: Merged revisions 162266 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162266 | mmichelson | 2008-12-09 14:30:07 -0600 (Tue, 09 Dec
	  2008) | 14 lines Merged revisions 162265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162265 | mmichelson | 2008-12-09 14:28:44 -0600 (Tue, 09 Dec
	  2008) | 6 lines If we fail to start a thread for the pbx to run
	  in, we need to be sure to decrease the number of active calls on
	  the system. This fix may relate to ABE-1713, but it is not
	  certain yet. ........ ................

2008-12-09 19:52 +0000 [r162202-162207]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 162205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162205 | file | 2008-12-09 15:48:35 -0400 (Tue, 09 Dec 2008) |
	  14 lines Merged revisions 162204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162204 | file | 2008-12-09 15:47:07 -0400 (Tue, 09 Dec 2008) | 7
	  lines Make sure that the timestamp for DTMF is not the same as
	  the previous voice frame and do not send audio when transmitting
	  DTMF as this confuses some equipment. (closes issue #13209)
	  Reported by: ip-rob Patches: 13209.diff uploaded by file (license
	  11) Tested by: ip-rob, bujones ........ ................

	* main/rtp.c, /: Merged revisions 162197 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162197 | file | 2008-12-09 15:08:39 -0400 (Tue, 09 Dec 2008) |
	  11 lines Merged revisions 162188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162188 | file | 2008-12-09 15:06:14 -0400 (Tue, 09 Dec 2008) | 4
	  lines Take video into account when early bridging RTP. (closes
	  issue #13535) Reported by: davidw ........ ................

2008-12-09 18:49 +0000 [r162082-162142]  Steve Murphy <murf@digium.com>

	* res/ael/ael.flex, /, res/ael/ael_lex.c: Merged revisions 162140
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r162140 | murf | 2008-12-09 11:35:35 -0700 (Tue,
	  09 Dec 2008) | 9 lines Merged revisions 162136 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162136 | murf | 2008-12-09 11:13:39 -0700 (Tue, 09 Dec 2008) | 1
	  line Previous fix used ast_malloc and ast_copy_string and messed
	  up the standalone stuff. Fixed. ........ ................

	* res/ael/ael.flex, res/ael/pval.c, /, include/asterisk/pval.h,
	  res/ael/ael_lex.c: Merged revisions 162079 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162079 | murf | 2008-12-09 10:18:03 -0700 (Tue, 09 Dec 2008) |
	  53 lines Merged revisions 162013 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162013 | murf | 2008-12-09 09:31:55 -0700 (Tue, 09 Dec 2008) |
	  45 lines (closes issue #14019) Reported by: ckjohnsonme Patches:
	  14019.diff uploaded by murf (license 17) Tested by: ckjohnsonme,
	  murf This crash was the result of a few small errors that would
	  combine in 64-bit land to result in a crash. 32-bit land might
	  have seen these combine to mysteriously drop the args to an
	  application call, in certain circumstances. Also, in trying to
	  find this bug, I spotted a situation in the flex input, where, in
	  passing back a 'word' to the parser, it would allocate a buffer
	  larger than necessary. I changed the usage in such situations, so
	  that strdup was not used, but rather, an ast_malloc, followed by
	  ast_copy_string. I removed a field from the pval struct, in u2,
	  that was never getting used, and set in one spot in the code. I
	  believe it was an artifact of a previous fix to make switch cases
	  work invisibly with extens. And, for goto's I removed a '!' from
	  before a strcmp, that has been there since the initial merging of
	  AEL2, that might prevent the proper target of a goto from being
	  found. This was pretty harmless on its own, as it would just
	  louse up a consistency check for users. Many thanks to
	  ckjohnsonme for providing a simplified and complete set of
	  information about the bug, that helped considerably in finding
	  and fixing the problem. Now, to get aelparse up and running again
	  in trunk, and out of its "horribly broken" state, so I can run
	  the regression suite! ........ ................

2008-12-09 16:50 +0000 [r161963-162018]  Russell Bryant <russell@digium.com>

	* /, apps/app_disa.c: Merged revisions 162016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r162016 | russell | 2008-12-09 10:47:39 -0600 (Tue, 09 Dec 2008)
	  | 13 lines Merged revisions 162014 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r162014 | russell | 2008-12-09 10:46:53 -0600 (Tue, 09 Dec 2008)
	  | 5 lines Allow DISA to handle extensions that start with #.
	  (closes issue #13330) Reported by: jcovert ........
	  ................

	* /, main/app.c: Merged revisions 161951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r161951 | russell | 2008-12-09 08:57:39 -0600 (Tue, 09 Dec 2008)
	  | 23 lines Merged revisions 161948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r161948 | russell | 2008-12-09 08:52:25 -0600 (Tue, 09 Dec 2008)
	  | 15 lines Fix a problem with GROUP() settings on a masquerade.
	  The previous code carried over group settings from the old
	  channel to the new one. However, it did nothing with the group
	  settings that were already on the new channel. This patch removes
	  all group settings that already existed on the new channel. I
	  have a more complicated version of this patch which addresses
	  only the most blatant problem with this, which is that a channel
	  can end up with multiple group settings in the same category.
	  However, I could not think of a use case for keeping any of the
	  group settings from the old channel, so I went this route for
	  now. (closes AST-152) ........ ................

2008-12-08 20:55 +0000 [r161835]  Joshua Colp <jcolp@digium.com>

	* contrib/scripts/autosupport, /, contrib/scripts/autosupport.8:
	  Merged revisions 161830 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161830 |
	  file | 2008-12-08 16:53:50 -0400 (Mon, 08 Dec 2008) | 2 lines
	  Update autosupport script with a few changes. ........

2008-12-08 18:52 +0000 [r161792]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 161790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161790 |
	  tilghman | 2008-12-08 12:49:50 -0600 (Mon, 08 Dec 2008) | 6 lines
	  Allocate enough space initially for the message. (closes issue
	  #14027) Reported by: junky Patches: M14027.diff uploaded by junky
	  (license 177) ........

2008-12-08 18:49 +0000 [r161729-161789]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, /: Merged revisions 161787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161787 |
	  file | 2008-12-08 14:47:32 -0400 (Mon, 08 Dec 2008) | 6 lines Fix
	  a regression introduced when the PBX timeouts were converted to
	  milliseconds. collect_digits now gets milliseconds fed to it, not
	  seconds. (closes issue #14012) Reported by: dveiga Patches:
	  14012.patch uploaded by bkruse (license 132) ........

	* /, channels/chan_sip.c: Merged revisions 161726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r161726 | file | 2008-12-08 13:53:32 -0400 (Mon, 08 Dec 2008) |
	  13 lines Merged revisions 161725 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r161725 | file | 2008-12-08 13:52:10 -0400 (Mon, 08 Dec 2008) | 6
	  lines Make the usereqphone option work again. (closes issue
	  #13474) Reported by: mmaguire Patches: 20080912_bug13474.diff
	  uploaded by mmaguire (license 571) ........ ................

2008-12-08 17:24 +0000 [r161722]  Matt Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 161721 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161721 |
	  mnicholson | 2008-12-08 11:23:41 -0600 (Mon, 08 Dec 2008) | 7
	  lines Fix a crash that can occur on a transfer in chan_sip when
	  attempting to collect rtp stats. (closes issue #13956) Reported
	  by: chris-mac Tested by: chris-mac ........

2008-12-05 23:29 +0000 [r161496]  Mark Michelson <mmichelson@digium.com>

	* apps/app_stack.c, /: Merged revisions 161493 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161493 |
	  mmichelson | 2008-12-05 17:24:38 -0600 (Fri, 05 Dec 2008) | 8
	  lines If the autoloop flag is set on a channel, then we need to
	  add 1 to the priority when checking if the extension exists.
	  Otherwise, gosubs will fail. This was discovered when
	  investigating an asterisk-users mailing list post made by Gary
	  Hawkins. ........

2008-12-05 21:16 +0000 [r161352-161429]  Sean Bright <sean.bright@gmail.com>

	* main/astobj2.c, /, include/asterisk/astobj2.h: Merged revisions
	  161427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r161427 | seanbright | 2008-12-05 16:08:43 -0500 (Fri, 05 Dec
	  2008) | 22 lines Merged revisions 161426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r161426 | seanbright | 2008-12-05 16:02:20 -0500
	  (Fri, 05 Dec 2008) | 15 lines Merged revisions 161421 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r161421 | seanbright | 2008-12-05 15:50:23 -0500 (Fri, 05 Dec
	  2008) | 8 lines Fix build errors on FreeBSD (uint -> unsigned
	  int). (closes issue #14006) Reported by: alphaque Patches:
	  astobj2.h-patch uploaded by alphaque (license 259) (Slightly
	  modified by seanbright) ........ ................
	  ................

	* apps/app_voicemail.c, /: Merged revisions 161349-161350 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r161349 | seanbright | 2008-12-05 10:56:15 -0500 (Fri,
	  05 Dec 2008) | 5 lines When using IMAP_STORAGE, it's important to
	  convert bare newlines (\n) in emailbody and pagerbody to CR-LF so
	  that the IMAP server doesn't spit out an error. This was
	  informally reported on #asterisk-dev a few weeks ago. Reviewed by
	  Mark M. on IRC. ........ r161350 | seanbright | 2008-12-05
	  11:04:36 -0500 (Fri, 05 Dec 2008) | 2 lines Use ast_free()
	  instead of free(), pointed out by eliel on IRC. ........

2008-12-05 14:18 +0000 [r161285-161290]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 161288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r161288 | russell | 2008-12-05 08:16:24 -0600 (Fri, 05 Dec 2008)
	  | 10 lines Merged revisions 161287 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r161287 | russell | 2008-12-05 08:12:14 -0600 (Fri, 05 Dec 2008)
	  | 2 lines Fix a NULL format string warning found by buildbot.
	  ........ ................

	* /, apps/app_minivm.c: Merged revisions 161252 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161252 |
	  russell | 2008-12-05 07:46:01 -0600 (Fri, 05 Dec 2008) | 2 lines
	  Resolve a compiler warning from buildbot about a NULL format
	  string. ........

2008-12-05 05:42 +0000 [r161182]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c, /: Merged revisions 161181 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r161181 |
	  tilghman | 2008-12-04 23:41:41 -0600 (Thu, 04 Dec 2008) | 11
	  lines The first file should have a blank config filename in the
	  structure, so that when a save occurs to a different filename,
	  everything goes to the alternate filename, instead of appending
	  to the original. This is important for the AMI command
	  UpdateConfig. (closes issue #13301) Reported by: trevo Patches:
	  20081113__bug13301.diff.txt uploaded by Corydon76 (license 14)
	  20081113__bug13301__1.6.0.diff.txt uploaded by Corydon76 (license
	  14) Tested by: Corydon76, blitzrage ........

2008-12-05 02:52 +0000 [r161149]  Sean Bright <sean.bright@gmail.com>

	* apps/app_voicemail.c, /: Merged revisions 161147 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r161147 | seanbright | 2008-12-04 21:47:54 -0500 (Thu, 04 Dec
	  2008) | 3 lines Check the return value of fread/fwrite so the
	  compiler doesn't complain. Only a problem when IMAP_STORAGE is
	  enabled. ........

2008-12-04 18:37 +0000 [r161016]  Jeff Peeler <jpeeler@digium.com>

	* main/rtp.c, /: Merged revisions 161014 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r161014 | jpeeler | 2008-12-04 12:32:20 -0600 (Thu, 04 Dec 2008)
	  | 17 lines Merged revisions 161013 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r161013 | jpeeler | 2008-12-04 12:30:41 -0600 (Thu, 04 Dec 2008)
	  | 9 lines (closes issue #13835) Reported by: matt_b Tested by:
	  jpeeler This mirrors a check that was present in ast_rtp_read to
	  also be in ast_rtp_raw_write to not schedule sending the receiver
	  report if the remote RTCP endpoint address isn't present in the
	  RTCP structure. Closes AST-142. ........ ................

2008-12-04 16:48 +0000 [r160947]  Mark Michelson <mmichelson@digium.com>

	* /, main/callerid.c: Merged revisions 160945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160945 | mmichelson | 2008-12-04 10:45:06 -0600 (Thu, 04 Dec
	  2008) | 23 lines Merged revisions 160943 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160943 | mmichelson | 2008-12-04 10:44:18 -0600 (Thu, 04 Dec
	  2008) | 15 lines Fix a callerid parsing issue. If someone
	  formatted callerid like the following: "name <number>" (including
	  the quotation marks), then the parts would be parsed as name:
	  "name number: number This is because the closing quotation mark
	  was not discovered since the number and everything after was
	  parsed out of the string earlier. Now, there is a check to see if
	  the closing quote occurs after the number, so that we can know if
	  we should strip off the opening quote on the name. Closes AST-158
	  ........ ................

2008-12-04 01:41 +0000 [r160858-160859]  Richard Mudgett <rmudgett@digium.com>

	* funcs/func_callerid.c, /: Merged revisions 160856 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160856 | rmudgett | 2008-12-03 19:36:39 -0600 (Wed, 03 Dec 2008)
	  | 1 line Jcolp pointed out that num will also match number
	  ........

	* funcs/func_callerid.c, /: Merged revisions 160854 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160854 | rmudgett | 2008-12-03 19:14:22 -0600 (Wed, 03 Dec 2008)
	  | 4 lines * Found a couple more places where num/number needed to
	  be done so 1.4 upgraders will not have problems. * Added curly
	  braces and minor tweaks. ........

2008-12-03 22:02 +0000 [r160811]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 160791 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r160791 | tilghman | 2008-12-03 15:58:21 -0600
	  (Wed, 03 Dec 2008) | 9 lines Merged revisions 160770 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r160770 | tilghman | 2008-12-03 15:54:07 -0600 (Wed, 03
	  Dec 2008) | 2 lines Some compilers warn on null format strings;
	  some don't (caught by buildbot) ........ ................

2008-12-03 21:40 +0000 [r160766]  Steve Murphy <murf@digium.com>

	* funcs/func_callerid.c, /: Merged revisions 160760 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r160760 | murf | 2008-12-03 14:09:15 -0700 (Wed,
	  03 Dec 2008) | 23 lines Merged revisions 160703 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160703 | murf | 2008-12-03 13:41:42 -0700 (Wed, 03 Dec 2008) |
	  11 lines (closes issue #13597) Reported by: john8675309 Patches:
	  patch.13597 uploaded by murf (license 17) Tested by: murf,
	  john8675309 This patch causes the setcid func to update the CDR
	  clid after setting the channel field. I also notice that in
	  trunk, the num/number of 1.4 is left out; I decided to include
	  the option to use either in trunk, so as not to have 1.4
	  upgraders not to have problems. ........ ................

2008-12-03 20:36 +0000 [r160702]  Jason Parker <jparker@digium.com>

	* main/manager.c, /: Merged revisions 160699-160700 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160699 | qwell | 2008-12-03 14:32:20 -0600 (Wed, 03 Dec 2008) |
	  7 lines Fix typo when ListCategories returns none. (closes issue
	  #13994) Reported by: mika Patches: ListCategoriesActionPatch.diff
	  uploaded by mika (license 624) ........ r160700 | qwell |
	  2008-12-03 14:35:36 -0600 (Wed, 03 Dec 2008) | 1 line Another
	  place this is missing ........

2008-12-03 19:49 +0000 [r160665]  Eliel C. Sardanons <eliels@gmail.com>

	* /, channels/iax2-provision.c: Merged revisions 160663 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r160663 | eliel | 2008-12-03 17:25:30 -0200 (Wed, 03 Dec
	  2008) | 13 lines - iax2-provision was not freeing iax_templates
	  structure when unloading the chan_iax2.so module. - Move the code
	  to start using the LIST macros. Review:
	  http://reviewboard.digium.com/r/72 (closes issue #13232) Reported
	  by: eliel Patches: iax2-provision.patch.txt uploaded by eliel
	  (license 64) (with minor changes pointed by Mark Michelson on
	  review board) Tested by: eliel ........

2008-12-03 18:42 +0000 [r160628]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, apps/app_stack.c, apps/app_dial.c, /: Merged
	  revisions 160626 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r160626 |
	  mmichelson | 2008-12-03 12:37:46 -0600 (Wed, 03 Dec 2008) | 16
	  lines Add some safety measures when using gosub, especially when
	  using the options for app_dial and app_queue to run a gosub when
	  the call is answered. * Check for the existence of the gosub
	  target in gosub_exec. If it is nonexistent, then this will cause
	  errors when we attempt to actually run the gosub, including a
	  definite memory leak and potential crashes. Return an error in
	  this situation * Check the return value of pbx_exec in app_dial
	  and app_queue before attempting to actually run the gosub
	  routine. If there was an error, we should not attempt to run the
	  gosub. * Change a '|' to a ',' in app_queue. * Add some extra
	  curly braces where they had been missing previously. (closes
	  issue #13548) Reported by: fiddur ........

2008-12-03 17:41 +0000 [r160561]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_spool.c, /: Merged revisions 160559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160559 | tilghman | 2008-12-03 11:38:59 -0600 (Wed, 03 Dec 2008)
	  | 14 lines Merged revisions 160558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160558 | tilghman | 2008-12-03 11:34:34 -0600 (Wed, 03 Dec 2008)
	  | 7 lines If an entry is added to the directory during a scan
	  when another entry expires, then that new entry will not be
	  processed promptly, but must wait for either a future entry to
	  start or a current entry's retry to occur. If no other entries
	  exist in the directory (other than the new entries) when a bunch
	  expire, then the new entries must wait until another new entry is
	  added to be processed. This was a rather weird race condition,
	  really. Fixes AST-147. ........ ................

2008-12-03 17:10 +0000 [r160557]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, /: Merged revisions 160555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r160555 |
	  mmichelson | 2008-12-03 11:07:09 -0600 (Wed, 03 Dec 2008) | 11
	  lines When investigating issue #13548, I found that gosub
	  handling in app_queue was just completely wrong, mostly because
	  the channel operations being performed were being done on the
	  incorrect channel. With this set of changes, a gosub will
	  correctly run on the answering queue member's channel. There are
	  still crash issues which occur if there are dialplan syntax
	  errors, so I cannot yet close the referenced issue. ........

2008-12-03 17:02 +0000 [r160483-160554]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_spool.c, /: Merged revisions 160552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160552 | tilghman | 2008-12-03 11:01:03 -0600 (Wed, 03 Dec 2008)
	  | 11 lines Merged revisions 160551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160551 | tilghman | 2008-12-03 10:58:34 -0600 (Wed, 03 Dec 2008)
	  | 4 lines Don't start scanning the directory until all modules
	  are loaded, because some required modules (channels, apps,
	  functions) may not yet be in memory yet. Fixes AST-149. ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 160481 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160481 | tilghman | 2008-12-03 08:11:53 -0600 (Wed, 03 Dec 2008)
	  | 14 lines Merged revisions 160480 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160480 | tilghman | 2008-12-03 08:09:35 -0600 (Wed, 03 Dec 2008)
	  | 7 lines Jon Bonilla (Manwe) pointed out on the -dev list: "I
	  guess that having only ip-phones in mind is not a good approach.
	  Since it is possible to have a sip proxy connected to asterisk we
	  could receive a 407 (unauthorized) or 483 (too many hops) as
	  response and dialog ending would not be a good behavior." So
	  modified. ........ ................

2008-12-02 18:05 +0000 [r160329-160339]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 160333 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160333 | jpeeler | 2008-12-02 12:04:51 -0600 (Tue, 02 Dec 2008)
	  | 1 line remove duplicate comment that I accidentally merged
	  ........

	* channels/chan_dahdi.c, /: Merged revisions 160319 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160319 | jpeeler | 2008-12-02 12:00:24 -0600 (Tue, 02 Dec 2008)
	  | 7 lines (closes issue #13786) Reported by: tzafrir Readding
	  DAHDI_CHECK_HOOKSTATE define that was removed in r134260 which
	  fixes not being able to make outgoing calls on some FXO adapters:
	  http://lists.digium.com/pipermail/asterisk-users/2008-November/thread.html#221553
	  ........

2008-12-02 18:03 +0000 [r160234-160325]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 160308 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160308 | tilghman | 2008-12-02 11:56:24 -0600 (Tue, 02 Dec 2008)
	  | 17 lines Merged revisions 160297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160297 | tilghman | 2008-12-02 11:42:09 -0600 (Tue, 02 Dec 2008)
	  | 10 lines When the text does not match exactly (e.g. RTP/SAVP),
	  then the %n conversion fails, and the resulting integer is
	  garbage. Thus, we must initialize the integer and check it
	  afterwards for success. (closes issue #14000) Reported by: folke
	  Patches: asterisk-sipbg-sscanf-1.4.22.diff uploaded by folke
	  (license 626) asterisk-sipbg-sscanf-1.6.0.1.diff uploaded by
	  folke (license 626) asterisk-sipbg-sscanf-trunk-r159896.diff
	  uploaded by folke (license 626) ........ ................

	* include/asterisk/stringfields.h, apps/app_voicemail.c,
	  main/cli.c, main/pbx.c, main/frame.c, /,
	  channels/chan_features.c: Merged revisions 160208 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r160208 | tilghman | 2008-12-01 18:37:21 -0600
	  (Mon, 01 Dec 2008) | 10 lines Merged revisions 160207 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160207 | tilghman | 2008-12-01 18:25:16 -0600 (Mon, 01 Dec 2008)
	  | 3 lines Ensure that Asterisk builds with --enable-dev-mode,
	  even on the latest gcc and glibc. ........ ................

2008-12-01 23:53 +0000 [r160175]  Sean Bright <sean.bright@gmail.com>

	* channels/chan_phone.c, main/manager.c, /, utils/smsq.c: Merged
	  revisions 160170-160172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r160170 | seanbright | 2008-12-01 18:08:24 -0500 (Mon, 01 Dec
	  2008) | 1 line Pay attention to the return value of system(),
	  even if we basically ignore it. ................ r160171 |
	  seanbright | 2008-12-01 18:18:48 -0500 (Mon, 01 Dec 2008) | 1
	  line Silence a build warning. (chan_phone.c:810: warning: value
	  computed is not used) ................ r160172 | seanbright |
	  2008-12-01 18:37:49 -0500 (Mon, 01 Dec 2008) | 10 lines Merged
	  revisions 159976 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159976 | mvanbaak | 2008-12-01 11:08:36 -0500 (Mon, 01 Dec 2008)
	  | 3 lines Get rid of the useless format string and argument in
	  the Bogus/ manager channelname. Noted by kpfleming and name
	  Bogus/manager suggested by eliel ........ ................

2008-12-01  Tilghman Lesher <tlesher@digium.com>

	* Released 1.6.1-beta3

2008-12-01 21:46 +0000 [r160101]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 160097 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r160097 | tilghman | 2008-12-01 15:23:37 -0600 (Mon, 01 Dec 2008)
	  | 2 lines Use AST_EXT_LIB_SETUP before using AST_EXT_LIB_CHECK or
	  bad things happen. ........

2008-12-01 17:45 +0000 [r160006]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 160004 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r160004 | russell | 2008-12-01 11:34:31 -0600
	  (Mon, 01 Dec 2008) | 14 lines Merged revisions 160003 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r160003 | russell | 2008-12-01 11:27:30 -0600 (Mon, 01 Dec 2008)
	  | 6 lines Apply some logic used in iax2_indicate() to
	  iax2_setoption(), as well, since they both have the potential to
	  send control frames in the middle of call setup. We have to wait
	  until we have received a message back from the remote end before
	  we try to send any more frames. Otherwise, the remote end will
	  consider it invalid, and we'll get stuck in an INVAL/VNAK storm.
	  ........ ................

2008-12-01 16:06 +0000 [r159975]  Michiel van Baak <michiel@vanbaak.info>

	* main/manager.c, /: Merged revisions 159898 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r159898 | mvanbaak | 2008-12-01 15:09:59 +0100 (Mon, 01 Dec 2008)
	  | 11 lines Merged revisions 159897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159897 | mvanbaak | 2008-12-01 15:05:41 +0100 (Mon, 01 Dec 2008)
	  | 4 lines make manager compile on OpenBSD. The last (10th)
	  argument to ast_channel_alloc here should be a pointer and NULL
	  is not really a pointer. ........ ................

2008-12-01 14:57 +0000 [r159920]  Russell Bryant <russell@digium.com>

	* .cleancount, /: Merged revisions 159911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r159911 | russell | 2008-12-01 08:56:10 -0600 (Mon, 01 Dec 2008)
	  | 10 lines Merged revisions 159900 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159900 | russell | 2008-12-01 08:52:56 -0600 (Mon, 01 Dec 2008)
	  | 2 lines Force a "make clean" to avoid a bizarre build issue ...
	  ........ ................

2008-11-29 18:34 +0000 [r159854]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_readexten.c: Merged revisions 159853 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r159853 | tilghman | 2008-11-29 12:33:18 -0600 (Sat, 29 Nov 2008)
	  | 2 lines Allow the '#' sign to exist within an extension
	  (inspired by issue #13330) ........

2008-11-29 18:16 +0000 [r159851]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_iax2.c, cdr/cdr_tds.c, include/asterisk/logger.h,
	  include/asterisk/res_odbc.h, channels/chan_misdn.c,
	  include/asterisk/astmm.h, include/asterisk/lock.h,
	  utils/extconf.c, makeopts.in, main/dns.c, funcs/Makefile,
	  include/asterisk/stringfields.h, include/asterisk/utils.h,
	  include/asterisk/devicestate.h, /, include/asterisk/dundi.h,
	  configure.ac, utils/astman.c, include/asterisk/cli.h,
	  include/asterisk/channel.h, include/asterisk/manager.h,
	  res/res_config_sqlite.c, utils/conf2ael.c, utils/frame.c,
	  channels/misdn_config.c, main/ast_expr2.c, Makefile, main/srv.c,
	  include/asterisk/compat.h, configure, channels/misdn/ie.c,
	  include/asterisk/module.h, main/features.c,
	  include/asterisk/linkedlists.h, main/logger.c, main/event.c,
	  include/asterisk/dlinkedlists.h, include/asterisk/strings.h,
	  utils/check_expr.c, channels/chan_vpb.cc, channels/chan_sip.c,
	  main/Makefile, include/asterisk/enum.h, channels/chan_agent.c,
	  main/utils.c, include/jitterbuf.h: Merged revisions 159818 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r159818 | kpfleming | 2008-11-29 11:57:39 -0600 (Sat, 29
	  Nov 2008) | 18 lines incorporates r159808 from branches/1.4:
	  ------------------------------------------------------------------------
	  r159808 | kpfleming | 2008-11-29 10:58:29 -0600 (Sat, 29 Nov
	  2008) | 7 lines update dev-mode compiler flags to match the ones
	  used by default on Ubuntu Intrepid, so all developers will see
	  the same warnings and errors since this branch already had some
	  printf format attributes, enable checking for them and tag
	  functions that didn't have them format attributes in a consistent
	  way
	  ------------------------------------------------------------------------
	  in addition: move some format attributes from main/utils.c to the
	  header files they belong in, and fix up references to the
	  relevant functions based on new compiler warnings ........

2008-11-26 19:58 +0000 [r159561]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /: Merged revisions 159554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r159554 |
	  mmichelson | 2008-11-26 13:57:11 -0600 (Wed, 26 Nov 2008) | 19
	  lines Add some necessary hangup commands in the case that
	  forwarding a call fails 1) Hang up the original destination if
	  the local channel cannot be requested. 2) Hang up the local
	  channel (in addition to the original destination) if ast_call
	  fails when calling the newly created local channel. This prevents
	  channels from sticking around forever in the case of a botched
	  call forward (e.g. to an extension which does not exist). (closes
	  issue #13764) Reported by: davidw Patches: 13764_v2.patch
	  uploaded by putnopvut (license 60) Tested by: putnopvut, davidw
	  ........

2008-11-26 19:17 +0000 [r159535]  Kevin P. Fleming <kpfleming@digium.com>

	* agi/Makefile, utils/Makefile, /, Makefile.moddir_rules,
	  Makefile.rules: Merged revisions 159534 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r159534 | kpfleming | 2008-11-26 13:08:56 -0600 (Wed, 26 Nov
	  2008) | 11 lines Merged revisions 159476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159476 | kpfleming | 2008-11-26 12:36:24 -0600 (Wed, 26 Nov
	  2008) | 7 lines simplify (and slightly bug-fix) the recent
	  developer-oriented COMPILE_DOUBLE mode ensure that 'make clean'
	  removes dependency files for .i files that are created in
	  COMPILE_DOUBLE mode ........ ................

2008-11-26 18:38 +0000 [r159477]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, /: Merged revisions 159475 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r159475 |
	  tilghman | 2008-11-26 12:33:04 -0600 (Wed, 26 Nov 2008) | 7 lines
	  If the config file does not exist, then the first use crashes
	  Asterisk. (closes issue #13848) Reported by: klaus3000 Patches:
	  udptl.c.patch uploaded by eliel (license 64) Tested by: blitzrage
	  ........

2008-11-26 14:59 +0000 [r159438]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 159437 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r159437 | mmichelson | 2008-11-26 08:58:17 -0600 (Wed, 26 Nov
	  2008) | 10 lines Don't allow for configuration options to
	  overwrite options set via channel variables on a reload. (closes
	  issue #13921) Reported by: davidw Patches: 13921.patch uploaded
	  by putnopvut (license 60) Tested by: davidw ........

2008-11-26 03:19 +0000 [r159403]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 159402 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r159402 |
	  jpeeler | 2008-11-25 21:18:01 -0600 (Tue, 25 Nov 2008) | 3 lines
	  Always parse arguments in park_call_exec so that app_args is
	  valid. This prevents a crash when executing Park from the
	  dialplan with no arguments. ........

2008-11-25 23:27 +0000 [r159375]  Steve Murphy <murf@digium.com>

	* channels/chan_iax2.c, main/cdr.c, /: Merged revisions 159360 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r159360 | murf | 2008-11-25 16:03:01 -0700 (Tue,
	  25 Nov 2008) | 23 lines Merged revisions 159316 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159316 | murf | 2008-11-25 15:41:10 -0700 (Tue, 25 Nov 2008) |
	  15 lines (closes issue #12694) Reported by: yraber Patches:
	  12694.2nd.diff uploaded by murf (license 17) Tested by: murf,
	  laurav Thanks to file (Joshua Colp) for his IAX fix. the change
	  to cdr.c allows no-answer to percolate up into CDR's, and feels
	  like the right place to locate this fix; if BUSY is done here,
	  no-answer should be, too. ........ ................

2008-11-25 21:58 +0000 [r159249-159280]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 159276 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r159276 | tilghman | 2008-11-25 15:57:59 -0600
	  (Tue, 25 Nov 2008) | 14 lines Merged revisions 159269 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159269 | tilghman | 2008-11-25 15:56:48 -0600 (Tue, 25 Nov 2008)
	  | 7 lines Don't try to send a response on a NULL pvt. (closes
	  issue #13919) Reported by: barthpbx Patches: chan_iax2.c.patch
	  uploaded by eliel (license 64) Tested by: barthpbx ........
	  ................

	* channels/chan_iax2.c, /: Merged revisions 159247 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r159247 | tilghman | 2008-11-25 15:42:42 -0600
	  (Tue, 25 Nov 2008) | 21 lines Merged revisions 159246 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r159246 | tilghman | 2008-11-25 15:40:28 -0600
	  (Tue, 25 Nov 2008) | 14 lines Merged revisions 159245 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r159245 | tilghman | 2008-11-25 15:37:06 -0600 (Tue, 25 Nov 2008)
	  | 7 lines Regression fix for last security fix. Set the iseqno
	  correctly. (closes issue #13918) Reported by: ffloimair Patches:
	  20081119__bug13918.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: ffloimair ........ ................ ................

2008-11-25 16:21 +0000 [r159095]  Terry Wilson <twilson@digium.com>

	* /, apps/app_festival.c: Merged revisions 159093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r159093 |
	  twilson | 2008-11-25 10:18:53 -0600 (Tue, 25 Nov 2008) | 2 lines
	  Add missing variable declaration for PPC code ........

2008-11-25 05:05 +0000 [r159053]  Tilghman Lesher <tlesher@digium.com>

	* channels/xpmr/xpmr.c, apps/app_rpt.c, channels/chan_usbradio.c,
	  /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 159050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r159050 | tilghman | 2008-11-24 23:02:11 -0600 (Mon, 24 Nov 2008)
	  | 10 lines Merged revisions 159025 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r159025 | tilghman | 2008-11-24 22:50:00 -0600 (Mon, 24 Nov 2008)
	  | 3 lines System call ioperm is non-portable, so check for its
	  existence in autoconf. (Closes issue #13863) ........
	  ................

2008-11-25 03:51 +0000 [r158993]  Terry Wilson <twilson@digium.com>

	* channels/chan_usbradio.c, /: Merged revisions 158992 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r158992 | twilson | 2008-11-24 21:49:30 -0600 (Mon, 24 Nov 2008)
	  | 2 lines Make chan_usbradio compile under dev mode ........

2008-11-25 00:41 +0000 [r158894-158927]  Matt Nicholson <mnicholson@digium.com>

	* apps/app_queue.c, /, UPGRADE.txt: Merged revisions 158924 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r158924 | mnicholson | 2008-11-24 18:05:41 -0600 (Mon,
	  24 Nov 2008) | 6 lines Make the Join event from app_queue use
	  CallerIDNum insead of CallerID for indicating the callerid number
	  just like the rest of asterisk. (closes issue #13883) Reported
	  by: davidw ........

	* /, main/file.c: Merged revisions 158925 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158925 |
	  mnicholson | 2008-11-24 18:19:55 -0600 (Mon, 24 Nov 2008) | 2
	  lines Fix compiling in dev mode. ........

	* include/asterisk/manager.h, main/manager.c, /, res/res_agi.c:
	  Merged revisions 158876 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158876 |
	  mnicholson | 2008-11-24 15:56:22 -0600 (Mon, 24 Nov 2008) | 7
	  lines Added EVENT_FLAG_AGI and used it for manager calls in
	  res_agi.c (closes issue #13873) Reported by: fnordian Patches:
	  ami_agievent.patch uploaded by fnordian (license 110) ........

2008-11-24 21:53 +0000 [r158861]  Tilghman Lesher <tlesher@digium.com>

	* main/dsp.c, /: Merged revisions 158857 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158857 |
	  tilghman | 2008-11-24 15:52:34 -0600 (Mon, 24 Nov 2008) | 3 lines
	  Add a bit of documentation (thanks, I-MOD) on what the silence
	  threshold constant actually does and what values are valid for
	  it. ........

2008-11-24 21:44 +0000 [r158855]  Matt Nicholson <mnicholson@digium.com>

	* /, main/file.c: Merged revisions 158851 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158851 |
	  mnicholson | 2008-11-24 15:27:26 -0600 (Mon, 24 Nov 2008) | 6
	  lines Make ast_streamfile() check the result of ast_openstream()
	  before doing anything with it. (closes issue #13955) Reported by:
	  chris-mac ........

2008-11-22 17:00 +0000 [r158689-158701]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_skinny.c: Merged revisions 158694 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r158694 | mvanbaak | 2008-11-22 17:57:11 +0100 (Sat, 22 Nov 2008)
	  | 8 lines dont send reorder tone after a device is hungup if a
	  dialout is abandoned or failed. Without this reorder tone will
	  play after hangup and both wedhorn's and my wife have threatened
	  to use an axe on our asterisk box (closes issue #13948) Reported
	  by: wedhorn Patches: switch.diff uploaded by wedhorn (license 30)
	  ........

	* /, channels/chan_skinny.c: Merged revisions 158688 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r158688 | mvanbaak | 2008-11-22 17:06:38 +0100 (Sat, 22 Nov 2008)
	  | 4 lines fix a very occasional core dump in chan_skinny found by
	  wedhorn. (issue #13948) ........

2008-11-21 23:45 +0000 [r158607]  Steve Murphy <murf@digium.com>

	* /, main/features.c: Merged revisions 158606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r158606 | murf | 2008-11-21 16:40:46 -0700 (Fri, 21 Nov 2008) |
	  19 lines Merged revisions 158603 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158603 | murf | 2008-11-21 16:14:50 -0700 (Fri, 21 Nov 2008) |
	  11 lines In reference to the fix made for 13871, I was merging
	  the fix into 1.6.0 and realized I missed the code in the h-exten
	  block, and didn't catch it because my test case had the h-exten
	  commented out. So, this corrects the code I missed, as a
	  preventative against another crash report. Tested with the
	  h-exten defined, all is well. ........ ................

2008-11-21 23:15 +0000 [r158604]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 158602 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r158602 | tilghman | 2008-11-21 17:14:11 -0600 (Fri, 21 Nov 2008)
	  | 12 lines Merged revisions 158600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158600 | tilghman | 2008-11-21 17:07:46 -0600 (Fri, 21 Nov 2008)
	  | 5 lines The passed extension may not be the same in the list as
	  the current entry, because we strip spaces when copying the
	  extension into the structure. Therefore, use the copied item to
	  place the item into the list. (found by lmadsen on -dev, fixed by
	  me) ........ ................

2008-11-21 22:57 +0000 [r158572]  Steve Murphy <murf@digium.com>

	* /, main/features.c: Merged revisions 158484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r158484 | murf | 2008-11-21 14:47:16 -0700 (Fri, 21 Nov 2008) |
	  19 lines Merged revisions 158483 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158483 | murf | 2008-11-21 14:19:47 -0700 (Fri, 21 Nov 2008) |
	  11 lines (closes issue #13871) Reported by: mdu113 This one is
	  totally my fault. The code doesn't even create a bridge CDR if
	  the channel CDR has POST_DISABLED. I didn't check for that at the
	  end of the bridge. Fixed with a few small insertions. Tested.
	  Looks good. No cdr generated, no crash, no unnecc. data objects
	  created either. ........ ................

2008-11-21 22:13 +0000 [r158541]  Russell Bryant <russell@digium.com>

	* main/astobj2.c, /, include/asterisk/astobj2.h: Merged revisions
	  158540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r158540 | russell | 2008-11-21 16:12:37 -0600 (Fri, 21 Nov 2008)
	  | 10 lines Merged revisions 158539 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158539 | russell | 2008-11-21 16:05:55 -0600 (Fri, 21 Nov 2008)
	  | 2 lines When compiling with DEBUG_THREADS, report the real
	  file/func/line for ao2_lock/ao2_unlock ........ ................

2008-11-21 20:43 +0000 [r158450]  Kevin P. Fleming <kpfleming@digium.com>

	* CHANGES, /, UPGRADE-1.2.txt, UPGRADE-1.4.txt, UPGRADE.txt,
	  UPGRADE-1.6.txt: Merged revisions 158449 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158449 |
	  kpfleming | 2008-11-21 14:42:37 -0600 (Fri, 21 Nov 2008) | 3
	  lines as suggested by jtodd, document the purposes of the CHANGES
	  and UPGRADE files ........

2008-11-21 19:42 +0000 [r158415]  Jason Parker <jparker@digium.com>

	* main/manager.c, /: Merged revisions 158414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158414 |
	  qwell | 2008-11-21 13:40:57 -0600 (Fri, 21 Nov 2008) | 7 lines
	  Make sure we add the Event header for CoreShowChannels. (closes
	  issue #13334) Reported by: srt Patches:
	  13334_missing_event_header_in_core_show_channel.diff uploaded by
	  srt (license 378) ........

2008-11-21 17:17 +0000 [r158377]  Terry Wilson <twilson@digium.com>

	* cdr/cdr_csv.c, /: Merged revisions 158374 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158374 |
	  twilson | 2008-11-21 11:08:16 -0600 (Fri, 21 Nov 2008) | 8 lines
	  Reloading the config and having no changes still initialized some
	  settings to 0. Initialize settings after doing all of the cfg
	  checks. (closes issue #13942) Reported by: davidw Patches:
	  cdr_diff.txt uploaded by otherwiseguy (license 396) Tested by:
	  davidw ........

2008-11-21 01:23 +0000 [r158223-158268]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 158265-158266 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r158265 | mmichelson | 2008-11-20 19:14:20 -0600 (Thu,
	  20 Nov 2008) | 4 lines Use some magic constants to get the right
	  size for this sscanf statement. Thanks Richard! ........ r158266
	  | mmichelson | 2008-11-20 19:22:18 -0600 (Thu, 20 Nov 2008) | 3
	  lines Use a more expressive constant for a 64-bit scanned int
	  ........

	* /, channels/chan_sip.c: Merged revisions 158262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158262 |
	  mmichelson | 2008-11-20 18:59:23 -0600 (Thu, 20 Nov 2008) | 6
	  lines Fix the build for 32-bit systems. %lu is only 32-bits on
	  32-bit systems, so we need to use %llu instead. Of course %llu is
	  128-bits on 64-bit systems, so we have to cast to unsigned long
	  long. No harm, but it's sure annoying. ........

	* /, channels/chan_sip.c: Merged revisions 158230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158230 |
	  mmichelson | 2008-11-20 17:12:50 -0600 (Thu, 20 Nov 2008) | 20
	  lines Change the remote user agent session version variable from
	  an int to a uint64_t. This prevents potential comparison problems
	  from happening if the version string exceeds INT_MAX. This was an
	  apparent problem for one user who could not properly place a call
	  on hold since the version in the SDP of the re-INVITE to place
	  the call on hold greatly exceeded INT_MAX. This also aligns with
	  RFC 2327 better since it recommends using an NTP timestamp for
	  the version (which is a 64-bit number). (closes issue #13531)
	  Reported by: sgofferj Patches: 13531.patch uploaded by putnopvut
	  (license 60) Tested by: sgofferj ........

	* channels/chan_sip.c: Change this so it actually compiles. Thanks,
	  Terry!

2008-11-20 19:43 +0000 [r158191]  Sean Bright <sean.bright@gmail.com>

	* res/ael/pval.c, /: Merged revisions 158188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158188 |
	  seanbright | 2008-11-20 14:41:23 -0500 (Thu, 20 Nov 2008) | 10
	  lines Fix one case where the application argument was not
	  converted from a pipe to a comma. This was causing problems with
	  switch statements with empty expressions. (closes issue #13901)
	  Reported by: smurfix Patches: 20081118_bug13901.diff uploaded by
	  seanbright (license 71) Tested by: seanbright Reviewed by: murf
	  ........

2008-11-20 18:23 +0000 [r158135]  Terry Wilson <twilson@digium.com>

	* cdr/cdr_odbc.c, cdr/cdr_radius.c, cdr/cdr_custom.c,
	  cdr/cdr_manager.c, cdr/cdr_csv.c, cdr/cdr_sqlite3_custom.c, /,
	  cdr/cdr_sqlite.c, cdr/Makefile, cdr/cdr_adaptive_odbc.c,
	  cdr/cdr_pgsql.c: Merged revisions 158072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158072 |
	  twilson | 2008-11-20 11:48:58 -0600 (Thu, 20 Nov 2008) | 2 lines
	  Begin on a crusade to end trailing whitespace! ........

2008-11-20 18:20 +0000 [r158084-158134]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/frame.h, include/asterisk/file.h, main/frame.c,
	  /, channels/chan_sip.c, main/file.c: Merged revisions 158133 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r158133 | mmichelson | 2008-11-20 12:20:00 -0600
	  (Thu, 20 Nov 2008) | 10 lines Merged revisions 158072 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r158072 | twilson | 2008-11-20 11:48:58 -0600 (Thu, 20
	  Nov 2008) | 2 lines Begin on a crusade to end trailing
	  whitespace! ........ ................

	* /, channels/chan_sip.c: Merged revisions 158082 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r158082 | mmichelson | 2008-11-20 11:54:31 -0600 (Thu, 20 Nov
	  2008) | 24 lines Merged revisions 158071 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158071 | mmichelson | 2008-11-20 11:48:42 -0600 (Thu, 20 Nov
	  2008) | 16 lines We don't handle 4XX responses to BYE well.
	  According to section 15 of RFC 3261, we should terminate a dialog
	  if we receive a 481 or 408 in response to our BYE. Since I am
	  aware of at least one phone manufacturer who may sometimes send a
	  404 as well, I am being liberal and saying that any 4XX response
	  to a BYE should result in a terminated dialog. (closes issue
	  #12994) Reported by: pabelanger Patches: 12994.patch uploaded by
	  putnopvut (license 60) Closes AST-129 ........ ................

2008-11-20 17:42 +0000 [r158069]  Jeff Peeler <jpeeler@digium.com>

	* /, main/file.c: Merged revisions 158062 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r158062 |
	  jpeeler | 2008-11-20 11:37:31 -0600 (Thu, 20 Nov 2008) | 6 lines
	  (closes issue #12929) Reported by: snyfer This handles the case
	  for a zero length file to attempt to be streamed. Instead of
	  failing from not playing any data, go ahead and return success as
	  ast_streamfile should consider playing nothing a success when
	  there is nothing to play. ........

2008-11-20 17:40 +0000 [r158067]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /, channels/chan_sip.c: Merged revisions 158066
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r158066 | mmichelson | 2008-11-20 11:39:06 -0600
	  (Thu, 20 Nov 2008) | 20 lines Merged revisions 158053 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r158053 | mmichelson | 2008-11-20 11:33:06 -0600 (Thu, 20 Nov
	  2008) | 12 lines Make sure to set the hangup cause on the calling
	  channel in the case that ast_call() fails. For incoming SIP
	  channels, this was causing us to send a 603 instead of a 486 when
	  the call-limit was reached on the destination channel. (closes
	  issue #13867) Reported by: still_nsk Patches: 13867.diff uploaded
	  by putnopvut (license 60) Tested by: blitzrage ........
	  ................

2008-11-20 00:10 +0000 [r157975]  Kevin P. Fleming <kpfleming@digium.com>

	* main/stdtime/Makefile, codecs/gsm/src, main/db1-ast/btree,
	  channels/misdn/Makefile, main/db1-ast/recno, pbx/ael, res/ael,
	  channels, main/db1-ast/Makefile, main/stdtime, main/db1-ast/hash,
	  codecs/gsm/Makefile, main/db1-ast/db, Makefile.moddir_rules,
	  main/db1-ast/mpool, res/ais, channels/misdn, res/snmp,
	  Makefile.rules, pbx/Makefile, res/Makefile: Merged revisions
	  157974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r157974 | kpfleming | 2008-11-19 18:08:12 -0600 (Wed, 19 Nov
	  2008) | 13 lines Merged revisions 157859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r157859 | kpfleming | 2008-11-19 15:34:47 -0600 (Wed, 19 Nov
	  2008) | 7 lines the gcc optimizer frequently finds broken code
	  (use of uninitalized variables, unreachable code, etc.), which is
	  good. however, developers usually compile with the optimizer
	  turned off, because if they need to debug the resulting code,
	  optimized code makes that process very difficult. this means that
	  we get code changes committed that weren't adequately checked
	  over for these sorts of problems. with this build system change,
	  if (and only if) --enable-dev-mode was used and DONT_OPTIMIZE is
	  turned on, when a source file is compiled it will actually be
	  preprocessed (into a .i or .ii file), then compiled once with
	  optimization (with the result sent to /dev/null) and again
	  without optimization (but only if the first compile succeeded, of
	  course). while making these changes, i did some cleanup work in
	  Makefile.rules to move commonly-used combinations of flag
	  variables into their own variables, to make the file easier to
	  read and maintain ........ ................

2008-11-19 18:29 +0000 [r157785]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 157784 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r157784 | tilghman | 2008-11-19 12:28:14 -0600 (Wed, 19 Nov 2008)
	  | 6 lines Add check for t38_terminal_init in spandsp (not found
	  in 0.0.6, so it should fail reasonably) (closes issue #13473)
	  Reported by: genie Patches: 20080916__bug13473.diff.txt uploaded
	  by Corydon76 (license 14) ........

2008-11-19 13:47 +0000 [r157719-157744]  Kevin P. Fleming <kpfleming@digium.com>

	* /, res/res_agi.c: Merged revisions 157743 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157743 |
	  kpfleming | 2008-11-19 07:45:48 -0600 (Wed, 19 Nov 2008) | 1 line
	  correct small bug introduced during API conversion ........

	* CHANGES, apps/app_stack.c, include/asterisk/agi.h, /,
	  res/res_agi.c, UPGRADE.txt, UPGRADE-1.6.txt (added): Merged
	  revisions 157706 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157706 |
	  kpfleming | 2008-11-19 06:42:19 -0600 (Wed, 19 Nov 2008) | 5
	  lines make some corrections to the ast_agi_register_multiple(),
	  ast_agi_unregister_multiple() and ast_agi_fdprintf() API calls to
	  be consistent with API guidelines also, move UPGRADE.txt to
	  UPGRADE-1.6.txt and make the new UPGRADE.txt contain information
	  about upgrading between Asterisk 1.6 releases ........

2008-11-19 01:08 +0000 [r157641]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/logger.h, /, main/logger.c, main/utils.c,
	  include/asterisk/strings.h: Merged revisions 157639 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r157639 | tilghman | 2008-11-18 19:02:45 -0600 (Tue, 18 Nov 2008)
	  | 7 lines Starting with a change to ensure that ast_verbose()
	  preserves ABI compatibility in 1.6.1 (as compared to 1.6.0 and
	  versions of 1.4), this change also deprecates the use of Asterisk
	  with FreeBSD 4, given the central use of va_copy in core
	  functions. va_copy() is C99, anyway, and we already require C99
	  for other purposes, so this isn't really a big change anyway.
	  This change also simplifies some of the core ast_str_* functions.
	  ........

2008-11-19 01:00 +0000 [r157636]  Mark Michelson <mmichelson@digium.com>

	* /, main/astmm.c: Merged revisions 157632 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157632 |
	  mmichelson | 2008-11-18 18:59:48 -0600 (Tue, 18 Nov 2008) | 10
	  lines If malloc returns NULL, we need to return NULL immediately
	  or else Asterisk will crash when attempting to dereference the
	  NULL pointer (closes issue #13858) Reported by: eliel Patches:
	  astmm.c.patch uploaded by eliel (license 64) ........

2008-11-19 00:38 +0000 [r157602]  Sean Bright <sean.bright@gmail.com>

	* build_tools/make_buildopts_h, makeopts.in, Makefile, /,
	  build_tools/make_version, configure, configure.ac: Merged
	  revisions 157600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157600 |
	  seanbright | 2008-11-18 19:27:45 -0500 (Tue, 18 Nov 2008) | 10
	  lines Fix a few build problems on Solaris (and check for an md5
	  utility in configure instead of the icky loop I was doing
	  before). (closes issue #13842) Reported by: snuffy Patches:
	  bug13842_20081106.diff uploaded by snuffy (license 35) 13842.diff
	  uploaded by seanbright (license 71) Tested by: snuffy ........

2008-11-18 23:59 +0000 [r157429-157596]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 157592 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r157592 | mmichelson | 2008-11-18 17:59:02 -0600 (Tue, 18 Nov
	  2008) | 10 lines This change prevents a crash from occurring if
	  res_musiconhold.so is unloaded and then Asterisk is stopped. The
	  problem was that we are not unregistering the ast_moh_destroy
	  function at exit. (closes issue #13761) Reported by: eliel
	  Patches: res_musiconhold.c.patch uploaded by eliel (license 64)
	  ........

	* apps/app_voicemail.c, /: Merged revisions 157562 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r157562 | mmichelson | 2008-11-18 17:28:23 -0600 (Tue, 18 Nov
	  2008) | 11 lines Fix the logic for when delete=yes when IMAP
	  storage is in use so that the message is deleted from both local
	  and IMAP storage. (closes issue #13642) Reported by: jaroth
	  Patches: deleteyes.patch uploaded by jaroth (license 50) ........

	* /, channels/chan_sip.c: Merged revisions 157512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r157512 | mmichelson | 2008-11-18 16:54:08 -0600 (Tue, 18 Nov
	  2008) | 21 lines Merged revisions 157503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r157503 | mmichelson | 2008-11-18 16:47:57 -0600 (Tue, 18 Nov
	  2008) | 13 lines Add some missing invite state changes necessary
	  in the sip_write function. Not setting the invite state correctly
	  on the call was resulting in the Record application leaving empty
	  files. I also have updated the doxygen comment next to the
	  declaration of the INV_EARLY_MEDIA constant to reflect that we
	  also use this state when we *send* a 18X response to an INVITE.
	  (closes issue #13878) Reported by: nahuelgreco Patches:
	  sip-early-media-recording-1.4.22.patch uploaded by nahuelgreco
	  (license 162) Tested by: putnopvut ........ ................

	* /, channels/chan_sip.c: Merged revisions 157496 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157496 |
	  mmichelson | 2008-11-18 15:59:24 -0600 (Tue, 18 Nov 2008) | 6
	  lines Based on Russell's advice on the asterisk-dev list, I have
	  changed from using a global lock in update_call_counter to using
	  the locks within the sip_pvt and sip_peer structures instead.
	  ........

	* /, channels/chan_sip.c: Merged revisions 157427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157427 |
	  mmichelson | 2008-11-18 14:23:58 -0600 (Tue, 18 Nov 2008) | 13
	  lines * Add a lock to be used in the update_call_counter
	  function. * Revert logic to mirror 1.4's in the sense that it
	  will not allow the call counter to dip below 0. These two
	  measures prevent potential races that could cause a SIP peer to
	  appear to be busy forever. (closes issue #13668) Reported by: mjc
	  Patches: hintfix_trunk_rev152649.patch uploaded by wolfelectronic
	  (license 586) ........

2008-11-18 19:18 +0000 [r157367]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_meetme.c: Merged revisions 157366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r157366 | jpeeler | 2008-11-18 13:16:00 -0600 (Tue, 18 Nov 2008)
	  | 14 lines Merged revisions 157365 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r157365 | jpeeler | 2008-11-18 13:13:33 -0600 (Tue, 18 Nov 2008)
	  | 6 lines (closes issue #13899) Reported by: akkornel This fix is
	  the result of a bug fix in ast_app_separate_args r124395. If an
	  argument does not exist it should always be set to a null string
	  rather than a null pointer. ........ ................

2008-11-18 18:32 +0000 [r157308]  Mark Michelson <mmichelson@digium.com>

	* apps/app_followme.c, apps/app_dial.c, channels/chan_local.c, /,
	  main/features.c, include/asterisk/channel.h: Merged revisions
	  157306 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r157306 | mmichelson | 2008-11-18 12:31:08 -0600 (Tue, 18 Nov
	  2008) | 20 lines Merged revisions 157305 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r157305 | mmichelson | 2008-11-18 12:25:55 -0600 (Tue, 18 Nov
	  2008) | 12 lines Fix a crash in the end_bridge_callback of
	  app_dial and app_followme which would occur at the end of an
	  attended transfer. The error occurred because we initially stored
	  a pointer to an ast_channel which then was hung up due to a
	  masquerade. This commit adds a "fixup" callback to the
	  bridge_config structure to allow for end_bridge_callback_data to
	  be changed in the case that a new channel pointer is needed for
	  the end_bridge_callback. ........ ................

2008-11-18 18:20 +0000 [r157304]  Steve Murphy <murf@digium.com>

	* main/config.c, /: Merged revisions 157302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157302 |
	  murf | 2008-11-18 11:07:55 -0700 (Tue, 18 Nov 2008) | 18 lines
	  (closes issue #13420) Reported by: alex70 Patches:
	  13420.13539.patch uploaded by murf (license 17) Tested by: murf,
	  awk This fixes two problems: a spurious linefeed insertion
	  probably left over from pre-precomment times. Only generated when
	  category had no previous comments. The other problem: Insertions
	  could get the line-numbering out of whack and generate negative
	  line numbers, causing chunks of line numbers to be emitted, on
	  the scale of the number of lines up to that point in the file. In
	  such cases, abort the looping, and all is well. ........

2008-11-17 22:39 +0000 [r157255]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /: Merged revisions 157253 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157253 |
	  tilghman | 2008-11-17 16:25:06 -0600 (Mon, 17 Nov 2008) | 8 lines
	  Can't use items duplicated off the stack frame in an element
	  returned from a function: in these cases, we have to use the
	  heap, or garbage will result. (closes issue #13898) Reported by:
	  alecdavis Patches: 20081114__bug13898__2.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: alecdavis ........

2008-11-15 19:49 +0000 [r157108-157166]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, Makefile.moddir_rules, Makefile.rules: Merged
	  revisions 157164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r157164 | kpfleming | 2008-11-15 20:45:19 +0100 (Sat, 15 Nov
	  2008) | 13 lines Merged revisions 157162-157163 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r157162 | kpfleming | 2008-11-15 20:24:24 +0100 (Sat, 15 Nov
	  2008) | 1 line dist-clean should remove dependency information
	  files as well ........ r157163 | kpfleming | 2008-11-15 20:31:03
	  +0100 (Sat, 15 Nov 2008) | 1 line when an individual directory
	  dist-clean is run, run clean in that directory first, and when
	  running top-level dist-clean, do not run subdirectory clean
	  operations twice ........ ................

	* /, contrib/asterisk-ng-doxygen: Merged revisions 157105 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r157105 | kpfleming | 2008-11-15 19:00:32 +0100 (Sat, 15
	  Nov 2008) | 13 lines major update to doxygen configuration file:
	  1) update to doxygen 1.5.x style file, as used in trunk 2) tell
	  doxygen where are header files are, so include-file processing
	  can be done 3) make all macros that are used to define
	  variables/functions be expanded, so that doxygen will properly
	  document the resulting variable/function 4) make all macros that
	  are used to provide the contents of a variable (structure) be
	  expanded, so that doxygen will be able to document the resulting
	  fields 5) suppress compiler attributes (__attribute__(xxx)) from
	  being seen by doxygen, so it will properly match up function
	  definition and usage (for an example of th effect of this, look
	  at the doxygen docs for ast_log() from before and afte this
	  commit) ........

2008-11-15 04:30 +0000 [r157040-157042]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c, main/features.c, main/taskprocessor.c:
	  Merged revisions 157041 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r157041 |
	  russell | 2008-11-14 22:25:57 -0600 (Fri, 14 Nov 2008) | 3 lines
	  Fix a few more places where the case insensitive hash should be
	  used since the comparison is case insensitive. ........

	* /, channels/chan_console.c: Merged revisions 157039 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r157039 | russell | 2008-11-14 22:08:42 -0600 (Fri, 14 Nov 2008)
	  | 3 lines Use the new case insensitive hash function for console
	  interfaces. The comparison function is case insensitive. ........

2008-11-14 21:21 +0000 [r156963]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 156962 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156962 |
	  mmichelson | 2008-11-14 15:19:58 -0600 (Fri, 14 Nov 2008) | 7
	  lines Revision 155513 of chan_sip.c in trunk inadvertently
	  removed a very important line to set the "len" field for incoming
	  SIP requests. The result was that all incoming SIP messages
	  appeared to be 0-length, meaning Asterisk could do no meaningful
	  processing of anything SIP-related ........

2008-11-14 17:04 +0000 [r156913]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 156911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156911 |
	  tilghman | 2008-11-14 11:02:00 -0600 (Fri, 14 Nov 2008) | 4 lines
	  Ping is missing the standard double-newline after the event.
	  (closes issue #13903) Reported by: kebl0155 ........

2008-11-14 16:57 +0000 [r156819-156894]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, include/asterisk/strings.h: This is the 1.6.1
	  version of trunk commit 156883. It is functionally equivalent to
	  the 1.6.0 commit

	* apps/app_voicemail.c, /: Merged revisions 156817 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r156817 | mmichelson | 2008-11-14 09:20:03 -0600
	  (Fri, 14 Nov 2008) | 18 lines Merged revisions 156816 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156816 | mmichelson | 2008-11-14 09:18:59 -0600 (Fri, 14 Nov
	  2008) | 10 lines If the prompt to reenter a voicemail password
	  timed out, it resulted in the password not being saved, even if
	  the input matched what you gave when first prompted to enter a
	  new password. This is because the return value of ast_readstring
	  was checked, but not checked properly. This bug was discovered by
	  Jared Smith during an Asterisk training course. Thanks for
	  reporting it! ........ ................

2008-11-14 00:44 +0000 [r156691-156757]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_while.c, /: Merged revisions 156756 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156756 | tilghman | 2008-11-13 18:43:13 -0600 (Thu, 13 Nov 2008)
	  | 13 lines Merged revisions 156755 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156755 | tilghman | 2008-11-13 18:41:37 -0600 (Thu, 13 Nov 2008)
	  | 6 lines ast_waitfordigit() requires that the channel be up, for
	  no good logical reason. This prevents While/EndWhile from working
	  within the "h" extension. Reported by: jgalarneau (for ABE C.2)
	  Fixed by: me ........ ................

	* main/manager.c, /: Merged revisions 156690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156690 | tilghman | 2008-11-13 15:30:41 -0600 (Thu, 13 Nov 2008)
	  | 14 lines Merged revisions 156688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156688 | tilghman | 2008-11-13 15:24:00 -0600 (Thu, 13 Nov 2008)
	  | 7 lines Provide more space for all the data which can appear in
	  an originating channel name. (closes issue #13398) Reported by:
	  bamby Patches: manager.c.diff uploaded by bamby (license 430)
	  ........ ................

2008-11-13 19:29 +0000 [r156654]  Brandon Kruse <bkruse@digium.com>

	* main/manager.c: Merged revisions 156017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156017 |
	  pari | 2008-11-11 17:02:43 -0600 (Tue, 11 Nov 2008) | 5 lines
	  Patch by Ryan Brindley -- Make sure that manager refuses any
	  duplicate 'new category' requests in updateconfig (closes issue
	  #13539) ........

2008-11-13 19:18 +0000 [r156650]  Jeff Peeler <jpeeler@digium.com>

	* main/pbx.c, /: Merged revisions 156649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156649 |
	  jpeeler | 2008-11-13 13:17:50 -0600 (Thu, 13 Nov 2008) | 6 lines
	  (closes issue #13891) Reported by: smurfix This reverts a change
	  I made in 116297. At the time it seemed the change was required
	  to solve an issue with attempting a transfer but then letting it
	  timeout without dialing any digits. However, I didn't realize
	  that having an empty extension was possible. I'm removing the
	  immediate return that was added in pbx_find_extension if the
	  extension is null. ........

2008-11-13 17:12 +0000 [r156614]  Mark Michelson <mmichelson@digium.com>

	* autoconf/ast_c_compile_check.m4, /, configure: Merged revisions
	  156612 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156612 |
	  mmichelson | 2008-11-13 11:07:56 -0600 (Thu, 13 Nov 2008) | 4
	  lines Kevin sent a note indicating that this change is not
	  necessary, so I am reverting it ........

2008-11-12 21:36 +0000 [r156389]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /: Merged revisions 156388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156388 | tilghman | 2008-11-12 15:34:51 -0600 (Wed, 12 Nov 2008)
	  | 12 lines Merged revisions 156386 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156386 | tilghman | 2008-11-12 15:18:57 -0600 (Wed, 12 Nov 2008)
	  | 5 lines When using call limits under 1 second, infinite call
	  lengths are allowed, instead. (closes issue #13851) Reported by:
	  ruddy ........ ................

2008-11-12 20:11 +0000 [r156354]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 156299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156299 | murf | 2008-11-12 12:47:29 -0700 (Wed, 12 Nov 2008) |
	  26 lines Merged revisions 156297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156297 | murf | 2008-11-12 12:36:16 -0700 (Wed, 12 Nov 2008) |
	  18 lines It turns out that the 0x0XX00 codes being returned for
	  N, X, and Z are off by one, as per conversation with jsmith on
	  #asterisk-dev; he was teaching a class and disconcerted that this
	  published rule was not being followed, with patterns _NXX,
	  _[1-8]22 and _[2-9]22... and NXX was winning, but [1-8] should
	  have been. This change, tested on these 3 patterns now picks the
	  proper one. However, this change may surprise users who set up
	  dialplans based on previous behavior, which has been there for
	  what, 2 and half years or so now. ........ ................

2008-11-12 19:29 +0000 [r156296]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_meetme.c: Merged revisions 156295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156295 | tilghman | 2008-11-12 13:28:22 -0600 (Wed, 12 Nov 2008)
	  | 13 lines Merged revisions 156294 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156294 | tilghman | 2008-11-12 13:26:45 -0600 (Wed, 12 Nov 2008)
	  | 6 lines If the SLA thread is not started, then reload causes a
	  memory leak. (closes issue #13889) Reported by: eliel Patches:
	  app_meetme.c.patch uploaded by eliel (license 64) ........
	  ................

2008-11-12 19:11 +0000 [r156291]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_meetme.c: Merged revisions 156290 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156290 | jpeeler | 2008-11-12 13:11:15 -0600 (Wed, 12 Nov 2008)
	  | 11 lines Merged revisions 156289 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156289 | jpeeler | 2008-11-12 13:10:12 -0600 (Wed, 12 Nov 2008)
	  | 3 lines For whatever reason, gcc only warned me about the
	  possible use of an uninitialized variable when compiling 1.6.1.
	  ........ ................

2008-11-12 19:05 +0000 [r156284-156288]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 156243 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r156243 | tilghman | 2008-11-12 12:55:18 -0600
	  (Wed, 12 Nov 2008) | 18 lines Merged revisions 156229 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156229 | tilghman | 2008-11-12 12:39:21 -0600 (Wed, 12 Nov 2008)
	  | 11 lines Revert revision 132506, since it occasionally caused
	  IAX2 HANGUP packets not to be sent, and instead, schedule a task
	  to destroy the iax2 pvt structure 10 seconds later. This allows
	  the IAX2 HANGUP packet to be queued, transmitted, and ACKed
	  before the pvt is destroyed. (closes issue #13645) Reported by:
	  dzajro Patches: 20081111__bug13645__3.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: vazir Reviewed:
	  http://reviewboard.digium.com/r/51/ ........ ................

	* apps/app_meetme.c: Fix build (res possibly unused in this
	  function, says gcc)

2008-11-12 18:55 +0000 [r156247]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_meetme.c: Merged revisions 156228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156228 | jpeeler | 2008-11-12 12:32:46 -0600 (Wed, 12 Nov 2008)
	  | 16 lines Merged revisions 156178 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156178 | jpeeler | 2008-11-12 11:53:44 -0600 (Wed, 12 Nov 2008)
	  | 8 lines (closes issue #13173) Reported by: pep This change adds
	  an announce_thread responsible for playing announcements to an
	  existing conference. This allows all announcing to be immediately
	  stopped if necessary but more importantly allows other threads
	  that need to play something to not block. There are multiple
	  benefits to this, but the actual bug is for solving the scenario
	  for a channel to be unusable after hang up for the entire
	  duration of the parting announcement. The parting announcement
	  can be extremely long depending on what the user recorded upon
	  joining the conference. Reviewed by Russell on Review Board:
	  http://reviewboard.digium.com/r/25/ ........ ................

2008-11-12 17:48 +0000 [r156171]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /: Merged revisions 156169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156169 | mmichelson | 2008-11-12 11:41:56 -0600 (Wed, 12 Nov
	  2008) | 15 lines Merged revisions 156167 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156167 | mmichelson | 2008-11-12 11:38:33 -0600 (Wed, 12 Nov
	  2008) | 7 lines When doing some tests, I was having a crash at
	  the end of every call if an attended transfer occurred during the
	  call. I traced the cause to the CDR on one of the channels being
	  NULL. murf suggested a check in the end bridge callback to be
	  sure the CDR is non-NULL before proceeding, so that's what I'm
	  adding. ........ ................

2008-11-12 17:38 +0000 [r156168]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, /: Merged revisions 156166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r156166 | russell | 2008-11-12 11:38:20 -0600 (Wed, 12 Nov 2008)
	  | 15 lines Merged revisions 156164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r156164 | russell | 2008-11-12 11:29:52 -0600 (Wed, 12 Nov 2008)
	  | 7 lines Move the sanity check that makes sure "always fork" is
	  not set along with the console option to be after the code that
	  reads options from asterisk.conf. This resolves a situation where
	  Asterisk can start taking up 100% when misconfigured. (Thanks to
	  Bryce Porter (x86 on IRC) for letting me log in to his system to
	  figure out what was causing the 100% CPU problem.) ........
	  ................

2008-11-12 15:34 +0000 [r156128]  Mark Michelson <mmichelson@digium.com>

	* autoconf/ast_c_compile_check.m4, /, configure: Merged revisions
	  156127 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r156127 |
	  mmichelson | 2008-11-12 09:33:11 -0600 (Wed, 12 Nov 2008) | 5
	  lines Add a couple of AC_SUBST calls to the AST_C_COMPILE_CHECK
	  macro. These missing calls were discovered when working on
	  timerfd support in a separate branch. ........

2008-11-11 19:52 +0000 [r156005]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_realtime.c: Merged revisions 155862 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155862 |
	  tilghman | 2008-11-10 15:12:28 -0600 (Mon, 10 Nov 2008) | 5 lines
	  Make documentation of update method match documentation and
	  update update2 method to match. Reported by: atis, via -dev
	  mailing list. Fixed by: me ........

2008-11-10 21:15 +0000 [r155864]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 155863 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r155863 | mmichelson | 2008-11-10 15:14:44 -0600
	  (Mon, 10 Nov 2008) | 22 lines Merged revisions 155861 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r155861 | mmichelson | 2008-11-10 15:07:39 -0600 (Mon, 10 Nov
	  2008) | 14 lines Channel drivers assume that when their indicate
	  callback is invoked, that the channel on which the callback was
	  called is locked. This patch corrects an instance in chan_agent
	  where a channel's indicate callback is called directly without
	  first locking the channel. This was leading to some observed
	  locking issues in chan_local, but considering that all channel
	  drivers operate under the same expectations, the generic fix in
	  chan_agent is the right way to go. AST-126 ........
	  ................

2008-11-10 20:56 +0000 [r155764-155826]  Tilghman Lesher <tlesher@digium.com>

	* doc/valgrind.txt, /: Merged revisions 155804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155803 |
	  tilghman | 2008-11-10 14:49:59 -0600 (Mon, 10 Nov 2008) | 1 line
	  I got tired of saying this in every single bugnote referring to
	  this file. ........

	* /, main/editline/readline.c: Merged revisions 155763 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r155763 | tilghman | 2008-11-10 12:04:30 -0600 (Mon, 10 Nov 2008)
	  | 6 lines Fix memory leak when MALLOC_DEBUG is enabled. (closes
	  issue #13864) Reported by: eliel Patches: readline.c.patch
	  uploaded by eliel (license 64) ........

2008-11-09 16:32 +0000 [r155556-155672]  Sean Bright <sean.bright@gmail.com>

	* configs/chan_dahdi.conf.sample, /: Merged revisions 155671 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r155671 | seanbright | 2008-11-09 11:30:29 -0500 (Sun,
	  09 Nov 2008) | 1 line Fix this as well. Pointed out by tzafrir.
	  ........

	* apps/app_followme.c, apps/app_queue.c, apps/app_dial.c, /,
	  main/features.c, include/asterisk/channel.h: Merged revisions
	  155554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r155554 | seanbright | 2008-11-08 20:27:00 -0500 (Sat, 08 Nov
	  2008) | 14 lines Merged revisions 155553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r155553 | seanbright | 2008-11-08 20:08:07 -0500 (Sat, 08 Nov
	  2008) | 6 lines Use static functions here instead of nested ones.
	  This requires a small change to the ast_bridge_config struct as
	  well. To understand the reason for this change, see the following
	  post: http://gcc.gnu.org/ml/gcc-help/2008-11/msg00049.html
	  ........ ................

2008-11-08 21:48 +0000 [r155515-155517]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c, include/asterisk/strings.h: Merged
	  revisions 155516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155516 |
	  russell | 2008-11-08 15:46:43 -0600 (Sat, 08 Nov 2008) | 3 lines
	  - Check for failure when putting the packet in the ast_str - fix
	  a spelling error in a header file ........

	* /, channels/chan_sip.c: Merged revisions 155513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155513 |
	  russell | 2008-11-08 15:34:36 -0600 (Sat, 08 Nov 2008) | 3 lines
	  Remove some code that is basically a no-op. Code above this
	  already ensures that the buffer is terminated. ........

2008-11-07 23:42 +0000 [r155469]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 155467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155467 |
	  mmichelson | 2008-11-07 17:41:44 -0600 (Fri, 07 Nov 2008) | 12
	  lines Set the invite state to INV_CANCELLED in a place that makes
	  more sense. Where it was set before, it was impossible to
	  actually delay sending a CANCEL if we had not yet received a
	  provisional response to an INVITE. (closes issue #13626) Reported
	  by: atis Patches: 13626.patch uploaded by putnopvut (license 60)
	  Tested by: atis ........

2008-11-07 22:29 +0000 [r155396-155400]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 155399 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r155399 | tilghman | 2008-11-07 16:28:58 -0600 (Fri, 07 Nov 2008)
	  | 14 lines Merged revisions 155398 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r155398 | tilghman | 2008-11-07 16:27:32 -0600 (Fri, 07 Nov 2008)
	  | 7 lines Clarify error message. (closes issue #13809) Reported
	  by: denke Patches: 20081104__bug13809.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: denke ........ ................

	* /, funcs/func_odbc.c: Merged revisions 155395 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155395 |
	  tilghman | 2008-11-07 16:03:50 -0600 (Fri, 07 Nov 2008) | 2 lines
	  Two bugs relating to colnames found by Marquis42 on #asterisk-dev
	  ........

2008-11-07 21:16 +0000 [r155362]  Mark Michelson <mmichelson@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 155360 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r155360 | mmichelson | 2008-11-07 15:14:49 -0600 (Fri,
	  07 Nov 2008) | 8 lines Remove one more instance of the sample
	  configuration lying about what's possible. The tz cannot be set
	  in a context like this. It can only be set in the general section
	  or per-mailbox. Thanks to sasargen on #asterisk-dev for pointing
	  this out ........

2008-11-07 20:19 +0000 [r155325]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 155324 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r155324 | tilghman | 2008-11-07 14:13:32 -0600 (Fri, 07 Nov 2008)
	  | 7 lines Send call release with unallocated cause instead of
	  normal call clearing, when invalid extension is called. (closes
	  issue #13408) Reported by: adomjan Patches:
	  chan_dahdi.c-ss7-unallocated-2 uploaded by adomjan (license 487)
	  ........

2008-11-07 15:43 +0000 [r155242-155272]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 155264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155264 |
	  russell | 2008-11-07 09:42:04 -0600 (Fri, 07 Nov 2008) | 3 lines
	  Remove a bogus ast_free() that Kevin noticed. This was probably
	  just left over from pre-astobj2ified chan_sip. ........

	* /, include/asterisk/astobj2.h: Merged revisions 155244 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r155244 | russell | 2008-11-07 09:01:02 -0600 (Fri, 07
	  Nov 2008) | 4 lines Clarify which part of OBJ_MULTIPLE is not
	  implemented, and under what case it is perfectly fine to use.
	  (Inspired by a question I received about my last commit.)
	  ........

	* /, channels/chan_sip.c: Merged revisions 155241 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155241 |
	  russell | 2008-11-07 08:50:30 -0600 (Fri, 07 Nov 2008) | 4 lines
	  Fix some code in chan_sip that was intended to unlink multiple
	  objects from a container. The OBJ_MULTIPLE flag must be provided
	  here. Otherwise, this would only remove a single object. ........

2008-11-06 22:49 +0000 [r155117-155122]  Kevin P. Fleming <kpfleming@digium.com>

	* res/ael/ael.flex, /, res/ael/ael_lex.c, utils/extconf.c: Merged
	  revisions 155121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r155121 |
	  kpfleming | 2008-11-06 16:49:19 -0600 (Thu, 06 Nov 2008) | 3
	  lines don't blindly assume that Darwin and Cygwin need
	  GLOB_ABORTED defined; only define it if it is not already defined
	  ........

	* configure, configure.ac: ensure that an adequately new version of
	  libpri is in place so that chan_dahdi will compile with PRI
	  support

2008-11-06 19:48 +0000 [r155014]  Mark Michelson <mmichelson@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 155012 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r155012 | mmichelson | 2008-11-06 13:46:53 -0600
	  (Thu, 06 Nov 2008) | 16 lines Merged revisions 155011 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r155011 | mmichelson | 2008-11-06 13:45:52 -0600 (Thu, 06 Nov
	  2008) | 8 lines The documentation listed the ability to set
	  'maxmsg' per context. The truth is that you can only set this in
	  the general section or per mailbox. Thus I am updating the sample
	  config file to be more accurate. Thanks to sasargen on IRC for
	  bringing up this issue. ........ ................

2008-11-05 22:02 +0000 [r154920]  Sean Bright <sean.bright@gmail.com>

	* include/asterisk.h, /: Merged revisions 154919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r154919 |
	  seanbright | 2008-11-05 17:01:22 -0500 (Wed, 05 Nov 2008) | 2
	  lines Fix a problem found while building res_snmp. ........

2008-11-05 22:00 +0000 [r154917]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 154428 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r154428 | tilghman | 2008-11-04 17:03:00 -0600 (Tue, 04 Nov 2008)
	  | 7 lines Switch to using a thread condition to signal that a
	  child thread is ready for work, rather than a busy wait. (closes
	  issue #13011) Reported by: jpgrayson Patches:
	  chan_iax2_find_idle.patch uploaded by jpgrayson (license 492)
	  ........

2008-11-05 16:14 +0000 [r154690]  Steve Murphy <murf@digium.com>

	* main/channel.c, /: Merged revisions 154687 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r154687 | murf | 2008-11-05 09:11:11 -0700 (Wed, 05 Nov 2008) | 9
	  lines Merged revisions 154685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154685 | murf | 2008-11-05 09:06:53 -0700 (Wed, 05 Nov 2008) | 1
	  line This fix was prompted by communication from user, who was
	  seeing thousands of error logs... looks like EAGAIN. Made such
	  uninteresting. ........ ................

2008-11-04 20:52 +0000 [r154367]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, /: Merged revisions 154366 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r154366 | tilghman | 2008-11-04 14:51:18 -0600
	  (Tue, 04 Nov 2008) | 16 lines Merged revisions 154365 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154365 | tilghman | 2008-11-04 14:49:33 -0600 (Tue, 04 Nov 2008)
	  | 9 lines On busy systems, it's possible for the values checked
	  within a single line of code to change, unless the structure is
	  locked to ensure a consistent state. (closes issue #13717)
	  Reported by: kowalma Patches: 20081102__bug13717.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: kowalma ........
	  ................

2008-11-04 19:09 +0000 [r154269]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 154268 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r154268 | rmudgett | 2008-11-04 13:07:26 -0600
	  (Tue, 04 Nov 2008) | 11 lines Merged revisions 154266 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154266 | rmudgett | 2008-11-04 13:01:08 -0600 (Tue, 04 Nov 2008)
	  | 4 lines JIRA ABE-1703 mISDN sets the channel to the wrong state
	  when it receives the indication AST_CONTROL_RINGING. ........
	  ................

2008-11-04 19:02 +0000 [r154024-154267]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_h323.c: Merged revisions 154264 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r154264 | tilghman | 2008-11-04 12:59:48 -0600
	  (Tue, 04 Nov 2008) | 10 lines Recorded merge of revisions 154263
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154263 | tilghman | 2008-11-04 12:58:05 -0600 (Tue, 04 Nov 2008)
	  | 3 lines Make the monitor thread non-detached, so it can be
	  joined (suggested by Russell on -dev list). ........
	  ................

	* apps/app_voicemail.c, /: Recorded merge of revisions 154072 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r154072 | tilghman | 2008-11-03 16:28:12 -0600
	  (Mon, 03 Nov 2008) | 12 lines Merged revisions 154066 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154066 | tilghman | 2008-11-03 16:27:10 -0600 (Mon, 03 Nov 2008)
	  | 5 lines Attempting to expunge a mailbox when the mailstream is
	  NULL will crash Asterisk. (Closes issue #13829) Reported by:
	  jaroth Patch by: me (modified jaroth's patch) ........
	  ................

	* main/rtp.c, /: Merged revisions 154060 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r154060 | tilghman | 2008-11-03 15:48:21 -0600 (Mon, 03 Nov 2008)
	  | 3 lines Remove the potential for a division by zero error.
	  (Closes issue #13810) ........

	* /, funcs/func_odbc.c: Recorded merge of revisions 154023 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r154023 | tilghman | 2008-11-03 15:01:30 -0600 (Mon, 03
	  Nov 2008) | 4 lines Should have passed the string pointer, not
	  the ast_str structure. (closes issue #13830) Reported by: Marquis
	  ........

2008-11-03 00:21 +0000 [r153710-153711]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/compiler.h, apps/app_stack.c,
	  include/asterisk/agi.h, configure,
	  include/asterisk/autoconfig.h.in, autoconf/ast_gcc_attribute.m4,
	  configure.ac: Merged revision 153709 from trunk
	  ------------------------------------------------------------------------
	  r153709 | kpfleming | 2008-11-02 17:34:39 -0600 (Sun, 02 Nov
	  2008) | 3 lines instead of trying to forcibly load res_agi when
	  app_stack is loaded (even if the administrator didn't want it
	  loaded), use GCC weak symbols to determine whether it was loaded
	  already or not; if it was loaded, then use it.
	  ------------------------------------------------------------------------

	* channels/chan_iax2.c, res/res_jabber.c, channels/chan_oss.c,
	  utils/stereorize.c, main/channel.c, main/manager.c,
	  res/ael/ael_lex.c, main/file.c, pbx/pbx_dundi.c,
	  formats/format_gsm.c, main/asterisk.c, utils/muted.c, /,
	  formats/format_wav.c, apps/app_authenticate.c,
	  res/res_phoneprov.c, res/res_crypto.c, utils/astman.c,
	  res/res_musiconhold.c, res/res_http_post.c, apps/app_queue.c,
	  res/res_config_sqlite.c, agi/eagi-sphinx-test.c, utils/frame.c,
	  channels/chan_dahdi.c, res/ael/ael.tab.c, funcs/func_odbc.c,
	  main/ast_expr2f.c, res/res_agi.c, main/http.c, main/logger.c,
	  channels/chan_h323.c, apps/app_sms.c, res/ael/ael.flex,
	  pbx/pbx_config.c, apps/app_chanspy.c, apps/app_stack.c,
	  utils/streamplayer.c, apps/app_adsiprog.c, apps/app_voicemail.c,
	  apps/app_dial.c, channels/chan_sip.c, apps/app_festival.c,
	  main/db1-ast/hash/hash_page.c, res/ael/ael.y, agi/eagi-test.c,
	  pbx/pbx_lua.c, formats/format_ogg_vorbis.c, main/utils.c,
	  utils/astcanary.c, formats/format_wav_gsm.c: import gcc 4.3.2
	  warning fixes from trunk, with a few changes specific to this
	  branch

2008-11-02 20:07 +0000 [r153363-153653]  Russell Bryant <russell@digium.com>

	* include/asterisk/features.h, /: Merged revisions 153652 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r153652 | russell | 2008-11-02 14:06:03 -0600
	  (Sun, 02 Nov 2008) | 10 lines Merged revisions 153651 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r153651 | russell | 2008-11-02 13:51:17 -0600 (Sun, 02 Nov 2008)
	  | 2 lines features.h depends on linkedlists.h, so include it
	  ........ ................

	* /, channels/chan_sip.c: Merged revisions 153362 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r153362 |
	  russell | 2008-11-01 15:41:38 -0500 (Sat, 01 Nov 2008) | 3 lines
	  Ensure that the sip_pvt properly has its refcount incremented
	  when the scheduler holds a reference to it for session timer
	  processing. ........

2008-10-31 22:11 +0000 [r153266]  Terry Wilson <twilson@digium.com>

	* apps/app_followme.c, apps/app_queue.c, apps/app_dial.c, /,
	  main/features.c, include/asterisk/channel.h: Merged revisions
	  153181 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r153181 |
	  twilson | 2008-10-31 13:55:33 -0500 (Fri, 31 Oct 2008) | 5 lines
	  Recent CDR fixes moved execution of the 'h' exten into the
	  bridging code, so variables that were set after ast_bridge_call
	  was called would not show up in the 'h' exten. Added a callback
	  function to handle setting variables, etc. from w/in the bridging
	  code. Calls back into a nested function within the function
	  calling ast_bridge_call (closes issue #13793) Reported by:
	  greenfieldtech ........

2008-10-31 20:10 +0000 [r153225]  Mark Michelson <mmichelson@digium.com>

	* main/dial.c, include/asterisk/dial.h: This commit contains the
	  bug fixes and documentation updates which were committed to trunk
	  in revision 153223. I blocked that commit from 1.6.1 since it
	  also contained a new feature. Note to self: Separate commits so
	  that you don't end up with a situation where part of a commit
	  should be merged but part should be blocked from stable branches.

2008-10-31 16:36 +0000 [r153123]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_sip.c: Turn off qualify on uncached realtime
	  peers. (Closes issue #13383)

2008-10-30 21:01 +0000 [r152995]  Sean Bright <sean.bright@gmail.com>

	* bootstrap.sh: The -I argument to aclocal needs a space before
	  the include directory name.

2008-10-30 20:36 +0000 [r152924-152974]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_h323.c: Cannot join detached threads. See
	  http://www.opengroup.org/onlinepubs/000095399/functions/pthread_join.html
	  (Closes issue #13400)

	* channels/chan_local.c: Unlock before returning, when extension
	  doesn't exist.  (closes issue #13807) Reported by: eliel Patches:
	  chan_local.c.patch uploaded by eliel (license 64)

2008-10-30 19:41 +0000 [r152878-152921]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Fix the sip_peer reference count with
	  respect to scheduler entries for scheduling peer pokes, and
	  scheduling peer poke expirations.

	* channels/chan_sip.c: Fix the sip_peer reference count with
	  respect to scheduler entries for registration expirations.

	* include/asterisk/sched.h: Fix a bug in AST_SCHED_REPLACE_UNREF().
	  The reference count of the object _must_ be increased before
	  creating the scheduler entry. Otherwise, you create a race
	  condition where the reference count may hit zero and the object
	  can disappear out from under you. This could also would have
	  incorrectly decreased the reference count in the case that the
	  scheduler add failed.

	* channels/chan_sip.c: Modify the documentation of the sip_registry
	  struct - Remove a comment that says that the monitor thread is the
	  only one that ever touches these objects. This is no longer the
	  case with TCP.  Also, I would eventually like to get the scheduler
	  in its own thread, so this is just a poor assumption to make. -
	  Note that reference counting of these objects with respect to
	  scheduler entries is not complete. There are some leaked
	  references when deleting scheduler entries.

2008-10-30 16:55 +0000 [r152814]  Kevin P. Fleming <kpfleming@digium.com>

	* main/cdr.c: instead of comparing the string pointer to 0,
	  let's compare the value that was actually parsed out of the
	  string (found by sparse)

2008-10-30 04:29 +0000 [r152690-152777]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample: Set up an example stdexten that
	  preserves the original context and extension in the CDR. (Related
	  to issue #13799) Reported by: davidw

	* main/pbx.c: Track down and fix annoying lock errors.  These would
	  occur when merging hints that resulted from a pattern matched hint
	  during a 'dialplan reload'.

2008-10-29 20:55 +0000 [r152648]  Mark Michelson <mmichelson@digium.com>

	* apps/app_directory.c: If there was no named defined in a
	  voicemail.conf mailbox entry, then app_directory would crash when
	  attempting to read that entry from the file. We now check for the
	  NULL or empty string properly so that there will be no crash.
	  (closes issue #13804) Reported by: bluecrow76

2008-10-29 20:16 +0000 [r152645]  Terry Wilson <twilson@digium.com>

	* apps/app_queue.c: Small modification to putnopvut's patch to fix
	  this issue. Thanks for all the help, putnopvut! (closes issue
	  #12884) Reported by: bcnit Patches: 12884v4-1.6.0-branch.patch
	  uploaded by otherwiseguy (license 396) Tested by: otherwiseguy

2008-10-29 05:52 +0000 [r152606]  Steve Murphy <murf@digium.com>

	* apps/app_queue.c, configs/features.conf.sample, apps/app_dial.c:
	  A little documentation cross-ref between features and dial and
	  queue... I wasted some time (stupidly) trying to get the
	  one-touch parking stuff working, because it didn't occur to me
	  that I had to also have the corresponding options in the dial
	  command! Duh! (In all this time, I never set this up before!) So,
	  to keep some poor fool from suffering the same fate, I made the
	  features.conf.sample file mention the corresponding opts in
	  dial/queue; and the docs for dial/app specifically mention the
	  corresponding decls in the feature.conf file. I hope this doesn't
	  spoil some vast, eternal plan...

2008-10-29 05:35 +0000 [r152573]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Fix an incorrect usage of sizeof() (closes
	  issue #13795) Reported by: andrew53 Patches:
	  chan_sip_sizeof.patch uploaded by andrew53 (license 519)

2008-10-29 05:09 +0000 [r152537]  Steve Murphy <murf@digium.com>

	* apps/app_queue.c, include/asterisk/features.h, apps/app_dial.c,
	  main/features.c, include/asterisk/pbx.h: The magic trick to avoid
	  this crash is not to try to find the channel by name in the list,
	  which is slow and resource consuming, but rather to pay attention
	  to the result codes from the ast_bridge_call, to which I added the
	  AST_PBX_NO_HANGUP_PEER_PARKED value, which now are returned when
	  a channel is parked. Why? because CDR's aren't generated via
	  parking, so nothing is needed, but if a transfer occurred, there
	  are critical things I need. If you get AST_PBX_KEEPALIVE, then
	  don't touch the channel pointer. If you get
	  AST_PBX_NO_HANGUP_PEER, or AST_PBX_NO_HANGUP_PEER_PARKED, then
	  don't touch the peer pointer. Updated the several places where
	  the results from a bridge were not being properly obeyed, and
	  fixed some code I had introduced so that the results of the
	  bridge were not overridden (in trunk). All the places that
	  previously tested for AST_PBX_NO_HANGUP_PEER now have to check
	  for both AST_PBX_NO_HANGUP_PEER and
	  AST_PBX_NO_HANGUP_PEER_PARKED. I tested this against the 4 common
	  parking scenarios: 1. A calls B; B answers; A parks B; B hangs up
	  while A is getting the parking slot announcement, immediately
	  after being put on hold. 2. A calls B; B answers; A parks B; B
	  hangs up after A has been hung up, but before the park times out.
	  3. A calls B; B answers; B parks A; A hangs up while B is getting
	  the parking slot announcement, immediately after being put on
	  hold. 4. A calls B; B answers; B parks A; A hangs up after B has
	  been hung up, but before the park times out. No crash. I also ran
	  the scenarios above against valgrind, and accesses looked good.

2008-10-28 22:35 +0000 [r152370-152471]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Quoting in the wrong direction (Fixes
	  AST-107)

	* channels/chan_mgcp.c: Only re-add the io port if it was closed,
	  otherwise reload causes a memory leak. (closes issue #13785)
	  Reported by: eliel Patches: chan_mgcp.c.patch uploaded by eliel
	  (license 64)

	* apps/app_dial.c: Reset all DIAL variables back to blank, in case
	  Dial is called multiple times per call (which could otherwise
	  lead to inconsistent status reports). (closes issue #13216)
	  Reported by: ruddy Patches: 20081014__bug13216.diff.txt uploaded
	  by Corydon76 (license 14) Tested by: ruddy

2008-10-27 23:32 +0000 [r152288]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: Buffer policy setting for half is not
	  needed.

2008-10-27 21:53 +0000 [r152173-152217]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c: Inherit ALL elements of CallerID across a
	  local channel. (closes issue #13368) Reported by: Peter Schlaile
	  Patches: 20080826__bug13368.diff.txt uploaded by Corydon76
	  (license 14)

	* apps/app_stack.c: Oops, only delete the ARG variables once upon
	  release. The following section would have removed them again
	  (removing variables from 2 stack frames, instead of just one).

2008-10-27 16:06 +0000 [r152133]  Jason Parker <jparker@digium.com>

	* apps/app_transfer.c: Remove options argument parsing/syntax (it
	  isn't used any longer) (closes issue #13789) Reported by: IgorG
	  Patches: app_transfer.c.diff uploaded by IgorG (license 20)

2008-10-26 20:27 +0000 [r152068]  Sean Bright <sean.bright@gmail.com>

	* funcs/func_strings.c: Since passing \0 as the second argument to
	  strchr is valid (and will match the trailing \0 of a string) we
	  need to check that first, otherwise we end up with incorrect
	  results. Fix suggested by reporter. (closes issue #13787)
	  Reported by: meitinger

2008-10-25 11:11 +0000 [r151907]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: Move AMI initialization to occur after loading
	  modules.  This prevents a deadlock when someone tries to
	  initiate a module reload from the AMI just as Asterisk is
	  starting. (closes issue #13778) Reported by: hotsblanc Fix
	  suggested by hotsblanc

2008-10-22 20:08 +0000 [r151603]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/live_ast: Add a contributed script for running
	  Asterisk without installing it, first. (closes issue #11680)
	  Reported by: tzafrir Patches: live_ast_6 uploaded by tzafrir
	  (license 46)

2008-10-22 20:05 +0000 [r151421-151602]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_dahdi.c: Change some logical ands to bitwise ands
	  and add messages alerting that a channel is being ignored if the
	  PROC_DAHDI_NOCHAN option is set in process_dahdi. (closes issue
	  #13759) Reported by: smurfix Patches: dahdi.patch uploaded by
	  smurfix (license 547)

	* channels/chan_sip.c: The logic of a strncasecmp call was reversed.
	  (closes issue #13706) Reported by: andrew53 Patches:
	  sip_notify_from_rfc3265.patch uploaded by andrew53 (license 519)

	* channels/chan_sip.c: Make the sip_standard_port function more
	  granular by allowing separate type and port arguments. This is
	  necessary because when building our From and Contact headers, we
	  need to be absolutely sure that we are placing our source port
	  there and not the peer's source port. (closes issue #12761)
	  Reported by: asbestoshead Patches: patch-chan-sip-contact-port.txt
	  uploaded by asbestoshead (license 455)

	* channels/chan_sip.c: Get this compiling in dev-mode

	* channels/chan_sip.c: If a peer uses any transport other than UDP,
	  then MWI will fail for that peer since sip_alloc will allocate a
	  sip_pvt with a default transport of UDP. This change resets the
	  socket type immediately after allocating the sip_pvt in
	  sip_send_mwi_from_peer, so that the proceeding call to
	  create_addr_from_peer does not fail right away. The socket data
	  from the peer is properly copied to the sip_pvt in
	  create_addr_from_peer. (closes issue #13710) Reported by:
	  andrew53 Patches: sip_notify_use_tcp.patch uploaded by andrew53
	  (license 519)

	* channels/chan_sip.c: When attempting to resolve hostnames, we
	  need to be sure to remove any parameters from the string so that
	  name resolution succeeds. (closes issue #13727) Reported by:
	  fnordian Patches: resolvewithouturiparameter.patch uploaded by
	  fnordian (license 110)

2008-10-21 15:21 +0000 [r151372]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_mixmonitor.c: Default file modes should always be full
	  read and write, to allow the system administrator to make the
	  decision of what permissions will actually be given, through the
	  use of the process umask. (Closes issue# 13751)

2008-10-21 11:03 +0000 [r151328]  BJ Weschke <bweschke@btwtech.com>

	* channels/chan_sip.c: Fix configuration parsing so type=friend
	  still identifies "friend" as a peer even though it is now a
	  legacy configuration verb. (closes issue #13705) reported by:
	  blitzrage patched by: bweschke

2008-10-20 05:06 +0000 [r151135-151245]  Kevin P. Fleming <kpfleming@digium.com>

	* autoconf (added), autoconf/ast_check_pwlib.m4,
	  autoconf/acx_pthread.m4, autoconf/ast_func_fork.m4, configure,
	  autoconf/ast_gcc_attribute.m4, bootstrap.sh,
	  autoconf/ast_check_gnu_make.m4, autoconf/ast_ext_lib.m4,
	  autoconf/ast_prog_ld.m4, autoconf/ast_c_compile_check.m4,
	  autoconf/ast_c_define_check.m4, autoconf/ast_prog_egrep.m4,
	  autoconf/ast_ext_tool_check.m4, autoconf/ast_check_mandatory.m4,
	  autoconf/ast_check_openh323.m4, autoconf/ast_prog_ld_gnu.m4,
	  configure.ac, acinclude.m4 (removed), autoconf/ast_prog_sed.m4:
	  break up acinclude.m4 into individual files, which will make it
	  easier to maintain, easier to add new macros (less patching) and
	  will ease maintenance of these macros across Asterisk branches.
	  Rename this macro to properly reflect what it does

	* main/tcptls.c, main/manager.c, channels/chan_sip.c, main/http.c,
	  apps/app_externalivr.c, include/asterisk/tcptls.h: cleaup of the
	  TCP/TLS socket API: 1) rename 'struct server_args' to 'struct
	  ast_tcptls_session_args', to follow coding guidelines 2) make
	  ast_make_file_from_fd() static and rename it to something that
	  indicates what it really is for (again coding guidelines) 3)
	  rename address variables inside 'struct ast_tcptls_session_args'
	  to be more descriptive (dare i say it... coding guidelines) 4)
	  change ast_tcptls_client_start() to use the new 'remote_address'
	  field of the session args for the destination of the connection,
	  and use the 'local_address' field to bind() the socket to the
	  proper source address, if one is supplied 5) in chan_sip, ensure
	  that we pass in the PP address we are bound to when creating
	  outbound (client) connections, so that our connections will
	  appear from the correct address

2008-10-18 02:29 +0000 [r150829]  BJ Weschke <bweschke@btwtech.com>

	* main/manager.c: Using the GetVar handler in AMI is potentially
	  dangerous (insta-crash [tm]) when you use a dialplan function
	  that requires a channel and then you don't provide one or provide
	  an invalid one in the Channel: parameter. We'll handle this
	  situation exactly the same way it was handled in pbx.c back on
	  r61766.  We'll create a bogus channel for the function call and
	  destroy it when we're done. If we have trouble allocating the
	  bogus channel then we're not going to try executing the function
	  call at all and run the risk of crashing. (closes issue #13715)
	  reported by: makoto patch by: bweschke

2008-10-17 17:10 +0000 [r150606-150636]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c: Make helper call a little safer (suggested
	  by Russell on IRC)

	* channels/chan_iax2.c, include/asterisk/sched.h: Fix the FRACK!
	  warnings in chan_iax2 when POKE/LAGRQ packets are not answered.

2008-10-16 23:41 +0000 [r150208-150306]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c: Reverting changes from commits 150298 and 150301
	  since I was mistakenly under the assumption that dialplan
	  functions *always* required that a channel be present. I need to
	  go home earlier, I think :)

	* main/manager.c: Don't try to call a dialplan function's read
	  callback from the manager's GetVar handler if an invalid channel
	  has been specified. Several dialplan functions, including CHANNEL
	  and SIP_HEADER, do not check for NULL-ness of the channel being
	  passed in. (closes issue #13715) Reported by: makoto
	  And don't forget to return on the error condition

	* apps/app_sms.c: Answer the channel prior to checking for the 'a'
	  option in app_sms. (closes issue #13675) Reported by: alecdavis
	  Patches: app_sms.bug13675.148985.diff.txt uploaded by alecdavis
	  (license 585)

	* configure, configure.ac: Change configure script to search for
	  openais in both /usr/lib and /usr/lib64 since some distros place
	  64-bit libraries only in the /usr/lib64 directory. (closes issue
	  #13721) Reported by: jcollie Patches:
	  0007-Look-in-64bit-dirs-for-openais.patch uploaded by jcollie
	  (license 412)

	* channels/chan_sip.c: INVITES with proxy auth were sent with a
	  different branch than what was in the invite_branch of a sip_pvt,
	  meaning that if a CANCEL were sent later, the branch in the
	  CANCEL would not match the branch in the latest INVITE sent out,
	  leading to some endpoints responding to the CANCEL with a 481.
	  (closes issue #13714) Reported by: fnordian Patches:
	  invite_branch.patch uploaded by fnordian (license 110)

2008-10-16 16:17 +0000 [r150127]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c: Fix memory leak found by customer

2008-10-16 13:32 +0000 [r149919-149995]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: return this logic to where it used to be,
	  *after* the dialog->needdestroy flag has been determined to be set;
	  otherwise, we generate these debug messages every time we inspect
	  every active dialog

	* apps/app_stack.c: building this module depends on res_agi being
	  built as well

	* res/res_phoneprov.c: inter-module dependencies should be included
	  in the source code, not just in sample config files

	* res/res_phoneprov.c: correct file name in message

2008-10-15 21:00 +0000 [r149803]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Make the sip_proxy struct reference counted.
	  This is necessary to allow for a sip_pvt to maintain a reference
	  to a sip_peer's outboundproxy even after the peer has been freed.
	  (closes issue #13700) Reported by: fnordian Patches: 13700.patch
	  uploaded by putnopvut (license 60) Tested by: fnordian

2008-10-15 20:22 +0000 [r149758]  BJ Weschke <bweschke@btwtech.com>

	* configs/agents.conf.sample: An update to the documentation/example
	  of agents.conf.sample with the correct parameter for this feature
	  as defined in chan_agent.c (closes issue #13709)

2008-10-15 19:09 +0000 [r149589-149688]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_odbc.c: Permit data fields to contain more than 255
	  characters. (closes issue #13631) Reported by: seanbright Patches:
	  20081015__bug13631.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: blitzrage

	* funcs/func_odbc.c: Only set buf to blank before the goto.

	* codecs/lpc10/lpcini.c: When using MALLOC_DEBUG, codec_lpc10 leaks
	  memory, because it matches a library malloc() with an ast_free
	  (which, of course, doesn't match up with known allocated memory,
	  so the free fails). (closes issue #13702) Reported by: eliel
	  Patches: codec_lpc10_lpcini.c uploaded by eliel (license 64)

	* apps/app_echo.c: Minor spacing change (closes issue #13697)
	  Reported by: alecdavis Patches: app_echo.bug13697.103249.diff.txt
	  uploaded by alecdavis (license 585)

2008-10-15 11:32 +0000 [r149512]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: fix some problems when parsing SIP messages
	  that have the maximum number of headers or body lines that we
	  support

2008-10-14 23:58 +0000 [r149203-149280]  Mark Michelson <mmichelson@digium.com>

	* CHANGES, apps/app_dial.c: When specifying an invalid timeout to
	  Dial, take it to mean that no timeout is desired. (closes issue
	  #13625) Reported by: atis

	* channels/chan_sip.c: Change this warning to an error message.
	  Suggestion comes from Sean Bright. Thanks Sean!

	* channels/chan_sip.c: Call register_peer_exten even in the case
	  that the peer's IP/port does not change. (closes issue #13309)
	  Reported by: dimas Patches: v2-13309.patch uploaded by dimas
	  (license 88)

	* include/asterisk/audiohook.h, main/audiohook.c: Add a tolerance
	  period for sync-triggered audiohooks so that if packetization of
	  audio is close (but not equal) we don't end up flushing the
	  audiohooks over small inconsistencies in synchronization. Related
	  to issue #13005, and solves the issue for most people who were
	  experiencing the problem. However, a small number of people are
	  still experiencing the problem on long calls, so I am not
	  closing the issue yet

	* apps/app_queue.c: Update the queue with the correct number of
	  calls and whether the call was completed within the service level
	  when a transfer takes place. This way, we do not "break" the
	  leastrecent and fewestcalls strategies by not logging a call
	  until after the transferred call has ended. (closes issue #13395)
	  Reported by: Marquis Patches: app_queue.c.transfer.patch uploaded
	  by Marquis (license 32)

2008-10-14 22:42 +0000 [r149202]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/hashtab.h, main/chanvars.c, main/config.c,
	  main/hashtab.c, pbx/pbx_spool.c, channels/chan_sip.c,
	  include/asterisk/chanvars.h, include/asterisk/config.h,
	  include/asterisk/strings.h, res/res_indications.c: Add additional
	  memory debugging to several core APIs, and fix several memory
	  leaks found with these changes. (Closes issue #13505, closes
	  issue #13543) Reported by: mav3rick, triccyx Patches:
	  20081001__bug13505.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: mav3rick, triccyx

2008-10-14 21:09 +0000 [r149132]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Don't allow reserved characters to be used in
	  register lines in sip.conf. (closes issue #13570) Reported by:
	  putnopvut

2008-10-14 20:17 +0000 [r149063]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_waitforsilence.c: Check correct values in the return of
	  ast_waitfor(); also, get rid of a possible memory leak. (closes
	  issue #13658) Reported by: explidous Patch by: me

2008-10-14 19:42 +0000 [r149060]  Leif Madsen <lmadsen@digium.com>

	* doc/manager_1_1.txt: Add missing documentation for SipShowRegistry
	  action and RegistryEntry event. (closes issue #13342) Reported and
	  patch by: Laureano

2008-10-14 18:59 +0000 [r148918-148986]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_sms.c: App is ignoring 'p' parameter -- initial pause.
	  (closes issue #13617) Reported by: alecdavis Patches:
	  app_sms.13oct.diff.txt uploaded by alecdavis (license 585)

	* apps/app_voicemail.c: Ensure that mail headers are 7-bit clean,
	  even when UTF-8 characters are used in headers like 'Subject' and
	  'To'.  Closes AST-107.

2008-10-14 17:39 +0000 [r148915]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_local.c: Deadlock prevention in chan_local. (closes
	  issue #13676) Reported by: tacvbo Patches: 13676.patch uploaded by
	  putnopvut (license 60) Tested by: tacvbo

2008-10-14 15:18 +0000 [r148869]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_fax.c: API differences in spandsp 0.0.6pre1 and higher
	  (closes issue #13688) Reported by: irroot Patches:
	  app_fax-span6.patch uploaded by irroot (license 52) with minor
	  modifications by me

2008-10-14 11:35 +0000 [r148614-148763]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: fix some references to the owner of a
	  private structure that may not be present

	* Makefile: on Ubuntu (at least), recent versions of ld in binutils
	  delete all debugging symbols when -x is supplied; since the
	  reasons why -x is being passed are lost in the mists of time,
	  remove it so debugging will work properly

	* channels/chan_sip.c: ensure that *all* fields in the req
	  structure are cleared out before reusing it; has_to_tag was not
	  cleared, which caused the second incoming call over a TCP socket
	  to fail if pedantic checking was enabled

	* main/translate.c: it would be nice if this message printing code
	  had actually been tested before it was committed...

2008-10-13 17:56 +0000 [r148562]  Steve Murphy <murf@digium.com>

	* main/pbx.c: Hmmm. Nobody (but me) is interested in seeing the
	  trie info when they do 'dialplan show ...' (even with debug set
	  to non-zero); so I set up a 'dialplan debug [context]' cli
	  command instead, to explicitly show just the trie info. I even
	  added an extension_exists() call to make sure the trie info is
	  built. I moved the explanatory header to above the extension loop
	  to ensure it only prints once. And it will do this now, whether
	  debug is set or not. I removed the trie printing from the
	  'dialplan show' command entirely.

2008-10-13 15:36 +0000 [r148472]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Sending a 403 after a 200 is considered very
	  bad. (found at SIPit)

2008-10-10 21:22 +0000 [r148375-148377]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: The logic used when checking a peer got
	  changed subtly in the "kill the user" commit and caused calls
	  relying on the insecure setting to not work properly. I changed
	  for finding a peer back to how it was prior to that commit.
	  (closes issue #13644) Reported by: pj Patches: 13644_trunkv2.patch
	  uploaded by putnopvut (license 60) Tested by: pj

	* channels/chan_sip.c: Make sure that the inUse and inRinging
	  fields for a sip peer cannot go below zero. This is a
	  regression from 1.4 and so it will be applied to 1.6.0 as
	  well. (closes issue #13668) Reported by: mjc

2008-10-10 16:37 +0000 [r148269]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: User not notified of temporary greeting, if
	  ODBC storage is in use. (closes issue #13659) Reported by:
	  moliveras Patches: 20081009__bug13659.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: moliveras

2008-10-10 01:33 +0000 [r148240]  Sean Bright <sean.bright@gmail.com>

	* res/res_config_sqlite.c, apps/app_voicemail.c,
	  include/asterisk.h, main/tdd.c, main/cryptostub.c: Don't include
	  logger.h in asterisk.h by default as it is causing problems
	  building app_voicemail. Instead, include it where it is needed.
	  This turned out to be a relatively minor issue because other
	  headers include logger.h as well. Need to test -addons before
	  merging this back to 1.6.0. (closes issue #13605) Reported by:
	  tomo1657 Patches: 13605_seanbright.diff uploaded by seanbright
	  (license 71) Tested by: mmichelson

2008-10-09 23:55 +0000 [r148151-148161]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c: The priority was unnecessary for the manager
	  atxfer, so it has been removed. Furthermore, now we actually use
	  the Context argument passed to set the transfer context and don't
	  error out if no context is specified. This addresses the actual
	  problems outlined in issue 12158. Regarding the other points
	  brought up, regarding the inability to not transfer to extensions
	  which cannot be represented by DTMF, it is not enough of a
	  constraint that it is worth attempting to rework the feature.
	  (closes issue #12158) Reported by: davidw

	* apps/app_voicemail.c: Read the callerid in the correct order and
	  make sure to read the Urgent flag value from the IMAP headers.
	  (closes issue #13652) Reported by: jaroth Patches:
	  imapheaders.patch uploaded by jaroth (license 50)

2008-10-09 23:27 +0000 [r148128]  Tilghman Lesher <tlesher@digium.com>

	* configs/res_ldap.conf.sample: Fix example schema (closes issue
	  #12860) Reported by: flyn Patches: res_ldap.conf.patch uploaded
	  by flyn (license 503)

2008-10-09 23:20 +0000 [r148115]  Mark Michelson <mmichelson@digium.com>

	* main/features.c: (closes issue #13579) Reported by: dwagner
	  (closes issue #13584) Reported by: dwagner Tested by: murf,
	  putnopvut The thought occurred to me that the res= from the
	  extension spawn was ending up being returned from the bridge.
	  "Thou shalt not poison the return value". Made the change and it
	  appears to allow blind xfers to work as normal. If I'm wrong,
	  reopen the bugs. But it looks good to me! Many thanks to
	  putnopvut for helping me reproduce this!

2008-10-09 20:01 +0000 [r148006-148011]  Tilghman Lesher <tlesher@digium.com>

	* sounds/Makefile, sounds/sounds.xml: Publish MOH files in sln16
	  format

	* apps/app_voicemail.c: When blank, callerid name and number
	  should display "unknown caller" in voicemail emails. (Closes
	  issue #13643)

2008-10-09 19:28 +0000 [r147957]  Jeff Peeler <jpeeler@digium.com>

	* main/features.c: (closes issue #13139) Reported by: krisk84
	  Tested by: krisk84 This change prevents a call that is placed in
	  the parkinglot to be picked up before the PBX is finished. If
	  another extension dials the parking extension before the PBX
	  thread has completed at minimum warnings will occur about the PBX
	  not properly being terminated. At worst, a crash could occur.

2008-10-09 17:54 +0000 [r147901]  Michiel van Baak <michiel@vanbaak.info>

	* include/asterisk/endian.h: only include this for OpenBSD. At least
	  FreeBSD is borked when including it (closes issue #13649)
	  Reported by: ys

2008-10-09 17:47 +0000 [r147898]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample: Remove "second form" of
	  extensions, as it no longer applies. Also, cleanup the grammar,
	  formatting, and introduce several clarifications to the text.
	  (Closes issue #13654)

2008-10-09 15:06 +0000 [r147811]  Steve Murphy <murf@digium.com>

	* channels/chan_iax2.c, main/astobj2.c, channels/chan_oss.c,
	  main/config.c, main/rtp.c, main/cli.c, channels/chan_usbradio.c,
	  configure, channels/console_gui.c, utils/extconf.c, main/pbx.c,
	  include/asterisk.h, doc/CODING-GUIDELINES,
	  include/asterisk/autoconfig.h.in, main/translate.c,
	  channels/vcodecs.c, configure.ac, channels/console_video.c:
	  (closes issue #13557) Reported by: nickpeirson Patches:
	  pbx.c.patch uploaded by nickpeirson (license 579)
	  replace_bzero+bcopy.patch uploaded by nickpeirson (license 579)
	  Tested by: nickpeirson, murf 1. replaced all refs to bzero and
	  bcopy to memset and memmove instead. 2. added a note to the
	  CODING-GUIDELINES 3. add two macros to asterisk.h to prevent
	  bzero, bcopy from creeping back into the source 4. removed bzero
	  from configure, configure.ac, autoconfig.h.in

2008-10-08 22:33 +0000 [r147719]  Mark Michelson <mmichelson@digium.com>

	* apps/app_meetme.c: Some small tweaks regarding realtime conference
	  announcements. (closes issue #13522) Reported by: DEA Patches:
	  meetme-rt-fixes.txt uploaded by DEA (license 3)

2008-10-08 22:27 +0000 [r147692]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c: when parsing a text configuration option,
	  ensure that the buffer on the stack is actually large enough to
	  hold the legal values of that option, and also ensure that
	  sscanf() knows to stop parsing if it would overrun the buffer
	  (without these changes, specifying "buffers=...,immediate" would
	  overflow the buffer on the stack, and could not have worked as
	  expected)

2008-10-08 19:09 +0000 [r147593]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_sms.c: Correct a typo in the help; also, ensure that the
	  date and time are correctly set, if not specified in the message.
	  (Closes issue #13594, closes issue #13595) Reported by: alecdavis
	  Patches: 20081001__bug13595.diff.txt uploaded by Corydon76
	  (license 14) Tested by: alecdavis

2008-10-08 15:10 +0000 [r147519]  Mark Michelson <mmichelson@digium.com>

	* apps/app_speech_utils.c: If we receive DTMF make sure that the
	  state of the speech structure goes back to being not ready.
	  (issue #LUMENVOX-8)

2008-10-07 16:54 +0000 [r147196]  Sean Bright <sean.bright@gmail.com>

	* apps/app_voicemail.c: Make 'imapsecret' an alias to
	  'imappassword' in voicemail.conf.

2008-10-07 16:05 +0000 [r147147]  Jeff Peeler <jpeeler@digium.com>

	* main/features.c: Explicitly setting these fields to NULL was done
	  because I wasn't sure if they would be NULL otherwise. Since they
	  will be set automatically, removing.

2008-10-07 15:06 +0000 [r147100]  Richard Mudgett <rmudgett@digium.com>

	* funcs/func_callerid.c: Independent change from branch issue8824
	  that is not part of COLP. (-r142574 rmudgett)

2008-10-07 12:03 +0000 [r147052]  Sean Bright <sean.bright@gmail.com>

	* apps/app_dial.c: Make sure to compare the correct number of
	  characters when special-casing our DAHDI operator mode stuff.
	  Technically, it would work fine, as 'DAH' is currently unique
	  amongst our channel technologies, but as Jared points out:
	  <@jsmith> Sure... as long as the technology starts whith DAH....
	  but it could be DAHDOO!

2008-10-07 00:13 +0000 [r146972]  Terry Wilson <twilson@digium.com>

	* channels/chan_sip.c: A blind transfer to the parking thread would
	  cause a segfault because copy_request accesses dst->data w/o
	  being able to tell whether it is proerly initialized

2008-10-06 23:22 +0000 [r146930]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/threadstorage.h: Update documentation;
	  AST_THREADSTORAGE() in trunk only takes a single argument.

2008-10-06 23:08 +0000 [r146876-146924]  Jeff Peeler <jpeeler@digium.com>

	* include/asterisk/features.h, main/features.c, res/res_agi.c:
	  Similar to r143204, masquerade the channel in the case of Park
	  being called from AGI. ........

	* include/asterisk/endian.h: Mvanbaak said this was needed to
	  compile on OpenBSD, so put it in the OpenBSD section.

	* main/features.c: This commit squashes together three commits
	  because the wrong approach was originally used. (One of the
	  commits was only one line.) 1) r143204: The main change here was
	  to masquerade the channel if the channel that was to be parked
	  was running a PBX on it. The PBX thread can then maintain full
	  control of the channel (the zombie) as it expects to while
	  allowing the parking thread full control of the real (parked)
	  channel. 2) r143270: Changed park_call_full to hold the
	  parkinglot lock a little longer, which protects the parkeduser
	  struct from being freed out from underneath. Made sure that the
	  parking extension is added to the parking context while holding
	  the lock thereby ensuring that there are no spurious warnings
	  from removal attempts when a hangup occurs while the parking lot
	  is being announced. 3) r143475: (the one liner) compare peer and
	  chan instead of looking at the parked user (pu), which could have
	  possibly already have been freed by the parking thread

	* main/features.c: fix some comment placement

	* main/features.c: Explicitly set args in park_call_exec NULL so in
	  the case of no options being passed in, there is no garbage
	  attempted to be used. Also, do not set args to unknown value
	  again if there are no options passed in.

2008-10-06 21:53 +0000 [r146874]  Michiel van Baak <michiel@vanbaak.info>

	* include/asterisk/endian.h: make aescrypt.c compile on OpenBSD again

2008-10-06 21:32 +0000 [r146715-146838]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c, funcs/func_callerid.c,
	  apps/app_speech_utils.c, funcs/func_curl.c,
	  funcs/func_groupcount.c, res/res_smdi.c, channels/chan_sip.c,
	  funcs/func_timeout.c, funcs/func_odbc.c, funcs/func_cdr.c,
	  funcs/func_math.c: Dialplan functions should not actually return
	  0, unless they have modified the workspace. To signal an error
	  (and no change to the workspace), -1 should be returned instead.
	  (closes issue #13340) Reported by: kryptolus Patches:
	  20080827__bug13340__2.diff.txt uploaded by Corydon76 (license 14)

	* channels/chan_local.c: Check whether an extension exists in the
	  _call method, rather than the _alloc method, because we need to
	  evaluate the callerid (since that data affects whether an
	  extension exists).  (closes issue #13343) Reported by: efutch
	  Patches: 20080915__bug13343.diff.txt uploaded by Corydon76
	  (license 14) Tested by: efutch

2008-10-06 16:39 +0000 [r146698]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c: ensure that the private structure for
	  pseudo channels is created without 'leaking' configuration data
	  from other configured channels (closes issue #13555) Reported by:
	  jeffg Patches: issue_13555.patch uploaded by kpfleming (license
	  421) Tested by: jeffg

2008-10-06 00:23 +0000 [r146557]  Sean Bright <sean.bright@gmail.com>

	* utils/Makefile: Quote arguments to cp so we can handle spaces in
	  our paths.

2008-10-05 21:24 +0000 [r146451]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: Fix silly formatting.

2008-10-04 01:57 +0000 [r146314]  Sean Bright <sean.bright@gmail.com>

	* configs/sip_notify.conf.sample: Add ability to remotely reboot
	  snom phones. Also cleaned up and reorganized
	  sip_notify.conf.sample a bit as well. Tested snom reboot on snom
	  360 and verified snom-check-cfg worked as well. (closes issue
	  #13601) Reported by: mjc Tested by: seanbright

2008-10-03 22:42 +0000 [r146243]  Jeff Peeler <jpeeler@digium.com>

	* main/features.c: remove superfluous reference counting operations
	  in manage_parkinglot since ao2_interator_next increments the ref
	  count automatically

2008-10-03 22:13 +0000 [r146200]  Sean Bright <sean.bright@gmail.com>

	* main/cli.c: Resolve a subtle bug where we would never
	  successfully be able to get the first item in the CLI entry list.
	  This was preventing '!' from showing up in either 'help' or in tab
	  completion. (closes issue #13578) Reported by: mvanbaak

2008-10-02 19:31 +0000 [r145960-145964]  Russell Bryant <russell@digium.com>

	* CHANGES: The 'P' command for ExternalIVR was also added in 1.6.0

	* CHANGES: TCP support for ExternalIVR went in to 1.6.1, not 1.6.0

2008-10-02 15:30 +0000 [r145781]  Sean Bright <sean.bright@gmail.com>

	* configure, configure.ac: This is much cleaner, methinks.

2008-10-02 15:19 +0000 [r145754]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c: Some sanity checks that may have led to prior
	  crashes, found by codefreeze-lap (murf) on IRC. Also some cleanup
	  of incorrectly-used constants.

2008-10-01 23:54 +0000 [r145694]  Sean Bright <sean.bright@gmail.com>

	* configure, configure.ac: Try a test compile using the GMime
	  library. Some distros install gmime-config in the base package
	  instead of the -devel package. Now we print a notice and disable
	  GMime support instead of bombing during the main compilation.
	  (closes issue #13583) Reported by: arkadia

2008-10-01 22:24 +0000 [r145557-145609]  Mark Michelson <mmichelson@digium.com>

	* main/features.c: Okay, this should really do it now. While I did
	  manage to fix blind transfers with my last commit here, I also
	  caused an unwanted side-effect. That is, only the first priority
	  of the 'h' extension would be executed when a blind transfer
	  occurred instead of all priorities. Essentially, my last commit
	  corrected the return value of ast_bridge_call. However, the
	  implementation still was not 100% correct. Now it is.

	* main/features.c: if (!(x) == 0) is the same as if (x).

	* main/features.c: The logic surrounding the return value of
	  ast_spawn_extension within ast_bridge_call was reversed. This
	  problem was observed when a blind transfer placed from the callee
	  channel of a test call failed. While the problem I am solving
	  here is exactly the same as what was reported in issue #13584,
	  the difference is that this fix I am applying is trunk-only.
	  Issue #13584 was reported against the 1.4 branch, and my tests of
	  1.4's blind transfers appear to work fine.

2008-10-01  Russell Bryant <russell@digium.com>

	* Asterisk 1.6.0 released.

2008-09-09  Russell Bryant <russell@digium.com>

	* Asterisk 1.6.0-rc6 released.

2008-09-09 15:44 +0000 [r142065]  Russell Bryant <russell@digium.com>

	* /, main/features.c: Merged revisions 142064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r142064 | russell | 2008-09-09 10:44:10 -0500 (Tue, 09 Sep 2008)
	  | 13 lines Merged revisions 142063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r142063 | russell | 2008-09-09 10:40:24 -0500 (Tue, 09 Sep 2008)
	  | 5 lines Ensure that the stored CDR reference is still valid
	  after the bridge before poking at it. Also, keep the channel
	  locked while messing with this CDR. (fixes crashes reported in
	  issue #13409) ........ ................

2008-09-09 12:34 +0000 [r141996-141999]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_oss.c, /: Merged revisions 141995 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r141995 |
	  mmichelson | 2008-09-09 05:20:58 -0500 (Tue, 09 Sep 2008) | 8
	  lines Fix a memory leak in chan_oss (closes issue #13311)
	  Reported by: eliel Patches: chan_oss.c.patch uploaded by eliel
	  (license 64) ........

2008-09-09 01:49 +0000 [r141950]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 141949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r141949 |
	  russell | 2008-09-08 20:47:56 -0500 (Mon, 08 Sep 2008) | 9 lines
	  Modify ast_answer() to not hold the channel lock while calling
	  ast_safe_sleep() or when calling ast_waitfor(). These are
	  inappropriate times to hold the channel lock. This is what has
	  caused "could not get the channel lock" messages from chan_sip
	  and has likely caused a negative impact on performance results of
	  SIP in Asterisk 1.6. Thanks to file for pointing out this section
	  of code. (closes issue #13287) (closes issue #13115) ........

2008-09-08 21:07 +0000 [r141808]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 141807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r141807 | russell | 2008-09-08 16:05:01 -0500 (Mon, 08 Sep 2008)
	  | 15 lines Merged revisions 141806 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141806 | russell | 2008-09-08 16:02:36 -0500 (Mon, 08 Sep 2008)
	  | 7 lines When doing an async goto, detect if the channel is
	  already in the middle of a masquerade. This can happen when
	  chan_local is trying to optimize itself out. If this happens,
	  fail the async goto instead of bursting into flames. (closes
	  issue #13435) Reported by: geoff2010 ........ ................

2008-09-08  Russell Bryant <russell@digium.com>

	* Asterisk 1.6.0-rc5 released.

2008-09-08 20:19 +0000 [r141746]  Jason Parker <jparker@digium.com>

	* Makefile, /, redhat (removed): Merged revisions 141745 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r141745 | qwell | 2008-09-08 15:18:17 -0500
	  (Mon, 08 Sep 2008) | 16 lines Merged revisions 141741 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141741 | qwell | 2008-09-08 15:15:42 -0500 (Mon, 08 Sep 2008) |
	  8 lines Remove RPM package targets from Makefile (and all
	  associated parts). This has never worked in 1.4, and we decided
	  that it makes no sense to be done here. There are many distros
	  out there that already have "proper" spec files that can be
	  (re)used. Closes issue #13113 Closes issue #10950 Closes issue
	  #10952 ........ ................

2008-09-08 17:14 +0000 [r141683]  Sean Bright <sean.bright@gmail.com>

	* /, build_tools/make_buildopts_h: Merged revisions 141682 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r141682 | seanbright | 2008-09-08 13:13:04 -0400 (Mon,
	  08 Sep 2008) | 9 lines Quote the arguments to grep so that sh on
	  various platforms doesn't choke on the special characters (like
	  ^). (closes issue #13417) Reported by: dougm Patches:
	  13417.make_buildopts_h.patch uploaded by seanbright (license 71)
	  Tested by: dougm ........

2008-09-06 20:21 +0000 [r141567]  Steve Murphy <murf@digium.com>

	* /, channels/chan_sip.c: Merged revisions 141566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r141566 | murf | 2008-09-06 14:19:50 -0600 (Sat, 06 Sep 2008) | 9
	  lines Merged revisions 141565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141565 | murf | 2008-09-06 14:13:16 -0600 (Sat, 06 Sep 2008) | 1
	  line This fix comes from Joshua Colp The Brilliant, who, given
	  the trace, came up with a solution. This will most likely will
	  close 13235 and 13409. I'll wait till Monday to verify, and then
	  close these bugs. ........ ................

2008-09-06 15:40 +0000 [r141505-141508]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 141504 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r141504 | tilghman | 2008-09-06 10:26:45 -0500 (Sat, 06 Sep 2008)
	  | 12 lines Merged revisions 141503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141503 | tilghman | 2008-09-06 10:23:42 -0500 (Sat, 06 Sep 2008)
	  | 4 lines Reverting behavior change (AGI should not exit non-zero
	  on SUCCESS) (closes issue #13434) Reported by: francesco_r
	  ........ ................

2008-09-05 22:06 +0000 [r141368-141426]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 141367 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r141367 | mmichelson | 2008-09-05 16:12:09 -0500
	  (Fri, 05 Sep 2008) | 15 lines Merged revisions 141366 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141366 | mmichelson | 2008-09-05 16:10:32 -0500 (Fri, 05 Sep
	  2008) | 7 lines Agent's should not try to call a channel's
	  indicate callback if the channel has been hung up. It will likely
	  crash otherwise ABE-1159 ........ ................

2008-09-05 14:24 +0000 [r141116-141158]  Steve Murphy <murf@digium.com>

	* main/channel.c, /: Merged revisions 141157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r141157 | murf | 2008-09-05 08:18:43 -0600 (Fri, 05 Sep 2008) | 9
	  lines Merged revisions 141156 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141156 | murf | 2008-09-05 08:15:43 -0600 (Fri, 05 Sep 2008) | 1
	  line A small change to prevent double-posting of CDR's; thanks to
	  Daniel Ferrer for bringing it to our attention ........
	  ................

	* pbx/ael/ael-test/ref.ael-vtest25 (added), /,
	  pbx/ael/ael-test/ael-vtest25/extensions.ael,
	  pbx/ael/ael-test/ael-vtest25 (added), res/ael/ael_lex.c,
	  pbx/ael/ael-test/ref.ael-test6, res/ael/ael.flex: Merged
	  revisions 141115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r141115 | murf | 2008-09-04 17:31:41 -0600 (Thu, 04 Sep 2008) |
	  78 lines Merged revisions 141094 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141094 | murf | 2008-09-04 17:15:07 -0600 (Thu, 04 Sep 2008) |
	  70 lines (closes issue #13357) Reported by: pj Tested by: murf
	  (closes issue #13416) Reported by: yarns Tested by: murf If you
	  find this message overly verbose, relax, it's probably not meant
	  for you. This message is meant for probably only two people in
	  the whole world: me, or the poor schnook that has to maintain
	  this code because I'm either dead or unavailable at the moment.
	  This fix solves two reports, both having to do with embedding a
	  function call in a ${} construct. It was tricky because the
	  funccall syntax has parenthesis () in it. And up till now, the
	  'word' token in the flex stuff didn't allow that, because it
	  would tend to steal the LP and RP tokens. To be truthful, the
	  "word" token was the trickiest, most unstable thing in the whole
	  lexer. I was lucky it made this long without complaints. I had to
	  choose every character in the pattern with extreme care, and I
	  knew that someday I'd have to revisit it. Well, the day has come.
	  So, my brilliant idea (and I'm being modest), was to use the
	  surrounding ${} construct to make a state machine and capture
	  everything in it, no matter what it contains. But, I have to now
	  treat the word token like I did with comments, in that I turn the
	  whole thing into a state-machine sort of spec, with new contexts
	  "curlystate", "wordstate", and "brackstate". Wait a minute,
	  "brackstate"? Yes, well, it didn't take very many regression
	  tests to point out if I do this for ${} constructs, I also have
	  to do it with the $[] constructs, too. I had to create a separate
	  pcbstack2 and pcbstack3 because these constructs can occur inside
	  macro argument lists, and when we have two state machines
	  operating on the same structures we'd get problems otherwise. I
	  guess I could have stopped at pcbstack2 and had the brackstate
	  stuff share it, but it doesn't hurt to be safe. So, the pcbpush
	  and pcbpop routines also now have versions for "2" and "3". I had
	  to add the {KEYWORD} construct to the initial pattern for "word",
	  because previously word would match stuff like "default7",
	  because it was a longer match than the keyword "default". But,
	  not any more, because the word pattern only matches only one or
	  two characters now, and it will always lose. So, I made it the
	  winner again by making an optional match on any of the keywords
	  before it's normal pattern. I added another regression test to
	  make sure we don't lose this in future edits, and had to fix just
	  one regression, where it no longer reports a 'cascaded' error,
	  which I guess is a plus. I've given some thought as to whether to
	  apply these fixes to 1.4 and the 1.6.x releases, vs trunk; I
	  decided to put it in 1.4 because one of the bug reports was
	  against 1.4; and it is unexpected that AEL cannot handle this
	  situation. It actually reduced the amount of useless "cascade"
	  error messages that appeared in the regressions (by one line,
	  ehhem). There is a possible side-effect in that it does now do
	  more careful checking of what's in those ${} constructs, as far
	  as matching parens, and brackets are concerned. Some users may
	  find a an insidious problem and correct it this way. This should
	  be exceedingly rare, I hope. ........ ................

2008-09-04 18:35 +0000 [r141086]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c, res/res_agi.c: Merged revisions 141039 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r141039 | jpeeler | 2008-09-04 12:27:56 -0500
	  (Thu, 04 Sep 2008) | 15 lines Merged revisions 141028 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r141028 | jpeeler | 2008-09-04 12:00:29 -0500 (Thu, 04 Sep 2008)
	  | 7 lines (closes issue #11979) Fixes multiple parking problems:
	  Crash when executing a park on an extension dialed by AGI due to
	  not returning the proper return code. Crash when using a builtin
	  feature that was a subset of a enabled dynamic feature. Crash due
	  to always hanging up the peer despite the fact that the peer was
	  supposed to be parked. ........ ................

2008-09-03 20:18 +0000 [r140976]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 140975 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r140975 |
	  mmichelson | 2008-09-03 15:16:12 -0500 (Wed, 03 Sep 2008) | 4
	  lines Fix some locking order issues in app_queue. This was
	  brought up by atis on IRC a while ago. ........

2008-09-03  Russell Bryant <russell@digium.com>

	* Asterisk 1.6.0-rc4 released.

2008-09-03 14:17 +0000 [r140825-140827]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 140749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r140749 | murf | 2008-09-02 17:44:04 -0600 (Tue, 02 Sep 2008) |
	  11 lines Merged revisions 140747 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140747 | murf | 2008-09-02 17:36:56 -0600 (Tue, 02 Sep 2008) | 1
	  line I am turning the warnings generated in ast_cdr_free and
	  post_cdr into verbose level 2 messages. Really, they matter
	  little to end users. You either get the CDR's you wanted, or you
	  don't, and it is a bug. For trunk, I am going one step further.
	  These messages were pretty worthless even for debug, so I'm
	  completely removing them. ........ ................

	* main/channel.c, /: Merged revisions 140692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r140692 | murf | 2008-09-02 16:55:12 -0600 (Tue, 02 Sep 2008) |
	  13 lines Merged revisions 140690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140690 | murf | 2008-09-02 16:40:13 -0600 (Tue, 02 Sep 2008) | 1
	  line After reconsidering, with respect to 13409, ast_cdr_detach
	  should be OK, better in fact, than ast_cdr_free, which generates
	  lots of useless warnings that will undoubtably generate
	  complaints. Hmmm. It doesn't hush the useless warnings, but it
	  does allow control of posting via the detach and post routines,
	  for those possible situations, where you'd want to post
	  single-channel cdrs. ........ ................

	* main/channel.c, main/pbx.c, /: Merged revisions 140691 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r140691 | murf | 2008-09-02 16:50:59 -0600 (Tue,
	  02 Sep 2008) | 22 lines Merged revisions 140670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140670 | murf | 2008-09-02 16:15:57 -0600 (Tue, 02 Sep 2008) |
	  14 lines (closes issue #13409) Reported by: tomaso Patches:
	  asterisk-1.6.0-rc2-cdrmemleak.patch uploaded by tomaso (license
	  564) I basically spent the day, verifying that this patch solves
	  the problem, and doesn't hurt in non-problem cases. Why valgrind
	  did not plainly reveal this leak absolutely mystifies and stuns
	  me. Many, many thanks to tomaso for finding and providing the
	  fix. ........ ................

2008-09-03 13:27 +0000 [r140818]  Russell Bryant <russell@digium.com>

	* main/poll.c, /: Merged revisions 140817 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r140817 | russell | 2008-09-03 08:26:43 -0500 (Wed, 03 Sep 2008)
	  | 12 lines Merged revisions 140816 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140816 | russell | 2008-09-03 08:24:35 -0500 (Wed, 03 Sep 2008)
	  | 4 lines Don't freak out if the poll emulation receives NULL for
	  the pollfds array (closes issue #13307) Reported by: jcovert
	  ........ ................

2008-09-02 18:17 +0000 [r140607]  Sean Bright <sean.bright@gmail.com>

	* /, channels/chan_iax2.c: Merged revisions 140606 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r140606 | seanbright | 2008-09-02 14:15:54 -0400
	  (Tue, 02 Sep 2008) | 16 lines Merged revisions 140605 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140605 | seanbright | 2008-09-02 14:14:57 -0400 (Tue, 02 Sep
	  2008) | 8 lines Make sure to use the correct length of the
	  mohinterpret and mohsuggest buffers when copying configuration
	  values. (closes issue #13336) Reported by:
	  decryptus_proformatique Patches:
	  chan_iax2_mohinterpret_mohsuggest_general_settings.patch uploaded
	  by decryptus (license 555) ........ ................

2008-09-02 15:12 +0000 [r140564-140567]  Russell Bryant <russell@digium.com>

	* apps/app_jack.c, /, codecs/codec_resample.c: Merged revisions
	  140566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r140566 |
	  russell | 2008-09-02 10:11:53 -0500 (Tue, 02 Sep 2008) | 2 lines
	  Update instructions for getting libresample ........

2008-08-27 20:15 +0000 [r140302-140304]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Revert commit 140302. Should not be merging
	  changes like that into a release-candidate branch

	* channels/chan_sip.c: Merged revisions 140301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r140301 | mmichelson | 2008-08-27 15:11:22 -0500 (Wed, 27 Aug
	  2008) | 19 lines Merged revisions 140299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r140299 | mmichelson | 2008-08-27 14:49:20 -0500 (Wed, 27 Aug
	  2008) | 11 lines Fix tag checking in get_sip_pvt_byid_locked when
	  in pedantic mode. The problem was that the wrong tags would be
	  compared depending on the direction of the call. (closes issue
	  #13353) Reported by: flefoll Patches:
	  chan_sip.c.br14.139015.patch-refer-pedantic uploaded by flefoll
	  (license 244) ........ ................

2008-08-26 18:12 +0000 [r140170]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 140169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r140169 |
	  russell | 2008-08-26 13:11:49 -0500 (Tue, 26 Aug 2008) | 4 lines
	  Fix building menuselect-tree with PRINT_DIR set. We _must_ use
	  the --quiet flag here, or else some arbitrary text will end up in
	  the resulting menuselect-tree file and things will explode.
	  ........

2008-08-25 21:33 +0000 [r139918]  Sean Bright <sean.bright@gmail.com>

	* build_tools/get_moduleinfo, /, build_tools/get_makeopts: Merged
	  revisions 139915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139915 | seanbright | 2008-08-25 17:32:10 -0400 (Mon, 25 Aug
	  2008) | 17 lines Merged revisions 139909 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139909 | seanbright | 2008-08-25 17:31:03 -0400 (Mon, 25 Aug
	  2008) | 9 lines Some versions of awk (nawk, for example) don't
	  like empty regular expressions so be slightly more verbose.
	  (closes issue #13374) Reported by: dougm Patches: 13374.diff
	  uploaded by seanbright (license 71) Tested by: dougm ........
	  ................

2008-08-25 21:05 +0000 [r139872]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 139870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139870 | twilson | 2008-08-25 15:59:58 -0500 (Mon, 25 Aug 2008)
	  | 10 lines Merged revisions 139869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139869 | twilson | 2008-08-25 15:46:10 -0500 (Mon, 25 Aug 2008)
	  | 2 lines Make SIPADDHEADER() propagate indefinitely ........
	  ................

2008-08-25 16:00 +0000 [r139774]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /, main/features.c: Merged revisions 139770 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r139770 | murf | 2008-08-25 09:54:18 -0600 (Mon,
	  25 Aug 2008) | 17 lines Merged revisions 139764 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139764 | murf | 2008-08-25 09:33:14 -0600 (Mon, 25 Aug 2008) | 9
	  lines This patch reverts the changes made via 139347, and 139635,
	  as users are seeing adverse difference. I will un-close 13251.
	  Back to the drawing board/ concept/ beginning/ whatever! ........
	  ................

2008-08-24 16:30 +0000 [r139705-139708]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 139707 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r139707 |
	  tilghman | 2008-08-24 11:26:48 -0500 (Sun, 24 Aug 2008) | 2 lines
	  Memory leak ........

2008-08-22 22:35 +0000 [r139628-139671]  Steve Murphy <murf@digium.com>

	* /, main/features.c: Merged revisions 139662 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139662 | murf | 2008-08-22 16:32:35 -0600 (Fri, 22 Aug 2008) |
	  14 lines Merged revisions 139635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139635 | murf | 2008-08-22 16:24:02 -0600 (Fri, 22 Aug 2008) | 6
	  lines I found some problems with the code I committed earlier,
	  when I merged them into trunk, so I'm coming back to clean up.
	  And, in the process, I found an error in the code I added to
	  trunk and 1.6.x, that I'll fix using this patch also. ........
	  ................

	* apps/app_dial.c, main/pbx.c, /, main/features.c: Merged revisions
	  139627 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139627 | murf | 2008-08-22 16:03:13 -0600 (Fri, 22 Aug 2008) |
	  59 lines Merged revisions 139347 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139347 | murf | 2008-08-21 17:03:50 -0600 (Thu, 21 Aug 2008) |
	  47 lines (closes issue #13251) Reported by: sergee Tested by:
	  murf THis is a bold move for a static release fix, but I wouldn't
	  have made it if I didn't feel confident (at least a *bit*
	  confident) that it wouldn't mess everyone up. The reasoning goes
	  something like this: 1. We simply cannot do anything with CDR's
	  at the current point (in pbx.c, after the __ast_pbx_run loop).
	  It's way too late to have any affect on the CDRs. The CDR is
	  already posted and gone, and the remnants have been cleared. 2. I
	  was very much afraid that moving the running of the 'h' extension
	  down into the bridge code (where it would be now practical to do
	  it), would result in a lot more calls to the 'h' exten, so I
	  implemented it as another exten under another name, but found, to
	  my pleasant surprise, that there was a 1:1 correspondence to the
	  running of the 'h' exten in the pbx_run loop, and the new spot at
	  the end of the bridge. So, I ifdef'd out the current 'h' loop,
	  and moved it into the bridge code. The only difference I can see
	  is the stuff about the AST_PBX_KEEPALIVE, and hopefully, if this
	  is still an important decision point, I can replicate it if there
	  are complaints. To be perfectly honest, the KEEPALIVE situation
	  is not totally clear to me, and how it relates to a post-bridge
	  situation is less clear. I suspect the users will point out
	  everything in total clarity if this steps on anyone's toes! 3. I
	  temporarily swap the bridge_cdr into the channel before running
	  the 'h' exten, which makes it possible for users to edit the cdr
	  before it goes out the door. And, of course, with the
	  endbeforehexten config var set, the users can also get at the
	  billsec/duration vals. After the h exten finishes, the cdr is
	  swapped back and processing continues as normal. Please, all who
	  deal with CDR's, please test this version of Asterisk, and file
	  bug reports as appropriate! ........ I also made a little fix to
	  the app_dial's 'e' option, that is related to my updates.
	  ................

2008-08-22 20:21 +0000 [r139458-139564]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/threadstorage.h, /: Merged revisions 139554 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r139554 | mmichelson | 2008-08-22 14:45:41 -0500
	  (Fri, 22 Aug 2008) | 16 lines Merged revisions 139553 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139553 | mmichelson | 2008-08-22 14:45:19 -0500 (Fri, 22 Aug
	  2008) | 8 lines Fix compilation when DEBUG_THREAD_LOCALS is
	  selected (closes issue #13298) Reported by: snuffy Patches:
	  bug13298_20080822.diff uploaded by snuffy (license 35) ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 139469 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r139469 | mmichelson | 2008-08-22 12:25:12 -0500
	  (Fri, 22 Aug 2008) | 11 lines Merged revisions 139466 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139466 | mmichelson | 2008-08-22 12:24:47 -0500 (Fri, 22 Aug
	  2008) | 3 lines Fix the build. Thanks, mvanbaak! ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 139457 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r139457 | mmichelson | 2008-08-22 11:58:21 -0500
	  (Fri, 22 Aug 2008) | 15 lines Merged revisions 139456 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139456 | mmichelson | 2008-08-22 11:57:38 -0500 (Fri, 22 Aug
	  2008) | 7 lines Prevent a deadlock in chan_iax2 resulting from
	  incorrect locking order between iax2_pvt and ast_channel
	  structures. AST-13 ........ ................

2008-08-21 23:46 +0000 [r139400]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 139391 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r139391 | jpeeler | 2008-08-21 18:41:50 -0500
	  (Thu, 21 Aug 2008) | 11 lines Merged revisions 139387 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139387 | jpeeler | 2008-08-21 18:39:31 -0500 (Thu, 21 Aug 2008)
	  | 3 lines Fixes loop that could possibly never exit in the event
	  of a channel never being able to be opened or specify after a
	  restart. (closes issue #11017) ........ ................

2008-08-21 10:02 +0000 [r139282]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 139281 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r139281 | phsultan | 2008-08-21 11:55:31 +0200 (Thu, 21 Aug 2008)
	  | 5 lines Fix two memory leaks in chan_gtalk, thanks Eliel!
	  (closes issue #13310) Reported by: eliel Patches:
	  chan_gtalk.c.patch uploaded by eliel (license 64) ........

2008-08-20  Kevin P. Fleming <kpfleming@digium.com>

	* Asterisk 1.6.0-rc3 released.

2008-08-20 22:17 +0000 [r139216]  Russell Bryant <russell@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 139215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139215 | russell | 2008-08-20 17:16:36 -0500 (Wed, 20 Aug 2008)
	  | 19 lines Merged revisions 139213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139213 | russell | 2008-08-20 17:14:35 -0500 (Wed, 20 Aug 2008)
	  | 11 lines Fix a crash in the ChanSpy application. The issue here
	  is that if you call ChanSpy and specify a spy group, and sit in
	  the application long enough looping through the channel list, you
	  will eventually run out of stack space and the application with
	  exit with a seg fault. The backtrace was always inside of a
	  harmless snprintf() call, so it was tricky to track down.
	  However, it turned out that the call to snprintf() was just the
	  biggest stack consumer in this code path, so it would always be
	  the first one to hit the boundary. (closes issue #13338) Reported
	  by: ruddy ........ ................

2008-08-20 20:12 +0000 [r139155]  Shaun Ruffell <sruffell@digium.com>

	* codecs/codec_dahdi.c: Fix bug where the samples were not accurate
	  when in G723 mode, which would cause the timestamp field of the
	  RTP header to be invalid.

2008-08-20 17:30 +0000 [r139104]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 139083 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139083 | murf | 2008-08-20 11:25:07 -0600 (Wed, 20 Aug 2008) |
	  20 lines Merged revisions 139074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139074 | murf | 2008-08-20 11:14:55 -0600 (Wed, 20 Aug 2008) |
	  12 lines (closes issue #13263) Reported by: brainy Tested by:
	  murf The specialized reset routine is tromping on the flags field
	  of the CDR. I made a change to not reset the DISABLED bit. This
	  should get rid of this problem. ........ ................

2008-08-20 15:39 +0000 [r138889-139017]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 139016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r139016 | mmichelson | 2008-08-20 10:38:47 -0500 (Wed, 20 Aug
	  2008) | 14 lines Merged revisions 139015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r139015 | mmichelson | 2008-08-20 10:37:56 -0500 (Wed, 20 Aug
	  2008) | 6 lines sip_read should properly handle a NULL return
	  from sip_rtp_read. (closes issue #13257) Reported by: travishein
	  ........ ................

	* apps/app_chanspy.c: Manually add revision 138887 from trunk to
	  the 1.6.0 branch. I had misunderstood the policy for when to
	  merge to 1.6.0 since it moved to rc status.

2008-08-19 16:38 +0000 [r138846-138847]  Steve Murphy <murf@digium.com>

	* utils/conf2ael.c, /, res/ael/ael.tab.c, res/ael/ael.y,
	  res/ael/ael.tab.h, utils/ael_main.c: Merged revisions 138845 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r138845 | murf | 2008-08-19 10:31:24 -0600 (Tue, 19 Aug
	  2008) | 1 line Oops. put a decl in a generated file. My bad, but
	  fixed now. ........

	* main/pbx.c, /, res/ael/ael.tab.c, res/ael/ael.y,
	  res/ael/ael.tab.h: Merged revisions 138815 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138815 |
	  murf | 2008-08-19 09:59:12 -0600 (Tue, 19 Aug 2008) | 19 lines
	  These changes are in regards to bug 13249, where users are being
	  surprised by the changes made to the Set app in trunk/1.6.x, as
	  they come from the 1.4 world. They are only bitten if they write
	  their AEL dialplan in the 1.4 world, and then carry it over to a
	  trunk/1.6.x installation where a "make samples" was executed, or
	  where they hand-edited the asterisk.conf file and added the
	  [compat] category with app_set = 1.6 (or higher). (this commit
	  does not totally solve 13249, at least not yet) The change
	  involves issueing a single warning while the AEL file is loading,
	  if: 1. app_set is present in the config file, and set to 1.6 or
	  higher. 2. there are double quotes in an assignment statement (eg
	  x = "hi there";) 3. the warning was not already issued. The
	  standalone app, aelparse, does not (yet) issue this warning. I'd
	  have to have it read in the asterisk.conf file, and that's a bit
	  of hassle. I'll add it if users request it, tho. ........

2008-08-19 00:15 +0000 [r138776-138781]  Sean Bright <sean.bright@gmail.com>

	* /, channels/chan_sip.c: Merged revisions 138778-138780 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r138778 | seanbright | 2008-08-18 20:08:27 -0400 (Mon,
	  18 Aug 2008) | 1 line While we're at it, make this machine
	  parseable too. ........ r138779 | seanbright | 2008-08-18
	  20:09:38 -0400 (Mon, 18 Aug 2008) | 1 line And remove code we
	  don't need anymore. ........ r138780 | seanbright | 2008-08-18
	  20:10:56 -0400 (Mon, 18 Aug 2008) | 1 line Let it compile now,
	  too (woops) ........

	* /, channels/chan_sip.c: Merged revisions 138775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138775 |
	  seanbright | 2008-08-18 19:42:36 -0400 (Mon, 18 Aug 2008) | 3
	  lines Change event header to RegistrationTime to be more
	  consistent (and avoid breaking existing frameworks). Pointed out
	  by Laureano on #asterisk-dev. ........

2008-08-18 20:23 +0000 [r138688-138695]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 138687 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r138687 | mmichelson | 2008-08-18 15:04:10 -0500 (Mon, 18 Aug
	  2008) | 18 lines Merged revisions 138685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r138685 | mmichelson | 2008-08-18 15:01:14 -0500 (Mon, 18 Aug
	  2008) | 10 lines Change the inequalities used in app_queue with
	  regards to timeouts from being strict to non-strict for more
	  accuracy. (closes issue #13239) Reported by: atis Patches:
	  app_queue_timeouts_v2.patch uploaded by atis (license 242)
	  ........ ................

2008-08-18 15:54 +0000 [r138632]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 138631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138631 |
	  qwell | 2008-08-18 10:54:07 -0500 (Mon, 18 Aug 2008) | 1 line
	  Remove option that isn't valid here. ........

2008-08-18 02:14 +0000 [r138519]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 138518 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r138518 | jpeeler | 2008-08-17 21:13:04 -0500 (Sun, 17 Aug 2008)
	  | 1 line add missing define for SS7 in dahdi_restart ........

2008-08-17 14:14 +0000 [r138443-138483]  Sean Bright <sean.bright@gmail.com>

	* /, main/features.c: Merged revisions 138482 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138482 |
	  seanbright | 2008-08-17 10:12:11 -0400 (Sun, 17 Aug 2008) | 6
	  lines Move Uniqueid to the end of the event for those that rely
	  on the position of the name/value pairs, pointed out by
	  snuffy-home on #asterisk-commits. For those of you who rely on
	  the position of name/value pairs in manager events... stop...
	  that is why associative arrays were invented. ........

	* /, main/features.c: Merged revisions 138479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138479 |
	  seanbright | 2008-08-17 09:51:08 -0400 (Sun, 17 Aug 2008) | 7
	  lines Add Uniqueid header to ParkedCall manager event. (closes
	  issue #13323) Reported by: srt Patches:
	  13323_unique_id_for_parkedcalls_event.diff uploaded by srt
	  (license 378) ........

	* main/rtp.c, /: Merged revisions 138476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138476 |
	  seanbright | 2008-08-17 09:40:36 -0400 (Sun, 17 Aug 2008) | 7
	  lines Add missing colons to RTCPReceived and RTCPSent manager
	  events. (closes issue #13319) Reported by: srt Patches:
	  13319_rtcp_manager_event_headers.diff uploaded by srt (license
	  378) ........

	* /, channels/chan_iax2.c: Merged revisions 138473 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r138473 | seanbright | 2008-08-17 09:31:54 -0400 (Sun, 17 Aug
	  2008) | 7 lines Fix the output of the JitterBufStats manager
	  event. (closes issue #13324) Reported by: srt Patches:
	  13324_missing_nl_in_jitterbufstats_event_2.diff uploaded by srt
	  (license 378) ........

	* configs/cdr_tds.conf.sample, /: Merged revisions 138442 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r138442 | seanbright | 2008-08-16 12:40:43 -0400 (Sat,
	  16 Aug 2008) | 4 lines Since it's introduction in revision 3497,
	  cdr_tds has *never* read the port configuration option from
	  cdr_tds.conf. So go ahead and remove it from the sample config.
	  ........

2008-08-16 13:07 +0000 [r138410-138413]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 138412 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r138412 | tilghman | 2008-08-16 08:07:08 -0500 (Sat, 16 Aug 2008)
	  | 2 lines Fix compilation warnings (found with dev-mode) ........

2008-08-16 01:14 +0000 [r138333-138362]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 138361 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r138361 | jpeeler | 2008-08-15 20:13:26 -0500
	  (Fri, 15 Aug 2008) | 9 lines Merged revisions 138360 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r138360 | jpeeler | 2008-08-15 20:12:18 -0500 (Fri, 15
	  Aug 2008) | 1 line fixes use count to properly decrement if an
	  active dahdi channel is destroyed allowing module to be unloaded
	  ........ ................

	* channels/chan_dahdi.c, /: Merged revisions 138311 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r138311 | jpeeler | 2008-08-15 18:46:09 -0500
	  (Fri, 15 Aug 2008) | 20 lines Merged revisions
	  138119,138151,138238 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r138119 | jpeeler | 2008-08-15 14:21:51 -0500 (Fri, 15 Aug 2008)
	  | 4 lines Fixes the dahdi restart functionality. Dahdi restart
	  allows one to restart all DAHDI channels, even if they are
	  currently in use. This is different from unloading and then
	  loading the module since unloading requires the use count to be
	  zero. Reloading the module is different in that the signalling is
	  not changed from what it was originally configured. Also, this
	  fixes not closing all the file descriptors for D-channels upon
	  module unload (which would prevent loading the module
	  afterwards). (closes issue #11017) ........ r138151 | jpeeler |
	  2008-08-15 14:41:29 -0500 (Fri, 15 Aug 2008) | 1 line declared
	  static mutexes using AST_MUTEX_DEFINE_STATIC macro ........
	  r138238 | jpeeler | 2008-08-15 16:28:26 -0500 (Fri, 15 Aug 2008)
	  | 1 line initialize condition variable ss_thread_complete using
	  ast_cond_init ........ ................

2008-08-15 23:03 +0000 [r138207-138262]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  138260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r138260 | tilghman | 2008-08-15 17:54:57 -0500 (Fri, 15 Aug 2008)
	  | 16 lines Merged revisions 138258 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r138258 | tilghman | 2008-08-15 17:33:42 -0500 (Fri, 15 Aug 2008)
	  | 8 lines More fixes for realtime peers. (closes issue #12921)
	  Reported by: Nuitari Patches: 20080804__bug12921.diff.txt
	  uploaded by Corydon76 (license 14) 20080815__bug12921.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: Corydon76 ........
	  ................

	* configs/extensions.conf.sample, main/pbx.c, /: Merged revisions
	  138206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r138206 |
	  tilghman | 2008-08-15 15:35:24 -0500 (Fri, 15 Aug 2008) | 4 lines
	  Remove deprecated syntax from sample config file (closes issue
	  #13314) Reported by: kue ........

2008-08-15 20:20 +0000 [r138156-138157]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c: rename all zfd instances in chan_dahdi to
	  dfd to match 1.4 (left over from DAHDI transition)

2008-08-15 15:12 +0000 [r138029]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 138028 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r138028 | russell | 2008-08-15 10:09:46 -0500 (Fri, 15 Aug 2008)
	  | 17 lines Merged revisions 138027 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r138027 | russell | 2008-08-15 10:07:16 -0500 (Fri, 15 Aug 2008)
	  | 9 lines Ensure that when a hangup occurs in autoservice, that a
	  hangup frame gets properly deferred to be read from the channel
	  owner when it gets taken out of autoservice. (closes issue
	  #12874) Reported by: dimas Patches: v1-12874.patch uploaded by
	  dimas (license 88) ........ ................

2008-08-15 15:04 +0000 [r138025]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 138024 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r138024 | tilghman | 2008-08-15 10:03:32 -0500
	  (Fri, 15 Aug 2008) | 16 lines Merged revisions 138023 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r138023 | tilghman | 2008-08-15 09:51:12 -0500 (Fri, 15 Aug 2008)
	  | 8 lines Additional check for more string specifiers than
	  arguments. (closes issue #13299) Reported by: adomjan Patches:
	  20080813__bug13299.diff.txt uploaded by Corydon76 (license 14)
	  func_strings.c-sprintf.patch uploaded by adomjan (license 487)
	  Tested by: adomjan ........ ................

2008-08-14 22:43 +0000 [r137988]  Russell Bryant <russell@digium.com>

	* /, doc/tex/Makefile: Merged revisions 137987 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137987 |
	  russell | 2008-08-14 17:43:15 -0500 (Thu, 14 Aug 2008) | 2 lines
	  Fix a bashism that causes an error when trying to build the pdf
	  on ubuntu ........

2008-08-14 18:48 +0000 [r137934]  Sean Bright <sean.bright@gmail.com>

	* cdr/cdr_sqlite3_custom.c, /: Merged revisions 137933 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r137933 | seanbright | 2008-08-14 14:47:28 -0400 (Thu, 14 Aug
	  2008) | 8 lines Fix memory leak in cdr_sqlite3_custom. (closes
	  issue #13304) Reported by: eliel Patches: sqlite.patch uploaded
	  by eliel (license 64) (Slightly modified by me) ........

2008-08-14 17:01 +0000 [r137849-137852]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 137848 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r137848 | tilghman | 2008-08-14 11:52:43 -0500
	  (Thu, 14 Aug 2008) | 17 lines Merged revisions 137847 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r137847 | tilghman | 2008-08-14 11:47:30 -0500 (Thu, 14 Aug 2008)
	  | 9 lines When creating the secondary subchannel name, it is
	  necessary to compare to the existing channel name without the
	  "Zap/" or "DAHDI/" prefix, since our test string is also without
	  that prefix. (closes issue #13027) Reported by: dferrer Patches:
	  chan_zap-1.4.21.1_fix2.patch uploaded by dferrer (license 525)
	  (Slightly modified by me, to compensate for both names) ........
	  ................

2008-08-14  Jason Parker <jparker@digium.com>

	* Asterisk 1.6.0-rc2 released.

2008-08-14 15:37 +0000 [r137814]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 137812 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137812 |
	  qwell | 2008-08-14 10:32:16 -0500 (Thu, 14 Aug 2008) | 8 lines
	  Make sure we set the socket port, so we don't try to use <ip
	  address>:0. (closes issue #13255) Reported by: falves11 Patches:
	  13255-socketport.diff uploaded by qwell (license 4) Tested by:
	  falves11 ........

2008-08-14 15:20 +0000 [r137783]  Russell Bryant <russell@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 137732 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r137732 | russell | 2008-08-14 09:15:50 -0500
	  (Thu, 14 Aug 2008) | 12 lines Merged revisions 137731 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r137731 | russell | 2008-08-14 09:05:23 -0500 (Thu, 14 Aug 2008)
	  | 4 lines Comments in this config file were aligned only if your
	  tab size was set to 8. So, convert tabs to spaces so that things
	  should be aligned regardless of what tab size you use in your
	  editor. ........ ................

2008-08-14 15:05 +0000 [r137781]  Sean Bright <sean.bright@gmail.com>

	* cdr/cdr_tds.c, /: Merged revisions 137780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137780 |
	  seanbright | 2008-08-14 11:03:03 -0400 (Thu, 14 Aug 2008) | 8
	  lines If we detect that we are no longer connected, try to
	  reconnect a few times before giving up. This relies on the
	  timeout settings in the freetds.conf file and, unfortunately, on
	  a recent version of FreeTDS (0.82 or newer). I either need to
	  change the current execs to be non-blocking (which I do not want
	  to do) or we have to force people to run with the latest and
	  greatest of FreeTDS. I'm on the fence... ........

2008-08-14 02:04 +0000 [r137681]  Kevin P. Fleming <kpfleming@digium.com>

	* /, Zaptel-to-DAHDI.txt: Merged revisions 137680 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r137680 | kpfleming | 2008-08-13 21:03:47 -0500 (Wed, 13 Aug
	  2008) | 9 lines Merged revisions 137679 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r137679 | kpfleming | 2008-08-13 21:03:04 -0500 (Wed, 13 Aug
	  2008) | 1 line forgot one module name that changed ........
	  ................

2008-08-13  Kevin P. Fleming <kpfleming@digium.com>

	* Asterisk 1.6.0-rc1 released.

2008-08-13 23:00 +0000 [r137631-137641]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 137640 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r137640 | kpfleming | 2008-08-13 18:00:37 -0500 (Wed, 13 Aug
	  2008) | 1 line make this script actually work ........

	* /, Zaptel-to-DAHDI.txt (added), UPGRADE.txt: Merged revisions
	  137627 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r137627 | kpfleming | 2008-08-13 17:33:32 -0500 (Wed, 13 Aug
	  2008) | 9 lines Merged revisions 137530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r137530 | kpfleming | 2008-08-13 15:46:19 -0500 (Wed, 13 Aug
	  2008) | 1 line add document describing what users will need to be
	  aware of when upgrading to this version and using DAHDI ........
	  ................

2008-08-13 21:09 +0000 [r137497-137533]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 137532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137532 |
	  qwell | 2008-08-13 16:08:58 -0500 (Wed, 13 Aug 2008) | 8 lines
	  Correctly end locally ended calls. (closes issue #12170) Reported
	  by: pj Patches: 20080702__issue12170_clear_pendinginvite.diff
	  uploaded by bbryant (license 36) Tested by: bbryant, pabelanger
	  ........

	* /, apps/app_fax.c: Merged revisions 137496 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137496 |
	  qwell | 2008-08-13 15:05:50 -0500 (Wed, 13 Aug 2008) | 6 lines
	  Add FAXMODE variable with what fax transport was used. (closes
	  issue #13252) Patches: v1-13252.patch uploaded by dimas (license
	  88) ........

2008-08-13 14:47 +0000 [r137350-137407]  Sean Bright <sean.bright@gmail.com>

	* /, doc/tex/cdrdriver.tex: Merged revisions 137406 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r137406 | seanbright | 2008-08-13 10:41:49 -0400
	  (Wed, 13 Aug 2008) | 9 lines Merged revisions 137405 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r137405 | seanbright | 2008-08-13 10:33:49 -0400 (Wed,
	  13 Aug 2008) | 1 line Update docs to reflect the change to
	  cdr_tds ........ ................

	* cdr/cdr_tds.c, /: Merged revisions 137403 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137403 |
	  seanbright | 2008-08-13 10:22:47 -0400 (Wed, 13 Aug 2008) | 1
	  line Use the ast_vasprintf macro instead of vasprintf directly.
	  ........

2008-08-12 19:48 +0000 [r137300-137302]  Russell Bryant <russell@digium.com>

	* doc/tex/asterisk.tex, /: Merged revisions 137301 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r137301 | russell | 2008-08-12 14:48:38 -0500 (Tue, 12 Aug 2008)
	  | 2 lines Grammar hax from Qwell ........

	* doc/tex/asterisk.tex, /: Merged revisions 137299 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r137299 | russell | 2008-08-12 14:40:35 -0500 (Tue, 12 Aug 2008)
	  | 3 lines Note that developer documentation belongs in doxygen,
	  and not integrated with the user manual stuff in doc/tex/.
	  ........

2008-08-11 16:15 +0000 [r137240]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 137239 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r137239 |
	  russell | 2008-08-11 11:14:29 -0500 (Mon, 11 Aug 2008) | 2 lines
	  Make PRINT_DIR work as advertised. ........

2008-08-11 14:31 +0000 [r137217]  Sean Bright <sean.bright@gmail.com>

	* cdr/cdr_tds.c, /, UPGRADE.txt: Merged revisions 137203 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r137203 | seanbright | 2008-08-11 10:25:15 -0400 (Mon,
	  11 Aug 2008) | 7 lines Log the userfield CDR variable like the
	  other CDR backends, assuming the column is actually there. If
	  it's not, we still log everything else as before. (closes issue
	  #13281) Reported by: falves11 ........

2008-08-11 00:27 +0000 [r137160]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, /: Merged revisions 137150 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r137150 | tilghman | 2008-08-10 19:25:28 -0500 (Sun, 10 Aug 2008)
	  | 13 lines Merged revisions 137138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r137138 | tilghman | 2008-08-10 19:20:38 -0500 (Sun, 10 Aug 2008)
	  | 5 lines Deallocate database connection handle on disconnect, as
	  we allocate another one on connect. (closes issue #13271)
	  Reported by: dveiga ........ ................

2008-08-09 15:27 +0000 [r136948]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/compat.h, include/asterisk/astobj2.h: Merged
	  revisions 136947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r136947 | tilghman | 2008-08-09 10:26:27 -0500 (Sat, 09 Aug 2008)
	  | 18 lines Merged revisions 136946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r136946 | tilghman | 2008-08-09 10:25:36 -0500
	  (Sat, 09 Aug 2008) | 10 lines Merged revisions 136945 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r136945 | tilghman | 2008-08-09 10:24:36 -0500 (Sat, 09 Aug 2008)
	  | 2 lines Regression fixes for Solaris ........ ................
	  ................

2008-08-09 01:16 +0000 [r136860]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 136859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136859 |
	  tilghman | 2008-08-08 20:15:38 -0500 (Fri, 08 Aug 2008) | 4 lines
	  Update documentation as to the behavior of AGI in 1.6.0 and
	  higher. Also, add an OOB message that answers the question of, if
	  AGI no longer shuts down the connection on hangup, how will
	  FastAGI know when to stop processing the call? ........

2008-08-08 15:33 +0000 [r136785]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 136784 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r136784 | mmichelson | 2008-08-08 10:31:31 -0500 (Fri, 08 Aug
	  2008) | 3 lines Fix compilation for ODBC voicemail ........

2008-08-08 06:45 +0000 [r136778]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-test8, pbx/ael/ael-test/ref.ael-test18,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-vtest13, res/ael/pval.c, /,
	  pbx/ael/ael-test/ref.ael-ntest10, include/asterisk/ael_structs.h,
	  utils/ael_main.c: Merged revisions 136746 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r136746 | murf | 2008-08-07 18:48:35 -0600 (Thu, 07 Aug 2008) |
	  40 lines Merged revisions 136726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r136726 | murf | 2008-08-07 18:15:34 -0600 (Thu, 07 Aug 2008) |
	  32 lines (closes issue #13236) Reported by: korihor Wow, this one
	  was a challenge! I regrouped and ran a new strategy for setting
	  the ~~MACRO~~ value; I set it once per extension, up near the
	  top. It is only set if there is a switch in the extension. So, I
	  had to put in a chunk of code to detect a switch in the pval
	  tree. I moved the code to insert the set of ~~exten~~ up to the
	  beginning of the gen_prios routine, instead of down in the switch
	  code. I learned that I have to push the detection of the switches
	  down into the code, so everywhere I create a new exten in
	  gen_prios, I make sure to pass onto it the values of the
	  mother_exten first, and the exten next. I had to add a couple
	  fields to the exten struct to accomplish this, in the
	  ael_structs.h file. The checked field makes it so we don't repeat
	  the switch search if it's been done. I also updated the
	  regressions. ........ ................

2008-08-08 02:36 +0000 [r136753]  Tilghman Lesher <tlesher@digium.com>

	* /: Merged revisions 136751 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136751 |
	  tilghman | 2008-08-07 21:34:17 -0500 (Thu, 07 Aug 2008) | 2 lines
	  Removing bad properties ........

2008-08-07 23:42 +0000 [r136719-136724]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: This is weird. Either SVN or vim tabbed a
	  bunch of functions over one level during a merge.

	* apps/app_voicemail.c, /: Merged revisions 136722 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r136722 | mmichelson | 2008-08-07 18:39:50 -0500 (Thu, 07 Aug
	  2008) | 3 lines Remove one last batch of debug messages ........

	* apps/app_voicemail.c, /: Merged revisions 136715 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r136715 | mmichelson | 2008-08-07 17:25:50 -0500 (Thu, 07 Aug
	  2008) | 18 lines Merging the imap_consistency_trunk branch to
	  trunk. For an explanation of what "imap_consistency" is, please
	  see svn revision 134223 to the 1.4 branch. Coincidentally, this
	  also fixes a recent bug report regarding the inability to save
	  messages to the new folder when using IMAP storage since they
	  will would be flagged as "seen" and not be recognized as new
	  messages. (closes issue #13234) Reported by: jaroth ........

2008-08-07 20:41 +0000 [r136672-136674]  Shaun Ruffell <sruffell@digium.com>

	* codecs/codec_dahdi.c: Removing code that was commented out.

	* codecs/codec_dahdi.c: Updated codec_dahdi to use the transcoder
	  interface in the DAHDI. (Issue: DAHDI-42)

2008-08-07 20:26 +0000 [r136632-136663]  Mark Michelson <mmichelson@digium.com>

	* /, main/features.c: Merged revisions 136660 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136660 |
	  mmichelson | 2008-08-07 15:25:43 -0500 (Thu, 07 Aug 2008) | 4
	  lines Bump a LOG_NOTICE message to LOG_DEBUG since it appears
	  once for every bridged call ........

	* main/pbx.c, /: Merged revisions 136635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136635 |
	  mmichelson | 2008-08-07 14:58:32 -0500 (Thu, 07 Aug 2008) | 5
	  lines Don't allow Answer() to accept a negative argument.
	  Negative argument means an infinite delay and we don't want that.
	  ........

	* main/channel.c, /: Merged revisions 136633 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136633 |
	  mmichelson | 2008-08-07 14:54:27 -0500 (Thu, 07 Aug 2008) | 7
	  lines Fix a calculation error I had made in the poll. The poll
	  would reset to 500 ms every time a non-voice frame was received.
	  The total time we poll should be 500 ms, so now we save the
	  amount of time left after the poll returned and use that as our
	  argument for the next call to poll ........

	* main/channel.c, /: Merged revisions 136631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136631 |
	  mmichelson | 2008-08-07 14:36:46 -0500 (Thu, 07 Aug 2008) | 13
	  lines Scrap the 500 ms delay when Asterisk auto-answers a
	  channel. Instead, poll the channel until receiving a voice frame.
	  The cap on this poll is 500 ms. The optional delay is still
	  allowable in the Answer() application, but the delay has been
	  moved back to its original position, after the call to the
	  channel's answer callback. The poll for the voice frame will not
	  happen if a delay is specified when calling Answer(). (closes
	  issue #12708) Reported by: kactus ........

2008-08-07 19:19 +0000 [r136598]  Richard Mudgett <rmudgett@digium.com>

	* channels/misdn_config.c, channels/chan_misdn.c, /,
	  configs/misdn.conf.sample: Merged revisions 136594 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r136594 | rmudgett | 2008-08-07 14:01:03 -0500
	  (Thu, 07 Aug 2008) | 13 lines Merged revisions 136241 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r136241 | rmudgett | 2008-08-06 16:18:53 -0500 (Wed, 06 Aug 2008)
	  | 5 lines * The allowed_bearers setting in misdn.conf misspelled
	  one of its options: digital_restricted. * Fixed some other
	  spelling errors and typos. ........ ................

2008-08-07 17:44 +0000 [r136506-136543]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/doxyref.h, /: Merged revisions 136542 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r136542 | kpfleming | 2008-08-07 12:44:20 -0500
	  (Thu, 07 Aug 2008) | 6 lines Merged revisions 136541 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  ........ ................

2008-08-07 16:57 +0000 [r136490]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_queue.c: Merged revisions 136489 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r136489 | tilghman | 2008-08-07 11:55:57 -0500 (Thu, 07 Aug 2008)
	  | 15 lines Merged revisions 136488 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r136488 | tilghman | 2008-08-07 11:50:47 -0500 (Thu, 07 Aug 2008)
	  | 7 lines Update persistent state on all exit conditions. (closes
	  issue #12916) Reported by: sgenyuk Patches: app_queue.patch.txt
	  uploaded by neutrino88 (license 297) Tested by: sgenyuk, aragon
	  ........ ................

2008-08-06 20:16 +0000 [r136113-136192]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/init.d/rc.redhat.asterisk: Merged revisions 136191 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r136191 | tilghman | 2008-08-06 15:15:34 -0500
	  (Wed, 06 Aug 2008) | 12 lines Merged revisions 136190 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r136190 | tilghman | 2008-08-06 15:14:54 -0500 (Wed, 06 Aug 2008)
	  | 4 lines -C option takes a filename, not a directory path.
	  (closes issue #13007) Reported by: klaus3000 ........
	  ................

	* /, funcs/func_dialgroup.c: Merged revisions 136112 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r136112 | tilghman | 2008-08-06 11:58:42 -0500 (Wed, 06 Aug 2008)
	  | 7 lines Persist DIALGROUP() values in astdb (closes issue
	  #13138) Reported by: Corydon76 Patches:
	  20080725__bug13138.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: pj ........

2008-08-06 16:00 +0000 [r136064]  Mark Michelson <mmichelson@digium.com>

	* main/rtp.c, /, channels/chan_skinny.c: Merged revisions 136063
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r136063 | mmichelson | 2008-08-06 10:59:29 -0500
	  (Wed, 06 Aug 2008) | 24 lines Merged revisions 136062 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r136062 | mmichelson | 2008-08-06 10:58:40 -0500 (Wed, 06 Aug
	  2008) | 16 lines Since adding the AST_CONTROL_SRCUPDATE frame
	  type, there are places where ast_rtp_new_source may be called
	  where the tech_pvt of a channel may not yet have an rtp structure
	  allocated. This caused a crash in chan_skinny, which was fixed
	  earlier, but now the same crash has been reported against
	  chan_h323 as well. It seems that the best solution is to modify
	  ast_rtp_new_source to not attempt to set the marker bit if the
	  rtp structure passed in is NULL. This change to
	  ast_rtp_new_source also allows the removal of what is now a
	  redundant pointer check from chan_skinny. (closes issue #13247)
	  Reported by: pj ........ ................

2008-08-06 13:59 +0000 [r136006]  Olle Johansson <oej@edvina.net>

	* /, res/res_jabber.c: Merged revisions 136005 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r136005 |
	  oej | 2008-08-06 15:34:08 +0200 (Ons, 06 Aug 2008) | 6 lines -
	  Formatting - Changing debug messages from VERBOSE to DEBUG
	  channel - Adding a few todo's - Adding a few more "XMPP"'s to
	  compliment Jabber... ........

2008-08-06 03:56 +0000 [r135901-135951]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 135950 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135950 | tilghman | 2008-08-05 22:55:49 -0500 (Tue, 05 Aug 2008)
	  | 12 lines Merged revisions 135949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135949 | tilghman | 2008-08-05 22:53:36 -0500 (Tue, 05 Aug 2008)
	  | 4 lines Fix a longstanding bug in channel walking logic, and
	  fix the explanation to make sense. (Closes issue #13124) ........
	  ................

	* /, main/translate.c: Merged revisions 135938 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135938 | tilghman | 2008-08-05 22:29:42 -0500 (Tue, 05 Aug 2008)
	  | 12 lines Merged revisions 135915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135915 | tilghman | 2008-08-05 22:24:56 -0500 (Tue, 05 Aug 2008)
	  | 4 lines Since powerof() can return an error condition, it's
	  foolhardy not to detect and deal with that condition. (Related to
	  issue #13240) ........ ................

	* include/asterisk/threadstorage.h, include/asterisk/utils.h, /:
	  Merged revisions 135900 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135900 | tilghman | 2008-08-05 22:04:01 -0500 (Tue, 05 Aug 2008)
	  | 12 lines Merged revisions 135899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135899 | tilghman | 2008-08-05 22:02:59 -0500 (Tue, 05 Aug 2008)
	  | 4 lines 1) Bugfix for debugging code 2) Reduce compiler
	  warnings for another section of debugging code (Closes issue
	  #13237) ........ ................

2008-08-06 00:31 +0000 [r135852]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/abstract_jb.h, main/channel.c, /,
	  main/abstract_jb.c, main/fixedjitterbuf.h: Merged revisions
	  135851 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135851 | mmichelson | 2008-08-05 19:30:53 -0500 (Tue, 05 Aug
	  2008) | 48 lines Merged revisions 135841,135847,135850 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135841 | mmichelson | 2008-08-05 19:25:10 -0500 (Tue, 05 Aug
	  2008) | 27 lines Merging the issue11259 branch. The purpose of
	  this branch was to take into account "burps" which could cause
	  jitterbuffers to misbehave. One such example is if the L option
	  to Dial() were used to inject audio into a bridged conversation
	  at regular intervals. Since the audio here was not passed through
	  the jitterbuffer, it would cause a gap in the jitterbuffer's
	  timestamps which would cause a frames to be dropped for a brief
	  period. Now ast_generic_bridge will empty and reset the
	  jitterbuffer each time it is called. This causes injected audio
	  to be handled properly. ast_generic_bridge also will empty and
	  reset the jitterbuffer if it receives an AST_CONTROL_SRCUPDATE
	  frame since the change in audio source could negatively affect
	  the jitterbuffer. All of this was made possible by adding a new
	  public API call to the abstract_jb called ast_jb_empty_and_reset.
	  (closes issue #11259) Reported by: plack Tested by: putnopvut
	  ........ r135847 | mmichelson | 2008-08-05 19:27:54 -0500 (Tue,
	  05 Aug 2008) | 4 lines Revert inadvertent changes to app_skel
	  that occurred when I was testing for a memory leak ........
	  r135850 | mmichelson | 2008-08-05 19:29:54 -0500 (Tue, 05 Aug
	  2008) | 3 lines Remove properties that should not be here
	  ........ ................

2008-08-05 23:52 +0000 [r135822]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, main/cdr.c, main/channel.c, /, main/features.c,
	  include/asterisk/cdr.h: Merged revisions 135821 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135821 | murf | 2008-08-05 17:45:32 -0600 (Tue, 05 Aug 2008) |
	  42 lines Merged revisions 135799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135799 | murf | 2008-08-05 17:13:20 -0600 (Tue, 05 Aug 2008) |
	  34 lines (closes issue #12982) Reported by: bcnit Tested by: murf
	  I discovered that also, in the previous bug fixes and changes,
	  the cdr.conf 'unanswered' option is not being obeyed, so I fixed
	  this. And, yes, there are two 'answer' times involved in this
	  scenario, and I would agree with you, that the first answer time
	  is the time that should appear in the CDR. (the second 'answer'
	  time is the time that the bridge was begun). I made the necessary
	  adjustments, recording the first answer time into the peer cdr,
	  and then using that to override the bridge cdr's value. To get
	  the 'unanswered' CDRs to appear, I purposely output them, using
	  the dial cmd to mark them as DIALED (with a new flag), and
	  outputting them if they bear that flag, and you are in the right
	  mode. I also corrected one small mention of the Zap device to
	  equally consider the dahdi device. I heavily tested 10-sec-wait
	  macros in dial, and without the macro call; I tested hangups
	  while the macro was running vs. letting the macro complete and
	  the bridge form. Looks OK. Removed all the instrumentation and
	  debug. ........ ................

2008-08-05 21:38 +0000 [r135749]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 135748 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135748 | tilghman | 2008-08-05 16:37:35 -0500
	  (Tue, 05 Aug 2008) | 17 lines Merged revisions 135747 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135747 | tilghman | 2008-08-05 16:34:46 -0500 (Tue, 05 Aug 2008)
	  | 9 lines In a conversion to use ast_strlen_zero, the meaning of
	  the flag IAX_HASCALLERID was perverted. This change reverts IAX2
	  to the original meaning, which was, that the callerid set on the
	  client should be overridden on the server, even if that means the
	  resulting callerid is blank. In other words, if you set
	  "callerid=" in the IAX config, then the callerid should be
	  overridden to blank, even if set on the client. Note that there's
	  a distinction, even on realtime, between the field not existing
	  (NULL in databases) and the field existing, but set to blank
	  (override callerid to blank). ........ ................

2008-08-05 13:27 +0000 [r135599]  Sean Bright <sean.bright@gmail.com>

	* main/cli.c, /: Merged revisions 135598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135598 | seanbright | 2008-08-05 09:26:34 -0400 (Tue, 05 Aug
	  2008) | 9 lines Merged revisions 135597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135597 | seanbright | 2008-08-05 09:25:00 -0400 (Tue, 05 Aug
	  2008) | 1 line Use PATH_MAX for filenames ........
	  ................

2008-08-04 20:15 +0000 [r135538]  Russell Bryant <russell@digium.com>

	* configs/chan_dahdi.conf.sample, /: Merged revisions 135537 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135537 | russell | 2008-08-04 15:15:27 -0500
	  (Mon, 04 Aug 2008) | 10 lines Merged revisions 135536 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135536 | russell | 2008-08-04 15:15:03 -0500 (Mon, 04 Aug 2008)
	  | 2 lines fix a config sample typo ........ ................

2008-08-04 17:12 +0000 [r135478-135486]  Tilghman Lesher <tlesher@digium.com>

	* contrib/init.d/rc.mandriva.asterisk (added), Makefile,
	  contrib/init.d/rc.mandrake.asterisk (removed), /,
	  contrib/init.d/rc.mandriva.zaptel (added),
	  contrib/init.d/rc.mandrake.zaptel (removed): Merged revisions
	  135485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r135485 |
	  tilghman | 2008-08-04 12:12:15 -0500 (Mon, 04 Aug 2008) | 3 lines
	  Rename Mandrake scripts to Mandriva (Closes issue #13221)
	  ........

	* contrib/init.d/rc.mandrake.asterisk, /: Merged revisions 135483
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135483 | tilghman | 2008-08-04 12:08:42 -0500
	  (Mon, 04 Aug 2008) | 11 lines Merged revisions 135482 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135482 | tilghman | 2008-08-04 12:07:52 -0500 (Mon, 04 Aug 2008)
	  | 2 lines Define ASTSBINDIR for script (Closes issue #13221)
	  ........ ................

	* apps/app_voicemail.c, /: Merged revisions 135480 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135480 | tilghman | 2008-08-04 11:58:29 -0500
	  (Mon, 04 Aug 2008) | 14 lines Merged revisions 135479 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135479 | tilghman | 2008-08-04 11:56:19 -0500 (Mon, 04 Aug 2008)
	  | 6 lines Memory leak on unload (closes issue #13231) Reported
	  by: eliel Patches: app_voicemail.leak.patch uploaded by eliel
	  (license 64) ........ ................

2008-08-04 16:28 +0000 [r135440-135475]  Russell Bryant <russell@digium.com>

	* configs/chan_dahdi.conf.sample, /: Merged revisions 135474 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135474 | russell | 2008-08-04 11:28:07 -0500
	  (Mon, 04 Aug 2008) | 10 lines Merged revisions 135473 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135473 | russell | 2008-08-04 11:26:17 -0500 (Mon, 04 Aug 2008)
	  | 2 lines Add a minor clarification to the documentation of
	  mohinterpret and mohsuggest ........ ................

	* /, channels/chan_console.c: Merged revisions 135439 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r135439 | russell | 2008-08-04 10:02:12 -0500 (Mon, 04 Aug 2008)
	  | 4 lines Be explicit that we don't want a result from this
	  callback. The callback would never indicate a match, so nothing
	  would have been returned anyway, but it was still a poor example
	  of proper usage. ........

2008-08-02 05:15 +0000 [r135266]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 135265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r135265 |
	  murf | 2008-08-01 22:51:29 -0600 (Fri, 01 Aug 2008) | 31 lines
	  (closes issue #13202) Reported by: falves11 Tested by: murf
	  falves11 == The changes I introduce here seem to clear up the
	  problem for me. However, if they do not for you, please reopen
	  this bug, and we'll keep digging. The root of this problem seems
	  to be a subtle memory corruption introduced when creating an
	  extension with an empty extension name. While valgrind cannot
	  detect it outside of DEBUG_MALLOC mode, when compiled with
	  DEBUG_MALLOC, this is certain death. The code in main/features.c
	  is a puzzle to me. On the initial module load, the code is
	  attempting to add the parking extension before the features.conf
	  file has even been opened! I just wrapped the offending call with
	  an if() that will not try to add the extension if the extension
	  name is empty. THis seems to solve the corruption, and let the
	  "memory show allocations" work as one would expect. But, really,
	  adding an extension with an empty name is a seriously bad thing
	  to allow, as it will mess up all the pattern matching algorithms,
	  etc. So, I added a statement to the add_extension2 code to return
	  a -1 if this is attempted. in 1.6.0, the changes to only
	  main/pbx.c were applicable, as apparently the code added to
	  main/features by jpeeler were not included in 1.6.0. ........

2008-08-01 19:30 +0000 [r135198]  Sean Bright <sean.bright@gmail.com>

	* channels/chan_mgcp.c, /: Merged revisions 135197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r135197 | seanbright | 2008-08-01 15:29:26 -0400 (Fri, 01 Aug
	  2008) | 6 lines Remove some code that used to do something but
	  does not anymore, mainly to get rid of a shadow warning (but this
	  seemed legitimate enough to fix here instead of in my branch).
	  Thanks to putnopvut for taking a look as well. ........

2008-08-01 17:10 +0000 [r135127-135129]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 135128 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r135128 |
	  tilghman | 2008-08-01 12:09:50 -0500 (Fri, 01 Aug 2008) | 2 lines
	  Picky, picky, buildbot ........

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  135126 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r135126 |
	  tilghman | 2008-08-01 11:39:51 -0500 (Fri, 01 Aug 2008) | 9 lines
	  SIP should use the transport type set in the Moved Temporarily
	  for the next invite. (closes issue #11843) Reported by:
	  pestermann Patches:
	  20080723__issue11843_302_ignores_transport_16branch.diff uploaded
	  by bbryant (license 36)
	  20080723__issue11843_302_ignores_transport_trunk.diff uploaded by
	  bbryant (license 36) Tested by: pabelanger ........

2008-08-01 14:43 +0000 [r135070]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /, configs/voicemail.conf.sample: Merged
	  revisions 135067-135068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r135067 |
	  mmichelson | 2008-08-01 09:29:48 -0500 (Fri, 01 Aug 2008) | 13
	  lines IMAP storage functioned under the assumption that folders
	  such as "Work" and "Family" would be subfolders of the INBOX.
	  This is an invalid assumption to make, but it could be desirable
	  to set up folders in this manner, so a new option for
	  voicemail.conf, "imapparentfolder" has been added to allow for
	  this. (closes issue #13142) Reported by: jaroth Patches:
	  parentfolder.patch uploaded by jaroth (license 50) ........
	  r135068 | mmichelson | 2008-08-01 09:42:24 -0500 (Fri, 01 Aug
	  2008) | 3 lines IMAP-specific items must go in IMAP_STORAGE
	  defines... ........

2008-08-01 12:18 +0000 [r135057-135062]  Michiel van Baak <michiel@vanbaak.info>

	* /, apps/app_ices.c: Merged revisions 135059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135059 | mvanbaak | 2008-08-01 13:47:34 +0200 (Fri, 01 Aug 2008)
	  | 10 lines Merged revisions 135058 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135058 | mvanbaak | 2008-08-01 13:43:46 +0200 (Fri, 01 Aug 2008)
	  | 2 lines make app_ices compile on OpenBSD. ........
	  ................

	* /, channels/chan_skinny.c: Merged revisions 135056 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r135056 | mvanbaak | 2008-08-01 13:00:13 +0200
	  (Fri, 01 Aug 2008) | 16 lines Merged revisions 135055 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r135055 | mvanbaak | 2008-08-01 12:55:27 +0200 (Fri, 01 Aug 2008)
	  | 8 lines fix some potential deadlocks in chan_skinny (closes
	  issue #13215) Reported by: qwell Patches:
	  2008080100_bug13215.diff.txt uploaded by mvanbaak (license 7)
	  Tested by: mvanbaak ........ ................

2008-07-31 22:34 +0000 [r135034]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/http.c: Merged revisions 135016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r135016 | kpfleming | 2008-07-31 17:28:42 -0500 (Thu, 31 Jul
	  2008) | 11 lines Merged revisions 134983 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134983 | kpfleming | 2008-07-31 17:18:11 -0500 (Thu, 31 Jul
	  2008) | 3 lines accomodate users who seem to lack a sense of
	  humor :-) ........ ................

2008-07-31 21:58 +0000 [r134926-134981]  Tilghman Lesher <tlesher@digium.com>

	* sample.call, main/manager.c, pbx/pbx_spool.c, /: Merged revisions
	  134980 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134980 | tilghman | 2008-07-31 16:55:42 -0500 (Thu, 31 Jul 2008)
	  | 16 lines Blocked revisions 134976 via svnmerge ........ r134976
	  | tilghman | 2008-07-31 16:53:19 -0500 (Thu, 31 Jul 2008) | 9
	  lines Specify codecs in callfiles and manager, to allow video
	  calls to be set up from callfiles and AMI. (closes issue #9531)
	  Reported by: Geisj Patches: 20080715__bug9531__1.4.diff.txt
	  uploaded by Corydon76 (license 14)
	  20080715__bug9531__1.6.0.diff.txt uploaded by Corydon76 (license
	  14) Tested by: Corydon76 ........ ................

	* res/res_config_sqlite.c, /: Merged revisions 134977 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r134977 | tilghman | 2008-07-31 16:53:59 -0500 (Thu, 31 Jul 2008)
	  | 2 lines Switch command order, to meet with current specs
	  ........

2008-07-31 19:54 +0000 [r134923]  Steve Murphy <murf@digium.com>

	* /, main/features.c: Merged revisions 134922 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134922 | murf | 2008-07-31 13:48:08 -0600 (Thu, 31 Jul 2008) |
	  63 lines Merged revisions 134883 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134883 | murf | 2008-07-31 13:23:42 -0600 (Thu, 31 Jul 2008) |
	  51 lines (closes issue #11849) Reported by: greyvoip Tested by:
	  murf OK, a few days of debugging, a bunch of instrumentation in
	  chan_sip, main/channel.c, main/pbx.c, etc. and 5 solid notebook
	  pages of notes later, I have made the small tweek necc. to get
	  the start time right on the second CDR when: A Calls B B answ. A
	  hits Xfer button on sip phone, A dials C and hits the OK button,
	  A hangs up C answers ringing phone B and C converse B and/or C
	  hangs up But does not harm the scenario where: A Calls B B answ.
	  B hits xfer button on sip phone, B dials C and hits the OK
	  button, B hangs up C answers ringing phone A and C converse A
	  and/or C hangs up The difference in start times on the second CDR
	  is because of a Masquerade on the B channel when the xfer number
	  is sent. It ends up replacing the CDR on the B channel with a
	  duplicate, which ends up getting tossed out. We keep a pointer to
	  the first CDR, and update *that* after the bridge closes. But,
	  only if the CDR has changed. I hope this change is specific
	  enough not to muck up any current CDR-based apps. In my defence,
	  I assert that the previous information was wrong, and this change
	  fixes it, and possibly other similar scenarios. I wonder if I
	  should be doing the same thing for the channel, as I did for the
	  peer, but I can't think of a scenario this might affect. I leave
	  it, then, as an exersize for the users, to find the scenario
	  where the chan's CDR changes and loses the proper start time.
	  ........ ................

2008-07-31 19:41 +0000 [r134918]  Russell Bryant <russell@digium.com>

	* /, apps/app_ices.c: Merged revisions 134917 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134917 | russell | 2008-07-31 14:39:50 -0500 (Thu, 31 Jul 2008)
	  | 17 lines Merged revisions 134915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134915 | russell | 2008-07-31 14:37:26 -0500 (Thu, 31 Jul 2008)
	  | 9 lines Get app_ices working again (closes issue #12981)
	  Reported by: dlogan Patches:
	  20080709__app_ices_v2_update_trunk.diff uploaded by bbryant
	  (license 36) 20080709__app_ices_v2_update_14.diff uploaded by
	  bbryant (license 36) Tested by: bbryant ........ ................

2008-07-31 16:53 +0000 [r134816]  Russell Bryant <russell@digium.com>

	* channels/iax2-parser.c: Merged revisions 134815 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134815 | russell | 2008-07-31 11:50:10 -0500 (Thu, 31 Jul 2008)
	  | 15 lines Merged revisions 134814 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134814 | russell | 2008-07-31 11:45:31 -0500 (Thu, 31 Jul 2008)
	  | 7 lines In case we have some processing threads that free more
	  frames than they allocate, do not let the frame cache grow
	  forever. (closes issue #13160) Reported by: tavius Tested by:
	  tavius, russell ........ ................

2008-07-31 16:07 +0000 [r134760]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 134759 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134759 | mmichelson | 2008-07-31 11:05:12 -0500 (Thu, 31 Jul
	  2008) | 24 lines Merged revisions 134758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134758 | mmichelson | 2008-07-31 10:56:18 -0500 (Thu, 31 Jul
	  2008) | 16 lines Add more timeout checks into app_queue,
	  specifically targeting areas where an unknown and potentially
	  long time has just elapsed. Also added a check to try_calling()
	  to return early if the timeout has elapsed instead of potentially
	  setting a negative timeout for the call (thus making it have *no*
	  timeout at all). (closes issue #13186) Reported by:
	  miquel_cabrespina Patches: 13186.diff uploaded by putnopvut
	  (license 60) Tested by: miquel_cabrespina ........
	  ................

2008-07-30 22:41 +0000 [r134651-134707]  Tilghman Lesher <tlesher@digium.com>

	* main/sched.c, /, include/asterisk/sched.h: Merged revisions
	  134703 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134703 |
	  tilghman | 2008-07-30 17:38:58 -0500 (Wed, 30 Jul 2008) | 2 lines
	  Oops, wrong define ........

	* /, configure, configure.ac: Merged revisions 134650 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r134650 | tilghman | 2008-07-30 16:40:08 -0500
	  (Wed, 30 Jul 2008) | 12 lines Merged revisions 134649 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134649 | tilghman | 2008-07-30 16:38:50 -0500 (Wed, 30 Jul 2008)
	  | 4 lines Qwell pointed out, via IRC, that the previous fix only
	  worked when explicitly set. When nothing is set, and the option
	  is implied, it breaks, because configure sets the prefix to
	  'NONE'. Fixing. ........ ................

2008-07-30 21:06 +0000 [r134599]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 134598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134598 | mmichelson | 2008-07-30 16:05:37 -0500 (Wed, 30 Jul
	  2008) | 15 lines Merged revisions 134556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134556 |
	  mmichelson | 2008-07-30 15:24:40 -0500 (Wed, 30 Jul 2008) | 7
	  lines Fix the parsing of the "reason" parameter in the Diversion:
	  header. (closes issue #13195) Reported by: woodsfsg ........
	  ................

2008-07-30 20:39 +0000 [r134597]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 134596 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134596 | russell | 2008-07-30 15:38:35 -0500 (Wed, 30 Jul 2008)
	  | 14 lines Merged revisions 134595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134595 | russell | 2008-07-30 15:37:17 -0500 (Wed, 30 Jul 2008)
	  | 6 lines Reduce stack consumption by 12.5% of the max stack size
	  to fix a crash when compiled with LOW_MEMORY. (closes issue
	  #13154) Reported by: edantie ........ ................

2008-07-30 20:25 +0000 [r134561]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 134556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134556 |
	  mmichelson | 2008-07-30 15:24:40 -0500 (Wed, 30 Jul 2008) | 7
	  lines Fix the parsing of the "reason" parameter in the Diversion:
	  header. (closes issue #13195) Reported by: woodsfsg ........

2008-07-30 19:56 +0000 [r134542]  Russell Bryant <russell@digium.com>

	* funcs/func_curl.c, /: Merged revisions 134541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134541 | russell | 2008-07-30 14:55:31 -0500 (Wed, 30 Jul 2008)
	  | 12 lines Merged revisions 134540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134540 | russell | 2008-07-30 14:52:53 -0500 (Wed, 30 Jul 2008)
	  | 4 lines Fix a memory leak in func_curl. Every thread that used
	  this function leaked an allocation the size of a pointer.
	  (reported by jmls in #asterisk-dev) ........ ................

2008-07-30 19:49 +0000 [r134482-134539]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 134538 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r134538 | tilghman | 2008-07-30 14:48:37 -0500
	  (Wed, 30 Jul 2008) | 12 lines Merged revisions 134536 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134536 | tilghman | 2008-07-30 14:47:16 -0500 (Wed, 30 Jul 2008)
	  | 4 lines Only override sysconfdir and mandir when prefix=/usr
	  (closes issue #13093) Reported by: pabelanger ........
	  ................

	* /, apps/app_queue.c: Merged revisions 134483 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134483 |
	  tilghman | 2008-07-30 14:17:38 -0500 (Wed, 30 Jul 2008) | 4 lines
	  Let "roundrobin" also reference rrmemory, for the 1.6 release (as
	  described in UPGRADE-1.4.txt) (Closes issue #13181) ........

	* /, res/res_agi.c: Merged revisions 134481 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134481 | tilghman | 2008-07-30 14:05:35 -0500 (Wed, 30 Jul 2008)
	  | 13 lines Merged revisions 134480 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134480 | tilghman | 2008-07-30 14:03:44 -0500 (Wed, 30 Jul 2008)
	  | 5 lines launch_netscript sometimes returns -1, which fails to
	  set AGISTATUS. Map failure to -1, so that AGISTATUS is always
	  set. (closes issue #13199) Reported by: smw1218 ........
	  ................

2008-07-30 18:33 +0000 [r134477]  Mark Michelson <mmichelson@digium.com>

	* /, main/app.c: Merged revisions 134476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134476 | mmichelson | 2008-07-30 13:33:12 -0500 (Wed, 30 Jul
	  2008) | 12 lines Merged revisions 134475 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134475 | mmichelson | 2008-07-30 13:31:47 -0500 (Wed, 30 Jul
	  2008) | 4 lines Fix a spot where a function could return without
	  bringing a channel out of autoservice. ........ ................

2008-07-30 15:34 +0000 [r134356]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: Merged revisions 134355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r134355 | kpfleming | 2008-07-30 10:32:14 -0500 (Wed, 30 Jul
	  2008) | 10 lines Merged revisions 134352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134352 | kpfleming | 2008-07-30 10:29:17 -0500 (Wed, 30 Jul
	  2008) | 2 lines use the proper method for building version.h
	  ........ ................

2008-07-29 22:29 +0000 [r134283]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_rpt.c, apps/app_dahdibarge.c, channels/chan_dahdi.c, /,
	  apps/app_meetme.c, apps/app_dahdiscan.c, apps/app_dahdiras.c:
	  Merged revisions 134260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134260 |
	  kpfleming | 2008-07-29 17:22:13 -0500 (Tue, 29 Jul 2008) | 2
	  lines build against the now-typedef-free dahdi/user.h, and remove
	  some #ifdefs for features that will always be present in DAHDI
	  ........

2008-07-28 22:16 +0000 [r134164]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 134163 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r134163 | tilghman | 2008-07-28 17:07:12 -0500
	  (Mon, 28 Jul 2008) | 15 lines Merged revisions 134161 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r134161 | tilghman | 2008-07-28 16:50:50 -0500 (Mon, 28 Jul 2008)
	  | 7 lines Detect when sox fails to raise the volume, because sox
	  can't read the file. (closes issue #12939) Reported by:
	  rickbradley Patches: 20080728__bug12939.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: rickbradley ........
	  ................

2008-07-28 19:55 +0000 [r134126]  Mark Michelson <mmichelson@digium.com>

	* /, configure, main/Makefile, configure.ac, CHANGES: Merged
	  revisions 134125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134125 |
	  mmichelson | 2008-07-28 14:53:56 -0500 (Mon, 28 Jul 2008) | 27
	  lines This commit compensates for buggy poll(2) implementations.
	  Asterisk has, for a long time, had its own implementation of
	  poll(2) which just used the input arguments to call select(2). In
	  1.4, this internal implementation was used for Darwin systems.
	  This was removed in Asterisk trunk at some point, but it seems as
	  though this was not the right move to make. On Mac OS X, it
	  appears as though the poll used to gather CLI input does not
	  respond properly when connecting via a remote Asterisk console.
	  Reverting to the use of Asterisk's poll fixed the issue. Also,
	  there is now an option for the configure script,
	  --enable-internal-poll, which will allow for anyone to use
	  Asterisk's internal poll implementation in case they suspect that
	  their system's poll implementation is buggy. closes issue #11928)
	  Reported by: adriavidal Patches: 1.6.0-configurev2.patch uploaded
	  by putnopvut (license 60) ........

2008-07-28 16:49 +0000 [r134087]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_parkandannounce.c, main/loader.c, sample.call,
	  contrib/scripts/autosupport, build_tools/cflags.xml,
	  main/channel.c, apps/app_dahdibarge.c, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, doc/ss7.txt, /, main/features.c,
	  doc/osp.txt, main/file.c, pbx/pbx_config.c: Merged revisions
	  134086 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134086 |
	  kpfleming | 2008-07-28 11:42:00 -0500 (Mon, 28 Jul 2008) | 3
	  lines remove remaining Zaptel references in various places
	  ........

2008-07-28 16:13 +0000 [r134052]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, include/asterisk/options.h, main/asterisk.c,
	  /, apps/app_meetme.c, apps/app_dahdiscan.c: Merged revisions
	  134050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r134050 |
	  mmichelson | 2008-07-28 11:00:19 -0500 (Mon, 28 Jul 2008) | 3
	  lines merging the zap_and_dahdi_trunk branch up to trunk ........

2008-07-26 15:34 +0000 [r133942-133982]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, include/asterisk/doxyref.h, /: Include the
	  licensing page in 1.6.0 as well. Now, this page exists in 1.4,
	  trunk, and 1.6.0.

	* /: unblock 133575

	* /, main/devicestate.c: Merged revisions 133945-133946 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r133945 | russell | 2008-07-26 10:15:14 -0500 (Sat, 26
	  Jul 2008) | 6 lines ast_device_state() gets called in two
	  different ways. The first way is when called from elsewhere in
	  Asterisk to find the current state of a device. In that case, we
	  want to use the cached value if it exists. The other way is when
	  processing a device state change. In that case, we do not want to
	  check the cache because returning the last known state is counter
	  productive. ........ r133946 | russell | 2008-07-26 10:16:20
	  -0500 (Sat, 26 Jul 2008) | 1 line actually use the cache_cache
	  argument ........

2008-07-25 22:09 +0000 [r133863-133905]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/asterisk.ldif, /: Merged revisions 133902 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r133902 | tilghman | 2008-07-25 16:59:39 -0500 (Fri, 25
	  Jul 2008) | 6 lines Update version (closes issue #13163) Reported
	  by: suretec Patches: asterisk.ldif uploaded by suretec (license
	  70) ........

2008-07-25 19:37 +0000 [r133804-133806]  Brandon Kruse <bkruse@digium.com>

	* /: Blocking revert of code changes in r133770

	* main/http.c: Include the http_decode function from trunk to
	  replace the + with a space.

2008-07-25 17:33 +0000 [r133694]  Brandon Kruse <bkruse@digium.com>

	* /: Blocking a fix from trunk for the function http_decode. 1.6.0
	  does not have this function.

2008-07-25 17:26 +0000 [r133671]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /, channels/chan_agent.c, main/devicestate.c:
	  Merged revisions 133665 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133665 | tilghman | 2008-07-25 12:24:43 -0500 (Fri, 25 Jul 2008)
	  | 16 lines Merged revisions 133649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133649 | tilghman | 2008-07-25 12:19:39 -0500 (Fri, 25 Jul 2008)
	  | 8 lines Fix some errant device states by making the devicestate
	  API more strict in terms of the device argument (only without the
	  unique identifier appended). (closes issue #12771) Reported by:
	  davidw Patches: 20080717__bug12771.diff.txt uploaded by Corydon76
	  (license 14) Tested by: davidw, jvandal, murf ........
	  ................

2008-07-25 15:01 +0000 [r133576-133580]  Russell Bryant <russell@digium.com>

	* /, LICENSE: Merged revisions 133579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133579 | russell | 2008-07-25 10:00:49 -0500 (Fri, 25 Jul 2008)
	  | 18 lines Merged revisions 133578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r133578 | russell | 2008-07-25 10:00:31 -0500
	  (Fri, 25 Jul 2008) | 10 lines Merged revisions 133577 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r133577 | russell | 2008-07-25 10:00:13 -0500 (Fri, 25 Jul 2008)
	  | 2 lines Fix the IAX2 URI for calling Digium ........
	  ................ ................

2008-07-25 14:41 +0000 [r133571-133574]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 133573 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133573 | mmichelson | 2008-07-25 09:40:52 -0500 (Fri, 25 Jul
	  2008) | 15 lines Merged revisions 133572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133572 | mmichelson | 2008-07-25 09:40:10 -0500 (Fri, 25 Jul
	  2008) | 7 lines We need to make sure to null-terminate the "name"
	  portion of SIP URI parameters so that there are no bogus
	  comparisons. Thanks to bbryant for pointing this out. ........
	  ................

2008-07-25 13:25 +0000 [r133567-133569]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 133568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133568 |
	  russell | 2008-07-25 08:01:59 -0500 (Fri, 25 Jul 2008) | 4 lines
	  Minor coding guidelines tweaks ... - Use ast_strlen_zero in one
	  place - check for successful string comparison the way most of
	  Asterisk code does it ........

2008-07-24 21:31 +0000 [r133524]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 133509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133509 | tilghman | 2008-07-24 16:27:06 -0500 (Thu, 24 Jul 2008)
	  | 11 lines Merged revisions 133488 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133488 | tilghman | 2008-07-24 16:17:55 -0500 (Thu, 24 Jul 2008)
	  | 3 lines Fix rtautoclear and rtcachefriends (Closes issue
	  #12707) ........ ................

2008-07-24 20:41 +0000 [r133487]  Russell Bryant <russell@digium.com>

	* /, channels/chan_agent.c: Merged revisions 133486 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r133486 | russell | 2008-07-24 15:40:15 -0500 (Thu, 24 Jul 2008)
	  | 3 lines I made this change from DEVICE_STATE to
	  DEVICE_STATE_CHANGE, but I had it backwards, this is the right
	  event to subscribe to ... ........

2008-07-24 19:55 +0000 [r133449]  Mark Michelson <mmichelson@digium.com>

	* /, main/logger.c: Merged revisions 133448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133448 |
	  mmichelson | 2008-07-24 14:53:37 -0500 (Thu, 24 Jul 2008) | 12
	  lines Print the correct PID in log messages. Prior to this
	  commit, only the logger thread's PID would be printed. (closes
	  issue #13150) Reported by: atis Patches: log_pid.diff uploaded by
	  putnopvut (license 60) Tested by: eliel ........

2008-07-24 05:21 +0000 [r133392-133405]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/asterisk.logrotate, Makefile, /: Merged revisions
	  133400 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133400 |
	  tilghman | 2008-07-24 00:21:00 -0500 (Thu, 24 Jul 2008) | 3 lines
	  Build the logrotate script according to paths (Closes issue
	  #13147) ........

	* Makefile, /: Merged revisions 133391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133391 |
	  tilghman | 2008-07-23 23:51:42 -0500 (Wed, 23 Jul 2008) | 3 lines
	  Optionally install logrotate file (Closes issue #13148) ........

2008-07-23 22:07 +0000 [r133300]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 133299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133299 |
	  murf | 2008-07-23 16:03:48 -0600 (Wed, 23 Jul 2008) | 27 lines
	  (closes issue #13144) Reported by: murf Tested by: murf For: J.
	  Geis The 'data' field in the ast_exten struct was being 'moved'
	  from the current dialplan to the replacement dialplan. This was
	  not good, as the current dialplan could have problems in the time
	  between the change and when the new dialplan is swapped in. So, I
	  modified the merge_and_delete code to strdup the 'data' field
	  (the args to the app call), and then it's freed as normal. I
	  improved a few messages; I added code to limit the number of
	  calls to the context_merge_incls_swits_igps_other_registrars() to
	  one per context. I don't think having it called multiple times
	  per context was doing anything bad, but it was inefficient. I
	  hope this fixes the problems Mr. Geiss was noting in
	  asterisk-users, see
	  http://lists.digium.com/pipermail/asterisk-users/2008-July/215634.html
	  ........

2008-07-23 21:50 +0000 [r133297]  Jason Parker <jparker@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 133296 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r133296 | qwell | 2008-07-23 16:50:20 -0500
	  (Wed, 23 Jul 2008) | 9 lines Merged revisions 133295 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r133295 | qwell | 2008-07-23 16:49:03 -0500 (Wed, 23 Jul
	  2008) | 1 line inbandrelease is gone - it's now inbanddisconnect
	  ........ ................

2008-07-23 20:39 +0000 [r133218]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c: Merged revisions 133197 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r133197 |
	  bbryant | 2008-07-23 15:33:22 -0500 (Wed, 23 Jul 2008) | 2 lines
	  Fix issue where tcp in sip is enabled by default, despite what it
	  says in the config sample file. Also fix "sip show settings" for
	  tcp connections. ........

2008-07-23 19:50 +0000 [r133042-133172]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, include/asterisk/options.h, main/asterisk.c,
	  /: Merged revisions 133171 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133171 | mmichelson | 2008-07-23 14:48:03 -0500 (Wed, 23 Jul
	  2008) | 20 lines Merged revisions 133169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133169 | mmichelson | 2008-07-23 14:39:47 -0500 (Wed, 23 Jul
	  2008) | 12 lines As suggested by seanbright, the PSEUDO_CHAN_LEN
	  in app_chanspy should be set at load time, not at compile time,
	  since dahdi_chan_name is determined at load time. Also changed
	  the next_unique_id_to_use to have the static qualifier. Also
	  added the dahdi_chan_name_len variable so that
	  strlen(dahdi_chan_name) isn't necessary. Thanks to seanbright for
	  the suggestion. ........ ................

	* apps/app_chanspy.c, /: Merged revisions 133106 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133106 | mmichelson | 2008-07-23 14:07:56 -0500 (Wed, 23 Jul
	  2008) | 13 lines Merged revisions 133104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133104 | mmichelson | 2008-07-23 14:06:16 -0500 (Wed, 23 Jul
	  2008) | 5 lines Zap/pseudo is ten characters, but DAHDI/pseudo is
	  twelve. The strncmp call in next_channel should account for this.
	  ........ ................

	* apps/app_chanspy.c, /: Merged revisions 133102 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r133102 | mmichelson | 2008-07-23 13:58:37 -0500 (Wed, 23 Jul
	  2008) | 14 lines Merged revisions 133101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133101 | mmichelson | 2008-07-23 13:57:17 -0500 (Wed, 23 Jul
	  2008) | 6 lines Update the "last" channel in next_channel in
	  app_chanspy so that the same pseudo channel isn't constantly
	  returned. related to issue #13124 ........ ................

	* channels/chan_dahdi.c, /: Merged revisions 133041 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r133041 | mmichelson | 2008-07-23 12:54:03 -0500
	  (Wed, 23 Jul 2008) | 15 lines Merged revisions 133038 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r133038 | mmichelson | 2008-07-23 12:50:01 -0500 (Wed, 23 Jul
	  2008) | 7 lines Small cleanup. Move the declaration of the
	  DAHDI_SPANINFO variable to the block where it is used. This
	  allows one less #ifdef HAVE_PRI to clutter things up. Thanks to
	  Tzafrir for pointing this out on #asterisk-dev ........
	  ................

2008-07-23 17:21 +0000 [r132978-132983]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 132981 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132981 | tilghman | 2008-07-23 12:20:43 -0500 (Wed, 23 Jul 2008)
	  | 6 lines Yet another conversion of '|' to ',' (closes issue
	  #13137) Reported by: eliel Patches: chan_iax2trunk-IAXPEER.patch
	  uploaded by eliel (license 64) ........

	* contrib/scripts/asterisk.logrotate (added), /: Merged revisions
	  132977 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132977 |
	  tilghman | 2008-07-23 12:14:56 -0500 (Wed, 23 Jul 2008) | 6 lines
	  Add logrotate script for Asterisk (closes issue #13085) Reported
	  by: pabelanger Patches: logrotate uploaded by pabelanger (license
	  224) ........

2008-07-23 16:42 +0000 [r132965-132967]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/misdn/isdn_lib.c, /: Merged revisions 132883,132966 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r132883 | crichter | 2008-07-23 07:07:15 -0500
	  (Wed, 23 Jul 2008) | 9 lines Merged revisions 132826 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r132826 | crichter | 2008-07-23 13:37:50 +0200 (Mi, 23
	  Jul 2008) | 1 line another Fix because of r119585, this commit
	  has broken high frequented BRI Ports, there was a possibility
	  that a channel, that was marked as in_use would be reused later,
	  the corresponding port could got stuck then. So it is recommended
	  to upgrade for chan_misdn users. ........ ................
	  r132966 | kpfleming | 2008-07-23 11:38:28 -0500 (Wed, 23 Jul
	  2008) | 2 lines use correct function name... please compile with
	  --enable-dev-mode ................

	* include/asterisk/stringfields.h, /, main/utils.c: Merged
	  revisions 132964 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132964 | kpfleming | 2008-07-23 11:30:18 -0500 (Wed, 23 Jul
	  2008) | 10 lines Merged revisions 132872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132872 | kpfleming | 2008-07-23 06:52:18 -0500 (Wed, 23 Jul
	  2008) | 2 lines minor optimization for stringfields: when a field
	  is being set to a larger value than it currently contains and it
	  happens to be the most recent field allocated from the currentl
	  pool, it is possible to 'grow' it without having to waste the
	  space it is currently using (or potentially even allocate a new
	  pool) ........ ................

2008-07-23 08:18 +0000 [r132824]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 132823 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132823 |
	  oej | 2008-07-23 10:13:07 +0200 (Ons, 23 Jul 2008) | 8 lines
	  Well, the content of a channel variable may be longer than the
	  size of a pointer... Thanks, eliel! Reported by: eliel Patches:
	  chan_siptrunk.SIPPEER.patch uploaded by eliel (license 64)
	  (closes issue #13135) ........

2008-07-22 22:20 +0000 [r132797]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 132795 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132795 | mmichelson | 2008-07-22 17:17:09 -0500 (Tue, 22 Jul
	  2008) | 11 lines Merged revisions 132777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ Allow
	  Spiraled INVITEs to work correctly within Asterisk. Prior to this
	  change, a spiraled INVITE would cause a 482 Loop Detected to be
	  sent to the caller. With this change, if a potential loop is
	  detected, the Request-URI is inspected to see if it has changed
	  from what was originally received. If pedantic mode is on, then
	  this inspection is fully RFC 3261 compliant. If pedantic mode is
	  not on, then a string comparison is used to test the equality of
	  the two R-URIs. This has been tested by using OpenSER to rewrite
	  the R-URI and send the INVITE back to Asterisk. (closes issue
	  #7403) Reported by: stephen_dredge Modified:
	  branches/1.4/channels/chan_sip.c ........ ................

2008-07-22 22:15 +0000 [r132793]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 132791 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132791 | kpfleming | 2008-07-22 17:14:37 -0500 (Tue, 22 Jul
	  2008) | 2 lines correct fix made in r132777... the code *did*
	  compile in dev-mode, as long as libpri was installed and enabled
	  ........

2008-07-22 21:59 +0000 [r132782]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, doc/sip-retransmit.txt (added): Merged
	  revisions 132703 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132703 | oej | 2008-07-22 22:46:11 +0200 (Tis, 22 Jul 2008) | 17
	  lines Merged revisions 132645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132645 | oej | 2008-07-22 22:10:26 +0200 (Tis, 22 Jul 2008) | 9
	  lines The most common question on the #asterisk iRC channel and
	  on mailing lists seems to be in regards to an error message when
	  retransmit fails. This is frequently misunderstood as a failure
	  of Asterisk, not a failure of the network to reach the other
	  party. This document tries to assist the Asterisk user in sorting
	  out these issues by explaining the logic and pointing at some
	  possible causes. Hopefully, we will get other questions now :-)
	  ........ ................

2008-07-22 21:55 +0000 [r132780]  Tilghman Lesher <tlesher@digium.com>

	* configs/iax.conf.sample, /, channels/chan_iax2.c: Merged
	  revisions 132778 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132778 | tilghman | 2008-07-22 16:53:40 -0500 (Tue, 22 Jul 2008)
	  | 18 lines Merged revisions 132713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r132713 | tilghman | 2008-07-22 16:19:39 -0500
	  (Tue, 22 Jul 2008) | 10 lines Merged revisions 132711 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r132711 | tilghman | 2008-07-22 16:14:10 -0500 (Tue, 22 Jul 2008)
	  | 2 lines Fixes for AST-2008-010 and AST-2008-011 ........
	  ................ ................

2008-07-22 21:54 +0000 [r132779]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 132777 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132777 | mmichelson | 2008-07-22 16:52:24 -0500 (Tue, 22 Jul
	  2008) | 3 lines Get chan_dahdi to compile in devmode ........

2008-07-22 21:23 +0000 [r132574-132729]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 132721 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r132721 | kpfleming | 2008-07-22 16:21:56 -0500
	  (Tue, 22 Jul 2008) | 14 lines Merged revisions 132712 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132712 | kpfleming | 2008-07-22 16:17:23 -0500 (Tue, 22 Jul
	  2008) | 6 lines ensure that if any alarms exist at channel
	  creation time, they are handled identically to if they occurred
	  later, so that later alarm clearing will work properly and 'make
	  sense' (closes issue #12160) Reported by: tzafrir ........
	  ................

	* /, configure, configure.ac, acinclude.m4: Merged revisions 132705
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r132705 | kpfleming | 2008-07-22 15:54:07 -0500
	  (Tue, 22 Jul 2008) | 10 lines Merged revisions 132704 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132704 | kpfleming | 2008-07-22 15:49:41 -0500 (Tue, 22 Jul
	  2008) | 2 lines make AST_C_COMPILE_CHECK able to print a 'pretty'
	  description of what it is doing ........ ................

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /,
	  configure, include/asterisk/autoconfig.h.in, configure.ac: Merged
	  revisions 132643 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132643 | kpfleming | 2008-07-22 14:59:10 -0500 (Tue, 22 Jul
	  2008) | 10 lines Merged revisions 132641 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132641 | kpfleming | 2008-07-22 14:49:11 -0500 (Tue, 22 Jul
	  2008) | 2 lines use renamed libpri API call for controlling this
	  feature (was improperly named before) ........ ................

	* channels/chan_dahdi.c, /: Merged revisions 132573 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r132573 | kpfleming | 2008-07-21 17:51:16 -0500
	  (Mon, 21 Jul 2008) | 10 lines Merged revisions 132571 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132571 | kpfleming | 2008-07-21 17:45:16 -0500 (Mon, 21 Jul
	  2008) | 2 lines teach chan_dahdi how to find the D-channel on BRI
	  spans, and don't attempt to use channel 24 as a D-channel on
	  spans of unexpected sizes ........ ................

2008-07-21 21:13 +0000 [r132515]  Brett Bryant <bbryant@digium.com>

	* configs/features.conf.sample, configs/gtalk.conf.sample, /,
	  configs/jingle.conf.sample, configs/manager.conf.sample: Merged
	  revisions 132514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132514 |
	  bbryant | 2008-07-21 16:12:51 -0500 (Mon, 21 Jul 2008) | 8 lines
	  Update configuration files to add missing options for jingle,
	  gtalk, manager.conf, and features.conf. (closes issue #13128)
	  Reported by: caio1982 Patches: missing_options1.diff uploaded by
	  caio1982 (license 22) ........

2008-07-21 21:02 +0000 [r132512-132513]  Tilghman Lesher <tlesher@digium.com>

	* main/fskmodem.c (added), /, include/asterisk/fskmodem.h (added):
	  Merged revisions 132511 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132511 |
	  tilghman | 2008-07-21 16:00:47 -0500 (Mon, 21 Jul 2008) | 2 lines
	  (Step 2 of 2) ........

	* main/fskmodem.c (removed), include/asterisk/fskmodem_int.h
	  (added), build_tools/cflags.xml, main/fskmodem_float.c (added),
	  /, main/tdd.c, include/asterisk/fskmodem.h (removed),
	  main/fskmodem_int.c (added), main/callerid.c,
	  include/asterisk/fskmodem_float.h (added): Merged revisions
	  132510 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132510 |
	  tilghman | 2008-07-21 15:59:03 -0500 (Mon, 21 Jul 2008) | 5 lines
	  Optionally build integer-based routines for FSK tone decoding
	  (but default to the more accurate float-based routines). (Closes
	  issue #11679) (Step 1 of 2) ........

2008-07-21 20:55 +0000 [r132467-132509]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_sendtext.c: Merged revisions 132508 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132508 |
	  bbryant | 2008-07-21 15:54:09 -0500 (Mon, 21 Jul 2008) | 9 lines
	  Fix a bug where SENDTEXTSTATUS isn't set properly when it isn't
	  supported on a channel (yet _another_ useful patch by eliel).
	  (closes issue #13081) Reported by: eliel Patches:
	  app_sendtext.c.patch uploaded by eliel (license 64) Tested by:
	  eliel ........

	* /, channels/chan_sip.c: Merged revisions 132468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132468 |
	  bbryant | 2008-07-21 12:42:45 -0500 (Mon, 21 Jul 2008) | 5 lines
	  Fix bug where ast_parse_arg would inadvertantly enable sip tcp
	  when parsing a tcpbindaddr if it was disabled. (closes issue
	  #13117) Reported by: pj ........

	* /, channels/chan_iax2.c: Merged revisions 132466 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132466 | bbryant | 2008-07-21 12:22:02 -0500 (Mon, 21 Jul 2008)
	  | 3 lines Fix an issue in iax2 where a call that's been rejected
	  still kept an open channel on the side that attempted to make the
	  call (not the side of the call that rejected the call). Changes
	  were load tested and also approved by Russell. ........

2008-07-21 15:34 +0000 [r132426]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 132425 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132425 | jpeeler | 2008-07-21 10:33:13 -0500 (Mon, 21 Jul 2008)
	  | 2 lines make buffers config option (chan_dahdi.conf) parsing
	  safer and added logging in case of failure ........

2008-07-21 14:48 +0000 [r132389-132391]  Russell Bryant <russell@digium.com>

	* apps/app_jack.c, include/asterisk/libresample.h (removed), /,
	  build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, main/Makefile, main/libresample
	  (removed), configure.ac, codecs/codec_resample.c, makeopts.in:
	  Merged revisions 132390 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132390 |
	  russell | 2008-07-21 09:47:41 -0500 (Mon, 21 Jul 2008) | 16 lines
	  Remove libresample from the Asterisk source tree. It is now
	  available in its own repository, and must be installed like any
	  other library for Asterisk to use. The two modules that require
	  it are codec_resample and app_jack. To install libresample: $ svn
	  co http://svn.digium.com/svn/libresample/trunk libresample $ cd
	  libresample $ ./configure $ make $ sudo make install This code is
	  currently in our own repository because the build system did not
	  include the appropriate targets for building a dynamic library or
	  for installing the library. ........

	* apps/app_jack.c, /, codecs/codec_resample.c: Merged revisions
	  132388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132388 |
	  russell | 2008-07-21 08:51:05 -0500 (Mon, 21 Jul 2008) | 3 lines
	  Enable higher quality resampling, as it doesn't have a noticeable
	  performance impact on my machine .. ........

2008-07-19 16:47 +0000 [r132313]  Kevin P. Fleming <kpfleming@digium.com>

	* /, LICENSE: Merged revisions 132312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132312 | kpfleming | 2008-07-19 11:46:33 -0500 (Sat, 19 Jul
	  2008) | 10 lines Merged revisions 132311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132311 | kpfleming | 2008-07-19 11:45:52 -0500 (Sat, 19 Jul
	  2008) | 2 lines grant a license exception to allow distribution
	  of Asterisk binaries that use the UW IMAP Toolkit (which is
	  licensed under a non-GPL-compatible license) ........
	  ................

2008-07-19 10:47 +0000 [r132278]  Michiel van Baak <michiel@vanbaak.info>

	* res/res_config_sqlite.c, /: Merged revisions 132277 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132277 | mvanbaak | 2008-07-19 12:46:12 +0200 (Sat, 19 Jul 2008)
	  | 7 lines fix a couple of comments in sqlite resource driver.
	  (closes issue #13110) Reported by: gknispel_proformatique
	  Patches: res_config_sqlite_comments.patch uploaded by gknispel
	  (license 261) ........

2008-07-18 22:20 +0000 [r132245]  Brett Bryant <bbryant@digium.com>

	* main/manager.c, /: Merged revisions 132242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r132242 |
	  bbryant | 2008-07-18 17:19:56 -0500 (Fri, 18 Jul 2008) | 4 lines
	  Fixes problem where manager users loaded from users.conf would be
	  removed early (before the routine to load the configuration was
	  finished) because a variable wasn't initialized. ........

2008-07-18 20:58 +0000 [r132114-132207]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c: Merged revisions 132113 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132113 | tilghman | 2008-07-18 14:09:39 -0500 (Fri, 18 Jul 2008)
	  | 14 lines Merged revisions 132112 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132112 | tilghman | 2008-07-18 14:06:10 -0500 (Fri, 18 Jul 2008)
	  | 6 lines Fix for Taiwanese number syntax (closes issue #12319)
	  Reported by: CharlesWang Patches: saynumber-tw-1.4.18.1.patch
	  uploaded by CharlesWang (license 444) ........ ................

2008-07-18 18:53 +0000 [r132111]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 132108 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r132108 | mattf | 2008-07-18 13:50:00 -0500 (Fri, 18 Jul 2008) |
	  1 line Make sure we break the poll so that messages queued will
	  be sent on the SS7 when using CLI commands for blocking and
	  blocking of CICs and linksets. ........

2008-07-18 18:51 +0000 [r132110]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c, /: Merged revisions 132109 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r132109 | tilghman | 2008-07-18 13:50:37 -0500 (Fri, 18 Jul 2008)
	  | 14 lines Merged revisions 132107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r132107 | tilghman | 2008-07-18 13:47:50 -0500 (Fri, 18 Jul 2008)
	  | 6 lines Textual clarification (closes issue #13106) Reported
	  by: flefoll Patches: config.c.br14.120173.patch-unknown-directive
	  uploaded by flefoll (license 244) ........ ................

2008-07-18 17:56 +0000 [r132051]  Brett Bryant <bbryant@digium.com>

	* main/hashtab.c, /, cdr/cdr_radius.c: Merged revisions 132050 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r132050 | bbryant | 2008-07-18 12:55:41 -0500 (Fri, 18
	  Jul 2008) | 8 lines Fix magic Revision keywords in hashtab.c and
	  change cdr_radius.c to use the same keyword as the other files
	  (patch by eliel). (closes issue #13104) Reported by: eliel
	  Patches: revision.patch uploaded by eliel (license 64) ........

2008-07-18 17:40 +0000 [r131984-132047]  Tilghman Lesher <tlesher@digium.com>

	* main/sched.c, /: Merged revisions 131989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131989 | tilghman | 2008-07-18 12:10:34 -0500 (Fri, 18 Jul 2008)
	  | 10 lines Merged revisions 131988 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131988 | tilghman | 2008-07-18 12:10:01 -0500 (Fri, 18 Jul 2008)
	  | 2 lines Oops ........ ................

	* main/sched.c, /, include/asterisk/sched.h: Merged revisions
	  131986 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131986 | tilghman | 2008-07-18 11:48:18 -0500 (Fri, 18 Jul 2008)
	  | 10 lines Merged revisions 131985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131985 | tilghman | 2008-07-18 11:46:23 -0500 (Fri, 18 Jul 2008)
	  | 2 lines Preserve ABI compatibility with last change ........
	  ................

	* main/sched.c, /, include/asterisk/sched.h, channels/chan_iax2.c:
	  Merged revisions 131982 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131982 | tilghman | 2008-07-18 11:33:56 -0500 (Fri, 18 Jul 2008)
	  | 10 lines Merged revisions 131970 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131970 | tilghman | 2008-07-18 11:30:31 -0500 (Fri, 18 Jul 2008)
	  | 2 lines Make the ast_assert call within ast_sched_del report
	  something useful. ........ ................

2008-07-18 16:16 +0000 [r131924]  Kevin P. Fleming <kpfleming@digium.com>

	* main/dlfcn.c (removed), main/loader.c, /, main/Makefile,
	  include/asterisk/dlfcn-compat.h (removed): Merged revisions
	  131923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131923 | kpfleming | 2008-07-18 11:16:12 -0500 (Fri, 18 Jul
	  2008) | 10 lines Merged revisions 131921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131921 | kpfleming | 2008-07-18 11:15:41 -0500 (Fri, 18 Jul
	  2008) | 2 lines remove the dlfcn compatibility stuff, because no
	  platforms that Asterisk currently runs on it use it, and it
	  doesn't build anyway ........ ................

2008-07-18 15:39 +0000 [r131917]  Brett Bryant <bbryant@digium.com>

	* /, main/features.c: Merged revisions 131916 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131916 | bbryant | 2008-07-18 10:38:22 -0500 (Fri, 18 Jul 2008)
	  | 12 lines Merged revisions 131915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131915 | bbryant | 2008-07-18 10:34:42 -0500 (Fri, 18 Jul 2008)
	  | 4 lines Fix a bug in blind transfers where the BLINDTRANSFER
	  variable isn't always set to the other end of the blind transfer.
	  (closes issue #12586) ........ ................

2008-07-17 22:45 +0000 [r131869]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 131868 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r131868 | jpeeler | 2008-07-17 17:40:00 -0500 (Thu, 17 Jul 2008)
	  | 6 lines Add configuration option to chan_dahdi.conf to allow
	  buffering policy and number of buffers to be configured per
	  channel. Syntax: buffers=<num of buffers>,<policy> Where the
	  number of buffers is some non-negative integer and the policy is
	  either "full", "half", or "immediate". ........

2008-07-17 21:27 +0000 [r131830]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_senddtmf.c: Merged revisions 131824 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131824 |
	  mmichelson | 2008-07-17 16:26:41 -0500 (Thu, 17 Jul 2008) | 10
	  lines Document that the duration of dtmf may be passed to the
	  SendDTMF application. Also correct the default pause between
	  digits. (closes issue #13102) Reported by: eliel Patches:
	  app_senddtmf.c.patch uploaded by eliel (license 64) ........

2008-07-17 20:38 +0000 [r131754-131792]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 131791 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r131791 | tilghman | 2008-07-17 15:37:14 -0500
	  (Thu, 17 Jul 2008) | 15 lines Merged revisions 131790 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131790 | tilghman | 2008-07-17 15:35:44 -0500 (Thu, 17 Jul 2008)
	  | 7 lines Revert part of issue #5620 (revision 6965) as it
	  appears that it was in error. This should fix talk call progress
	  on analog lines. (closes issue #12178) Reported by: michael-fig
	  Patches: 20080717__bug12178.diff.txt uploaded by Corydon76
	  (license 14) ........ ................

	* res/res_config_sqlite.c, /: Merged revisions 131753 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r131753 | tilghman | 2008-07-17 13:36:34 -0500 (Thu, 17 Jul 2008)
	  | 6 lines Fix memory leaks (closes issue #13099) Reported by:
	  gknispel_proformatique Patches:
	  res_config_sqlite_leak_on_error.patch uploaded by gknispel
	  (license 261) ........

2008-07-17 18:15 +0000 [r131718]  Brett Bryant <bbryant@digium.com>

	* /, main/features.c: Merged revisions 131717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131717 |
	  bbryant | 2008-07-17 13:14:42 -0500 (Thu, 17 Jul 2008) | 8 lines
	  Fix a memory leak in register_group_feature when attempting to
	  register a feature without specifying a group or feature to
	  register. (closes issue #13101) Reported by: eliel Patches:
	  features.c.patch uploaded by eliel (license 64) ........

2008-07-17 15:46 +0000 [r131682]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_sqlite.c, /: Merged revisions 131681 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r131681 | tilghman | 2008-07-17 10:45:25 -0500 (Thu, 17 Jul 2008)
	  | 4 lines Fix memory leak. (Closes issue #13096) Reported by
	  gknispel_proformatique ........

2008-07-16 23:56 +0000 [r131571]  Steve Murphy <murf@digium.com>

	* /: The commit from 131570 should not be applied to 1.6.0, as it
	  is not as necessary, because log_show_lock in trunk is not
	  available in 1.6.0, and is estimated to be the only function that
	  might care about the lock_addr values.

2008-07-16 22:18 +0000 [r131493]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 131492 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r131492 | bbryant | 2008-07-16 17:17:36 -0500
	  (Wed, 16 Jul 2008) | 14 lines Merged revisions 131491 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131491 | bbryant | 2008-07-16 17:17:07 -0500 (Wed, 16 Jul 2008)
	  | 6 lines Fix a bug in iax2 registration that allowed peers to
	  register with case-insensitive names (user_cmp_cb and peer_cmp_cb
	  are now both case-sensitive). (closes issue #13091) ........
	  ................

2008-07-16 21:54 +0000 [r131455-131486]  Brett Bryant <bbryant@digium.com>

	* /, funcs/func_sysinfo.c: Merged revisions 131484 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r131484 | bbryant | 2008-07-16 16:54:08 -0500 (Wed, 16 Jul 2008)
	  | 4 lines Fixes sysinfo operator issue also fixed elsewhere in
	  r131445. (issue #13057) ........

	* main/asterisk.c, /: Merged revisions 131445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131445 |
	  bbryant | 2008-07-16 16:24:18 -0500 (Wed, 16 Jul 2008) | 9 lines
	  Fixes an issue with "core show sysinfo" that used the wrong
	  operator to calculate the number of bytes from a sysinfo
	  structure. unsigned long. (closes issue #13057) Reported by:
	  eliel Patches: asterisk.c.patch uploaded by eliel (license 64)
	  ........

2008-07-16 20:48 +0000 [r131423]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 131422 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r131422 | russell | 2008-07-16 15:48:27 -0500
	  (Wed, 16 Jul 2008) | 15 lines Merged revisions 131421 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131421 | russell | 2008-07-16 15:47:53 -0500 (Wed, 16 Jul 2008)
	  | 7 lines Always ensure that the channel's tech_pvt reference is
	  NULL after calling the destroy callback. (closes issue #13060)
	  Reported by: jpgrayson Patches: chan_iax2_tech_pvt_crash.patch
	  uploaded by jpgrayson (license 492) ........ ................

2008-07-16 20:24 +0000 [r131301-131378]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 131375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131375 | mmichelson | 2008-07-16 15:24:12 -0500 (Wed, 16 Jul
	  2008) | 22 lines Merged revisions 131369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131369 | mmichelson | 2008-07-16 15:23:02 -0500 (Wed, 16 Jul
	  2008) | 14 lines Move the init_queue call back to where it used
	  to be (changed Sept 12 last year). It was moved then to prevent a
	  memory leak. Since then, the same memory leak recurred and was
	  fixed in a better way. Now it has been found that the placement
	  of this init_queue call can cause problems if a realtime queue
	  has values changed to an empty string. The problem is that the
	  default value for that queue parameter would not be set. (closes
	  issue #13084) Reported by: elbriga ........ ................

	* res/res_config_sqlite.c, /: Merged revisions 131361 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r131361 | mmichelson | 2008-07-16 14:57:02 -0500 (Wed, 16 Jul
	  2008) | 9 lines Don't try to dereference the dbfile pointer if we
	  know that it's NULL. (closes issue #13092) Reported by:
	  gknispel_proformatique Patches:
	  trunk_sqlite_check_vars_null.patch uploaded by gknispel (license
	  261) ........

	* /, apps/app_queue.c: Merged revisions 131358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131358 | mmichelson | 2008-07-16 14:37:42 -0500 (Wed, 16 Jul
	  2008) | 14 lines Merged revisions 131357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131357 | mmichelson | 2008-07-16 14:37:08 -0500 (Wed, 16 Jul
	  2008) | 6 lines Apparently, "thread safety" is important,
	  whatever that means. :P (Thanks Russell!) ........
	  ................

	* /, apps/app_queue.c: Merged revisions 131300 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131300 | mmichelson | 2008-07-16 13:59:27 -0500 (Wed, 16 Jul
	  2008) | 21 lines Merged revisions 131299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131299 | mmichelson | 2008-07-16 13:57:34 -0500 (Wed, 16 Jul
	  2008) | 13 lines Make absolutely certain that the transfer
	  datastore is removed from the calling channel once the caller is
	  finished in the queue. This could have weird con- sequences when
	  dialing local queue members when multiple transfers occur on a
	  single call. Also fixed a memory leak that would occur when an
	  attended transfer occurred from a queue member. (closes issue
	  #13047) Reported by: festr ........ ................

2008-07-16 18:20 +0000 [r131248]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, /: Merged revisions 131243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131243 | murf | 2008-07-16 11:59:33 -0600 (Wed, 16 Jul 2008) |
	  27 lines Merged revisions 131242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131242 | murf | 2008-07-16 11:53:43 -0600 (Wed, 16 Jul 2008) |
	  19 lines (closes issue #13090) Reported by: murf The problem was
	  that, esoteric as it is, because the hangerupper context
	  immediately preceded the std-priv-extent macro, that the checking
	  code accidentally would fall from traversing hangerupper into the
	  std-priv-exten macro, where it would hit the hangerupper in the
	  'includes', and proceed into an infinite recursion. A small fix
	  to traverse into the statements of the context instead of the
	  context solves this issue. I also added some commented out
	  printfs for debug, which were pretty handy in the face of a dorky
	  gdb. This was a problem around since the package was first
	  written; but evidently pretty rare in turning up in the field.
	  ........ ................

2008-07-16 15:04 +0000 [r131206]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_agent.c: add missing terminator argument for
	  ast_event_subscribe(). Without it the function will randomly walk
	  on the stack possibly causing a panic

2008-07-16 00:54 +0000 [r131168]  Tilghman Lesher <tlesher@digium.com>

	* /, main/logger.c: Merged revisions 131166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131166 |
	  tilghman | 2008-07-15 19:52:48 -0500 (Tue, 15 Jul 2008) | 3 lines
	  Fix rotate strategy (Closes issue #13086) ........

2008-07-15 23:41 +0000 [r131131]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 131129 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131129 |
	  murf | 2008-07-15 17:36:19 -0600 (Tue, 15 Jul 2008) | 21 lines
	  (closes issue #12960) Reported by: mnicholson Spent most of the
	  day on this bug, and the solution was so simple. Just had to find
	  and understand the problem. The problem was, that the routine to
	  copy the existing switches, includes, and ignorepats from the old
	  context to the new one, wasn't getting called when the context is
	  already existent. (In other words, if AEL is adding a new context
	  to the mix, they get copied, but if pbx_config already defined a
	  context, then the copy wasn't happening. This made no sense, so I
	  moved the call to copy the includes & etc, no matter the case.
	  ........

2008-07-15 18:47 +0000 [r131073]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c: Merged revisions 131072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r131072 |
	  russell | 2008-07-15 13:46:40 -0500 (Tue, 15 Jul 2008) | 5 lines
	  Fix a couple of places in res_agi where the agi_commands lock
	  would not be released, causing a deadlock. (Reported by mvanbaak
	  in #asterisk-dev, discovered by bbryant's change to the lock
	  tracking code to yell at you if a thread exits with a lock still
	  held) ........

2008-07-15 18:29 +0000 [r131060]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, main/manager.c, /, channels/chan_sip.c: Merged
	  revisions 131044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131044 | tilghman | 2008-07-15 13:25:34 -0500 (Tue, 15 Jul 2008)
	  | 16 lines Merged revisions 130959 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130959 | tilghman | 2008-07-15 12:19:13 -0500 (Tue, 15 Jul 2008)
	  | 8 lines astman_send_error does not need a newline appended --
	  the API takes care of that for us. (closes issue #13068) Reported
	  by: gknispel_proformatique Patches:
	  asterisk_1_4_astman_send.patch uploaded by gknispel (license 261)
	  asterisk_trunk_astman_send.patch uploaded by gknispel (license
	  261) ........ ................

2008-07-15 18:00 +0000 [r131014]  Michiel van Baak <michiel@vanbaak.info>

	* main/cdr.c, /: Merged revisions 131013 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r131013 | mvanbaak | 2008-07-15 19:49:48 +0200 (Tue, 15 Jul 2008)
	  | 15 lines Merged revisions 131012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r131012 | mvanbaak | 2008-07-15 19:47:15 +0200 (Tue, 15 Jul 2008)
	  | 7 lines remove 4 lines of redundant code. (closes issue #13080)
	  Reported by: gknispel_proformatique Patches:
	  trunk_ast_cdr_setapp.patch uploaded by gknispel (license 261)
	  ........ ................

2008-07-15 13:14 +0000 [r130946]  Steve Murphy <murf@digium.com>

	* utils/conf2ael.c, utils/Makefile, res/ael/pval.c,
	  channels/chan_skinny.c, res/ael/ael.tab.c, main/features.c,
	  pbx/pbx_ael.c, res/ael/ael_lex.c, res/ael/ael.tab.h,
	  utils/ael_main.c, include/asterisk/pbx.h, utils/extconf.c,
	  res/ael/ael.flex, pbx/pbx_config.c, apps/app_stack.c,
	  apps/app_dial.c, main/pbx.c, include/asterisk/pval.h, /,
	  channels/chan_sip.c, apps/app_meetme.c, res/ael/ael.y,
	  channels/chan_iax2.c, apps/app_queue.c: Merged revisions 130145
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  Merging this rev from trunk to 1.6.0 was not simple. Why? Because
	  we've enhanced trunk to do a [fast] merge-and-delete operation
	  which also solved problems with contexts having entries from
	  different registrars. Fast as in the amount of time the contexts
	  are locked down. That *is* fast, but traversing the entire
	  dialplan looking for priorities to delete takes more time
	  overall. This particular fix involved pulling in those
	  enhancements from trunk, along with all the various fixes and
	  refinements made along the way. Merging all this from trunk into
	  1.6 involved: a. mergetrunk6 in the stuff from 130145; b. revert
	  all but the prop changes c. catalog all revisions to pbx.c since
	  1.6.0 was forked (at rev 105596). d. catalog all revisions to
	  pbx.c in trunk since 1.6.0 was forked, making special note of all
	  revs that were not merged into 1.6.0. e. study each rev in trunk
	  not applied to 1.6.0, and determine if it was involved in the
	  merge_and_delete enhancements in trunk. 25 commits were done in
	  1.6.0, all but one (106306) was a merge from trunk. Trunk had 22
	  additional changes, of which 7 were involved in the
	  merge_and_delete enhancements: 106757 108894 109169 116461 123358
	  130145 130297 f. Go to trunk and collect patches, one by one, of
	  the changes made by each rev across the entire source tree, using
	  svn diff -c <num> > pfile g. Apply each patch in order to 1.6.0,
	  and resolve all failures and compilation problems before
	  proceding to the next patch. h. test the stuff. i. profit!
	  ........ r130145 | murf | 2008-07-11 12:24:31 -0600 (Fri, 11 Jul
	  2008) | 40 lines (closes issue #13041) Reported by: eliel Tested
	  by: murf (closes issue #12960) Reported by: mnicholson In this
	  'omnibus' fix, I **think** I solved both the problem in 13041,
	  where unloading pbx_ael.so caused crashes, or incomplete removal
	  of previous registrar'ed entries. And I added code to completely
	  remove all includes, switches, and ignorepats that had a matching
	  registrar entry, which should appease 12960. I also added a lot
	  of seemingly useless brackets around single statement if's, which
	  helped debug so much that I'm leaving them there. I added a
	  routine to check the correlation between the extension tree lists
	  and the hashtab tables. It can be amazingly helpful when you have
	  lots of dialplan stuff, and need to narrow down where a problem
	  is occurring. It's ifdef'd out by default. I cleaned up the code
	  around the new CIDmatch code. It was leaving hanging extens with
	  bad ptrs, getting confused over which objects to remove, etc. I
	  tightened up the code and changed the call to remove_exten in the
	  merge_and_delete code. I added more conditions to check for empty
	  context worthy of deletion. It's not empty if there are any
	  includes, switches, or ignorepats present. If I've missed
	  anything, please re-open this bug, and be prepared to supply
	  example dialplan code. ........

2008-07-15 00:00 +0000 [r130891]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 130890 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r130890 | tilghman | 2008-07-14 18:59:54 -0500
	  (Mon, 14 Jul 2008) | 16 lines Merged revisions 130889 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130889 | tilghman | 2008-07-14 18:59:13 -0500 (Mon, 14 Jul 2008)
	  | 8 lines Override the callerid in all cases when the callerid is
	  set in the user, not just when a remote callerid is set. Also, if
	  not set in the user, allow the remote CallerID to pass through.
	  (closes issue #12875) Reported by: dimas Patches:
	  20080714__bug12875.diff.txt uploaded by Corydon76 (license 14)
	  ........ ................

2008-07-14 22:24 +0000 [r130795-130855]  Mark Michelson <mmichelson@digium.com>

	* main/asterisk.c, /: Merged revisions 130854 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130854 |
	  mmichelson | 2008-07-14 17:22:57 -0500 (Mon, 14 Jul 2008) | 9
	  lines Fix a memory leak in the case that /dev/null cannot be
	  opened when running startup commands from cli.conf (closes issue
	  #13066) Reported by: eliel Patches: asterisk.c.patch uploaded by
	  eliel (license 64) ........

	* apps/app_dial.c, /: Merged revisions 130794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130794 | mmichelson | 2008-07-14 12:54:11 -0500 (Mon, 14 Jul
	  2008) | 16 lines Merged revisions 130792 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130792 | mmichelson | 2008-07-14 12:50:21 -0500 (Mon, 14 Jul
	  2008) | 8 lines Add a check to the CAN_EARLY_BRIDGE macro in
	  app_dial to be sure there are no audiohooks present on the
	  channels involved. This fixed a one-way audio situation I had in
	  my test setup. I couldn't find any open issues that suggested
	  one-way audio with regards to mixmonitor (or other audiohook)
	  usage, though. ........ ................

2008-07-14 17:22 +0000 [r130752]  Michiel van Baak <michiel@vanbaak.info>

	* main/dnsmgr.c, /: Merged revisions 130744 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130744 | mvanbaak | 2008-07-14 19:21:18 +0200 (Mon, 14 Jul 2008)
	  | 18 lines Merged revisions 130735 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130735 | mvanbaak | 2008-07-14 19:10:21 +0200 (Mon, 14 Jul 2008)
	  | 10 lines notify the user that dnsmgr refresh wont work when
	  dnsmgr is not enabled. Previously this command would
	  automagically appear and disappear. This was confusing. (closes
	  issue #12796) Reported by: chappell Patches:
	  dnsmgr_refresh_3.diff uploaded by chappell (license 8) Tested by:
	  russell, chappell, mvanbaak ........ ................

2008-07-14 10:40 +0000 [r130636-130637]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/astobj.h: Merged revisions 129987 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129987 | russell | 2008-07-11 09:22:44 -0500
	  (Fri, 11 Jul 2008) | 10 lines Merged revisions 129970 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129970 | russell | 2008-07-11 09:18:43 -0500 (Fri, 11 Jul 2008)
	  | 2 lines add a simple ASTOBJ_TRYWRLOCK macro ... ........
	  ................

	* /, main/audiohook.c: Merged revisions 130635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130635 | russell | 2008-07-14 05:39:23 -0500 (Mon, 14 Jul 2008)
	  | 10 lines Merged revisions 130634 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130634 | russell | 2008-07-14 05:38:14 -0500 (Mon, 14 Jul 2008)
	  | 2 lines Bump up the debug level for a message. ........
	  ................

2008-07-13 23:20 +0000 [r130575-130582]  Michiel van Baak <michiel@vanbaak.info>

	* /, doc/tex/Makefile, build_tools/prep_tarball, res/Makefile:
	  Merged revisions 130578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130578 |
	  mvanbaak | 2008-07-14 01:14:03 +0200 (Mon, 14 Jul 2008) | 15
	  lines Make all sed calls Posix sed compatible. To make sure
	  nobody commits script-modified files we first make a backup of
	  asterisk.tex, run the script, generate the pdf and / or html, and
	  put the original asterisk.tex back. This will guard us for the
	  stuff that happened before that someone committed a locally
	  modified asterisk.tex, with changes done by this script. (closes
	  issue #13062) Reported by: mvanbaak Patches:
	  sed_without-i-v3.diff uploaded by mvanbaak (license 7) Tested by:
	  mvanbaak Feedback from Corydon. Thanks for taking the time to go
	  through this. ........

	* main/manager.c, /: Merged revisions 130574 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130574 | mvanbaak | 2008-07-14 00:50:31 +0200 (Mon, 14 Jul 2008)
	  | 16 lines Merged revisions 130573 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130573 | mvanbaak | 2008-07-14 00:48:51 +0200 (Mon, 14 Jul 2008)
	  | 8 lines fix memory leak when originate from manager cannot
	  create a thread (closes issue #13069) Reported by:
	  gknispel_proformatique Patches:
	  asterisk_trunk_action_originate.patch uploaded by gknispel
	  (license 261) Tested by: gknispel_proformatique, mvanbaak
	  ........ ................

2008-07-13 17:59 +0000 [r130516]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 130515 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r130515 | tilghman | 2008-07-13 12:58:47 -0500
	  (Sun, 13 Jul 2008) | 12 lines Merged revisions 130514 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130514 | tilghman | 2008-07-13 12:56:10 -0500 (Sun, 13 Jul 2008)
	  | 4 lines Reverting 2 changesets, as it breaks incoming IAX2
	  calls (Related to issue #12963) Reported by: mvanbaak ........
	  ................

2008-07-13 15:00 +0000 [r130480]  Michiel van Baak <michiel@vanbaak.info>

	* doc/tex/asterisk.tex, /: Merged revisions 130479 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r130479 | mvanbaak | 2008-07-13 16:58:40 +0200 (Sun, 13 Jul 2008)
	  | 3 lines restore ASTERISKVERSION marker to asterisk.tex. This
	  got lost in commit 97634 ........

2008-07-13 02:35 +0000 [r130445]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_agent.c: Merged revisions 130444 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r130444 | tilghman | 2008-07-12 21:34:32 -0500 (Sat, 12 Jul 2008)
	  | 2 lines Unlock list before returning ........

2008-07-11 21:39 +0000 [r130294]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 130293 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r130293 | mattf | 2008-07-11 16:36:26 -0500 (Fri, 11 Jul 2008) |
	  1 line Support new TRANSPORT definitions in libss7 ........

2008-07-11 20:04 +0000 [r130238]  Mark Michelson <mmichelson@digium.com>

	* /, main/audiohook.c: Merged revisions 130237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130237 | mmichelson | 2008-07-11 15:03:55 -0500 (Fri, 11 Jul
	  2008) | 11 lines Merged revisions 130236 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130236 | mmichelson | 2008-07-11 15:03:23 -0500 (Fri, 11 Jul
	  2008) | 3 lines Remove redundant logic ........ ................

2008-07-11 19:57 +0000 [r130231-130235]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /, channels/chan_agent.c, utils/astman.c:
	  Merged revisions 130230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130230 |
	  tilghman | 2008-07-11 14:40:55 -0500 (Fri, 11 Jul 2008) | 2 lines
	  Fix trunk breakage ........

2008-07-11 19:14 +0000 [r130175]  Mark Michelson <mmichelson@digium.com>

	* /, main/audiohook.c: Merged revisions 130174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130174 | mmichelson | 2008-07-11 14:14:15 -0500 (Fri, 11 Jul
	  2008) | 15 lines Merged revisions 130173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130173 | mmichelson | 2008-07-11 14:13:29 -0500 (Fri, 11 Jul
	  2008) | 7 lines Fix a typo in audiohook_read_frame_both. While
	  this change has not been proven to fix any specific issue, it is
	  incorrect and could cause unforeseen problems. ........
	  ................

2008-07-11 18:53 +0000 [r130171]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 130170 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r130170 | tilghman | 2008-07-11 13:52:42 -0500
	  (Fri, 11 Jul 2008) | 15 lines Merged revisions 130169 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130169 | tilghman | 2008-07-11 13:51:56 -0500 (Fri, 11 Jul 2008)
	  | 7 lines Ensure that a destination callno of 0 will not match
	  for frames that do not start a dialog (new, lagrq, and ping).
	  (closes issue #12963) Reported by: russellb Patches:
	  chan_iax2_dup_new_fix4.patch uploaded by jpgrayson (license 492)
	  ........ ................

2008-07-11 18:33 +0000 [r130168]  Sean Bright <sean.bright@gmail.com>

	* /, channels/chan_sip.c: Merged revisions 130167 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130167 |
	  seanbright | 2008-07-11 14:32:26 -0400 (Fri, 11 Jul 2008) | 1
	  line Missed one. Formatting only. ........

2008-07-11 18:14 +0000 [r130130]  Brett Bryant <bbryant@digium.com>

	* main/cli.c, channels/chan_jingle.c, channels/chan_dahdi.c,
	  channels/chan_skinny.c, main/abstract_jb.c, apps/app_minivm.c,
	  codecs/codec_resample.c, codecs/codec_dahdi.c,
	  apps/app_chanspy.c, main/asterisk.c, apps/app_milliwatt.c,
	  main/dsp.c, codecs/codec_g722.c, /, channels/chan_sip.c,
	  main/threadstorage.c, utils/astman.c, main/utils.c,
	  channels/chan_gtalk.c, pbx/dundi-parser.c: Merged revisions
	  130129 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130129 |
	  bbryant | 2008-07-11 13:09:35 -0500 (Fri, 11 Jul 2008) | 8 lines
	  Janitor patch to change uses of sizeof to ARRAY_LEN (closes issue
	  #13054) Reported by: pabelanger Patches: ARRAY_LEN.patch2
	  uploaded by pabelanger (license 224) Tested by: seanbright
	  ........

2008-07-11 17:30 +0000 [r130127]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_agent.c: Merged revisions 130126 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r130126 | tilghman | 2008-07-11 12:29:24 -0500
	  (Fri, 11 Jul 2008) | 17 lines Merged revisions 130102 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130102 | tilghman | 2008-07-11 11:50:42 -0500 (Fri, 11 Jul 2008)
	  | 9 lines Pass the devicestate from an underlying channel up
	  through the Agent channel. This should make the Agent always
	  report the correct device state, even when the underlying channel
	  is used for other purposes. (closes issue #12773) Reported by:
	  davidw Patches: 20080710__bug12773.diff.txt uploaded by Corydon76
	  (license 14) Tested by: davidw ........ ................

2008-07-11 16:18 +0000 [r129936-130045]  Kevin P. Fleming <kpfleming@digium.com>

	* doc/ss7.txt, /, contrib/utils/zones2indications.c, CHANGES:
	  Merged revisions 130044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r130044 |
	  kpfleming | 2008-07-11 11:18:01 -0500 (Fri, 11 Jul 2008) | 2
	  lines clean up a bunch more Zaptel-related references ........

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /,
	  configure, include/asterisk/autoconfig.h.in, configure.ac: Merged
	  revisions 130040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r130040 | kpfleming | 2008-07-11 10:57:17 -0500 (Fri, 11 Jul
	  2008) | 12 lines Merged revisions 130039 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r130039 | kpfleming | 2008-07-11 10:41:56 -0500 (Fri, 11 Jul
	  2008) | 4 lines add support for a configuration parameter for
	  'inband audio during RELEASE', which is currently mandatory in
	  libpri-1.4.4 but will become configurable in libpri-1.4.5 later
	  today (related to issue #13042) ........ ................

	* /, main/astmm.c: Merged revisions 129968 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r129968 | kpfleming | 2008-07-11 09:16:15 -0500 (Fri, 11 Jul
	  2008) | 18 lines Merged revisions 129966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129966 | kpfleming | 2008-07-11 09:03:52 -0500 (Fri, 11 Jul
	  2008) | 5 lines fix a flaw found while experimenting with
	  structure alignment and padding; low-fence checking would not
	  work properly on 64-bit platforms, because the compiler was
	  putting 4 bytes of padding between the fence field and the
	  allocation memory block added a very obvious runtime warning if
	  this condition reoccurs, so the developer who broke it can be
	  chastised into fixing it :-) ........ r129967 | kpfleming |
	  2008-07-11 09:03:52 -0500 (Fri, 11 Jul 2008) | 5 lines simplify
	  calculation ........ ................

	* /, sounds/Makefile: Merged revisions 129916 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r129916 | kpfleming | 2008-07-11 07:21:29 -0500 (Fri, 11 Jul
	  2008) | 10 lines Merged revisions 129907 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129907 | kpfleming | 2008-07-11 07:15:42 -0500 (Fri, 11 Jul
	  2008) | 2 lines don't attempt to set user/group ownership of
	  extracted sound files (reported on asterisk-users) ........
	  ................

2008-07-11 01:01 +0000 [r129865]  Sean Bright <sean.bright@gmail.com>

	* res/res_config_pgsql.c, /, res/res_config_ldap.c: Merged
	  revisions 129864 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129864 |
	  seanbright | 2008-07-10 20:55:06 -0400 (Thu, 10 Jul 2008) | 1
	  line Fix some usages of snprintf, and clarify a couple variable
	  names. ........

2008-07-10 22:07 +0000 [r129764-129805]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 129804 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129804 | tilghman | 2008-07-10 17:06:07 -0500
	  (Thu, 10 Jul 2008) | 16 lines Merged revisions 129803 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129803 | tilghman | 2008-07-10 16:57:05 -0500 (Thu, 10 Jul 2008)
	  | 8 lines Correctly deal with duplicate NEW frames (due to
	  retransmission). Also, fixup the destination call number matching
	  to be more strict and reliable. (closes issue #12963) Reported
	  by: jpgrayson Patches: chan_iax2_dup_new_fix3.patch uploaded by
	  jpgrayson (license 492) Tested by: jpgrayson, Corydon76 ........
	  ................

	* res/res_config_odbc.c, /: Merged revisions 129758 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129758 | tilghman | 2008-07-10 16:23:23 -0500
	  (Thu, 10 Jul 2008) | 10 lines Merged revisions 129741 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129741 | tilghman | 2008-07-10 16:19:48 -0500 (Thu, 10 Jul 2008)
	  | 2 lines Oops ........ ................

2008-07-10 21:05 +0000 [r129739]  Terry Wilson <twilson@digium.com>

	* Makefile, /: Merged revisions 129738 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129738 |
	  twilson | 2008-07-10 15:56:20 -0500 (Thu, 10 Jul 2008) | 2 lines
	  Move phoneprov config files to be installed with 'make samples'
	  so changes aren't inadvertently lost on a 'make install' ........

2008-07-10 19:14 +0000 [r129685]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_queue.c: Merged revisions 129684 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129684 |
	  bbryant | 2008-07-10 14:13:12 -0500 (Thu, 10 Jul 2008) | 8 lines
	  Fixes a bug where the interface for a queue member gets reloaded
	  as the state_interface, if a state_interface was set, on reload
	  because the state_interface isn't stored in the ast_db. (closes
	  issue #13043) Reported by: jvandal Patches: app_queue.patch
	  uploaded by jvandal (license 413) ........

2008-07-10 18:20 +0000 [r129640-129647]  Sean Bright <sean.bright@gmail.com>

	* /, channels/chan_sip.c: Merged revisions 129642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129642 |
	  seanbright | 2008-07-10 14:19:17 -0400 (Thu, 10 Jul 2008) | 1
	  line A couple more minor text changes ........

	* /, channels/chan_sip.c: Merged revisions 129638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129638 |
	  seanbright | 2008-07-10 14:16:21 -0400 (Thu, 10 Jul 2008) | 1
	  line Remove extraneous \n. Pointed out by eliel on #asterisk-dev.
	  ........

2008-07-10 16:13 +0000 [r129570]  Russell Bryant <russell@digium.com>

	* sample.call, /: Merged revisions 129569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r129569 | russell | 2008-07-10 11:12:51 -0500 (Thu, 10 Jul 2008)
	  | 11 lines Merged revisions 129567 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129567 | russell | 2008-07-10 11:03:59 -0500 (Thu, 10 Jul 2008)
	  | 3 lines Note that pbx_spool.so is the module used for call
	  files (inspired by a question in #asterisk) ........
	  ................

2008-07-10 14:09 +0000 [r129504-129507]  Sean Bright <sean.bright@gmail.com>

	* /, main/editline: Merged revisions 129503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129503 |
	  seanbright | 2008-07-10 09:54:29 -0400 (Thu, 10 Jul 2008) | 2
	  lines Update svn:ignore ........

2008-07-09 19:41 +0000 [r129438]  Mark Michelson <mmichelson@digium.com>

	* main/rtp.c, /: Merged revisions 129437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r129437 | mmichelson | 2008-07-09 14:40:30 -0500 (Wed, 09 Jul
	  2008) | 21 lines Merged revisions 129436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129436 | mmichelson | 2008-07-09 14:32:20 -0500 (Wed, 09 Jul
	  2008) | 13 lines Fix a problem where inbound rfc2833 audio would
	  be sent to the core instead of being P2P bridged. When the core
	  regenerated the rfc2833 packet for the outbound leg, the SSRC
	  would be different than the RTP audio on the call leg causing
	  DTMF detection issues on the far end. (closes issue #12955)
	  Reported by: tonyredstone Patches: dynamic_rtp.patch uploaded by
	  tsearle (license 373) Tested by: tonyredstone ........
	  ................

2008-07-09 16:01 +0000 [r129400]  Matthew Fredrickson <creslin@digium.com>

	* main/pbx.c, /: Merged revisions 129399 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129399 |
	  mattf | 2008-07-09 10:57:06 -0500 (Wed, 09 Jul 2008) | 1 line Add
	  Proceeding() application (#13025) ........

2008-07-09 13:46 +0000 [r129345]  Sean Bright <sean.bright@gmail.com>

	* main/editline/makelist (removed), main/editline/makelist.in
	  (added), /, main/editline/configure, main/editline/Makefile.in,
	  main/editline/configure.in: Merged revisions 129344 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129344 | seanbright | 2008-07-09 09:44:43 -0400
	  (Wed, 09 Jul 2008) | 12 lines Merged revisions 129343 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129343 | seanbright | 2008-07-09 09:41:21 -0400 (Wed, 09 Jul
	  2008) | 4 lines Look for the system installed awk instead of
	  assuming it's at /usr/bin/awk. Pointed out by jmls via
	  #asterisk-dev. ........ ................

2008-07-08 22:56 +0000 [r129160-129271]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 129270 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r129270 | mmichelson | 2008-07-08 17:56:12 -0500 (Tue, 08 Jul
	  2008) | 3 lines Fix compilation error when IMAP storage is
	  enabled ........

2008-07-08 21:04 +0000 [r129157]  Brett Bryant <bbryant@digium.com>

	* main/dns.c, main/srv.c, /: Merged revisions 129156 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r129156 | bbryant | 2008-07-08 16:00:01 -0500 (Tue, 08 Jul 2008)
	  | 6 lines Fix a bug in SRV lookups where dnsmgr would discard
	  everything but the first SRV result from DNS before processing
	  weights and priorities and dns_parse_answer wouldn't report that
	  there were no records in DNS unless a failure occured. Also fixed
	  a bug where dnsmgr_refresh would report that a entry was being
	  changed when ast_gethostbyname had failed. ........

2008-07-08 20:31 +0000 [r129049-129153]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /, channels/chan_sip.c,
	  include/asterisk/causes.h: Merged revisions 129152 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129152 | tilghman | 2008-07-08 15:30:29 -0500
	  (Tue, 08 Jul 2008) | 16 lines Merged revisions 129149 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129149 | tilghman | 2008-07-08 15:27:47 -0500 (Tue, 08 Jul 2008)
	  | 8 lines Cause SIP to return a 480 instead of a 404 when a sip
	  peer exists, but is not registered. (closes issue #12885)
	  Reported by: ibc Patches: 20080701__bug12885__2.diff.txt uploaded
	  by Corydon76 (license 14) Tested by: ibc ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 129048 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r129048 | tilghman | 2008-07-08 11:49:01 -0500
	  (Tue, 08 Jul 2008) | 15 lines Merged revisions 129047 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r129047 | tilghman | 2008-07-08 11:45:23 -0500 (Tue, 08 Jul 2008)
	  | 7 lines Timestamp decoding for video mini-frames is bogus,
	  because the timestamp only includes 15 bits, unlike voice frames,
	  which contain a 16-bit timestamp. (closes issue #13013) Reported
	  by: jpgrayson Patches: chan_iax2_unwrap_ts.patch uploaded by
	  jpgrayson (license 492) ........ ................

2008-07-08 16:41 +0000 [r129041-129046]  Brett Bryant <bbryant@digium.com>

	* main/rtp.c, main/channel.c, channels/chan_dahdi.c,
	  main/manager.c, formats/format_pcm.c, main/logger.c,
	  main/callerid.c, apps/app_parkandannounce.c, apps/app_adsiprog.c,
	  main/pbx.c, main/frame.c, /, channels/chan_sip.c,
	  apps/app_meetme.c, channels/h323/ast_h323.cxx, res/res_limit.c,
	  main/acl.c, channels/iax2-provision.c, pbx/dundi-parser.c,
	  channels/chan_iax2.c: Merged revisions 129045 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129045 |
	  bbryant | 2008-07-08 11:40:28 -0500 (Tue, 08 Jul 2008) | 7 lines
	  Janitor project to convert sizeof to ARRAY_LEN macro. (closes
	  issue #13002) Reported by: caio1982 Patches:
	  janitor_arraylen5.diff uploaded by caio1982 (license 22) ........

	* /, channels/chan_sip.c: Merged revisions 127621 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127621 |
	  bbryant | 2008-07-02 17:16:29 -0500 (Wed, 02 Jul 2008) | 1 line
	  Update transport= in sip so that the option is not broken from a
	  recent commit. ........

	* /, channels/chan_sip.c: Merged revisions 127434 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127434 |
	  bbryant | 2008-07-02 12:27:36 -0500 (Wed, 02 Jul 2008) | 1 line
	  Fix to sip_parse_host so that it passes the correct information
	  to sip_registry. ........

2008-07-08 14:18 +0000 [r129007]  Russell Bryant <russell@digium.com>

	* /, apps/app_fax.c: Merged revisions 129006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r129006 |
	  russell | 2008-07-08 09:17:37 -0500 (Tue, 08 Jul 2008) | 9 lines
	  Update app_fax for better compatibility with spandsp 0.0.5. Add a
	  call to t38_terminal_release, and make sure that the phase E
	  handler gets called with proper status. (closes issue #13020)
	  Reported by: dimas Patches: v1-appfax.patch uploaded by dimas
	  (license 88) ........

2008-07-08 10:06 +0000 [r128913-128952]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 128951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r128951 | oej | 2008-07-08 12:02:12 +0200 (Tis, 08 Jul 2008) | 19
	  lines Merged revisions 128950 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128950 | oej | 2008-07-08 11:52:21 +0200 (Tis, 08 Jul 2008) | 11
	  lines Don't hangup the call if we can't resolve the Contact if
	  there's a proxy route set for the call. ---- This comment was
	  added a while ago and today it hit me badly. /* OEJ: Possible
	  issue that may need a check: If we have a proxy route between us
	  and the device, should we care about resolving the contact or
	  should we just send it? */ ........ ................

	* /, channels/chan_sip.c: Merged revisions 128927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r128927 | oej | 2008-07-08 11:26:37 +0200 (Tis, 08 Jul 2008) | 15
	  lines Merged revisions 128912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128912 | oej | 2008-07-08 11:06:08 +0200 (Tis, 08 Jul 2008) | 7
	  lines Fix issues where repeated messages where ignored, but
	  retransmitted reliably instead of unreliably. Reported by: johan
	  Patches: 12746.txt uploaded by oej (license 306) Tested by: johan
	  (issue #12746) ........ ................

2008-07-08 00:03 +0000 [r128855-128858]  Tilghman Lesher <tlesher@digium.com>

	* /: Merged revisions 128857 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r128857 | tilghman | 2008-07-07 19:02:11 -0500 (Mon, 07 Jul 2008)
	  | 15 lines Merged revisions 128856 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128856 | tilghman | 2008-07-07 19:01:30 -0500 (Mon, 07 Jul 2008)
	  | 7 lines Check for non-NULL before stripping characters. (closes
	  issue #12954) Reported by: bfsworks Patches:
	  20080701__bug12954.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: deti ........ ................

	* apps/app_voicemail.c, /: Merged revisions 128830 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r128830 | tilghman | 2008-07-07 18:25:39 -0500
	  (Mon, 07 Jul 2008) | 10 lines Merged revisions 128812 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128812 | tilghman | 2008-07-07 18:21:52 -0500 (Mon, 07 Jul 2008)
	  | 2 lines Stop using deprecated method, as requested by Kevin.
	  ........ ................

2008-07-07 22:44 +0000 [r128797]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 128796 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r128796 | russell | 2008-07-07 17:42:30 -0500
	  (Mon, 07 Jul 2008) | 16 lines Merged revisions 128795 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128795 | russell | 2008-07-07 17:41:48 -0500 (Mon, 07 Jul 2008)
	  | 8 lines Fix handling of when a pvt disappears. Properly return
	  the pvt locked and don't hold the pvt lock while destroying the
	  ast_channel. (closes issue #13014) Reported by: jpgrayson
	  Patches: chan_iax2_ast_iax2_new2.patch uploaded by jpgrayson
	  (license 492) ........ ................

2008-07-07 20:51 +0000 [r128739]  Sean Bright <sean.bright@gmail.com>

	* /, channels/chan_iax2.c: Merged revisions 128738 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r128738 | seanbright | 2008-07-07 16:50:29 -0400
	  (Mon, 07 Jul 2008) | 17 lines Merged revisions 128737 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128737 | seanbright | 2008-07-07 16:47:56 -0400 (Mon, 07 Jul
	  2008) | 9 lines Remove spurious trailing whitespace from log
	  messages and fix a spelling error in a log message. (closes issue
	  #13017) Reported by: jpgrayson Patches:
	  chan_iax2_space_after_newline.patch uploaded by jpgrayson
	  (license 492) chan_iax2_spelling.patch uploaded by jpgrayson
	  (license 492) ........ ................

2008-07-07 20:31 +0000 [r128601-128735]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 128733 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r128733 | mmichelson | 2008-07-07 15:30:46 -0500 (Mon, 07 Jul
	  2008) | 3 lines Crap ........

	* apps/app_voicemail.c, /: Merged revisions 128731 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r128731 | mmichelson | 2008-07-07 15:28:33 -0500 (Mon, 07 Jul
	  2008) | 7 lines If imapfolder=foo were set in voicemail.conf,
	  then when calling VoiceMailMain, app_voicemail would attempt to
	  play a file called vm-foo instead of playing vm-INBOX to play the
	  "new" sound file. This commit fixes that issue. This may fix one
	  of the problems reported in issue #12987 ........

	* /, channels/chan_iax2.c: Merged revisions 128640 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r128640 | mmichelson | 2008-07-07 12:09:11 -0500
	  (Mon, 07 Jul 2008) | 18 lines Merged revisions 128639 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r128639 | mmichelson | 2008-07-07 12:02:28 -0500 (Mon, 07 Jul
	  2008) | 10 lines By using the iaxdynamicthreadcount to identify a
	  thread, it was possible for thread identifiers to be duplicated.
	  By using a globally-unique monotonically- increasing integer,
	  this is now avoided. (closes issue #13009) Reported by: jpgrayson
	  Patches: chan_iax2_dyn_threadnum.patch uploaded by jpgrayson
	  (license 492) ........ ................

	* configs/extensions.conf.sample, /, doc/tex/extensions.tex: Merged
	  revisions 128599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128599 |
	  mmichelson | 2008-07-07 09:35:27 -0500 (Mon, 07 Jul 2008) | 6
	  lines Update a few instances of "extensions reload" to "dialplan
	  reload" in the documentation. Patch provided by caio1982 (license
	  22) ........

2008-07-06 20:22 +0000 [r128288-128543]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  128524 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128524 |
	  oej | 2008-07-06 22:11:37 +0200 (SÃ¶n, 06 Jul 2008) | 5 lines -
	  Fixing issues with "sip show settings" - Adding IP address for
	  TCP and/or TLS too if auto-domain is enabled and binding to a
	  different IP address - Fixing documentation in sip.conf.sample
	  ........

	* /, channels/chan_sip.c: Merged revisions 128491 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128491 |
	  oej | 2008-07-06 21:14:06 +0200 (SÃ¶n, 06 Jul 2008) | 3 lines -
	  Remove unused variable "expiry" - Set global_outboundproxy.force
	  at reload. ........

	* doc/realtimetext.txt (added), /: The following patch with
	  references to t140red removed, since it only exists in trunk.
	  Merged revisions 128417 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128417 |
	  oej | 2008-07-06 12:13:45 +0200 (SÃ¶n, 06 Jul 2008) | 3 lines
	  Adding documentation on the T.140 support in Asterisk. This is a
	  function that we're the reference implementation on now. :-)
	  ........

	* /: Merged revisions 128343 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128343 |
	  oej | 2008-07-06 10:10:27 +0200 (SÃ¶n, 06 Jul 2008) | 2 lines
	  Removing the CLI dumpdb command (see asterisk-dev discussion and
	  decision) ........

	* /, channels/chan_sip.c: Merged revisions 128290 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128290 |
	  oej | 2008-07-05 23:55:57 +0200 (LÃ¶r, 05 Jul 2008) | 5 lines
	  Adding doxygen comments to missing parts, moving some #define
	  ...trying to get my head around the thoughts behind the TCP/TLS
	  stuff and figure out what needs to be done to make it useful...
	  ........

	* /, channels/chan_sip.c: Merged revisions 128287 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128287 |
	  oej | 2008-07-05 23:37:57 +0200 (LÃ¶r, 05 Jul 2008) | 3 lines
	  Adding TCP and TLS to "sip show settings". TLS needs to have one
	  configuration per configured domain at some point. ........

	* /: Blocking changes in trunk.

2008-07-05 21:02 +0000 [r128238-128243]  Olle Johansson <oej@edvina.net>

	* /: Keep the "sip-user" structure in 1.6.0, while testing new
	  funky stuff in trunk.

	* /: Blocking the AGi changes from 1.6.0. Let's test them for a
	  while in trunk before a release.

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  128237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128237 |
	  oej | 2008-07-05 22:39:54 +0200 (LÃ¶r, 05 Jul 2008) | 2 lines
	  Make TCP disabled by default (it's considered experimental)
	  ........

	* /, configs/sip.conf.sample: Merged revisions 128236 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r128236 | oej | 2008-07-05 22:37:53 +0200 (LÃ¶r, 05 Jul 2008) | 2
	  lines Reformatting the config sample ........

2008-07-05 15:19 +0000 [r128161]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/asterisk.ldap-schema,
	  contrib/scripts/asterisk.ldif, /: Merged revisions 128160 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r128160 | tilghman | 2008-07-05 10:17:51 -0500 (Sat, 05
	  Jul 2008) | 7 lines LDAP schema updates (closes issue #12860)
	  Reported by: flyn Patches: asterisk.ldif uploaded by suretec
	  (license 70) asterisk.schema uploaded by suretec (license 70)
	  ........

2008-07-05 03:40 +0000 [r128124-128127]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 128125 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r128125 | mattf | 2008-07-04 22:39:07 -0500 (Fri, 04 Jul 2008) |
	  1 line It would help if we actually parsed the ss7_explicitacm
	  option in the config file... ........

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /: Merged
	  revisions 128122 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r128122 |
	  mattf | 2008-07-04 22:26:42 -0500 (Fri, 04 Jul 2008) | 1 line Add
	  option to wait to be able to explicitly send ACM via the
	  Proceeding() application in the dialplan. Also minor
	  documentation update explaining how to setup multiple signalling
	  links within a linkset ........

2008-07-04 16:12 +0000 [r128028-128031]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /, include/asterisk/pbx.h, pbx/pbx_config.c: Merged
	  revisions 128027 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r128027 | tilghman | 2008-07-04 11:06:34 -0500 (Fri, 04 Jul 2008)
	  | 16 lines Merged revisions 127973 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127973 | tilghman | 2008-07-03 22:30:30 -0500 (Thu, 03 Jul 2008)
	  | 8 lines Fix the 'dialplan remove extension' logic, so that it
	  a) works with cidmatch, and b) completes contexts correctly when
	  the extension is ambiguous. (closes issue #12980) Reported by:
	  licedey Patches: 20080703__bug12980.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: Corydon76 ........
	  ................

2008-07-03 22:23 +0000 [r127905]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, apps/Makefile, main/editline/np/vis.c: Merged
	  revisions 127903 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r127903 | kpfleming | 2008-07-03 17:23:04 -0500 (Thu, 03 Jul
	  2008) | 20 lines Merged revisions 127892,127895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127892 | kpfleming | 2008-07-03 17:18:38 -0500 (Thu, 03 Jul
	  2008) | 6 lines a couple of small Solaris-related fixes (closes
	  issue #11885) Reported by: snuffy, asgaroth ........ r127895 |
	  kpfleming | 2008-07-03 17:20:16 -0500 (Thu, 03 Jul 2008) | 3
	  lines remove this, it has been moved to the main Makefile
	  ........ ................

2008-07-03 19:12 +0000 [r127830]  Steve Murphy <murf@digium.com>

	* main/cdr.c, main/channel.c, channels/chan_dahdi.c, main/pbx.c, /,
	  channels/chan_sip.c, main/features.c, include/asterisk/cdr.h:
	  Merged revisions 127793 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r127793 | murf | 2008-07-03 11:16:44 -0600 (Thu, 03 Jul 2008) |
	  38 lines Merged revisions 127663 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127663 | murf | 2008-07-02 18:16:25 -0600 (Wed, 02 Jul 2008) |
	  30 lines The CDRfix4/5/6 omnibus cdr fixes. (closes issue #10927)
	  Reported by: murf Tested by: murf, deeperror (closes issue
	  #12907) Reported by: falves11 Tested by: murf, falves11 (closes
	  issue #11849) Reported by: greyvoip As to 11849, I think these
	  changes fix the core problems brought up in that bug, but perhaps
	  not the more global problems created by the limitations of CDR's
	  themselves not being oriented around transfers. Reopen if necc,
	  but bug reports are not the best medium for enhancement
	  discussions. We need to start a second-generation CDR
	  standardization effort to cover transfers. (closes issue #11093)
	  Reported by: rossbeer Tested by: greyvoip, murf ........
	  ................

2008-07-03 16:50 +0000 [r127790-127792]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 127791 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127791 |
	  oej | 2008-07-03 18:48:23 +0200 (Tor, 03 Jul 2008) | 5 lines Make
	  sure we stop session timers as soon as we start hanging up an
	  active call. May fix issue 12919. ........

	* /, channels/chan_sip.c: Merged revisions 127779 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127779 |
	  oej | 2008-07-03 18:25:59 +0200 (Tor, 03 Jul 2008) | 4 lines
	  Revert some logic for session timers. We do send in-dialog
	  requests that should not have session-timer require headers, like
	  MESSAGE and REFER. So in the future, only add them on requests
	  and responses that are related to INVITEs and re-INVITEs.
	  ........

2008-07-03 16:24 +0000 [r127778]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4: Merged revisions 127767 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127767 |
	  kpfleming | 2008-07-03 11:22:02 -0500 (Thu, 03 Jul 2008) | 2
	  lines some minor fixes found while working on issue #12911 (and
	  block the rev from 1.4 since the equivalent is already here)
	  ........

2008-07-02 21:10 +0000 [r127567]  Mark Michelson <mmichelson@digium.com>

	* /, doc/janitor-projects.txt: Merged revisions 127566 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r127566 | mmichelson | 2008-07-02 16:09:18 -0500 (Wed, 02 Jul
	  2008) | 4 lines Add a janitor project to use ARRAY_LEN instead of
	  in-line sizeof() and division. ........

2008-07-02 20:49 +0000 [r127559-127563]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 127562 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r127562 | mmichelson | 2008-07-02 15:49:08 -0500
	  (Wed, 02 Jul 2008) | 11 lines Merged revisions 127560 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127560 | mmichelson | 2008-07-02 15:47:38 -0500 (Wed, 02 Jul
	  2008) | 3 lines Fix thread-safety of some of the
	  pbx_builtin_getvar_helper calls ........ ................

2008-07-02 19:48 +0000 [r127467-127503]  Tilghman Lesher <tlesher@digium.com>

	* /, main/acl.c: Merged revisions 127466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127466 |
	  tilghman | 2008-07-02 13:31:11 -0500 (Wed, 02 Jul 2008) | 6 lines
	  Solaris fix (closes issue #12949) Reported by: snuffy Patches:
	  bug_12949.diff uploaded by snuffy (license 35) ........

2008-07-02 14:30 +0000 [r127396-127399]  Sean Bright <sean.bright@gmail.com>

	* cdr/cdr_tds.c, /: Merged revisions 127398 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127398 |
	  seanbright | 2008-07-02 10:30:09 -0400 (Wed, 02 Jul 2008) | 1
	  line Fix a bug I noticed while doing the previous merge ........

	* cdr/cdr_tds.c, /, doc/tex/freetds.tex, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, UPGRADE.txt:
	  Merged revisions 126226,126513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r126226 |
	  seanbright | 2008-06-28 17:28:16 -0400 (Sat, 28 Jun 2008) | 8
	  lines Merge in changes from my cdr-tds-conversion branch. This
	  changes the internal implementation from using the volatile
	  libtds, to using the db-lib front end. The unintended side effect
	  of this is that we support (at least) versions 0.62 through 0.82
	  of the FreeTDS distribution without any #ifdef ugliness. (closes
	  issue #12844) Reported by: jcollie ........ r126513 | seanbright
	  | 2008-06-30 07:57:42 -0400 (Mon, 30 Jun 2008) | 4 lines Cast a
	  few more strings to char *, so that we can compile cleanly
	  against FreeTDS 0.60. Update the docs to reflect that we can now
	  compile and run against all modern releases of FreeTDS (0.60
	  through 0.82) ........

	* /: Unblock some revisions so I can merge the cdr_tds changes from
	  trunk

2008-07-02 12:09 +0000 [r127364]  Russell Bryant <russell@digium.com>

	* doc/CODING-GUIDELINES, /: Merged revisions 127363 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r127363 | russell | 2008-07-02 07:08:33 -0500 (Wed, 02 Jul 2008)
	  | 13 lines Add a locking section to the coding guidelines
	  document. This section covers some locking fundamentals, as well
	  as some information on locking as it is used in Asterisk. It
	  describes some of the ways that are used and could be used to
	  achieve deadlock avoidance. It also demonstrates the unfortunate
	  conclusion that with the use of recursive locks, none of the
	  constructs in use today are failsafe from deadlocks. Finally, it
	  makes some recommendations for new code being written. As proper
	  locking strategies is a complex subject, this section still has
	  room for expansion and improvement. This is a result of
	  collaboration between Luigi Rizzo and myself on the asterisk-dev
	  mailing list. ........

2008-07-02 02:49 +0000 [r127298]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 127297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127297 |
	  tilghman | 2008-07-01 21:48:43 -0500 (Tue, 01 Jul 2008) | 12
	  lines Change the global timer B to be dependent on the value of
	  the T1 timer, as recommended in RFC 3261, instead of being
	  hardcoded to 32 seconds. This is important for LANs, as it allows
	  autocongestion to occur much more quickly, if desired by the
	  local PBX administrator. It also corrects a bug: if the T1 timer
	  was increased beyond 500ms, then timer B would have been set at a
	  much lower value than recommended. (closes issue #12544) Reported
	  by: kactus Patches: 20080616__bug12544.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: kactus ........

2008-07-01 23:39 +0000 [r127246]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 127245 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r127245 | mmichelson | 2008-07-01 18:38:12 -0500
	  (Tue, 01 Jul 2008) | 13 lines Merged revisions 127244 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127244 | mmichelson | 2008-07-01 18:36:40 -0500 (Tue, 01 Jul
	  2008) | 5 lines Add error message to failed open(2) calls inside
	  the copy() function of app_voicemail. This idea came as part of
	  my work in helping to resolve issue #12764. ........
	  ................

2008-07-01 21:19 +0000 [r127163]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  127154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127154 |
	  bbryant | 2008-07-01 16:03:52 -0500 (Tue, 01 Jul 2008) | 2 lines
	  Add a configuration option so the global outboundproxy can use
	  tcptls without it being defined by each sip user. ........

2008-07-01 21:16 +0000 [r127156-127158]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 127157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127157 |
	  mmichelson | 2008-07-01 16:16:00 -0500 (Tue, 01 Jul 2008) | 8
	  lines Place the delay in __ast_answer prior to the
	  channel-specific answer callback. This change differs from commit
	  127113 in that now the channel is not set to AST_STATE_UP until
	  after the answer callback. (closes issue #12924) Reported by:
	  snyfer ........

	* main/channel.c, /: Merging Revision 127113 from trunk

2008-07-01 20:52 +0000 [r127153]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 127152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r127152 |
	  qwell | 2008-07-01 15:51:43 -0500 (Tue, 01 Jul 2008) | 7 lines
	  Fix a typo that caused this asterisk.conf to not get correctly
	  generated. (closes issue #12966) Reported by: ibc Patches:
	  12966.patch uploaded by bkruse (license 132) ........

2008-07-01 20:29 +0000 [r127085-127149]  Tilghman Lesher <tlesher@digium.com>

	* build_tools/cflags.xml, /, channels/chan_iax2.c: Merged revisions
	  127143 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r127143 | tilghman | 2008-07-01 15:28:54 -0500 (Tue, 01 Jul 2008)
	  | 10 lines Merged revisions 127133 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127133 | tilghman | 2008-07-01 15:25:37 -0500 (Tue, 01 Jul 2008)
	  | 2 lines Disable the old, slow search for matching callno in
	  chan_iax2 (but allow it to be reenabled for debugging) ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 127074 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r127074 | tilghman | 2008-07-01 14:20:25 -0500
	  (Tue, 01 Jul 2008) | 16 lines Merged revisions 127068 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r127068 | tilghman | 2008-07-01 13:52:53 -0500 (Tue, 01 Jul 2008)
	  | 8 lines Change around how we schedule pings and lagrqs, and fix
	  a reason why the jobs were not getting properly cancelled.
	  (closes issue #12903) Reported by: stevedavies Patches:
	  20080620__bug12903__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: stevedavies ........ ................

2008-07-01 16:53 +0000 [r127001]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 127000 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r127000 | tilghman | 2008-07-01 11:52:29 -0500
	  (Tue, 01 Jul 2008) | 10 lines Merged revisions 126999 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126999 | tilghman | 2008-07-01 11:50:46 -0500 (Tue, 01 Jul 2008)
	  | 2 lines Suppress annoying warning by finding the remaining
	  cases where the callno is not in the hash. ........
	  ................

2008-07-01 15:05 +0000 [r126756-126904]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 126903 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126903 | oej | 2008-07-01 17:03:59 +0200 (Tis, 01 Jul 2008) | 15
	  lines Merged revisions 126902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126902 | oej | 2008-07-01 16:59:31 +0200 (Tis, 01 Jul 2008) | 7
	  lines Use domain part of SIP uri in register= configuration as
	  fromdomain. Reported by: one47 Patches: sip-reg-fromdom2.dpatch
	  uploaded by one47 (license 23) (closes issue #12474) ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 126900 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126900 | oej | 2008-07-01 16:32:15 +0200 (Tis, 01 Jul 2008) | 16
	  lines Merged revisions 126899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126899 | oej | 2008-07-01 16:27:33 +0200 (Tis, 01 Jul 2008) | 8
	  lines Handle escaped URI's in call pickups. Patch by oej and
	  IgorG. Reported by: IgorG Patches: bug12299-11062-v2.patch
	  uploaded by IgorG (license 20) Tested by: IgorG, oej (closes
	  issue #12299) ........ ................

	* /, configs/sip.conf.sample: Merged revisions 126845 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r126845 | oej | 2008-07-01 14:54:57 +0200 (Tis,
	  01 Jul 2008) | 14 lines Merged revisions 126844 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126844 | oej | 2008-07-01 14:53:01 +0200 (Tis, 01 Jul 2008) | 5
	  lines Clear up documentation on "domain=" setting in sip.conf
	  Reported by: davidw (closes issue #12413) ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 126790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126790 | oej | 2008-07-01 13:58:17 +0200 (Tis, 01 Jul 2008) | 14
	  lines Merged revisions 126789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126789 | oej | 2008-07-01 13:51:38 +0200 (Tis, 01 Jul 2008) | 6
	  lines Report 200 OK to all in-dialog OPTIONs requests (to confirm
	  that the dialog exist). Don't bother checking the request URI.
	  (closes issue #11264) Reported by: ibc ........ ................

	* /, channels/chan_sip.c: Merged revisions 126755 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126755 | oej | 2008-07-01 11:51:22 +0200 (Tis, 01 Jul 2008) | 15
	  lines Merged revisions 126735 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126735 | oej | 2008-07-01 09:49:15 +0200 (Tis, 01 Jul 2008) | 7
	  lines Fix bad XML for hold notification. Reported by: gowen72
	  Patches: hold.patch uploaded by gowen72 (license 432) (closes
	  issue #12942) ........ ................

2008-06-30 22:34 +0000 [r126676]  Jeff Peeler <jpeeler@digium.com>

	* configs/zapata.conf.sample (removed),
	  configs/chan_dahdi.conf.sample (added), /: Merged revisions
	  126675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r126675 |
	  jpeeler | 2008-06-30 17:34:08 -0500 (Mon, 30 Jun 2008) | 1 line
	  rename zapata.conf.sample to chan_dahdi.conf.sample ........

2008-06-30 20:32 +0000 [r126638]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 126637 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r126637 | mattf | 2008-06-30 15:25:46 -0500 (Mon, 30 Jun 2008) |
	  1 line Add support to see MTP2 down events when the link layer
	  drops in SS7 ........

2008-06-30 16:09 +0000 [r126575]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 126574 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r126574 | russell | 2008-06-30 11:07:25 -0500
	  (Mon, 30 Jun 2008) | 18 lines Merged revisions 126573 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126573 | russell | 2008-06-30 11:05:08 -0500 (Mon, 30 Jun 2008)
	  | 10 lines Fix a typo in the non-DEBUG_THREADS version of the
	  recently added DEADLOCK_AVOIDANCE() macro. This caused the lock
	  to not actually be released, and as a result, not avoid deadlocks
	  at all. This resolves the issues reported in the last while about
	  Asterisk locking up all over the place (and most commonly, in
	  chan_iax2). (closes issue #12927) (closes issue #12940) (closes
	  issue #12925) (potentially closes others ...) ........
	  ................

2008-06-30 13:07 +0000 [r126518]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 126517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126517 | oej | 2008-06-30 15:03:53 +0200 (MÃ¥n, 30 Jun 2008) |
	  20 lines The following patch with some changes for trunk...
	  Merged revisions 126516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126516 | oej | 2008-06-30 14:50:55 +0200 (MÃ¥n, 30 Jun 2008) |
	  10 lines Send all responses to an INVITE reliably, so that we
	  retransmit if we don't get an ACK and also fail if we don't get
	  the very same precious ACK. Based on patch by tsearle, with my
	  own additions. (closes issue #12951) Reported by: tsearle
	  Patches: busy_retransmit.patch uploaded by tsearle (license 373)
	  ........ ................

2008-06-29 17:02 +0000 [r126362-126364]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_zapbarge.c (removed): finish converting this module

	* pbx/pbx_gtkconsole.c, /, configure, configure.ac, pbx/pbx_lua.c,
	  pbx/Makefile: Merged revisions 126356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r126356 |
	  kpfleming | 2008-06-29 09:19:29 -0700 (Sun, 29 Jun 2008) | 9
	  lines various minor fixes created while i worked on getting
	  *every* Asterisk module to build on laptop in dev mode: remove
	  weird pre-setting of LUA paths; they are not necessary; also use
	  the proper path for including the files in pbx_lua.c make the
	  compiler shut up about some ignored function results in
	  pbx_gtkconsole; this module is badly coded anyway ........

	* apps/app_dahdibarge.c (added): don't know how this got missed in
	  the DAHDI conversion of this branch

2008-06-29 13:20 +0000 [r126227-126322]  Sean Bright <sean.bright@gmail.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 126274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r126274 |
	  seanbright | 2008-06-29 08:06:46 -0400 (Sun, 29 Jun 2008) | 6
	  lines Quote column names when inserting CDRs into postgres to
	  avoid conflicts with reserved words. (closes issue #12947)
	  Reported by: panolex ........

2008-06-28 15:58 +0000 [r126155-126188]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: update this branch to use the trunk goodness version
	  of menuselect

2008-06-27 22:43 +0000 [r126058-126112]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 126057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r126057 | tilghman | 2008-06-27 17:10:34 -0500 (Fri, 27 Jun 2008)
	  | 12 lines Merged revisions 126056 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r126056 | tilghman | 2008-06-27 17:01:09 -0500 (Fri, 27 Jun 2008)
	  | 4 lines When we get a 408 Timeout, don't stop trying to
	  re-register. (closes issue #12863) Reported by: ricvil ........
	  ................

2008-06-27 21:00 +0000 [r126023]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Port revisions 124661 and 123650 from trunk to
	  1.6.0 Thanks to Atis Lezdins for pointing this out on the
	  asterisk-dev mailing list

2008-06-27 19:20 +0000 [r125994]  Russell Bryant <russell@digium.com>

	* /, doc/siptls.txt: Merged revisions 125988 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125988 |
	  russell | 2008-06-27 14:19:08 -0500 (Fri, 27 Jun 2008) | 3 lines
	  Fix a typo. Someone on IRC copied this literally and then
	  wondered why it wasn't working. :) ........

2008-06-27 19:06 +0000 [r125981-125985]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 125984 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125984 | mattf | 2008-06-27 14:05:40 -0500 (Fri, 27 Jun 2008) |
	  1 line Revert this part of the fix. We'll fix it in libss7
	  ........

	* channels/chan_dahdi.c, /: Merged revisions 125982 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125982 | mattf | 2008-06-27 14:00:44 -0500 (Fri, 27 Jun 2008) |
	  1 line Obviously somebody didn't compile with libss7 support when
	  doing the DAHDI conversion. ........

	* channels/chan_dahdi.c, /: Merged revisions 125980 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125980 | mattf | 2008-06-27 13:32:17 -0500 (Fri, 27 Jun 2008) |
	  1 line Add support for new commands to block/unblock all CICs on
	  a linkset ........

2008-06-27 17:36 +0000 [r125948]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c: Merged revisions 125947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125947 |
	  bbryant | 2008-06-27 12:35:41 -0500 (Fri, 27 Jun 2008) | 1 line
	  Small error in the function that converts peer transports to a
	  string. ........

2008-06-27 16:29 +0000 [r125892]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  125891 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125891 |
	  bbryant | 2008-06-27 11:28:06 -0500 (Fri, 27 Jun 2008) | 6 lines
	  Change the way that the transport option works for sip users.
	  transport will now take multiple arguments, the first one listed
	  will be the one used for new dialogs, and the rest listed will be
	  acceptable ways for that peer to contact us. This fixes a minor
	  bug where, because SIP TCP/UDP run on the same port, could cause
	  a TCP peer to be saved in the ast_db. There will also be warnings
	  when a transport is changed for an unexpected reason. (issue
	  #12799) ........

2008-06-27 16:19 +0000 [r125859-125863]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 125855 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125855 |
	  mmichelson | 2008-06-27 11:16:13 -0500 (Fri, 27 Jun 2008) | 5
	  lines Ensure the thread-safety of the monexec variable in
	  app_queue. Thanks to Russell for pointing out the problem
	  ........

2008-06-27 16:01 +0000 [r125854]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 125853 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125853 | tilghman | 2008-06-27 11:00:05 -0500 (Fri, 27 Jun 2008)
	  | 3 lines Revert half of the fix, as this part may have been
	  unnecessary (related to issue #12914) Requested here:
	  http://lists.digium.com/pipermail/asterisk-dev/2008-June/033658.html
	  ........

2008-06-27 14:57 +0000 [r125800-125852]  Mark Michelson <mmichelson@digium.com>

	* main/asterisk.c, main/channel.c, channels/chan_iax2.c: Make sure
	  to only include dahdi/user.h if we have installed DAHDI.

	* channels/chan_iax2.c: I accidentally committed a change to
	  chan_iax2.c in addition to a change to app_queue.c. Reverting the
	  change to chan_iax2.c, even though it may turn out that this
	  change is necessary.

	* utils/Makefile, /: Merged revisions 125799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125799 |
	  mmichelson | 2008-06-27 09:14:09 -0500 (Fri, 27 Jun 2008) | 3
	  lines Remove an unneeded target from the Makefile ........

2008-06-27 14:09 +0000 [r125742-125797]  Tilghman Lesher <tlesher@digium.com>

	* /, main/utils.c, include/asterisk/lock.h: Merged revisions 125794
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r125794 | tilghman | 2008-06-27 08:54:13 -0500
	  (Fri, 27 Jun 2008) | 10 lines Merged revisions 125793 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125793 | tilghman | 2008-06-27 08:45:03 -0500 (Fri, 27 Jun 2008)
	  | 2 lines In this debugging function, copy to a buffer instead of
	  using potentially unsafe pointers. ........ ................

	* channels/chan_local.c, /: Merged revisions 125741 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r125741 | tilghman | 2008-06-27 07:28:38 -0500
	  (Fri, 27 Jun 2008) | 15 lines Merged revisions 125740 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125740 | tilghman | 2008-06-27 07:19:39 -0500 (Fri, 27 Jun 2008)
	  | 7 lines Add proper deadlock avoidance. (closes issue #12914)
	  Reported by: ozan Patches: 20080625__bug12914.diff.txt uploaded
	  by Corydon76 (license 14) Tested by: ozan ........
	  ................

2008-06-27 07:41 +0000 [r125704]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, include/asterisk/jabber.h, res/res_jabber.c: Merged revisions
	  125703 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125703 |
	  phsultan | 2008-06-27 09:28:17 +0200 (Fri, 27 Jun 2008) | 1 line
	  Fix a compile time error that occurs if OpenSSL is not installed.
	  Reported by Noel Morais on the users mailing list ........

2008-06-27 01:09 +0000 [r125648-125684]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c, channels/chan_iax2.c: SENTINEL is not defined
	  in 1.6.0

	* /, apps/app_queue.c: Merged revisions 125666 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125666 |
	  mmichelson | 2008-06-26 19:22:03 -0500 (Thu, 26 Jun 2008) | 3
	  lines Make this compile with dev-mode on ........

	* /, apps/app_queue.c: Merged revisions 125649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125649 |
	  mmichelson | 2008-06-26 19:15:54 -0500 (Thu, 26 Jun 2008) | 15
	  lines The monitor-join option for queues was deprecated in favor
	  of using MixMonitor to mix audio. However, it was pointed out to
	  me that because of this, the command set for the MONITOR_EXEC
	  variable is ignored as well. This means that people can't do
	  their own custom mixing commands at the end of recordings in
	  order to make, for instance, stereo recordings of calls. With
	  this patch, app_queue will set the "joinfiles" variable for the
	  channel's monitor if MONITOR_EXEC is not zero-length. This means
	  that for normal audio mixing, MixMonitor is still the preferred
	  choice, but we allow custom mixing to be done with the two
	  Monitor streams if desired. (closes issue #12923) Reported by:
	  snyfer ........

2008-06-26 23:06 +0000 [r125592]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 125591 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r125591 |
	  mmichelson | 2008-06-26 18:06:18 -0500 (Thu, 26 Jun 2008) | 3
	  lines Fix a really stupid mistake ........

2008-06-26 23:05 +0000 [r125590]  Jason Parker <jparker@digium.com>

	* /, main/utils.c: Merged revisions 125589 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125589 | qwell | 2008-06-26 18:04:18 -0500 (Thu, 26 Jun 2008) |
	  9 lines Merged revisions 125587 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125587 | qwell | 2008-06-26 18:03:15 -0500 (Thu, 26 Jun 2008) |
	  1 line Make sure to unlock the lock_info lock (huh?). Possible
	  deadlock? ........ ................

2008-06-26 23:04 +0000 [r125588]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 125586 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125586 | mmichelson | 2008-06-26 18:01:02 -0500 (Thu, 26 Jun
	  2008) | 19 lines Merged revisions 125585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125585 | mmichelson | 2008-06-26 17:52:39 -0500 (Thu, 26 Jun
	  2008) | 11 lines Add the interface of a queue member to the
	  output of the "queue show" command so that it can easily be
	  associated with a queue member's name. This helps so that the
	  appropriate queue member can be removed or paused since the
	  interface is required, not the member's name. (closes issue
	  #12783) Reported by: davevg Patches: app_queue.diff uploaded by
	  davevg (license 209) with small mod from me ........
	  ................

2008-06-26 22:50 +0000 [r125584]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 125583 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125583 | tilghman | 2008-06-26 17:49:16 -0500 (Thu, 26 Jun 2008)
	  | 2 lines Don't hang if the command is blank ........

2008-06-26 22:06 +0000 [r125478-125532]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 125477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125477 | mmichelson | 2008-06-26 15:57:41 -0500 (Thu, 26 Jun
	  2008) | 19 lines Merged revisions 125476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125476 | mmichelson | 2008-06-26 15:56:01 -0500 (Thu, 26 Jun
	  2008) | 11 lines Prior to this patch, the "queue show" command
	  used cached information for realtime queues instead of giving
	  up-to-date info. Now realtime is queried for the latest and
	  greatest in queue info. (closes issue #12858) Reported by: bcnit
	  Patches: queue_show.patch uploaded by putnopvut (license 60)
	  ........ ................

2008-06-26 17:07 +0000 [r125388]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 125385 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125385 | oej | 2008-06-26 18:54:22 +0200 (Tor, 26 Jun 2008) | 12
	  lines Merged revisions 125384 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125384 | oej | 2008-06-26 18:32:08 +0200 (Tor, 26 Jun 2008) | 3
	  lines Add support for peer realm based auth (a few missing lines,
	  the rest is well documented but never worked) ........
	  ................

2008-06-26 15:52 +0000 [r125280-125334]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 125333 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r125333 | kpfleming | 2008-06-26 10:50:07 -0500
	  (Thu, 26 Jun 2008) | 13 lines Merged revisions 125327 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125327 | kpfleming | 2008-06-26 10:30:33 -0500 (Thu, 26 Jun
	  2008) | 5 lines ensure that (whenever possible) if we generate a
	  log message because an ioctl() call to DAHDI/Zaptel failed, that
	  we include the reason it failed by including the stringified
	  error number (issue AST-80) ........ ................

	* /, res/res_musiconhold.c: Merged revisions 125279 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125279 | kpfleming | 2008-06-26 07:09:24 -0500 (Thu, 26 Jun
	  2008) | 2 lines fix compile failure found by buildbot (go,
	  buildbot!) ........

2008-06-26 11:08 +0000 [r125192-125278]  Tilghman Lesher <tlesher@digium.com>

	* main/rtp.c, /: Merged revisions 125277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125277 | tilghman | 2008-06-26 06:02:11 -0500 (Thu, 26 Jun 2008)
	  | 15 lines Merged revisions 125276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125276 | tilghman | 2008-06-26 06:01:21 -0500 (Thu, 26 Jun 2008)
	  | 7 lines Check for rtcp structure before trying to delete
	  schedule. (closes issue #12872) Reported by: destiny6628 Patches:
	  20080621__bug12872.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: destiny6628 ........ ................

	* configs/agents.conf.sample, /: Merged revisions 125223 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r125223 | tilghman | 2008-06-25 20:25:16 -0500
	  (Wed, 25 Jun 2008) | 12 lines Merged revisions 125218 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125218 | tilghman | 2008-06-25 20:24:26 -0500 (Wed, 25 Jun 2008)
	  | 4 lines Document ackcall=always. (closes issue #12852) Reported
	  by: davidw ........ ................

	* configs/http.conf.sample, /: Merged revisions 125191 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r125191 | tilghman | 2008-06-25 20:11:43 -0500 (Wed, 25 Jun 2008)
	  | 6 lines Update sample configuration to match what are now the
	  defaults for the prefix. (closes issue #12838, related to issue
	  #12198) Reported by: pabelanger Patches: http.conf.diff2 uploaded
	  by pabelanger (license 224) ........

2008-06-25 23:20 +0000 [r125146]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, channels/chan_dahdi.c, apps/app_flash.c,
	  configure, codecs/codec_dahdi.c, apps/app_rpt.c, main/asterisk.c,
	  /, apps/app_meetme.c, main/Makefile, apps/app_dahdiscan.c,
	  apps/app_dahdiras.c, configure.ac, include/asterisk/dahdi.h
	  (removed), res/res_musiconhold.c, channels/chan_iax2.c: Merged
	  revisions 125138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r125138 | kpfleming | 2008-06-25 18:05:28 -0500 (Wed, 25 Jun
	  2008) | 18 lines Merged revisions 125132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r125132 | kpfleming | 2008-06-25 17:21:30 -0500 (Wed, 25 Jun
	  2008) | 10 lines allow tonezone to live in a different place than
	  DAHDI/Zaptel, since dahdi-tools and dahdi-linux are now separate
	  packages and can be installed in different places don't include
	  tonezone.h in dahdi_compat.h, because only a couple of modules
	  need it get app_rpt building again after the DAHDI changes
	  (closes issue #12911) Reported by: tzafrir ........
	  ................

2008-06-25 01:13 +0000 [r124964-124967]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /, include/asterisk/lock.h: Merged
	  revisions 124966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r124966 | tilghman | 2008-06-24 20:08:37 -0500 (Tue, 24 Jun 2008)
	  | 15 lines Merged revisions 124965 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124965 | tilghman | 2008-06-24 19:46:24 -0500 (Tue, 24 Jun 2008)
	  | 7 lines Pvt deadlock causes some channels to get stuck in
	  Reserved status. (closes issue #12621) Reported by:
	  fabianoheringer Patches: 20080612__bug12621.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: fabianoheringer ........
	  ................

	* apps/app_voicemail.c, /: Merged revisions 124912 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r124912 | tilghman | 2008-06-24 16:18:52 -0500
	  (Tue, 24 Jun 2008) | 16 lines Merged revisions 124910 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124910 | tilghman | 2008-06-24 16:08:52 -0500 (Tue, 24 Jun 2008)
	  | 8 lines Occasionally control characters find their way into
	  CallerID. These need to be stripped prior to placing CallerID in
	  the headers of an email. (closes issue #12759) Reported by: RobH
	  Patches: 20080602__bug12759__2.diff.txt uploaded by Corydon76
	  (license 14) Tested by: RobH ........ ................

2008-06-24 17:52 +0000 [r124871-124873]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 124872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124872 |
	  phsultan | 2008-06-24 19:50:22 +0200 (Tue, 24 Jun 2008) | 6 lines
	  Subscribe to buddy's presence only if we really need to. That is,
	  if the corresponding roster item has a subscription value set to
	  "none" or "from". Make the code more readable. ........

	* /, res/res_jabber.c: Merged revisions 124870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124870 |
	  phsultan | 2008-06-24 19:28:39 +0200 (Tue, 24 Jun 2008) | 1 line
	  Code simplification ........

2008-06-23 15:44 +0000 [r124708]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /: blocked revision 124707, taskprocessors are not in 1.6.0

2008-06-22 03:18 +0000 [r124542]  Steve Murphy <murf@digium.com>

	* apps/app_forkcdr.c, /: Merged revisions 124541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r124541 | murf | 2008-06-21 20:58:06 -0600 (Sat, 21 Jun 2008) |
	  17 lines Merged revisions 124540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124540 | murf | 2008-06-21 20:54:52 -0600 (Sat, 21 Jun 2008) | 9
	  lines (closes issue #12910) Reported by: chris-mac Sorry, my
	  testing did not contain the simple case of forkCDR(v), I am much
	  embarrassed to admit. If I had, I would have more solidly
	  initialized the opts element for varset. ........
	  ................

2008-06-21 12:54 +0000 [r124397-124506]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 124505 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r124505 | tilghman | 2008-06-21 07:53:48 -0500 (Sat, 21 Jun 2008)
	  | 4 lines Reduce warning to debug, otherwise we flood the log
	  when we (legitimately) can't find a record. (Closes issue #12908)
	  ........

	* apps/app_rpt.c, /: Merged revisions 124451 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r124451 | tilghman | 2008-06-20 18:13:21 -0500 (Fri, 20 Jun 2008)
	  | 14 lines Merged revisions 124450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124450 | tilghman | 2008-06-20 18:12:33 -0500 (Fri, 20 Jun 2008)
	  | 6 lines usleep with a value over 1,000,000 is nonportable.
	  Changing to use sleep() instead. (closes issue #12814) Reported
	  by: pputman Patches: app_rtp_sleep.patch uploaded by pputman
	  (license 81) ........ ................

	* /, main/app.c: Merged revisions 124396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r124396 | tilghman | 2008-06-20 17:04:37 -0500 (Fri, 20 Jun 2008)
	  | 11 lines Merged revisions 124395 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124395 | tilghman | 2008-06-20 17:02:55 -0500 (Fri, 20 Jun 2008)
	  | 3 lines If the last character in a string to be parsed is the
	  delimiter, then we should count that final empty string as an
	  additional argument. ........ ................

2008-06-20 21:48 +0000 [r124394]  Jeff Gehlbach <jeffg@opennms.org>

	* doc/asterisk-mib.txt, /, doc/digium-mib.txt: Merged revisions
	  124392-124393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r124392 | jeffg | 2008-06-20 17:36:01 -0400 (Fri, 20 Jun 2008) |
	  9 lines Merged revisions 124372 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124372 | jeffg | 2008-06-20 17:14:40 -0400 (Fri, 20 Jun 2008) |
	  1 line Fix issues in digium-mib.txt and asterisk-mib.txt to
	  placate smilint - bug 12905 ........ ................ r124393 |
	  jeffg | 2008-06-20 17:43:18 -0400 (Fri, 20 Jun 2008) | 12 lines
	  (Missed committing . on previous commit.....) Merged revisions
	  124372 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124372 | jeffg | 2008-06-20 17:14:40 -0400 (Fri, 20 Jun 2008) |
	  1 line Fix issues in digium-mib.txt and asterisk-mib.txt to
	  placate smilint - bug 12905 ........ ................
	  ................

2008-06-20 20:18 +0000 [r124317]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 124316 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r124316 | tilghman | 2008-06-20 15:17:04 -0500
	  (Fri, 20 Jun 2008) | 16 lines Merged revisions 124315 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124315 | tilghman | 2008-06-20 15:16:02 -0500 (Fri, 20 Jun 2008)
	  | 8 lines When using a Local channel, started by a call file,
	  with a destination of an AGI script, the AGI script does not
	  always get notified of a hangup if the underlying channel hangs
	  up early. (closes issue #11833) Reported by: IgorG Patches:
	  local_hangup-v1.diff uploaded by IgorG (license 20) ........
	  ................

2008-06-20 16:31 +0000 [r124244-124279]  Mark Michelson <mmichelson@digium.com>

	* main/ast_expr2.fl, include/asterisk/doxyref.h, /,
	  main/ast_expr2f.c: Merged revisions 124278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124278 |
	  mmichelson | 2008-06-20 11:30:18 -0500 (Fri, 20 Jun 2008) | 6
	  lines Change references to doc/channelvariables.txt to
	  doc/tex/channelvariables.tex. This issue came up on the
	  asterisk-dev mailing list. ........

	* /, channels/chan_sip.c: Merged revisions 124243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124243 |
	  mmichelson | 2008-06-20 10:20:11 -0500 (Fri, 20 Jun 2008) | 9
	  lines Add a missing "ChannelType" header to one of the
	  "PeerStatus" manager events in chan_sip (closes issue #12904)
	  Reported by: eliel Patches: chan_sip.c.patch uploaded by eliel
	  (license 64) ........

2008-06-19 23:02 +0000 [r124184]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 124183 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r124183 | tilghman | 2008-06-19 17:59:41 -0500
	  (Thu, 19 Jun 2008) | 15 lines Merged revisions 124182 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124182 | tilghman | 2008-06-19 17:53:22 -0500 (Thu, 19 Jun 2008)
	  | 7 lines It's possible for a hangup to be received, even just
	  after the initial cid spill. (closes issue #12453) Reported by:
	  Alex728 Patches: 20080604__bug12453.diff.txt uploaded by
	  Corydon76 (license 14) ........ ................

2008-06-19 20:32 +0000 [r124124]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 124121 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r124121 | mmichelson | 2008-06-19 15:30:23 -0500
	  (Thu, 19 Jun 2008) | 16 lines Merged revisions 124112 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r124112 | mmichelson | 2008-06-19 15:28:41 -0500 (Thu, 19 Jun
	  2008) | 8 lines Fix IMAP forwarding so that messages are sent to
	  the proper mailbox. (closes issue #12897) Reported by: jaroth
	  Patches: destination_forward.patch uploaded by jaroth (license
	  50) ........ ................

2008-06-19 19:49 +0000 [r124065]  Brett Bryant <bbryant@digium.com>

	* /, main/utils.c: Merged revisions 124064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124064 |
	  bbryant | 2008-06-19 14:48:26 -0500 (Thu, 19 Jun 2008) | 2 lines
	  Add errors that report any locks held by threads when they are
	  being closed. ........

2008-06-19 18:57 +0000 [r124026]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c: Merged revisions 124024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r124024 |
	  bbryant | 2008-06-19 13:57:04 -0500 (Thu, 19 Jun 2008) | 2 lines
	  Fix bug in sip registration that sets the default port to 5060
	  for tls. ........

2008-06-19 17:58 +0000 [r123871-123989]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 123952 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r123952 | tilghman | 2008-06-19 12:22:27 -0500 (Thu, 19 Jun 2008)
	  | 6 lines Don't change pointers that need to be later passed back
	  for deallocation. (closes issue #12572) Reported by: flyn
	  Patches: 20080613__bug12572.diff.txt uploaded by Corydon76
	  (license 14) ........

	* main/channel.c, /: Merged revisions 123931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123931 | tilghman | 2008-06-19 12:02:54 -0500 (Thu, 19 Jun 2008)
	  | 13 lines Merged revisions 123930 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123930 | tilghman | 2008-06-19 11:58:19 -0500 (Thu, 19 Jun 2008)
	  | 5 lines Change informative messages to use the _multiple
	  variant when multiple formats are possible. (Closes issue #12848)
	  Reported by klaus3000 ........ ................

	* /, build_tools/strip_nonapi: Merged revisions 123913 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r123913 | tilghman | 2008-06-19 11:26:50 -0500
	  (Thu, 19 Jun 2008) | 13 lines Merged revisions 123909 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123909 | tilghman | 2008-06-19 11:26:03 -0500 (Thu, 19 Jun 2008)
	  | 5 lines Only process 40 arguments (20 files) at once with
	  xargs, because some older shells may force xargs to separate on
	  an odd boundary. (Closes issue #12883) Reported by Nik Soggia
	  ........ ................

	* /, configs/sip.conf.sample: Merged revisions 123887 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r123887 | tilghman | 2008-06-19 11:21:32 -0500
	  (Thu, 19 Jun 2008) | 12 lines Merged revisions 123883 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123883 | tilghman | 2008-06-19 11:20:41 -0500 (Thu, 19 Jun 2008)
	  | 4 lines Correct description of notifyringing option. (Closes
	  issue #12890) Reported by gminet ........ ................

	* main/asterisk.c, /: Merged revisions 123870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123870 | tilghman | 2008-06-19 11:08:29 -0500 (Thu, 19 Jun 2008)
	  | 14 lines Merged revisions 123869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123869 | tilghman | 2008-06-19 11:07:23 -0500 (Thu, 19 Jun 2008)
	  | 6 lines The RDTSC instruction was introduced on the Pentium
	  line of microprocessors, and is not compatible with certain 586
	  clones, like Cyrix. Hence, asking for i386 compatibility was
	  always incorrect. See http://en.wikipedia.org/wiki/RDTSC (Closes
	  issue #12886) Reported by tecnoxarxa ........ ................

2008-06-18 22:18 +0000 [r123718-123772]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c, doc/lang (added), doc/lang/hebrew.ods: Merged
	  revisions 123770 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123770 | tilghman | 2008-06-18 17:17:17 -0500 (Wed, 18 Jun 2008)
	  | 16 lines Merged revisions 123769 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123769 | tilghman | 2008-06-18 17:08:30 -0500 (Wed, 18 Jun 2008)
	  | 8 lines Add support for saying numbers in Hebrew. (closes issue
	  #11662) Reported by: greenfieldtech Patches: say.c.patch-12042008
	  uploaded by greenfieldtech (license 369) Hebrew-Sounds.ods
	  uploaded by greenfieldtech (with signficant changes to the
	  spreadsheet by me) ........ ................

	* pbx/pbx_spool.c, /: Merged revisions 123715 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123715 | tilghman | 2008-06-18 15:23:58 -0500 (Wed, 18 Jun 2008)
	  | 15 lines Merged revisions 123710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123710 | tilghman | 2008-06-18 15:22:42 -0500 (Wed, 18 Jun 2008)
	  | 7 lines Set the variables top-down, so that if a script sets a
	  variable more than once, the last one will take precedence.
	  (closes issue #12673) Reported by: phber Patches:
	  20080519__bug12673.diff.txt uploaded by Corydon76 (license 14)
	  ........ ................

2008-06-18 20:08 +0000 [r123693]  Brett Bryant <bbryant@digium.com>

	* main/tcptls.c, /: Merged revisions 123692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r123692 |
	  bbryant | 2008-06-18 15:07:56 -0500 (Wed, 18 Jun 2008) | 2 lines
	  Fix a crash in tcp and tls connections related to reference
	  counts. ........

2008-06-18 15:09 +0000 [r123651-123653]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 123652 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r123652 |
	  mmichelson | 2008-06-18 10:08:56 -0500 (Wed, 18 Jun 2008) | 7
	  lines A portion of the code which handled the 'c' queue option
	  had been removed. No telling when it happened. Anyway, it's back
	  in now and works properly. (Based on issue reported on mailing
	  list) ........

2008-06-18 12:34 +0000 [r123646-123647]  Russell Bryant <russell@digium.com>

	* apps/app_fax.c: don't use trunk only API for frame data (closes
	  issue #12881)

	* apps/app_fax.c (added): re-add app_fax ... it got accidentally
	  removed (closes issue #12881)

2008-06-17 21:57 +0000 [r123547]  Brett Bryant <bbryant@digium.com>

	* main/tcptls.c, main/manager.c, /, channels/chan_sip.c,
	  main/http.c, include/asterisk/tcptls.h: Merged revisions 123546
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r123546 | bbryant | 2008-06-17 16:46:57 -0500 (Tue, 17
	  Jun 2008) | 5 lines Updates all usages of
	  ast_tcptls_session_instance to be managed by reference counts so
	  that they only get destroyed when all threads are done using
	  them, and memory does not get free'd causing strange issues with
	  SIP. This code was originally written by russellb in the
	  team/group/issue_11972/ branch. ........

2008-06-17 21:34 +0000 [r123487-123542]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 123486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123486 | mmichelson | 2008-06-17 15:28:47 -0500 (Tue, 17 Jun
	  2008) | 12 lines Merged revisions 123485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123485 | mmichelson | 2008-06-17 15:26:38 -0500 (Tue, 17 Jun
	  2008) | 4 lines Make chan_sip build under dev mode with compilers
	  >= GCC 4.2 Thanks to jpeeler for alerting me of this ........
	  ................

2008-06-17 20:23 +0000 [r123473]  Steve Murphy <murf@digium.com>

	* /: block 123448 from trunk; it doesn't apply here.

2008-06-17 19:01 +0000 [r123394]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 123392 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r123392 | tilghman | 2008-06-17 13:57:45 -0500
	  (Tue, 17 Jun 2008) | 11 lines Merged revisions 123391 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123391 | tilghman | 2008-06-17 13:56:53 -0500 (Tue, 17 Jun 2008)
	  | 3 lines Fix 3 more places where failure to lock the structure
	  could cause the wrong lock to be unlocked. (Closes issue #12795)
	  ........ ................

2008-06-17 18:28 +0000 [r123382-123387]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 123238 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r123238 | jpeeler | 2008-06-16 18:05:18 -0500 (Mon, 16 Jun 2008)
	  | 1 line Fix some (more) variables that were forgotten to be
	  renamed, related to 117658 ........

2008-06-17 18:10 +0000 [r123335]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 123334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123334 | mmichelson | 2008-06-17 13:09:54 -0500 (Tue, 17 Jun
	  2008) | 19 lines Merged revisions 123333 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123333 | mmichelson | 2008-06-17 13:09:16 -0500 (Tue, 17 Jun
	  2008) | 11 lines Cisco BTS sends SIP responses with a tab between
	  the Cseq number and SIP request method in the Cseq: header.
	  Asterisk did not handle this properly, but with this patch, all
	  is well. (closes issue #12834) Reported by: tobias_e Patches:
	  12834.patch uploaded by putnopvut (license 60) Tested by:
	  tobias_e ........ ................

2008-06-17 18:08 +0000 [r123332]  Jeff Peeler <jpeeler@digium.com>

	* doc/tex/configuration.tex, configs/zapata.conf.sample, Makefile,
	  doc/janitor-projects.txt, configs/vpb.conf.sample, doc/sms.txt,
	  contrib/scripts/loadtest.tcl, codecs/codec_dahdi.c (added),
	  configs/smdi.conf.sample, pbx/pbx_config.c, apps/app_chanspy.c,
	  main/asterisk.c, configs/users.conf.sample, doc/ss7.txt,
	  apps/app_meetme.c, configs/rpt.conf.sample, doc/backtrace.txt,
	  doc/tex/queues-with-callback-members.tex,
	  include/asterisk/dahdi.h (added), configs/extensions.ael.sample,
	  res/res_musiconhold.c, configs/meetme.conf.sample,
	  codecs/codec_zap.c (removed), contrib/init.d/rc.mandrake.zaptel,
	  cdr/cdr_csv.c, main/channel.c, doc/tex/manager.tex,
	  doc/tex/sla.tex, include/asterisk/dsp.h,
	  doc/tex/localchannel.tex, apps/app_rpt.c, channels/chan_mgcp.c,
	  contrib/scripts/autosupport, doc/manager_1_1.txt,
	  channels/chan_zap.c (removed), doc/asterisk.8, doc/tex/ael.tex,
	  doc/tex/channelvariables.tex, apps/app_getcpeid.c,
	  doc/tex/enum.tex, apps/app_queue.c, configs/sla.conf.sample,
	  doc/tex/security.tex, include/asterisk/zapata.h (removed),
	  doc/tex/privacy.tex, build_tools/menuselect-deps.in,
	  apps/app_flash.c, main/file.c, doc/osp.txt,
	  contrib/utils/zones2indications.c, utils/extconf.c, makeopts.in,
	  configs/extensions.conf.sample, doc/asterisk.sgml, README,
	  contrib/init.d/rc.mandrake.asterisk, /,
	  include/asterisk/autoconfig.h.in, apps/app_dahdiscan.c (added),
	  apps/app_chanisavail.c, channels/chan_iax2.c,
	  configs/muted.conf.sample, main/loader.c, channels/chan_dahdi.c
	  (added), include/asterisk/doxyref.h, configure,
	  doc/tex/backtrace.tex, apps/app_zapscan.c (removed),
	  doc/tex/app-sms.tex, apps/app_zapras.c (removed),
	  configs/extensions.lua.sample, include/asterisk/options.h,
	  contrib/init.d/rc.suse.asterisk, apps/app_dial.c,
	  apps/app_page.c, doc/tex/hardware.tex, apps/app_fax.c (removed),
	  apps/app_dahdiras.c (added), configure.ac,
	  configs/queues.conf.sample, include/asterisk/channel.h: Goodbye
	  Zaptel, hello DAHDI. Removes Zaptel driver support with DAHDI.
	  Configuration file and dialplan backwards compatability has been
	  put in place where appropiate. Release announcement to follow.

2008-06-17 15:58 +0000 [r123276]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 123275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123275 | mmichelson | 2008-06-17 10:57:43 -0500 (Tue, 17 Jun
	  2008) | 20 lines Merged revisions 123274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123274 | mmichelson | 2008-06-17 10:56:55 -0500 (Tue, 17 Jun
	  2008) | 12 lines davidw pointed out that the holdtime calculation
	  used by app_queue does not use "boxcar" filtering as the comments
	  say. The term "boxcar" means that the number of samples used to
	  calculate stays constant, with new samples replacing the oldest
	  ones. The queue holdtime calculation uses all holdtime samples
	  collected since the queue was loaded, so the comment has been
	  changed to be accurate. (closes issue #12781) Reported by: davidw
	  ........ ................

2008-06-17 15:52 +0000 [r123273]  Russell Bryant <russell@digium.com>

	* main/astobj2.c, /: Merged revisions 123272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123272 | russell | 2008-06-17 10:52:13 -0500 (Tue, 17 Jun 2008)
	  | 12 lines Merged revisions 123271 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123271 | russell | 2008-06-17 10:48:31 -0500 (Tue, 17 Jun 2008)
	  | 4 lines Fix a memory leak in astobj2 that was pointed out by
	  seanbright. When a container got destroyed, the underlying bucket
	  list entry for each object that was in the container at that time
	  did not get free'd. ........ ................

2008-06-16 21:20 +0000 [r123178]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_zap.c: Fix some variables that were forgotten to be
	  renamed, related to 117658. Couldn't merge from trunk since the
	  chan_dahdi transition has not occurred here yet

2008-06-16 21:19 +0000 [r123173]  Steve Murphy <murf@digium.com>

	* apps/app_stack.c, apps/app_dial.c, main/pbx.c, /,
	  main/features.c, include/asterisk/pbx.h, apps/app_queue.c: Merged
	  revisions 123165 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r123165 |
	  murf | 2008-06-16 14:43:46 -0600 (Mon, 16 Jun 2008) | 19 lines
	  (closes issue #12689) Reported by: ys Many thanks to ys for doing
	  the research on this problem. I didn't think it would be best to
	  unlock the contexts and then relock them after the
	  remove_extension2() call, so I added an extra arg to
	  remove_extension2() and set it appropriately in each call. There
	  were not that many. I considered forcing the code to lock the
	  contexts before the call to remove_extension2(), but that would
	  require a slightly greater degree of changes, especially since
	  the find_context_locked is local to pbx.c I did a simple sanity
	  test to make sure the code doesn't mess things up in general.
	  ........

2008-06-16 20:03 +0000 [r123112-123116]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_mgcp.c, /, channels/chan_sip.c,
	  channels/chan_skinny.c, channels/chan_h323.c,
	  channels/chan_iax2.c: Merged revisions 123114 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123114 | tilghman | 2008-06-16 14:57:05 -0500 (Mon, 16 Jun 2008)
	  | 10 lines Merged revisions 123113 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123113 | tilghman | 2008-06-16 14:50:12 -0500 (Mon, 16 Jun 2008)
	  | 2 lines Port "hasvoicemail" change from SIP to other channel
	  drivers ........ ................

	* /, channels/chan_sip.c: Merged revisions 123111 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r123111 | tilghman | 2008-06-16 14:23:51 -0500 (Mon, 16 Jun 2008)
	  | 16 lines Merged revisions 123110 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r123110 | tilghman | 2008-06-16 14:21:58 -0500 (Mon, 16 Jun 2008)
	  | 8 lines People expect that if "hasvoicemail" is set in
	  users.conf, even if "mailbox" isn't set, that SIP will detect a
	  mailbox. (closes issue #12855) Reported by: PLL Patches:
	  20080614__bug12855__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: PLL ........ ................

2008-06-16 17:29 +0000 [r123075]  Chris Tooley <chris@tooley.com>

	* apps/app_externalivr.c: Fixes and closes bug number 12804

2008-06-16 12:32 +0000 [r122871-122921]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 122920 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122920 | file | 2008-06-16 09:32:02 -0300 (Mon, 16 Jun 2008) |
	  14 lines Merged revisions 122919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122919 | file | 2008-06-16 09:31:09 -0300 (Mon, 16 Jun 2008) | 6
	  lines Only compare the first 15 characters so that even if the
	  charset is specified we still accept it as SDP. (closes issue
	  #12803) Reported by: lanzaandrea Patches: chan_sip.c.diff
	  uploaded by lanzaandrea (license 496) ........ ................

	* /, channels/chan_sip.c: Merged revisions 122870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122870 | file | 2008-06-16 09:09:54 -0300 (Mon, 16 Jun 2008) |
	  14 lines Merged revisions 122869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122869 | file | 2008-06-16 09:08:28 -0300 (Mon, 16 Jun 2008) | 6
	  lines Don't send a BYE on a dialog that is already gone during a
	  REFER. (closes issue #12865) Reported by: flefoll Patches:
	  chan_sip.c.br14.121495.patch-ALREADYGONE uploaded by flefoll
	  (license 244) ........ ................

2008-06-13 21:47 +0000 [r122715]  Mark Michelson <mmichelson@digium.com>

	* main/autoservice.c, /: Merged revisions 122714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122714 | mmichelson | 2008-06-13 16:45:21 -0500 (Fri, 13 Jun
	  2008) | 17 lines Merged revisions 122713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122713 | mmichelson | 2008-06-13 16:44:53 -0500 (Fri, 13 Jun
	  2008) | 9 lines Short circuit the loop in autoservice_run if
	  there are no channels to poll. If we continued, then the result
	  would be calling poll() with a NULL pollfd array. While this is
	  fine with POSIX's poll(2) system call, those who use Asterisk's
	  internal poll mechanism (Darwin systems) would have a failed
	  assertion occur when poll is called. (related to issue #10342)
	  ........ ................

2008-06-13 14:15 +0000 [r122558]  Tilghman Lesher <tlesher@digium.com>

	* main/dial.c, /: Merged revisions 122557 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r122557 |
	  tilghman | 2008-06-13 09:15:07 -0500 (Fri, 13 Jun 2008) | 7 lines
	  Convert one more delimiter to use comma. (closes issue #12850)
	  Reported by: bcnit Patches: 20080613__bug12850.diff.txt uploaded
	  by Corydon76 (license 14) Tested by: bcnit ........

2008-06-13 00:18 +0000 [r122467]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_parkandannounce.c, /, main/features.c: Merged revisions
	  122433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r122433 |
	  jpeeler | 2008-06-12 18:08:37 -0500 (Thu, 12 Jun 2008) | 4 lines
	  (closes issue 0012193) Reported by: davidw Patch by: Corydon76,
	  modified by me to work properly with ParkAndAnnounce app ........

2008-06-12 18:54 +0000 [r122313]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 122312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122312 | mmichelson | 2008-06-12 13:53:17 -0500 (Thu, 12 Jun
	  2008) | 17 lines Merged revisions 122311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122311 | mmichelson | 2008-06-12 13:50:58 -0500 (Thu, 12 Jun
	  2008) | 9 lines Properly play a holdtime message if the
	  announce-holdtime option is set to "once." (closes issue #12842)
	  Reported by: ramonpeek Patches: patch001.diff uploaded by
	  ramonpeek (license 266) ........ ................

2008-06-12 18:24 +0000 [r122242-122266]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 122262 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r122262 | russell | 2008-06-12 13:23:54 -0500
	  (Thu, 12 Jun 2008) | 11 lines Merged revisions 122259 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122259 | russell | 2008-06-12 13:22:44 -0500 (Thu, 12 Jun 2008)
	  | 3 lines Fix some race conditions that cause ast_assert() to
	  report that chan_iax2 tried to remove an entry that wasn't in the
	  scheduler ........ ................

2008-06-12 15:27 +0000 [r122132-122180]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_meetme.c: Merged revisions 122174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122174 | tilghman | 2008-06-12 10:26:07 -0500 (Thu, 12 Jun 2008)
	  | 16 lines Merged revisions 122137 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122137 | tilghman | 2008-06-12 10:18:39 -0500 (Thu, 12 Jun 2008)
	  | 8 lines Flipflop the sections for two options, since the
	  section for 'X' (exit context) may otherwise absorb keypresses
	  meant for 's' (admin/user menu). (closes issue #12836) Reported
	  by: blitzrage Patches: 20080611__bug12836.diff.txt uploaded by
	  Corydon76 (license 14) Tested by: blitzrage ........
	  ................

	* main/channel.c, /: Merged revisions 122131 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122131 | tilghman | 2008-06-12 10:14:37 -0500 (Thu, 12 Jun 2008)
	  | 12 lines Merged revisions 122130 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122130 | tilghman | 2008-06-12 10:11:30 -0500 (Thu, 12 Jun 2008)
	  | 4 lines Occasionally, the alertpipe loses its nonblocking
	  status, so detect and correct that situation before it causes a
	  deadlock. (Reported and tested by ctooley via #asterisk-dev)
	  ........ ................

2008-06-12 15:01 +0000 [r122126-122129]  Steve Murphy <murf@digium.com>

	* main/cdr.c, apps/app_forkcdr.c, /, CHANGES: Merged revisions
	  122128 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r122128 | murf | 2008-06-12 08:56:26 -0600 (Thu, 12 Jun 2008) | 9
	  lines Merged revisions 122127 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122127 | murf | 2008-06-12 08:51:44 -0600 (Thu, 12 Jun 2008) | 1
	  line Arkadia tried to warn me, but the code added to
	  ast_cdr_busy, _failed, and _noanswer was redundant. Didn't spot
	  it until I was resolving conflicts in trunk. Ugh. Redundant code
	  removed. It wasn't harmful. Just dumb. ........ ................

	* main/cdr.c, apps/app_forkcdr.c, /, funcs/func_cdr.c,
	  include/asterisk/cdr.h, CHANGES: Merged revisions 122091 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r122091 | murf | 2008-06-12 08:28:01 -0600 (Thu,
	  12 Jun 2008) | 45 lines Merged revisions 122046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r122046 | murf | 2008-06-12 07:47:34 -0600 (Thu, 12 Jun 2008) |
	  37 lines (closes issue #10668) Reported by: arkadia Tested by:
	  murf, arkadia Options added to forkCDR() app and the CDR() func
	  to remove some roadblocks for CDR applications. The "show
	  application ForkCDR" output was upgraded to more fully explain
	  the inner workings of forkCDR. The A option was added to forkCDR
	  to force the CDR system to NOT change the disposition on the
	  original CDR, after the fork. This involves ast_cdr_answer,
	  _busy, _failed, and so on. The T option was added to forkCDR to
	  force obedience of the cdr LOCKED flag in the ast_cdr_end, all
	  the disposition changing funcs (ast_cdr_answer, etc), and in the
	  ast_cdr_setvar func. The CHANGES file was updated to explain ALL
	  the new options added to satisfy this bug report (and some
	  requests made verbally and via email, irc, etc, over the past
	  months/year) The 's' option was added to the CDR() func, to force
	  it to skip LOCKED cdr's in the chain. Again, the new options
	  should be totally transparent to existing apps! Current behavior
	  of CDR, forkCDR, and the rest of the CDR system should not change
	  one little bit. Until you add the new options, at least! ........
	  ................

2008-06-11 18:57 +0000 [r121915]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 121914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r121914 |
	  mattf | 2008-06-11 13:53:10 -0500 (Wed, 11 Jun 2008) | 1 line Fix
	  pseudo channel allocation errors on startup when using SS7
	  ........

2008-06-11 18:20 +0000 [r121872]  Tilghman Lesher <tlesher@digium.com>

	* main/sched.c, main/channel.c, /, channels/chan_agent.c,
	  main/abstract_jb.c: Merged revisions 121867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r121867 | tilghman | 2008-06-11 13:19:24 -0500 (Wed, 11 Jun 2008)
	  | 11 lines Merged revisions 121861 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121861 | tilghman | 2008-06-11 13:18:16 -0500 (Wed, 11 Jun 2008)
	  | 3 lines Make calls to ast_assert() actually test something, so
	  that the error message printed is not nonsensical (reported by
	  mvanbaak via #asterisk-bugs). ........ ................

2008-06-11 17:59 +0000 [r121858]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 121857 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r121857 |
	  mattf | 2008-06-11 12:50:17 -0500 (Wed, 11 Jun 2008) | 1 line
	  Make sure we hangup any calls we have and NULL out the ss7call
	  value when we get a reset circuit message. Fixes crash bug
	  ........

2008-06-11 17:45 +0000 [r121856]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/realtime_pgsql.sql, /, UPGRADE.txt,
	  include/asterisk/cdr.h: Merged revisions 121855 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r121855 |
	  tilghman | 2008-06-11 12:44:39 -0500 (Wed, 11 Jun 2008) | 3 lines
	  Expand CDR uniqueid field to 150 chars, to account for maximum
	  systemname. (Closes issue #12831) ........

2008-06-11 16:13 +0000 [r121806]  Jeff Peeler <jpeeler@digium.com>

	* /, doc/backtrace.txt: Merged revisions 121805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r121805 | jpeeler | 2008-06-11 11:11:40 -0500 (Wed, 11 Jun 2008)
	  | 9 lines Merged revisions 121804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121804 | jpeeler | 2008-06-11 11:11:09 -0500 (Wed, 11 Jun 2008)
	  | 1 line add instructions for logging gdb output via set logging
	  on ........ ................

2008-06-10 18:36 +0000 [r121598]  Sean Bright <sean.bright@gmail.com>

	* /, contrib/scripts/get_ilbc_source.sh: Merged revisions 121597
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r121597 | seanbright | 2008-06-10 14:35:37 -0400
	  (Tue, 10 Jun 2008) | 14 lines Merged revisions 121596 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121596 | seanbright | 2008-06-10 14:34:45 -0400 (Tue, 10 Jun
	  2008) | 6 lines Fixes a problem with some buggy versions of GNU
	  awk (3.1.3) not liking carriage returns in scripts. (closes issue
	  #12749) Reported by: alinux Tested by: Laureano (on
	  #asterisk-dev), juggie ........ ................

2008-06-10 12:55 +0000 [r121445]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 121444 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r121444 | file | 2008-06-10 09:54:39 -0300 (Tue, 10 Jun 2008) |
	  12 lines Merged revisions 121442 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121442 | file | 2008-06-10 09:52:06 -0300 (Tue, 10 Jun 2008) | 4
	  lines Update BRIDGEPEER variable before we do a generic bridge in
	  case we just broke out of a native bridge and fell through to
	  generic. (closes issue #12815) Reported by: ramonpeek ........
	  ................

2008-06-10 00:53 +0000 [r121404-121408]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 121407 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r121407 | russell | 2008-06-09 19:52:46 -0500 (Mon, 09 Jun 2008)
	  | 2 lines Bump up the debug level of a couple of messages
	  ........

2008-06-09 16:37 +0000 [r121283]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 121282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r121282 | russell | 2008-06-09 11:37:08 -0500 (Mon, 09 Jun 2008)
	  | 18 lines Merged revisions 121280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121280 | russell | 2008-06-09 11:35:40 -0500 (Mon, 09 Jun 2008)
	  | 10 lines Do not attempt to do emulation if an END digit is
	  received and the length is less than the defined minimum digit
	  length, and the other end only wants END digits (SIP INFO, for
	  example). (closes issue #12778) Reported by: tsearle Patches:
	  12778.rev1.txt uploaded by russell (license 2) Tested by: tsearle
	  ........ ................

2008-06-09 16:36 +0000 [r121281]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 121279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r121279 |
	  tilghman | 2008-06-09 11:35:06 -0500 (Mon, 09 Jun 2008) | 6 lines
	  Implement FINDLABEL matching for the new extension matching
	  engine. (closes issue #12800) Reported by: chris-mac Patches:
	  20080608__bug12800.diff.txt uploaded by Corydon76 (license 14)
	  ........

2008-06-09 15:10 +0000 [r121231]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 121230 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r121230 | mmichelson | 2008-06-09 10:08:58 -0500
	  (Mon, 09 Jun 2008) | 27 lines Merged revisions 121229 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Note that
	  this is being merged to trunk/1.6.0 because it may affect
	  non-callback agents with ackcall set) ........ r121229 |
	  mmichelson | 2008-06-09 10:02:37 -0500 (Mon, 09 Jun 2008) | 16
	  lines A unique situation of timeouts brought forth a failure
	  situation for autologoff in chan_agent. If using
	  AgentCallbackLogin-style agents, then if the timeout specified by
	  the Dial() to reach the agent's phone was shorter than the
	  timeout specified in queues.conf, then autologoff would only work
	  if the caller hung up while the agent's phone was ringing. This
	  patch allows autologoff to work in this situation when the call
	  in queue transfers to the next available agent (as it would have
	  if the timeout in queues.conf were less than the timeout in the
	  Dial()). (closes issue #12754) Reported by: Rodrigo Patches:
	  12754.patch uploaded by putnopvut (license 60) Tested by: Rodrigo
	  ........ ................

2008-06-08 01:43 +0000 [r121138-121164]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_console.c: Merged revisions 121163 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r121163 | jpeeler | 2008-06-07 20:41:59 -0500 (Sat, 07 Jun 2008)
	  | 4 lines This was accidentally reverted. Fixes a bug where if a
	  stream monitor thread was not created (caused from failure of
	  opening or starting the stream) pthread_cancel was called with an
	  invalid thread ID. ........

	* apps/app_parkandannounce.c, /: Merged revisions 121131 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r121131 | jpeeler | 2008-06-07 20:16:25 -0500 (Sat, 07
	  Jun 2008) | 2 lines Fixes segfault when using ParkAndAnnounce.
	  Also, loop made more efficient as announce template only needs to
	  be checked until the number of colon separated arguments run out,
	  not the entire pointer storage array. Was done in a similiar
	  fashion in 1.4, but here we're using less variables. ........

2008-06-07 14:19 +0000 [r121080]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /, channels/chan_agent.c: Merged revisions
	  121079 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r121079 | russell | 2008-06-07 09:18:44 -0500 (Sat, 07 Jun 2008)
	  | 15 lines Merged revisions 121078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r121078 | russell | 2008-06-07 09:10:56 -0500 (Sat, 07 Jun 2008)
	  | 7 lines Don't run LIST_HEAD_DESTROY on a STATIC list (closes
	  issue #12807) Reported by: ys Patches: chan_agent_local.diff
	  uploaded by ys (license 281) ........ ................

2008-06-06 20:25 +0000 [r121011-121047]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 121010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r121010 |
	  tilghman | 2008-06-06 14:55:08 -0500 (Fri, 06 Jun 2008) | 6 lines
	  Make extension match characters case-insensitive. (closes issue
	  #12777) Reported by: jsmith Patches:
	  lower_case_patterns-trunk-v1.patch uploaded by jsmith (license
	  15) ........

2008-06-06 18:31 +0000 [r120907-120961]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 120960 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120960 | jpeeler | 2008-06-06 13:30:17 -0500 (Fri, 06 Jun 2008)
	  | 9 lines Merged revisions 120959 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120959 | jpeeler | 2008-06-06 13:29:14 -0500 (Fri, 06 Jun 2008)
	  | 1 line add another LOW_MEMORY define I forgot ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 120909 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120909 | jpeeler | 2008-06-06 13:06:06 -0500 (Fri, 06 Jun 2008)
	  | 9 lines Merged revisions 120908 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120908 | jpeeler | 2008-06-06 13:05:15 -0500 (Fri, 06 Jun 2008)
	  | 1 line only define thread storage variable if necessary for
	  LOW_MEMORY ........ ................

	* channels/chan_sip.c: Merged revisions 120906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120906 | jpeeler | 2008-06-06 12:50:05 -0500 (Fri, 06 Jun 2008)
	  | 16 lines Merged revisions 120863,120885 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120863 | jpeeler | 2008-06-06 10:33:15 -0500 (Fri, 06 Jun 2008)
	  | 3 lines This fixes a crash when LOW_MEMORY is turned on. Two
	  allocations of the ast_rtp struct that were previously allocated
	  on the stack have been modified to use thread local storage
	  instead. ........ r120885 | jpeeler | 2008-06-06 11:39:20 -0500
	  (Fri, 06 Jun 2008) | 2 lines Correction to commmit 120863, make
	  sure proper destructor function is called as well define two
	  thread storage local variables. ........ ................

2008-06-06 17:35 +0000 [r120864-120905]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_exec.c: Merged revisions 120904 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120904 |
	  tilghman | 2008-06-06 12:34:21 -0500 (Fri, 06 Jun 2008) | 3 lines
	  For the purpose of making the changed syntax to ExecIf easier to
	  transition, allow the deprecated syntax (fixed for jmls on -dev).
	  ........

2008-06-05 21:39 +0000 [r120829]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 120828 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120828 |
	  murf | 2008-06-05 15:34:42 -0600 (Thu, 05 Jun 2008) | 1 line a
	  small fix for a crash that occurs when compiling AEL with global
	  vars ........

2008-06-05 17:17 +0000 [r120677]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 120676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120676 | phsultan | 2008-06-05 19:02:39 +0200 (Thu, 05 Jun 2008)
	  | 10 lines Merged revisions 120675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120675 | phsultan | 2008-06-05 18:56:15 +0200 (Thu, 05 Jun 2008)
	  | 2 lines Ignore appended resource when comparing JIDs. ........
	  ................

2008-06-05 16:42 +0000 [r120643-120674]  Brett Bryant <bbryant@digium.com>

2008-06-05 16:01 +0000 [r120566-120603]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, main/loader.c, /, res/res_agi.c: Merged
	  revisions 120602 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120602 |
	  tilghman | 2008-06-05 10:58:11 -0500 (Thu, 05 Jun 2008) | 4 lines
	  Conditionally load the AGI command gosub, depending on whether or
	  not res_agi has been loaded, fix a return value in the loader,
	  and ensure that the help workhorse header does not print on load.
	  ........

	* /, UPGRADE.txt: Merged revisions 120567 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120567 |
	  tilghman | 2008-06-05 09:35:47 -0500 (Thu, 05 Jun 2008) | 2 lines
	  Add info on the [compat] section of asterisk.conf. ........

	* apps/app_fax.c: Fix frame API for 1.6.0 (Closes issue #12793)

2008-06-04 22:08 +0000 [r120515]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 120514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120514 | mmichelson | 2008-06-04 17:07:37 -0500 (Wed, 04 Jun
	  2008) | 14 lines Merged revisions 120513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120513 | mmichelson | 2008-06-04 17:05:33 -0500 (Wed, 04 Jun
	  2008) | 6 lines Make sure that the string we set will survive the
	  unref of the queue member. Thanks to Russell, who pointed this
	  out. ........ ................

2008-06-04 20:35 +0000 [r120478]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 120477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120477 |
	  tilghman | 2008-06-04 15:34:52 -0500 (Wed, 04 Jun 2008) | 2 lines
	  MSet doesn't necessarily need chan to be set ........

2008-06-04 15:38 +0000 [r120338]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 120337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r120337 |
	  file | 2008-06-04 12:38:00 -0300 (Wed, 04 Jun 2008) | 2 lines We
	  like tabs. ........

2008-06-04 14:13 +0000 [r120287]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 120286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120286 | mmichelson | 2008-06-04 09:12:45 -0500 (Wed, 04 Jun
	  2008) | 15 lines Merged revisions 120285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120285 | mmichelson | 2008-06-04 09:11:12 -0500 (Wed, 04 Jun
	  2008) | 7 lines Tab completion when removing a member should give
	  the member's interface, not the name, since the interface is what
	  is expected for the command. (closes issue #12783) Reported by:
	  davevg ........ ................

2008-06-04 13:34 +0000 [r120284]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 120283 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120283 | file | 2008-06-04 10:33:59 -0300 (Wed, 04 Jun 2008) |
	  14 lines Merged revisions 120282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120282 | file | 2008-06-04 10:31:09 -0300 (Wed, 04 Jun 2008) | 6
	  lines Fix a log message and add a message for when the dialplan
	  is done reloading. (closes issue #12716) Reported by: chappell
	  Patches: dialplan_reload_2.diff uploaded by chappell (license 8)
	  ........ ................

2008-06-03 23:18 +0000 [r120228-120234]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_loopback.c, /: Merged revisions 120227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120227 | tilghman | 2008-06-03 17:42:03 -0500 (Tue, 03 Jun 2008)
	  | 16 lines Merged revisions 120226 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120226 | tilghman | 2008-06-03 17:41:04 -0500 (Tue, 03 Jun 2008)
	  | 8 lines Due to incorrect use of the AST_LIST_INSERT_HEAD()
	  macro the loopback switch cannot perform any translation on the
	  extension number before searching for it in the target context.
	  (closes issue #12473) Reported by: chappell Patches:
	  pbx_loopback.c.diff uploaded by chappell (license 8) ........
	  ................

2008-06-03 22:18 +0000 [r120178]  Jeff Peeler <jpeeler@digium.com>

	* main/config.c: Merged revisions 120174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r120174 | jpeeler | 2008-06-03 17:17:07 -0500 (Tue, 03 Jun 2008)
	  | 14 lines Merged revisions 120173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120173 | jpeeler | 2008-06-03 17:15:33 -0500 (Tue, 03 Jun 2008)
	  | 6 lines (closes issue #11594) Reported by: yem Tested by: yem
	  This change decreases the buffer size allocated on the stack
	  substantially in config_text_file_load when LOW_MEMORY is turned
	  on. This change combined with the fix from revision 117462
	  (making mkintf not copy the zt_chan_conf structure) was enough to
	  prevent the crash. ........ ................

2008-06-03 22:08 +0000 [r120172]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/options.h, main/asterisk.c, Makefile,
	  main/pbx.c, /, res/res_agi.c, pbx/pbx_realtime.c,
	  configs/pbx_realtime.conf (removed): Merged revisions 120171 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r120171 | tilghman | 2008-06-03 17:05:16 -0500 (Tue, 03
	  Jun 2008) | 5 lines Move compatibility options into
	  asterisk.conf, default them to on for upgrades, and off for new
	  installations. This includes the translation from pipes to commas
	  for pbx_realtime and the EXEC command for AGI, as well as the
	  change to the Set application not to support multiple variables
	  at once. ........

2008-06-03 21:35 +0000 [r120170]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 120169 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r120169 | russell | 2008-06-03 16:35:11 -0500
	  (Tue, 03 Jun 2008) | 12 lines Merged revisions 120168 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120168 | russell | 2008-06-03 16:34:55 -0500 (Tue, 03 Jun 2008)
	  | 4 lines Fix another place where peer->callno could change at a
	  very bad time, and also fix a place where a peer was used after
	  the reference was released. (inspired by rev 120001) ........
	  ................

2008-06-03 16:24 +0000 [r120034]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 120012 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r120012 | tilghman | 2008-06-03 11:19:35 -0500
	  (Tue, 03 Jun 2008) | 17 lines Merged revisions 120001 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r120001 | tilghman | 2008-06-03 11:10:53 -0500 (Tue, 03 Jun 2008)
	  | 9 lines Save the callno when we're poking, because our peer
	  structure could change during destruction (and thus we unlock the
	  wrong callno, causing a cascade failure). (closes issue #12717)
	  Reported by: gewfie Patches: 20080525__bug12717.diff.txt uploaded
	  by Corydon76 (license 14) Tested by: gewfie ........
	  ................

2008-06-03 15:57 +0000 [r119931-120000]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-test8, pbx/ael/ael-test/ref.ael-test18,
	  pbx/ael/ael-test/ref.ael-vtest21,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-vtest13,
	  pbx/ael/ael-test/ref.ael-vtest17,
	  pbx/ael/ael-test/ref.ael-ntest10, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test3, pbx/ael/ael-test/ref.ael-test5,
	  pbx/ael/ael-test/ref.ael-test15: Merged revisions 119998 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119998 | murf | 2008-06-03 09:49:34 -0600 (Tue,
	  03 Jun 2008) | 16 lines Merged revisions 119966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119966 | murf | 2008-06-03 09:26:56 -0600 (Tue, 03 Jun 2008) | 8
	  lines Updated the regressions on AEL. Hadn't updated this for the
	  changes I made to preserve ${EXTEN} in switches, which affected
	  several tests because it adds extra priorities, and at least one
	  needed to be updated because of the removal of the empty
	  extension warning message. ........ ................

	* res/ael/pval.c, /: Merged revisions 119930 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119930 | murf | 2008-06-03 09:07:20 -0600 (Tue, 03 Jun 2008) |
	  24 lines Merged revisions 119929 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119929 | murf | 2008-06-03 08:49:46 -0600 (Tue, 03 Jun 2008) |
	  16 lines as per
	  http://lists.digium.com/pipermail/asterisk-users/2008-June/212934.html,
	  which is a message from Philipp Kempgen, requesting that the
	  WARNING that an extension is empty be reduced to a NOTICE or
	  less, as empty extensions are syntactically possible, and no big
	  deal. With which I agree, and have removed that WARNING message
	  entirely. I think it is not necessary to see this message. It
	  didn't state that a NoOp() was inserted automatically on your
	  behalf, and really, as users, who cares? Why freak out dialplan
	  writers with unnecessary warnings? The details of the
	  machinations a compiler goes thru to produce working assembly
	  code is of little interest to most programmers-- we will follow
	  the unix principal of doing our work silently. ........
	  ................

2008-06-03 14:48 +0000 [r119928]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 119927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119927 | file | 2008-06-03 11:47:54 -0300 (Tue, 03 Jun 2008) |
	  10 lines Merged revisions 119926 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119926 | file | 2008-06-03 11:46:24 -0300 (Tue, 03 Jun 2008) | 2
	  lines Treat ECONNREFUSED as an error that will stop further
	  retransmissions. (issue #AST-58, patch from Switchvox) ........
	  ................

2008-06-03 13:30 +0000 [r119745-119893]  Russell Bryant <russell@digium.com>

	* /, main/logger.c: Merged revisions 119892 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119892 |
	  russell | 2008-06-03 08:29:16 -0500 (Tue, 03 Jun 2008) | 9 lines
	  Do a deep copy of file and function strings to avoid a potential
	  crash when modules are unloaded. (closes issue #12780) Reported
	  by: ys Patches: logger.diff uploaded by ys (license 281) --
	  modified by me for coding guidelines ........

	* /, channels/chan_iax2.c: Merged revisions 119839 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119839 | russell | 2008-06-02 15:08:24 -0500
	  (Mon, 02 Jun 2008) | 15 lines Merged revisions 119838 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119838 | russell | 2008-06-02 15:08:04 -0500 (Mon, 02 Jun 2008)
	  | 7 lines Revert a change made for issue #12479. This change
	  caused a regression such that a dial string such as (IAX2/foo)
	  did not automatically fall back to dialing the 's' extension
	  anymore. (closes issue #12770) Reported by: dagmoller ........
	  ................

	* /, apps/app_fax.c (added): Merged revisions 119801 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r119801 | russell | 2008-06-02 11:14:15 -0500 (Mon, 02 Jun 2008)
	  | 4 lines Add app_fax from asterisk-addons, with some additional
	  changes to resolve compiler warnings, as well as update to the
	  APIs in spandsp 0.0.5. Spandsp 0.0.5 is being distributed under
	  the LGPL, so we can move this module into the main tree. ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 119799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119799 |
	  russell | 2008-06-02 10:57:43 -0500 (Mon, 02 Jun 2008) | 4 lines
	  After determining that the version of spandsp installed is an
	  acceptable version, do a build and link test to ensure that the
	  library is usable, and that libtiff is also available ........

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in:
	  Merged revisions 119795 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119795 |
	  russell | 2008-06-02 10:43:40 -0500 (Mon, 02 Jun 2008) | 2 lines
	  Add a configure script check for spandsp ........

	* main/manager.c, /: Merged revisions 119744 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119744 | russell | 2008-06-02 09:41:55 -0500 (Mon, 02 Jun 2008)
	  | 13 lines Merged revisions 119742 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119742 | russell | 2008-06-02 09:39:45 -0500 (Mon, 02 Jun 2008)
	  | 5 lines Improve CLI command blacklist checking for the command
	  manager action. Previously, it did not handle case or whitespace
	  properly. This made it possible for blacklisted commands to get
	  executed anyway. (closes issue #12765) ........ ................

2008-06-02 14:40 +0000 [r119743]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c,
	  res/res_jabber.c: Merged revisions 119741 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119741 |
	  phsultan | 2008-06-02 16:35:24 +0200 (Mon, 02 Jun 2008) | 13
	  lines Do not link the guest account with any configured XMPP
	  client (in jabber.conf). The actual connection is made when a
	  call comes in Asterisk. Apply this fix to Jingle too. Fix the
	  ast_aji_get_client function that was not able to retrieve an XMPP
	  client from its JID. (closes issue #12085) Reported by: junky
	  Tested by: phsultan ........

2008-06-02 12:32 +0000 [r119532-119690]  Russell Bryant <russell@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn/isdn_lib.h, /: Merged
	  revisions 119586,119637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119586 | crichter | 2008-06-02 03:46:23 -0500 (Mon, 02 Jun 2008)
	  | 9 lines Merged revisions 119585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119585 | crichter | 2008-06-02 10:35:28 +0200 (Mo, 02 Jun 2008)
	  | 1 line Added counter for unhandled_bmsg Print, this prevents
	  the logs to be flooded to fast and save CPU in this error
	  scenario. Added 'last_used' element to bc structure, when a
	  bchannel changes from used to free this exact time will be marked
	  in last_used. When a new channel is requested the find_free_chan
	  function will check if the new empty channel was used within the
	  last second, if yes it will search for the next channel, if no it
	  will return this channel. This simple mechanism has prooven to
	  prevent race conditions where the NT and TE tried to allocate the
	  exact same channel at the same time (RELEASE cause: 44). ........
	  ................ r119637 | crichter | 2008-06-02 04:35:04 -0500
	  (Mon, 02 Jun 2008) | 9 lines Merged revisions 119636 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r119636 | crichter | 2008-06-02 11:29:21 +0200 (Mo, 02
	  Jun 2008) | 1 line fixed compile issue when dev-mode is enabled
	  ........ ................

	* /, channels/chan_iax2.c: Merged revisions 119688 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119688 | russell | 2008-06-02 07:30:42 -0500
	  (Mon, 02 Jun 2008) | 11 lines Merged revisions 119687 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119687 | russell | 2008-06-02 07:30:17 -0500 (Mon, 02 Jun 2008)
	  | 3 lines Even of the first PING or LAGRQ doesn't get sent
	  because it comes up too soon, make sure to reschedule so it gets
	  sent later. ........ ................

	* /, channels/chan_iax2.c: Merged revisions 119534 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119534 | russell | 2008-06-01 20:08:16 -0500
	  (Sun, 01 Jun 2008) | 10 lines Merged revisions 119533 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119533 | russell | 2008-06-01 20:06:09 -0500 (Sun, 01 Jun 2008)
	  | 2 lines Change a debug message to an actual debug message
	  ........ ................

	* apps/app_dial.c, /: Merged revisions 119531 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119531 | russell | 2008-06-01 20:04:01 -0500 (Sun, 01 Jun 2008)
	  | 10 lines Merged revisions 119530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119530 | russell | 2008-06-01 20:03:22 -0500 (Sun, 01 Jun 2008)
	  | 2 lines Fix another typo in documentation ........
	  ................

2008-06-01 21:59 +0000 [r119529]  Michiel van Baak <michiel@vanbaak.info>

	* apps/app_dial.c, /: Merged revisions 119479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119479 | mvanbaak | 2008-06-01 23:06:27 +0200 (Sun, 01 Jun 2008)
	  | 10 lines Merged revisions 119478 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119478 | mvanbaak | 2008-06-01 22:47:55 +0200 (Sun, 01 Jun 2008)
	  | 2 lines small typo fix 'retires' => 'retries' ........
	  ................

2008-05-30 21:24 +0000 [r119420]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_queue.c: Merged revisions 119419 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119419 | tilghman | 2008-05-30 16:23:14 -0500 (Fri, 30 May 2008)
	  | 14 lines Merged revisions 119404 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119404 | tilghman | 2008-05-30 16:17:45 -0500 (Fri, 30 May 2008)
	  | 6 lines When joinempty=strict, it only failed on join if there
	  were busy members. If all members were logged out OR paused, then
	  it (incorrectly) let callers join the queue. (closes issue
	  #12451) Reported by: davidw ........ ................

2008-05-30 19:48 +0000 [r119356]  Joshua Colp <jcolp@digium.com>

	* main/autoservice.c, /: Merged revisions 119355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119355 | file | 2008-05-30 16:47:30 -0300 (Fri, 30 May 2008) |
	  10 lines Merged revisions 119354 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119354 | file | 2008-05-30 16:46:37 -0300 (Fri, 30 May 2008) | 2
	  lines Fix a bug I found while testing for another issue. ........
	  ................

2008-05-30 17:13 +0000 [r119304]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Oops, broke 1.6 (thanks MattF)

2008-05-30 16:57 +0000 [r119303]  Michiel van Baak <michiel@vanbaak.info>

	* contrib/scripts/safe_asterisk, contrib/init.d/rc.suse.asterisk,
	  contrib/init.d/rc.debian.asterisk,
	  contrib/init.d/rc.mandrake.asterisk, /,
	  contrib/init.d/rc.redhat.asterisk,
	  contrib/init.d/rc.gentoo.asterisk,
	  contrib/init.d/rc.slackware.asterisk: Merged revisions 119302 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119302 | mvanbaak | 2008-05-30 18:47:24 +0200
	  (Fri, 30 May 2008) | 22 lines Merged revisions 119301 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119301 | mvanbaak | 2008-05-30 18:44:39 +0200 (Fri, 30 May 2008)
	  | 14 lines dont use a bashism way to check the $VERSION variable.
	  The rc/init.d scripts, and safe_asterisk work on normal sh now
	  again. Tested on: OpenBSD 4.2 (me) Debian etch (me) Ubuntu Hardy
	  (me and loloski) FC9 (loloski) (closes issue #12687) Reported by:
	  loloski Patches: 20080529-12687-safe_asterisk-fixversion.diff.txt
	  uploaded by mvanbaak (license 7) Tested by: loloski, mvanbaak
	  ........ ................

2008-05-30 16:40 +0000 [r119297-119300]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c, /: Merged revisions 119299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119299 |
	  tilghman | 2008-05-30 11:40:13 -0500 (Fri, 30 May 2008) | 2 lines
	  Suppress warning about pbx structure already existing ........

	* apps/app_stack.c, apps/app_dial.c, include/asterisk/agi.h, /,
	  CHANGES: Merged revisions 119296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r119296 |
	  tilghman | 2008-05-30 11:10:46 -0500 (Fri, 30 May 2008) | 8 lines
	  Add native AGI command GOSUB, as invoking Gosub with EXEC does
	  not work properly. (closes issue #12760) Reported by: Corydon76
	  Patches: 20080530__bug12760.diff.txt uploaded by Corydon76
	  (license 14) Tested by: tim_ringenbach, Corydon76 ........

2008-05-30 13:01 +0000 [r119158-119240]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 119239 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119239 | russell | 2008-05-30 07:59:11 -0500
	  (Fri, 30 May 2008) | 23 lines Merged revisions 119238 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r119238 | russell | 2008-05-30 07:55:36 -0500
	  (Fri, 30 May 2008) | 15 lines Merged revisions 119237 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r119237 | russell | 2008-05-30 07:49:39 -0500 (Fri, 30 May 2008)
	  | 7 lines - Instead of only enforcing destination call number
	  checking on an ACK, check all full frames except for PING and
	  LAGRQ, which may be sent by older versions too quickly to contain
	  the destination call number. (As suggested by Tim Panton on the
	  asterisk-dev list) - Merge changes from
	  team/russell/iax2-frame-race, which prevents PING and LAGRQ from
	  being sent before the destination call number is known. ........
	  ................ ................

	* main/autoservice.c, /: Merged revisions 119157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119157 | russell | 2008-05-29 17:28:50 -0500 (Thu, 29 May 2008)
	  | 18 lines Merged revisions 119156 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119156 | russell | 2008-05-29 17:24:29 -0500 (Thu, 29 May 2008)
	  | 10 lines Fix a race condition in channel autoservice. There was
	  still a small window of opportunity for a DTMF frame, or some
	  other deferred frame type, to come in and get dropped. (closes
	  issue #12656) (closes issue #12656) Reported by: dimas Patches:
	  v3-12656.patch uploaded by dimas (license 88) -- with some
	  modifications by me ........ ................

2008-05-29 20:26 +0000 [r119073]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_zap.c, /: Merged revisions 119072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r119072 | tilghman | 2008-05-29 15:25:33 -0500 (Thu, 29 May 2008)
	  | 15 lines Merged revisions 119071 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119071 | tilghman | 2008-05-29 15:24:11 -0500 (Thu, 29 May 2008)
	  | 7 lines Call waiting tone occurs too often, because it's
	  getting serviced by both subchannels. (closes issue #11354)
	  Reported by: cahen Patches: 20080512__bug11354.diff.txt uploaded
	  by Corydon76 (license 14) ........ ................

2008-05-29 19:06 +0000 [r118960-119014]  Russell Bryant <russell@digium.com>

	* apps/app_milliwatt.c, /: Merged revisions 119013 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119013 | russell | 2008-05-29 14:05:33 -0500
	  (Thu, 29 May 2008) | 12 lines Merged revisions 119012 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r119012 | russell | 2008-05-29 14:04:52 -0500 (Thu, 29 May 2008)
	  | 4 lines - Fix a typo in the argument to Playtones - use
	  ast_safe_sleep() instead of calling the wait application (thanks
	  to tilghman for pointing these out!) ........ ................

	* /, channels/chan_iax2.c: Merged revisions 119010 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r119010 | russell | 2008-05-29 13:54:11 -0500
	  (Thu, 29 May 2008) | 24 lines Merged revisions 119009 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r119009 | russell | 2008-05-29 13:49:12 -0500
	  (Thu, 29 May 2008) | 16 lines Merged revisions 119008 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r119008 | russell | 2008-05-29 13:45:21 -0500 (Thu, 29 May 2008)
	  | 7 lines Merge changes from
	  team/russell/iax2-another-fix-to-the-fix As described in the
	  following post to the asterisk-dev mailing list, only enforce
	  destination call numbers when processing an ACK.
	  http://lists.digium.com/pipermail/asterisk-dev/2008-May/033217.html
	  (closes issue #12631) ........ ................ ................

	* apps/app_milliwatt.c, /: Merged revisions 118962 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r118962 | russell | 2008-05-29 12:52:00 -0500
	  (Thu, 29 May 2008) | 11 lines Merged revisions 118961 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118961 | russell | 2008-05-29 12:51:29 -0500 (Thu, 29 May 2008)
	  | 3 lines - Mark app_milliwatt dependent on res_indications
	  (thanks to jsmith) - fix a typo in a log message (thanks to
	  qwell) ........ ................

	* apps/app_milliwatt.c, /: Merged revisions 118959 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r118959 | russell | 2008-05-29 12:46:04 -0500
	  (Thu, 29 May 2008) | 11 lines Merged revisions 118956 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118956 | russell | 2008-05-29 12:38:38 -0500 (Thu, 29 May 2008)
	  | 3 lines Change milliwatt to use the proper tone by default
	  (1004 Hz) instead of 1000 Hz. An option is there to use 1000 Hz
	  for anyone that might want it. ........ ................

2008-05-29 17:42 +0000 [r118958]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_mgcp.c, channels/chan_zap.c, /,
	  channels/chan_agent.c, channels/chan_alsa.c, main/utils.c,
	  include/asterisk/lock.h, channels/chan_iax2.c: Merged revisions
	  118955,118957 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118955 | tilghman | 2008-05-29 12:35:19 -0500 (Thu, 29 May 2008)
	  | 11 lines Merged revisions 118953 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118953 | tilghman | 2008-05-29 12:20:16 -0500 (Thu, 29 May 2008)
	  | 3 lines Add some debugging code that ensures that when we do
	  deadlock avoidance, we don't lose the information about how a
	  lock was originally acquired. ........ ................ r118957 |
	  tilghman | 2008-05-29 12:39:50 -0500 (Thu, 29 May 2008) | 10
	  lines Merged revisions 118954 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118954 | tilghman | 2008-05-29 12:33:01 -0500 (Thu, 29 May 2008)
	  | 2 lines Define also when not DEBUG_THREADS ........
	  ................

2008-05-29 04:11 +0000 [r118909]  Steve Murphy <murf@digium.com>

	* main/cdr.c, apps/app_forkcdr.c, /: Merged revisions 118880 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r118880 | murf | 2008-05-28 19:29:09 -0600 (Wed,
	  28 May 2008) | 54 lines Merged revisions 118858 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118858 | murf | 2008-05-28 18:25:28 -0600 (Wed, 28 May 2008) |
	  46 lines (closes issue #10668) (closes issue #11721) (closes
	  issue #12726) Reported by: arkadia Tested by: murf These changes:
	  1. revert the changes made via bug 10668; I should have known
	  that such changes, even tho they made sense at the time, seemed
	  like an omission, etc, were actually integral to the CDR system
	  via forkCDR. It makes sense to me now that forkCDR didn't
	  natively end any CDR's, but rather depended on natively closing
	  them all at hangup time via traversing and closing them all,
	  whether locked or not. I still don't completely understand the
	  benefits of setvar and answer operating on locked cdrs, but I've
	  seen enough to revert those changes also, and stop messing up
	  users who depended on that behavior. bug 12726 found reverting
	  the changes fixed his changes, and after a long review and
	  working on forkCDR, I can see why. 2. Apply the suggested
	  enhancements proposed in 10668, but in a completely compatible
	  way. ForkCDR will behave exactly as before, but now has new
	  options that will allow some actions to be taken that will
	  slightly modify the outcome and side-effects of forkCDR. Based on
	  conversations I've had with various people, these small tweaks
	  will allow some users to get the behavior they need. For
	  instance, users executing forkCDR in an AGI script will find the
	  answer time set, and DISPOSITION set, a situation not covered
	  when the routines were first written. 3. A small problem in the
	  cdr serializer would output answer and end times even when they
	  were not set. This is now fixed. ........ ................

2008-05-28 18:07 +0000 [r118781]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_skinny.c: Merged revisions 118750 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r118750 | mvanbaak | 2008-05-28 19:58:21 +0200 (Wed, 28 May 2008)
	  | 2 lines remove unused astobj.h header file from chan_skinny.c
	  ........

2008-05-28 14:31 +0000 [r118648]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample, CHANGES: Merged
	  revisions 118647 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118647 | file | 2008-05-28 11:29:01 -0300 (Wed, 28 May 2008) |
	  12 lines Merged revisions 118646 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118646 | file | 2008-05-28 11:23:34 -0300 (Wed, 28 May 2008) | 4
	  lines Add an option to use the source IP address of RTP as the
	  destination IP address of UDPTL when a specific option is
	  enabled. If the remote side is properly configured (ports
	  forwarded) then UDPTL will flow. (closes issue #10417) Reported
	  by: cstadlmann ........ ................

2008-05-28 14:13 +0000 [r118615-118645]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c, /, include/asterisk/jingle.h: Merged
	  revisions 118644 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r118644 |
	  phsultan | 2008-05-28 16:10:48 +0200 (Wed, 28 May 2008) | 10
	  lines Changed to temporary namespaces to match with latest XEPs.
	  As soon as Jingle is completely standardized, we can set those
	  namespaces to their final values. Added two attributes to the
	  jingle_pvt struct to store the content name attributes. Reported
	  by Robert McQueen on Telepathy's framework mailing list :
	  http://lists.freedesktop.org/archives/telepathy/2008-May/001971.html
	  Keeping working on our Jingle stack! ........

	* channels/chan_jingle.c, /: Merged revisions 118614 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r118614 | phsultan | 2008-05-28 10:39:10 +0200 (Wed, 28 May 2008)
	  | 1 line Code simplification ........

2008-05-27 19:35 +0000 [r118561]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 118560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118560 | file | 2008-05-27 16:34:14 -0300 (Tue, 27 May 2008) |
	  12 lines Merged revisions 118558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118558 | file | 2008-05-27 16:32:38 -0300 (Tue, 27 May 2008) | 4
	  lines Fix an issue where codec preferences were not set on
	  dialogs that were not authenticated via a user or peer and allow
	  framing to work without rtpmap in the SDP. (closes issue #12501)
	  Reported by: slimey ........ ................

2008-05-27 19:28 +0000 [r118557]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/compat.h: Merged revisions 118556 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r118556 | russell | 2008-05-27 14:27:48 -0500 (Tue, 27
	  May 2008) | 6 lines Add printf format attribute for vasprintf().
	  (closes issue #12729) Reported by: snuffy Patches: bug_12729.diff
	  uploaded by snuffy (license 35) ........

2008-05-27 19:22 +0000 [r118555]  Tilghman Lesher <tlesher@digium.com>

	* main/cli.c, /: Merged revisions 118554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118554 | tilghman | 2008-05-27 14:21:03 -0500 (Tue, 27 May 2008)
	  | 14 lines Merged revisions 118551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118551 | tilghman | 2008-05-27 14:15:27 -0500 (Tue, 27 May 2008)
	  | 6 lines When showing an error message for a command, don't
	  shorten the command output, as it tends to confuse the user (it's
	  fine for suggesting other commands, however). Reported by:
	  seanbright (on #asterisk-dev) Fixed by: me ........
	  ................

2008-05-27 19:09 +0000 [r118518]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 118514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118514 | mmichelson | 2008-05-27 14:08:24 -0500 (Tue, 27 May
	  2008) | 19 lines Merged revisions 118509 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118509 | mmichelson | 2008-05-27 14:07:26 -0500 (Tue, 27 May
	  2008) | 11 lines Russell noted to me that in the case that
	  separate threads use their own addressing system, the fix I made
	  for issue 12376 does not guarantee uniqueness to the datastores'
	  uids. Though I know of no system that works this way, I am going
	  to change this right now to prevent trying to track down some
	  future bug that may occur and cause untold hours of debugging
	  time to track down. The change involves using a global counter
	  which increases with each new chanspy_ds which is created. This
	  guarantees uniqueness. ........ ................

2008-05-27 18:59 +0000 [r118471]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 118466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118466 | tilghman | 2008-05-27 13:59:06 -0500 (Tue, 27 May 2008)
	  | 16 lines Merged revisions 118465 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118465 | tilghman | 2008-05-27 13:58:09 -0500 (Tue, 27 May 2008)
	  | 8 lines NULL character should terminate only commands back to
	  the core, not log messages to the console. (closes issue #12731)
	  Reported by: seanbright Patches: 20080527__bug12731.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: seanbright ........
	  ................

2008-05-27 17:25 +0000 [r118418]  Michiel van Baak <michiel@vanbaak.info>

	* apps/app_voicemail.c: small update to the g() option of
	  app_voicemail to note that gain changes only work on zap channels
	  right now. issue #12578 shows it's not clear right now.

2008-05-27 16:48 +0000 [r118378-118382]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 118371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118371 | mmichelson | 2008-05-27 11:43:36 -0500 (Tue, 27 May
	  2008) | 22 lines Merged revisions 118365 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118365 | mmichelson | 2008-05-27 11:38:38 -0500 (Tue, 27 May
	  2008) | 14 lines Add a unique id to the datastore allocated in
	  app_chanspy since it is possible that multiple spies may be
	  listening to the same channel. (closes issue #12376) Reported by:
	  DougUDI Patches: 12376_chanspy_uid.diff uploaded by putnopvut
	  (license 60) Tested by: destiny6628 (closes issue #12243)
	  Reported by: atis ........ ................

	* /: Hmm, I apparently forgot to commit the block of revision
	  118175. Now I'm doing it.

2008-05-27 15:47 +0000 [r118360]  Tilghman Lesher <tlesher@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 118359 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r118359 | tilghman | 2008-05-27 10:46:58 -0500
	  (Tue, 27 May 2008) | 11 lines Merged revisions 118358 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118358 | tilghman | 2008-05-27 10:45:37 -0500 (Tue, 27 May 2008)
	  | 3 lines Add a note that pbx_config.so is needed for Local
	  channels. (Closes issue #12671) ........ ................

2008-05-27 14:51 +0000 [r118331]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/compat.h: Merged revisions 118328 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r118328 | russell | 2008-05-27 09:51:13 -0500 (Tue, 27
	  May 2008) | 2 lines Add printf attribute to asprintf ........

2008-05-27 13:30 +0000 [r118301-118303]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 118302 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r118302 | tilghman | 2008-05-27 08:30:10 -0500 (Tue, 27 May 2008)
	  | 6 lines When binding anonymously, credentials are still needed.
	  (closes issue #12601) Reported by: suretec Patches:
	  res_config_ldap.c.patch uploaded by suretec (license 70) ........

	* /, pbx/pbx_realtime.c: Merged revisions 118300 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r118300 |
	  tilghman | 2008-05-27 08:13:17 -0500 (Tue, 27 May 2008) | 4 lines
	  In compat14 mode, don't translate pipes inside expressions, as
	  they aren't argument delimiters, but rather 'or' symbols. (Closes
	  issue #12723) ........

2008-05-25 16:20 +0000 [r118253]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 118252 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118252 | tilghman | 2008-05-25 11:17:05 -0500 (Sun, 25 May 2008)
	  | 20 lines Merged revisions 118251 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118251 | tilghman | 2008-05-25 11:02:04 -0500 (Sun, 25 May 2008)
	  | 12 lines Realtime flag affects construction in multiple ways,
	  so consulting whether rtcachefriends was set was done too soon
	  (needed to be done inside build_peer, not just as a flag to
	  build_peer). Also, fullcontact needed to be reconstructed,
	  because realtime separates the embedded ';' into multiple fields.
	  (closes issue #12722) Reported by: barthpbx Patches:
	  20080525__bug12722.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: barthpbx (Much of the discussion happened on
	  #asterisk-dev for diagnosing this issue) ........
	  ................

2008-05-24 01:15 +0000 [r118177-118179]  Jeff Peeler <jpeeler@digium.com>

	* doc/api-1.6.0-changes.odt (added), /: Merged revisions 118178 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r118178 | jpeeler | 2008-05-23 20:14:41 -0500 (Fri, 23
	  May 2008) | 1 line add document describing API changes from 1.4.0
	  to 1.6.0 ........

2008-05-23 21:37 +0000 [r118168]  Brett Bryant <bbryant@digium.com>

	* main/manager.c, /, main/http.c, include/asterisk/manager.h:
	  Merged revisions 118161 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r118161 |
	  bbryant | 2008-05-23 16:19:42 -0500 (Fri, 23 May 2008) | 3 lines
	  Add new functionality to http server that requires manager
	  authentication for any path that includes a directory named
	  'private'. This patch also requires manager authentication for
	  any POST's being sent to the server as well to help secure
	  uploads. ........

2008-05-23 21:31 +0000 [r118165]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_zap.c: Merged revisions 118164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118164 | jpeeler | 2008-05-23 16:26:39 -0500 (Fri, 23 May 2008)
	  | 9 lines Merged revisions 118163 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118163 | jpeeler | 2008-05-23 16:21:35 -0500 (Fri, 23 May 2008)
	  | 1 line Fix a few things I missed to ensure zt_chan_conf
	  structure is not modified in mkintf ........ ................

2008-05-23 18:15 +0000 [r118130]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, /: Merged revisions 118129 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r118129 |
	  tilghman | 2008-05-23 13:09:14 -0500 (Fri, 23 May 2008) | 3 lines
	  Protect the object from changing while the 'odbc show' CLI
	  command is running (Closes issue #12704) ........

2008-05-23 13:00 +0000 [r118054]  Tilghman Lesher <tlesher@digium.com>

	* doc/cli.txt (added), /: Merged revisions 118053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118053 | tilghman | 2008-05-23 08:00:10 -0500 (Fri, 23 May 2008)
	  | 11 lines Merged revisions 118052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118052 | tilghman | 2008-05-23 07:59:16 -0500 (Fri, 23 May 2008)
	  | 3 lines Add information on using the Asterisk console,
	  including tab command line completion. (Closes issue #12681)
	  ........ ................

2008-05-23 12:37 +0000 [r118050]  Russell Bryant <russell@digium.com>

	* include/asterisk/utils.h, /, main/utils.c: Merged revisions
	  118049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r118049 | russell | 2008-05-23 07:37:31 -0500 (Fri, 23 May 2008)
	  | 17 lines Merged revisions 118048 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r118048 | russell | 2008-05-23 07:30:53 -0500 (Fri, 23 May 2008)
	  | 9 lines Don't declare a function that takes variable arguments
	  as inline, because it's not valid, and on some compilers, will
	  emit a warning.
	  http://gcc.gnu.org/onlinedocs/gcc/Inline.html#Inline (closes
	  issue #12289) Reported by: francesco_r Patches by Tilghman, final
	  patch by me ........ ................

2008-05-23 11:02 +0000 [r118021]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c, res/res_jabber.c: Merged revisions
	  118020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r118020 |
	  phsultan | 2008-05-23 12:33:21 +0200 (Fri, 23 May 2008) | 15
	  lines - remove whitespaces between tags in received XML packets
	  before giving them to the parser ; - report Gtalk error messages
	  from a buddy to the console. This patch makes Asterisk "Google
	  Jingle" (chan_gtalk) implementation work with Empathy. Note that
	  this is only true for audio streams, not video. Thank you to PH
	  for his great help! (closes issue #12647) Reported by: PH
	  Patches: trunk-12647-1.diff uploaded by phsultan (license 73)
	  Tested by: phsultan, PH ........

2008-05-22 21:43 +0000 [r117984-117987]  Tilghman Lesher <tlesher@digium.com>

	* /, pbx/pbx_realtime.c, configs/pbx_realtime.conf (added): Merged
	  revisions 117986 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r117986 |
	  tilghman | 2008-05-22 16:42:50 -0500 (Thu, 22 May 2008) | 2 lines
	  Add a compatibility option for upgrading realtime extensions
	  ........

2008-05-22 18:55 +0000 [r117901]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 117900 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117900 | tilghman | 2008-05-22 13:54:41 -0500 (Thu, 22 May 2008)
	  | 10 lines Merged revisions 117899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117899 | tilghman | 2008-05-22 13:53:53 -0500 (Thu, 22 May 2008)
	  | 2 lines Also remove preamble from asynchronous events (reported
	  by jsmith on #asterisk-dev) ........ ................

2008-05-22 15:51 +0000 [r117793]  Sean Bright <sean.bright@gmail.com>

	* /, configs/jabber.conf.sample: Merged revisions 117792 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r117792 | seanbright | 2008-05-22 11:49:17 -0400 (Thu,
	  22 May 2008) | 1 line Minor text fix. roster -> resource.
	  ........

2008-05-22 13:41 +0000 [r117757]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, /, build_tools/make_buildopts_h: Merged
	  revisions 117756 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r117756 |
	  russell | 2008-05-22 08:40:52 -0500 (Thu, 22 May 2008) | 5 lines
	  Store build-time options as a string in AST_BUILDOPTS in
	  buildopts.h. Also, display this information in the "core show
	  settings" CLI command. This is useful if you want to verify that
	  you're running a build with DONT_OPTIMIZE, DEBUG_THREADS, etc.
	  ........

2008-05-21 22:01 +0000 [r117659-117660]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_zap.c: Merged revisions 117658 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117658 | jpeeler | 2008-05-21 16:31:17 -0500 (Wed, 21 May 2008)
	  | 10 lines Merged revisions 117582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117582 | jpeeler | 2008-05-21 15:11:14 -0500 (Wed, 21 May 2008)
	  | 2 lines Ensure that passed in zt_chan_conf structure is not
	  modified in mkintf. ........ ................

	* channels/chan_zap.c, /: Merged revisions 117628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117628 | jpeeler | 2008-05-21 15:44:04 -0500 (Wed, 21 May 2008)
	  | 12 lines Merged revisions 117462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117462 | jpeeler | 2008-05-21 11:58:40 -0500 (Wed, 21 May 2008)
	  | 3 lines Pass a pointer for the conf parameter to the function
	  mkintf rather than the whole zt_chan_conf structure. Another
	  commit is following to make sure the zt_chan_conf structure is
	  not modified. ........ ................

2008-05-21 19:45 +0000 [r117576]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 117575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117575 | file | 2008-05-21 16:39:42 -0300 (Wed, 21 May 2008) |
	  10 lines Merged revisions 117574 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117574 | file | 2008-05-21 16:38:28 -0300 (Wed, 21 May 2008) | 2
	  lines Apply the autoframing setting to dialogs that do not get
	  matched against a user or peer. ........ ................

2008-05-21 18:44 +0000 [r117522]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 117520 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117520 | tilghman | 2008-05-21 13:43:26 -0500 (Wed, 21 May 2008)
	  | 11 lines Merged revisions 117519 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117519 | tilghman | 2008-05-21 13:40:14 -0500 (Wed, 21 May 2008)
	  | 3 lines Strip the preamble from the output also when -rx is not
	  being used (Related to issue #12702) ........ ................

2008-05-21 18:29 +0000 [r117486-117516]  Russell Bryant <russell@digium.com>

	* main/asterisk.c, /: Merged revisions 117515 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117515 | russell | 2008-05-21 13:29:05 -0500 (Wed, 21 May 2008)
	  | 12 lines Merged revisions 117514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117514 | russell | 2008-05-21 13:28:46 -0500 (Wed, 21 May 2008)
	  | 4 lines Don't filter the magic character in the network
	  verboser. It gets filtered once it reaches the client. (related
	  to issue #12702, pointed out by tilghman) ........
	  ................

	* main/asterisk.c, pbx/pbx_gtkconsole.c, /: Merged revisions 117508
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r117508 | russell | 2008-05-21 13:20:11 -0500
	  (Wed, 21 May 2008) | 15 lines Merged revisions 117507 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117507 | russell | 2008-05-21 13:19:34 -0500 (Wed, 21 May 2008)
	  | 7 lines 1) Don't print the verbose marker in front of every
	  message from ast_verbose() being sent to remote consoles. 2) Fix
	  pbx_gtkconsole to filter out the verbose marker. (related to
	  issue #12702) ........ ................

	* main/asterisk.c, /: Merged revisions 117481 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117481 | russell | 2008-05-21 13:12:19 -0500 (Wed, 21 May 2008)
	  | 14 lines Merged revisions 117479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117479 | russell | 2008-05-21 13:11:51 -0500 (Wed, 21 May 2008)
	  | 6 lines Don't display the verbose marker for calls to
	  ast_verbose() that do not include a VERBOSE_PREFIX in front of
	  the message. (closes issue #12702) Reported by: johnlange Patched
	  by me ........ ................

2008-05-21 02:21 +0000 [r117368]  Mark Michelson <mmichelson@digium.com>

	* main/config.c, /: Merged revisions 117367 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r117367 |
	  mmichelson | 2008-05-20 21:20:31 -0500 (Tue, 20 May 2008) | 19
	  lines Be sure that we cache included files for each source file
	  which loads a configuration file. As it was, only the first did
	  so. This led to a problem if the included file was changed (but
	  not the configuration file which includes it) and the second
	  source file attempted to reload the configuration. It would not
	  see that the included file had changed. In this particular
	  example, res_phoneprov and chan_sip both loaded sip.conf, which
	  included a file call sip.peers.conf. Since res_phoneprov was the
	  first to load sip.conf, only it cached the fact that sip.conf
	  included sip.peers.conf. If sip.peers.conf were changed and
	  sip.conf were not and a sip reload were issued (meaning that
	  chan_sip attempts to reload sip.conf only if it and its included
	  files have changed) the changes made to sip.peers.conf would not
	  be seen and therefore no action would be taken. (closes issue
	  #12693) Reported by: marsosa ........

2008-05-21 01:20 +0000 [r117365]  Steve Murphy <murf@digium.com>

	* /, utils/ael_main.c: Merged revisions 117335 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r117335 |
	  murf | 2008-05-20 19:00:28 -0600 (Tue, 20 May 2008) | 10 lines
	  These changes were made via the comments atis_work made at 4:30am
	  (Mountain Time zone- US) in #asterisk-dev on 20 May 2008. He
	  noted that a backslash was being inserted before commas in app
	  call arguments in the extensions.conf.aeldump file that you get
	  from aelparse with the -w arg. This was being generated from code
	  left over from 1.4, where commas were substituted with '|', and
	  any remaining commas needed to be escaped. Many thanks to atis
	  for his comment; please let us know if these changes break
	  anything! ........

2008-05-19 16:58 +0000 [r117134-117137]  Joshua Colp <jcolp@digium.com>

	* res/res_smdi.c, /: Merged revisions 117136 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r117136 | file | 2008-05-19 13:53:33 -0300 (Mon, 19 May 2008) |
	  14 lines Merged revisions 117135 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117135 | file | 2008-05-19 13:50:52 -0300 (Mon, 19 May 2008) | 6
	  lines Use the right pthread lock and condition when waiting.
	  (closes issue #12664) Reported by: tomo1657 Patches:
	  res_smdi.c.patch uploaded by tomo1657 (license 484) ........
	  ................

2008-05-19 16:07 +0000 [r117089]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/utils.h, /: Merged revisions 117088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r117088 | tilghman | 2008-05-19 11:07:09 -0500
	  (Mon, 19 May 2008) | 10 lines Merged revisions 117086 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117086 | tilghman | 2008-05-19 11:05:05 -0500 (Mon, 19 May 2008)
	  | 2 lines The addition of usleep(2) within ast_assert requires
	  the inclusion of the unistd.h header ........ ................

2008-05-19 16:05 +0000 [r117083-117087]  Joshua Colp <jcolp@digium.com>

	* /, main/logger.c: Merged revisions 117085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r117085 |
	  file | 2008-05-19 13:03:33 -0300 (Mon, 19 May 2008) | 4 lines The
	  logger closes the files it is logging to when reloading so we
	  have to read in the logger configuration even if it has not
	  changed so that the logs get opened again. (closes issue #12665)
	  Reported by: DennisD ........

	* /, channels/h323/ast_h323.cxx: Merged revisions 117082 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r117082 | file | 2008-05-19 12:24:44 -0300 (Mon,
	  19 May 2008) | 14 lines Merged revisions 117081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r117081 | file | 2008-05-19 12:22:10 -0300 (Mon, 19 May 2008) | 6
	  lines Make chan_h323 work with pwlib 1.12.0 (closes issue #12682)
	  Reported by: bamby Patches: pwlib_nopipe.diff uploaded by bamby
	  (license 430) ........ ................

2008-05-19 03:44 +0000 [r116980]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 116979 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r116979 | russell | 2008-05-18 22:44:28 -0500
	  (Sun, 18 May 2008) | 12 lines Merged revisions 116978 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116978 | russell | 2008-05-18 22:44:04 -0500 (Sun, 18 May 2008)
	  | 4 lines Avoid access of uninitialized memory. This caused a
	  bunch of crashes for me while doing load testing of development
	  branch where I'm working on some performance improvements.
	  ........ ................

2008-05-18 21:18 +0000 [r116949]  Tilghman Lesher <tlesher@digium.com>

	* /, utils/astcanary.c: Merged revisions 116948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r116948 |
	  tilghman | 2008-05-18 16:15:58 -0500 (Sun, 18 May 2008) | 4 lines
	  Add a set of text to the file astcanary uses to communicate back
	  the main Asterisk process, which explains the purpose for the
	  file being there. This should assist people who find the file and
	  wonder why it exists. ........

2008-05-18 19:59 +0000 [r116922]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 116919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r116919 |
	  russell | 2008-05-18 14:58:10 -0500 (Sun, 18 May 2008) | 3 lines
	  Remove duplicate colon on Reason header (closes issue #12678)
	  ........

2008-05-17 19:40 +0000 [r116849-116885]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 116800 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r116800 | file | 2008-05-16 17:30:24 -0300 (Fri,
	  16 May 2008) | 12 lines Merged revisions 116799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116799 | file | 2008-05-16 17:28:11 -0300 (Fri, 16 May 2008) | 4
	  lines Check to make sure an RTP structure exists before calling
	  ast_rtp_new_source on it. (closes issue #12669) Reported by:
	  sbisker ........ ................

2008-05-16 20:03 +0000 [r116798]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 116797 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r116797 |
	  mattf | 2008-05-16 15:00:04 -0500 (Fri, 16 May 2008) | 1 line Try
	  to see if we can make our ringback situation a little better
	  ........

2008-05-15 22:07 +0000 [r116636-116695]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/utils.h, /, include/asterisk/strings.h: Merged
	  revisions 116694 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r116694 |
	  tilghman | 2008-05-15 17:05:47 -0500 (Thu, 15 May 2008) | 4 lines
	  Add an extra check in ast_strlen_zero, and make ast_assert() not
	  print the file, line, and function name twice. (Closes issue
	  #12650) ........

	* cdr/cdr_csv.c, /: Merged revisions 116631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r116631 |
	  tilghman | 2008-05-15 12:58:22 -0500 (Thu, 15 May 2008) | 3 lines
	  Don't unload config on reload, when config has not changed.
	  (Closes issue #12652) ........

2008-05-14 21:41 +0000 [r116470]  Russell Bryant <russell@digium.com>

	* main/rtp.c, main/sched.c, main/channel.c, main/udptl.c,
	  include/asterisk/utils.h, /, channels/chan_agent.c,
	  main/abstract_jb.c, include/asterisk/channel.h: Merged revisions
	  116469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116469 | russell | 2008-05-14 16:40:43 -0500 (Wed, 14 May 2008)
	  | 12 lines Merged revisions 116463 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116463 | russell | 2008-05-14 16:32:00 -0500 (Wed, 14 May 2008)
	  | 4 lines Add ast_assert(), which can be used to handle fatal
	  errors. It is only compiled in if dev-mode is enabled, and only
	  aborts if DO_CRASH is defined. (inspired by issue #12650)
	  ........ ................

2008-05-14 21:39 +0000 [r116468]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 116467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116467 | tilghman | 2008-05-14 16:39:06 -0500 (Wed, 14 May 2008)
	  | 15 lines Merged revisions 116466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116466 | tilghman | 2008-05-14 16:38:09 -0500 (Wed, 14 May 2008)
	  | 7 lines Avoid zombies when the channel exits before the AGI.
	  (closes issue #12648) Reported by: gkloepfer Patches:
	  20080514__bug12648.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: gkloepfer ........ ................

2008-05-14 20:43 +0000 [r116408-116411]  Jason Parker <jparker@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 116410 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r116410 | qwell | 2008-05-14 15:43:26 -0500
	  (Wed, 14 May 2008) | 9 lines Merged revisions 116409 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r116409 | qwell | 2008-05-14 15:43:08 -0500 (Wed, 14 May
	  2008) | 1 line Document exitcontext in app_voicemail sample
	  config ........ ................

	* apps/app_voicemail.c, /: Merged revisions 116407 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r116407 | qwell | 2008-05-14 15:36:55 -0500 (Wed, 14 May 2008) |
	  9 lines Voicemail "* exit" should not require an exitcontext to
	  be specified. The behavior in 1.4 was that it would use the
	  current context if an exitcontext existed. (closes issue #12605)
	  Reported by: kenjreno Patches: 12605-starexit.diff uploaded by
	  qwell (license 4) Tested by: file ........

2008-05-14 18:54 +0000 [r116351-116354]  Joshua Colp <jcolp@digium.com>

	* /, main/Makefile: Merged revisions 116353 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116353 | file | 2008-05-14 15:54:16 -0300 (Wed, 14 May 2008) |
	  12 lines Merged revisions 116352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116352 | file | 2008-05-14 15:53:39 -0300 (Wed, 14 May 2008) | 4
	  lines Add linux-gnueabi in. (closes issue #12529) Reported by:
	  tzafrir ........ ................

	* /, res/res_config_ldap.c: Merged revisions 116350 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r116350 | file | 2008-05-14 15:25:54 -0300 (Wed, 14 May 2008) | 4
	  lines Make the ldap version setting work without having both
	  version and protocol set. (closes issue #12613) Reported by:
	  suretec ........

2008-05-14 17:01 +0000 [r116319]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_externalivr.c: Merged revisions 116298 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r116298 | tilghman | 2008-05-14 11:53:23 -0500
	  (Wed, 14 May 2008) | 15 lines Merged revisions 116296 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116296 | tilghman | 2008-05-14 11:46:48 -0500 (Wed, 14 May 2008)
	  | 2 lines Detect another way for a connection to have gone away.
	  (closes issue #12618) Reported by: ctooley Patches:
	  1.4-externalivr-test_fd.diff uploaded by ctooley (license 136)
	  trunk-externalivr-test_fd.diff uploaded by ctooley (license 136)
	  ........ ................

2008-05-14  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta9 released.

2008-05-14 13:13 +0000 [r116236]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 116234 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116234 | oej | 2008-05-14 15:05:15 +0200 (Ons, 14 Maj 2008) | 11
	  lines Merged revisions 116230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116230 | oej | 2008-05-14 14:51:06 +0200 (Ons, 14 Maj 2008) | 3
	  lines Accept text messages even with Content-Type:
	  text/plain;charset=Södermanländska ........ ................

2008-05-14 00:20 +0000 [r116096-116139]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /, include/asterisk/lock.h: Merged revisions
	  116089 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116089 | mmichelson | 2008-05-13 18:54:01 -0500 (Tue, 13 May
	  2008) | 20 lines Merged revisions 116088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116088 | mmichelson | 2008-05-13 18:47:49 -0500 (Tue, 13 May
	  2008) | 12 lines A change to the way channel locks are handled
	  when DEBUG_CHANNEL_LOCKS is defined. After debugging a deadlock,
	  it was noticed that when DEBUG_CHANNEL_LOCKS is enabled in
	  menuselect, the actual origin of channel locks is obscured by the
	  fact that all channel locks appear to happen in the function
	  ast_channel_lock(). This code change redefines ast_channel_lock
	  to be a macro which maps to __ast_channel_lock(), which then
	  relays the proper file name, line number, and function name
	  information to the core lock functions so that this information
	  will be displayed in the case that there is some sort of locking
	  error or core show locks is issued. ........ ................

2008-05-13 21:19 +0000 [r116020-116040]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /: Merged revisions 116039 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r116039 | russell | 2008-05-13 16:18:55 -0500
	  (Tue, 13 May 2008) | 32 lines Merged revisions 116038 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r116038 | russell | 2008-05-13 16:17:23 -0500 (Tue, 13 May 2008)
	  | 24 lines Fix a deadlock involving channel autoservice and
	  chan_local that was debugged and fixed by mmichelson and me. We
	  observed a system that had a bunch of threads stuck in
	  ast_autoservice_stop(). The reason these threads were waiting
	  around is because this function waits to ensure that the channel
	  list in the autoservice thread gets rebuilt before the stop()
	  function returns. However, the autoservice thread was also
	  locked, so the autoservice channel list was never getting
	  rebuilt. The autoservice thread was stuck waiting for the channel
	  lock on a local channel. However, the local channel was locked by
	  a thread that was stuck in the autoservice stop function. It
	  turned out that the issue came down to the local_queue_frame()
	  function in chan_local. This function assumed that one of the
	  channels passed in as an argument was locked when called.
	  However, that was not always the case. There were multiple cases
	  in which this channel was not locked when the function was
	  called. We fixed up chan_local to indicate to this function
	  whether this channel was locked or not. The previous assumption
	  had caused local_queue_frame() to improperly return with the
	  channel locked, where it would then never get unlocked. (closes
	  issue #12584) (related to issue #12603) ........ ................

	* main/autoservice.c, /: Merged revisions 116001 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r116001 | russell | 2008-05-13 16:07:59 -0500 (Tue, 13 May 2008)
	  | 13 lines Merged revisions 115990 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115990 | russell | 2008-05-13 16:05:57 -0500 (Tue, 13 May 2008)
	  | 5 lines Fix an issue that I noticed in autoservice while
	  mmichelson and I were debugging a different problem. I noticed
	  that it was theoretically possible for two threads to attempt to
	  start the autoservice thread at the same time. This change makes
	  the process of starting the autoservice thread, thread-safe.
	  ........ ................

2008-05-13 20:30 +0000 [r115946]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_alsa.c: Merged revisions 115945 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115945 | file | 2008-05-13 17:29:27 -0300 (Tue,
	  13 May 2008) | 12 lines Merged revisions 115944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115944 | file | 2008-05-13 17:28:23 -0300 (Tue, 13 May 2008) | 4
	  lines Use the right flag to open the audio in non-blocking.
	  (closes issue #12616) Reported by: nicklewisdigiumuser ........
	  ................

2008-05-13 20:19 +0000 [r115940-115942]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 115941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115941 |
	  mattf | 2008-05-13 15:18:04 -0500 (Tue, 13 May 2008) | 1 line
	  Need to clear calling_party_cat variable after we retrieve it
	  ........

	* channels/chan_zap.c, /: Merged revisions 115939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115939 |
	  mattf | 2008-05-13 15:11:20 -0500 (Tue, 13 May 2008) | 1 line Add
	  support for receiving calling party category ........

2008-05-13 18:38 +0000 [r115887]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 115886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115886 | tilghman | 2008-05-13 13:38:11 -0500 (Tue, 13 May 2008)
	  | 11 lines Merged revisions 115884 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115884 | tilghman | 2008-05-13 13:36:13 -0500 (Tue, 13 May 2008)
	  | 3 lines If the socket dies (read returns 0=EOF), return
	  immediately. (Closes issue #12637) ........ ................

2008-05-13 17:48 +0000 [r115848-115851]  Russell Bryant <russell@digium.com>

	* res/res_smdi.c, /: Merged revisions 115847 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115847 |
	  russell | 2008-05-13 12:14:22 -0500 (Tue, 13 May 2008) | 2 lines
	  Initialize the start time in smdi_msg_wait. Somehow this code got
	  lost in trunk. ........

2008-05-12 17:57 +0000 [r115738]  Mark Michelson <mmichelson@digium.com>

	* main/utils.c: Merged revisions 115737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115737 | mmichelson | 2008-05-12 12:55:08 -0500 (Mon, 12 May
	  2008) | 15 lines Merged revisions 115735 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115735 | mmichelson | 2008-05-12 12:51:14 -0500 (Mon, 12 May
	  2008) | 7 lines If a thread holds no locks, do not print any
	  information on the thread when issuing a core show locks command.
	  This will help to de-clutter output somewhat. Russell said it
	  would be fine to place this improvement in the 1.4 branch, so
	  that's why it's going here too. ........ ................

2008-05-12 16:36 +0000 [r115706]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 115705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115705 |
	  qwell | 2008-05-12 11:35:50 -0500 (Mon, 12 May 2008) | 1 line
	  Correctly document state interface for AddQueueMember. Discovered
	  while looking at issue #12626. ........

2008-05-12 15:18 +0000 [r115672]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 115669 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r115669 | bbryant | 2008-05-12 10:17:32 -0500 (Mon, 12 May 2008)
	  | 3 lines A small change to fix iax2 native bridging. ........

2008-05-11 03:27 +0000 [r115599-115601]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Merged revisions
	  115600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115600 |
	  mattf | 2008-05-10 22:23:05 -0500 (Sat, 10 May 2008) | 1 line Add
	  Zap MTP2 support to chan_zap ........

	* channels/chan_zap.c, /: Merged revisions 115598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115598 |
	  mattf | 2008-05-10 21:19:21 -0500 (Sat, 10 May 2008) | 1 line
	  Open up audio channel when we get ACM on SS7 event ........

2008-05-10 14:22 +0000 [r115597]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 115596 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115596 |
	  tilghman | 2008-05-10 09:19:41 -0500 (Sat, 10 May 2008) | 2 lines
	  Ensure that "calldate" is acceptable for a column name. ........

2008-05-09 16:38 +0000 [r115581]  Joshua Colp <jcolp@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 115580 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115580 | file | 2008-05-09 13:36:58 -0300 (Fri, 09 May 2008) |
	  10 lines Merged revisions 115579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115579 | file | 2008-05-09 13:34:08 -0300 (Fri, 09 May 2008) | 2
	  lines Improve res_ninit and res_ndestroy autoconf logic on the
	  Darwin platform. ........ ................

2008-05-08 19:21 +0000 [r115553-115570]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 115569 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115569 | russell | 2008-05-08 14:20:35 -0500
	  (Thu, 08 May 2008) | 10 lines Merged revisions 115568 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115568 | russell | 2008-05-08 14:19:50 -0500 (Thu, 08 May 2008)
	  | 2 lines Remove debug output. ........ ................

	* /, channels/chan_iax2.c: Merged revisions 115566 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115566 | russell | 2008-05-08 14:17:04 -0500
	  (Thu, 08 May 2008) | 41 lines Merged revisions 115565 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r115565 | russell | 2008-05-08 14:15:25 -0500
	  (Thu, 08 May 2008) | 33 lines Merged revisions 115564 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r115564 | russell | 2008-05-08 14:14:04 -0500 (Thu, 08 May 2008)
	  | 25 lines Fix a race condition that bbryant just found while
	  doing some IAX2 testing. He was running Asterisk trunk running
	  IAX2 calls through a few Asterisk boxes, however, the audio was
	  extremely choppy. We looked at a packet trace and saw a storm of
	  INVAL and VNAK frames being sent from one box to another. It
	  turned out that what had happened was that one box tried to send
	  a CONTROL frame before the 3 way handshake had completed. So,
	  that frame did not include the destination call number, because
	  it didn't have it yet. Part of our recent work for security
	  issues included an additional check to ensure that frames that
	  are supposed to include the destination call number have the
	  correct one. This caused the frame to be rejected with an INVAL.
	  The frame would get retransmitted for forever, rejected every
	  time ... This race condition exists in all versions that got the
	  security changes, in theory. However, it is really only likely
	  that this would cause a problem in Asterisk trunk. There was a
	  control frame being sent (SRCUPDATE) at the _very_ beginning of
	  the call, which does not exist in 1.2 or 1.4. However, I am
	  fixing all versions that could potentially be affected by the
	  introduced race condition. These changes are what bbryant and I
	  came up with to fix the issue. Instead of simply dropping control
	  frames that get sent before the handshake is complete, the code
	  attempts to wait a little while, since in most cases, the
	  handshake will complete very quickly. If it doesn't complete
	  after yielding for a little while, then the frame gets dropped.
	  ........ ................ ................

	* /, channels/chan_sip.c: Merged revisions 115562 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115562 | russell | 2008-05-08 11:14:08 -0500 (Thu, 08 May 2008)
	  | 11 lines Merged revisions 115561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115561 | russell | 2008-05-08 11:11:33 -0500 (Thu, 08 May 2008)
	  | 3 lines Don't give up on attempting an outbound registration if
	  we receive a 408 Timeout. (closes issue #12323) ........
	  ................

	* /, contrib/scripts/postgres_cdr.sql (removed): Merged revisions
	  115558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115558 | russell | 2008-05-08 10:38:27 -0500 (Thu, 08 May 2008)
	  | 11 lines Merged revisions 115557 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115557 | russell | 2008-05-08 10:37:49 -0500 (Thu, 08 May 2008)
	  | 3 lines remove postgres_cdr.sql, as the CDR schema is in
	  realtime_pgsql.sql, as well (closes issue #9676) ........
	  ................

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 115555 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115555 | russell | 2008-05-08 10:32:48 -0500
	  (Thu, 08 May 2008) | 11 lines Merged revisions 115554 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115554 | russell | 2008-05-08 10:32:08 -0500 (Thu, 08 May 2008)
	  | 3 lines Don't exit the script if Asterisk is not running.
	  (closes issue #12611) ........ ................

	* main/pbx.c, /: Merged revisions 115552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115552 | russell | 2008-05-08 10:26:49 -0500 (Thu, 08 May 2008)
	  | 12 lines Merged revisions 115551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115551 | russell | 2008-05-08 10:24:54 -0500 (Thu, 08 May 2008)
	  | 4 lines Don't use a channel before checking for channel
	  allocation failure. (closes issue #12609) Reported by: edantie
	  ........ ................

2008-05-08 15:08 +0000 [r115549]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 115548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115548 |
	  mattf | 2008-05-08 10:04:45 -0500 (Thu, 08 May 2008) | 1 line
	  Remove unused code as well as demote an error message to a debug
	  message ........

2008-05-08 14:41 +0000 [r115538-115547]  Russell Bryant <russell@digium.com>

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 115546 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115546 | russell | 2008-05-08 09:41:12 -0500
	  (Thu, 08 May 2008) | 12 lines Merged revisions 115545 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115545 | russell | 2008-05-08 09:40:53 -0500 (Thu, 08 May 2008)
	  | 4 lines Use the same method for executing Asterisk as the rest
	  of the script. (closes issue #12611) Reported by: b_plessis
	  ........ ................

2008-05-07 18:35 +0000 [r115514-115524]  Russell Bryant <russell@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 115523 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r115523 | russell | 2008-05-07 13:33:50 -0500 (Wed, 07 May 2008)
	  | 6 lines Only save a password if a username exists. (closes
	  issue #12600) Reported By: suretec Patch by me ........

	* /, res/res_config_ldap.c: Merged revisions 115521 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r115521 | russell | 2008-05-07 13:30:12 -0500 (Wed, 07 May 2008)
	  | 7 lines Use the default that the log output claims will be used
	  for the basedn (closes issue #12599) Reported by: suretec
	  Patches: 12599.patch uploaded by juggie (license 24) ........

	* /, channels/chan_h323.c: Merged revisions 115519 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r115519 | russell | 2008-05-07 13:24:51 -0500 (Wed, 07 May 2008)
	  | 2 lines Let chan_h323 build in dev mode ........

	* /, include/asterisk/dlinkedlists.h (removed),
	  channels/chan_iax2.c: Merged revisions 115513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115513 | russell | 2008-05-07 12:28:19 -0500 (Wed, 07 May 2008)
	  | 19 lines Merged revisions 115512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r115512 | russell | 2008-05-07 11:24:09 -0500
	  (Wed, 07 May 2008) | 11 lines Merged revisions 115511 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r115511 | russell | 2008-05-07 11:22:49 -0500 (Wed, 07 May 2008)
	  | 3 lines Remove remnants of dlinkedlists. I didn't actually use
	  them in the final version of my IAX2 improvements. ........
	  ................ ................

2008-05-07 13:49 +0000 [r115510]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/asterisk.ldap-schema,
	  contrib/scripts/asterisk.ldif, /: Merged revisions 115509 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r115509 | tilghman | 2008-05-07 08:49:15 -0500 (Wed, 07
	  May 2008) | 2 lines Update typos in description fields (closes
	  issue #12598) Reported by: suretec Patches:
	  asterisk_schema_changes.patch uploaded by suretec (license 70)
	  ........

2008-05-06 19:56 +0000 [r115420-115424]  Jason Parker <jparker@digium.com>

	* /, contrib/scripts/get_ilbc_source.sh: Merged revisions 115423
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115423 | qwell | 2008-05-06 14:55:45 -0500
	  (Tue, 06 May 2008) | 23 lines Merged revisions 115422 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r115422 | qwell | 2008-05-06 14:55:29 -0500
	  (Tue, 06 May 2008) | 15 lines Merged revisions 115421 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r115421 | qwell | 2008-05-06 14:54:57 -0500 (Tue, 06 May 2008) |
	  7 lines read requires an argument on some non-bash shells (closes
	  issue #12593) Reported by: bkruse Patches:
	  getilbc.sh_12593_v1.diff uploaded by bkruse (license 132)
	  ........ ................ ................

	* /, res/res_musiconhold.c: Merged revisions 115419 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115419 | qwell | 2008-05-06 14:38:44 -0500
	  (Tue, 06 May 2008) | 15 lines Merged revisions 115418 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115418 | qwell | 2008-05-06 14:34:58 -0500 (Tue, 06 May 2008) |
	  7 lines Switch to using ast_random() rather than just rand().
	  This does not fix the bug reported, but I believe it is correct.
	  (from issue #12446) Patches: bug_12446.diff uploaded by snuffy
	  (license 35) ........ ................

2008-05-06 19:33 +0000 [r115417]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /: Merged revisions 115416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115416 | tilghman | 2008-05-06 14:32:29 -0500 (Tue, 06 May 2008)
	  | 10 lines Merged revisions 115415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115415 | tilghman | 2008-05-06 14:31:39 -0500 (Tue, 06 May 2008)
	  | 2 lines Don't print the terminating NUL. (Closes issue #12589)
	  ........ ................

2008-05-06 13:57 +0000 [r115343]  Joshua Colp <jcolp@digium.com>

	* /, configure, configure.ac: Merged revisions 115342 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115342 | file | 2008-05-06 10:55:44 -0300 (Tue,
	  06 May 2008) | 10 lines Merged revisions 115341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115341 | file | 2008-05-06 10:54:15 -0300 (Tue, 06 May 2008) | 2
	  lines Add in missing argument. ........ ................

2008-05-05 23:01 +0000 [r115335]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c, /, main/logger.c: Merged revisions 115334 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115334 | tilghman | 2008-05-05 18:00:31 -0500
	  (Mon, 05 May 2008) | 15 lines Merged revisions 115333 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115333 | tilghman | 2008-05-05 17:50:31 -0500 (Mon, 05 May 2008)
	  | 7 lines Separate verbose output from CLI output, by using a
	  preamble. (closes issue #12402) Reported by: Corydon76 Patches:
	  20080410__no_verbose_in_rx_output.diff.txt uploaded by Corydon76
	  (license 14) 20080501__no_verbose_in_rx_output__1.4.diff.txt
	  uploaded by Corydon76 (license 14) ........ ................

2008-05-05 22:17 +0000 [r115331]  Joshua Colp <jcolp@digium.com>

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, codecs/codec_speex.c,
	  configure.ac: Merged revisions 115328 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115328 | file | 2008-05-05 19:13:57 -0300 (Mon, 05 May 2008) |
	  10 lines Merged revisions 115327 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115327 | file | 2008-05-05 19:10:05 -0300 (Mon, 05 May 2008) | 2
	  lines Make sure that either the main speex library contains
	  preprocess functions or that speexdsp does. If both fail then
	  speex stuff can not be built. ........ ................

2008-05-05 22:14 +0000 [r115330]  Mark Michelson <mmichelson@digium.com>

	* main/config.c, /: Merged revisions 115329 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115329 |
	  mmichelson | 2008-05-05 17:14:06 -0500 (Mon, 05 May 2008) | 15
	  lines #execing the same file multiple times led to warning
	  messages saying that the same file was being #included twice.
	  This was due to the fact that #exec created a temporary file
	  which was then #included. The name of the temporary file was the
	  name of the #exec'd file, with the Unix timestamp and thread ID
	  concatenated. The issue was that if multiple #exec statements of
	  the same file were reached in the same second, then the result
	  was that the temporary files would have duplicate names. To
	  resolve this, the temporary file now has microsecond resolution
	  for the timestamp portion. (closes issue #12574) Reported by:
	  jmls Patches: 12574.patch uploaded by putnopvut (license 60)
	  Tested by: jmls, putnopvut ........

2008-05-05 21:44 +0000 [r115322]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 115321 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115321 | mmichelson | 2008-05-05 16:43:21 -0500 (Mon, 05 May
	  2008) | 21 lines Merged revisions 115320 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115320 | mmichelson | 2008-05-05 16:41:34 -0500 (Mon, 05 May
	  2008) | 13 lines Don't consider a caller "handled" until the
	  caller is bridged with a queue member. There was too much of an
	  opportunity for the member to hang up (either during a delay,
	  announcement, or overly long agi) between the time that he
	  answered the phone and the time when he actually was bridged with
	  the caller. The consequence of this was that if the member hung
	  up in that interval, then proper abandonment details would not be
	  noted in the queue log if the caller were to hang up at any point
	  after the member hangup. (closes issue #12561) Reported by:
	  ablackthorn ........ ................

2008-05-05 20:28 +0000 [r115316]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 115315 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r115315 | russell | 2008-05-05 15:28:17 -0500 (Mon, 05 May 2008)
	  | 2 lines Remove my rant, since I have now replaced the rant with
	  code. ........

2008-05-05 19:58 +0000 [r115310]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/res_odbc.h, /: Merged revisions 115309 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115309 | tilghman | 2008-05-05 14:57:28 -0500
	  (Mon, 05 May 2008) | 10 lines Merged revisions 115308 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115308 | tilghman | 2008-05-05 14:55:55 -0500 (Mon, 05 May 2008)
	  | 2 lines Err, the documentation on the return value of
	  ast_odbc_backslash_is_escape is exactly backwards. ........
	  ................

2008-05-05 19:50 +0000 [r115306]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 115305 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115305 | russell | 2008-05-05 14:50:24 -0500 (Mon, 05 May 2008)
	  | 13 lines Merged revisions 115304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115304 | russell | 2008-05-05 14:49:25 -0500 (Mon, 05 May 2008)
	  | 5 lines Avoid putting opaque="" in Digest authentication. This
	  patch came from switchvox. It fixes authentication with Primus in
	  Canada, and has been in use for a very long time without causing
	  problems with any other providers. (closes issue AST-36) ........
	  ................

2008-05-05 19:43 +0000 [r115303]  Tilghman Lesher <tlesher@digium.com>

	* /, UPGRADE.txt: Merged revisions 115302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115302 |
	  tilghman | 2008-05-05 14:42:36 -0500 (Mon, 05 May 2008) | 2 lines
	  Note change for ExecIf syntax (caught by jmls on IRC) ........

2008-05-05 10:55 +0000 [r115289]  Kevin P. Fleming <kpfleming@digium.com>

	* /, UPGRADE.txt: Merged revisions 115288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r115288 |
	  kpfleming | 2008-05-05 05:55:09 -0500 (Mon, 05 May 2008) | 2
	  lines clarify wording ........

2008-05-05 03:26 +0000 [r115287]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/safe_asterisk, contrib/init.d/rc.suse.asterisk,
	  contrib/init.d/rc.debian.asterisk,
	  contrib/init.d/rc.mandrake.asterisk, /,
	  contrib/init.d/rc.redhat.asterisk,
	  contrib/init.d/rc.gentoo.asterisk,
	  contrib/init.d/rc.slackware.asterisk: Merged revisions 115286 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115286 | tilghman | 2008-05-04 22:25:35 -0500
	  (Sun, 04 May 2008) | 15 lines Merged revisions 115285 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115285 | tilghman | 2008-05-04 22:22:25 -0500 (Sun, 04 May 2008)
	  | 7 lines When starting Asterisk, bug out if Asterisk is already
	  running. (closes issue #12525) Reported by: explidous Patches:
	  20080428__bug12525.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: mvanbaak ........ ................

2008-05-04 02:12 +0000 [r115278-115284]  Joshua Colp <jcolp@digium.com>

	* /, configure, acinclude.m4: Merged revisions 115283 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115283 | file | 2008-05-03 23:11:01 -0300 (Sat,
	  03 May 2008) | 10 lines Merged revisions 115282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115282 | file | 2008-05-03 23:09:44 -0300 (Sat, 03 May 2008) | 2
	  lines Expand the test function for GCC attributes so that more
	  complex attributes are properly recognized. ........
	  ................

	* /, include/asterisk/compiler.h: Merged revisions 115280 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115280 | file | 2008-05-03 22:52:00 -0300 (Sat,
	  03 May 2008) | 10 lines Merged revisions 115279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115279 | file | 2008-05-03 22:50:59 -0300 (Sat, 03 May 2008) | 2
	  lines For my next trick I will make these work with what our
	  autoconf header file gives us. ........ ................

	* /, configure, acinclude.m4: Merged revisions 115277 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115277 | file | 2008-05-03 22:45:21 -0300 (Sat,
	  03 May 2008) | 10 lines Merged revisions 115276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115276 | file | 2008-05-03 22:43:26 -0300 (Sat, 03 May 2008) | 2
	  lines Treat warnings as errors when checking if a GCC attribute
	  exists. We have to do this as GCC will just ignore the attribute
	  and pop up a warning, it won't actually fail to compile. ........
	  ................

2008-05-03 04:25 +0000 [r115269-115275]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /: block voicemail mwi notification subscriptions taskprocessor

	* /: block pbx taskprocessor

	* /: block app_queue taskprocessor

	* /: blocked taskprocessors

2008-05-02 14:55 +0000 [r115198-115200]  Mark Michelson <mmichelson@digium.com>

	* /, include/asterisk/sched.h: Merged revisions 115197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115197 | mmichelson | 2008-05-02 09:28:55 -0500
	  (Fri, 02 May 2008) | 14 lines Merged revisions 115196 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115196 | mmichelson | 2008-05-02 09:28:19 -0500 (Fri, 02 May
	  2008) | 6 lines Clarify a comment that was, well, just wrong. It
	  turns out that ignoring the way that macros expand. Instead, I
	  have clarified in the comment why the macro will work even if the
	  scheduler id for the task to be deleted changes during the
	  execution of the macro. ........ ................

2008-05-02 02:57 +0000 [r115107-115160]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/res_odbc.h, /: Merged revisions 115104 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r115104 | tilghman | 2008-05-01 18:21:13 -0500
	  (Thu, 01 May 2008) | 10 lines Merged revisions 115102 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115102 | tilghman | 2008-05-01 18:20:25 -0500 (Thu, 01 May 2008)
	  | 2 lines Change the comment of deprecated to an actual compiler
	  deprecation ........ ................

2008-05-01 19:01 +0000 [r115020]  Tilghman Lesher <tlesher@digium.com>

	* /, main/utils.c: Merged revisions 115018 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r115018 | tilghman | 2008-05-01 14:00:18 -0500 (Thu, 01 May 2008)
	  | 14 lines Merged revisions 115017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r115017 | tilghman | 2008-05-01 13:59:08 -0500 (Thu, 01 May 2008)
	  | 6 lines '#' is another reserved character for URIs that also
	  needs to be escaped. (closes issue #10543) Reported by: blitzrage
	  Patches: 20080418__bug10543.diff.txt uploaded by Corydon76
	  (license 14) ........ ................

2008-05-01 17:28 +0000 [r114932]  Russell Bryant <russell@digium.com>

	* /, UPGRADE.txt: Merged revisions 114931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114931 |
	  russell | 2008-05-01 12:28:25 -0500 (Thu, 01 May 2008) | 4 lines
	  Clarify the deprecation notice about Macro() to note that it will
	  not be removed for the sake of backwards compatibility, since it
	  is a non-trivial task to convert existing large dialplans that
	  depend on Macro() to use GoSub(), instead. ........

2008-05-01 16:52 +0000 [r114923]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 114922 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114922 |
	  qwell | 2008-05-01 11:49:24 -0500 (Thu, 01 May 2008) | 10 lines
	  Allow dringXrange to properly default to 10, as was done in 1.4.
	  dringXrange is a new feature that was added, and it attempted to
	  default, but only when the option was specified. (closes issue
	  #12536) Reported by: bjm Patches: 12536-dringXrange.diff uploaded
	  by qwell (license 4) Tested by: bjm ........



2008-04-30 20:20 +0000 [r114909]  Russell Bryant <russell@digium.com>

	* include/asterisk/dlinkedlists.h (added): Add the dlinkedlists
	  implementation from trunk

2008-04-30 20:17 +0000 [r114907-114908]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Make 1.6.0 compile

2008-04-30 17:06 +0000 [r114900]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 114899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114899 | oej | 2008-04-30 18:55:49 +0200 (Ons, 30 Apr 2008) | 15
	  lines Merged revisions 114890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114890 | oej | 2008-04-30 18:23:17 +0200 (Ons, 30 Apr 2008) | 7
	  lines Don't crash on bad SIP replys. Fix created in Huntsville
	  together with Mark M (putnopvut) (closes issue #12363) Reported
	  by: jvandal Tested by: putnopvut, oej ........ ................

2008-04-30 16:41 +0000 [r114893]  Russell Bryant <russell@digium.com>

	* /, channels/chan_console.c, channels/chan_iax2.c: Merged
	  revisions 114892 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114892 | russell | 2008-04-30 11:34:24 -0500 (Wed, 30 Apr 2008)
	  | 36 lines Merged revisions 114891 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114891 | russell | 2008-04-30 11:30:01 -0500 (Wed, 30 Apr 2008)
	  | 28 lines Merge changes from team/russell/iax2_find_callno and
	  iax2_find_callno_1.4 These changes address a critical performance
	  issue introduced in the latest release. The fix for the latest
	  security issue included a change that made Asterisk randomly
	  choose call numbers to make them more difficult to guess by
	  attackers. However, due to some inefficient (this is by far, an
	  understatement) code, when Asterisk chose high call numbers,
	  chan_iax2 became unusable after just a small number of calls. On
	  a small embedded platform, it would not be able to handle a
	  single call. On my Intel Core 2 Duo @ 2.33 GHz, I couldn't run
	  more than about 16 IAX2 channels. Ouch. These changes address
	  some performance issues of the find_callno() function that have
	  bothered me for a very long time. On every incoming media frame,
	  it iterated through every possible call number trying to find a
	  matching active call. This involved a mutex lock and unlock for
	  each call number checked. So, if the random call number chosen
	  was 20000, then every media frame would cause 20000 locks and
	  unlocks. Previously, this problem was not as obvious since
	  Asterisk always chose the lowest call number it could. A second
	  container for IAX2 pvt structs has been added. It is an astobj2
	  hash table. When we know the remote side's call number, the pvt
	  goes into the hash table with a hash value of the remote side's
	  call number. Then, lookups for incoming media frames are a very
	  fast hash lookup instead of an absolutely insane array traversal.
	  In a quick test, I was able to get more than 3600% more IAX2
	  channels on my machine with these changes. ........
	  ................

2008-04-30 16:15 +0000 [r114889]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_console.c: Merged revisions 114888 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114888 | jpeeler | 2008-04-30 11:14:43 -0500 (Wed, 30 Apr 2008)
	  | 3 lines Fixes a bug where if a stream monitor thread was not
	  created (caused from failure of opening or starting the stream)
	  pthread_cancel was called with an invalid thread ID. ........

2008-04-30 14:55 +0000 [r114877-114886]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/iax2.h, channels/chan_iax2.c: Merged revisions 114884
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114884 | kpfleming | 2008-04-30 09:49:51 -0500
	  (Wed, 30 Apr 2008) | 10 lines Merged revisions 114880 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114880 | kpfleming | 2008-04-30 09:46:57 -0500 (Wed, 30 Apr
	  2008) | 2 lines use the ARRAY_LEN macro for indexing through the
	  iaxs/iaxsl arrays so that the size of the arrays can be adjusted
	  in one place, and change the size of the arrays from 32768 calls
	  to 2048 calls when LOW_MEMORY is defined ........
	  ................

	* /, Makefile.rules: Merged revisions 114876 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114876 | kpfleming | 2008-04-30 07:15:43 -0500 (Wed, 30 Apr
	  2008) | 10 lines Merged revisions 114875 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114875 | kpfleming | 2008-04-30 07:14:07 -0500 (Wed, 30 Apr
	  2008) | 2 lines pay attention to *all* header files for
	  dependency tracking, not just the local ones (inspired by r578 of
	  asterisk-addons by tilghman) ........ ................

2008-04-29 22:55 +0000 [r114867]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/iax2-provision.c: Merged revisions 114866 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r114866 | jpeeler | 2008-04-29 17:54:14 -0500 (Tue, 29
	  Apr 2008) | 2 lines Fixes a problem where all the templates were
	  marked as dead no matter what. The templates should only be
	  marked as dead if a configuration file has been successfully
	  loaded and has changes. Bug found while making API documentation
	  for 1.6.0. ........

2008-04-29 21:09 +0000 [r114850-114858]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 114849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114849 | mmichelson | 2008-04-29 14:42:04 -0500 (Tue, 29 Apr
	  2008) | 22 lines Merged revisions 114848 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114848 | mmichelson | 2008-04-29 14:40:06 -0500 (Tue, 29 Apr
	  2008) | 14 lines Use the MACRO_CONTEXT and MACRO_EXTEN channel
	  variables instead of the channel's macrocontext and macroexten
	  fields. This is needed because if macros are daisy-chained, the
	  incorrect context and extension are placed on the new channel. I
	  also added locking to the channel prior to accessing these
	  variables as noted in trunk's janitor project file. (closes issue
	  #12549) Reported by: darren1713 Patches:
	  app_queue.c.macroextenpatch uploaded by darren1713 (license 116)
	  (with modifications from me) Tested by: putnopvut ........
	  ................

2008-04-29 19:04 +0000 [r114846]  Kevin P. Fleming <kpfleming@digium.com>

	* /: bug is not present in this branch

2008-04-29 17:11 +0000 [r114831]  Jason Parker <jparker@digium.com>

	* res/res_config_pgsql.c, /: Merged revisions 114830 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114830 | qwell | 2008-04-29 12:10:55 -0500
	  (Tue, 29 Apr 2008) | 9 lines Merged revisions 114829 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r114829 | qwell | 2008-04-29 12:08:55 -0500 (Tue, 29 Apr
	  2008) | 1 line Change warning message to debug, since there are
	  cases where 0 results is perfectly fine. ........
	  ................

2008-04-29 12:55 +0000 [r114825]  Kevin P. Fleming <kpfleming@digium.com>

	* /, contrib/scripts/get_ilbc_source.sh: Merged revisions 114824
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114824 | kpfleming | 2008-04-29 07:54:31 -0500
	  (Tue, 29 Apr 2008) | 18 lines Merged revisions 114823 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r114823 | kpfleming | 2008-04-29 07:53:12 -0500
	  (Tue, 29 Apr 2008) | 10 lines Merged revisions 114822 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r114822 | kpfleming | 2008-04-29 07:52:32 -0500 (Tue, 29 Apr
	  2008) | 2 lines stop script from appending source code if run
	  multiple times ........ ................ ................

2008-04-28 17:04 +0000 [r114777]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 114776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114776 |
	  mattf | 2008-04-28 12:00:38 -0500 (Mon, 28 Apr 2008) | 1 line Fix
	  deadlock issue in chan_zap with libss7 due to channel variables
	  being set with the channel pvt lock being held. #12512 ........

2008-04-28 13:44 +0000 [r114714]  Joshua Colp <jcolp@digium.com>

	* /, configure, configure.ac: Merged revisions 114713 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114713 | file | 2008-04-28 10:42:13 -0300 (Mon, 28 Apr 2008) | 2
	  lines Update autoconf logic with latest API change for libss7.
	  ........

2008-04-28 04:54 +0000 [r114707-114710]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 114709 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114709 | tilghman | 2008-04-27 23:53:20 -0500 (Sun, 27 Apr 2008)
	  | 13 lines Merged revisions 114708 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114708 | tilghman | 2008-04-27 23:47:39 -0500 (Sun, 27 Apr 2008)
	  | 5 lines When modules are embedded, they take on a different
	  name, without the ".so" extension. Specifically check for this
	  name, when we're checking if a module is loaded. (Closes issue
	  #12534) ........ ................

2008-04-27 15:20 +0000 [r114701]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_skinny.c: Merged revisions 114700 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk Merged to 1.6
	  because it fixes a crash. ........ r114700 | mvanbaak |
	  2008-04-27 17:17:18 +0200 (Sun, 27 Apr 2008) | 8 lines Make MWI
	  in chan_skinny event based modeled after chan_zap and chan_mgcp.
	  (closes issue #12214) Reported by: DEA Patches:
	  chan_skinny-vm-events-v3.txt uploaded by DEA (license 3) Tested
	  by: DEA and me ........

2008-04-27 01:30 +0000 [r114697]  Sean Bright <sean.bright@gmail.com>

	* /, configure, configure.ac: Merged revisions 114696 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114696 | seanbright | 2008-04-26 21:28:32 -0400
	  (Sat, 26 Apr 2008) | 13 lines Merged revisions 114695 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114695 | seanbright | 2008-04-26 21:26:15 -0400 (Sat, 26 Apr
	  2008) | 5 lines When we don't explicitly pass a path to the
	  --with-tds configure option, we may end up finding tds.h in
	  /usr/local/include instead of /usr/include. If this happens, the
	  grep that looks for the version (from tdsver.h) will fail and
	  we'll have some problems during the build. ........
	  ................

2008-04-26 15:09 +0000 [r114684-114693]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/vmail.cgi: Merged revisions 114690 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114690 | tilghman | 2008-04-26 08:17:19 -0500
	  (Sat, 26 Apr 2008) | 14 lines Merged revisions 114689 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114689 | tilghman | 2008-04-26 08:15:21 -0500 (Sat, 26 Apr 2008)
	  | 6 lines Clicking forward without selecting a message leaves an
	  errant .lock file. (closes issue #12528) Reported by: pukepail
	  Patches: patch.diff uploaded by pukepail (license 431) ........
	  ................

2008-04-25 22:05 +0000 [r114671-114677]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_lua.c: Merged revisions 114676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114676 |
	  russell | 2008-04-25 17:04:46 -0500 (Fri, 25 Apr 2008) | 7 lines
	  Lock the channel around datastore access (closes issue #12527)
	  Reported by: mnicholson Patches: pbx_lua4.diff uploaded by
	  mnicholson (license 96) ........

	* /, channels/chan_iax2.c: Merged revisions 114674 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114674 | russell | 2008-04-25 17:00:35 -0500
	  (Fri, 25 Apr 2008) | 11 lines Merged revisions 114673 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114673 | russell | 2008-04-25 16:54:40 -0500 (Fri, 25 Apr 2008)
	  | 3 lines Use consistent logic for checking to see if a call
	  number has been chosen yet. Also, remove some redundant logic I
	  recently added in a fix. ........ ................

2008-04-25 19:34 +0000 [r114664]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 114663 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114663 | mmichelson | 2008-04-25 14:33:27 -0500 (Fri, 25 Apr
	  2008) | 12 lines Merged revisions 114662 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114662 | mmichelson | 2008-04-25 14:32:02 -0500 (Fri, 25 Apr
	  2008) | 4 lines Move the unlock of the spyee channel to outside
	  the start_spying() function so that the channel is not unlocked
	  twice when using whisper mode. ........ ................

2008-04-25 16:26 +0000 [r114652]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 114651 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114651 | mmichelson | 2008-04-25 11:25:17 -0500 (Fri, 25 Apr
	  2008) | 4 lines Fix a memory leak and protect against potential
	  dereferences of a NULL pointer. ........

2008-04-24 22:14 +0000 [r114636]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114635 |
	  file | 2008-04-24 19:11:46 -0300 (Thu, 24 Apr 2008) | 4 lines Hey
	  look, it builds. (closes issue #12519) Reported by: falves11
	  ........

2008-04-24 21:36 +0000 [r114626-114634]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114633 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114633 | mmichelson | 2008-04-24 16:35:39 -0500 (Thu, 24 Apr
	  2008) | 19 lines Merged revisions 114632 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114632 | mmichelson | 2008-04-24 16:35:08 -0500 (Thu, 24 Apr
	  2008) | 11 lines Re-invite RTP during a masquerade so that, for
	  instance, an AMI redirect of two channels which are natively
	  bridged will preserve audio on both channels. This prevents a
	  problem with Asterisk not re-inviting due to one of the channels
	  having being a zombie. (closes issue #12513) Reported by:
	  mneuhauser Patches:
	  asterisk-1.4-114602_restore-RTP-on-fixup.patch uploaded by
	  mneuhauser (license 425) ........ ................

	* /, apps/app_queue.c: Merged revisions 114629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114629 | mmichelson | 2008-04-24 15:43:52 -0500 (Thu, 24 Apr
	  2008) | 16 lines Merged revisions 114628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114628 | mmichelson | 2008-04-24 15:43:03 -0500 (Thu, 24 Apr
	  2008) | 8 lines Output of channel variables when
	  eventwhencalled=vars was set was being truncated two characters.
	  This patch corrects the problem. (closes issue #12493) Reported
	  by: davidw ........ ................

	* channels/chan_local.c, /: Merged revisions 114625 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114625 | mmichelson | 2008-04-24 15:06:06 -0500
	  (Thu, 24 Apr 2008) | 18 lines Merged revisions 114624 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114624 | mmichelson | 2008-04-24 15:04:24 -0500 (Thu, 24 Apr
	  2008) | 10 lines Resolve a deadlock in chan_local by releasing
	  the channel lock temporarily. (closes issue #11712) Reported by:
	  callguy Patches: 11712.patch uploaded by putnopvut (license 60)
	  Tested by: acunningham ........ ................

2008-04-24 19:55 +0000 [r114619-114623]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_local.c, /: Merged revisions 114622 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114622 | tilghman | 2008-04-24 14:54:57 -0500
	  (Thu, 24 Apr 2008) | 12 lines Merged revisions 114621 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114621 | tilghman | 2008-04-24 14:53:36 -0500 (Thu, 24 Apr 2008)
	  | 4 lines Ensure that when we set the accountcode, it actually
	  shows up in the CDR. (Fix for AMI Originate) (Closes issue
	  #12007) ........ ................

	* /, apps/app_meetme.c: Merged revisions 114617 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114617 |
	  tilghman | 2008-04-24 14:24:31 -0500 (Thu, 24 Apr 2008) | 6 lines
	  Fix DST calculation, and fix bug in calculation of whether conf
	  has started yet or not (Closes issue #12292) Reported by: DEA
	  Patches: app_meetme-rt-dst-sched-fix.txt uploaded by DEA (license
	  3) ........

2008-04-24 16:48 +0000 [r114613]  Jason Parker <jparker@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 114612 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114612 | qwell | 2008-04-24 11:47:01 -0500
	  (Thu, 24 Apr 2008) | 17 lines Merged revisions 51989 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #12496) Reported by: daniele Patches:
	  misdn-moh-1.6.0-beta7.1.patch uploaded by daniele (license 471)
	  Tested by: daniele Technically, I didn't use the patch above
	  except to find out what revision to merge - but it's the same
	  thing as this revision. ........ r51989 | crichter | 2007-01-24
	  06:57:22 -0600 (Wed, 24 Jan 2007) | 1 line added fix from #8899
	  ........ ................

2008-04-24 15:57 +0000 [r114610]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 114609 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114609 | russell | 2008-04-24 10:56:55 -0500
	  (Thu, 24 Apr 2008) | 12 lines Merged revisions 114608 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114608 | russell | 2008-04-24 10:55:21 -0500 (Thu, 24 Apr 2008)
	  | 4 lines Fix a silly mistake in a change I made yesterday that
	  caused chan_iax2 to blow up very quickly. (issue #12515) ........
	  ................

2008-04-24 15:00 +0000 [r114607]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Merged revisions 114606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114606 | oej | 2008-04-24 16:59:05 +0200 (Tor, 24 Apr 2008) | 11
	  lines Merged revisions 114603 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114603 | oej | 2008-04-24 16:55:18 +0200 (Tor, 24 Apr 2008) | 3
	  lines Only have one max-forwards header in outbound REFERs.
	  Discovered in the Asterisk SIP Masterclass in Orlando. Thanks
	  Joe! ........ ................

2008-04-24 14:56 +0000 [r114599-114605]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114604 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114604 |
	  russell | 2008-04-24 09:55:21 -0500 (Thu, 24 Apr 2008) | 3 lines
	  Change a verbose message to debug. (closes issue #12514) ........

	* /, main/http.c: Merged revisions 114601 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114601 | russell | 2008-04-23 17:53:20 -0500 (Wed, 23 Apr 2008)
	  | 14 lines Merged revisions 114600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114600 | russell | 2008-04-23 17:18:12 -0500 (Wed, 23 Apr 2008)
	  | 6 lines Improve some broken cookie parsing code. Previously,
	  manager login over HTTP would only work if the mansession_id
	  cookie was first. Now, the code builds a list of all of the
	  cookies in the Cookie header. This fixes a problem observed by
	  users of the Asterisk GUI. (closes AST-20) ........
	  ................

	* apps/app_chanspy.c, /: Merged revisions 114598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114598 | russell | 2008-04-23 15:53:05 -0500 (Wed, 23 Apr 2008)
	  | 18 lines Merged revisions 114597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114597 | russell | 2008-04-23 15:49:18 -0500 (Wed, 23 Apr 2008)
	  | 10 lines Fix an issue that caused getting the correct next
	  channel to not always work. Also, remove setting the amount of
	  time to wait for a digit from 5 seconds back down to 1/10 of a
	  second. I believe this was so the beep didn't get played over and
	  over really fast, but a while back I put in another fix for that
	  issue. (closes issue #12498) Reported by: jsmith Patches:
	  app_chanspy_channel_walk.trunk.patch uploaded by jsmith (license
	  15) ........ ................

2008-04-23 18:34 +0000 [r114596]  Jason Parker <jparker@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 114595 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114595 | qwell | 2008-04-23 13:33:28 -0500
	  (Wed, 23 Apr 2008) | 16 lines Merged revisions 114594 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114594 | qwell | 2008-04-23 13:28:44 -0500 (Wed, 23 Apr 2008) |
	  8 lines Fix reload/unload for res_musiconhold module. (closes
	  issue #11575) Reported by: sunder Patches: M11575_14_rev3.diff
	  uploaded by junky (license 177) bug11575_trunk.diff.txt uploaded
	  by jamesgolovich (license 176) ........ ................

2008-04-23 18:01 +0000 [r114589-114593]  Russell Bryant <russell@digium.com>

	* main/manager.c, /, include/asterisk/manager.h: Merged revisions
	  114592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114592 | russell | 2008-04-23 13:01:00 -0500 (Wed, 23 Apr 2008)
	  | 13 lines Merged revisions 114591 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114591 | russell | 2008-04-23 12:55:31 -0500 (Wed, 23 Apr 2008)
	  | 5 lines Store the manager session ID explicitly as 4 byte ID
	  instead of a ulong. The mansession_id cookie is coded to be
	  limited to 8 characters of hex, and this could break logins from
	  64-bit machines in some cases. (inspired by AST-20) ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 114588 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114588 | russell | 2008-04-23 12:18:29 -0500
	  (Wed, 23 Apr 2008) | 10 lines Merged revisions 114587 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114587 | russell | 2008-04-23 12:16:32 -0500 (Wed, 23 Apr 2008)
	  | 2 lines Fix find_callno_locked() to actually return the callno
	  locked in some more cases. ........ ................

2008-04-23 16:57 +0000 [r114586]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Merged revisions 114585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114585 | oej | 2008-04-23 18:53:34 +0200 (Ons, 23 Apr 2008) | 10
	  lines Merged revisions 114584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114584 | oej | 2008-04-23 18:51:41 +0200 (Ons, 23 Apr 2008) | 2
	  lines Add 502 support for both directions, not only one... (see
	  r114571) ........ ................

2008-04-23 14:56 +0000 [r114581]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, /: Merged revisions 114580 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114580 | file | 2008-04-23 11:55:03 -0300 (Wed, 23 Apr 2008) |
	  12 lines Merged revisions 114579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114579 | file | 2008-04-23 11:54:11 -0300 (Wed, 23 Apr 2008) | 4
	  lines Instead of stopping dialplan execution when SayNumber
	  attempts to say a large number that it can not print out a
	  message informing the user and continue on. (closes issue #12502)
	  Reported by: bcnit ........ ................

2008-04-23 01:00 +0000 [r114576-114578]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 114575 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114575 | mmichelson | 2008-04-22 19:40:30 -0500 (Tue, 22 Apr
	  2008) | 10 lines Round 1 of IMAP_STORAGE-related app_voicemail
	  changes This makes IMAP_STORAGE include the proper headers if you
	  have specified the "system" option for --with-imap when running
	  the configure script and your IMAP-related headers exist in
	  /usr/include/c-client. This change is due to a hasty merge of a
	  1.4 change I made. ........

2008-04-22 23:59 +0000 [r114573]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114572 | tilghman | 2008-04-22 18:58:19 -0500 (Tue, 22 Apr 2008)
	  | 10 lines Merged revisions 114571 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114571 | tilghman | 2008-04-22 18:51:44 -0500 (Tue, 22 Apr 2008)
	  | 2 lines Treat a 502 just like a 503, when it comes to
	  processing a response code ........ ................

2008-04-22  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta8 released.

2008-04-22 22:18 +0000 [r114560]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 114559 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114559 | russell | 2008-04-22 17:17:31 -0500
	  (Tue, 22 Apr 2008) | 13 lines Merged revisions 114558 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114558 | russell | 2008-04-22 17:15:36 -0500 (Tue, 22 Apr 2008)
	  | 5 lines When we receive a full frame that is supposed to
	  contain our call number, ensure that it has the correct one.
	  (closes issue #10078) (AST-2008-006) ........ ................

2008-04-22 22:04 +0000 [r114556]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 114553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114553 |
	  murf | 2008-04-22 15:57:57 -0600 (Tue, 22 Apr 2008) | 14 lines
	  (closes issue #12469) Reported by: triccyx I had a bit a problem
	  reproducing this in my setup (trying not to disturb my other
	  stuff) but finally, I got it. The problem appears to be that the
	  extension is being added in replace mode, which kinda assumes
	  that the pattern trie has been formed, when in fact, in this
	  case, it was not. The checks being done are not nec. when the
	  tree is not yet formed, as changes like this will be summarized
	  when the trie is formed in the future. I tested the fix, and the
	  crash no longer happens. Feel free to open the bug again if this
	  fix doesn't cure the problem. ........

2008-04-22 21:16 +0000 [r114544-114552]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 114548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114548 |
	  russell | 2008-04-22 15:25:56 -0500 (Tue, 22 Apr 2008) | 2 lines
	  re-add a fix that got lost with a recent change ........

2008-04-22 18:14 +0000 [r114541]  Jason Parker <jparker@digium.com>

	* main/pbx.c, /, include/asterisk/pbx.h, apps/app_queue.c: Merged
	  revisions 114540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114540 |
	  qwell | 2008-04-22 13:14:09 -0500 (Tue, 22 Apr 2008) | 8 lines
	  Allow setqueuevar=yes (et al) to work, after changes to
	  pbx_builtin_setvar() (closes issue #12490) Reported by: bcnit
	  Patches: 12490-queuevars-3.diff uploaded by qwell (license 4)
	  Tested by: qwell ........

2008-04-22 18:06 +0000 [r114534-114539]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 114538 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114538 | russell | 2008-04-22 13:04:39 -0500
	  (Tue, 22 Apr 2008) | 17 lines Merged revisions 114537 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114537 | russell | 2008-04-22 13:03:33 -0500 (Tue, 22 Apr 2008)
	  | 9 lines If the dial string passed to the call channel callback
	  does not indicate an extension, then consider the extension on
	  the channel before falling back to the default. (closes issue
	  #12479) Reported by: darren1713 Patches:
	  exten_dial_fix_chan_iax2.c.patch uploaded by darren1713 (license
	  116) ........ ................

2008-04-22 15:46 +0000 [r114524-114528]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 114527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114527 |
	  russell | 2008-04-22 10:46:01 -0500 (Tue, 22 Apr 2008) | 8 lines
	  Correct action_ping() and action_events() with regards to Manager
	  1.1 documentation. Also, fix a bug in xml_translate(). (closes
	  issue #11649) Reported by: ys Patches: trunk_manager.c.diff
	  uploaded by ys (license 281) ........

2008-04-21 20:23 +0000 [r114422]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 114389 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114389 |
	  mattf | 2008-04-21 13:44:35 -0500 (Mon, 21 Apr 2008) | 1 line Add
	  support for generic name transmission (#12484) on SS7 in chan_zap
	  ........

2008-04-21 15:38 +0000 [r114328]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_authenticate.c: Merged revisions 114327 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114327 | jpeeler | 2008-04-21 10:34:37 -0500 (Mon, 21 Apr 2008)
	  | 2 lines This removes an invalid warning message for an
	  incorrectly entered pin, but more importantly removes an
	  inapplicable check. If the first argument passed to
	  app_authenticate does not contain a '/', the argument should be
	  treated as the sole fixed "password" to match against and that is
	  all. (Previous behavior was attempting to open a file based on
	  the pin.) ........

2008-04-21 14:42 +0000 [r114321-114324]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114323 | file | 2008-04-21 11:40:33 -0300 (Mon, 21 Apr 2008) |
	  12 lines Merged revisions 114322 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114322 | file | 2008-04-21 11:39:32 -0300 (Mon, 21 Apr 2008) | 4
	  lines Only drop audio if we receive it without a progress
	  indication. We allow other frames through such as DTMF because
	  they may be needed to complete the call. (closes issue #12440)
	  Reported by: aragon ........ ................

	* /, res/res_config_ldap.c: Merged revisions 114320 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114320 | file | 2008-04-21 11:34:06 -0300 (Mon, 21 Apr 2008) | 6
	  lines Only print out the error message if ldap_modify_ext_s
	  actually returns an error, and not success. (closes issue #12438)
	  Reported by: gservat Patches: res_config_ldap.c-patch-code
	  uploaded by gservat (license 466) ........

2008-04-19 17:00 +0000 [r114304]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: SS7:Added - Generic Name / Access Transport
	  / Redirecting Number handling. #12425

2008-04-18 21:51 +0000 [r114277-114286]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 114285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114285 | russell | 2008-04-18 16:51:05 -0500 (Fri, 18 Apr 2008)
	  | 10 lines Merged revisions 114284 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114284 | russell | 2008-04-18 16:48:06 -0500 (Fri, 18 Apr 2008)
	  | 2 lines Don't destroy a manager session if poll() returns an
	  error of EAGAIN. ........ ................

	* Makefile, /: Merged revisions 114279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114279 | russell | 2008-04-18 15:01:47 -0500 (Fri, 18 Apr 2008)
	  | 10 lines Merged revisions 114278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114278 | russell | 2008-04-18 15:01:09 -0500 (Fri, 18 Apr 2008)
	  | 2 lines ensure directories are created before we try to install
	  stuff into them ........ ................

	* Makefile, /: Merged revisions 114276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114276 | russell | 2008-04-18 14:59:17 -0500 (Fri, 18 Apr 2008)
	  | 10 lines Merged revisions 114275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114275 | russell | 2008-04-18 14:58:55 -0500 (Fri, 18 Apr 2008)
	  | 2 lines SUBDIRS_INSTALL is already listed as a subtarget for
	  bininstall ........ ................

2008-04-18 19:36 +0000 [r114262-114272]  Joshua Colp <jcolp@digium.com>

	* channels/chan_unistim.c, /: Merged revisions 114271 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114271 | file | 2008-04-18 16:35:33 -0300 (Fri, 18 Apr 2008) | 4
	  lines Make sure ADSI is marked as unavailable on Unistim channels
	  so voicemail does not try to do some ADSI jazz. (closes issue
	  #12460) Reported by: PerryB ........

2008-04-18 18:04 +0000 [r114260]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c, /, main/callerid.c: Merged revisions 114259
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114259 | mmichelson | 2008-04-18 13:03:06 -0500
	  (Fri, 18 Apr 2008) | 14 lines Merged revisions 114257 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114257 | mmichelson | 2008-04-18 12:44:29 -0500 (Fri, 18 Apr
	  2008) | 6 lines Clearing up error messages so they make a bit
	  more sense. Also removing a redundant error message. Issue AST-15
	  ........ ................

2008-04-18 16:12 +0000 [r114255]  Joshua Colp <jcolp@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 114254 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114254 | file | 2008-04-18 13:11:27 -0300 (Fri, 18 Apr 2008) | 4
	  lines If the parsing of the config file fails make sure we unlock
	  ldap_lock. (closes issue #12477) Reported by: IgorG ........

2008-04-18 13:40 +0000 [r114247]  Sean Bright <sean.bright@gmail.com>

	* channels/chan_sip.c: Merged revisions 114246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114246 | seanbright | 2008-04-18 09:38:07 -0400 (Fri, 18 Apr
	  2008) | 9 lines Merged revisions 114245 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114245 | seanbright | 2008-04-18 09:33:32 -0400 (Fri, 18 Apr
	  2008) | 1 line Only complete the SIP channel name once for 'sip
	  show channel <channel>' ........ ................

2008-04-18 06:54 +0000 [r114244]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_setcallerid.c, /: Merged revisions 114243 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114243 | tilghman | 2008-04-18 01:53:47 -0500
	  (Fri, 18 Apr 2008) | 11 lines Merged revisions 114242 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114242 | tilghman | 2008-04-18 01:49:16 -0500 (Fri, 18 Apr 2008)
	  | 3 lines For consistency sake, ensure that the values that
	  ${CALLINGPRES} returns are valid as an input to SetCallingPres.
	  (Closes issue #12472) ........ ................

2008-04-17 23:09 +0000 [r114232-114241]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114151 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114151 | oej | 2008-04-15 15:39:29 -0500 (Tue, 15 Apr 2008) | 10
	  lines Merged revisions 114148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114148 | oej | 2008-04-15 22:26:05 +0200 (Tis, 15 Apr 2008) | 2
	  lines Handle subscribe queues in all situations... Thanks to
	  festr_ on irc for telling me about this bug. ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 114150 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114150 |
	  oej | 2008-04-15 15:31:08 -0500 (Tue, 15 Apr 2008) | 2 lines
	  Adding chanvar to SIPPEER from 1.4 branch ........

	* main/autoservice.c, /: Merged revisions 114233 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114233 | russell | 2008-04-17 17:24:00 -0500 (Thu, 17 Apr 2008)
	  | 14 lines Merged revisions 114230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114230 | russell | 2008-04-17 17:15:43 -0500 (Thu, 17 Apr 2008)
	  | 6 lines Remove redundant safety net. The check for the
	  autoservice channel list state accomplishes the same goal in a
	  better way. (issue #12470) Reported By: atis ........
	  ................

2008-04-17 21:05 +0000 [r114228]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 114227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114227 | mmichelson | 2008-04-17 16:04:40 -0500 (Thu, 17 Apr
	  2008) | 17 lines Merged revisions 114226 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114226 | mmichelson | 2008-04-17 16:03:29 -0500 (Thu, 17 Apr
	  2008) | 9 lines Declaration of the peer channel in this scope was
	  making it so the peer variable defined in the outer scope was
	  never set properly, therefore making iterating through the
	  channel list always restart from the beginning. This bug would
	  have affected anyone who called chanspy without specifying a
	  first argument. (closes issue #12461) Reported by: stever28
	  ........ ................

2008-04-17 16:51 +0000 [r114210-114213]  Mark Michelson <mmichelson@digium.com>

	* main/dsp.c, main/frame.c, /, include/asterisk/dsp.h,
	  include/asterisk/frame.h: Merged revisions 114208 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114208 | mmichelson | 2008-04-17 11:40:12 -0500
	  (Thu, 17 Apr 2008) | 20 lines Merged revisions 114207 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114207 | mmichelson | 2008-04-17 11:28:03 -0500 (Thu, 17 Apr
	  2008) | 12 lines It was possible for a reference to a frame which
	  was part of a freed DSP to still be referenced, leading to memory
	  corruption and eventual crashes. This code change ensures that
	  the dsp is freed when we are finished with the frame. This change
	  is very similar to a change Russell made with translators back a
	  month or so ago. (closes issue #11999) Reported by: destiny6628
	  Patches: 11999.patch uploaded by putnopvut (license 60) Tested
	  by: destiny6628, victoryure ........ ................

2008-04-17 16:26 +0000 [r114206]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 114205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114205 | russell | 2008-04-17 11:25:29 -0500 (Thu, 17 Apr 2008)
	  | 11 lines Merged revisions 114204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114204 | russell | 2008-04-17 11:23:45 -0500 (Thu, 17 Apr 2008)
	  | 3 lines Fix the bininstall target to install from subdirs, as
	  well. (closes issue AST-8, patch from bmd at switchvox) ........
	  ................

2008-04-17 15:17 +0000 [r114203]  Tilghman Lesher <tlesher@digium.com>

	* doc/CODING-GUIDELINES, /: Merged revisions 114202 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114202 | tilghman | 2008-04-17 10:12:52 -0500 (Thu, 17 Apr 2008)
	  | 2 lines fileio.h does not exist; io.h does, though. ........

2008-04-17 13:55 +0000 [r114200]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 114199 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114199 | phsultan | 2008-04-17 15:46:17 +0200 (Thu, 17 Apr 2008)
	  | 10 lines Merged revisions 114198 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114198 | phsultan | 2008-04-17 15:42:23 +0200 (Thu, 17 Apr 2008)
	  | 2 lines Use keepalives effectively in order diagnose bug
	  #12432. ........ ................

2008-04-17 12:59 +0000 [r114197]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 114196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114196 | tilghman | 2008-04-17 07:59:04 -0500 (Thu, 17 Apr 2008)
	  | 16 lines Merged revisions 114195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114195 | tilghman | 2008-04-17 07:56:38 -0500 (Thu, 17 Apr 2008)
	  | 8 lines Add special case for when the agi cannot be executed,
	  to comply with the documentation that we return failure in that
	  case. (closes issue #12462) Reported by: fmueller Patches:
	  20080416__bug12462.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: fmueller ........ ................

2008-04-17 10:56 +0000 [r114193]  Sean Bright <sean.bright@gmail.com>

	* apps/app_chanspy.c, /: Merged revisions 114192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114192 | seanbright | 2008-04-17 06:55:05 -0400 (Thu, 17 Apr
	  2008) | 9 lines Merged revisions 114191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114191 | seanbright | 2008-04-17 06:51:20 -0400 (Thu, 17 Apr
	  2008) | 1 line Make sure we have enough room for the recording's
	  filename. ........ ................

2008-04-16 20:48 +0000 [r114186]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 114185 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114185 | kpfleming | 2008-04-16 15:47:30 -0500 (Wed, 16 Apr
	  2008) | 14 lines Merged revisions 114184 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114184 | kpfleming | 2008-04-16 15:46:38 -0500 (Wed, 16 Apr
	  2008) | 6 lines use the ZT_SET_DIALPARAMS ioctl properly by
	  initializing the structure to all zeroes in case it contains
	  fields that we don't write values into (which it does as of
	  Zaptel 1.4.10) (closes issue #12456) Reported by: fnordian
	  ........ ................

2008-04-15 20:53 +0000 [r114153]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 114152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114152 |
	  tilghman | 2008-04-15 15:51:08 -0500 (Tue, 15 Apr 2008) | 2 lines
	  Oops, buffer wasn't long enough for query ........

2008-04-15 20:09 +0000 [r114147]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 114146 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114146 |
	  murf | 2008-04-15 13:59:50 -0600 (Tue, 15 Apr 2008) | 8 lines
	  These changes: a. fix a self-found problem with SPAWN-ing an
	  extension, where matches were not being found b. correct some
	  wording in a comment c. Add some debug for future debugging.
	  ........

2008-04-15 17:22 +0000 [r114132-114142]  Jason Parker <jparker@digium.com>

	* channels/chan_unistim.c, /: Merged revisions 114141 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114141 | qwell | 2008-04-15 12:21:58 -0500 (Tue, 15 Apr 2008) |
	  8 lines Shorten the mac address pattern, since some phones use
	  different identifiers (such as the i2050 softphone). (closes
	  issue #12398) Reported by: c_hans Patches: chan_unistim_svn.diff
	  uploaded by c (license 460) Tested by: c_hans ........

	* contrib/scripts/autosupport, /: Merged revisions 114139 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114139 | qwell | 2008-04-15 12:17:37 -0500
	  (Tue, 15 Apr 2008) | 15 lines Merged revisions 114138 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114138 | qwell | 2008-04-15 12:17:18 -0500 (Tue, 15 Apr 2008) |
	  7 lines Update Digium autosupport script, for more useful
	  information. (closes issue #12452) Reported by: angler Patches:
	  autosupport.diff uploaded by angler (license 106) ........
	  ................

	* /, apps/app_queue.c: Merged revisions 114134 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114134 | qwell | 2008-04-15 11:18:38 -0500 (Tue, 15 Apr 2008) |
	  16 lines Merged revisions 114133 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114133 | qwell | 2008-04-15 11:18:08 -0500 (Tue, 15 Apr 2008) |
	  8 lines Allow autofill to work in the general section of
	  queues.conf. Additionally, don't try to (re)set options when they
	  have empty values in realtime (all unset columns would have an
	  empty value). (closes issue #12445) Reported by: atis Patches:
	  12445-autofill.diff uploaded by qwell (license 4) ........
	  ................

2008-04-14 18:34 +0000 [r114122]  Jason Parker <jparker@digium.com>

	* /, channels/chan_h323.c: Merged revisions 114121 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114121 | qwell | 2008-04-14 13:34:17 -0500
	  (Mon, 14 Apr 2008) | 15 lines Merged revisions 114120 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114120 | qwell | 2008-04-14 13:31:57 -0500 (Mon, 14 Apr 2008) |
	  7 lines The call_token on the pvt can occasionally be NULL,
	  causing a crash. If it is NULL, we can skip this channel, since
	  it can't the one we're looking for. (closes issue #9299) Reported
	  by: vazir ........ ................

2008-04-14 17:42 +0000 [r114119]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 114118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114118 | mmichelson | 2008-04-14 12:42:20 -0500 (Mon, 14 Apr
	  2008) | 19 lines Merged revisions 114117 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114117 | mmichelson | 2008-04-14 12:41:03 -0500 (Mon, 14 Apr
	  2008) | 11 lines Increase the retry count when attempting to show
	  channels. This apparently cleared an issue someone was seeing
	  when attempting to show channels when the load was high. (closes
	  issue #11667) Reported by: falves11 Patches: 11677.txt uploaded
	  by russell (license 2) Tested by: falves11 ........
	  ................

2008-04-14 16:33 +0000 [r114116]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 114115 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114115 | tilghman | 2008-04-14 11:32:59 -0500 (Mon, 14 Apr 2008)
	  | 2 lines Make tab-completion work for all cases ........

2008-04-14 16:25 +0000 [r114114]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /, apps/app_queue.c: Merged revisions 114113 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114113 | mmichelson | 2008-04-14 11:25:09 -0500
	  (Mon, 14 Apr 2008) | 17 lines Merged revisions 114112 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114112 | mmichelson | 2008-04-14 11:24:22 -0500 (Mon, 14 Apr
	  2008) | 9 lines If the datastore has been moved to another
	  channel due to a masquerade, then freeing the datastore here
	  causes an eventual double free when the new channel hangs up. We
	  should only free the datastore if we were able to successfully
	  remove it from the channel we are referencing (i.e. the datastore
	  was not moved). (closes issue #12359) Reported by: pguido
	  ........ ................

2008-04-14 15:02 +0000 [r114108]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 114107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114107 | mmichelson | 2008-04-14 10:01:36 -0500 (Mon, 14 Apr
	  2008) | 13 lines Merged revisions 114106 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114106 | mmichelson | 2008-04-14 09:58:02 -0500 (Mon, 14 Apr
	  2008) | 5 lines Save a local copy of the generate callback prior
	  to unlocking the channel in case the generate callback goes NULL
	  on us after the channel is unlocked. Thanks to Russell for
	  pointing this need out to me. ........ ................

2008-04-14 14:54 +0000 [r114102-114105]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114104 | file | 2008-04-14 11:53:33 -0300 (Mon, 14 Apr 2008) |
	  12 lines Merged revisions 114103 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114103 | file | 2008-04-14 11:52:46 -0300 (Mon, 14 Apr 2008) | 4
	  lines It is possible for the remote side to say they want T38 but
	  not give any capabilities. (closes issue #12414) Reported by: MVF
	  ........ ................

	* main/rtp.c, /: Merged revisions 114101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114101 | file | 2008-04-14 10:53:33 -0300 (Mon, 14 Apr 2008) |
	  12 lines Merged revisions 114100 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114100 | file | 2008-04-14 10:52:49 -0300 (Mon, 14 Apr 2008) | 4
	  lines Don't change the SSRC when a new source comes into play,
	  this might happen quite often and depending on the remote side...
	  they might not like this. (closes issue #12353) Reported by:
	  dimas ........ ................

2008-04-14 02:59 +0000 [r114097-114099]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 114098 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114098 | tilghman | 2008-04-13 21:55:41 -0500 (Sun, 13 Apr 2008)
	  | 3 lines Add tab command-line completion (Closes issue #12428)
	  ........

	* /, apps/app_meetme.c: Merged revisions 114096 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114096 |
	  tilghman | 2008-04-13 09:35:43 -0500 (Sun, 13 Apr 2008) | 3 lines
	  Use ast_mkdir instead of mkdir (Closes issue #12430) ........

2008-04-12 16:22 +0000 [r114094-114095]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure linkset is locked exiting
	  ss7_start_call

	* channels/chan_zap.c: Make sure we start incoming calls on SS7
	  with echo cancellation enabled. Also make sure when completing a
	  COT we call ss7_start_call with the proper locks held. Lastly,
	  make sure if we fail to get a channel from zt_new that we don't
	  assume it's there.

2008-04-11 23:27 +0000 [r114089-114091]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 114090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114090 |
	  tilghman | 2008-04-11 18:26:56 -0500 (Fri, 11 Apr 2008) | 3 lines
	  If any field is not null, but has no default, then it must be set
	  or the insert will fail. (Closes issue #12285) ........

	* /, configs/res_ldap.conf.sample: Merged revisions 114088 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r114088 | tilghman | 2008-04-11 18:21:54 -0500 (Fri, 11
	  Apr 2008) | 3 lines Make the sample config match the contributed
	  LDAP schema (Closes issue #12421) ........

2008-04-11 23:21 +0000 [r114087]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 114084 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r114084 | twilson | 2008-04-11 17:48:52 -0500
	  (Fri, 11 Apr 2008) | 15 lines Merged revisions 114083 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114083 | twilson | 2008-04-11 17:32:51 -0500 (Fri, 11 Apr 2008)
	  | 7 lines Several places in the code called find_callno() (which
	  releases the lock on the pvt structure) and then immediately
	  locked the call and did things with it. Unfortunately, the call
	  can disappear between the find_callno and the lock, causing Bad
	  Stuff(tm) to happen. Added find_callno_locked() function to
	  return the callno withtout unlocking for instances that it is
	  needed. (issue #12400) Reported by: ztel ........
	  ................

2008-04-11 23:13 +0000 [r114086]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 114085 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114085 | tilghman | 2008-04-11 18:12:16 -0500 (Fri, 11 Apr 2008)
	  | 7 lines Use the correct function for free'ing objects, and
	  maybe we won't crash. (closes issue #12163) Reported by: gservat
	  Patches: 20080411__bug12163.diff.txt uploaded by Corydon76
	  (license 14) Tested by: gservat ........

2008-04-11 15:51 +0000 [r114065]  Mark Michelson <mmichelson@digium.com>

	* /, main/features.c: Merged revisions 114064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114064 | mmichelson | 2008-04-11 10:49:35 -0500 (Fri, 11 Apr
	  2008) | 19 lines Merged revisions 114063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114063 | mmichelson | 2008-04-11 10:44:28 -0500 (Fri, 11 Apr
	  2008) | 11 lines Fix a race condition that may happen between a
	  sip hangup and a "core show channel" command. This patch adds
	  locking to prevent the resulting crash. (closes issue #12155)
	  Reported by: tsearle Patches: show_channels_crash2.patch uploaded
	  by tsearle (license 373) Tested by: tsearle ........
	  ................

2008-04-11 14:56 +0000 [r114062]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 114061 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114061 | tilghman | 2008-04-11 09:54:22 -0500 (Fri, 11 Apr 2008)
	  | 6 lines Errors are all greater than 0 (closes issue #12422)
	  Reported by: nito Patches:
	  res_config_ldap_result_check_patch.diff uploaded by nito (license
	  340) ........

2008-04-10 22:23 +0000 [r114056]  Mark Michelson <mmichelson@digium.com>

	* utils/conf2ael.c, utils/check_expr.c, utils/Makefile,
	  main/manager.c, /, utils/astman.c, utils/hashtest.c,
	  main/utils.c, include/asterisk/lock.h, utils/ael_main.c,
	  utils/hashtest2.c: Merged revisions 114052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114052 | mmichelson | 2008-04-10 17:02:32 -0500 (Thu, 10 Apr
	  2008) | 11 lines Merged revisions 114051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114051 | mmichelson | 2008-04-10 15:59:49 -0500 (Thu, 10 Apr
	  2008) | 3 lines Fix 1.4 build when LOW_MEMORY is enabled.
	  ........ ................

2008-04-10 19:59 +0000 [r114047]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 114046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114046 | mmichelson | 2008-04-10 14:58:36 -0500 (Thu, 10 Apr
	  2008) | 14 lines Merged revisions 114045 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114045 | mmichelson | 2008-04-10 14:55:33 -0500 (Thu, 10 Apr
	  2008) | 6 lines Be sure that we're not about to set bridgepvt
	  NULL prior to dereferencing it. (closes issue #11775) Reported
	  by: fujin ........ ................

2008-04-10 19:09 +0000 [r114043]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 114042 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114042 | tilghman | 2008-04-10 14:04:29 -0500 (Thu, 10 Apr 2008)
	  | 7 lines The hydra grows yet another head... (closes issue
	  #12401) Reported by: davevg Patches: astcli.diff2 uploaded by
	  davevg (license 209) Tested by: davevg, Corydon76 ........

2008-04-10 17:27 +0000 [r114037]  Jason Parker <jparker@digium.com>

	* /, main/file.c: Merged revisions 114036 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114036 | qwell | 2008-04-10 12:27:16 -0500 (Thu, 10 Apr 2008) |
	  18 lines Merged revisions 114035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114035 | qwell | 2008-04-10 12:26:10 -0500 (Thu, 10 Apr 2008) |
	  10 lines Only try to prefix language if we are not using an
	  absolute path (suffix it otherwise).
	  en/var/lib/asterisk/sounds/blah.gsm is a very silly path. (closes
	  issue #12379) Reported by: kuj Patches: 12379-absolutepath.diff
	  uploaded by qwell (license 4) Tested by: kuj, qwell ........
	  ................

2008-04-10 16:00 +0000 [r114023-114034]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 114030 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114030 | file | 2008-04-10 12:10:47 -0300 (Thu, 10 Apr 2008) |
	  14 lines Merged revisions 114029 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114029 | file | 2008-04-10 12:09:04 -0300 (Thu, 10 Apr 2008) | 6
	  lines Create the directory where name recordings will go if it
	  does not exist. (closes issue #12311) Reported by: rkeene
	  Patches: 12311-mkdir.diff uploaded by qwell (license 4) ........
	  ................

	* apps/app_voicemail.c, /: Merged revisions 114027 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r114027 | file | 2008-04-10 11:53:19 -0300 (Thu, 10 Apr 2008) | 6
	  lines Don't hardcode ru into the digits filename so that
	  languageprefix can work. (closes issue #12404) Reported by: IgorG
	  Patches: voicemail_ru_hardcoded-v1.patch uploaded by IgorG
	  (license 20) ........

	* main/rtp.c, channels/chan_unistim.c, /, channels/chan_skinny.c:
	  Merged revisions 114024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r114024 |
	  file | 2008-04-10 10:45:45 -0300 (Thu, 10 Apr 2008) | 4 lines Fix
	  spelling of existent in a few places. (closes issue #12409)
	  Reported by: candlerb ........

	* /, channels/chan_sip.c: Merged revisions 114022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r114022 | file | 2008-04-10 10:28:30 -0300 (Thu, 10 Apr 2008) |
	  14 lines Merged revisions 114021 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r114021 | file | 2008-04-10 10:27:11 -0300 (Thu, 10 Apr 2008) | 6
	  lines Don't add custom URI options if they don't exist OR they
	  are empty. (closes issue #12407) Reported by: homesick Patches:
	  uri_options-1.4.diff uploaded by homesick (license 91) ........
	  ................

2008-04-09 22:34 +0000 [r113929-113982]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 113980 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r113980 |
	  mmichelson | 2008-04-09 17:32:32 -0500 (Wed, 09 Apr 2008) | 8
	  lines Fix a crash that happened due to accessing free'd memory
	  (closes issue #12396) Reported by: tcalosi Patches: 12396.patch
	  uploaded by putnopvut (license 60) Tested by: tcalosi ........

	* /, channels/chan_sip.c: Merged revisions 113928 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113928 | mmichelson | 2008-04-09 15:56:14 -0500 (Wed, 09 Apr
	  2008) | 16 lines Merged revisions 113927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113927 | mmichelson | 2008-04-09 15:54:31 -0500 (Wed, 09 Apr
	  2008) | 8 lines We need to set the persistant_route [sic]
	  parameter for the sip_pvt during the initial INVITE, no matter if
	  we're building the route set from an INVITE request or response.
	  (closes issue #12391) Reported by: benjaminbohlmann Tested by:
	  benjaminbohlmann ........ ................

2008-04-09 19:02 +0000 [r113876]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_csv.c, /, configs/cdr.conf.sample: Merged revisions
	  113875 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113875 | tilghman | 2008-04-09 14:00:40 -0500 (Wed, 09 Apr 2008)
	  | 12 lines Merged revisions 113874 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113874 | tilghman | 2008-04-09 13:57:33 -0500 (Wed, 09 Apr 2008)
	  | 4 lines If the [csv] section does not exist in cdr.conf, then
	  an unload/load sequence is needed to correct the problem. Track
	  whether the load succeeded with a variable, so we can fix this
	  with a simple reload event, instead. ........ ................

2008-04-09 17:56 +0000 [r113839]  Jason Parker <jparker@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 113838 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r113838 | qwell | 2008-04-09 12:56:07 -0500 (Wed, 09 Apr 2008) |
	  2 lines Fix a small file handle "leak" pointed out by jjshoe on
	  #asterisk. ........

2008-04-09 17:50 +0000 [r113837]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, /: Merged revisions 113836 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r113836 |
	  mmichelson | 2008-04-09 12:48:33 -0500 (Wed, 09 Apr 2008) | 14
	  lines There was a subtle logical difference between 1.4 and trunk
	  with regards to how timeouts were handled. In 1.4, if the
	  absolute timeout were reached on a call, no matter what the
	  return value of ast_spawn_extension was, the pbx would attempt to
	  go to the 'T' extension or hangup otherwise. The rearrangement of
	  this function in trunk made this check only happen in the case
	  that ast_spawn_extension returned 0. If ast_spawn_extension
	  returned 1, then the fact that the timeout expired resulted in a
	  no-op, and would cause an infinite loop to occur in
	  __ast_pbx_run. This change fixes this problem. Now timeouts will
	  behave as they did in 1.4 (closes issue #11550) Reported by: pj
	  Tested by: putnopvut ........

2008-04-09 16:53 +0000 [r113786]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 113785 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113785 | file | 2008-04-09 13:52:04 -0300 (Wed,
	  09 Apr 2008) | 12 lines Merged revisions 113784 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113784 | file | 2008-04-09 13:50:45 -0300 (Wed, 09 Apr 2008) | 4
	  lines If we receive an AUTHREQ from the remote server and we are
	  unable to reply (for example they have a secret configured, but
	  we do not) then queue a hangup frame on the Asterisk channel.
	  This will cause the channel to hangup and a HANGUP to be sent via
	  IAX2 to the remote side which is the proper thing to do in this
	  scenario. (closes issue #12385) Reported by: viraptor ........
	  ................

2008-04-09 14:42 +0000 [r113683]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 113682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113682 | mmichelson | 2008-04-09 09:41:58 -0500 (Wed, 09 Apr
	  2008) | 17 lines Merged revisions 113681 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113681 | mmichelson | 2008-04-09 09:40:05 -0500 (Wed, 09 Apr
	  2008) | 9 lines If Asterisk receives a 488 on an INVITE (not a
	  reinvite), then we should not send a BYE. (closes issue #12392)
	  Reported by: fnordian Patches: chan_sip.patch uploaded by
	  fnordian (license 110) with small modification from me ........
	  ................

2008-04-09 13:56 +0000 [r113648-113650]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli: Merged revisions 113647 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r113647 | tilghman | 2008-04-09 08:23:44 -0500 (Wed, 09 Apr 2008)
	  | 6 lines Additional enhancements (closes issue #12390) Reported
	  by: tzafrir Patches: astcli_fixes.diff uploaded by tzafrir
	  (license 46) ........

2008-04-09 01:40 +0000 [r113598]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 113597 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113597 | twilson | 2008-04-08 20:36:58 -0500
	  (Tue, 08 Apr 2008) | 10 lines Merged revisions 113596 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113596 | twilson | 2008-04-08 20:34:25 -0500 (Tue, 08 Apr 2008)
	  | 2 lines Initialize fr->cacheable to make valgrind happy
	  ........ ................

2008-04-08 21:34 +0000 [r113560]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astcli (added): Merged revisions 113559 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r113559 | tilghman | 2008-04-08 16:33:11 -0500 (Tue, 08
	  Apr 2008) | 6 lines Add commandline tool for doing CLI commands
	  through AMI (instead of using asterisk -rx) (closes issue #12389)
	  Reported by: davevg Patches: astcli uploaded by davevg (license
	  209) ........

2008-04-08 18:49 +0000 [r113404-113506]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 113505 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113505 | qwell | 2008-04-08 13:49:21 -0500
	  (Tue, 08 Apr 2008) | 9 lines Merged revisions 113504 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r113504 | qwell | 2008-04-08 13:48:55 -0500 (Tue, 08 Apr
	  2008) | 1 line Add a little more that is required for previously
	  added devices. ........ ................

	* /, channels/chan_skinny.c: Merged revisions 113455 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113455 | qwell | 2008-04-08 13:08:35 -0500
	  (Tue, 08 Apr 2008) | 12 lines Merged revisions 113454 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113454 | qwell | 2008-04-08 13:07:49 -0500 (Tue, 08 Apr 2008) |
	  4 lines Add support for several new(ish) devices - most notably,
	  7942/7945, 7962/7965, 7975. Thanks to Greg Oliver for providing
	  me the required information. ........ ................

	* main/asterisk.c, /: Merged revisions 113403 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113403 | qwell | 2008-04-08 12:00:55 -0500 (Tue, 08 Apr 2008) |
	  9 lines Merged revisions 113402 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113402 | qwell | 2008-04-08 11:56:52 -0500 (Tue, 08 Apr 2008) |
	  1 line Work around some silliness caused by sys/capability.h -
	  this should fix compile errors a number of users have been
	  experiencing. ........ ................

2008-04-08 16:56 +0000 [r113350-113401]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/astgenkey.8: Merged revisions 113400 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113400 | tilghman | 2008-04-08 11:54:21 -0500
	  (Tue, 08 Apr 2008) | 14 lines Merged revisions 113399 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113399 | tilghman | 2008-04-08 11:51:28 -0500 (Tue, 08 Apr 2008)
	  | 6 lines Add security note on astgenkey's manpage. (closes issue
	  #12373) Reported by: lmamane Patches: 20080406__bug12373.diff.txt
	  uploaded by Corydon76 (license 14) ........ ................

	* /, channels/chan_sip.c: Merged revisions 113349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113349 | tilghman | 2008-04-08 10:48:58 -0500 (Tue, 08 Apr 2008)
	  | 15 lines Merged revisions 113348 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113348 | tilghman | 2008-04-08 10:39:16 -0500 (Tue, 08 Apr 2008)
	  | 7 lines Move check for still-bridged channels out a little
	  further, to avoid possible deadlocks. (Closes issue #12252)
	  Reported by: callguy Patches: 20080319__bug12252.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: callguy ........
	  ................

2008-04-08 15:10 +0000 [r113298-113299]  Joshua Colp <jcolp@digium.com>

	* /, main/audiohook.c: Merged revisions 113297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113297 | file | 2008-04-08 12:05:35 -0300 (Tue, 08 Apr 2008) |
	  12 lines Merged revisions 113296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113296 | file | 2008-04-08 12:03:43 -0300 (Tue, 08 Apr 2008) | 4
	  lines If audio suddenly gets fed into one side of a channel after
	  a lapse of frames flush the other factory so that old audio does
	  not remain in the factory causing the sync code to not execute.
	  (closes issue #12296) Reported by: jvandal ........
	  ................

2008-04-07 22:17 +0000 [r113246]  Tilghman Lesher <tlesher@digium.com>

	* /, configs/manager.conf.sample: Merged revisions 113245 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r113245 | tilghman | 2008-04-07 17:16:46 -0500 (Mon, 07
	  Apr 2008) | 2 lines Additional note ........

2008-04-07 21:49 +0000 [r113244]  Jason Parker <jparker@digium.com>

	* /, configs/manager.conf.sample: Merged revisions 113243 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r113243 | qwell | 2008-04-07 16:49:27 -0500 (Mon, 07 Apr
	  2008) | 1 line Document 'originate' permission in manager sample
	  config. ........

2008-04-07 21:36 +0000 [r113242]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 113241 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113241 | jpeeler | 2008-04-07 16:35:48 -0500 (Mon, 07 Apr 2008)
	  | 23 lines Merged revisions 113013 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113013 | jpeeler | 2008-04-07 10:18:10 -0500 (Mon, 07 Apr 2008)
	  | 15 lines Merged revisions 113012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113012 | jpeeler | 2008-04-07 10:16:44 -0500 (Mon, 07 Apr 2008)
	  | 7 lines (closes issue #12362) (closes issue #12372) Reported
	  by: vinsik Tested by: tecnoxarxa This one line change makes an if
	  inside a for loop (in realtime_peer) check all the ast_variables
	  the loop was intending to test rather than just the first one.
	  ........ ................ ................

2008-04-07 19:10 +0000 [r113174]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c, configs/skinny.conf.sample: Merged
	  revisions 113119 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113119 | qwell | 2008-04-07 13:02:51 -0500 (Mon, 07 Apr 2008) |
	  16 lines Merged revisions 113118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113118 | qwell | 2008-04-07 13:00:09 -0500 (Mon, 07 Apr 2008) |
	  8 lines Allow playback with noanswer (and add earlyrtp option).
	  (closes issue #9077) Reported by: pj Patches: earlyrtp.diff
	  uploaded by wedhorn (license 30) Tested by: pj, qwell, DEA,
	  wedhorn ........ ................

2008-04-07 19:08 +0000 [r113173]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 113172 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r113172 | tilghman | 2008-04-07 14:06:46 -0500
	  (Mon, 07 Apr 2008) | 11 lines Merged revisions 113117 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113117 | tilghman | 2008-04-07 12:51:49 -0500 (Mon, 07 Apr 2008)
	  | 3 lines Force ast_mktime() to check for DST, since strptime(3)
	  does not. (Closes issue #12374) ........ ................

2008-04-07 16:13 +0000 [r113067]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 113066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113066 | mmichelson | 2008-04-07 11:12:30 -0500 (Mon, 07 Apr
	  2008) | 21 lines Merged revisions 113065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113065 | mmichelson | 2008-04-07 11:08:45 -0500 (Mon, 07 Apr
	  2008) | 13 lines This fix prevents a deadlock that was
	  experienced in chan_local. There was deadlock prevention in place
	  in chan_local, but it would not work in a specific case because
	  the channel was recursively locked. By unlocking the channel
	  prior to calling the generator's generate callback in
	  ast_read_generator_actions(), we prevent the recursive locking,
	  and therefore the deadlock. (closes issue #12307) Reported by:
	  callguy Patches: 12307.patch uploaded by putnopvut (license 60)
	  Tested by: callguy ........ ................

2008-04-07 15:28 +0000 [r113042]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 113013 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r113013 | jpeeler | 2008-04-07 10:18:10 -0500 (Mon, 07 Apr 2008)
	  | 15 lines Merged revisions 113012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r113012 | jpeeler | 2008-04-07 10:16:44 -0500 (Mon, 07 Apr 2008)
	  | 7 lines (closes issue #12362) (closes issue #12372) Reported
	  by: vinsik Tested by: tecnoxarxa This one line change makes an if
	  inside a for loop (in realtime_peer) check all the ast_variables
	  the loop was intending to test rather than just the first one.
	  ........ ................

2008-04-05 13:30 +0000 [r112973-112975]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 112972 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r112972 |
	  tilghman | 2008-04-05 08:24:12 -0500 (Sat, 05 Apr 2008) | 6 lines
	  AsyncAGI should not close the manager session on error. (closes
	  issue #12370) Reported by: srt Patches: asterisk-12370.diff
	  uploaded by srt (license 378) ........

2008-04-04 19:30 +0000 [r112786-112822]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 112821 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r112821 | phsultan | 2008-04-04 21:28:49 +0200
	  (Fri, 04 Apr 2008) | 9 lines Merged revisions 112820 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r112820 | phsultan | 2008-04-04 21:26:15 +0200 (Fri, 04
	  Apr 2008) | 1 line Free newly allocated channel before returning
	  ........ ................

	* /, channels/chan_gtalk.c: Merged revisions 112785 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r112785 | phsultan | 2008-04-04 19:32:46 +0200
	  (Fri, 04 Apr 2008) | 15 lines Merged revisions 112766 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112766 | phsultan | 2008-04-04 19:16:59 +0200 (Fri, 04 Apr 2008)
	  | 7 lines Prevent call connections when codecs don't match.
	  (closes issue #10604) Reported by: keepitcool Patches:
	  branch-1.4-10604-2.diff uploaded by phsultan (license 73) Tested
	  by: phsultan ........ ................

2008-04-04 01:08 +0000 [r112715]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/asterisk.c, /: Merged revisions 112653,112656,112714 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r112653 | dhubbard | 2008-04-03 17:13:11 -0500 (Thu, 03
	  Apr 2008) | 1 line add a Zaptel timer check to verify the timer
	  is responding when Zaptel support is compiled into Asterisk and
	  Zaptel drivers are loaded. This will help people not waste their
	  valuable time debugging side effects. ........ r112656 | dhubbard
	  | 2008-04-03 17:19:43 -0500 (Thu, 03 Apr 2008) | 1 line satisfy
	  buildbot ........ r112714 | dhubbard | 2008-04-03 19:57:33 -0500
	  (Thu, 03 Apr 2008) | 1 line sleep long enough for the zaptel
	  timer error message to display before exit ........

2008-04-04 00:54 +0000 [r112713]  Joshua Colp <jcolp@digium.com>

	* /, main/Makefile: Merged revisions 112712 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112712 | file | 2008-04-03 21:53:19 -0300 (Thu, 03 Apr 2008) |
	  10 lines Merged revisions 112711 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112711 | file | 2008-04-03 21:52:36 -0300 (Thu, 03 Apr 2008) | 2
	  lines Pass in the path to Zaptel for systems that install Zaptel
	  headers in a separate location. ........ ................

2008-04-03 14:42 +0000 [r112601]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c, /: Merged revisions 112600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112600 | mmichelson | 2008-04-03 09:35:47 -0500 (Thu, 03 Apr
	  2008) | 17 lines Merged revisions 112599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112599 | mmichelson | 2008-04-03 09:32:20 -0500 (Thu, 03 Apr
	  2008) | 9 lines Fix the testing of the "res" variable so that it
	  is more logically correct and makes the correct warning and debug
	  messages print. (closes issue #12361) Reported by: one47 Patches:
	  chan_zap_deferred_digit.patch uploaded by one47 (license 23)
	  ........ ................

2008-04-02 17:37 +0000 [r112470]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 112469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112469 | mmichelson | 2008-04-02 12:36:49 -0500 (Wed, 02 Apr
	  2008) | 21 lines Merged revisions 112468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112468 | mmichelson | 2008-04-02 12:36:04 -0500 (Wed, 02 Apr
	  2008) | 13 lines Fix a race condition in the manager. It is
	  possible that a new manager event could be appended during a
	  brief time when the manager is not waiting for input. If an event
	  comes during this period, we need to set an indicator that there
	  is an event pending so that the manager doesn't attempt to wait
	  forever for an event that already happened. (closes issue #12354)
	  Reported by: bamby Patches: manager_race_condition.diff uploaded
	  by bamby (license 430) (comments added by me) ........
	  ................

2008-04-02 15:27 +0000 [r112436]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 112431 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r112431 |
	  file | 2008-04-02 12:26:51 -0300 (Wed, 02 Apr 2008) | 7 lines
	  Since the SIP request structure gets reused multiple times with
	  TCP handling we have to clear the debug state or else we will
	  keep spitting out debug even after it has been turned off.
	  (closes issue #12169) Reported by: pj Patches:
	  12169-debugoff-2.diff uploaded by qwell (license 4) Tested by: pj
	  ........

2008-04-02 14:33 +0000 [r112395]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 112394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112394 | mmichelson | 2008-04-02 09:32:43 -0500 (Wed, 02 Apr
	  2008) | 14 lines Merged revisions 112393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112393 | mmichelson | 2008-04-02 09:32:00 -0500 (Wed, 02 Apr
	  2008) | 6 lines Ensure that there is no timeout if none is
	  specified. (closes issue #12349) Reported by: johnlange ........
	  ................

2008-04-01 22:48 +0000 [r112359]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 112357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r112357 |
	  murf | 2008-04-01 16:45:10 -0600 (Tue, 01 Apr 2008) | 1 line
	  Bumped across another test set for the new exten pattern matcher,
	  which revealed a problem with the CANMATCH/MATCHMORE modes.
	  Direct matches were getting in the way. Fixed. ........

2008-04-01 20:20 +0000 [r112299]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 112289 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r112289 |
	  murf | 2008-04-01 14:02:19 -0600 (Tue, 01 Apr 2008) | 21 lines
	  (closes issue #12298) Reported by: falves11 Patches: 12298.patch1
	  uploaded by murf (license 17) Tested by: murf I have hopes that
	  the changes made over the last few days will finalize and
	  solidify this code. While there are bound to be small tweaks
	  still needed, I feel that the job (at last) is somewhat
	  completed. Finally, I had a chance to comprehend how the scoring
	  of extension patterns was done in the previous version, and I've
	  come very close to using the exact same criteria in the new
	  pattern matching code. The left-right sorting is now replicated
	  in the trie structure itself, such that the first match found
	  will the 'best' match. Compared the results against 1.4 for
	  several extensions. Replicated falves11's setup and it works.
	  Used some devious patterns provided by jsmith, supplemented with
	  a few of my own. Looks good. ........

2008-04-01 18:09 +0000 [r112211]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 112210 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112210 | file | 2008-04-01 15:06:13 -0300 (Tue, 01 Apr 2008) |
	  12 lines Merged revisions 112209 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112209 | file | 2008-04-01 15:02:43 -0300 (Tue, 01 Apr 2008) | 4
	  lines Disable Packet2Packet bridging when we need to feed DTMF
	  frames into the core. Some implementations do not like how we
	  switch between things. (closes issue #12212) Reported by: bamby
	  ........ ................

2008-04-01 17:52 +0000 [r112170-112206]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 112205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112205 | file | 2008-04-01 14:48:52 -0300 (Tue, 01 Apr 2008) |
	  12 lines Merged revisions 112204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112204 | file | 2008-04-01 14:43:46 -0300 (Tue, 01 Apr 2008) | 4
	  lines Do not pass audio until the remote side has indicated they
	  are providing early media, or if the channel has been answered.
	  (closes issue #11823) Reported by: SDamm ........
	  ................

2008-04-01 17:25 +0000 [r112157]  Mark Michelson <mmichelson@digium.com>

	* main/dns.c, /: Merged revisions 112148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112148 | mmichelson | 2008-04-01 12:23:19 -0500 (Tue, 01 Apr
	  2008) | 18 lines Merged revisions 112138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112138 | mmichelson | 2008-04-01 12:21:21 -0500 (Tue, 01 Apr
	  2008) | 10 lines Initialize the __res_state structure used for
	  dns purposes to all 0's prior to using it. This is due to
	  valgrind's complaints on issue #12284 as well as an excerpt found
	  in "Description" portion of the online man page found here:
	  http://www.iti.cs.tu-bs.de/cgi-bin/UNIXhelp/man-cgi?res_nquery+3RESOLV
	  (pertains to issue #12284 but does not necessarily close it)
	  ........ ................

2008-04-01 16:57 +0000 [r112127]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/slinfactory.h, /, main/slinfactory.c: Merged
	  revisions 112126 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r112126 | file | 2008-04-01 13:50:37 -0300 (Tue, 01 Apr 2008) |
	  13 lines Merged revisions 112125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112125 | file | 2008-04-01 13:45:14 -0300 (Tue, 01 Apr 2008) | 5
	  lines Ensure that we do not exceed the hold's maximum size with a
	  single frame. (closes issue #12047) Reported by: fabianoheringer
	  Tested by: fabianoheringer ........ ................

2008-03-31 22:17 +0000 [r112070-112072]  Jason Parker <jparker@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 112069 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r112069 | qwell | 2008-03-31 16:48:30 -0500
	  (Mon, 31 Mar 2008) | 13 lines Merged revisions 112068 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r112068 | qwell | 2008-03-31 16:48:05 -0500 (Mon, 31 Mar 2008) |
	  5 lines Fix a silly infinite loop when choosing an invalid
	  option. (closes issue #12315) Reported by: jmls ........
	  ................

2008-03-31 21:03 +0000 [r112034-112036]  Terry Wilson <twilson@digium.com>

	* /, main/http.c: Merged revisions 112033 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r112033 |
	  twilson | 2008-03-31 15:45:05 -0500 (Mon, 31 Mar 2008) | 2 lines
	  Handle blank prefix= in http.conf ........

2008-03-31 17:15 +0000 [r111997-111999]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 111998 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r111998 |
	  russell | 2008-03-31 12:14:58 -0500 (Mon, 31 Mar 2008) | 7 lines
	  Ensure configure gets run on a clean checkout. (closes issue
	  #12197) Reported by: juggie Patches: 12197.diff uploaded by
	  juggie (license 24) ........

2008-03-31 14:22 +0000 [r111962]  Joshua Colp <jcolp@digium.com>

	* res/res_config_sqlite.c, /: Merged revisions 111961 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r111961 | file | 2008-03-31 11:20:39 -0300 (Mon, 31 Mar 2008) | 4
	  lines Initialize all these here tmp pointers at declaration. They
	  confused some compilers a wee bit. (closes issue #12333) Reported
	  by: ovi ........

2008-03-29  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta7.1 released.  
	
	  Asterisk 1.6.0-beta7 was tagged against trunk, instead of the 1.6.0 branch.

2008-03-28 21:46 +0000 [r111858]  Jason Parker <jparker@digium.com>

	* codecs/gsm/inc/private.h, /: Merged revisions 111857 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111857 | qwell | 2008-03-28 16:46:02 -0500
	  (Fri, 28 Mar 2008) | 20 lines Merged revisions 111856 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111856 | qwell | 2008-03-28 16:45:35 -0500 (Fri, 28 Mar 2008) |
	  12 lines Allow gsm to compile correctly on x86 with gcc4
	  optimizations. (closes issue #11243) Reported by: whiskerp
	  Patches: 11243-maybe-asm.diff uploaded by qwell (license 4)
	  Tested by: Seggy (IRC) Note: While I did write this patch, I
	  would not have found this if fossil had not reported and fixed
	  issue #12253. A huge thanks to him for helping to (indirectly)
	  find the problem here. ........ ................

2008-03-28 19:11 +0000 [r111722-111776]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 111721 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111721 | qwell | 2008-03-28 12:57:12 -0500
	  (Fri, 28 Mar 2008) | 9 lines Merged revisions 111720 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r111720 | qwell | 2008-03-28 12:55:05 -0500 (Fri, 28 Mar
	  2008) | 1 line Remove unimplemented softkeys. Prompted by issue
	  #12325. ........ ................

2008-03-28 16:21 +0000 [r111660]  Jason Parker <jparker@digium.com>

	* /, formats/format_wav_gsm.c: Merged revisions 111659 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111659 | qwell | 2008-03-28 11:20:59 -0500
	  (Fri, 28 Mar 2008) | 16 lines Merged revisions 111658 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111658 | qwell | 2008-03-28 11:19:56 -0500 (Fri, 28 Mar 2008) |
	  8 lines The file size of WAV49 does not need to be an even
	  number. (closes issue #12128) Reported by: mdu113 Patches:
	  12128-noevenlength.diff uploaded by qwell (license 4) Tested by:
	  qwell, mdu113 ........ ................

2008-03-28 14:43 +0000 [r111607-111608]  Tilghman Lesher <tlesher@digium.com>

	* doc/valgrind.txt, /: Merged revisions 111606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111606 | tilghman | 2008-03-28 09:37:28 -0500 (Fri, 28 Mar 2008)
	  | 11 lines Merged revisions 111605 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111605 | tilghman | 2008-03-28 09:35:45 -0500 (Fri, 28 Mar 2008)
	  | 3 lines Update debugging text, since Valgrind eliminated the
	  --log-file-exactly option. (Closes issue #12320) ........
	  ................

2008-03-28 00:56 +0000 [r111566]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 111565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r111565 |
	  file | 2008-03-27 21:55:47 -0300 (Thu, 27 Mar 2008) | 2 lines
	  Forgetting to unregister a manager action is bad, mmmk? ........

2008-03-28 00:17 +0000 [r111534]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 111533 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r111533 |
	  mmichelson | 2008-03-27 19:12:52 -0500 (Thu, 27 Mar 2008) | 10
	  lines Fix a crash that would happen when attempting to unload the
	  app_queue module. The problem was that when the refcount on the
	  queue hit 0, the destructor was called, and inside the
	  destructor, another function was called which would increase the
	  refcount back to 1 again and then decrease it again back to 0 for
	  every member in the queue. This meant that the destructor was
	  being recursively called, leading to a double free of the queue.
	  This is now fixed by making sure to unlink the queue from the
	  queues container prior to the final unref of the queue. ........

2008-03-27 21:28 +0000 [r111498]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 111497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r111497 |
	  murf | 2008-03-27 15:25:55 -0600 (Thu, 27 Mar 2008) | 1 line
	  comment cleanup and iron out a really dumb mistake in handling
	  the '.'-wildcard in the new exten pattern matcher. ........

2008-03-27 19:30 +0000 [r111444]  Tilghman Lesher <tlesher@digium.com>

	* /, main/acl.c: Merged revisions 111443 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111443 | tilghman | 2008-03-27 14:26:45 -0500 (Thu, 27 Mar 2008)
	  | 14 lines Merged revisions 111442 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111442 | tilghman | 2008-03-27 14:23:12 -0500 (Thu, 27 Mar 2008)
	  | 6 lines For FreeBSD, at least, the ifa_addr element could be
	  NULL. (closes issue #12300) Reported by: festr Patches:
	  acl.c.patch uploaded by festr (license 443) ........
	  ................

2008-03-27 13:42 +0000 [r111361-111411]  Steve Murphy <murf@digium.com>

	* apps/app_playback.c, main/pbx.c, /: Merged revisions 111410 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111410 | murf | 2008-03-27 07:29:41 -0600 (Thu,
	  27 Mar 2008) | 17 lines Merged revisions 111391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111391 | murf | 2008-03-27 07:03:28 -0600 (Thu, 27 Mar 2008) | 9
	  lines These small documentation updates made in response to a
	  query in asterisk-users, where a user was using Playback, but
	  needed the features of Background, and had no idea that
	  Background existed, or that it might provide the features he
	  needed. I thought the best way to avert these kinds of queries
	  was to provide "See Also" references in all three of
	  "Background", "Playback", "WaitExten". Perhaps a project to do
	  this with all related apps is in order. ........ ................

	* res/ael/pval.c, /, include/asterisk/pval.h, pbx/pbx_ael.c,
	  include/asterisk/ael_structs.h: Merged revisions 111360 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111360 | murf | 2008-03-26 22:47:12 -0600 (Wed,
	  26 Mar 2008) | 23 lines Merged revisions 111341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111341 | murf | 2008-03-26 21:21:05 -0600 (Wed, 26 Mar 2008) |
	  15 lines (closes issue #12302) Reported by: pj Tested by: murf
	  These changes will set a channel variable ~~EXTEN~~ just before
	  generating code for a switch, with the value of ${EXTEN}. The
	  exten is marked as having a switch, and ever after that, till the
	  end of the exten, we substitute any ${EXTEN} with ${~~EXTEN~~}
	  instead in application arguments; (and the ${EXTEN: also). The
	  reason for this, is that because switches are coded using
	  separate extensions to provide pattern matching, and jumping
	  to/from these switch extensions messes up the ${EXTEN} value,
	  which blows the minds of users. ........ ................

2008-03-27 00:36 +0000 [r111247-111339]  Jason Parker <jparker@digium.com>

	* main/frame.c, /: Merged revisions 111285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111285 | qwell | 2008-03-26 19:25:56 -0500 (Wed, 26 Mar 2008) |
	  9 lines Merged revisions 111280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111280 | qwell | 2008-03-26 19:25:13 -0500 (Wed, 26 Mar 2008) |
	  1 line Put this flag back so we don't change the API. ........
	  ................

	* main/frame.c, /: Merged revisions 111246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111246 | qwell | 2008-03-26 18:27:33 -0500 (Wed, 26 Mar 2008) |
	  17 lines Merged revisions 111245 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111245 | qwell | 2008-03-26 18:26:33 -0500 (Wed, 26 Mar 2008) |
	  9 lines Remove excessive smoother optimization that was causing
	  audio glitches (small "pops") after (about 200ms later) an
	  "incorrectly" sized frame was received. While it would be very
	  nice to keep this as optimized as possible, it makes no sense for
	  the smoother to be dropping random bits of audio like this. Isn't
	  that the whole point of a smoother? Closes issue #12093. ........
	  ................

2008-03-26 19:57 +0000 [r111131]  Joshua Colp <jcolp@digium.com>

	* contrib/scripts/autosupport, /: Merged revisions 111130 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111130 | file | 2008-03-26 16:56:40 -0300 (Wed,
	  26 Mar 2008) | 14 lines Merged revisions 111129 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111129 | file | 2008-03-26 16:55:08 -0300 (Wed, 26 Mar 2008) | 6
	  lines Update autosupport script. (closes issue #12310) Reported
	  by: angler Patches: autosupport.diff uploaded by angler (license
	  106) ........ ................

2008-03-26 19:53 +0000 [r111128]  Kevin P. Fleming <kpfleming@digium.com>

	* /, UPGRADE.txt: Merged revisions 111127 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111127 | kpfleming | 2008-03-26 14:52:27 -0500 (Wed, 26 Mar
	  2008) | 18 lines Merged revisions 111126 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r111126 | kpfleming | 2008-03-26 14:51:24 -0500
	  (Wed, 26 Mar 2008) | 10 lines Merged revisions 111125 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r111125 | kpfleming | 2008-03-26 14:49:30 -0500 (Wed, 26 Mar
	  2008) | 2 lines update UPGRADE notes to document usage of the
	  script ........ ................ ................

2008-03-26 19:41 +0000 [r111124]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 111123 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111123 | mmichelson | 2008-03-26 14:39:23 -0500
	  (Wed, 26 Mar 2008) | 12 lines Merged revisions 111121 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111121 | mmichelson | 2008-03-26 14:37:36 -0500 (Wed, 26 Mar
	  2008) | 4 lines This code change is made just for clarification.
	  It does exactly the same thing as before. It just doesn't look as
	  wrong. ........ ................

2008-03-26 19:27 +0000 [r111072]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 111067 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111067 | mmichelson | 2008-03-26 14:26:23 -0500
	  (Wed, 26 Mar 2008) | 17 lines Merged revisions 111049 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111049 | mmichelson | 2008-03-26 14:22:16 -0500 (Wed, 26 Mar
	  2008) | 9 lines Add a lock to the vm_state structure and use the
	  lock around mail_open calls to prevent concurrent access of the
	  same mailstream. This, along with trunk's ability to configure
	  TCP timeouts for IMAP storage will help to prevent crashes and
	  hangs when using voicemail with IMAP storage. (closes issue
	  #10487) Reported by: ewilhelmsen ........ ................

2008-03-26 19:08 +0000 [r111026]  Kevin P. Fleming <kpfleming@digium.com>

	* codecs/ilbc, /, contrib/scripts/get_ilbc_source.sh (added):
	  Merged revisions 111025 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111025 | kpfleming | 2008-03-26 14:08:00 -0500 (Wed, 26 Mar
	  2008) | 18 lines Merged revisions 111024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r111024 | kpfleming | 2008-03-26 14:06:56 -0500
	  (Wed, 26 Mar 2008) | 10 lines Merged revisions 111019 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r111019 | kpfleming | 2008-03-26 13:58:37 -0500 (Wed, 26 Mar
	  2008) | 2 lines add a script to make getting the iLBC source code
	  simple for end users ........ ................ ................

2008-03-26 19:06 +0000 [r111018-111023]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 111021 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r111021 | file | 2008-03-26 16:05:42 -0300 (Wed, 26 Mar 2008) |
	  12 lines Merged revisions 111020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r111020 | file | 2008-03-26 16:04:35 -0300 (Wed, 26 Mar 2008) | 4
	  lines If we are requested to authenticate a reinvite make sure
	  that it contains T38 SDP if need be. (closes issue #11995)
	  Reported by: fall ........ ................

	* /, channels/chan_iax2.c: Merged revisions 111017 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r111017 | file | 2008-03-26 15:42:52 -0300 (Wed,
	  26 Mar 2008) | 12 lines Merged revisions 110628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110628 | file | 2008-03-25 11:37:35 -0300 (Tue, 25 Mar 2008) | 4
	  lines Add an option (transmit_silence) which transmits silence
	  during both Record() and DTMF generation. The reason this is an
	  option is that in order to transmit silence we have to setup a
	  translation path. This may not be needed/wanted in all cases.
	  (closes issue #10058) Reported by: tracinet ........
	  ................

2008-03-26 17:44 +0000 [r110964]  Kevin P. Fleming <kpfleming@digium.com>

	* /, UPGRADE.txt: Merged revisions 110963 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110963 | kpfleming | 2008-03-26 12:44:09 -0500 (Wed, 26 Mar
	  2008) | 10 lines Merged revisions 110962 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110962 | kpfleming | 2008-03-26 12:43:02 -0500 (Wed, 26 Mar
	  2008) | 2 lines add note that the user will need to enable
	  codec_ilbc to get it to build ........ ................

2008-03-26 17:35 +0000 [r110959]  Donny Kavanagh <donnyk@gmail.com>

	* /, doc/snmp.txt: Merged revisions 110911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110911 |
	  juggie | 2008-03-26 13:24:54 -0400 (Wed, 26 Mar 2008) | 8 lines
	  update documentation to reflect the changes in the way configure
	  detects net-snmp. (closes issue #12067) Reported by: juggie
	  Patches: 12067_snmp_doc.patch uploaded by juggie (license 24)
	  Tested by: juggie ........

2008-03-26 17:15 +0000 [r110882]  Kevin P. Fleming <kpfleming@digium.com>

	* codecs/ilbc/constants.h (removed), codecs/ilbc/iLBC_decode.h
	  (removed), codecs/ilbc/iCBSearch.c (removed), codecs/Makefile,
	  codecs/ilbc/filter.c (removed), codecs/ilbc/hpInput.c (removed),
	  codecs/ilbc/gainquant.c (removed), codecs/ilbc/hpOutput.c
	  (removed), codecs/ilbc/iCBSearch.h (removed),
	  codecs/ilbc/filter.h (removed), codecs/ilbc/hpInput.h (removed),
	  codecs/ilbc/gainquant.h (removed), codecs/ilbc/LPCencode.c
	  (removed), codecs/ilbc/hpOutput.h (removed),
	  codecs/ilbc/StateSearchW.c (removed), codecs/codec_ilbc.c,
	  codecs/ilbc/LPCencode.h (removed), codecs/ilbc/iCBConstruct.c
	  (removed), codecs/ilbc/StateSearchW.h (removed),
	  codecs/ilbc/syntFilter.c (removed), /, codecs/ilbc/iCBConstruct.h
	  (removed), codecs/ilbc/syntFilter.h (removed),
	  codecs/ilbc/packing.c (removed), codecs/ilbc/StateConstructW.c
	  (removed), codecs/ilbc/packing.h (removed),
	  codecs/ilbc/libilbc.vcproj (removed),
	  codecs/ilbc/StateConstructW.h (removed), codecs/ilbc/LPCdecode.c
	  (removed), codecs/ilbc/getCBvec.c (removed),
	  codecs/ilbc/enhancer.c (removed), codecs/ilbc/lsf.c (removed),
	  codecs/ilbc/iLBC_encode.c (removed), codecs/ilbc/getCBvec.h
	  (removed), codecs/ilbc/LPCdecode.h (removed),
	  codecs/ilbc/enhancer.h (removed), codecs/ilbc/FrameClassify.c
	  (removed), codecs/ilbc/iLBC_define.h (removed), codecs/ilbc/lsf.h
	  (removed), codecs/ilbc/iLBC_encode.h (removed),
	  codecs/ilbc/FrameClassify.h (removed), codecs/ilbc/helpfun.c
	  (removed), codecs/ilbc/doCPLC.c (removed),
	  codecs/ilbc/anaFilter.c (removed), codecs/ilbc/helpfun.h
	  (removed), codecs/ilbc/createCB.c (removed), codecs/ilbc/doCPLC.h
	  (removed), codecs/ilbc/anaFilter.h (removed), UPGRADE.txt,
	  codecs/ilbc/constants.c (removed), codecs/ilbc/iLBC_decode.c
	  (removed), codecs/ilbc/createCB.h (removed), CHANGES: Merged
	  revisions 110881 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110881 | kpfleming | 2008-03-26 10:10:28 -0700 (Wed, 26 Mar
	  2008) | 18 lines Merged revisions 110880 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r110880 | kpfleming | 2008-03-26 09:42:35 -0700
	  (Wed, 26 Mar 2008) | 10 lines Merged revisions 110869 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r110869 | kpfleming | 2008-03-26 08:53:46 -0700 (Wed, 26 Mar
	  2008) | 2 lines due to licensing restrictions, we cannot
	  distribute the source code for iLBC encoding and decoding... so
	  remove it, and add instructions on how the user can obtain it
	  themselves ........ ................ ................

2008-03-26 15:33 +0000 [r110866-110868]  Joshua Colp <jcolp@digium.com>

	* /: Merged revisions 110726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110726 |
	  jpeeler | 2008-03-25 17:02:57 -0300 (Tue, 25 Mar 2008) | 2 lines
	  This one line change makes an if inside a for loop (in
	  realtime_peer) check all the ast_variables the loop was intending
	  to test rather than just the first one. ........

2008-03-26 00:03 +0000 [r110832]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 110831 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110831 |
	  mmichelson | 2008-03-25 19:02:31 -0500 (Tue, 25 Mar 2008) | 6
	  lines This ensures that the manager interface is not enabled by
	  default. Prior to this change, it was possible to start Asterisk
	  with the manager interface enabled, then either comment out the
	  enabled option or make manager.conf unopenable and the manager
	  interface would still be enabled. ........

2008-03-25 22:52 +0000 [r110781]  Jason Parker <jparker@digium.com>

	* cdr/cdr_custom.c, /: Merged revisions 110780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110780 | qwell | 2008-03-25 17:51:55 -0500 (Tue, 25 Mar 2008) |
	  14 lines Merged revisions 110779 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110779 | qwell | 2008-03-25 17:51:17 -0500 (Tue, 25 Mar 2008) |
	  6 lines Make file access in cdr_custom similar to cdr_csv. Fixes
	  issue #12268. Patch borrowed from r82344 ........
	  ................

2008-03-25 22:11 +0000 [r110778]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_sip.c: This one line change makes an if inside a
	  for loop (in realtime_peer) check all the ast_variables the loop
	  was intending to test rather than just the first one.

2008-03-25 17:47 +0000 [r110690-110692]  Tilghman Lesher <tlesher@digium.com>

	* configs/extensions.conf.sample, /, configs/voicemail.conf.sample:
	  Merged revisions 110691 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110691 |
	  tilghman | 2008-03-25 12:46:34 -0500 (Tue, 25 Mar 2008) | 6 lines
	  Update sample configurations to make virtual hosting more
	  obvious. (closes issue #11969) Reported by: pprindeville Patches:
	  acme-virtualpbx.1.6.patch uploaded by pprindeville (license 347)
	  ........

	* configs/extensions.conf.sample, /: Merged revisions 110689 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r110689 | tilghman | 2008-03-25 12:40:28 -0500 (Tue, 25
	  Mar 2008) | 6 lines Update the sample configuration, to use Macro
	  less (since it's now deprecated). (closes issue #12293) Reported
	  by: pprindeville Patches: bugid-0012293.1.6.patch uploaded by
	  pprindeville (license 347) ........

2008-03-25 15:43 +0000 [r110637-110638]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Oops.

	* /, channels/chan_sip.c: Merged revisions 110636 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110636 | mmichelson | 2008-03-25 10:41:33 -0500 (Tue, 25 Mar
	  2008) | 15 lines Merged revisions 110635 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110635 | mmichelson | 2008-03-25 10:40:33 -0500 (Tue, 25 Mar
	  2008) | 7 lines When reverting a commit, I accidentally left in
	  this bit which was an experiment to see what would happen. It
	  passed the compile test, and I didn't notice I had left this
	  change in too. So this is a revert of a revert...sort of.
	  ........ ................

2008-03-25 15:39 +0000 [r110630-110634]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/options.h, main/asterisk.c, Makefile, /,
	  main/app.c: Merged revisions 110629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110629 | file | 2008-03-25 11:39:45 -0300 (Tue, 25 Mar 2008) |
	  12 lines Merged revisions 110628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110628 | file | 2008-03-25 11:37:35 -0300 (Tue, 25 Mar 2008) | 4
	  lines Add an option (transmit_silence) which transmits silence
	  during both Record() and DTMF generation. The reason this is an
	  option is that in order to transmit silence we have to setup a
	  translation path. This may not be needed/wanted in all cases.
	  (closes issue #10058) Reported by: tracinet ........
	  ................

2008-03-24 20:14 +0000 [r110620-110622]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 110619 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110619 | mmichelson | 2008-03-24 14:19:37 -0500 (Mon, 24 Mar
	  2008) | 23 lines Merged revisions 110618 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110618 | mmichelson | 2008-03-24 14:17:41 -0500 (Mon, 24 Mar
	  2008) | 15 lines This is a revert for revision 108288. The reason
	  is that that revision was not for an actual bug fix per se, and
	  so it really should not have been in 1.4 in the first place.
	  Plus, people who compile with DO_CRASH are more likely to
	  encounter a crash due to this change. While I think the usage of
	  DO_CRASH in ast_sched_del is a bit absurd, this sort of change is
	  beyond the scope of 1.4 and should be done instead in a developer
	  branch based on trunk so that all scheduler functions are fixed
	  at once. I also am reverting the change to trunk and 1.6 since
	  they also suffer from the DO_CRASH potential. (closes issue
	  #12272) Reported by: qq12345 ........ ................

2008-03-24 17:36 +0000 [r110616]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 110615 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r110615 | russell | 2008-03-24 12:36:04 -0500
	  (Mon, 24 Mar 2008) | 10 lines Merged revisions 110614 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110614 | russell | 2008-03-24 12:34:56 -0500 (Mon, 24 Mar 2008)
	  | 2 lines Turn a NOTICE into a DEBUG message. ........
	  ................

2008-03-24 15:29 +0000 [r110611]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 110610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110610 |
	  file | 2008-03-24 12:28:25 -0300 (Mon, 24 Mar 2008) | 6 lines
	  Only print out the set_address_from_contact host verbose message
	  if debugging is enabled on the dialog. (closes issue #12280)
	  Reported by: rjain Patches: chan_sip.c.diff uploaded by rjain
	  (license 226) ........

2008-03-21 21:52 +0000 [r110579]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 110578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110578 |
	  qwell | 2008-03-21 16:52:06 -0500 (Fri, 21 Mar 2008) | 1 line
	  Update to 1.4.11 core sounds. ........

2008-03-21 15:25 +0000 [r110501]  Russell Bryant <russell@digium.com>

	* /, configs/sip.conf.sample, CHANGES: Merged revisions 110499 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r110499 | russell | 2008-03-21 10:24:43 -0500 (Fri, 21
	  Mar 2008) | 3 lines Note that the TCP and TLS support is
	  currently considered experimental and is subject to change while
	  we work out the remaining issues. ........

2008-03-21 14:36 +0000 [r110476]  Jason Parker <jparker@digium.com>

	* /, codecs/gsm/Makefile: Merged revisions 110475 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110475 | qwell | 2008-03-21 09:36:17 -0500 (Fri, 21 Mar 2008) |
	  15 lines Merged revisions 110474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110474 | qwell | 2008-03-21 09:32:52 -0500 (Fri, 21 Mar 2008) |
	  7 lines Don't attempt to do optimizations of gsm on mips
	  platforms either. (closes issue #12270) Reported by: zandbelt
	  Patches: 026-gsm-mips.patch uploaded by zandbelt (license 33)
	  ........ ................

2008-03-20 23:14 +0000 [r110304-110397]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 110396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110396 | russell | 2008-03-20 18:14:13 -0500 (Thu, 20 Mar 2008)
	  | 17 lines Merged revisions 110395 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110395 | russell | 2008-03-20 18:13:56 -0500 (Thu, 20 Mar 2008)
	  | 9 lines Shorten the ast_waitfor() timeout from 500 ms to 50 ms
	  in the autoservice thread. This really should not make a
	  difference except in very rare cases. That case would be that all
	  of the channels in autoservice are not generating any frames. In
	  that case, this change reduces the potential amount of time that
	  a thread waits in ast_autoservice_stop() for the autoservice
	  thread to wrap back around to the beginning of its loop. (closes
	  issue #12266, reported by dimas) ........ ................

	* codecs/codec_g722.c, /: Merged revisions 110339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110339 |
	  russell | 2008-03-20 17:02:20 -0500 (Thu, 20 Mar 2008) | 3 lines
	  Use the correct buffer for g722tolin16_sample. This shouldn't
	  have caused any problems, but Qwell noticed the typo here.
	  ........

	* /, channels/chan_sip.c, channels/chan_iax2.c: Merged revisions
	  110337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110337 | russell | 2008-03-20 16:55:50 -0500 (Thu, 20 Mar 2008)
	  | 22 lines Merged revisions 110336 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r110336 | russell | 2008-03-20 16:54:58 -0500
	  (Thu, 20 Mar 2008) | 14 lines Merged revisions 110335 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r110335 | russell | 2008-03-20 16:53:27 -0500 (Thu, 20 Mar 2008)
	  | 6 lines Fix some very broken code that was introduced in 1.2.26
	  as a part of the security fix. The dnsmgr is not appropriate
	  here. The dnsmgr takes a pointer to an address structure that a
	  background thread continuously updates. However, in these cases,
	  a stack variable was passed. That means that the dnsmgr thread
	  would be continuously writing to bogus memory. ........
	  ................ ................

	* /, main/file.c: Merged revisions 110303 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110303 |
	  russell | 2008-03-20 15:08:26 -0500 (Thu, 20 Mar 2008) | 8 lines
	  Fix a bug when using zaptel timing for playing back files that
	  have a sample rate other than 8 kHz. The issue here is that
	  format modules give a "whennext" sample value, which is used to
	  calculate when to set a timer for to retrieve the next frame.
	  However, the zaptel timer operates on 8 kHz samples, so this must
	  be taken into account. (another part of issue #12164, reported by
	  milazzo and jsmith, patch by me) ........

2008-03-20 18:02 +0000 [r110273]  Mark Michelson <mmichelson@digium.com>

	* main/dial.c, /: Merged revisions 110272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r110272 |
	  mmichelson | 2008-03-20 13:01:36 -0500 (Thu, 20 Mar 2008) | 3
	  lines Add missing unlock ........

2008-03-20 17:45 +0000 [r110269-110271]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, res/res_musiconhold.c: Merged revisions 110268
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r110268 | russell | 2008-03-20 12:41:22 -0500 (Thu, 20
	  Mar 2008) | 27 lines Add some fixes that I made in regards to
	  wideband codec handling to get G.722 music on hold working for
	  me. (issue #12164, reported by milazzo and jsmith, patches by me)
	  res/res_musiconhold.c: - I moved a single line so that the sample
	  queue update happened before ast_write(). The reason that this
	  was a bug is that the G.722 frame originally says it has 320
	  samples in it (which is correct). However, when the frame is
	  written to a channel that uses RTP, main/rtp.c modifies the frame
	  to cut the number of samples in half before it sends it on the
	  wire. This is to account for the stupid incorrect G.722 spec that
	  makes it so we have to lie about the number of samples with RTP.
	  I should probably go and re-work the RTP code so it doesn't
	  modify the frame so that a bug like this won't happen in the
	  future. However, this change to MOH is harmless. main/channel.c:
	  - I made two fixes in regards to generator timing. Generators use
	  samples for timing. However, this code assumed 8 kHz samples. In
	  one case, it was a hard coded 160 samples, that is now written as
	  the sample rate / 50. The other place was dealing with timing a
	  generator based on frames coming from the other direction.
	  However, that would have only worked if the sample rates for the
	  formats in both directions were the same. The code now takes into
	  account that the sample rates may differ, and scales the
	  generator samples accordingly. ........

2008-03-19 23:00 +0000 [r110165]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 110164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110164 | russell | 2008-03-19 17:58:33 -0500 (Wed, 19 Mar 2008)
	  | 13 lines Merged revisions 110163 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110163 | russell | 2008-03-19 17:57:59 -0500 (Wed, 19 Mar 2008)
	  | 5 lines Fix a bug where when calls on the trunk side hang up
	  while on hold, the state is not properly reflected. (closes issue
	  #11990, reported by anakaoka, patched by me) ........
	  ................

2008-03-19 21:06 +0000 [r110088]  Jeff Peeler <jpeeler@digium.com>

	* /: marking rev 110087 from trunk as not applying

2008-03-19 20:37 +0000 [r110085]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 110084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110084 | mmichelson | 2008-03-19 15:34:13 -0500 (Wed, 19 Mar
	  2008) | 12 lines Merged revisions 110083 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110083 | mmichelson | 2008-03-19 15:33:03 -0500 (Wed, 19 Mar
	  2008) | 4 lines Add a missing unlock in the case that memory
	  allocation fails in app_chanspy. Thanks to Russell for confirming
	  that this was an issue. ........ ................

2008-03-19 19:14 +0000 [r110037]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 110036 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r110036 | file | 2008-03-19 16:13:39 -0300 (Wed,
	  19 Mar 2008) | 12 lines Merged revisions 110035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110035 | file | 2008-03-19 16:11:33 -0300 (Wed, 19 Mar 2008) | 4
	  lines Add sanity checking for position resuming. We *have* to
	  make sure that the position does not exceed the total number of
	  files present, and we have to make sure that the position's
	  filename is the same as previous. These values can change if a
	  music class is reloaded and give unpredictable behavior. (closes
	  issue #11663) Reported by: junky ........ ................

2008-03-19 19:00 +0000 [r110024-110032]  Russell Bryant <russell@digium.com>

	* Makefile, build_tools/cflags.xml, build_tools/cflags-devmode.xml
	  (added), /: Merged revisions 109974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109974 | qwell | 2008-03-19 12:15:14 -0500 (Wed, 19 Mar 2008) |
	  13 lines Merged revisions 109973 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109973 | qwell | 2008-03-19 12:12:52 -0500 (Wed, 19 Mar 2008) |
	  5 lines People report bugs about Asterisk crashing with DO_CRASH
	  enabled was getting a little silly... Now we only show certain
	  cflags when you run configure with --enable-dev-mode
	  (corresponding menuselect change to follow) ........
	  ................

2008-03-19 18:26 +0000 [r109971-110021]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /: Merged revisions 110020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r110020 | file | 2008-03-19 15:25:33 -0300 (Wed, 19 Mar 2008) |
	  14 lines Merged revisions 110019 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r110019 | file | 2008-03-19 15:20:28 -0300 (Wed, 19 Mar 2008) | 6
	  lines Make sure that the mark bit does not incorrectly cause
	  video frame timestamps to be calculated as if they are audio
	  frames. (closes issue #11429) Reported by: sperreault Patches:
	  11429-frametype.diff uploaded by qwell (license 4) ........
	  ................

2008-03-19 16:46 +0000 [r109969]  Steve Murphy <murf@digium.com>

	* main/config.c, /: Merged revisions 109942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109942 | murf | 2008-03-19 10:24:51 -0600 (Wed, 19 Mar 2008) |
	  80 lines Merged revisions 109908 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109908 | murf | 2008-03-19 09:41:13 -0600 (Wed, 19 Mar 2008) |
	  72 lines (closes issue #11442) Reported by: tzafrir Patches:
	  11442.patch uploaded by murf (license 17) Tested by: murf I
	  didn't give tzafrir very much time to test this, but if he does
	  still have remaining issues, he is welcome to re-open this bug,
	  and we'll do what is called for. I reproduced the problem, and
	  tested the fix, so I hope I am not jumping by just going ahead
	  and committing the fix. The problem was with what file_save does
	  with templates; firstly, it tended to print out multiple options:
	  [my_category](!)(templateref) instead of
	  [my_category](!,templateref) which is fixed by this patch.
	  Nextly, the code to suppress output of duplicate declarations
	  that would occur because the reader copies inherited declarations
	  down the hierarchy, was not working. Thus: [master-template](!)
	  mastervar = bar [template](!,master-template) tvar = value
	  [cat](template) catvar = val would be rewritten as: ;! ;!
	  Automatically generated configuration file ;! Filename:
	  experiment.conf (/etc/asterisk/experiment.conf) ;! Generator:
	  Manager ;! Creation Date: Tue Mar 18 23:17:46 2008 ;!
	  [master-template](!) mastervar = bar
	  [template](!,master-template) mastervar = bar tvar = value
	  [cat](template) mastervar = bar tvar = value catvar = val This
	  has been fixed. Since the config reader 'explodes' inherited vars
	  into the category, users may, in certain circumstances, see
	  output different from what they originally entered, but it should
	  be both correct and equivalent. ........ ................

2008-03-19 04:06 +0000 [r109834-109840]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 109839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109839 | russell | 2008-03-18 23:06:31 -0500 (Tue, 18 Mar 2008)
	  | 10 lines Merged revisions 109838 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109838 | russell | 2008-03-18 23:06:05 -0500 (Tue, 18 Mar 2008)
	  | 2 lines Tweak spacing in a recent change because I'm very
	  picky. ........ ................

	* apps/app_chanspy.c, /: Merged revisions 109764 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109764 | russell | 2008-03-18 17:36:02 -0500 (Tue, 18 Mar 2008)
	  | 11 lines Merged revisions 109763 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109763 | russell | 2008-03-18 17:34:42 -0500 (Tue, 18 Mar 2008)
	  | 3 lines Fix one place where the chanspy datastore isn't removed
	  from a channel. (issue #12243, reported by atis, patch by me)
	  ........ ................

2008-03-18 23:23 +0000 [r109779]  Tilghman Lesher <tlesher@digium.com>

	* /, configs/res_ldap.conf.sample, res/res_config_ldap.c: Merged
	  revisions 109775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109775 |
	  tilghman | 2008-03-18 18:22:25 -0500 (Tue, 18 Mar 2008) | 3 lines
	  Change back to using ldap_initialize() and let the user specify a
	  URL directly, instead of trying to piece it together, badly.
	  ........

2008-03-18 21:03 +0000 [r109716]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 109714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109714 | mmichelson | 2008-03-18 15:59:02 -0500 (Tue, 18 Mar
	  2008) | 20 lines Merged revisions 109713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109713 | mmichelson | 2008-03-18 15:52:15 -0500 (Tue, 18 Mar
	  2008) | 12 lines This patch makes it so that all queue member
	  status changes are handled through device state code. This
	  removes several problems people were seeing where their queue
	  members would get into an "unknown" state. Huge props go to atis
	  on this one since he was the one who found the code section that
	  was causing the problem and proposed the solution. I just wrote
	  what he suggested :) (closes issue #12127) Reported by: atis
	  Patches: 12127v3.patch uploaded by putnopvut (license 60) Tested
	  by: atis, jvandal ........ ................

2008-03-18 20:14 +0000 [r109684]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 109683 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109683 | tilghman | 2008-03-18 15:13:40 -0500 (Tue, 18 Mar 2008)
	  | 4 lines Set protocol version, port number correctly. (closes
	  issue #12211, closes issue #12209) Reported by: sylvain ........

2008-03-18 19:24 +0000 [r109654]  Jason Parker <jparker@digium.com>

	* /, codecs/log2comp.h: Merged revisions 109651 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109651 | qwell | 2008-03-18 14:24:15 -0500 (Tue, 18 Mar 2008) |
	  15 lines Merged revisions 109648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109648 | qwell | 2008-03-18 14:23:44 -0500 (Tue, 18 Mar 2008) |
	  7 lines Allow codecs that use log2comp (g726) to compile
	  correctly on x86 with gcc4 optimizations. (closes issue #12253)
	  Reported by: fossil Patches: log2comp.patch uploaded by fossil
	  (license 140) ........ ................

2008-03-18 19:00 +0000 [r109546-109622]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 109576 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r109576 | mmichelson | 2008-03-18 12:59:18 -0500
	  (Tue, 18 Mar 2008) | 14 lines Merged revisions 109575 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109575 | mmichelson | 2008-03-18 12:58:11 -0500 (Tue, 18 Mar
	  2008) | 6 lines Make sure an agent doesn't try to send dtmf to a
	  NULL channel closes issue #12242 Reported by Yourname ........
	  ................

	* include/asterisk/astmm.h, /: Merged revisions 109545 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109545 | mmichelson | 2008-03-18 12:00:53 -0500 (Tue, 18 Mar
	  2008) | 3 lines Add format attribute to printf-style functions in
	  astmm.h ........

2008-03-18  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta6 released.

2008-03-18 17:01 +0000 [r109546]  Mark Michelson <mmichelson@digium.com>

	* include/asterisk/astmm.h, /: Merged revisions 109545 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109545 | mmichelson | 2008-03-18 12:00:53 -0500 (Tue, 18 Mar
	  2008) | 3 lines Add format attribute to printf-style functions in
	  astmm.h ........

2008-03-18 16:26 +0000 [r109487]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/misdn/isdn_lib.c, channels/misdn/isdn_lib.h,
	  channels/chan_misdn.c, /: Merged revisions 109475 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109475 | kpfleming | 2008-03-18 11:23:05 -0500 (Tue, 18 Mar
	  2008) | 2 lines fix up various warnings found via the addition of
	  format string checking... some of these were really, really bad
	  code ........

2008-03-18 15:58 +0000 [r109454-109459]  Russell Bryant <russell@digium.com>

	* Makefile, channels/chan_misdn.c, include/asterisk/strings.h,
	  res/res_indications.c, utils/extconf.c, main/asterisk.c,
	  apps/app_voicemail.c, utils/check_expr.c,
	  cdr/cdr_sqlite3_custom.c, apps/app_meetme.c, /,
	  res/res_phoneprov.c, main/utils.c, channels/chan_iax2.c,
	  utils/frame.c, main/cli.c, funcs/func_enum.c, main/manager.c,
	  include/asterisk/astobj.h, res/res_agi.c, main/features.c,
	  apps/app_minivm.c, res/res_realtime.c, res/res_config_ldap.c,
	  include/asterisk/utils.h, channels/chan_sip.c,
	  apps/app_festival.c, main/translate.c, main/jitterbuf.c,
	  utils/astman.c, include/jitterbuf.h, apps/app_queue.c: Merged
	  revisions 109447 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109447 |
	  twilson | 2008-03-18 10:43:34 -0500 (Tue, 18 Mar 2008) | 3 lines
	  Go through and fix a bunch of places where character strings were
	  being interpreted as format strings. Most of these changes are
	  solely to make compiling with -Wsecurity and -Wformat=2 happy,
	  and were not actual problems, per se. I also added format
	  attributes to any printf wrapper functions I found that didn't
	  have them. -Wsecurity and -Wmissing-format-attribute added to
	  --enable-dev-mode. ........

	* configs/sip_notify.conf.sample, /: Merged revisions 109111 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r109111 | qwell | 2008-03-17 11:37:31 -0500 (Mon, 17 Mar
	  2008) | 10 lines Add sample events for aastra phones.
	  aastra-check-cfg is the same as the other check-cfg entries, and
	  aastra-xml is to load a pre-configured xml script. (closes issue
	  #12229) Reported by: gowen72 Patches: aastra.patch uploaded by
	  gowen72 (license 432) ........

2008-03-18 15:50 +0000 [r109453]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, acinclude.m4:
	  Merged revisions 109451 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109451 |
	  kpfleming | 2008-03-18 10:50:29 -0500 (Tue, 18 Mar 2008) | 2
	  lines ensure that dependencies on AST_C_DEFINE_CHECK symbols work
	  properly ........

2008-03-18 15:50 +0000 [r109448-109452]  Russell Bryant <russell@digium.com>

	* main/dial.c, /: Merged revisions 108962 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108962 | mvanbaak | 2008-03-16 16:50:58 -0500 (Sun, 16 Mar 2008)
	  | 15 lines Merged revisions 108961 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108961 | mvanbaak | 2008-03-16 22:47:10 +0100 (Sun, 16 Mar 2008)
	  | 7 lines add missing break to case AST_CONTROL_SRCUPDATE (closes
	  issue #12228) Reported by: andrew Patches: SRC.patch uploaded by
	  andrew (license 240) ........ ................

2008-03-18 15:16 +0000 [r109398]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, /, main/logger.c: Merged revisions 109396 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r109396 | file | 2008-03-18 12:13:07 -0300 (Tue, 18 Mar
	  2008) | 3 lines Make sure values are interpreted as character
	  strings and not format strings. (AST-2008-004) ........

2008-03-18 15:14 +0000 [r109397]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ael-ntest23 (added),
	  pbx/ael/ael-test/ael-ntest23/t1/a.ael,
	  pbx/ael/ael-test/ael-ntest23/t1/b.ael,
	  pbx/ael/ael-test/ael-ntest23/t1/c.ael,
	  pbx/ael/ael-test/ael-ntest23/t2/d.ael,
	  pbx/ael/ael-test/ael-ntest23/t2/e.ael,
	  pbx/ael/ael-test/ael-ntest23/t2/f.ael, res/ael/ael_lex.c,
	  pbx/ael/ael-test/ref.ael-ntest23 (added),
	  pbx/ael/ael-test/ael-ntest23/t3/g.ael,
	  pbx/ael/ael-test/ael-ntest23/t3/h.ael,
	  pbx/ael/ael-test/ael-ntest23/t3/i.ael, res/ael/ael.flex,
	  pbx/ael/ael-test/ael-ntest23/t3/j.ael,
	  pbx/ael/ael-test/ael-ntest23/qq.ael,
	  pbx/ael/ael-test/ael-ntest23/t1, pbx/ael/ael-test/ael-ntest23/t2,
	  pbx/ael/ael-test/ael-ntest23/t3, /,
	  pbx/ael/ael-test/ael-ntest23/extensions.ael: Merged revisions
	  109357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109357 | murf | 2008-03-18 08:09:50 -0600 (Tue, 18 Mar 2008) |
	  25 lines Merged revisions 109309 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109309 | murf | 2008-03-18 00:37:15 -0600 (Tue, 18 Mar 2008) |
	  17 lines (closes issue #11903) Reported by: atis Many thanks to
	  atis for spotting this problem and reporting it. The fix was to
	  straighten out how items are placed on and removed from the file
	  stack. Regressions as well as the provided test case helped to
	  straighten out all code paths. valgrind was used to make sure all
	  memory allocated was freed. Sorry for not solving this earlier. I
	  got distracted. Added the ntest23 regression test, which is
	  mainly a copy of ntest22, but with a few juicy errors thrown in,
	  to replicate the kind of error that atis spotted. ........
	  ................

2008-03-18 15:11 +0000 [r109395]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 109389 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109389 |
	  qwell | 2008-03-18 10:07:04 -0500 (Tue, 18 Mar 2008) | 3 lines Do
	  not return with a successful authentication if the From header
	  ends up empty. (AST-2008-003) ........

2008-03-18 15:09 +0000 [r109392]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c, /, channels/chan_sip.c: Merged revisions 109390 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r109390 | file | 2008-03-18 12:08:09 -0300 (Tue,
	  18 Mar 2008) | 11 lines Merged revisions 109386 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109386 | file | 2008-03-18 11:58:39 -0300 (Tue, 18 Mar 2008) | 3
	  lines Put a maximum limit on the number of payloads accepted, and
	  also make sure a given payload does not exceed our maximum value.
	  (AST-2008-002) ........ ................

2008-03-18 00:40 +0000 [r109283]  Sean Bright <sean.bright@gmail.com>

	* /, configure, configure.ac: Merged revisions 109282 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109282 | seanbright | 2008-03-17 20:28:39 -0400 (Mon, 17 Mar
	  2008) | 1 line Fix a typo ........

2008-03-17 22:24 +0000 [r109254]  Terry Wilson <twilson@digium.com>

	* build_tools/cflags.xml, /, build_tools/menuselect-deps.in,
	  configure, include/asterisk/autoconfig.h.in, main/Makefile,
	  configure.ac, main/http.c, main/minimime (removed),
	  build_tools/make_buildopts_h, makeopts.in: Merged revisions
	  109229 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109229 |
	  twilson | 2008-03-17 17:10:06 -0500 (Mon, 17 Mar 2008) | 5 lines
	  Replace minimime with superior GMime library so that the entire
	  contents of an http post are not read into memory. This does
	  introduce a dependency on the GMime library for handling HTTP
	  POSTs, but it is available in most distros. If the library is
	  present, then the compile flag for ENABLE_UPLOADS is enabled by
	  default in menuselect. ........

2008-03-17 22:07 +0000 [r109228]  Mark Michelson <mmichelson@digium.com>

	* /, main/utils.c: Merged revisions 109227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109227 | mmichelson | 2008-03-17 17:06:44 -0500 (Mon, 17 Mar
	  2008) | 20 lines Merged revisions 109226 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109226 | mmichelson | 2008-03-17 17:05:49 -0500 (Mon, 17 Mar
	  2008) | 12 lines Fix a logic flaw in the code that stores lock
	  info which is displayed via the "core show locks" command. The
	  idea behind this section of code was to remove the previous lock
	  from the list if it was a trylock that had failed. Unfortunately,
	  instead of checking the status of the previous lock, we were
	  referencing the index immediately following the previous lock in
	  the lock_info->locks array. The result of this problem, under the
	  right circumstances, was that the lock which we currently in the
	  process of attempting to acquire could "overwrite" the previous
	  lock which was acquired. While this does not in any way affect
	  typical operation, it *could* lead to misleading "core show
	  locks" output. ........ ................

2008-03-17 18:11 +0000 [r109175]  Michiel van Baak <michiel@vanbaak.info>

	* /, channels/chan_skinny.c: Merged revisions 109168 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r109168 | mvanbaak | 2008-03-17 18:43:46 +0100 (Mon, 17 Mar 2008)
	  | 11 lines Update the directory of placed calls on skinny phones
	  when dialing a channel that does not provide progress (analog ZAP
	  lines) The phone does handle the double update on calls to
	  channels that do provide progress and wont insert duplicate items
	  (closes issue #12239) Reported by: DEA Patches:
	  chan_skinny-call-log.txt uploaded by DEA (license 3) ........

2008-03-17 17:42 +0000 [r109167]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, configure, configure.ac, acinclude.m4: Merged
	  revisions 109166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r109166 |
	  kpfleming | 2008-03-17 12:31:46 -0500 (Mon, 17 Mar 2008) | 3
	  lines don't define Zaptel features as libraries, they aren't, and
	  we don't want '--with-zaptel-<foo>' configure options for them
	  also some minor cleanups ........

2008-03-17 16:47 +0000 [r109109-109114]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 109108 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109108 | file | 2008-03-17 13:26:36 -0300 (Mon, 17 Mar 2008) |
	  12 lines Merged revisions 109107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109107 | file | 2008-03-17 13:24:29 -0300 (Mon, 17 Mar 2008) | 4
	  lines 200 OKs in response to a reinvite need to be sent reliably.
	  If the remote side does not receive one the dialog will be torn
	  down. (closes issue #12208) Reported by: atrash ........
	  ................

2008-03-17 14:21 +0000 [r109027]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c, /: Merged revisions 109024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r109024 | mmichelson | 2008-03-17 09:21:14 -0500 (Mon, 17 Mar
	  2008) | 14 lines Merged revisions 109012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r109012 | mmichelson | 2008-03-17 09:18:26 -0500 (Mon, 17 Mar
	  2008) | 6 lines Make sure that we release the lock on the spyee
	  channel if the spyee or spy has hung up (closes issue #12232)
	  Reported by: atis ........ ................

2008-03-16 17:56 +0000 [r108928-108930]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 108927 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r108927 | russell | 2008-03-16 12:53:46 -0500 (Sun, 16 Mar 2008)
	  | 7 lines Fix polling for mailbox changes in mailboxes that are
	  not in the default vm context. (closes issue #12223) Reported by:
	  DEA Patches: vm-polled-imap.txt uploaded by DEA (license 3)
	  ........

2008-03-15 16:21 +0000 [r108741-108895]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 108799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r108799 |
	  russell | 2008-03-14 15:14:06 -0500 (Fri, 14 Mar 2008) | 8 lines
	  Make sure configure is run before menuselect on a clean checkout
	  (closes issue #12197) Reported by: juggie Patches: 12197.diff
	  uploaded by juggie (license 24) ........

	* channels/chan_oss.c, /: Merged revisions 108797 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108797 | russell | 2008-03-14 15:09:37 -0500 (Fri, 14 Mar 2008)
	  | 13 lines Merged revisions 108796 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108796 | russell | 2008-03-14 15:09:22 -0500 (Fri, 14 Mar 2008)
	  | 5 lines Fix a channel name issue. chan_oss registers the
	  "Console" channel type, but it created channels with an "OSS"
	  prefix. (closes issue #12194, reported by davidw, patched by me)
	  ........ ................

	* contrib/init.d/rc.suse.asterisk, /: Merged revisions 108793 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r108793 | russell | 2008-03-14 15:04:56 -0500
	  (Fri, 14 Mar 2008) | 12 lines Merged revisions 108792 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108792 | russell | 2008-03-14 15:04:35 -0500 (Fri, 14 Mar 2008)
	  | 4 lines Update the SuSE init script to start networking before
	  asterisk, as well. (closes issue #12200, reported by and change
	  suggested by reinerotto) ........ ................

	* /, configure, acinclude.m4: Merged revisions 108740 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r108740 | russell | 2008-03-14 12:05:11 -0500 (Fri, 14 Mar 2008)
	  | 5 lines Do a link test in AST_EXT_TOOL_CHECK() to ensure we
	  have all the required libs reported by the tool. (closes issue
	  #12067, reported by Juggie, patched by me) ........

2008-03-14 16:54 +0000 [r108739]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 108738 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108738 | mmichelson | 2008-03-14 11:52:51 -0500 (Fri, 14 Mar
	  2008) | 41 lines Merged revisions 108737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108737 | mmichelson | 2008-03-14 11:44:08 -0500 (Fri, 14 Mar
	  2008) | 33 lines Fix a race condition in the SIP packet scheduler
	  which could cause a crash. chan_sip uses the scheduler API in
	  order to schedule retransmission of reliable packets (such as
	  INVITES). If a retransmission of a packet is occurring, then the
	  packet is removed from the scheduler and retrans_pkt is called.
	  Meanwhile, if a response is received from the packet as
	  previously transmitted, then when we ACK the response, we will
	  remove the packet from the scheduler and free the packet. The
	  problem is that both the ACK function and retrans_pkt attempt to
	  acquire the same lock at the beginning of the function call. This
	  means that if the ACK function acquires the lock first, then it
	  will free the packet which retrans_pkt is about to read from and
	  write to. The result is a crash. The solution: 1. If the ACK
	  function fails to remove the packet from the scheduler and the
	  retransmit id of the packet is not -1 (meaning that we have not
	  reached the maximum number of retransmissions) then release the
	  lock and yield so that retrans_pkt may acquire the lock and
	  operate. 2. Make absolutely certain that the ACK function does
	  not recursively lock the lock in question. If it does, then
	  releasing the lock will do no good, since retrans_pkt will still
	  be unable to acquire the lock. (closes issue #12098) Reported by:
	  wegbert (closes issue #12089) Reported by: PTorres Patches:
	  12098-putnopvutv3.patch uploaded by putnopvut (license 60) Tested
	  by: jvandal ........ ................

2008-03-14 14:33 +0000 [r108684]  Jason Parker <jparker@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 108683 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r108683 | qwell | 2008-03-14 09:32:55 -0500
	  (Fri, 14 Mar 2008) | 12 lines Merged revisions 108682 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108682 | qwell | 2008-03-14 09:29:05 -0500 (Fri, 14 Mar 2008) |
	  4 lines Fix a potential segfault if chan (or chan->music_state)
	  is NULL. Closes issue #12210, credit to edantie for pointing this
	  out. ........ ................

2008-03-13 21:48 +0000 [r108587]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 108586 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r108586 |
	  mmichelson | 2008-03-13 16:47:55 -0500 (Thu, 13 Mar 2008) | 3
	  lines Make this compile ........

2008-03-13 21:41 +0000 [r108585]  Russell Bryant <russell@digium.com>

	* apps/app_chanspy.c, main/channel.c, /,
	  include/asterisk/channel.h: Merged revisions 108584 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r108584 | russell | 2008-03-13 16:40:43 -0500
	  (Thu, 13 Mar 2008) | 19 lines Merged revisions 108583 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108583 | russell | 2008-03-13 16:38:16 -0500 (Thu, 13 Mar 2008)
	  | 11 lines Fix another issue that was causing crashes in chanspy.
	  This introduces a new datastore callback, called chan_fixup().
	  The concept is exactly like the fixup callback that is used in
	  the channel technology interface. This callback gets called when
	  the owning channel changes due to a masquerade. Before this was
	  introduced, if a masquerade happened on a channel being spyed on,
	  the channel pointer in the datastore became invalid. (closes
	  issue #12187) (reported by, and lots of testing from atis) (props
	  to file for the help with ideas) ........ ................

2008-03-13 21:31 +0000 [r108582]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 108529 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r108529 |
	  mmichelson | 2008-03-13 15:59:00 -0500 (Thu, 13 Mar 2008) | 11
	  lines Fixing a potential buffer overflow in the manager command
	  ModuleCheck. Though this overflow is exploitable remotely, we are
	  NOT issuing a security advisory for this since in order to
	  exploit the overflow, the attacker would have to establish an
	  authenticated manager session AND have the system privilege. By
	  gaining this privilege, the attacker already has more powerful
	  weapons at his disposal than overflowing a buffer with a
	  malformed manager header, so the vulnerability in this case
	  really lies with the authentication method that allowed the
	  attacker to gain the system privilege in the first place.
	  ........

2008-03-13 21:07 +0000 [r108347-108532]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 108531 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108531 | russell | 2008-03-13 16:06:52 -0500 (Thu, 13 Mar 2008)
	  | 18 lines Merged revisions 108530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108530 | russell | 2008-03-13 16:06:33 -0500 (Thu, 13 Mar 2008)
	  | 10 lines Make a tweak that gets the LEDs on polycom phones to
	  blink when an extension that has been subscribed to goes on hold.
	  Otherwise, they just stay on like it does when an extension is in
	  use. (closes issue #11263) Reported by: russell Patches:
	  notify_hold.rev1.txt uploaded by russell (license 2) Tested by:
	  russell ........ ................

	* apps/app_voicemail.c, /: Merged revisions 108508 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r108508 | russell | 2008-03-13 15:35:28 -0500 (Thu, 13 Mar 2008)
	  | 2 lines Fix a place where configuration values could cause an
	  overflow of a buffer. ........

	* /, apps/app_followme.c: Merged revisions 108472 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108472 | russell | 2008-03-13 15:26:59 -0500 (Thu, 13 Mar 2008)
	  | 12 lines Merged revisions 108469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108469 | russell | 2008-03-13 15:26:28 -0500 (Thu, 13 Mar 2008)
	  | 4 lines Fix a couple uses of sprintf. The second one could
	  actually cause an overflow of a stack buffer. It's not a security
	  issue though, it only depends on your configuration. ........
	  ................

	* /, main/features.c: Merged revisions 107465 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107465 |
	  file | 2008-03-11 10:05:17 -0500 (Tue, 11 Mar 2008) | 4 lines
	  Clarify comment about masquerading and playback of the parking
	  slot. (closes issue #12180) Reported by: davidw ........

	* /, channels/chan_sip.c: Merged revisions 107157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107157 |
	  file | 2008-03-10 15:00:21 -0500 (Mon, 10 Mar 2008) | 4 lines If
	  we receive a 488 on a T38 request reinvite back to audio. As well
	  reinvite across a bridge back to audio if one side doesn't
	  negotiate to T38. (closes issue #8677) Reported by: alex-911
	  ........

	* /: Merged revisions 106892 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106892 |
	  mattf | 2008-03-07 16:36:49 -0600 (Fri, 07 Mar 2008) | 1 line
	  Make sure we don't start a call when we have already done so in
	  response to a COT message ........

	* /, main/editline/Makefile.in: Merged revisions 106843 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r106843 | qwell | 2008-03-07 16:15:20 -0600
	  (Fri, 07 Mar 2008) | 13 lines Merged revisions 106842 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106842 | qwell | 2008-03-07 16:14:45 -0600 (Fri, 07 Mar 2008) |
	  5 lines Fix hardcoded grep in editline, were GNU grep is
	  required. (closes issue #12124) Reported by: dmartin ........
	  ................

	* include/asterisk/http.h, main/tcptls.c, main/manager.c, /,
	  channels/chan_sip.c, res/res_phoneprov.c, main/http.c,
	  include/asterisk/tcptls.h: Merged revisions 108295 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r108295 | russell | 2008-03-12 17:13:18 -0500 (Wed, 12 Mar 2008)
	  | 3 lines Rename ast_tcptls_server_instance to session_instance,
	  since this pertains to server and client usage. ........

	* /, main/http.c: Merged revisions 108346 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r108346 |
	  russell | 2008-03-12 17:49:26 -0500 (Wed, 12 Mar 2008) | 4 lines
	  Make the default prefix empty, like it was in Asterisk 1.4.
	  (closes issue #12198, reported by bkruse, patched by me) ........

2008-03-12 22:10 +0000 [r108246-108294]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 108293 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r108293 |
	  mmichelson | 2008-03-12 17:09:52 -0500 (Wed, 12 Mar 2008) | 3
	  lines Let's get this to compile ........

	* /, channels/chan_sip.c: Merged revisions 108289 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108289 | mmichelson | 2008-03-12 16:57:41 -0500 (Wed, 12 Mar
	  2008) | 22 lines Merged revisions 108288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108288 | mmichelson | 2008-03-12 16:53:46 -0500 (Wed, 12 Mar
	  2008) | 14 lines Change AST_SCHED_DEL use to ast_sched_del for
	  autocongestion in chan_sip. The scheduler callback will always
	  return 0. This means that this id is never rescheduled, so it
	  makes no sense to loop trying to delete the id from the scheduler
	  queue. If we fail to remove the item from the queue once, it will
	  fail every single time. (Yes I realize that in this case, the
	  macro would exit early because the id is set to -1 in the
	  callback, but it still makes no sense to use that macro in favor
	  of calling ast_sched_del once and being done with it) This is the
	  first of potentially several such fixes. ........
	  ................

	* /, include/asterisk/sched.h: Merged revisions 108238 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r108238 | mmichelson | 2008-03-12 16:19:30 -0500
	  (Wed, 12 Mar 2008) | 20 lines Merged revisions 108227 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108227 | mmichelson | 2008-03-12 16:16:28 -0500 (Wed, 12 Mar
	  2008) | 12 lines Added a large comment before the AST_SCHED_DEL
	  macro to explain its purpose as well as when it is appropriate
	  and when it is not appropriate to use it. I also removed the part
	  of the debug message that mentions that this is probably a bug
	  because there are some perfectly legitimate places where
	  ast_sched_del may fail to delete an entry (e.g. when the
	  scheduler callback manually reschedules with a new id instead of
	  returning non-zero to tell the scheduler to reschedule with the
	  same idea). I also raised the debug level of the debug message in
	  AST_SCHED_DEL since it seems like it could come up quite
	  frequently since the macro is probably being used in several
	  places where it shouldn't be. Also removed the redundant line,
	  file, and function information since that is provided by ast_log.
	  ........ ................

2008-03-12 20:29 +0000 [r108205]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 108191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108191 | kpfleming | 2008-03-12 15:27:01 -0500 (Wed, 12 Mar
	  2008) | 14 lines Merged revisions 108086 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108086 | kpfleming | 2008-03-12 14:16:07 -0500 (Wed, 12 Mar
	  2008) | 6 lines if we receive an INVITE with a Content-Length
	  that is not a valid number, or is zero, then don't process the
	  rest of the message body looking for an SDP closes issue #11475
	  Reported by: andrebarbosa ........ ................

2008-03-12 19:59 +0000 [r108138]  Russell Bryant <russell@digium.com>

	* apps/app_chanspy.c, main/channel.c, /: Merged revisions 108137
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r108137 | russell | 2008-03-12 14:59:05 -0500
	  (Wed, 12 Mar 2008) | 48 lines Merged revisions 108135 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108135 | russell | 2008-03-12 14:57:42 -0500 (Wed, 12 Mar 2008)
	  | 40 lines (closes issue #12187, reported by atis, fixed by me
	  after some brainstorming on the issue with mmichelson) - Update
	  copyright info on app_chanspy. - Fix a race condition that caused
	  app_chanspy to crash. The issue was that the chanspy datastore
	  magic that was used to ensure that spyee channels did not
	  disappear out from under the code did not completely solve the
	  problem. It was actually possible for chanspy to acquire a
	  channel reference out of its datastore to a channel that was in
	  the middle of being destroyed. That was because datastore
	  destruction in ast_channel_free() was done near the end. So, this
	  left the code in app_chanspy accessing a channel that was
	  partially, or completely invalid because it was in the process of
	  being free'd by another thread. The following sort of shows the
	  code path where the race occurred:
	  =============================================================================
	  Thread 1 (PBX thread for spyee chan) || Thread 2 (chanspy)
	  --------------------------------------||-------------------------------------
	  ast_channel_free() || - remove channel from channel list || -
	  lock/unlock the channel to ensure || that no references retrieved
	  from || the channel list exist. ||
	  --------------------------------------||-------------------------------------
	  || channel_spy() - destroy some channel data || - Lock chanspy
	  datastore || - Retrieve reference to channel || - lock channel ||
	  - Unlock chanspy datastore
	  --------------------------------------||-------------------------------------
	  - destroy channel datastores || - call chanspy datastore d'tor ||
	  which NULL's out the ds' || - Operate on the channel ...
	  reference to the channel || || - free the channel || || || -
	  unlock the channel
	  --------------------------------------||-------------------------------------
	  =============================================================================
	  ........ ................

2008-03-12 18:31 +0000 [r108085]  Joshua Colp <jcolp@digium.com>

	* apps/app_mixmonitor.c, /, include/asterisk/audiohook.h,
	  main/audiohook.c: Merged revisions 108084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108084 | file | 2008-03-12 15:29:33 -0300 (Wed, 12 Mar 2008) |
	  12 lines Merged revisions 108083 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108083 | file | 2008-03-12 15:26:37 -0300 (Wed, 12 Mar 2008) | 4
	  lines Add a trigger mode that triggers on both read and write.
	  The actual function that returns the combined audio frame though
	  will wait until both sides have fed in audio, or until one side
	  stops (such as the case when you call Wait). (closes issue
	  #11945) Reported by: xheliox ........ ................

2008-03-12 17:03 +0000 [r108033]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 108032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r108032 | russell | 2008-03-12 12:02:57 -0500 (Wed, 12 Mar 2008)
	  | 12 lines Merged revisions 108031 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r108031 | russell | 2008-03-12 11:59:07 -0500 (Wed, 12 Mar 2008)
	  | 4 lines Destroy the channel lock after the channel datastores.
	  (inspired by issue #12187) ........ ................

2008-03-12 07:44 +0000 [r107879-107999]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 107998 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107998 |
	  tilghman | 2008-03-12 02:43:03 -0500 (Wed, 12 Mar 2008) | 7 lines
	  Deadlock fixes (closes issue #12143) Reported by: kactus Patches:
	  20080312__bug12143__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: kactus ........

	* main/loader.c, /, apps/app_dumpchan.c, apps/app_zapras.c: Merged
	  revisions 107960 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107960 |
	  tilghman | 2008-03-12 00:46:39 -0500 (Wed, 12 Mar 2008) | 4 lines
	  Revert several changes from revision 102525, as the changes were
	  not compatible, and, in fact, introduced regressions. (Closes
	  issue #12190) ........

	* contrib/scripts/iax-friends.sql, /,
	  contrib/scripts/sip-friends.sql: Merged revisions 107878 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r107878 | tilghman | 2008-03-11 20:54:00 -0500
	  (Tue, 11 Mar 2008) | 10 lines Merged revisions 107877 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107877 | tilghman | 2008-03-11 20:52:40 -0500 (Tue, 11 Mar 2008)
	  | 2 lines Document all of the possible realtime fields ........
	  ................

2008-03-11 23:38 +0000 [r107828]  Jason Parker <jparker@digium.com>

	* /, doc/voicemail_odbc_postgresql.txt: Merged revisions 107827 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r107827 | qwell | 2008-03-11 18:38:00 -0500
	  (Tue, 11 Mar 2008) | 15 lines Merged revisions 107826 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107826 | qwell | 2008-03-11 18:37:05 -0500 (Tue, 11 Mar 2008) |
	  7 lines Update documentation for pgsql ODBC voicemail. (closes
	  issue #12186) Reported by: jsmith Patches:
	  vm_pgsql_doc_update.patch uploaded by jsmith (license 15)
	  ........ ................

2008-03-11 22:59 +0000 [r107723-107793]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_sqlite.c, main/config.c, res/res_config_curl.c,
	  res/res_config_pgsql.c, res/res_config_odbc.c, /,
	  include/asterisk/config.h, res/res_config_ldap.c: Merged
	  revisions 107791 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107791 |
	  tilghman | 2008-03-11 17:55:16 -0500 (Tue, 11 Mar 2008) | 5 lines
	  An offhand comment from Russell made me realize that the
	  configuration file caching would not work properly for users.conf
	  and any other file read from more than one place. I needed to add
	  the filename which requested the config file to get it to work
	  properly. ........

2008-03-11 20:54 +0000 [r107720]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 107718 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107718 | qwell | 2008-03-11 15:53:48 -0500 (Tue, 11 Mar 2008) |
	  13 lines Merged revisions 107714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107714 | qwell | 2008-03-11 15:49:56 -0500 (Tue, 11 Mar 2008) |
	  5 lines Copy voicemail dependency logic for res_adsi to
	  chan_gtalk and chan_jingle (for jabber). (closes issue #12014)
	  Reported by: junky ........ ................

2008-03-11 20:51 +0000 [r107716]  Kevin P. Fleming <kpfleming@digium.com>

	* /, Makefile.rules, channels/Makefile: Merged revisions 107715 via
	  svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r107715 | kpfleming | 2008-03-11 15:50:57 -0500
	  (Tue, 11 Mar 2008) | 10 lines Merged revisions 107713 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107713 | kpfleming | 2008-03-11 15:48:58 -0500 (Tue, 11 Mar
	  2008) | 2 lines get chan_vpb to build properly in dev mode
	  ........ ................

2008-03-11 20:37 +0000 [r107584-107711]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_page.c: Merged revisions 107710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107710 |
	  file | 2008-03-11 17:36:14 -0300 (Tue, 11 Mar 2008) | 6 lines
	  Dial a device even if it's state is unknown. (closes issue
	  #12184) Reported by: bluecrow76 Patches:
	  asterisk-svn-app_page.c.devicestate_unknown.diff uploaded by
	  bluecrow76 (license 270) ........

	* /, main/features.c: Merged revisions 107659 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107659 | file | 2008-03-11 16:23:28 -0300 (Tue, 11 Mar 2008) |
	  12 lines Merged revisions 107646 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107646 | file | 2008-03-11 16:20:01 -0300 (Tue, 11 Mar 2008) | 4
	  lines Make sure the visible indication is on the right channel so
	  when the masquerade happens the proper indication is enacted.
	  (closes issue #11707) Reported by: iam ........ ................

	* /, apps/app_meetme.c: Merged revisions 107638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107638 | file | 2008-03-11 15:48:59 -0300 (Tue, 11 Mar 2008) |
	  12 lines Merged revisions 107637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107637 | file | 2008-03-11 15:47:33 -0300 (Tue, 11 Mar 2008) | 4
	  lines Add an additional check for setting conference parameter
	  when using the marked user options. It was possible for it to
	  return to a no listen/no talk state if a masquerade happened.
	  (closes issue #12136) Reported by: aragon ........
	  ................

2008-03-11 15:39 +0000 [r107374-107526]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_vpb.cc, /: Merged revisions 107525 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r107525 | kpfleming | 2008-03-11 10:39:37 -0500 (Tue, 11 Mar
	  2008) | 2 lines fix another potential bug found by gcc 4.3
	  ........

	* apps/app_rpt.c, channels/misdn/isdn_lib.c, codecs/Makefile, /,
	  apps/app_sms.c: Merged revisions 107466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107466 | kpfleming | 2008-03-11 10:13:38 -0500 (Tue, 11 Mar
	  2008) | 10 lines Merged revisions 107464 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107464 | kpfleming | 2008-03-11 09:53:03 -0500 (Tue, 11 Mar
	  2008) | 2 lines fix various other problems found by gcc 4.3
	  ........ ................

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  apps/app_sms.c: Merged revisions 107462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107462 | kpfleming | 2008-03-11 09:37:03 -0500 (Tue, 11 Mar
	  2008) | 10 lines Merged revisions 107461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107461 | kpfleming | 2008-03-11 09:33:45 -0500 (Tue, 11 Mar
	  2008) | 2 lines stop checking for mktime() in the configure
	  script... we don't use it, and the test is buggy under gcc 4.3
	  ........ ................

	* /, configure, main/Makefile, configure.ac, makeopts.in: Merged
	  revisions 107409 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107409 | kpfleming | 2008-03-11 09:09:49 -0500 (Tue, 11 Mar
	  2008) | 13 lines Merged revisions 107408 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107408 | kpfleming | 2008-03-11 09:07:59 -0500 (Tue, 11 Mar
	  2008) | 5 lines check for compiler support for
	  -fno-strict-overflow before using it (tested with Debian's gcc
	  4.3, 4.1 and 3.4) (closes issue #12179) Reported by: Netview
	  ........ ................

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 107406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107406 | kpfleming | 2008-03-11 08:58:37 -0500 (Tue, 11 Mar
	  2008) | 10 lines Merged revisions 107405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107405 | kpfleming | 2008-03-11 08:57:08 -0500 (Tue, 11 Mar
	  2008) | 2 lines fix small bug in IMAP toolkit testing ........
	  ................

	* main/udptl.c, utils/Makefile, /, main/Makefile,
	  main/editline/readline.c, res/Makefile: Merged revisions 107373
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r107373 | kpfleming | 2008-03-11 06:36:51 -0500
	  (Tue, 11 Mar 2008) | 19 lines Merged revisions 107352 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107352 | kpfleming | 2008-03-11 06:04:29 -0500 (Tue, 11 Mar
	  2008) | 11 lines fix up various compiler warnings found with
	  gcc-4.3: - the output of flex includes a static function called
	  'input' that is not used, so for the moment we'll stop having the
	  compiler tell us about unused variables in the flex source files
	  (a better fix would be to improve our flex post-processing to
	  remove the unused function) - main/stdtime/localtime.c makes
	  assumptions about signed integer overflow, and gcc-4.3's improved
	  optimizer tries to take advantage of handling potential overflow
	  conditions at compile time; for now, suppress these optimizations
	  until we can fiure out if the code needs improvement -
	  main/udptl.c has some references to uninitialized variables; in
	  one case there was no bug, but in the other it was certainly
	  possibly for unexpected behavior to occur -
	  main/editline/readline.c had an unused variable ........
	  ................

2008-03-11 01:27 +0000 [r107336]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 107292 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107292 | twilson | 2008-03-10 20:09:46 -0500 (Mon, 10 Mar 2008)
	  | 10 lines Merged revisions 107290 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107290 | twilson | 2008-03-10 19:59:18 -0500 (Mon, 10 Mar 2008)
	  | 2 lines If we fail to alloc a channel, we should re-lock the
	  pvt structure before returning. ........ ................

2008-03-10 23:46 +0000 [r107289]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 107019 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107019 |
	  murf | 2008-03-10 08:55:21 -0600 (Mon, 10 Mar 2008) | 1 line way
	  back in July, in r.75706, a fix was made ot the strftime usages,
	  which was good, but in this case, the check for a nil time was
	  accidentally removed, and now it is restored, to keep timevals
	  like '1969-12-31 17:00:00' from showing up in the cdrs. No idea
	  what databases will do with this. No bugs filed as yet, but it
	  felt like a bug. ........

2008-03-10 20:29 +0000 [r107180]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 107177 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107177 | qwell | 2008-03-10 15:28:33 -0500 (Mon, 10 Mar 2008) |
	  13 lines Merged revisions 107173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107173 | qwell | 2008-03-10 15:27:08 -0500 (Mon, 10 Mar 2008) |
	  5 lines Make sure to reenable echo can after a "failed"
	  (canceled, etc) three-way call. (closes issue #11335) Reported
	  by: rebuild ........ ................

2008-03-10 20:18 +0000 [r107101-107163]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 107162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107162 | russell | 2008-03-10 15:17:37 -0500 (Mon, 10 Mar 2008)
	  | 16 lines Merged revisions 107161 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107161 | russell | 2008-03-10 15:17:11 -0500 (Mon, 10 Mar 2008)
	  | 8 lines Fix another bug specifically related to asynchronous
	  call origination. Once the PBX is started on the channel using
	  ast_pbx_start(), then the ownership of the channel has been
	  passed on to another thread. We can no longer access it in this
	  code. If the channel gets hung up very quickly, it is possible
	  that we could access a channel that has been free'd. (inspired by
	  BE-386) ........ ................

	* main/pbx.c, /: Merged revisions 107159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107159 | russell | 2008-03-10 15:05:12 -0500 (Mon, 10 Mar 2008)
	  | 17 lines Merged revisions 107158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107158 | russell | 2008-03-10 15:04:27 -0500 (Mon, 10 Mar 2008)
	  | 9 lines Fix some bugs related to originating calls. If the code
	  failed to start a PBX on the channel (such as if you set a call
	  limit based on the system's load average), then there were cases
	  where a channel that has already been free'd using ast_hangup()
	  got accessed. This caused weird memory corruption and crashes to
	  occur. (fixes issue BE-386) (much debugging credit goes to
	  twilson, final patch written by me) ........ ................

	* main/channel.c, /: Merged revisions 107103 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107103 | russell | 2008-03-10 12:13:34 -0500 (Mon, 10 Mar 2008)
	  | 10 lines Merged revisions 107102 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107102 | russell | 2008-03-10 12:13:17 -0500 (Mon, 10 Mar 2008)
	  | 2 lines Resolve a compiler warning. ........ ................

	* main/channel.c, /: Merged revisions 107100 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107100 | russell | 2008-03-10 11:59:13 -0500 (Mon, 10 Mar 2008)
	  | 11 lines Merged revisions 107099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107099 | russell | 2008-03-10 11:58:57 -0500 (Mon, 10 Mar 2008)
	  | 3 lines Fix a race condition where the generator can go away
	  (closes issue #12175, reported by edantie, patched by me)
	  ........ ................

2008-03-10 15:46 +0000 [r107069]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 107068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r107068 |
	  mmichelson | 2008-03-10 10:45:13 -0500 (Mon, 10 Mar 2008) | 10
	  lines app_queue has now been doxygenified thanks to snuffy! The
	  ony thing I changed was the way that locks are referenced, since
	  the old 1.2 names were still used in the comments. (closes issue
	  #11997) Reported by: snuffy Patches: bug_11997_queue_doxy.diff
	  uploaded by snuffy (license 35) ........

2008-03-10 14:38 +0000 [r107018]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, main/cdr.c, /, include/asterisk/cdr.h: Merged
	  revisions 107017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r107017 | file | 2008-03-10 11:36:16 -0300 (Mon, 10 Mar 2008) |
	  15 lines Merged revisions 107016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r107016 | file | 2008-03-10 11:33:02 -0300 (Mon, 10 Mar 2008) | 7
	  lines Move where unanswered CDRs are dropped to the CDR core, not
	  everything uses app_dial. (closes issue #11516) Reported by: ys
	  Patches: branch_1.4_cdr.diff uploaded by ys (license 281) Tested
	  by: anest, jcapp, dartvader ........ ................

2008-03-08 17:54 +0000 [r106997]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we don't start a call on a channel
	  that has already started a call

2008-03-08 16:14 +0000 [r106947]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 106946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106946 | kpfleming | 2008-03-08 10:03:48 -0600 (Sat, 08 Mar
	  2008) | 10 lines Merged revisions 106945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106945 | kpfleming | 2008-03-08 09:59:42 -0600 (Sat, 08 Mar
	  2008) | 2 lines don't generate D-Channel "up" and "down" messages
	  unless the channel state is actually changing; also, generate the
	  "up" message when an implicit "up" occurs due to reception of a
	  normal event when we thought the channel was "down" ........
	  ................

2008-03-07 22:53 +0000 [r106897]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 106896 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106896 | russell | 2008-03-07 16:52:46 -0600 (Fri, 07 Mar 2008)
	  | 10 lines Merged revisions 106895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106895 | russell | 2008-03-07 16:51:23 -0600 (Fri, 07 Mar 2008)
	  | 2 lines Only start the SLA thread if SLA has actually been
	  configured. ........ ................

2008-03-07 19:34 +0000 [r106790]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 106789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106789 | file | 2008-03-07 15:33:09 -0400 (Fri, 07 Mar 2008) |
	  12 lines Merged revisions 106788 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106788 | file | 2008-03-07 15:32:00 -0400 (Fri, 07 Mar 2008) | 4
	  lines Ignore source update control frame. (closes issue #12168)
	  Reported by: plack ........ ................

2008-03-07 17:18 +0000 [r106686-106713]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/sched.h: Merged revisions 106707 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r106707 | russell | 2008-03-07 11:17:30 -0600
	  (Fri, 07 Mar 2008) | 16 lines Merged revisions 106704 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106704 | russell | 2008-03-07 11:16:58 -0600 (Fri, 07 Mar 2008)
	  | 8 lines Change a warning message to a debug message. This is
	  happening quite frequently, and it is not worth spamming users
	  with these messages unless we are pretty confident that it should
	  never happen. As it stands today, it _will_ and _does_ happen and
	  until that gets cleaned up a reasonable amount on the development
	  side, let's not spam the logs of everyone else. (closes issue
	  #12154) ........ ................

	* doc/smdi.txt, /: Merged revisions 106684 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106684 |
	  russell | 2008-03-07 10:31:48 -0600 (Fri, 07 Mar 2008) | 2 lines
	  fix example usage ........

2008-03-07 16:27 +0000 [r106554-106662]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 106654 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r106654 | tilghman | 2008-03-07 10:26:07 -0600
	  (Fri, 07 Mar 2008) | 11 lines Merged revisions 106635 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106635 | tilghman | 2008-03-07 10:22:11 -0600 (Fri, 07 Mar 2008)
	  | 3 lines Warn the user when a temporary greeting exists (Closes
	  issue #11409) ........ ................

	* main/rtp.c, /: Merged revisions 106607 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106607 | tilghman | 2008-03-07 09:22:34 -0600 (Fri, 07 Mar 2008)
	  | 11 lines Merged revisions 106606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106606 | tilghman | 2008-03-07 09:20:52 -0600 (Fri, 07 Mar 2008)
	  | 3 lines Properly initialize rtp->schedid (Closes issue #12154)
	  ........ ................

	* apps/app_chanspy.c, apps/app_rpt.c, main/asterisk.c,
	  apps/app_speech_utils.c, apps/app_voicemail.c, main/channel.c,
	  funcs/func_enum.c, channels/chan_misdn.c, main/frame.c, /,
	  channels/chan_sip.c, funcs/func_odbc.c, funcs/func_strings.c,
	  utils/extconf.c: Merged revisions 106553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106553 | tilghman | 2008-03-07 00:54:47 -0600 (Fri, 07 Mar 2008)
	  | 14 lines Merged revisions 106552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106552 | tilghman | 2008-03-07 00:36:33 -0600 (Fri, 07 Mar 2008)
	  | 6 lines Safely use the strncat() function. (closes issue
	  #11958) Reported by: norman Patches: 20080209__bug11958.diff.txt
	  uploaded by Corydon76 (license 14) ........ ................

2008-03-07 01:19 +0000 [r106502-106520]  Russell Bryant <russell@digium.com>

	* doc/smdi.txt, /: Merged revisions 106518 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106518 |
	  russell | 2008-03-06 19:19:02 -0600 (Thu, 06 Mar 2008) | 1 line
	  minor text changes ........

	* doc/smdi.txt, /: Merged revisions 106507 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106507 |
	  russell | 2008-03-06 19:15:36 -0600 (Thu, 06 Mar 2008) | 2 lines
	  Add updated SMDI documentation that I had only sitting in my
	  email ... oops ........

	* main/rtp.c, codecs/codec_g722.c, /, formats/format_pcm.c,
	  main/file.c: Merged revisions 106501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106501 |
	  russell | 2008-03-06 18:24:58 -0600 (Thu, 06 Mar 2008) | 28 lines
	  Merge changes from team/russell/g722-sillyness ... Fix a number
	  of other places where the number of samples in a G722 frame was
	  not properly handled because of various reasons. main/rtp.c: -
	  When a G722 frame is read from the smoother, the number of
	  samples in the frame must be divided by 2 before being sent out
	  over the network. Even though G722 is 16 kHz, an error in some
	  previous spec has made it so that we have to list the number of
	  samples such as if it was 8 kHz. main/file.c: - When scheduling
	  the next time to expect a frame, take into account that the
	  format of the file we're reading from may not be 8 kHz.
	  codecs/codec_g722.c: - When converting from G722 to slinear,
	  g722_decode() expects its samples parameter to be in the silly
	  (real samples / 2) format. Make it so. - When converting from
	  slinear to G722, properly set the number of samples in the frame
	  to be the number of bytes of output * 2. formats/format_pcm.c: -
	  This format module handles G722, among a number of other formats.
	  However, the read() and seek() functions did not account for the
	  fact that G722 has 2 samples per byte. (closes issue #12130,
	  reported by rickross, patched by me) ........

2008-03-06 22:16 +0000 [r106442]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, /: Merged revisions 106438 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106438 | mmichelson | 2008-03-06 16:11:26 -0600 (Thu, 06 Mar
	  2008) | 16 lines Merged revisions 106437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106437 | mmichelson | 2008-03-06 16:10:07 -0600 (Thu, 06 Mar
	  2008) | 8 lines Quell an annoying message that is likely to print
	  every single time that ast_pbx_outgoing_app is called. The reason
	  is that __ast_request_and_dial allocates the cdr for the channel,
	  so it should be expected that the channel will have a cdr on it.
	  Thanks to joetester on IRC for pointing this out ........
	  ................

2008-03-06 22:15 +0000 [r106440]  Jason Parker <jparker@digium.com>

	* /, main/file.c: Merged revisions 106439 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106439 |
	  qwell | 2008-03-06 16:11:30 -0600 (Thu, 06 Mar 2008) | 8 lines
	  Fix file playback in many cases. (closes issue #12115) Reported
	  by: pj Patches: v2-fileexists.patch uploaded by dimas (license
	  88) (with modifications by me) Tested by: dimas, qwell, russell
	  ........

2008-03-06 20:39 +0000 [r106433]  Donny Kavanagh <donnyk@gmail.com>

	* /, res/res_agi.c: Merged revisions 106399 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r106399 |
	  juggie | 2008-03-06 14:31:50 -0500 (Thu, 06 Mar 2008) | 9 lines
	  trivial fix for an agi error when attempting to use EAGI on a
	  dead/hungup channel, we now print an error that makes sense given
	  our removal of deadagi as an actual application. (closes issue
	  #12161) Reported by: explidous Patches: res_agi_12161.patch
	  uploaded by juggie (license 24) Tested by: juggie ........

2008-03-06 05:25 +0000 [r106330-106359]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 106346 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r106346 | tilghman | 2008-03-05 23:21:39 -0600 (Wed, 05 Mar 2008)
	  | 7 lines Missing braces, fix parsing (closes issue #12112)
	  Reported by: cyrenity Patches: res_config_ldap.patch-03-03-2008
	  uploaded by cyrenity (license 416) Tested by: cyrenity, Corydon76
	  ........

	* /, sounds/sounds.xml, sounds/Makefile: Merged revisions 106329
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r106329 | tilghman | 2008-03-05 22:45:16 -0600
	  (Wed, 05 Mar 2008) | 10 lines Merged revisions 106328 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106328 | tilghman | 2008-03-05 22:40:06 -0600 (Wed, 05 Mar 2008)
	  | 2 lines Upgrade to the next release of sounds ........
	  ................

2008-03-06 00:23 +0000 [r106299-106320]  Russell Bryant <russell@digium.com>

	* channels/chan_oss.c, main/rtp.c, main/channel.c,
	  channels/chan_phone.c, main/dial.c, channels/chan_skinny.c,
	  main/file.c, channels/chan_h323.c, channels/chan_alsa.c,
	  include/asterisk/frame.h, channels/chan_mgcp.c,
	  channels/chan_unistim.c, apps/app_dial.c, channels/chan_zap.c, /,
	  channels/chan_sip.c, channels/chan_console.c,
	  apps/app_followme.c: Merged revisions 106239 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106239 | file | 2008-03-05 16:43:22 -0600 (Wed, 05 Mar 2008) |
	  12 lines Merged revisions 106235 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106235 | file | 2008-03-05 18:32:10 -0400 (Wed, 05 Mar 2008) | 4
	  lines Add a control frame to indicate the source of media has
	  changed. Depending on the underlying technology it may need to
	  change some things. (closes issue #12148) Reported by: jcomellas
	  ........ ................

	* /, channels/chan_iax2.c: Merged revisions 106238 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r106238 | russell | 2008-03-05 16:40:58 -0600
	  (Wed, 05 Mar 2008) | 11 lines Merged revisions 106237 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106237 | russell | 2008-03-05 16:37:09 -0600 (Wed, 05 Mar 2008)
	  | 3 lines Fix a potential deadlock and a few different potential
	  crashes. (closes issue #12145, reported by thiagarcia, patched by
	  me) ........ ................

	* /, doc/tex/realtime.tex: Merged revisions 106186 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r106186 | mvanbaak | 2008-03-05 15:19:06 -0600 (Wed, 05 Mar 2008)
	  | 7 lines document var_metric usage to prevent bugreports that
	  are actually configuration issues (closes issue #12151) Reported
	  by: caio1982 Patches: DB_metric3.diff uploaded by caio1982
	  (license 22) ........

	* main/rtp.c, /, main/translate.c, include/asterisk/frame.h: Merged
	  revisions 105933 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r105933 | russell | 2008-03-04 19:54:16 -0600 (Tue, 04 Mar 2008)
	  | 13 lines Merged revisions 105932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105932 | russell | 2008-03-04 19:52:18 -0600 (Tue, 04 Mar 2008)
	  | 5 lines Fix a bug that I just noticed in the RTP code. The
	  calculation for setting the len field in an ast_frame of audio
	  was wrong when G.722 is in use. The len field represents the
	  number of ms of audio that the frame contains. It would have set
	  the value to be twice what it should be. ........
	  ................

	* funcs/func_global.c, /: Merged revisions 105899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105899 |
	  russell | 2008-03-04 18:45:39 -0600 (Tue, 04 Mar 2008) | 3 lines
	  Fix the SHARED() read callback to properly unlock the channel.
	  This function could not have worked, as it left the channel
	  locked in all cases. ........

	* main/manager.c, /: Merged revisions 105864 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105864 |
	  mmichelson | 2008-03-04 17:24:56 -0600 (Tue, 04 Mar 2008) | 5
	  lines There are several places in manager.c where BUFSIZ is used
	  for a buffer which will contain nowhere near that amount of data.
	  This makes these buffers more reasonably sized. ........

	* main/asterisk.c, channels/chan_zap.c, /, channels/console_gui.c,
	  apps/app_queue.c: Merged revisions 105841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105841 |
	  tilghman | 2008-03-04 17:10:45 -0600 (Tue, 04 Mar 2008) | 2 lines
	  Fix minor misuses of snprintf ........

	* main/rtp.c, main/netsock.c, main/cryptostub.c, main/file.c,
	  main/callerid.c, main/alaw.c, main/dsp.c, main/dlfcn.c,
	  main/frame.c, /, main/say.c, main/utils.c, main/enum.c,
	  main/astobj2.c, main/config.c, main/fskmodem.c, main/poll.c,
	  main/loader.c, main/term.c, main/cli.c, main/channel.c,
	  main/dial.c, main/manager.c, main/tdd.c, main/strcompat.c,
	  main/features.c, main/logger.c, main/app.c, main/image.c,
	  main/dns.c, main/pbx.c, main/translate.c, main/jitterbuf.c:
	  Merged revisions 105840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105840 |
	  tilghman | 2008-03-04 17:04:29 -0600 (Tue, 04 Mar 2008) | 2 lines
	  Whitespace changes only ........

	* main/tcptls.c, main/manager.c, /, channels/chan_sip.c,
	  main/http.c, include/asterisk/tcptls.h: Merged revisions 105804
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r105804 | russell | 2008-03-04 16:28:03 -0600 (Tue, 04
	  Mar 2008) | 2 lines add a destroy API call for a server instance
	  ........

	* main/tcptls.c, main/manager.c, /, channels/chan_sip.c,
	  main/http.c, include/asterisk/tcptls.h: Merged revisions 105785
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ........ r105785 | russell | 2008-03-04 16:23:21 -0600 (Tue, 04
	  Mar 2008) | 2 lines More public API name changes to use an
	  appropriate ast_ prefix ........

	* include/asterisk/http.h, main/tcptls.c, main/manager.c, /,
	  channels/chan_sip.c, res/res_phoneprov.c, main/http.c,
	  include/asterisk/tcptls.h: Merged revisions 105773 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r105773 | russell | 2008-03-04 16:15:18 -0600 (Tue, 04 Mar 2008)
	  | 2 lines Rename public object server_instance to
	  ast_tcptls_server_instance ........

	* /, channels/chan_sip.c: Merged revisions 105734 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105734 |
	  russell | 2008-03-04 14:36:16 -0600 (Tue, 04 Mar 2008) | 6 lines
	  Fix some bugs in the SIP tcp helper thread. - fix a spot where a
	  lock wouldn't get unlocked in an error condition - call
	  ast_mutex_destroy() on the lock before freeing its memory
	  (related to issue #11972) ........

	* /, res/res_phoneprov.c: Merged revisions 105733 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ........ r105733 |
	  twilson | 2008-03-04 14:32:55 -0600 (Tue, 04 Mar 2008) | 2 lines
	  Set username to default to the category name if it isn't
	  overridden by a usernmae= setting in users.conf ........

	* main/rtp.c, /: Merged revisions 105677 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r105677 | file | 2008-03-04 12:11:38 -0600 (Tue, 04 Mar 2008) |
	  10 lines Merged revisions 105676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105676 | file | 2008-03-04 14:10:34 -0400 (Tue, 04 Mar 2008) | 2
	  lines In addition to setting the marker bit let's change our ssrc
	  so they know for sure it is a different source. ........
	  ................

	* main/rtp.c, /, channels/chan_sip.c, include/asterisk/rtp.h:
	  Merged revisions 105675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r105675 | file | 2008-03-04 12:08:42 -0600 (Tue, 04 Mar 2008) |
	  16 lines Merged revisions 105674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105674 | file | 2008-03-04 14:05:28 -0400 (Tue, 04 Mar 2008) | 8
	  lines When a new source of audio comes in (such as music on hold)
	  make sure the marker bit gets set. (closes issue #10355) Reported
	  by: wdecarne Patches: 10355.diff uploaded by file (license 11)
	  (closes issue #11491) Reported by: kanderson ........
	  ................

2008-03-05 17:42 +0000 [r106140]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_talkdetect.c: Merged revisions 106139 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/trunk ........
	  r106139 | tilghman | 2008-03-05 11:40:42 -0600 (Wed, 05 Mar 2008)
	  | 3 lines Should check these values for non-NULL before scanning.
	  (Closes issue #12147) ........

2008-03-05 15:43 +0000 [r106041]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 106040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106040 | kpfleming | 2008-03-05 09:40:40 -0600 (Wed, 05 Mar
	  2008) | 15 lines Merged revisions 106038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106038 | kpfleming | 2008-03-05 09:32:35 -0600 (Wed, 05 Mar
	  2008) | 7 lines when a PRI call must be moved to a different B
	  channel at the request of the other endpoint, ensure that any DSP
	  active on the original channel is moved to the new one (closes
	  issue #11917) Reported by: mavetju Tested by: mavetju ........
	  ................

2008-03-05 15:31 +0000 [r106037]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, include/asterisk/sched.h: Merged
	  revisions 106036 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/trunk ................
	  r106036 | tilghman | 2008-03-05 09:23:32 -0600 (Wed, 05 Mar 2008)
	  | 15 lines Merged revisions 106015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r106015 | tilghman | 2008-03-05 09:17:16 -0600 (Wed, 05 Mar 2008)
	  | 7 lines Correctly initialize retransid in SIP, and ensure that
	  the warning when failing to delete a schedule entry can actually
	  hit the log. (closes issue #12140) Reported by: slavon Patches:
	  sch2.patch uploaded by slavon (license 288) (Patch slightly
	  modified by me) ........ ................

2008-03-04  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta5 released.

2008-03-04 16:55 +0000 [r105574-105597]  Russell Bryant <russell@digium.com>

	* CHANGES: Update CHANGES heading

	* funcs/func_version.c: Simplify a trivial snprintf() with
	  ast_copy_string()

	* main/hashtab.c: Make it so you don't have to cast away const in a
	  couple places

	* main/hashtab.c: remove unnecessary casts

	* main/pbx.c: - Add curly braces around the while loop - Properly
	  break out of the loop on error when an included context is not
	  found

	* main/pbx.c: Use ast_copy_string() instead of strncpy(), and use
	  sizeof() instead of a magic number

	* channels/chan_zap.c: Fix some code that was improperly changed in
	  revision 104866 from issue #12079. (closes issue #12129, reported
	  by elguero, patched by me)

2008-03-03 18:08 +0000 [r105573]  Jason Parker <jparker@digium.com>

	* /, res/snmp/agent.c: Merged revisions 105572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105572 | qwell | 2008-03-03 12:06:52 -0600 (Mon, 03 Mar 2008) |
	  7 lines Fix types for astNumChannels and astConfigCallsProcessed.
	  (closes issue #12114) Reported by: jeffg Patches: 12114.patch
	  uploaded by jeffg (license 192) ........

2008-03-03 17:17 +0000 [r105564-105571]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /: Merged revisions 105570 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r105570 | russell | 2008-03-03 11:16:53 -0600 (Mon, 03
	  Mar 2008) | 3 lines In the case of an ast_channel allocation
	  failure, take the local_pvt out of the pvt list before destroying
	  it. ........

	* channels/chan_local.c, /: Merged revisions 105568 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r105568 | russell | 2008-03-03 11:05:16 -0600 (Mon, 03
	  Mar 2008) | 3 lines Fix a potential memory leak of the local_pvt
	  struct when ast_channel allocation fails. Also, in passing,
	  centralize the code necessary to destroy a local_pvt. ........

	* main/autoservice.c, /: Merged revisions 105565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105565 | russell | 2008-03-03 10:01:50 -0600 (Mon, 03 Mar 2008)
	  | 3 lines Update the copyright information for autoservice. Most
	  of the code in this file now is stuff that I have written
	  recently ... ........

	* main/channel.c, main/autoservice.c, /,
	  include/asterisk/_private.h, main/asterisk.c: 3) In addition to
	  merging the changes below, change trunk back to a regular LIST
	  instead of an RWLIST. The way this list works makes it such that
	  a RWLIST provides no additional benefit. Also, a mutex is needed
	  for use with the thread condition. Merged revisions 105563 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105563 | russell | 2008-03-03 09:50:43 -0600 (Mon, 03 Mar 2008)
	  | 24 lines Merge in some changes from
	  team/russell/autoservice-nochans-1.4 These changes fix up some
	  dubious code that I came across while auditing what happens in
	  the autoservice thread when there are no channels currently in
	  autoservice. 1) Change it so that autoservice thread doesn't keep
	  looping around calling ast_waitfor_n() on 0 channels twice a
	  second. Instead, use a thread condition so that the thread
	  properly goes to sleep and does not wake up until a channel is
	  put into autoservice. This actually fixes an interesting bug, as
	  well. If the autoservice thread is already running (almost always
	  is the case), then when the thread goes from having 0 channels to
	  have 1 channel to autoservice, that channel would have to wait
	  for up to 1/2 of a second to have the first frame read from it.
	  2) Fix up the code in ast_waitfor_nandfds() for when it gets
	  called with no channels and no fds to poll() on, such as was the
	  case with the previous code for the autoservice thread. In this
	  case, the code would call alloca(0), and pass the result as the
	  first argument to poll(). In this case, the 2nd argument to
	  poll() specified that there were no fds, so this invalid pointer
	  shouldn't actually get dereferenced, but, this code makes it
	  explicit and ensures the pointers are NULL unless we have valid
	  data to put there. (related to issue #12116) ........

2008-03-03 15:30 +0000 [r105558-105561]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 105560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105560 | file | 2008-03-03 11:28:59 -0400 (Mon, 03 Mar 2008) | 7
	  lines It is possible for no audio to pass between the current
	  digit and next digit so expand logic that clears emulation to
	  AST_FRAME_NULL. (closes issue #11911) Reported by: edgreenberg
	  Patches: v1-11911.patch uploaded by dimas (license 88) Tested by:
	  tbsky ........

	* /, channels/chan_sip.c: Merged revisions 105557 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105557 | file | 2008-03-03 11:15:39 -0400 (Mon, 03 Mar 2008) | 6
	  lines Add a comment to describe some logic. (closes issue #12120)
	  Reported by: flefoll Patches:
	  chan_sip.c.br14.patch-just-a-comment uploaded by flefoll (license
	  244) ........

2008-03-01 03:59 +0000 [r105509]  Joshua Colp <jcolp@digium.com>

	* main/slinfactory.c: Add support for 16KHz signed linear.

2008-03-01 02:03 +0000 [r105479]  Tilghman Lesher <tlesher@digium.com>

	* /: Drop bad property

2008-03-01 01:30 +0000 [r105477]  Terry Wilson <twilson@digium.com>

	* apps/app_dial.c, include/asterisk/app.h,
	  main/global_datastores.c, /, main/features.c, main/app.c,
	  include/asterisk/global_datastores.h: Asterisk, when parking can
	  drop rights a caller when a parking timeout occurs. Also, when
	  doing built-in attended transfers, sometimes incorrectly passes
	  rights from the transferrer to the transferee. This patch tries
	  to fixes the parking issue and lays some groundwork for later
	  fixing the transfer issue. (closes issue #11520) Reported by:
	  pliew Tested by: otherwiseguy

2008-03-01 00:53 +0000 [r105461]  Russell Bryant <russell@digium.com>

	* CHANGES, funcs/func_devstate.c: Add a "devstate change" CLI
	  command to control custom device states. Also, do some additional
	  code cleanup and improvement in passing. (closes issue #12106)
	  Reported by: nizon Patches: devstate-patch.txt uploaded by nizon
	  (license 415) -- Updated to trunk, and tab completion added by me

2008-02-29 23:53 +0000 [r105411]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Convert to use ast_str

2008-02-29 23:36 +0000 [r105410]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 105409 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105409 | russell | 2008-02-29 17:34:32 -0600 (Fri, 29 Feb 2008)
	  | 23 lines Fix a major bug in autoservice. There was a race
	  condition in the handling of the list of channels in autoservice.
	  The problem was that it was possible for a channel to get removed
	  from autoservice and destroyed, while the autoservice thread was
	  still messing with the channel. This led to memory corruption,
	  and caused crashes. This explains multiple backtraces I have seen
	  that have references to autoservice, but do to the nature of the
	  issue (memory corruption), could cause crashes in a number of
	  areas. (fixes the crash in BE-386) (closes issue #11694) (closes
	  issue #11940) The following issues could be related. If you are
	  the reporter of one of these, please update to include this fix
	  and try again. (potentially fixes issue #11189) (potentially
	  fixes issue #12107) (potentially fixes issue #11573) (potentially
	  fixes issue #12008) (potentially fixes issue #11189) (potentially
	  fixes issue #11993) (potentially fixes issue #11791) ........

2008-02-29 18:34 +0000 [r105378]  Joshua Colp <jcolp@digium.com>

	* configs/sip.conf.sample: Add documentation for setting
	  username/password in SIP dial string. (closes issue #11587)
	  Reported by: sobomax Patches: dialstring_doc.diff uploaded by
	  sobomax (license 359)

2008-02-29 14:50 +0000 [r105263-105327]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 105326 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105326 | phsultan | 2008-02-29 15:47:10 +0100 (Fri, 29 Feb 2008)
	  | 1 line Fix a potential memory leak ........

	* channels/chan_jingle.c, channels/chan_gtalk.c, res/res_jabber.c:
	  Remove unnecessary if statements before calling iks_delete
	  (redundant check is done inside iks_delete), thus making the code
	  conform with coding guidelines.

2008-02-29 13:55 +0000 [r105262]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 105261 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r105261 | file | 2008-02-29 09:48:13 -0400 (Fri, 29 Feb
	  2008) | 4 lines Bump up the size of the uniqueid variable.
	  (closes issue #12107) Reported by: asgaroth ........

2008-02-29 13:12 +0000 [r105210]  Philippe Sultan <philippe.sultan@gmail.com>

	* res/res_jabber.c: Automatically create new buddy upon reception
	  of a presence stanza of type subscribed. (closes issue #12066)
	  Reported by: ffadaie Patches: branch-1.4-12066-1.diff uploaded by
	  phsultan (license 73) trunk-12066-1.diff uploaded by phsultan
	  (license 73) Tested by: ffadaie, phsultan

2008-02-29 01:15 +0000 [r105176]  Tilghman Lesher <tlesher@digium.com>

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 105113 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105113 | tilghman | 2008-02-28 15:56:54 -0600 (Thu, 28 Feb 2008)
	  | 7 lines Update init script for LSB compat (closes issue #9843)
	  Reported by: ibc Patches: rc.debian.asterisk.patch uploaded by
	  ibc (license 211) Tested by: paravoid ........

2008-02-28 22:39 +0000 [r105144]  Russell Bryant <russell@digium.com>

	* /, main/utils.c, include/asterisk/lock.h, utils/check_expr.c:
	  Merged revisions 105116 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105116 | russell | 2008-02-28 16:23:05 -0600 (Thu, 28 Feb 2008)
	  | 8 lines Fix a bug in the lock tracking code that was discovered
	  by mmichelson. The issue is that if the lock history array was
	  full, then the functions to mark a lock as acquired or not would
	  adjust the stats for whatever lock is at the end of the array,
	  which may not be itself. So, do a sanity check to make sure that
	  we're updating lock info for the proper lock. (This explains the
	  bizarre stats on lock #63 in BE-396, thanks Mark!) ........

2008-02-28 20:14 +0000 [r105060-105061]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 105059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r105059 | mmichelson | 2008-02-28 14:11:57 -0600 (Thu, 28 Feb
	  2008) | 6 lines When using autofill, members who are in use
	  should be counted towards the number of available members to call
	  if ringinuse is set to yes. Thanks to jmls who brought this issue
	  up on IRC ........

	* main/dial.c, /: Merged revisions 104841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104841 | mmichelson | 2008-02-27 15:49:20 -0600 (Wed, 27 Feb
	  2008) | 17 lines Two fixes: 1. Make the list of ast_dial_channels
	  a lockable list. This is because in some cases, the ast_dial may
	  exist in multiple threads due to asynchronous execution of its
	  application, and I found some cases where race conditions could
	  exist. 2. Check in ast_dial_join to be sure that the channel
	  still exists before attempting to lock it, since it could have
	  gotten hung up but the is_running_app flag on the
	  ast_dial_channel may not have been cleared yet. (closes issue
	  #12038) Reported by: jvandal Patches: 12038v2.patch uploaded by
	  putnopvut (license 60) Tested by: jvandal ........

2008-02-28 19:21 +0000 [r105006]  Jason Parker <jparker@digium.com>

	* main/cdr.c, main/pbx.c, /: Merged revisions 105005 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r105005 | qwell | 2008-02-28 13:20:10 -0600 (Thu, 28 Feb
	  2008) | 9 lines Make pbx_exec pass an empty string into
	  applications, if we get NULL. This protects against possible
	  segfaults in applications that may try to use data before
	  checking length (ast_strdupa'ing it, for example) (closes issue
	  #12100) Reported by: foxfire Patches: 12100-nullappargs.diff
	  uploaded by qwell (license 4) ........

2008-02-28 14:42 +0000 [r104974]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_vpb.cc: Fix crash when configuration does not match
	  hardware detection. (closes issue #12096) Reported by: mmickan
	  Patches: chan_vpb.cc.diff uploaded by mmickan (license 400)

2008-02-28 04:37 +0000 [r104921]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 104920 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r104920 | qwell | 2008-02-27 22:31:21 -0600 (Wed, 27 Feb
	  2008) | 2 lines According to a video at www.cisco.com, the 7921G
	  supports 6 line appearances. ........

2008-02-28 00:11 +0000 [r104869]  Tilghman Lesher <tlesher@digium.com>

	* /, main/Makefile, build_tools/strip_nonapi: Merged revisions
	  104868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104868 | tilghman | 2008-02-27 18:05:06 -0600 (Wed, 27 Feb 2008)
	  | 7 lines Compatibility fix for PPC64 (closes issue #12081)
	  Reported by: jcollie Patches: asterisk-1.4.18-funcdesc.patch
	  uploaded by jcollie (license 412) Tested by: jcollie, Corydon76
	  ........

2008-02-27 23:58 +0000 [r104866]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c: reduce indentation in alloc_sub (issue
	  #12079) Reported by: tzafrir Patches: alloc_sub uploaded by
	  tzafrir (license 46)

2008-02-27 21:02 +0000 [r104788]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 104787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104787 | file | 2008-02-27 16:56:23 -0400 (Wed, 27 Feb 2008) | 2
	  lines Don't loop around infinitely trying to spy on our own
	  channel, and don't forget to free/detach the datastore upon
	  hangup of the spy. ........

2008-02-27 20:37 +0000 [r104784]  Mark Michelson <mmichelson@digium.com>

	* /, main/file.c: Merged revisions 104783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104783 | mmichelson | 2008-02-27 14:36:26 -0600 (Wed, 27 Feb
	  2008) | 4 lines Bump a couple of more buffers up by 2 so that
	  annoying warnings aren't generated like crazy on every
	  fileexists_core call. ........

2008-02-27 19:36 +0000 [r104756]  Jason Parker <jparker@digium.com>

	* apps/app_voicemail.c: Remove useless 's' and 'key' variables, in
	  favor of 'val', which serves the exact same purpose.

2008-02-27 18:20 +0000 [r104705]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 104704 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104704 | tilghman | 2008-02-27 12:15:10 -0600 (Wed, 27 Feb 2008)
	  | 2 lines Ensure the session ID can't be 0. ........

2008-02-27 17:45 +0000 [r104687]  Joshua Colp <jcolp@digium.com>

	* /, main/file.c: Merged revisions 104665 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104665 | file | 2008-02-27 13:41:40 -0400 (Wed, 27 Feb 2008) | 2
	  lines Bump up the buffer by 2. ........

2008-02-27 17:36 +0000 [r104643]  Russell Bryant <russell@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 104625 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104625 | russell | 2008-02-27 11:33:04 -0600 (Wed, 27 Feb 2008)
	  | 4 lines Fix a problem in ChanSpy where it could get stuck in an
	  infinite loop without being able to detect that the calling
	  channel hung up. (closes issue #12076, reported by junky, patched
	  by me) ........

2008-02-27 17:31 +0000 [r104617]  Jason Parker <jparker@digium.com>

	* /, main/features.c: Merged revisions 104598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104598 | qwell | 2008-02-27 11:26:55 -0600 (Wed, 27 Feb 2008) |
	  8 lines Inherit language from the transfering channel on a blind
	  transfer. (closes issue #11682) Reported by: caio1982 Patches:
	  local_atxfer_lang3-1.4.diff uploaded by caio1982 (license 22)
	  Tested by: caio1982, victoryure ........

2008-02-27 17:12 +0000 [r104595-104597]  Joshua Colp <jcolp@digium.com>

	* /, main/loader.c: Merged revisions 104596 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104596 | file | 2008-02-27 13:07:33 -0400 (Wed, 27 Feb 2008) | 4
	  lines Use the lock (which already existed, it just wasn't used)
	  on the updaters list to protect the contents instead of the
	  overall module list lock. (closes issue #12080) Reported by:
	  ChaseVenters ........

	* channels/chan_sip.c: After further discussion revert my previous
	  commit for this. Currently in order to ensure devicestate is the
	  expected value in another module (such as app_queue) then
	  chan_sip must be loaded before hand.

2008-02-27 16:54 +0000 [r104594]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/file.c: Merged revisions 104593 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104593 | kpfleming | 2008-02-27 10:53:06 -0600 (Wed, 27 Feb
	  2008) | 8 lines fallback to standard English prompts properly
	  when using new prompt directory layout (closes issue #11831)
	  Reported by: IgorG Patches: fallbacken.v1.diff uploaded by IgorG
	  (license 20) (modified by me to improve code and conform rest of
	  function to coding guidelines) ........

2008-02-27 16:26 +0000 [r104537-104539]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: When queueing up a device state change when
	  the peer is loaded from the configuration give it a state of not
	  in use. We have to do this because the channel technology may not
	  yet be registered so the state could not be queried and would be
	  considered invalid. (closes issue #12087) Reported by: liorm

	* res/res_smdi.c, /: Merged revisions 104536 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104536 | file | 2008-02-27 11:52:02 -0400 (Wed, 27 Feb 2008) | 4
	  lines Only stop the MWI monitor thread if it was actually
	  started. (closes issue #12086) Reported by: francesco_r ........

2008-02-27 15:34 +0000 [r104534]  Tilghman Lesher <tlesher@digium.com>

	* utils/astcanary.c: open(2) needs a mode argument when O_CREAT is
	  specified. (Closes issue #12083)

2008-02-27 15:31 +0000 [r104533]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c, main/rtp.c: Fix T38 passthrough regression
	  introduced by state changes. (closes issue #12078) Reported by:
	  dimas Patches: v1-12078.patch uploaded by dimas (license 88)
	  (closes issue #12074) Reported by: Ivan

2008-02-27 08:20 +0000 [r104502]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_vpb.cc, configs/vpb.conf.sample,
	  include/asterisk/module.h: Bring Voicetronix driver up to date
	  with current drivers (closes issue #12084) Reported by: mmickan
	  Patches: chan_vpb.cc.diff uploaded by mmickan (license 400)
	  module.h.diff uploaded by mmickan (license 400) vpb.conf.sample
	  uploaded by mmickan (license 400)

2008-02-27 04:42 +0000 [r104419-104473]  Russell Bryant <russell@digium.com>

	* doc/janitor-projects.txt: note that the chan_sip conversion is
	  already in progress

	* doc/janitor-projects.txt: add another janitor project

	* doc/janitor-projects.txt: Add the stuff from the janitor projects
	  page that is still relevant. I figure that if we keep this in the
	  tree, it will be much easier to keep up to date. The page on
	  asterisk.org just links to this on svn.digium.com/view

2008-02-27 03:52 +0000 [r104418]  Jason Parker <jparker@digium.com>

	* doc/janitor-projects.txt (added): Create placeholder file...for
	  now.

2008-02-27 02:05 +0000 [r104388]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Whitespace changes only

2008-02-27 01:16 +0000 [r104333-104335]  Russell Bryant <russell@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 104334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104334 | russell | 2008-02-26 19:15:02 -0600 (Tue, 26 Feb 2008)
	  | 3 lines Avoid some recursion in the cleanup code for the
	  chanspy datastore (closes issue #12076, reported by junky,
	  patched by me) ........

2008-02-26 22:14 +0000 [r104301]  Steve Murphy <murf@digium.com>

	* res/snmp/agent.c: small change to allow this file to compile. No
	  problem if you don't install the libsnmp package.

2008-02-26 20:33 +0000 [r104244-104270]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: I swear I compiled this ... *cough*

	* res/res_phoneprov.c: fix this module, too

	* funcs/func_version.c: fix this module

	* Makefile, include/asterisk, build_tools/make_version_h (added):
	  Re-add the automatically generated version.h, so that modules can
	  include for making build time decisions for cross asterisk
	  version compatibility

	* main/manager.c, channels/chan_sip.c, include/asterisk/version.h
	  (removed), build_tools/make_version_c, res/res_agi.c,
	  main/http.c, include/asterisk/ast_version.h (added): Rename
	  version.h to ast_version.h. Next, I will be re-adding version.h
	  as an automatically generated file like it used to be. This still
	  needs to be there for modules that have to check it to compile
	  against multiple asterisk versions.

2008-02-26 19:14 +0000 [r104215]  Joshua Colp <jcolp@digium.com>

	* main/cdr.c, main/pbx.c, include/asterisk/cdr.h, CHANGES: Add an
	  'e' option to ResetCDR which re-enables a CDR that has been
	  disabled. (closes issue #11170) Reported by: kratzers Patches:
	  ResetCDR.1.diff uploaded by kratzers (license 307)

2008-02-26 18:40 +0000 [r104176]  Tilghman Lesher <tlesher@digium.com>

	* doc/CODING-GUIDELINES: 1) Make braces mandatory for if/for/while,
	  even around single statements. 2) Revise the argument parsing
	  section, showing use of the standard macros. 3) Fix a typo.

2008-02-26 18:27 +0000 [r104140-104142]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 104141 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104141 | qwell | 2008-02-26 12:26:12 -0600 (Tue, 26 Feb 2008) |
	  1 line Add badshell to .PHONY target (thanks Kevin) ........

	* Makefile, /: Merged revisions 104139 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104139 | qwell | 2008-02-26 12:09:13 -0600 (Tue, 26 Feb 2008) |
	  2 lines Since all shells aren't as awesome as bash, we have to
	  fail if somebody tries to use a literal "~" in DESTDIR. ........

2008-02-26 16:51 +0000 [r104137]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Formatting and doxygen while waiting on an
	  airport...

2008-02-26 16:36 +0000 [r104133-104136]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 104135 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104135 | qwell | 2008-02-26 10:35:06 -0600 (Tue, 26 Feb 2008) |
	  5 lines Revert previous abspath change. ...abspath is new in GNU
	  make 3.81. I feel so...defeated. Must find new fix! ........

	* /, sounds/Makefile: Merged revisions 104132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104132 | qwell | 2008-02-26 10:08:44 -0600 (Tue, 26 Feb 2008) |
	  9 lines Fix a very bizarre issue we were seeing with our buildbot
	  when using a DESTDIR that wasn't an absolute path (such as
	  DESTDIR=~/asterisk-1.4). Apparently what was happening, was that
	  some of the targets were being expanded to the full path, so $@
	  ended up being /root/asterisk-1.4/[...]/ rather than
	  ~/asterisk-1.4/[...]/ It appears that this may be a new "feature"
	  in GNU make. (*cough*
	  http://en.wikipedia.org/wiki/Principle_of_least_surprise *cough*)
	  ........

2008-02-26 14:51 +0000 [r104127]  Mark Michelson <mmichelson@digium.com>

	* main/features.c: Remove more hardcoded pipe symbols and replace
	  with commas. (closes issue #12072) Reported by: SimonSharman
	  Patches: features.patch uploaded by SimonSharman (license 410)
	  Tested by: SimonSharman

2008-02-26 06:43 +0000 [r104125]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_odbc.c: Use the readhandle for reads (closes issue
	  #12069)

2008-02-26 00:38 +0000 [r104120-104124]  Russell Bryant <russell@digium.com>

	* res/res_smdi.c: Add a \todo to convert this module to the event
	  system

	* CHANGES: Update CHANGES for SMDI stuff

	* channels/chan_zap.c, res/res_smdi.c, /, configs/smdi.conf.sample,
	  include/asterisk/smdi.h, apps/app_voicemail.c: Merged revisions
	  104119 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104119 | russell | 2008-02-25 18:25:29 -0600 (Mon, 25 Feb 2008)
	  | 33 lines Merge changes from team/russell/smdi-1.4 This commit
	  brings in a significant set of changes to the SMDI support in
	  Asterisk. There were a number of bugs in the current
	  implementation, most notably being that it was very likely on
	  busy systems to pop off the wrong message from the SMDI message
	  queue. So, this set of changes fixes the issues discovered as
	  well as introducing some new ways to use the SMDI support which
	  are required to avoid the bugs with grabbing the wrong message
	  off of the queue. This code introduces a new interface to SMDI,
	  with two dialplan functions. First, you get an SMDI message in
	  the dialplan using SMDI_MSG_RETRIEVE() and then you access
	  details in the message using the SMDI_MSG() function. A side
	  benefit of this is that it now supports more than just chan_zap.
	  For example, with this implementation, you can have some FXO
	  lines being terminated on a SIP gateway, but the SMDI link in
	  Asterisk. Another issue with the current implementation is that
	  it is quite common that the station ID that comes in on the SMDI
	  link is not necessarily the same as the Asterisk voicemail box.
	  There are now additional directives in the smdi.conf
	  configuration file which let you map SMDI station IDs to Asterisk
	  voicemail boxes. Yet another issue with the current SMDI support
	  was related to MWI reporting over the SMDI link. The current code
	  could only report a MWI change when the change was made by
	  someone calling into voicemail. If the change was made by some
	  other entity (such as with IMAP storage, or with a web interface
	  of some kind), then the MWI change would never be sent. The SMDI
	  module can now poll for MWI changes if configured to do so. This
	  work was inspired by and primarily done for the University of
	  Pennsylvania. (also related to issue #9260) ........

2008-02-25 23:56 +0000 [r104103-104110]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, UPGRADE.txt: Deprecate the "stripmsd" option
	  in favor of dialplan substring variable syntax. (closes issue
	  #12060)

	* /, apps/app_chanspy.c: Merged revisions 104106 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104106 | russell | 2008-02-25 17:42:42 -0600 (Mon, 25 Feb 2008)
	  | 10 lines This patch fixes some pretty significant problems with
	  how app_chanspy handles pointers to channels that are being spied
	  upon. It was very likely that a crash would occur if the channel
	  being spied upon hung up. This was because the current
	  ast_channel handling _requires_ that the object is locked or else
	  it could disappear at any time (except in the owning channel
	  thread). So, this patch uses some channel datastore magic on the
	  spied upon channel to be able to detect if and when the channel
	  goes away. (closes issue #11877) (patch written by me, but thanks
	  to kpfleming for the idea, and to file for review) ........

	* /, main/utils.c: Merged revisions 104102 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104102 | russell | 2008-02-25 17:19:05 -0600 (Mon, 25 Feb 2008)
	  | 7 lines Improve the lock tracking code a bit so that a bunch of
	  old locks that threads failed to lock don't sit around in the
	  history. When a lock is first locked, this checks to see if the
	  last lock in the list was one that was failed to be locked. If it
	  is, then that was a lock that we're no longer sitting in a
	  trylock loop trying to lock, so just remove it. (inspired by
	  issue #11712) ........

2008-02-25 23:04 +0000 [r104097-104101]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_pgsql.c, CHANGES: Permit additional CDR columns to be
	  saved in Postgres. Note that these changes are
	  backward-compatible, so no changes to UPGRADE.txt are necessary.
	  (closes issue #9279) Reported by: rottenroddy Patches:
	  20080125__bug9279.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: Corydon76

	* funcs/func_global.c: Shared space for variables (instead of
	  letting other channels muck with your own) (closes issue #11943)
	  Reported by: ramonpeek Patches: 20080208__bug11943__2.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: jmls

	* /, apps/app_voicemail.c: Merged revisions 104094 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r104094 | tilghman | 2008-02-25 15:31:47 -0600 (Mon, 25
	  Feb 2008) | 5 lines If the destination folder is full, don't
	  delete a message when exiting. (closes issue #12065) Reported by:
	  selsky Patch by: (myself) ........

2008-02-25 21:40 +0000 [r104096]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 104095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104095 | file | 2008-02-25 17:37:20 -0400 (Mon, 25 Feb 2008) | 6
	  lines Make it so a users.conf user creates both a SIP peer and a
	  SIP user. The user will be used for inbound authentication for
	  the device, and peer will be used for placing calls to the
	  device. (closes issue #9044) Reported by: queuetue Patches:
	  sip-gui-friend.diff uploaded by qwell (license 4) ........

2008-02-25 20:50 +0000 [r104093]  Jason Parker <jparker@digium.com>

	* /, main/config.c: Merged revisions 104092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104092 | qwell | 2008-02-25 14:49:42 -0600 (Mon, 25 Feb 2008) |
	  11 lines Allow the use of #include and #exec in situations where
	  the max include depth was only 1. Specifically, this fixes using
	  #include and #exec in extconfig.conf. This was basically caused
	  because the config file itself raises the include level to 1. I
	  opted not to raise the include limit, because recursion here
	  could cause very bizarre behavior. Pointed out, and tested by
	  jmls (closes issue #12064) ........

2008-02-25 19:02 +0000 [r104089]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Instead of outputting a verbose message
	  every so often let's make it a debug message.

2008-02-25 19:00 +0000 [r104088]  Brett Bryant <bbryant@digium.com>

	* doc/siptls.txt, configs/sip.conf.sample: Adding more tls
	  configuration details to sip.conf sample, with a list of valid
	  ciphers provided in both files. .. First commit since July, woot

2008-02-25 18:38 +0000 [r104087]  Russell Bryant <russell@digium.com>

	* /, channels/chan_agent.c: Merged revisions 104086 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r104086 | russell | 2008-02-25 12:38:10 -0600 (Mon, 25
	  Feb 2008) | 4 lines Ensure that the channel doesn't disappear in
	  agent_logoff(). If it does, it could cause a crash. (fixes the
	  crash reported in BE-396) ........

2008-02-25 16:18 +0000 [r104081-104085]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 104084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104084 | file | 2008-02-25 12:16:13 -0400 (Mon, 25 Feb 2008) | 6
	  lines If a resubscription comes in for a dialog we no longer know
	  about tell the remote side that the dialog does not exist so they
	  subscribe again using a new dialog. (closes issue #10727)
	  Reported by: s0l4rb03 Patches: 10727-2.diff uploaded by file
	  (license 11) ........

	* /, channels/chan_sip.c: Merged revisions 104082 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104082 | file | 2008-02-25 11:17:18 -0400 (Mon, 25 Feb 2008) | 6
	  lines Due to recent changes tag will no longer be NULL if not
	  present so we have to use ast_strlen_zero to see if it's actually
	  blank. (closes issue #12061) Reported by: flefoll Patches:
	  chan_sip.c.br14.patch_pedantic_no_totag uploaded by flefoll
	  (license 244) ........

	* res/res_config_pgsql.c: Fix building of trunk. dbpass is always
	  going to exist.

2008-02-24 02:37 +0000 [r104073-104074]  Steve Murphy <murf@digium.com>

	* channels/chan_sip.c: Enforce a space between function args as per
	  code review.

	* res/res_config_pgsql.c: On a 64-bit machine, with dev-mode turned
	  on, and pgsql installed, I get warnings that stops the compile.
	  They are fixed now.

2008-02-22 23:56 +0000 [r104045]  Doug Bailey <dbailey@digium.com>

	* channels/chan_zap.c, configure, configure.ac: Add protection to
	  chan_zap build when NEONMWI events are not defined

2008-02-22 22:55 +0000 [r104036-104039]  Tilghman Lesher <tlesher@digium.com>

	* doc/manager_1_1.txt, main/manager.c, UPGRADE.txt, CHANGES,
	  include/asterisk/manager.h: Move Originate to a separate
	  privilege and require the additional System privilege to call out
	  to a subshell.

	* /, channels/chan_sip.c: Merged revisions 104037 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104037 | tilghman | 2008-02-22 16:45:14 -0600 (Fri, 22 Feb 2008)
	  | 6 lines Backwards debug message. (closes issue #12052) Reported
	  by: flefoll Patches: chan_sip.c.br14.patch_found-notfound
	  uploaded by flefoll (license 244) ........

	* res/res_config_pgsql.c: Allow database password to be NULL and
	  several other cleanups. (closes issue #12048) Reported by: bukaj
	  Patches: 20080222__bug12048.diff.txt uploaded by Corydon76
	  (license 14) Tested by: bukaj

2008-02-21 21:27 +0000 [r104031]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: fix a typo

2008-02-21 21:09 +0000 [r104025-104029]  Mark Michelson <mmichelson@digium.com>

	* res/res_agi.c: Instead of a notice, make the message about a
	  hung-up channel a debug message, and revert the original logic on
	  the if statement. Thanks to Juggie for bringing this to my
	  attention.

2008-02-21 17:38 +0000 [r104024]  Doug Bailey <dbailey@digium.com>

	* channels/chan_zap.c: Added configuration distinction between neon
	  and fsk mwi detection Add the detection for neon MWI events got
	  rid of extraneous handle_init_event call in monitor loop

2008-02-21 16:46 +0000 [r104020]  Mark Michelson <mmichelson@digium.com>

	* res/res_agi.c: Don't print the fact that we are using dead mode
	  in AGI if called from the 'h' extension since it is well-known
	  that it will be running in dead mode. (closes issue #12046)
	  Reported by: explidous

2008-02-21 16:44 +0000 [r104019]  Joshua Colp <jcolp@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Disable epoll as it has caused more obscure issues then any of my
	  previous code. I will continue to work on it in a separate branch
	  to make it stable for a release and test it against the following
	  issues. (closes issue #11253) Reported by: falves11 (closes issue
	  #11657) Reported by: davevg (closes issue #11033) Reported by:
	  falves11

2008-02-21 14:44 +0000 [r104016]  Kevin P. Fleming <kpfleming@digium.com>

	* main/manager.c, /: Merged revisions 104015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r104015 | kpfleming | 2008-02-21 08:33:51 -0600 (Thu, 21 Feb
	  2008) | 2 lines reduce the likelihood that HTTP Manager session
	  ids will consist of primarily '1' bits ........

2008-02-21 05:21 +0000 [r104014]  Tilghman Lesher <tlesher@digium.com>

	* utils/astman.c: Ignore some more unused generated events. (closes
	  issue #12042) Reported by: junky Patches: astman_events.diff
	  uploaded by junky (license 177)

2008-02-20  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta4 released.

2008-02-20 22:34 +0000 [r103957]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 103956 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103956 | mmichelson | 2008-02-20 16:32:22 -0600 (Wed, 20 Feb
	  2008) | 8 lines Clear up confusion when viewing the
	  QUEUE_WAITING_COUNT of a "dead" realtime queue. Since from the
	  user's perspective, the queue does exist, we shouldn't tell them
	  we couldn't find the queue. Instead since it is a dead queue,
	  report a 0 waiting count This issue was brought up on IRC by jmls
	  ........

2008-02-20 22:29 +0000 [r103954-103955]  Joshua Colp <jcolp@digium.com>

	* channels/chan_h323.c: Try to do Packet2Packet bridging with
	  chan_h323 if reinviting isn't enabled. (closes issue #11901)
	  Reported by: pj

	* channels/chan_zap.c, /: Merged revisions 103953 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103953 | file | 2008-02-20 18:06:59 -0400 (Wed, 20 Feb 2008) | 6
	  lines Don't wait for additional digits when overlap dialing is
	  enabled if the setup message contains the sending_complete
	  information element. (closes issue #11785) Reported by: klaus3000
	  Patches: sending_complete_overlap_asterisk-1.4.17.patch.txt
	  uploaded by klaus3000 (license 65) ........

2008-02-20 21:41 +0000 [r103908]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_local.c, /: Merged revisions 103904 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103904 | mmichelson | 2008-02-20 15:40:08 -0600 (Wed,
	  20 Feb 2008) | 6 lines Fix a crash if the channel becomes NULL
	  while attempting to lock it. (closes issue #12039) Reported by:
	  danpwi ........

2008-02-20 21:36 +0000 [r103903]  Jason Parker <jparker@digium.com>

	* include/asterisk/dsp.h, main/dsp.c: Largely refactor DSP tone
	  detection routines. Separate fax detection from digit detected.
	  Added CED (called) tone detection for fax (previously, only CNG
	  (calling) was supported). Separate DTMF/MF code paths where
	  appropriate. Allow detection of arbitary tones. (closes issue
	  #11796) Reported by: dimas Patches: v6-dsp-faxtones.patch
	  uploaded by dimas (license 88) Tested by: dimas, IgorG, Cache

2008-02-20 21:08 +0000 [r103902]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Fix a crash due to the wrong variable being
	  used when building a directory string. (closes issue #12027)
	  Reported by: jaroth Patches: forward.patch uploaded by jaroth
	  (license 50) Tested by: jaroth

2008-02-20 18:29 +0000 [r103846-103847]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/sched.h: Add some documentation fixups

	* /, main/stdtime/localtime.c: Merged revisions 103845 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103845 | tilghman | 2008-02-20 11:53:00 -0600 (Wed, 20
	  Feb 2008) | 7 lines Compat fix for Solaris (closes issue #12022)
	  Reported by: asgaroth Patches: 20080219__bug12022.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: asgaroth ........

2008-02-20 15:21 +0000 [r103844]  Mark Michelson <mmichelson@digium.com>

	* res/res_monitor.c: Fix another spot where a hard-coded '|' hadn't
	  been converted to ',' (closes issue #12034) Reported by: kowalma

2008-02-20 03:52 +0000 [r103838-103842]  Joshua Colp <jcolp@digium.com>

	* main/audiohook.c: *mumble*

	* main/audiohook.c: file not found.

	* main/audiohook.c: Minor test...

2008-02-20 00:49 +0000 [r103833]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: When using IMAP storage, if the folder you
	  attempt to save to does not exist, create it first. (closes issue
	  #12032) Reported by: jaroth Patches: createfolder.patch uploaded
	  by jaroth (license 50) Tested by: jaroth

2008-02-19 22:35 +0000 [r103831-103832]  Jason Parker <jparker@digium.com>

	* main/channel.c: Make sure to mask out non-audio first as well

	* main/channel.c: Maybe we should set the value before we test it?
	  Fixes an issue people have been seeing (unreported?) with file
	  playback not working.

2008-02-19 21:54 +0000 [r103824-103828]  Joshua Colp <jcolp@digium.com>

	* main/loader.c: Add a log message that appears when you try to
	  unload a module that isn't loaded. (closes issue #12033) Reported
	  by: jamesgolovich Patches: asterisk-loader.diff.txt uploaded by
	  jamesgolovich (license 176)

	* main/file.c: Only output a log message saying the format does not
	  exist if it actually does not exist, not if the file itself could
	  not be opened. (closes issue #11828) Reported by: IgorG Patches:
	  readfile.v1.diff uploaded by IgorG (license 20)

	* /, channels/h323/ast_h323.cxx: Merged revisions 103823 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103823 | file | 2008-02-19 16:28:08 -0400 (Tue, 19 Feb 2008) | 6
	  lines Send CallerID Name in setup message. (closes issue #11241)
	  Reported by: tusar Patches: h323id_as_callerid_name.patch
	  uploaded by tusar (license 344) ........

2008-02-19 20:06 +0000 [r103822]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /: Merged revisions 103821 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103821 | russell | 2008-02-19 14:02:49 -0600 (Tue, 19
	  Feb 2008) | 8 lines Account for the fact that the "other" channel
	  can disappear while the local pvt is not locked. (fixes a problem
	  introduced in rev 100581) (closes issue #12012) Reported by:
	  stevedavies Patch by me ........

2008-02-19 19:27 +0000 [r103819-103820]  Joshua Colp <jcolp@digium.com>

	* apps/app_authenticate.c: len already contains the position we
	  want to examine, if we move one left again we'll actually
	  probably be looking at a digit. (issue #12030) Reported by:
	  alligosh

	* apps/app_channelredirect.c, UPGRADE.txt, CHANGES: Add
	  CHANNELREDIRECT_STATUS variable to ChannelRedirect() dialplan
	  application. This will either be set to NOCHANNEL if the given
	  channel was not found or SUCCESS if it worked. (closes issue
	  #11553) Reported by: johan Patches:
	  UPGRADE.txt.channelredirect.patch uploaded by johan (license 334)
	  CHANGES.channelredirect.patch uploaded by johan (license 334)
	  app_channelredirect-20080219.patch uploaded by johan (license
	  334)

2008-02-19 18:14 +0000 [r103818]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_zap.c: (closes issue #11864) Reported by: julianjm
	  Patches: chan_zap.c-1.4-devicestate-v1.diff uploaded by julianjm
	  (license 99) Patch fixes problem of device state incorrectly
	  reporting idle before PBX answers incoming call on FXO channel.
	  Device status is updated now during new channel creation.

2008-02-19 17:33 +0000 [r103808-103813]  Joshua Colp <jcolp@digium.com>

	* /, configure, configure.ac: Merged revisions 103812 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103812 | file | 2008-02-19 13:31:32 -0400 (Tue, 19 Feb
	  2008) | 4 lines Don't look for launchd when cross compiling.
	  (closes issue #12029) Reported by: ovi ........

2008-02-19 00:59 +0000 [r103805]  Tilghman Lesher <tlesher@digium.com>

	* main/say.c: Change verbosity into debug for Hebrew (and various
	  whitespace fixes) (Closes issue #12011)

2008-02-18 23:58 +0000 [r103798-103802]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 103801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103801 | file | 2008-02-18 19:56:48 -0400 (Mon, 18 Feb 2008) |
	  10 lines Ensure that emulated DTMFs do not get interrupted by
	  another begin frame. (closes issue #11740) Reported by: gserra
	  Patches: v1-11740.patch uploaded by dimas (license 88) (closes
	  issue #11955) Reported by: tsearle (closes issue #10530) Reported
	  by: xmarksthespot ........

	* main/channel.c, main/frame.c, channels/chan_sip.c,
	  include/asterisk/channel.h, include/asterisk/frame.h: Add a
	  non-invasive API for application level manipulation of T38 on a
	  channel. This uses control frames (so they can even pass across
	  IAX2) to negotiate T38 and provided a way of getting the current
	  status of T38 using queryoption. This should by no means cause
	  any issues and if it does I will take responsibility for it.
	  (closes issue #11873) Reported by: dimas Patches:
	  v4-t38-api.patch uploaded by dimas (license 88)

	* main/frame.c: Add some missing control frames.

2008-02-18 22:33 +0000 [r103796]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 103795 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103795 | qwell | 2008-02-18 16:28:56 -0600 (Mon, 18 Feb 2008) |
	  1 line Fix previous commit so that we actually disable
	  echocanbridged if echocancel is off. ........

2008-02-18 21:57 +0000 [r103794]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Commit chan_zap portion of #11964: add the
	  ability to get ORIG_CALLED_NUM

2008-02-18 21:30 +0000 [r103791]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 103790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103790 | qwell | 2008-02-18 15:23:32 -0600 (Mon, 18 Feb 2008) |
	  4 lines Correct a message when echocancelwhenbridged is on, but
	  echocancel is not. Closes issue #12019 ........

2008-02-18 20:58 +0000 [r103788]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure EC is enabled when SS7 call comes
	  in. Also add support for multiple DPCs per linkset. #11779

2008-02-18 20:53 +0000 [r103787]  Mark Michelson <mmichelson@digium.com>

	* /, main/app.c: Merged revisions 103786 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103786 | mmichelson | 2008-02-18 14:52:09 -0600 (Mon, 18 Feb
	  2008) | 10 lines There was an invalid assumption when calculating
	  the duration of a file that the filestream in question was
	  created properly. Unfortunately this led to a segfault in the
	  situation where an unknown format was specified in voicemail.conf
	  and a voicemail was recorded. Now, we first check to be sure that
	  the stream was written correctly or else assume a zero duration.
	  (closes issue #12021) Reported by: jakep Tested by: putnopvut
	  ........

2008-02-18 19:47 +0000 [r103783]  Michiel van Baak <michiel@vanbaak.info>

	* main/asterisk.c: make the output of 'core show settings' a bit
	  nicer. (closes issue #12020) Reported by: seanbright Patches:
	  asterisk.c.patch uploaded by seanbright (license 71)

2008-02-18 17:45 +0000 [r103781]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, main/rtp.c: Merged revisions 103780 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103780 | tilghman | 2008-02-18 11:31:52 -0600 (Mon, 18 Feb 2008)
	  | 9 lines When a SIP channel is being auto-destroyed, it's
	  possible for it to still be in bridge code. When that happens, we
	  crash. Delay the RTP destruction until the bridge is ended.
	  (closes issue #11960) Reported by: norman Patches:
	  20080215__bug11960__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: norman ........

2008-02-18  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta3 released.

2008-02-18 17:12 +0000 [r103772]  Olle Johansson <oej@edvina.net>

	* main/channel.c, channels/chan_sip.c: Make sure we can set up
	  calls without audio (text+video). And ... it works!

2008-02-18 16:40 +0000 [r103771]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c, /: Merged revisions 103770 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103770 | mmichelson | 2008-02-18 10:37:31 -0600 (Mon, 18 Feb
	  2008) | 10 lines Fix a linked list corruption that under the
	  right circumstances could lead to a looped list, meaning it will
	  traverse forever. (closes issue #11818) Reported by: michael-fig
	  Patches: 11818.patch uploaded by putnopvut (license 60) Tested
	  by: michael-fig ........

2008-02-18 16:13 +0000 [r103764-103769]  Joshua Colp <jcolp@digium.com>

	* apps/app_channelredirect.c, main/pbx.c, include/asterisk/pbx.h:
	  Add an API call (ast_async_parseable_goto) which parses a goto
	  string and does an async goto instead of an explicit goto.
	  (closes issue #11753) Reported by: johan

	* /, channels/chan_sip.c: Merged revisions 103763 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103763 | file | 2008-02-18 11:33:14 -0400 (Mon, 18 Feb 2008) | 2
	  lines Don't care if the extension given doesn't exist for
	  subscription based MWI. ........

2008-02-18 10:10 +0000 [r103755]  Olle Johansson <oej@edvina.net>

	* CHANGES, channels/chan_iax2.c: - No space in manager event names,
	  please - Add new event to CHANGES

2008-02-18 04:43 +0000 [r103754]  Tilghman Lesher <tlesher@digium.com>

	* build_tools/cflags.xml, main/channel.c, main/pbx.c,
	  funcs/func_channel.c, include/asterisk/channel.h, CHANGES,
	  main/cli.c: Context tracing for channels (closes issue #11268)
	  Reported by: moy Patches:
	  chantrace-datastored-encapsulated-rev94934.patch uploaded by moy
	  (license 222)

2008-02-16 21:22 +0000 [r103750]  Michiel van Baak <michiel@vanbaak.info>

	* channels/chan_skinny.c: move two ast_log calls to ast_debug. Now
	  monitoring chan_skinny port with nagios or zabbix wont generate
	  noise on the console. @ok tilghman

2008-02-15 23:32 +0000 [r103742]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 103741 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103741 | russell | 2008-02-15 17:31:39 -0600 (Fri, 15
	  Feb 2008) | 8 lines Fix a crash in chan_iax2 due to a race
	  condition (closes issue #11780) Reported by: guillecabeza
	  Patches: bug_iax2_jb_1.4.patch uploaded by guillecabeza (license
	  380) bug_iax2_jb_trunk.patch uploaded by guillecabeza (license
	  380) ........

2008-02-15 23:20 +0000 [r103740]  Mark Michelson <mmichelson@digium.com>

	* CHANGES: Document GotoIfTime change from svn revision 103738

2008-02-15 23:14 +0000 [r103739]  Russell Bryant <russell@digium.com>

	* include/asterisk/aes.h: Fix a regression in Asterisk 1.6 related
	  to the use of AES encryption. 1024 was used instead of 128 when
	  using AES from OpenSSL. Many thanks to d1mas for figuring this
	  one out! (closes issue #11946) Reported by: bbhoss Patches:
	  v1-11946.patch uploaded by dimas (license 88)

2008-02-15 23:07 +0000 [r103737-103738]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c: Add proper "false" case behavior to GotoIfTime
	  (closes issue #11719) Reported by: kshumard Patches:
	  gotoiftime.twobranches.patch uploaded by kshumard (license 92)
	  Tested by: kshumard

	* apps/app_voicemail.c: Fix redeclaration of variables when using
	  IMAP storage (closes issue #11988) Reported by: jaroth Patches:
	  variable_cleanup.patch uploaded by jaroth (license 50)

2008-02-15 19:50 +0000 [r103727-103729]  Russell Bryant <russell@digium.com>

	* /, main/loader.c: Merged revisions 103728 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103728 | russell | 2008-02-15 13:50:11 -0600 (Fri, 15 Feb 2008)
	  | 4 lines In the case that you try to directly reload a module
	  has returned AST_MODULE_LOAD_DECLINE, log a message indicating
	  that the module is not fully initialized and must be initialized
	  using "module load". ........

	* /, main/loader.c: Merged revisions 103726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103726 | russell | 2008-02-15 12:33:29 -0600 (Fri, 15 Feb 2008)
	  | 6 lines Don't attempt to execute the reload callback for a
	  module that returned AST_MODULE_LOAD_DECLINE. This fixes a crash
	  that was reported against chan_console in trunk. (closes issue
	  #11953, reported by junky, fixed by me) ........

2008-02-15 17:32 +0000 [r103725]  Mark Michelson <mmichelson@digium.com>

	* doc/tex/imapstorage.tex, /, configure, configure.ac: Merged
	  revisions 103722 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103722 | mmichelson | 2008-02-15 11:26:37 -0600 (Fri, 15 Feb
	  2008) | 8 lines Final round of changes for configure script logic
	  for IMAP Now if a directory is specified, then we will search
	  that directory for a source installation of the IMAP toolkit. If
	  none is found, then we will use that directory as the basis for
	  detecting a package installation of the IMAP c-client. If that
	  check fails, then configure will fail. ........

2008-02-15 17:29 +0000 [r103723]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, channels/chan_sip.c, res/res_phoneprov.c,
	  include/asterisk/extconf.h, channels/misdn/isdn_msg_parser.c,
	  apps/app_queue.c, channels/misdn/isdn_lib.c, main/config.c,
	  main/channel.c, res/res_config_curl.c, channels/misdn/isdn_lib.h,
	  main/ast_expr2f.c, channels/misdn/ie.c,
	  channels/misdn/chan_misdn_config.h, channels/misdn/portinfo.c,
	  include/asterisk/strings.h, res/res_config_ldap.c,
	  include/asterisk/time.h: Fix up some doxygen issues. (closes
	  issue #11996) Patches: bug_11996_doxygen.diff uploaded by snuffy
	  (license 35)

2008-02-15 15:45 +0000 [r103716]  Tilghman Lesher <tlesher@digium.com>

	* utils/conf2ael.c: Remove extraneous copy (closes issue #12002)
	  Reported by: junky Patches: conf2ael.diff uploaded by junky
	  (license 177)

2008-02-15 15:11 +0000 [r103699-103715]  Mark Michelson <mmichelson@digium.com>

	* configure, configure.ac: Merging of changes from 1.4 revision
	  103713.

	* doc/tex/imapstorage.tex, configure, configure.ac: Same changes as
	  made to 1.4 in revision 103710

	* doc/tex/imapstorage.tex: Trunk version of 1.4's imap
	  documentation updates

	* configure, configure.ac: See commit message for svn revision
	  103698. This behavior is the same as what is described there. The
	  difference is that trunk already had the --with-imap=system
	  option, but it only checked the include path for headers in the
	  imap directory and not also the c-client directory.

2008-02-14 21:21 +0000 [r103694]  Jason Parker <jparker@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac: Modify
	  ldap autoconf function, so that an incorrect ldap library is not
	  found on Solaris (it is incompatible). Also removes second check
	  for awk, which causes Solaris to find an incompatible version of
	  awk. (closes issue #11829) Reported by: snuffy Patches:
	  bug-11829.diff uploaded by snuffy (license 35)

2008-02-14 21:04 +0000 [r103687-103691]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 103690 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103690 | mmichelson | 2008-02-14 15:03:02 -0600 (Thu,
	  14 Feb 2008) | 3 lines Fix build for non-IMAP builds ........

	* /, apps/app_voicemail.c: Merged revisions 103688 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103688 | mmichelson | 2008-02-14 14:55:48 -0600 (Thu,
	  14 Feb 2008) | 9 lines Fix the new message count if delete=yes
	  when using IMAP storage. (closes issue #11406) Reported by:
	  jaroth Patches: deleteflag_v2.patch uploaded by jaroth (license
	  50) Tested by: jaroth ........

	* configs/queues.conf.sample, UPGRADE.txt, apps/app_queue.c: Change
	  the queue holdtime announcement to happen at any interval (not
	  just greater than two minutes). Remove the saying of less-than
	  for holdtime announcements since it can lead to awkward holdtime
	  announcements. Using '1' as a queue-round-seconds value is no
	  longer valid. (closes issue #9736) Reported by: caio1982 Patches:
	  queue_announce5.diff uploaded by caio1982 (license 22) Tested by:
	  caio1982, putnopvut

2008-02-14 19:52 +0000 [r103685]  Jason Parker <jparker@digium.com>

	* /, funcs/func_cdr.c: Merged revisions 103683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103683 | qwell | 2008-02-14 13:51:10 -0600 (Thu, 14 Feb 2008) |
	  5 lines Document the 'l' option to the CDR() function. (Thanks
	  voipgate for pointing out the option, and Leif for providing text
	  for it.) Closes issue #11695. ........

2008-02-14 19:47 +0000 [r103682]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_externalivr.c: a few syntax changes and safer code

2008-02-14 18:39 +0000 [r103677]  Jason Parker <jparker@digium.com>

	* channels/chan_iax2.c: Add periodic jitter stats to CLI and
	  manager. (closes issue #8188) Reported by: stevedavies Patches:
	  jblogging-trunk.patch uploaded by stevedavies
	  jblogging-trunk_wmgrevent.patch uploaded by johann8384
	  updated_jbloggin-trunk_mgrevent.patch uploaded by johann8384
	  (license 190) (with additional changes by me) Tested by:
	  stevedavies, johann8384

2008-02-14 10:19 +0000 [r103668]  Olle Johansson <oej@edvina.net>

	* res/res_agi.c, apps/app_externalivr.c: Formatting fixes

2008-02-13 21:04 +0000 [r103662]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_externalivr.c: (closes issue #11825) Reported by:
	  ctooley Patches: additional_eivr_commands.patch uploaded by
	  ctooley (license 136) Tested by: ctooley

2008-02-13 15:47 +0000 [r103658]  Mark Michelson <mmichelson@digium.com>

	* UPGRADE.txt, res/res_musiconhold.c: 1. Deprecate SetMusicOnHold
	  and WaitMusicOnHold. 2. Add a duration parameter to MusicOnHold
	  (closes issue #11904) Reported by: dimas Patches: v2-moh.patch
	  uploaded by dimas (license 88) Tested by: dimas

2008-02-13 00:55 +0000 [r103559]  Mark Michelson <mmichelson@digium.com>

	* main/event.c: Fix a small logic error in ast_event_iterator_next.
	  The previous logic allowed for the iterator to indicate there was
	  more data than there really was, causing the iterator read beyond
	  the end of the event structure. This led to invalid memory reads
	  and potential crashes.

2008-02-12 22:26 +0000 [r103447-103506]  Jason Parker <jparker@digium.com>

	* main/manager.c: Even more sane permissions. This should be
	  handled via a umask, like in many other places.

	* main/manager.c: Use slight more sane permissions

2008-02-12 15:39 +0000 [r103387-103388]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: Remove development version notice.

	* main/manager.c: Fix build on *BSD. These permissions constants
	  are not available there.

2008-02-12 15:13 +0000 [r103386]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 103385 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103385 | file | 2008-02-12 11:09:24 -0400 (Tue, 12 Feb 2008) | 4
	  lines Even if no CallerID name or number has been provided by the
	  remote party still use the configured sip.conf ones. (closes
	  issue #11977) Reported by: pj ........

2008-02-12 14:08 +0000 [r103341]  Philippe Sultan <philippe.sultan@gmail.com>

	* include/asterisk/jabber.h, res/res_jabber.c: Use an ast_flags
	  structure in aji_client and aji_buddy rather than an integer.
	  Modify calls to various ast_*_flag macros accordingly.

2008-02-12 00:24 +0000 [r103331]  Jeff Peeler <jpeeler@digium.com>

	* main/manager.c, include/asterisk/config.h, CHANGES,
	  main/config.c: Requested changes from Pari, reviewed by Russell.
	  Added ability to retrieve list of categories in a config file.
	  Added ability to retrieve the content of a particular category.
	  Added ability to empty a context. Created new action to create a
	  new file. Updated delete action to allow deletion by line number
	  with respect to category. Added new action insert to add new
	  variable to category at specified line. Updated action newcat to
	  allow new category to be inserted in file above another existing
	  category.

2008-02-11 22:10 +0000 [r103317-103325]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 103324 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103324 | file | 2008-02-11 18:09:07 -0400 (Mon, 11 Feb 2008) | 4
	  lines If entering a conference with the 'w' option ensure that we
	  can't listen or speak until the marked user appears. (closes
	  issue #11835) Reported by: alanmcmillan ........

	* res/res_agi.c: Remove ast_module_user usage from res_agi. This is
	  taken care of in the core.

	* main/pbx.c, main/manager.c, main/translate.c, main/logger.c,
	  main/app.c, main/utils.c, main/indications.c, main/asterisk.c,
	  main/rtp.c: Just some minor coding style cleanup...

	* main/pbx.c: Fix Manager Redirect while in an AGI. (closes issue
	  #10661) Reported by: junky

2008-02-11 17:09 +0000 [r103316]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configs/zapata.conf.sample: Merged revisions 103315 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103315 | kpfleming | 2008-02-11 11:05:22 -0600 (Mon, 11 Feb
	  2008) | 2 lines improve 2BCT documentation a bit (thanks Jared)
	  ........

2008-02-11 16:17 +0000 [r103313-103314]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, channels/chan_iax2.c: Add support for allowing a
	  native bridge to happen when the L option is enabled. The RTP
	  bridging could already handle this, it just needed to be enabled
	  in the main bridging code. (issue #10647) Reported by: samdell3

	* channels/chan_skinny.c: Change chan_skinny to use debug messages
	  as appropriate. (closes issue #11967) Reported by: mvanbaak
	  Patches: 2008021000-skinnydebug.diff.txt uploaded by mvanbaak
	  (license 7)

2008-02-11 06:05 +0000 [r103306]  James Golovich <james@gnuinter.net>

	* channels/chan_sip.c: Don't wipe out transport and fd in chan_sip
	  on reload (issue #11930)

2008-02-11 03:03 +0000 [r103282-103284]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Fix improper indentation. Thanks again to
	  snuffy for pointing it out.

	* apps/app_queue.c: Add a couple of comments to clarify the
	  unreffing of queues. Thanks to snuffy for the idea.

	* main/event.c: Fix a problem regarding network vs. host byte order
	  in the event API. ast_event_iterator_get_ie_type should return
	  the ie type in host byte order. Furthermore, ast_event_get_ie_raw
	  should already have its ie type argument in host byte order since
	  it could be called externally (and it in fact is called in this
	  way by ast_event_get_cached).

2008-02-09 11:27 +0000 [r103249]  Michiel van Baak <michiel@vanbaak.info>

	* apps/app_dial.c, apps/app_dictate.c, apps/app_echo.c,
	  apps/app_authenticate.c, apps/app_disa.c, apps/app_chanisavail.c,
	  apps/app_exec.c, apps/app_db.c, apps/app_controlplayback.c,
	  apps/app_channelredirect.c, apps/app_directed_pickup.c,
	  apps/app_dumpchan.c, apps/app_amd.c, apps/app_externalivr.c,
	  apps/app_directory.c, apps/app_chanspy.c, apps/app_cdr.c:
	  whitespace fixes only.

2008-02-09 06:33 +0000 [r103198]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 103197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103197 | tilghman | 2008-02-09 00:23:49 -0600 (Sat, 09
	  Feb 2008) | 4 lines Commit fix for being unable to send voicemail
	  from VoiceMailMain Reported by: William F Acker (via the -users
	  mailing list) Patch by: Corydon76 (license 14) ........

2008-02-08 21:26 +0000 [r103171]  Russell Bryant <russell@digium.com>

	* main/udptl.c, main/pbx.c, channels/chan_sip.c,
	  channels/chan_iax2.c, res/res_jabber.c, apps/app_playback.c,
	  main/rtp.c, channels/chan_usbradio.c, main/cdr.c,
	  channels/chan_skinny.c, apps/app_minivm.c, res/res_agi.c,
	  pbx/pbx_ael.c, pbx/pbx_dundi.c, funcs/func_devstate.c,
	  apps/app_rpt.c, main/asterisk.c, channels/chan_mgcp.c,
	  apps/app_voicemail.c: Merge changes from
	  team/mvanbaak/cli-command-audit (closes issue #8925) About a year
	  ago, as Leif Madsen and Jim van Meggelen were going over the CLI
	  commands in Asterisk 1.4 for the next version of their book, they
	  documented a lot of inconsistencies. This set of changes
	  addresses all of these issues and has been reviewed by Leif.
	  While this does introduce even more changes to the CLI command
	  structure, it makes everything consistent, which is the most
	  important thing. Thanks to all that helped with this one!

2008-02-08 18:58 +0000 [r103071-103122]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Forgot that AST_LIST_REMOVE_CURRENT takes
	  different arguments in trunk than 1.4.

	* /, apps/app_queue.c: Merged revisions 103120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r103120 | mmichelson | 2008-02-08 12:48:17 -0600 (Fri, 08 Feb
	  2008) | 10 lines Prevent a potential three-thread deadlock. Also
	  added a comment block to explicitly state the locking order
	  necessary inside app_queue. (closes issue #11862) Reported by:
	  flujan Patches: 11862.patch uploaded by putnopvut (license 60)
	  Tested by: flujan ........

	* /, channels/chan_iax2.c: Merged revisions 103070 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r103070 | mmichelson | 2008-02-08 12:00:38 -0600 (Fri,
	  08 Feb 2008) | 6 lines Yield the thread and return -1 if the
	  ioctl fails for Zaptel timing device. (closes issue #11891)
	  Reported by: tzafrir ........

2008-02-08 16:49 +0000 [r103044]  Russell Bryant <russell@digium.com>

	* UPGRADE-1.2.txt (added), UPGRADE-1.4.txt (added), UPGRADE.txt: At
	  the request of ManxPower, include the UPGRADE.txt from 1.2 and
	  1.4, as well. This way, if people need to go back and review what
	  was deprecated in previous major releases, it is readily
	  available to them. Thanks for the suggestion!

2008-02-08 15:31 +0000 [r102969-103018]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Fix a network byte order issue and ensure
	  when creating an outgoing dialog that the socket always contains
	  information such as type and port. (closes issue #11916) Reported
	  by: mnnojd

	* /, channels/chan_iax2.c: Merged revisions 102968 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r102968 | file | 2008-02-08 11:08:20 -0400 (Fri, 08 Feb
	  2008) | 4 lines Make sure the presence of dbsecret is factored
	  into user scoring. (closes issue #11952) Reported by: bbhoss
	  ........

2008-02-07 21:37 +0000 [r102933]  Mark Michelson <mmichelson@digium.com>

	* apps/app_chanspy.c: This is a combination new feature/bug fix for
	  app_chanspy. New feature: Add the 'e' option, which takes as an
	  argument a list of interfaces separated by colons. This way, you
	  will only be able to spy on this limited list of interfaces. Bug
	  fix: change some pointer checks to ast_strlen_zero so that spying
	  would work properly even if no channel was specified as the first
	  argument to chanspy. (closes issue #10072) Reported by:
	  xmarksthespot Patches:
	  bugfix+newfeature10072patchtotrunkrev102726.diff uploaded by
	  xmarksthespot (license 16) Tested by: xmarksthespot, mvanbaak

2008-02-07 21:08 +0000 [r102906-102908]  Michiel van Baak <michiel@vanbaak.info>

	* apps/app_adsiprog.c: whitespace fixes only

	* apps/app_alarmreceiver.c: There she goes! First commit from me to
	  trunk \o/ Make app_alarmreceiver honor code guidelines and fix
	  whitespace errors. No functional changes.

2008-02-07 20:02 +0000 [r102859]  Jason Parker <jparker@digium.com>

	* /, main/features.c: Merged revisions 102858 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102858 | qwell | 2008-02-07 13:53:55 -0600 (Thu, 07 Feb 2008) |
	  7 lines Specify which digit string was matched in debug message.
	  (closes issue #11949) Reported by: dimas Patches:
	  v1-feature-debug.patch uploaded by dimas (license 88) ........

2008-02-07 16:47 +0000 [r102808]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configs/zapata.conf.sample: Merged revisions 102807 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102807 | kpfleming | 2008-02-07 10:41:55 -0600 (Thu, 07 Feb
	  2008) | 2 lines document usage of 'transfer' configuration option
	  for ISDN PRI switch-side transfers ........

2008-02-06 20:12 +0000 [r102777]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Add the channel's unique id to the AgentCalled
	  manager event to make it more consistent with other manager
	  events.

2008-02-06 18:01 +0000 [r102726]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 102725 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102725 | file | 2008-02-06 13:59:23 -0400 (Wed, 06 Feb 2008) | 2
	  lines Only consider a T.38-only INVITE compatible if we have both
	  a joint capability between us and them and if they provided T.38.
	  ........

2008-02-06 16:23 +0000 [r102700]  Terry Wilson <twilson@digium.com>

	* funcs/func_realtime.c: Add REALTIME_STORE and REALTIME_DESTROY
	  dialplan functions provided by sergee. I just added the ability
	  to set multiple fields at once after discussions with Tilghman
	  and Russell. Currently limited to 30 fields. (closes issue
	  #11887) Reported by: sergee Patches:
	  rt-func-store-destroy-multivalue.diff uploaded by otherwiseguy
	  (license 396) Tested by: sergee, otherwiseguy

2008-02-06 15:20 +0000 [r102652]  Russell Bryant <russell@digium.com>

	* /, configs/features.conf.sample: Merged revisions 102651 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102651 | russell | 2008-02-06 09:19:41 -0600 (Wed, 06 Feb 2008)
	  | 3 lines Clarify setting DYNAMIC_FEATURES so that it gets
	  inherited by outbound channels. (due to a discussion between me
	  and a user via email) ........

2008-02-06 03:05 +0000 [r102602]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 102576 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r102576 | tilghman | 2008-02-05 18:26:02 -0600 (Tue, 05
	  Feb 2008) | 4 lines Move around some defines to unbreak ODBC
	  storage. (closes issue #11932) Reported by: snuffy ........

2008-02-06 00:08 +0000 [r102501-102550]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Remove an extra debug message I left in

	* channels/chan_unistim.c, apps/app_dial.c, main/pbx.c,
	  apps/app_privacy.c, apps/app_alarmreceiver.c, res/res_jabber.c,
	  apps/app_followme.c, main/loader.c, channels/chan_usbradio.c,
	  main/tcptls.c, res/res_agi.c, apps/app_minivm.c,
	  apps/app_dumpchan.c, main/logger.c, apps/app_zapras.c,
	  main/astmm.c: Get rid of any remaining ast_verbose calls in the
	  code in favor of ast_verb (closes issue #11934) Reported by:
	  mvanbaak Patches: 20080205_astverb-2.diff.txt uploaded by
	  mvanbaak (license 7)

	* apps/app_voicemail.c: Change verbose messages to use the ast_verb
	  macro. (closes issue #11931) Reported by: snuffy Patches:
	  bug-11931.diff uploaded by snuffy (license 35)

2008-02-05 20:51 +0000 [r102500]  Jason Parker <jparker@digium.com>

	* main/pbx.c: Change where priority of a goto is adjusted.
	  Partially reverts 102272. Closes issue #11929 (credit to file for
	  fix suggestion - we still <3 you)

2008-02-05 20:03 +0000 [r102454]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_mgcp.c: Merged revisions 102453 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r102453 | mmichelson | 2008-02-05 14:02:44 -0600 (Tue,
	  05 Feb 2008) | 8 lines Clear the DTMF buffer on hangup. (closes
	  issue #11919) Reported by: eferro Patches:
	  mgcp_dtmfclean_on_hangup.diff uploaded by eferro (license 337)
	  Tested by: eferro ........

2008-02-05 19:58 +0000 [r102379-102452]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Yeah yeah, I broke building on trunk. Shoot
	  me.

	* /, channels/chan_sip.c: Merged revisions 102450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102450 | file | 2008-02-05 15:52:30 -0400 (Tue, 05 Feb 2008) | 3
	  lines If a REGISTER attempt comes in that is a retransmission of
	  a previous REGISTER do not create a new nonce value. (issue
	  #BE-381) ........

	* /, res/res_clioriginate.c: Merged revisions 102378 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r102378 | file | 2008-02-05 11:09:29 -0400 (Tue, 05 Feb
	  2008) | 4 lines Perform dialing asynchronously when using the
	  originate CLI command so the CLI does not appear to block.
	  (closes issue #11927) Reported by: bbhoss ........

2008-02-04 21:15 +0000 [r102329]  Tilghman Lesher <tlesher@digium.com>

	* utils/muted.c, /, configure, include/asterisk/autoconfig.h.in,
	  configure.ac, main/asterisk.c: Merged revisions 102323 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102323 | tilghman | 2008-02-04 15:06:09 -0600 (Mon, 04 Feb 2008)
	  | 7 lines Cross-platform fix: OS X now deprecates the use of the
	  daemon(3) API. (closes issue #11908) Reported by: oej Patches:
	  20080204__bug11908.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: Corydon76 ........

2008-02-04 18:39 +0000 [r102297]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c: Add line numbers to warning/error messages
	  (and pretty up some existing ones). (closes issue #11894)
	  Reported by: jmls Patches: chan_zap.patch uploaded by jmls
	  (license 141)

2008-02-04 15:16 +0000 [r102272]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c: Update handling of asyncgoto so it properly works on
	  channels that are currently executing a PBX. (closes issue
	  #11914) Reported by: arnd (closes issue #11753) Reported by:
	  johan

2008-02-04 14:37 +0000 [r102262]  Jason Parker <jparker@digium.com>

	* configs/extensions.ael.sample, configs/extensions.lua.sample:
	  Change examples to use G here also. Closes issue #11875

2008-02-04 05:32 +0000 [r102190-102238]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 102214 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r102214 | tilghman | 2008-02-03 23:10:02 -0600 (Sun, 03
	  Feb 2008) | 6 lines Missing braces. (closes issue #11912)
	  Reported by: dimas Patches: sprintf.patch uploaded by dimas
	  (license 88) ........

	* main/manager.c: CoreSettings and CoreStatus are missing the
	  terminating "\r\n". Also, some miscellaneous spacing and
	  initialization issues. (closes issue #11909) Reported by: srt
	  Patches: patch-11909-2.diff uploaded by srt (license 378) Tested
	  by: srt

2008-02-03 16:46 +0000 [r102091-102143]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 102142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102142 | oej | 2008-02-03 17:38:12 +0100 (SÃ¶n, 03 Feb 2008) | 8
	  lines Use the same CSEQ on CANCEL as on INVITE (according to RFC
	  3261) (closes issue #9492) Reported by: kryptolus Patches:
	  bug9492.txt uploaded by oej (license 306) Tested by: oej ........

	* /, channels/chan_sip.c: Merged revisions 102090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r102090 | oej | 2008-02-03 11:37:32 +0100 (SÃ¶n, 03 Feb 2008) | 8
	  lines Handle ACK and CANCEL in an invite transaction - even if we
	  get INFO transactions during the actual call setup. (closes issue
	  #10567) Reported by: jacksch Tested by: oej Patch by: oej
	  inspired by suggestions from neutrino88 in the bug tracker
	  ........

2008-02-03 06:43 +0000 [r102064]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: Change the version number in the
	  configure script from 1.4 to 1.6

2008-02-02 06:10 +0000 [r101990-102037]  Russell Bryant <russell@digium.com>

	* include/asterisk/event.h: The documentation page has to be in its
	  own comment block to work, apparently. Fix it up!

	* /, channels/chan_sip.c: Merged revisions 101989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101989 | russell | 2008-02-01 17:06:32 -0600 (Fri, 01 Feb 2008)
	  | 5 lines Change the SDP_SAMPLE_RATE macro. It turns out that
	  even though G.722 is 16 kHz, it is supposed to specified as 8 kHz
	  in the RTP, and RTP timestamps are supposed to be calculated
	  based on 8 kHz. (Apparently this is due to a bug in a spec, but
	  people follow it anyway, because it's the spec ...) ........

2008-02-01 22:12 +0000 [r101873-101943]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 101942 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r101942 | tilghman | 2008-02-01 15:54:28 -0600 (Fri, 01
	  Feb 2008) | 8 lines Fix the VM_DUR variable for forwarded
	  voicemail, and fixed several other bugs while I'm in the area.
	  (closes issue #11615) Reported by: jamessan Patches:
	  20071226__bug11615__2.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: Corydon76, jamessan ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 101894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101894 | tilghman | 2008-02-01 13:36:12 -0600 (Fri, 01 Feb 2008)
	  | 2 lines Change detection of getifaddrs to use
	  AST_C_COMPILE_CHECK, backported from trunk (as suggested by
	  kpfleming) ........

	* res/res_config_curl.c: Fix multi, when using the LIKE query.
	  (closes issue #11889) Reported by: jmls Patches:
	  res_config_curl.patch uploaded by jmls (license 141) Tested by:
	  jmls

2008-02-01 18:24 +0000 [r101869]  Jason Parker <jparker@digium.com>

	* apps/app_authenticate.c: Comparison, not set :) Thanks mvanbaak.

2008-02-01 18:08 +0000 [r101824]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, configs/res_odbc.conf.sample: Clarify the pooling
	  functionality by changing the config file keyword

2008-02-01 17:44 +0000 [r101823]  Jason Parker <jparker@digium.com>

	* /, apps/app_authenticate.c: Move an feof() call to before the
	  fgets(). This would have exited the loop early if you had an
	  authentication file with no newline at the end.

2008-02-01 17:28 +0000 [r101819-101821]  Russell Bryant <russell@digium.com>

	* /, apps/app_authenticate.c: Merged revisions 101818 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r101818 | russell | 2008-02-01 11:23:47 -0600 (Fri, 01
	  Feb 2008) | 4 lines Don't overwrite the last character of a line
	  if it's not a newline. This would happen if the last line in the
	  file doesn't have a newline. (pointed out by Qwell) ........

2008-02-01 16:01 +0000 [r101773]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/acl.c: Merged revisions 101772 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101772 | tilghman | 2008-02-01 09:55:58 -0600 (Fri, 01 Feb 2008)
	  | 2 lines Compatibility fix for OpenWRT (reported by Brian
	  Capouch via the mailing list) ........

2008-02-01 06:27 +0000 [r101694-101746]  Russell Bryant <russell@digium.com>

	* apps/app_authenticate.c: simplify some code, tweak formatting,
	  and reduce indentation

	* apps/app_authenticate.c: reduce a level of indentation

	* apps/app_channelredirect.c: Get rid of a goto where there was no
	  extra cleanup happening at the exit point

	* /, channels/chan_iax2.c: Merged revisions 101693 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r101693 | russell | 2008-01-31 18:32:49 -0600 (Thu, 31
	  Jan 2008) | 8 lines Add some more sanity checking on IAX2 dial
	  strings for the case that no peer or hostname was provided, which
	  is the one part of the dial string that is absolutely required.
	  If it's not there, bail out. (closes issue #11897) Reported by
	  sokhapkin Patch by me ........

2008-02-01 00:08 +0000 [r101650]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_amd.c: Merged revisions 101649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101649 | mmichelson | 2008-01-31 18:06:37 -0600 (Thu, 31 Jan
	  2008) | 9 lines From bugtracker: "fix totalAnalysisTime to handle
	  periods of no channel activity" (closes issue #9256) Reported by:
	  cmaj Patches: amd-dont-wait-too-long-for-frames-take3.diff.txt
	  uploaded by cmaj (license 111) Tested by: cmaj, skygreg, ZX81,
	  rjain ........

2008-01-31 23:14 +0000 [r101611]  Russell Bryant <russell@digium.com>

	* /, main/translate.c, main/file.c: Merged revisions 101601 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101601 | russell | 2008-01-31 17:10:06 -0600 (Thu, 31 Jan 2008)
	  | 12 lines Fix a couple of places where ast_frfree() was not
	  called on a frame that came from a translator. This showed itself
	  by g729 decoders not getting released. Since the flag inside the
	  translator frame never got unset by freeing the frame to indicate
	  it was no longer in use, the translators never got destroyed, and
	  thus the g729 licenses were not released. (closes issue #11892)
	  Reported by: xrg Patches: 11892.diff uploaded by russell (license
	  2) Tested by: xrg, russell ........

2008-01-31 22:12 +0000 [r101578-101580]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Forgot an !

	* apps/app_queue.c: A change I made to accommodate the "linear"
	  strategy in trunk caused queue strategies to not be loaded from
	  realtime queues. This commit fixes that. Thanks to jmls for
	  pointing this problem out to me on IRC. This also contains some
	  changes to S_OR where it should be used. Thanks to Qwell for
	  pointing these out.

2008-01-31 21:33 +0000 [r101577]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Fix a simple deadlock that was introduced
	  _right_ before this code got merged into trunk. (closes issue
	  #11895, reported by pj, patched by me)

2008-01-31 21:31 +0000 [r101532-101576]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Handle the case of a NULL state_interface when
	  checking a realtime member. Thanks to jmls for finding this
	  issue.

	* /, res/res_monitor.c: Merged revisions 101531 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101531 | mmichelson | 2008-01-31 15:00:24 -0600 (Thu, 31 Jan
	  2008) | 10 lines 1. Prevent the addition of an extra '/' to the
	  beginning of an absolute pathname. 2. If ast_monitor_change_fname
	  is called and the new filename is the same as the old, then exit
	  early and don't set the filename_changed field in the monitor
	  structure. Setting it in this case was causing ast_monitor_stop
	  to erroneously delete them. (closes issue #11741) Reported by:
	  garlew Tested by: putnopvut ........

2008-01-31 19:54 +0000 [r101483]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c, channels/chan_iax2.c: Merged revisions
	  101482 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101482 | qwell | 2008-01-31 13:52:49 -0600 (Thu, 31 Jan 2008) |
	  4 lines Solaris compat fixes for struct in_addr funkiness. Issue
	  #11885, patch by snuffy. ........

2008-01-31 19:43 +0000 [r101481]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 101480 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101480 | murf | 2008-01-31 12:30:37 -0700 (Thu, 31 Jan 2008) | 1
	  line closes issue #11845; that's the one where there's a 1004
	  byte cdr leak with every AMI Redirect to a zap channel ........

2008-01-31 19:20 +0000 [r101416-101449]  Russell Bryant <russell@digium.com>

	* /, channels/chan_agent.c: Merged revisions 101433 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r101433 | russell | 2008-01-31 13:17:05 -0600 (Thu, 31
	  Jan 2008) | 2 lines Add more missing locking of the agents list
	  ... ........

	* /, channels/chan_agent.c: Merged revisions 101413-101414 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101413 | russell | 2008-01-31 13:04:52 -0600 (Thu, 31 Jan 2008)
	  | 2 lines Add missing locking to the find_agent() function.
	  ........ r101414 | russell | 2008-01-31 13:07:46 -0600 (Thu, 31
	  Jan 2008) | 3 lines Move the locking from find_agent() into the
	  agent dialplan function handler to ensure that the agent doesn't
	  disappear while we're looking at it. ........

2008-01-31 15:36 +0000 [r101393]  Joshua Colp <jcolp@digium.com>

	* funcs/func_realtime.c: Add missing braces. (closes issue #11886)
	  Reported by: sergee Patches: func_realtime_fix-r101392.diff
	  uploaded by sergee (license 138)

2008-01-31 05:28 +0000 [r101373]  Russell Bryant <russell@digium.com>

	* CHANGES: remove entry that is no longer in the tree

2008-01-30 23:10 +0000 [r101344]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: The deprecation of "username" in favor of
	  "defaultuser" for SIP peers unfortunately broke realtime
	  configurations which still used the "username" field. This was
	  taken care of properly when reading from realtime but was not
	  handled properly when updating a realtime peer. This change also
	  adds a deprecation NOTICE CLI message that will print if using
	  the deprecated "username" field. (closes issue #11880) Reported
	  by: cabal95 Patches: 11880.patch uploaded by putnopvut (license
	  60) Tested by: cabal95

2008-01-30 20:08 +0000 [r101322]  Olle Johansson <oej@edvina.net>

	* configs/cli.conf.sample: Clarify configuration file that can be
	  misunderstood

2008-01-30 19:03 +0000 [r101296]  Jason Parker <jparker@digium.com>

	* apps/app_controlplayback.c: Allow disabling the default
	  ffwd/rewind keys in the ControlPlayback application. This is done
	  in a backward compat way. If the "default" key for ffwd/rew is
	  used for another option (such as stop), the "default" is removed.
	  (closes issue #11754) Reported by: johan Patches:
	  app_controlplayback.c.option3.patch uploaded by johan (license
	  334) Tested by: johan, qwell

2008-01-30 17:12 +0000 [r101271]  Olle Johansson <oej@edvina.net>

	* configs/rtppage.conf.sample (removed), apps/app_rtppage.c
	  (removed): Removing applications that wasn't ready for svn trunk,
	  as trunk now has pre-release status.

2008-01-30 16:54 +0000 [r101269]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Make the VoicemailUsersList AMI command
	  consistent with other manager list functions. (closes issue
	  #11874) Reported by: srt Patches: voicemail_ami-11847.patch
	  uploaded by srt (license 378)

2008-01-30 16:39 +0000 [r101267-101268]  Olle Johansson <oej@edvina.net>

	* include/asterisk/rtp.h, main/rtp.c: - doxygen fixes - change
	  function to void because it always returned the same value and no
	  one read it.

	* main/rtp.c: Formatting fixes

2008-01-30 15:42 +0000 [r101224]  Mark Michelson <mmichelson@digium.com>

	* apps/app_rtppage.c: Get trunk to compile

2008-01-30 15:42 +0000 [r101223]  Joshua Colp <jcolp@digium.com>

	* /, main/slinfactory.c: Merged revisions 101222 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101222 | file | 2008-01-30 11:41:04 -0400 (Wed, 30 Jan 2008) | 4
	  lines Fix an issue where if a frame of higher sample size
	  preceeded a frame of lower sample size and ast_slinfactory_read
	  was called with a sample size of the combined values or higher a
	  crash would happen. (closes issue #11878) Reported by: stuarth
	  ........

2008-01-30 15:36 +0000 [r101221]  Olle Johansson <oej@edvina.net>

	* CHANGES: Update CHANGES with rtppage

2008-01-30 15:35 +0000 [r101220]  Jason Parker <jparker@digium.com>

	* /, configs/extensions.conf.sample: Merged revisions 101219 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11875) ........ r101219 | qwell | 2008-01-30 09:34:37
	  -0600 (Wed, 30 Jan 2008) | 5 lines Change default config to use
	  descending channel order of groups, rather than ascending. Fixes
	  a potential source of confusion in glare-type situations. Issue
	  11875, reported by JimVanM. ........

2008-01-30 15:30 +0000 [r101218]  Olle Johansson <oej@edvina.net>

	* configs/rtppage.conf.sample (added), apps/app_rtppage.c (added):
	  Add rtppage() application to do multicast or unicast RTP paging
	  to SIP phones. (closes issue #11797) Reported by: macbrody
	  Patches: app_rtppage-20080130.c uploaded by macbrody (license
	  352)

2008-01-30 15:27 +0000 [r101217]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 101216 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101216 | mmichelson | 2008-01-30 09:23:00 -0600 (Wed, 30 Jan
	  2008) | 5 lines Fix a logic error with regards to autofill. Prior
	  to this change, it was possible for a caller to go out of turn if
	  autofill were enabled and callers ahead in the queue were
	  attempting to call a member. This change fixes this. ........

2008-01-30 12:48 +0000 [r101196]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: simplify this code and eliminate the return
	  value cast that is no longer necessary

2008-01-30 11:27 +0000 [r101153-101154]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, include/asterisk/channel.h: Constifying the
	  interface to get pvt_ids in the bridge, based on suggestion from
	  (const char *) Kevin. Thanks!

	* /, channels/chan_sip.c: Merged revisions 101152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101152 | oej | 2008-01-30 12:20:31 +0100 (Ons, 30 Jan 2008) | 7
	  lines Stop musiconhold on attended transfer. (closes issue
	  #11872) Reported by: gareth Patches: svn-101018.patch uploaded by
	  gareth (license 208) ........

2008-01-30 00:58 +0000 [r101126]  Jason Parker <jparker@digium.com>

	* CHANGES: Fix a typo

2008-01-30 00:04 +0000 [r101082]  Russell Bryant <russell@digium.com>

	* CHANGES, apps/app_speech_utils.c: Add the 'n' option to
	  SpeechBackground, which has the application not answer the
	  channel if it has not already been answered. (closes SPD-51)

2008-01-29 23:59 +0000 [r101081]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, build_tools/make_version: Merged revisions 101080 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r101080 | dhubbard | 2008-01-29 17:50:42 -0600 (Tue, 29
	  Jan 2008) | 1 line updated build_tools to handle the autotag
	  directory structure changes; changes related to BE-353. Patch by
	  The Russell and reviewed by The Me. ........

2008-01-29 23:02 +0000 [r101036]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 101035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r101035 | mmichelson | 2008-01-29 17:02:03 -0600 (Tue, 29 Jan
	  2008) | 3 lines Remove a memory leak from updating realtime
	  queues ........

2008-01-29 22:04 +0000 [r101018]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_curl.c: Oops, a sizeof error

2008-01-29 19:41 +0000 [r100974]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 100973 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100973 | mmichelson | 2008-01-29 13:39:00 -0600 (Tue, 29 Jan
	  2008) | 6 lines Fixing an erroneous return value returned when
	  attempting to pause or unpause a queue member fails. Fixes
	  BE-366, thanks to John Bigelow for writing the patch. ........

2008-01-29 17:44 +0000 [r100933]  Russell Bryant <russell@digium.com>

	* /, main/Makefile: Merged revisions 100932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100932 | russell | 2008-01-29 11:43:41 -0600 (Tue, 29 Jan 2008)
	  | 4 lines Fix the last couple of issues related to building from
	  a path that contains spaces. (closes issue #11834) ........

2008-01-29 17:42 +0000 [r100931]  Jason Parker <jparker@digium.com>

	* /, channels/misdn_config.c: Merged revisions 100930 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r100930 | qwell | 2008-01-29 11:41:43 -0600 (Tue, 29 Jan
	  2008) | 6 lines Initialize an array to 0s if config option not
	  specified. (closes issue #11860) Patches:
	  misdn_get_config.v1.diff uploaded by IgorG (license 20) ........

2008-01-29 17:22 +0000 [r100900-100928]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 100922 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100922 | russell | 2008-01-29 11:21:33 -0600 (Tue, 29 Jan 2008)
	  | 3 lines Use GNU make magic instead of shell magic to escape
	  spaces in the working directory. (related to issue #11834)
	  ........

	* Makefile, /: Merged revisions 100882 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100882 | russell | 2008-01-29 11:06:43 -0600 (Tue, 29 Jan 2008)
	  | 6 lines Fix building Asterisk when the working path has spaces
	  in it. (closes issue #11834) Reported by: spendergrass Patched
	  by: me ........

2008-01-29 16:14 +0000 [r100843]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 100835 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100835 | qwell | 2008-01-29 10:10:00 -0600 (Tue, 29 Jan 2008) |
	  5 lines Allow zap groups above 30 to work properly. (closes issue
	  #11590) Reported by: tbsky ........

2008-01-29 15:30 +0000 [r100833]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Make externip work as documented. If no port
	  is specified it will use the value of bindport instead of always
	  being 5060. (closes issue #11858) Reported by: hmodes

2008-01-29 10:50 +0000 [r100794-100795]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 100793 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r100793 | crichter | 2008-01-29 11:36:19 +0100 (Di, 29
	  Jan 2008) | 1 line fixed potential segfault in misdn show
	  channels CLI command ........

	* channels/chan_misdn.c, /: Merged revisions 96199 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r96199 | crichter | 2008-01-03 13:12:27 +0100 (Do, 03
	  Jan 2008) | 1 line make sure frame is completely clean, before we
	  send it to asterisk as DTMF. If we don't make it clean, it
	  happens that one way audio occurs.. ........

2008-01-29 09:18 +0000 [r100741-100767]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 100740 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100740 | oej | 2008-01-29 09:26:48 +0100 (Tis, 29 Jan 2008) | 8
	  lines (closes issue #11736) Reported by: MVF Patches:
	  bug11736-2.diff uploaded by oej (license 306) Tested by: oej,
	  MVF, revolution (russellb: This was the showstopper for the
	  release.) ........

	* channels/chan_sip.c: Removing code that wasn't supposed to be
	  there at all, only at an experimental stage before I found
	  another solution. Thanks Kevin, for reminding me.

2008-01-28  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta2 released.

2008-01-28 21:11 +0000 [r100679]  Jason Parker <jparker@digium.com>

	* build_tools/menuselect-deps.in, configs/vpb.conf.sample (added),
	  doc/tex/channelvariables.tex, makeopts.in: Reintroduce more
	  chan_vpb stuff that was removed in r100421 and r100422

2008-01-28 21:07 +0000 [r100678]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_vpb.cc (added), configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  channels/Makefile: Re-inserting chan_vpb into trunk.

2008-01-28 21:05 +0000 [r100677]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 100675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100675 | tilghman | 2008-01-28 15:02:02 -0600 (Mon, 28 Jan 2008)
	  | 2 lines WaitExten didn't handle AbsoluteTimeout properly (went
	  to 't' instead of 'T') ........

2008-01-28 21:02 +0000 [r100676]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 100672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11795) ........ r100672 | qwell | 2008-01-28 14:42:43
	  -0600 (Mon, 28 Jan 2008) | 7 lines When using ODBC_STORAGE, make
	  sure we put greeting files into the database like we do with the
	  others. Issue #11795 Reported by: dimas Patches: vmgreet.patch
	  uploaded by dimas (license 88) ........

2008-01-28 20:40 +0000 [r100632-100671]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Fix up some T38 state change issues. (closes
	  issue #11630) Reported by: dimas Patches: v2-sip-t38state.patch
	  uploaded by dimas (license 88)

	* channels/chan_sip.c: Fix up two scheduling issues. In one
	  instance a scheduled item was not deleted when it should have
	  been and in the other it was scheduled again when it shouldn't
	  have been.

2008-01-28 18:41 +0000 [r100630-100631]  Russell Bryant <russell@digium.com>

	* main/features.c: Merge rev 100626 from Asterisk 1.4. The svnmerge
	  of this commit was a NoOp, since res_features doesn't exist in
	  trunk. Thanks to qwell for pointing it out!

	* /, channels/chan_sip.c: Merged revisions 100629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100629 | russell | 2008-01-28 12:34:20 -0600 (Mon, 28 Jan 2008)
	  | 5 lines For some reason, the use of this strdupa() is leading
	  to memory corruption on freebsd sparc64. This trivial workaround
	  fixes it. (closes issue #10300, closes issue #11857, reported by
	  mattias04 and Home-of-the-Brave) ........

2008-01-28 18:27 +0000 [r100628]  Tilghman Lesher <tlesher@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/logger.c: Normalize the detection for execinfo, so that
	  Linux (glibc) and other platforms with libexecinfo will generate
	  inline stack backtraces correctly.

2008-01-28 18:27 +0000 [r100627]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 100626 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100626 | russell | 2008-01-28 12:26:31 -0600 (Mon, 28 Jan 2008)
	  | 7 lines Fix a crash in ast_masq_park_call() (issue #11342)
	  Reported by: DEA Patches: res_features-park.txt uploaded by DEA
	  (license 3) ........

2008-01-28 18:24 +0000 [r100625]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 100624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100624 | qwell | 2008-01-28 12:23:09 -0600 (Mon, 28 Jan 2008) |
	  1 line Correct a comment which made little/no sense. ........

2008-01-28 17:21 +0000 [r100565-100582]  Russell Bryant <russell@digium.com>

	* main/channel.c, channels/chan_local.c, /,
	  include/asterisk/channel.h: Merged revisions 100581 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r100581 | russell | 2008-01-28 11:15:41 -0600 (Mon, 28
	  Jan 2008) | 9 lines Make some deadlock related fixes. These bugs
	  were discovered and reported internally at Digium by Steve Pitts.
	  - Fix up chan_local to ensure that the channel lock is held
	  before the local pvt lock. - Don't hold the channel lock when
	  executing the timing function, as it can cause a deadlock when
	  using chan_local. This actually changes the code back to be how
	  it was before the change for issue #10765. But, I added some
	  other locking that I think will prevent the problem reported
	  there, as well. ........

	* main/pbx.c: Clean up some formatting, and simplify a bit of code
	  using ast_str

2008-01-28 13:57 +0000 [r100549]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Don't do a network byte order conversion
	  when setting the socket's port variable to that of bindaddr's. It
	  is already in the correct network byte order. (closes issue
	  #11800) Reported by: hmodes

2008-01-28 04:43 +0000 [r100514-100533]  Russell Bryant <russell@digium.com>

	* main/channel.c: Make a couple more uses of ARRAY_LEN, and convert
	  some spaces to tabs

	* main/channel.c: - Simplify a line with ARRAY_LEN() - Make a few
	  little formatting changes

	* main/channel.c: These readlocks always fail for me on my mac, and
	  I saw it happen again today on another mac. We ignore the return
	  value of locking operations almost everywhere in Asterisk. So,
	  ignore these, as well, so Asterisk will actually work on systems
	  where this is occurring while I look into what the issue is.

2008-01-27 23:14 +0000 [r100488-100497]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_sip.c, include/asterisk/sched.h,
	  channels/chan_iax2.c: With the switch to the ast_sched_replace*
	  API in trunk, we lose the correction that was just merged from
	  1.4, so this is a changeover to those APIs to use the macro
	  versions, so that we properly detect errors from ast_sched_del,
	  instead of simply ignoring the return values.

	* main/cdr.c, channels/chan_misdn.c, main/dnsmgr.c, /,
	  channels/chan_sip.c, channels/chan_h323.c,
	  include/asterisk/sched.h, main/file.c, pbx/pbx_dundi.c,
	  channels/chan_iax2.c, main/rtp.c, channels/chan_mgcp.c: Merged
	  revisions 100465 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100465 | tilghman | 2008-01-27 15:59:53 -0600 (Sun, 27 Jan 2008)
	  | 11 lines When deleting a task from the scheduler, ignoring the
	  return value could possibly cause memory to be accessed after it
	  is freed, which causes all sorts of random memory corruption.
	  Instead, if a deletion fails, wait a bit and try again (noting
	  that another thread could change our taskid value). (closes issue
	  #11386) Reported by: flujan Patches: 20080124__bug11386.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: Corydon76, flujan,
	  stuarth` ........

2008-01-25 22:54 +0000 [r100421-100422]  Jason Parker <jparker@digium.com>

	* doc/tex/channelvariables.tex: Get rid of that last little bit.

	* build_tools/menuselect-deps.in, configs/vpb.conf.sample
	  (removed), makeopts.in: Remove more remnants of chan_vpb

2008-01-25 22:39 +0000 [r100419-100420]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_vpb.cc (removed), configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  channels/Makefile, .cleancount: Removing chan_vpb from the tree

2008-01-25 21:26 +0000 [r100379]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 100378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100378 | qwell | 2008-01-25 15:24:49 -0600 (Fri, 25 Jan 2008) |
	  2 lines This would have never been true, since we're passing
	  (sizeof(req.data) - 1) as the len to recvfrom(). ........

2008-01-25 20:51 +0000 [r100361]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_rpt.c: correct a real problem and silence an annoying
	  compiler warning

2008-01-25 14:53 +0000 [r100344]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Insure that we are not going to pass a NULL
	  pointer to add_to_interfaces. (closes issue #11840) Reported by:
	  junky

2008-01-25 02:52 +0000 [r100325]  Joshua Colp <jcolp@digium.com>

	* main/dial.c, include/asterisk/dial.h: Add an API call that steals
	  the answered channel so that a destruction of the dialing
	  structure does not hang it up.

2008-01-24 22:58 +0000 [r100307]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, build_tools/make_defaults_h: Use the set ASTDBDIR as
	  the default, too

2008-01-24 22:36 +0000 [r100305-100306]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/app.h: ummm... might be good if this macro
	  argument was actually used :-)

	* include/asterisk/app.h: add the ability to define a structure
	  type for argument parsing when it would be useful to be able to
	  pass it between functions

2008-01-24 22:02 +0000 [r100266]  James Golovich <james@gnuinter.net>

	* channels/chan_sip.c: Fix simple whitespace issue

2008-01-24 22:01 +0000 [r100265]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/app.h, /: Merged revisions 100264 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r100264 | kpfleming | 2008-01-24 15:57:41 -0600 (Thu, 24
	  Jan 2008) | 2 lines make these macros not assume that the only
	  other field in the structure is 'argc'... this is true when
	  someone uses AST_DECLARE_APP_ARGS, but it's perfectly reasonable
	  to define your own structure as long as it has the right fields
	  ........

2008-01-24 20:32 +0000 [r100245]  Joshua Colp <jcolp@digium.com>

	* main/features.c: Minor cosmetic change...

2008-01-24 18:35 +0000 [r100224]  James Golovich <james@gnuinter.net>

	* main/astmm.c: Increase the size of filenames stored when astmm is
	  used. If the path length was long they would be truncated and
	  grouped together with whatever matches

2008-01-24 17:47 +0000 [r100206]  Joshua Colp <jcolp@digium.com>

	* configs/rtp.conf.sample, CHANGES, main/rtp.c: Merge in strictrtp
	  branch. This adds a strictrtp option to rtp.conf which drops
	  packets that do not come from the remote party. (closes issue
	  #8952) Reported by: amorsen

2008-01-24 17:24 +0000 [r100169]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 100164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100164 | russell | 2008-01-24 11:22:09 -0600 (Thu, 24 Jan 2008)
	  | 2 lines Update main Asterisk copyright info to 2008 ........

2008-01-24 16:47 +0000 [r100121-100139]  Jason Parker <jparker@digium.com>

	* /, res/res_phoneprov.c, main/acl.c: Merged revisions 100138 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r100138 | qwell | 2008-01-24 10:41:29 -0600 (Thu, 24 Jan 2008) |
	  6 lines Fix compilation on Solaris. (closes issue #11832)
	  Patches: bug-11832.diff uploaded by snuffy (license 35) ........

	* channels/chan_sip.c, main/features.c: Move chan_local dependency
	  into places (only one) that previously depended on res_features,
	  and used local channels

2008-01-24 15:54 +0000 [r100076-100112]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, channels/chan_sip.c, channels/chan_iax2.c,
	  channels/chan_mgcp.c: Remove dependency on res_features from some
	  channel drivers. It is now part of the core and no longer exists
	  as a module.

	* main/channel.c: Some more cosmetic changes.

	* main/channel.c: Add some spacing.

	* main/dial.c: Test hopefully over.

	* main/dial.c: Testing something...

2008-01-24 00:04 +0000 [r100057]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: fix flag bit definitions to make code from
	  issue #11049 actually work; along the way, clarify comments and
	  add some dummy flag definitions for other multi-bit flags to
	  hopefully stop this from happening in the future (closes issue
	  #11049)

2008-01-23 23:09 +0000 [r100039]  Jason Parker <jparker@digium.com>

	* res/res_features.c (removed), main/Makefile, main/features.c
	  (added), include/asterisk/_private.h, CHANGES, .cleancount,
	  main/asterisk.c, main/loader.c, include/asterisk/features.h: Move
	  code from res_features into (new file) main/features.c

2008-01-23 22:00 +0000 [r100021]  Russell Bryant <russell@digium.com>

	* CREDITS: Add Sergey Tamkovich to CREDITS. Thank you for your
	  contributions!

2008-01-23 21:11 +0000 [r99979-99980]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 99978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99978 | oej | 2008-01-23 22:07:16 +0100 (Ons, 23 Jan 2008) | 7
	  lines Second attempt. Don't change invitestate when receiving 18x
	  messages in CANCEL state. (issue #11736) Reported by: MVF Patch
	  by oej. ........

	* /, channels/chan_sip.c: Merged revisions 99977 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99977 | oej | 2008-01-23 21:58:20 +0100 (Ons, 23 Jan 2008) | 9
	  lines Make sure we don't cancel destruction on calls in CANCEL
	  state, even if we get 183 while waiting for answer on our CANCEL.
	  (issue #11736) Reported by: MVF Patches: bug11736.txt uploaded by
	  oej (license 306) Tested by: MVF ........

2008-01-23 20:26 +0000 [r99976]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_externalivr.c: Merged revisions 99975 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r99975 | mmichelson | 2008-01-23 14:25:00 -0600 (Wed, 23
	  Jan 2008) | 3 lines Fixing a typo. ........

2008-01-23 17:48 +0000 [r99922-99924]  Russell Bryant <russell@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 99923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99923 | russell | 2008-01-23 11:46:55 -0600 (Wed, 23 Jan 2008) |
	  8 lines ChanSpy issues a beep when it starts at the beginning of
	  a list of channels to potentially spy on. However, if there were
	  no matching channels, it would beep at you over and over, which
	  is pretty annoying. Now, it will only beep once in the case that
	  there are no channels to spy on, but it will still beep again
	  once it reaches the beginning of the channel list again. (closes
	  issue #11738, patched by me) ........

	* main/tcptls.c: Fix tcptls build when openssl isn't installed
	  (closes issue #11813) Reported by: tzafrir Patches:
	  asterisk-tcptls.diff.txt uploaded by jamesgolovich (license 176)

2008-01-23 17:27 +0000 [r99920]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c: since echo canceler parameters in Zaptel are
	  now signed integers, allow them during parsing

2008-01-23 15:23 +0000 [r99860]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_h323.c: Progress messages don't work (closes issue
	  #10497) Reported by: pj Patches: h323-announces-r99483.diff
	  uploaded by sergee (license 138) Tested by: pj

2008-01-23 10:18 +0000 [r99839]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: - Add a few comments to sip_xmit - Make sure
	  that we are aware of a pending INVITE even if we're using TCP

2008-01-23 05:29 +0000 [r99696-99818]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Coding guidelines fixups

	* /, apps/app_voicemail.c: Merged revisions 99777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99777 | tilghman | 2008-01-22 22:31:51 -0600 (Tue, 22 Jan 2008)
	  | 8 lines When we reset the password via an external command, we
	  should also reset the password stored in the in-memory list, too
	  (otherwise it doesn't really take effect). (closes issue #11809)
	  Reported by: davetroy Patches: fix_externpass.diff uploaded by
	  davetroy (license 384) ........

	* /, res/res_odbc.c: Merged revisions 99775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99775 | tilghman | 2008-01-22 22:20:15 -0600 (Tue, 22 Jan 2008)
	  | 2 lines Oops, should have checked for a NULL obj, here, too
	  ........

	* res/res_config_ldap.c: Coding guidelines cleanup

	* /, main/acl.c: Merged revisions 99718 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99718 | tilghman | 2008-01-22 18:56:06 -0600 (Tue, 22 Jan 2008)
	  | 2 lines Just confirmed that all current platforms need this
	  header file ........

	* /: Oops

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, doc/ldap.txt (added),
	  configure.ac, configs/res_ldap.conf.sample (added),
	  res/res_config_ldap.c (added), CHANGES, makeopts.in,
	  contrib/scripts/asterisk.ldap-schema (added),
	  contrib/scripts/asterisk.ldif (added): Add res_config_ldap for
	  realtime LDAP engine. (closes issue #5768) Reported by: mguesdon
	  Patches: res_config_ldap-v0.7.tar.gz uploaded by mguesdon
	  (license 121) res_ldap.conf.sample uploaded by suretec (license
	  70) asterisk-v3.1.4.ldif uploaded by suretec (license 70)
	  asterisk-v3.1.4.schema uploaded by suretec (license 70) Tested
	  by: oej, mguesdon, suretec, cthorner

2008-01-22 21:09 +0000 [r99647-99653]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 99652 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99652 | oej | 2008-01-22 21:56:09 +0100 (Tis, 22 Jan 2008) | 4
	  lines Thanks to Russell's education I realize that BUFSIZ has
	  changed since I learned the C language over 20 years ago...
	  Resetting chan_sip to the size of BUFSIZ that I expected in my
	  old head to avoid too heavy memory allocations on some systems.
	  ........

	* doc/tex/channelvariables.tex, CHANGES: Documentation updates for
	  BRIDGEPVTCALLID

2008-01-22 20:42 +0000 [r99646]  Tilghman Lesher <tlesher@digium.com>

	* /, main/acl.c: Merged revisions 99643 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99643 | tilghman | 2008-01-22 14:34:55 -0600 (Tue, 22 Jan 2008)
	  | 2 lines Fix the defines for OS X (and Solaris, too) ........

2008-01-22 20:41 +0000 [r99645]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: Make sure the command is not just present but is
	  also configured to be executed

2008-01-22 20:35 +0000 [r99644]  Olle Johansson <oej@edvina.net>

	* main/channel.c, channels/chan_sip.c, include/asterisk/channel.h:
	  Add a generic function to set the bridged call PVT unique id
	  string as a channel variable BRIDGEPVTCALLID This is important
	  for call tracing in log files and CDRs, so that the SIP callID
	  can be traced along servers. The CHANNEL dialplan function won't
	  work here, since the outbound channel is gone when we need the
	  Call-ID. Other channel drivers may now implement the same
	  function :-), but this patch only supports chan_sip.so. Inspired
	  by (issue #11816) Reported by: ctooley Patch by oej

2008-01-22 20:33 +0000 [r99642]  Russell Bryant <russell@digium.com>

	* configs/cli.conf.sample (added), CHANGES, main/asterisk.c: Change
	  the Asterisk CLI startup commands feature to read commands to run
	  from cli.conf after a discussion on the -dev list.

2008-01-22 17:46 +0000 [r99595-99596]  Olle Johansson <oej@edvina.net>

	* channels/chan_local.c, /, res/res_features.c,
	  channels/chan_agent.c, apps/app_followme.c: Merged revisions
	  99594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99594 | oej | 2008-01-22 18:41:57 +0100 (Tis, 22 Jan 2008) | 3
	  lines Add more dependencies on chan_local and add a note to the
	  description of chan_local so that people don't disable it in
	  menuselect just to clean up. ........

	* apps/app_dial.c, /: Merged revisions 99592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99592 | oej | 2008-01-22 18:31:17 +0100 (Tis, 22 Jan 2008) | 5
	  lines Add dependency on chan_local to app_dial. Dial still runs
	  without chan_local, but will be missing forwarding functionality.
	  ........

2008-01-22 17:15 +0000 [r99559]  Tilghman Lesher <tlesher@digium.com>

	* /, main/acl.c: Merged revisions 99540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99540 | tilghman | 2008-01-22 10:54:06 -0600 (Tue, 22 Jan 2008)
	  | 7 lines Ensure that we can get an address even when we don't
	  have a default route. (closes issue #9225) Reported by: junky
	  Patches: 20080122__bug9225.diff.txt uploaded by Corydon76
	  (license 14) Tested by: oej, loloski, sergee ........

2008-01-22 16:55 +0000 [r99542]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Point out a bug in some debug counter
	  handling

2008-01-22 15:25 +0000 [r99464-99521]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Add authentication options to the SIP
	  dialstring. Documentation follows separately (issue #11587)
	  Reported by: sobomax Patches: chan_sip.c-trunk.diff uploaded by
	  sobomax (license 359)

	* configs/sip.conf.sample: Documentation updates

	* doc/siptls.txt: Small fixes

	* main/tcptls.c, channels/chan_zap.c, main/abstract_jb.c,
	  include/asterisk/tcptls.h: Doxygen updates

2008-01-21 23:56 +0000 [r99427]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_local.c, /: Merged revisions 99426 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r99426 | mmichelson | 2008-01-21 17:55:26 -0600 (Mon, 21
	  Jan 2008) | 12 lines Fixing an issue wherein monitoring local
	  channels was not possible. During a channel masquerade, the
	  monitors on the two channels involved are swapped. In 99% of the
	  cases this results in the desired effect. However, if monitoring
	  a local channel, this caused the monitor which was on the local
	  channel to get moved onto a channel which is immediately hung up
	  after the masquerade has completed. By swapping the monitors
	  prior to the masquerade, we avoid the problem by tricking the
	  masquerade into placing the monitor back onto the channel where
	  we want it. During the investigation of the issue, the channel's
	  monitor was the only thing that was swapped in such a manner
	  which did not make sense to have done. All other variable
	  swapping made sense. ........

2008-01-21 23:25 +0000 [r99424]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c: Fix distinctive ring detection. Reported by:
	  milazzo Patches: drings.diff uploaded by milazzo (license 383)
	  Closes issue #11799

2008-01-21 22:32 +0000 [r99406]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, apps/app_queue.c: Adding the
	  QUEUENAME variable to the variables set using the setqueuevar
	  option in queues.conf. Suggestion comes from Shaun2222 on IRC.

2008-01-21 21:11 +0000 [r99382-99384]  Olle Johansson <oej@edvina.net>

	* channels/chan_console.c: Remove compiler warning for
	  uninitialized variable

	* channels/chan_sip.c: Doxygen updates. The TCP/TLS code was
	  committed without any doxygen obviously. Tss tss.

	* channels/chan_sip.c: Updating doxygen

2008-01-21 18:15 +0000 [r99350]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/res_odbc.h, /, res/res_odbc.c,
	  configs/res_odbc.conf.sample: Merged revisions 99341 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r99341 | tilghman | 2008-01-21 12:11:07 -0600 (Mon, 21
	  Jan 2008) | 8 lines Permit the user to specify number of seconds
	  that a connection may remain idle, which fixes a crash on
	  reconnect with the MyODBC driver. (closes issue #11798) Reported
	  by: Corydon76 Patches: 20080119__res_odbc__idlecheck.diff.txt
	  uploaded by Corydon76 (license 14) Tested by: mvanbaak ........

2008-01-21 16:02 +0000 [r99302]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 99301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99301 | file | 2008-01-21 12:01:00 -0400 (Mon, 21 Jan 2008) | 4
	  lines Bump the buffer size for Via headers up to 512. There are
	  some exceptionally large Via headers out there. (closes issue
	  #11783) Reported by: ofirroval ........

2008-01-21 07:02 +0000 [r99280]  Olle Johansson <oej@edvina.net>

	* CREDITS: Update

2008-01-21 03:54 +0000 [r99265]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Change over to using ast_debug so these
	  debug messages don't always show up.

2008-01-20 07:28 +0000 [r99166-99248]  Russell Bryant <russell@digium.com>

	* channels/chan_console.c: Add a "console active" CLI command,
	  which lets you find out which console device is currently active
	  for the Asterisk CLI, or to set it. Also, knock multiple device
	  support off of the to-do list.

	* configs/console.conf.sample: correct the name of a CLI command
	  for getting available device names

	* configs/console.conf.sample, channels/chan_console.c: Merge
	  changes from team/russell/console_devices - Add support for
	  multiple devices. All devices are configured in console.conf. -
	  Add "console list devices" CLI command to show configured
	  devices. Also, changed the old "list devices" to be "list
	  available", which queries PortAudio for all audio devices that
	  are available for use.

	* /, main/slinfactory.c: Merged revisions 99187 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99187 | russell | 2008-01-19 04:05:27 -0600 (Sat, 19 Jan 2008) |
	  4 lines Fix a couple of memory leaks with frame handling.
	  Specifically, ast_frame_free() needed to be called on the frame
	  that came from the translator to signed linear. ........

	* README: Add Cygwin as an "other" platform that is supported

	* README: Various README updates

2008-01-18  Russell Bryant  <russell@digium.com>

	* Asterisk 1.6.0-beta1 released.

2008-01-18 22:04 +0000 [r99080-99085]  Russell Bryant <russell@digium.com>

	* CREDITS, include/asterisk/http.h, main/tcptls.c (added),
	  main/manager.c, channels/chan_sip.c, doc/siptls.txt (added),
	  main/Makefile, main/http.c, include/asterisk/tcptls.h (added),
	  configs/sip.conf.sample, CHANGES: Merge changes from
	  team/group/sip-tcptls This set of changes introduces TCP and TLS
	  support for chan_sip. There are various new options in
	  configs/sip.conf.sample that are used to enable these features.
	  Also, there is a document, doc/siptls.txt that describes some
	  things in more detail. This code was implemented by Brett Bryant
	  and James Golovich. It was reviewed by Joshua Colp and myself. A
	  number of other people participated in the testing of this code,
	  but since it was done outside of the bug tracker, I do not have
	  their names. If you were one of them, thanks a lot for the help!
	  (closes issue #4903, but with completely different code that what
	  exists there.)

	* main/frame.c, /, include/asterisk/translate.h: Merged revisions
	  99081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99081 | russell | 2008-01-18 15:37:21 -0600 (Fri, 18 Jan 2008) |
	  9 lines Revert adding the packed attribute, as it really doesn't
	  make sense why that would do any good. Fix the real bug, which is
	  to do the check to see if the frame came from a translator at the
	  beginning of ast_frame_free(), instead of at the end. This
	  ensures that it always gets checked, even if none of the parts of
	  the frame are malloc'd, and also ensures that we aren't looking
	  at free'd memory in the case that it is a malloc'd frame. (closes
	  issue #11792, reported by explidous, patched by me) ........

	* /, include/asterisk/translate.h: Merged revisions 99079 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99079 | russell | 2008-01-18 15:22:21 -0600 (Fri, 18 Jan 2008) |
	  4 lines Since we're relying on the offset between the frame and
	  the beginning of the translator pvt struct, set the packed
	  attribute to make sure we get to the right place. (potential fix
	  for issue #11792) ........

2008-01-18 16:58 +0000 [r99026]  Terry Wilson <twilson@digium.com>

	* res/res_features.c: This should at least temporarily fix a
	  problem where the 't' Dial option is incorrectly passed to the
	  transferee when built-in attended transfers are used. There is
	  still a problem with 'T', but better to fix some problems than no
	  problems while we work on it. (closes issue #7904) Reported by:
	  k-egg Patches: transfer-fix-trunk-r97657.diff uploaded by sergee
	  (license 138) Tested by: sergee, otherwiseguy

2008-01-18 06:58 +0000 [r99015-99018]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_odbc.c: Convert func_odbc to use SQLExecDirect for
	  speed (closes issue #10723) Reported by: mnicholson Patches:
	  func-odbc-direct-execute1.diff uploaded by mnicholson (license
	  96) Tested by: Corydon76, mnicholson, falves11

	* res/res_odbc.c: Permit username and password to be NULL (which
	  enables pass-through from the layer above). Reported by: lurcher
	  Patch by: tilghman (Closes issue #11739)

	* funcs/func_cut.c: Reset default CUT delimiter back to '-'

2008-01-17 23:28 +0000 [r99006-99011]  Russell Bryant <russell@digium.com>

	* channels/chan_console.c: Make the output of "console list
	  devices" a bit prettier.

	* channels/chan_console.c: List which devices are inputs and
	  outputs in "console list devices"

	* main/channel.c: Add AST_FORMAT_SLINEAR16 to the list for
	  ast_best_codec()

	* main/frame.c, /, channels/chan_iax2.c, include/asterisk/frame.h:
	  Merged revisions 99004 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r99004 | russell | 2008-01-17 16:37:22 -0600 (Thu, 17 Jan 2008) |
	  10 lines Have IAX2 optimize the codec translation path just like
	  chan_sip does it. If the caller's codec is in our codec list,
	  move it to the top to avoid transcoding. (closes issue #10500)
	  Reported by: stevedavies Patches: iax-prefer-current-codec.patch
	  uploaded by stevedavies (license 184)
	  iax-prefer-current-codec.1.4.patch uploaded by stevedavies
	  (license 184) Tested by: stevedavies, pj, sheldonh ........

2008-01-17 22:22 +0000 [r99002]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Fixing trunk IMAP build (closes issue
	  #11788) Reported by: DEA Patches: vm-imap-build-fix.txt uploaded
	  by DEA (license 3)

2008-01-17 20:51 +0000 [r98998]  Jason Parker <jparker@digium.com>

	* Makefile, build_tools/cflags.xml, channels/chan_zap.c,
	  main/dsp.c, configs/zapata.conf.sample: Add several busy
	  detection related defines to menuselect. Allow better busy detect
	  debugging (with BUSYDETECT_DEBUG). Remove very old BUSYDETECT and
	  BUSY_DETECT_MARTIN defines. (closes issue #11107) Patches:
	  busydetect_enhancement.patch uploaded by agx (license 298)
	  busydetect-r94975.diff uploaded by sergee (license 138)
	  Additional changes/cleanup by me.

2008-01-17 16:33 +0000 [r98993-98994]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: state_interface could be NULL, so use the
	  never-NULL cur->state_interface for this check

	* apps/app_queue.c: Get the device state of the state interface
	  instead of the interface when creating a new queue member. Thanks
	  to Atis Lezdins for bringing this up on the Asterisk-Dev mailing
	  list.

2008-01-17 16:21 +0000 [r98992]  Jason Parker <jparker@digium.com>

	* /, configs/zapata.conf.sample: Merged revisions 98991 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #11784) ........ r98991 | qwell | 2008-01-17 10:19:46 -0600
	  (Thu, 17 Jan 2008) | 4 lines Add a clarification about the
	  immediate= option of zapata.conf Issue 11784, patch by klaus3000.
	  ........

2008-01-17 16:17 +0000 [r98989-98990]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: major
	  reliability and performance improvement in VWMI monitoring for
	  FXO ports (code by markster, me and dbailey)

	* res/res_config_curl.c: resolve (valid) compiler warning about
	  variable that could be used before being initialized

2008-01-17 03:09 +0000 [r98988]  Terry Wilson <twilson@digium.com>

	* res/res_phoneprov.c, doc/tex/phoneprov.tex,
	  configs/phoneprov.conf.sample: Update res_phoneprov to default to
	  setting the SERVER variable to the IP the HTTP request for the
	  config came in on and the SERVER_PORT to the bindport setting in
	  sip.conf. I've left in the ability to override these options,
	  because I can't always guess how someone might decide to do
	  something weird with what is available to them--although needing
	  to is pretty unlikely. Documentation was updated to reflect
	  preference for not setting serveraddr, serveriface, or
	  serverport. Tested on Linux and OS X.

2008-01-17 00:13 +0000 [r98987]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Change the way the new filter feature
	  works, by allowing it to be a column NOT logged into the
	  database. This will allow more granularity of a decision
	  evaluated in the dialplan, then takes effect when posting the
	  CDR.

2008-01-17 00:05 +0000 [r98986]  Russell Bryant <russell@digium.com>

	* CHANGES, main/asterisk.c: Add support for an easy way to
	  automatically execute some Asterisk CLI commands immediately at
	  startup. Any commands in the startup_commands file in the
	  Asterisk config diretory will get executed. (closes issue #11781)
	  Reported by: jamesgolovich Patches: asterisk-startupcmds.diff.txt
	  uploaded by jamesgolovich (license 176) -- With some changes by
	  me.

2008-01-16 23:08 +0000 [r98985]  Jason Parker <jparker@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4: Change AST_EXT_TOOL_CHECK to attempt to build
	  against <package>_LIB, per recommendations from Russell.

2008-01-16 22:36 +0000 [r98984]  Tilghman Lesher <tlesher@digium.com>

	* CHANGES: Info about res_config_curl

2008-01-16 22:20 +0000 [r98981]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_curl.c (added), main/utils.c: New module
	  res_config_curl (closes issue #11747) Reported by: Corydon76
	  Patches: res_config_curl.c uploaded by Corydon76 (license 14)
	  20080116__bug11747.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: jmls

2008-01-16 21:53 +0000 [r98978]  Russell Bryant <russell@digium.com>

	* CREDITS, channels/chan_sip.c, configs/sip.conf.sample: Merge the
	  changes from issue #10665 from the team/group/sip_session_timers
	  branch. This set of changes introduces SIP session timers support
	  (RFC 4028). In short, this prevents stuck SIP sessions that were
	  not properly torn down due to network or endpoint failures during
	  an established SIP session. To quote some of the documentation
	  supplied with the patch: "The SIP Session-Timers is an extension
	  of the SIP protocol that allows end-points and proxies to refresh
	  a session periodically. The sessions are kept alive by sending a
	  RE-INVITE or UPDATE request at a negotiated interval. If a
	  session refresh fails then all the entities that support Session-
	  Timers clear their internal session state. In addition, UAs
	  generate a BYE request in order to clear the state in the proxies
	  and the remote UA (this is done for the benefit of SIP entities
	  in the path that do not support Session-Timers)." (closes issue
	  #10665) Reported by: rjain Patches: chan_sip.c.1.diff uploaded by
	  rjain (license 226) chan_sip.c.diff uploaded by rjain (license
	  226) sip.conf.sample.diff uploaded by rjain (license 226)
	  proc_422_rsp_comment.diff uploaded by rjain (license 226)
	  chan_sip.c.cache.diff uploaded by rjain (license 226)
	  chan_sip.memalloc uploaded by rjain (license 226)
	  chan_sip.memalloc.bugfix uploaded by rjain (license 226) Patches
	  tracked in team/group/sip_session_timers, with some additional
	  fixes by russell and oej. Tested by: jtodd, rjain, loloski

2008-01-16 19:41 +0000 [r98968-98971]  Jason Parker <jparker@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Partially revert r93898, because it broke the way netsnmp was
	  being detected. rizzo, do you want to discuss so we can rethink
	  this, or do you have another way?

	* CHANGES: Add note about new update.log to CHANGES, by request of
	  jmls and further prodding by jsmith.

	* Makefile, /: Add logging for 'make update' command (also fixes
	  updates in some places). Issue #11766, initial patch by jmls.

2008-01-16 17:51 +0000 [r98967]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 98966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98966 | file | 2008-01-16 13:50:10 -0400 (Wed, 16 Jan 2008) | 6
	  lines Add missing NULLs at end of two ast_load_realtimes. (closes
	  issue #11769) Reported by: tequ Patches: chaniax.patch uploaded
	  by dimas (license 88) ........

2008-01-16 17:21 +0000 [r98965]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_local.c, /: Merged revisions 98964 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r98964 | mmichelson | 2008-01-16 11:20:11 -0600 (Wed, 16
	  Jan 2008) | 10 lines Fix a deadlock in chan_local in
	  local_hangup. There was contention because the local_pvt was held
	  and it was attempting to lock a channel, which is the incorrect
	  locking order. (closes issue #11730) Reported by: UDI-Doug
	  Patches: 11730.patch uploaded by putnopvut (license 60) Tested
	  by: UDI-Doug ........

2008-01-16 16:06 +0000 [r98962]  Terry Wilson <twilson@digium.com>

	* res/res_phoneprov.c: Make users list static

2008-01-16 15:09 +0000 [r98954-98961]  Joshua Colp <jcolp@digium.com>

	* main/dial.c, /: Merged revisions 98960 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98960 | file | 2008-01-16 11:08:24 -0400 (Wed, 16 Jan 2008) | 6
	  lines Introduce a lock into the dialing API that protects it when
	  destroying the structure. (closes issue #11687) Reported by:
	  callguy Patches: 11687.diff uploaded by file (license 11)
	  ........

	* /, main/rtp.c: Merged revisions 98958 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98958 | file | 2008-01-16 11:03:14 -0400 (Wed, 16 Jan 2008) | 4
	  lines Add two more SDP names for ulaw and alaw. (closes issue
	  #11777) Reported by: tootai ........

	* /, channels/chan_sip.c: Merged revisions 98955 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98955 | file | 2008-01-15 23:07:24 -0400 (Tue, 15 Jan 2008) | 6
	  lines Don't drop the old record route information when dealing
	  with packets related to a reinvite. (closes issue #11545)
	  Reported by: kebl0155 Patches: reinvite-patch.txt uploaded by
	  kebl0155 (license 356) ........

	* channels/chan_sip.c: Remove DNS lookup from sip_devicestate. This
	  seems to come from way back when and I can't think of a reason
	  for it being here, plus it could cause needless DNS lookups.
	  (closes issue #10983) Reported by: jtodd

2008-01-16 01:35 +0000 [r98953]  Steve Murphy <murf@digium.com>

	* main/ast_expr2.h, main/ast_expr2.y, main/ast_expr2.c: Terry found
	  this problem with running the expr2 parser on OSX. Make the
	  #defines come out the same between the parser & lexer.

2008-01-16 01:17 +0000 [r98952]  Joshua Colp <jcolp@digium.com>

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, codecs/codec_speex.c,
	  configure.ac, makeopts.in: Merged revisions 98951 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r98951 | file | 2008-01-15 21:13:27 -0400 (Tue, 15 Jan
	  2008) | 4 lines Add autoconf logic for speexdsp. Later versions
	  use a separate library for some things so we need to use it if
	  present in codec_speex. (closes issue #11693) Reported by: yzg
	  ........

2008-01-15 23:53 +0000 [r98948]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 98946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98946 | russell | 2008-01-15 17:50:10 -0600 (Tue, 15 Jan 2008) |
	  11 lines Change a buffer in check_auth() to be a thread local
	  dynamically allocated buffer, instead of a massive buffer on the
	  stack. This fixes a crash reported by Qwell due to running out of
	  stack space when building with LOW_MEMORY defined. On a very
	  related note, the usage of BUFSIZ in various places in chan_sip
	  is arbitrary and careless. BUFSIZ is a system specific define. On
	  my machine, it is 8192, but by definition (according to google)
	  could be as small as 256. So, this buffer in check_auth was 16
	  kB. We don't even support SIP messages larger than 4 kB! Further
	  usage of this define should be avoided, unless it is used in the
	  proper context. ........

2008-01-15 23:52 +0000 [r98947]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c, configs/cdr_adaptive_odbc.conf.sample:
	  Add the "filter" keyword

2008-01-15 23:35 +0000 [r98944-98945]  Russell Bryant <russell@digium.com>

	* main/translate.c, include/asterisk/translate.h: Clean up
	  something I did for ABI compatability in 1.4

	* main/frame.c, /, main/translate.c, main/abstract_jb.c,
	  channels/chan_iax2.c, codecs/codec_zap.c,
	  include/asterisk/frame.h, main/rtp.c,
	  include/asterisk/translate.h: Merged revisions 98943 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r98943 | russell | 2008-01-15 17:26:52 -0600 (Tue, 15
	  Jan 2008) | 25 lines Commit a fix for some memory access errors
	  pointed out by the valgrind2.txt output on issue #11698. The
	  issue here is that it is possible for an instance of a translator
	  to get destroyed while the frame allocated as a part of the
	  translator is still being processed. Specifically, this is
	  possible anywhere between a call to ast_read() and
	  ast_frame_free(), which is _a lot_ of places in the code. The
	  reason this happens is that the channel might get masqueraded
	  during this time. During a masquerade, existing translation paths
	  get destroyed. So, this patch fixes the issue in an API and ABI
	  compatible way. (This one is for you, paravoid!) It changes an
	  int in ast_frame to be used as flag bits. The 1 bit is still used
	  to indicate that the frame contains timing information. Also, a
	  second flag has been added to indicate that the frame came from a
	  translator. When a frame with this flag gets released and has
	  this flag, a function is called in translate.c to let it know
	  that this frame is doing being processed. At this point, the flag
	  gets cleared. Also, if the translator was requested to be
	  destroyed while its internal frame still had this flag set, its
	  destruction has been deffered until it finds out that the frame
	  is no longer being processed. Admittedly, this feels like a hack.
	  But, it does fix the issue, and I was not able to think of a
	  better solution ... ........

2008-01-15 20:10 +0000 [r98895-98935]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 98934 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98934 | file | 2008-01-15 16:08:43 -0400 (Tue, 15 Jan 2008) | 4
	  lines Based on the boundary found move over the correct amount.
	  (closes issue #11750) Reported by: tasker ........

	* /, channels/chan_sip.c: Merged revisions 98894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98894 | file | 2008-01-14 18:41:55 -0400 (Mon, 14 Jan 2008) | 4
	  lines Accept "; boundary=" not just ";boundary=" in the multipart
	  mixed content type. (closes issue #11750) Reported by: tasker
	  ........

2008-01-14 22:19 +0000 [r98889]  Jason Parker <jparker@digium.com>

	* configs/voicemail.conf.sample, CHANGES, apps/app_voicemail.c: Add
	  backupdeleted option to app_voicemail (closes issue #10740)
	  Reported by: ruffle Patches: app_voicemail.diff uploaded by
	  ruffle (license 201) 10740-voicemail.diff uploaded by qwell
	  (license 4) 20080113_bug10740.diff.txt uploaded by mvanbaak
	  (license 7) Tested by: blitzrage, mvanbaak, qwell

2008-01-14 22:11 +0000 [r98850-98888]  Mark Michelson <mmichelson@digium.com>

	* apps/app_directory.c: Big improvement for app_directory. This
	  patch breaks the do_directory function up so that it is more
	  easily parsed by the human brain. It also fixes some errors. I'll
	  quote dimas from the original bug description: "app_directory
	  contained some duplicate code even before addition of 'm' option.
	  Addition of that option doubled amount of that code. Worst of
	  all, there are minor differences between these code block and
	  bugs caused by these differences. 1. There is a memory leak. In
	  the 'menu' mode, result of the convert(pos) function is not freed
	  while it should be. 2. In the 'menu' mode check for
	  OPT_LISTBYFIRSTNAME flag ('f' option) is not negated as result,
	  application works in the mode opposite to what user expect
	  (checking last name when user wants the first nd vice versa). 3.
	  select_item function plays message for user using res = func1()
	  || func2() || func3()... construct. This construct loses the
	  actual value returned by ast_waitstream() for example so at the
	  end, res does not contain digit user dialed while listening to
	  the message. 4. (also in 1.4) application announces entries from
	  voicemail.conf/realtime separately from entries from users.conf.
	  I see no reason why doing so instead of building combined list.
	  5. Alot of duplicated code as already mentioned." This was tested
	  by dimas and I (I tested under valgrind). A word of caution: any
	  bug fixes that happen in app_directory in 1.4 will almost
	  certainly not merge cleanly into trunk as a result of this, but
	  it is well worth it. Huge thanks to dimas for this wonderful
	  submission. (closes issue #11744) Reported by: dimas Patches:
	  dir3.patch uploaded by dimas (license 88) Tested by: putnopvut,
	  dimas

2008-01-14 20:01 +0000 [r98830]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: Make sure the user's manager secret exists, even
	  if it is blank. (closes issue #11749) Reported by: srt

2008-01-14 18:42 +0000 [r98811]  Terry Wilson <twilson@digium.com>

	* CHANGES: Add description of TOUPPER and TOLOWER dialplan
	  functions to CHANGES.

2008-01-14 17:40 +0000 [r98776]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c: Add proper call forwarding (all and busy)
	  support for chan_skinny. Note: NoAnswer support is currently not
	  implemented, as it would take a significant amount of work to
	  figure out how to do correctly. Closes issue #11310, patches,
	  testing, and support by DEA, mvanbaak, and myself.

2008-01-14 17:39 +0000 [r98775]  Russell Bryant <russell@digium.com>

	* /, main/translate.c: Merged revisions 98774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98774 | russell | 2008-01-14 11:38:38 -0600 (Mon, 14 Jan 2008) |
	  3 lines Revert a change that introduces an unacceptable
	  performance hit and is causing memory leaks ... (from rev 97973)
	  ........

2008-01-14 17:18 +0000 [r98773]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c: Fix for potential crash with vmexten

2008-01-14 16:36 +0000 [r98735-98738]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Merged revisions 98737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98737 | mmichelson | 2008-01-14 10:35:12 -0600 (Mon, 14 Jan
	  2008) | 3 lines Fixing another compilation error. I'm a bit off
	  today :( ........

	* /, apps/app_queue.c: Merged revisions 98733 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98733 | mmichelson | 2008-01-14 10:21:28 -0600 (Mon, 14 Jan
	  2008) | 8 lines Adding explicit defaults for missing options to
	  init_queue. This is necessary because if a user either removes or
	  comments one of these options and reloads their queues, the
	  option will not reset to its default, instead maintaining the
	  value from prior to the reload. Thanks to John Bigelow for
	  pointing this error out to me. ........

2008-01-14 15:07 +0000 [r98695-98714]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c: Print out a warning when spaces are used in the
	  variable name in Set and MSet. It is extremely hard to debug this
	  issue so this should make it easier. (closes issue #11759)
	  Reported by: caio1982 Patches: setvar_space_warning1.diff
	  uploaded by caio1982 (license 22)

	* apps/app_meetme.c, doc/tex/qos.tex, doc/tex/realtime.tex: Update
	  documentation. (closes issue #11763) Reported by: IgorG Patches:
	  docupd.v1.diff uploaded by IgorG (license 20)

2008-01-14 04:53 +0000 [r98558-98676]  Russell Bryant <russell@digium.com>

	* apps/app_jack.c: Add another small option for the JACK app and
	  JACK_HOOK function. The 'n' option tells JACK not to start jackd
	  automatically if it is not already running. Otherwise, the
	  default is that jackd will get started for you if it isn't
	  running already.

	* CHANGES: - Break up the Misc. section a bit with a new section
	  for Misc. New Modules - Change spacing a bit in some places for
	  consistent indentation

	* CHANGES, apps/app_jack.c (added): Bring in the code from
	  team/russell/jack/. Add a new module, app_jack, which provides
	  interfaces to JACK, the Jack Audio Connection Kit
	  (http://www.jackaudio.org/). Two interfaces are provided; there
	  is a JACK() application, and a JACK_HOOK() function. Both
	  interfaces create an input and output JACK port. The application
	  makes these ports the endpoint of the call. The audio coming from
	  the channel goes out the output port and whatever comes back in
	  on the input port is what gets sent to the channel. The
	  JACK_HOOK() function turns on a JACK audiohook on the channel.
	  This lets you run the audio coming from a channel through JACK,
	  and whatever comes back in is what gets forwarded on as the
	  channel's audio. This is very useful for building custom vocoders
	  or doing recording or analysis of the channel's audio in another
	  application. In case anyone is curious, the platform that
	  inspired me to write this is PureData (http://puredata.info/). I
	  wrote these JACK interfaces so that I could use Pd to do
	  interesting things with the audio of phone calls ...

	* build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in: Add
	  configure script check for JACK.

	* build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in:
	  Remove KDE configure script check that isn't used

	* main/audiohook.c: Remove a duplicate lock of the audiohook lock
	  when destroying manipulate audiohooks. This causes an error when
	  we attempt to destroy the lock later when freeing the audiohook.

	* main/pbx.c, CHANGES: Add a new CLI command, "core set chanvar",
	  which allows you to set a channel variable (or function) on an
	  active channel from the CLI.

2008-01-12 18:12 +0000 [r98536]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c: Conversion to load manager.conf into memory did
	  not convert the password functions correctly. (Closes issue
	  #11749)

2008-01-12 05:13 +0000 [r98514]  Pari Nannapaneni <paripurnachand@digium.com>

	* /, main/http.c: merging a comment added in 1.4

2008-01-12 00:20 +0000 [r98488]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, CHANGES: Add 'zap set dnd' CLI command, and
	  ensure that the AMI DNDState event always gets generated. (closes
	  issue #11212) Reported by: tzafrir Patches: zap_dnd.diff uploaded
	  by tzafrir (modified by me) (license 46)

2008-01-12 00:17 +0000 [r98487]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 98467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98467 | tilghman | 2008-01-11 18:05:08 -0600 (Fri, 11 Jan 2008)
	  | 4 lines Add a connection timeout attribute, as that was what
	  was intended with the login timeout, but ODBC divides it up into
	  2 different timeouts. (Closes issue #11745) ........

2008-01-11 23:57 +0000 [r98454]  Russell Bryant <russell@digium.com>

	* configure, doc/tex/Makefile, configure.ac, makeopts.in: Add some
	  extra checking to help out with a potential error when trying to
	  run "make asterisk.pdf" when not all of the right packages are
	  installed. (closes issue #10763) Reported by: Corydon76 Patches:
	  20070919__bug10763.diff.txt uploaded by Corydon76 (license 14)
	  Tested by: Corydon76

2008-01-11 23:10 +0000 [r98436]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, CHANGES, configs/zapata.conf.sample: Add
	  'auto' signalling mode for Zaptel channels. (closes issue #11690)
	  Reported by: tzafrir Patches: signaling_to_signalling.diff
	  uploaded by tzafrir (license 46) signalling_cleanup.diff uploaded
	  by tzafrir (license 46) zap_auto_default.diff uploaded by tzafrir
	  (license 46) zap_no_default_sig.diff uploaded by tzafrir (license
	  46) zap_signal_auto.diff uploaded by tzafrir (license 46)

2008-01-11 23:09 +0000 [r98424-98435]  Joshua Colp <jcolp@digium.com>

	* main/event.c: Goodbye again drumkilla.

	* main/event.c: drumkilla ftw.

	* main/audiohook.c: I am no longer Rockin'

	* main/audiohook.c: Testing something...

2008-01-11 22:52 +0000 [r98400]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 98390 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98390 | russell | 2008-01-11 16:46:21 -0600 (Fri, 11 Jan 2008) |
	  9 lines Fix up setting the EID on BSD based systems. (closes
	  issue #11646) Reported by: caio1982 Patches:
	  dundi_osx_eid6.diff.txt uploaded by caio1982 (license 22)
	  dundi_osx_eid6-1.4.diff uploaded by caio1982 (license 22) Tested
	  by: caio1982, mvanbaak ........

2008-01-11 19:53 +0000 [r98318-98334]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 98325 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98325 | file | 2008-01-11 15:51:10 -0400 (Fri, 11 Jan 2008) | 6
	  lines If the incoming RTP stream changes codec force the bridge
	  to break if the other side does not support it. (closes issue
	  #11729) Reported by: tsearle Patches: new_codec_patch_udiff.patch
	  uploaded by tsearle (license 373) ........

	* /, res/res_agi.c: Merged revisions 98317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98317 | file | 2008-01-11 15:28:30 -0400 (Fri, 11 Jan 2008) | 6
	  lines If the channel is hungup during RECORD FILE send a result
	  code of -1 to be uniform with everything else. (closes issue
	  #11743) Reported by: davevg Patches: res_agi.diff uploaded by
	  davevg (license 209) ........

2008-01-11 19:12 +0000 [r98316]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 98315 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98315 | mmichelson | 2008-01-11 13:10:57 -0600 (Fri, 11 Jan
	  2008) | 5 lines Properly report the hangup cause as no answer
	  when someone does not answer (closes issue #10574, reported by
	  boch, patched by moy) ........

2008-01-11 19:05 +0000 [r98270-98308]  Russell Bryant <russell@digium.com>

	* codecs/codec_resample.c: Kevin noted that the thing that I
	  _actually_ changed here was that I converted a value from a
	  double, to a float, back to a double. Sure enough, when I changed
	  my interim variable back to a double, it still blows up.
	  Switching all of these to a float fixes the problem. This seems
	  like a compiler bug where a double passed as an argument isn't
	  getting properly aligned, so I'll have to see if I can replicate
	  it with a small test program. (related to issue #11725)

	* codecs/codec_resample.c: Fix a bus error that happened when
	  asterisk was built with optimizations on with platforms that
	  explode on unaligned access. I'm not exactly sure why this fixes
	  it, but it fixed it on the machine I was testing on. If it makes
	  sense to you, feel free to enlighten me. :) (closes issue #11725,
	  patched by me)

2008-01-11 18:35 +0000 [r98268-98269]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Port Nick Gorham's timestamp patch to
	  adaptive_odbc, too

	* cdr/cdr_odbc.c: Commit Nick Gorham's suggestion for timestamp fix

2008-01-11 17:27 +0000 [r98220]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_followme.c: Merged revisions 98219 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98219 | file | 2008-01-11 13:22:53 -0400 (Fri, 11 Jan 2008) | 4
	  lines Ensure the return value of ast_bridge_call is passed back
	  up as the application return value. This is needed for transfers
	  to function so the PBX core knows to continue execution. (closes
	  issue #10327) Reported by: kkiely ........

2008-01-11 17:17 +0000 [r98218]  Russell Bryant <russell@digium.com>

	* codecs/codec_g722.c: At one point during working on this module,
	  I had the lin/lin16 versions of the framein callbacks different.
	  However, they are now the same again, so remove the duplicate
	  code and use the same functions for the lin/lin16 versions.

2008-01-11 16:08 +0000 [r98152-98193]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 98164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r98164 | tilghman | 2008-01-11 09:52:31 -0600 (Fri, 11 Jan 2008)
	  | 2 lines Back out changes from revision 97077, since it wasn't
	  perfect ........

	* doc/manager_1_1.txt: Documentation updates

2008-01-11 12:51 +0000 [r98124]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: Ascom phones send Flash events as SIP INFO
	  using '!' as the 'digit'

2008-01-11 03:40 +0000 [r98081-98083]  Russell Bryant <russell@digium.com>

	* codecs/codec_g722.c, main/frame.c: - Fix the last set of places
	  where incorrect assumptions were made about the sample length
	  with g722. It is _2_ samples per byte, not 1. This was all over
	  the place, and I believed it, and it is what caused me to take so
	  long to figure out what was broken. - Update copyright
	  information on codec_g722.

2008-01-11 00:54 +0000 [r98047]  Mark Michelson <mmichelson@digium.com>

	* main/translate.c: Fix "core show translation" to not output
	  information for "unknown" codecs. This fix was made in favor of
	  the proposed patch since it doesn't involve changing a core codec
	  define. (closes issue #11722, reported and initially patched by
	  caio1982, final patch by me)

2008-01-11 00:38 +0000 [r98024-98027]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample, CHANGES: Add a new
	  global and per-peer option to chan_sip, qualifyfreq, which allows
	  you to set the qualify frequency. (closes issue #11597) Reported
	  by: wilder Patches: qualifyfreq5.patch uploaded by wilder
	  (license 362) -- with some mods by me

	* main/translate.c: Simplify this code with a suggestion from Luigi
	  on the asterisk-dev list. Instead of using is16kHz(), implement a
	  format_rate() function.

2008-01-10 23:40 +0000 [r97978]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, main/translate.c: Merged revisions 97973
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97973 | tilghman | 2008-01-10 17:08:36 -0600 (Thu, 10 Jan 2008)
	  | 6 lines 1) When we get a translated frame out, clone it,
	  because if the translator pvt is freed before we use the frame,
	  bad things happen. 2) Getting a failure from ast_sched_delete
	  means that the schedule ID is currently running. Don't just
	  ignore it. (Closes issue #11698) ........

2008-01-10 23:33 +0000 [r97974-97977]  Russell Bryant <russell@digium.com>

	* /, main/translate.c: Merged revisions 97976 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97976 | russell | 2008-01-10 17:30:40 -0600 (Thu, 10 Jan 2008) |
	  3 lines Fix various timing calculations that made assumptions
	  that the audio being processed was at a sample rate of 8 kHz.
	  ........

	* codecs/codec_g722.c: Fix various issues in codec_g722. - The most
	  common fix being made here is to fix all of the places where the
	  number of output samples and output bytes gets updated in the
	  translator state structure. - Fix a number of other places where
	  the number of samples provided as an initialization value to a
	  struct was incorrect.

	* codecs/codec_resample.c: Fix the buffer_samples value. For signed
	  linear, the number of samples needed to fill the buffer is half
	  the buffer size.

2008-01-10 21:58 +0000 [r97933]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 97925 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97925 | mmichelson | 2008-01-10 15:57:06 -0600 (Thu, 10 Jan
	  2008) | 6 lines Let us leave a voicemail for ourself if we have
	  logged into VoiceMailMain and chosen to leave a message. (closes
	  issue #11735, reported and patched by jamessan) ........

2008-01-10 21:46 +0000 [r97850-97890]  Steve Murphy <murf@digium.com>

	* /, res/ael/ael_lex.c, res/Makefile, res/ael/ael.flex: Merged
	  revisions 97889 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97889 | murf | 2008-01-10 14:37:10 -0700 (Thu, 10 Jan 2008) | 1
	  line Applied the same fixes for ael.flex as was done in 97849 for
	  ast_expr2.fl; overrode the normally generate yyfree func with our
	  own version that checks the pointer for non-null before passing
	  to free(). Also takes care of a little problem with 2.5.33 and
	  the use of the __STDC_VERSION__ macro. ........

	* /, main/Makefile, main/ast_expr2f.c, main/ast_expr2.fl: Merged
	  revisions 97849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97849 | murf | 2008-01-10 13:21:27 -0700 (Thu, 10 Jan 2008) | 1
	  line This is a fix for 2 things: a problem Terry was having in
	  OSX with null pointers, which was my fault, as I probably forgot
	  to run the sed script last time I made mods. So, I moved the fix
	  into the flex input itself. Then, I found when I used flex
	  2.5.33, that it was using __STDC_VERSION__, and that's not real
	  good; so I added back in a DIFFERENT sed script to fix that
	  little mess. Tested everything, a couple different ways. Hope I
	  did no harm, at the least. ........

2008-01-10 20:13 +0000 [r97848]  Jason Parker <jparker@digium.com>

	* /, include/asterisk/frame.h: Merged revisions 97847 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r97847 | qwell | 2008-01-10 14:12:37 -0600 (Thu, 10 Jan
	  2008) | 1 line Fix a comment that is no longer true. ........

2008-01-10 20:05 +0000 [r97846]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Use the appropriate line ending for the
	  X-Asterisk-VM-Message-Type header. (closes issue #11734, reported
	  and patched by jaroth)

2008-01-10 19:07 +0000 [r97825-97826]  Terry Wilson <twilson@digium.com>

	* main/ast_expr2f.c: heh, remove patch to generated file.

	* main/ast_expr2f.c, main/cli.c: Check pointers before freeing (was
	  getting WARNINGS under MALLOC_DEBUG)

2008-01-10 17:38 +0000 [r97805]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_odbc.c: Fix problem with timestr going out of scope
	  (Closes issue #11726, closes issue #11731)

2008-01-10 17:30 +0000 [r97745-97804]  Russell Bryant <russell@digium.com>

	* formats/format_sln16.c: minor formatting changes

	* main/translate.c: spaces to tabs

	* configure, configure.ac: Use AST_EXT_TOOL_CHECK() for the GTK
	  check again. I changed this to an inline implementation to fix a
	  small bug, but after a discussion with rizzo, I went to change it
	  back. Also, it turns out that the implementation of the macro
	  already supported what was needed to fix the problem.

	* pbx/pbx_kdeconsole.h (removed), /, configs/modules.conf.sample,
	  pbx/kdeconsole_main.cc (removed): Merged revisions 97753 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97753 | russell | 2008-01-10 10:19:47 -0600 (Thu, 10 Jan 2008) |
	  2 lines Remove other remnants of pbx_kdeconsole ........

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in,
	  pbx/pbx_kdeconsole.cc (removed): Merged revisions 97734 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97734 | russell | 2008-01-10 10:10:09 -0600 (Thu, 10 Jan 2008) |
	  4 lines Remove pbx_kdeconsole from the tree. It hasn't worked in
	  ages, and nobody has complained. (closes issue #11706, reported
	  by caio1982) ........

2008-01-10 15:12 +0000 [r97698]  Joshua Colp <jcolp@digium.com>

	* funcs/func_groupcount.c, /: Merged revisions 97697 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r97697 | file | 2008-01-10 11:07:12 -0400 (Thu, 10 Jan
	  2008) | 6 lines Don't try to copy the category from the group if
	  no category exists. (closes issue #11724) Reported by: IgorG
	  Patches: group_count.v1.patch uploaded by IgorG (license 20)
	  ........

2008-01-10 00:54 +0000 [r97657]  Russell Bryant <russell@digium.com>

	* include/asterisk.h: These prototypes are not supposed to be in
	  asterisk.h. They are already in version.h.

2008-01-10 00:50 +0000 [r97656]  Steve Murphy <murf@digium.com>

	* include/asterisk.h, channels/console_video.c, utils/astman.c,
	  channels/console_board.c, channels/vgrabbers.c: The fixes in this
	  commit are mainly to allow compiling of trunk with
	  --enable-dev-mode, mutex profiling, lock debugging, etc. Mainly,
	  the version.c needs to be in the OBJS line; asterisk.h was chosen
	  to have the prototypes for ast_get_version, ast_get_version_num;
	  and the ASTERISK_FILE_VERSION macro needs to be used after
	  including asterisk.h in a few files. I hope I did the right
	  thing. If not, let me know.

2008-01-10 00:39 +0000 [r97655]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c: oops, missed the case of a 0 permission (which
	  should mean everybody is allowed, not nobody)

2008-01-10 00:22 +0000 [r97653]  Terry Wilson <twilson@digium.com>

	* res/res_phoneprov.c: Attempt at making lookup_iface work under
	  FreeBSD. Not yet tested, but it compiles under OS X. And still
	  works under linux.

2008-01-10 00:17 +0000 [r97652]  Russell Bryant <russell@digium.com>

	* codecs/Makefile: Fix this so it doesn't force codec_g722 to get
	  relinked every time

2008-01-10 00:12 +0000 [r97651]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, main/manager.c, channels/chan_sip.c,
	  res/res_features.c, pbx/pbx_realtime.c,
	  configs/manager.conf.sample, CHANGES, channels/chan_iax2.c,
	  include/asterisk/manager.h, apps/app_stack.c, main/db.c,
	  apps/app_voicemail.c: Several manager changes: 1) Add the
	  Dialplan class, for NewExten and VarSet events, which should cut
	  down on the volume of traffic in the Call class. 2) Permit some
	  commands to be run from multiple classes, such as allowing DBGet
	  to be run from either the System or the Reporting class. 3)
	  Heavily document each class in the sample config, as there were
	  several that made no sense to be in the write= line, and two that
	  made no sense to be in the read= line (since they controlled no
	  permissions there). (Closes issue #10386)

2008-01-10 00:11 +0000 [r97641-97650]  Russell Bryant <russell@digium.com>

	* codecs/Makefile: Ensure that libg722.a gets rebuilt if one of the
	  files changes

	* /, pbx/pbx_gtkconsole.c: Merged revisions 97645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97645 | russell | 2008-01-09 17:01:48 -0600 (Wed, 09 Jan 2008) |
	  2 lines Strip terminal sequences from the verbose messages
	  ........

	* configure: re-gen configure

	* configure.ac: re-add check for gtk1, which is used for
	  pbx_gtkconsole (related to issue #11706)

	* /, pbx/pbx_gtkconsole.c: Merged revisions 97640 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97640 | russell | 2008-01-09 16:26:33 -0600 (Wed, 09 Jan 2008) |
	  3 lines Make pbx_gtkconsole build ... but doesn't actually load
	  on my system still (related to issue #11706) ........

2008-01-09 21:37 +0000 [r97634]  Terry Wilson <twilson@digium.com>

	* phoneprov/000000000000.cfg, phoneprov/000000000000-directory.xml,
	  phoneprov/polycom.xml, res/res_phoneprov.c (added),
	  funcs/func_strings.c, phoneprov/000000000000-phone.cfg,
	  configs/modules.conf.sample, main/acl.c,
	  include/asterisk/localtime.h, CHANGES,
	  configs/phoneprov.conf.sample (added), Makefile, phoneprov
	  (added), doc/tex/phoneprov.tex (added), main/stdtime/localtime.c,
	  doc/tex/asterisk.tex: Added a new module, res_phoneprov, which
	  allows auto-provisioning of phones based on configuration
	  templates that use Asterisk dialplan function and variable
	  substitution. It should be possible to create phone profiles and
	  templates that work for the majority of phones provisioned over
	  http. It is currently only intended to provision a single user
	  account per phone. An example profile and set of templates for
	  Polycom phones is provided. NOTE: Polycom firmware is not
	  included, but should be placed in AST_DATA_DIR/phoneprov/configs
	  to match up with the included templates.

2008-01-09 20:30 +0000 [r97620-97623]  Jason Parker <jparker@digium.com>

	* /, main/cli.c: Merged revisions 97622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11718) ........ r97622 | qwell | 2008-01-09 14:28:43 -0600
	  (Wed, 09 Jan 2008) | 5 lines Correctly display a message if a
	  command could not be found. Also fix a comment which may have led
	  to this happening. Issue 11718, reported by kshumard. ........

	* /, main/cli.c: Merged revisions 97618 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97618 | qwell | 2008-01-09 14:05:45 -0600 (Wed, 09 Jan 2008) | 1
	  line Fix some locking and return value funkiness. We really
	  shouldn't be unlocking this lock inside of a function, unless we
	  locked it there too. ........

2008-01-09 18:53 +0000 [r97577]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 97575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97575 | mmichelson | 2008-01-09 12:48:15 -0600 (Wed, 09 Jan
	  2008) | 3 lines Part 2 of app_queue doxygen improvements. Some
	  smaller functions this time ........

2008-01-09 18:12 +0000 [r97532-97533]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c: remove a wrong 'const'

	* images/kpad2.jpg: add annotations for the two message windows we
	  use.

2008-01-09 18:04 +0000 [r97531]  Russell Bryant <russell@digium.com>

	* /, res/res_features.c: Merged revisions 97529 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97529 | russell | 2008-01-09 12:02:08 -0600 (Wed, 09 Jan 2008) |
	  2 lines Fix saying the parking space number to the caller doing
	  the parking ... ........

2008-01-09 18:03 +0000 [r97530]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/console_board.c,
	  channels/console_video.h: Two changes: - support scrolling of
	  message window; - simplify the code for creating a message
	  window, and try it using a second one in the top of the keypad
	  (where we echo the dialed number). The 'skin' that supports these
	  two windows will be committed separately.

2008-01-09 17:30 +0000 [r97495]  Kevin P. Fleming <kpfleming@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 97491 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97491 | kpfleming | 2008-01-09 11:21:14 -0600 (Wed, 09 Jan 2008)
	  | 2 lines report the same message whether Zaptel does not have
	  transcoder support loaded or no transcoders were found ........

2008-01-09 16:59 +0000 [r97490]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 97489 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r97489 | phsultan | 2008-01-09 17:44:24 +0100 (Wed, 09
	  Jan 2008) | 7 lines Set the caller id within the gtalk_alloc
	  function. As underlined in issue #10437 by Josh, we need to
	  prevent a possible memory leak. We only set the name part of the
	  caller id, the number part is not relevant when dealing with
	  JIDs. Closes issue #11549. ........

2008-01-09 16:44 +0000 [r97488]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/console_video.c,
	  channels/console_board.c, channels/console_video.h: Implement
	  keyboard handling, and use it to enter a number to dial in the
	  'message' area under the keypad. Now you can make calls using the
	  keypad as a regular phone (or the keyboard for chars not present
	  on the keypad)

2008-01-09 16:13 +0000 [r97451]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 97450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97450 | file | 2008-01-09 12:11:17 -0400 (Wed, 09 Jan 2008) | 6
	  lines Don't do conferencing totally in Zaptel if Monitor is
	  running on the channel. (closes issue #11709) Reported by:
	  BigJimmy Patches: patch-meetmerec uploaded by BigJimmy (license
	  371) ........

2008-01-09 15:45 +0000 [r97421-97449]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 97448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97448 | kpfleming | 2008-01-09 09:43:19 -0600 (Wed, 09 Jan 2008)
	  | 2 lines pass the right variable to get an error string... oops
	  ........

	* channels/chan_zap.c, /: Merged revisions 97410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97410 | kpfleming | 2008-01-09 09:26:23 -0600 (Wed, 09 Jan 2008)
	  | 2 lines add error number output to ioctl failure messages to
	  help with debugging ........

2008-01-09 12:23 +0000 [r97389-97390]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_video.c, channels/console_video.h: implement the
	  "console startgui" and "console stopgui" commands so you can
	  start and stop the gui even outside of a call. This is convenient
	  for testing, and also for using the keypad to pick up a call, and
	  to dial a number (the latter not yet implemented, but should be
	  close).

	* channels/chan_oss.c: make get_video_desc() return the active
	  console if passed a null argument (channel).

2008-01-09 00:58 +0000 [r97364-97365]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c: New option in trunk, needs strdupa to be safe,
	  too

	* /, main/editline/readline.c, main/cli.c: Merged revisions 97350
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97350 | tilghman | 2008-01-08 18:44:14 -0600 (Tue, 08 Jan 2008)
	  | 5 lines Allow filename completion on zero-length modules,
	  remove a memory leak, remove a file descriptor leak, and make
	  filename completion thread-safe. Patched and tested by tilghman.
	  (Closes issue #11681) ........

2008-01-09 00:18 +0000 [r97307-97309]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 97308 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97308 | mmichelson | 2008-01-08 18:17:40 -0600 (Tue, 08 Jan
	  2008) | 3 lines use the \retval doxygen command properly ........

	* /, apps/app_queue.c: Merged revisions 97304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97304 | mmichelson | 2008-01-08 17:49:11 -0600 (Tue, 08 Jan
	  2008) | 5 lines Part 1 of N of adding doxygen comments to
	  app_queue. I picked some of the most common functions used (which
	  also happen to be some the biggest/ugliest functions too) to
	  document first. I'm pretty new to doxygen so criticism is
	  welcome. ........

2008-01-08 23:51 +0000 [r97305]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Add a new flag 'd' (with optional context)
	  permitting any extension within that context to be entered as a
	  new extension during the playback of a voicemail greeting. Patch
	  inspired by bluecrow76, by tilghman. (Closes issue #7063)

2008-01-08 23:35 +0000 [r97280-97303]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_board.c: add copyright (most of this code was
	  written by Marta Carbone), remove some unused code, add/clarify
	  some comments.

	* images/kpad2.jpg: Add the annotation for the textarea used for
	  messages, and also change the background from white to something
	  different to show that we can make use of fonts with transparent
	  background.

	* images/font.png (added): add a font suitable for use with the
	  console GUI. The background of this particular image is
	  transparent so we can preserve the original background when we
	  draw strings.

	* channels/console_gui.c, channels/console_video.c,
	  channels/console_board.c (added), channels/Makefile: add support
	  for textareas, used for various dialog windows on the gui. The
	  main code to implement the textarea is in console_board.c, and
	  uses a simple png image with the font, blitting characters on the
	  designated areas of the main screen. Additionally we provide some
	  annotations in the image used as a skin to indicate which areas
	  are used for text messages. (images will be committed
	  separately). At the moment the dialog area is only used to
	  display a running counter, just as a proof of concept.

2008-01-08 21:56 +0000 [r97248]  Terry Wilson <twilson@digium.com>

	* apps/app_queue.c: Initialize new variable to NULL

2008-01-08 21:28 +0000 [r97203-97208]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: Adding the
	  option of specifying a second interface in a member definition
	  for a queue. app_queue will monitor this second device's state
	  for the member, even though it actually calls the first
	  interface. This ability has been added for statically defined
	  queue members, realtime queue members, and dynamic queue members
	  added through the CLI, dialplan, or manager. (closes issue
	  #11603, reported by acidv)

2008-01-08 21:01 +0000 [r97199-97200]  Olle Johansson <oej@edvina.net>

	* channels/chan_console.c: Change reference to external library so
	  it appears on the extref listing
	  http://www.asterisk.org/doxygen/trunk/extref.html

	* res/res_jabber.c: Iksemel is alive in a new home. Release 1.3 is
	  out with bug fixes.

2008-01-08 20:56 +0000 [r97198]  Tilghman Lesher <tlesher@digium.com>

	* main/autoservice.c, /, main/utils.c: Merged revisions 97194 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97194 | tilghman | 2008-01-08 14:47:07 -0600 (Tue, 08 Jan 2008)
	  | 3 lines Increase constants to where we're less likely to hit
	  them while debugging. (Closes issue #11694) ........

2008-01-08 20:52 +0000 [r97196-97197]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: One line documentation ftw!

	* /, channels/chan_mgcp.c: Merged revisions 97195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97195 | file | 2008-01-08 16:48:20 -0400 (Tue, 08 Jan 2008) | 6
	  lines Fix various DTMF issues in chan_mgcp. (closes issue #11443)
	  Reported by: eferro Patches:
	  dtmf_control_hybrid-inband-mode.patch uploaded by eferro (license
	  337) ........

2008-01-08 20:45 +0000 [r97193]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 97192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97192 | mmichelson | 2008-01-08 14:42:07 -0600 (Tue, 08 Jan
	  2008) | 9 lines Making some changes designed to not allow for a
	  corrupted mailstream for a vm_state. 1. Add locking to the
	  vm_state retrieval functions so that no linked list corruption
	  occurs. 2. Make sure to always grab the persistent vm_state when
	  mailstream access is necessary. 3. Correct an incorrect return
	  value in the init_mailstream function. (closes issue #11304,
	  reported by dwhite) ........

2008-01-08 20:06 +0000 [r97153-97154]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Move common code for setting T38
	  capabilities and fix a bug with fax detection in the SIP RTP read
	  callback. It's still sort of silly... but more on that later.
	  (closes issue #11239) Reported by: dimas Patches:
	  sipt38prop.patch uploaded by dimas (license 88)

	* funcs/func_groupcount.c, /: Merged revisions 97152 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r97152 | file | 2008-01-08 15:53:52 -0400 (Tue, 08 Jan
	  2008) | 4 lines If no group has been provided to the GROUP_COUNT
	  dialplan function then use the first one specific to the channel.
	  (closes issue #11077) Reported by: m4him ........

2008-01-08 19:06 +0000 [r97125]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, main/asterisk.c: Merged revisions 97077
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97077 | tilghman | 2008-01-08 12:02:13 -0600 (Tue, 08 Jan 2008)
	  | 3 lines Apply multiple crash fixes, found in issue #11386, but
	  not completely closing that issue. ........

2008-01-08 18:42 +0000 [r97041-97103]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 97093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r97093 | file | 2008-01-08 14:36:40 -0400 (Tue, 08 Jan 2008) | 4
	  lines Make app_queue calls work with directed pickup. (closes
	  issue #11700) Reported by: jbauer ........

	* utils/extconf.c: Make ast_atomic_fetchadd_int_slow magically
	  appear in extconf. (closes issue #11703) Reported by: dmartin

2008-01-07 23:03 +0000 [r96988]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c: add support for cropping the keypad image
	  while displaying it. This way it can contain additional elements
	  (e.g. fonts, buttons, widgets) without having to use a zillion
	  files to store them.

2008-01-07 22:31 +0000 [r96987]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Explicitly make literal constants long
	  where they are expected to be.

2008-01-07 21:12 +0000 [r96936]  Jason Parker <jparker@digium.com>

	* main/config.c: Display a message if no config mappings are found
	  with "core show config mappings". Closes issue #11704, patch by
	  kshumard.

2008-01-07 21:10 +0000 [r96934-96935]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Document some weird casting magic that's
	  necessary to interface with the c-client

	* doc/tex/imapstorage.tex, apps/app_voicemail.c: Adding
	  user-configurable TCP timeout settings to IMAP voicemail. This
	  could go a long way towards preventing unexplainable hangs
	  experienced by people. In the case of MWI hangs, this also will
	  mean that the SIP port isn't blocked anymore. (closes issue
	  #11665, reported by yehavi)

2008-01-07 20:48 +0000 [r96885-96933]  Russell Bryant <russell@digium.com>

	* /, configs/extensions.conf.sample: Merged revisions 96932 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r96932 | russell | 2008-01-07 14:47:52 -0600
	  (Mon, 07 Jan 2008) | 10 lines Merged revisions 96931 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r96931 | russell | 2008-01-07 14:46:22 -0600 (Mon, 07
	  Jan 2008) | 2 lines Change misery.digium.com to pbx.digium.com
	  ........ ................

	* configs/http.conf.sample: Add a note about viewing the default
	  set of documentation using the built-in http server

	* Makefile: If the HTML documentation exists, install it in the
	  static-http/docs directory so that it can be viewed through the
	  Asterisk http server if it is turned on.

	* build_tools/prep_tarball: Build the HTML version of the doc files
	  for tarballs, as well

	* res/res_smdi.c, /: Merged revisions 96884 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96884 | russell | 2008-01-07 10:39:23 -0600 (Mon, 07 Jan 2008) |
	  3 lines Don't crash if something happens when setting up an SMDI
	  interface and it gets destroyed before the SMDI port handling
	  thread gets created. ........

2008-01-07 16:17 +0000 [r96862]  Kevin P. Fleming <kpfleming@digium.com>

	* formats/format_sln16.c (added): add a file-format driver for
	  16KHz signed linear... which may or may not work

2008-01-07 15:52 +0000 [r96858]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, main/loader.c: Move ModuleLoad and ModuleCheck
	  manager commands from loader.c to manager.c. Previously they
	  would get registered twice because of the way manager.c operates.
	  (closes issue #11699) Reported by: caio1982 Patches:
	  manager_module_commands1.diff uploaded by caio1982 (license 22)

2008-01-07 15:06 +0000 [r96776-96836]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c: update comments to reflect reality (or at
	  least planned behaviour). minor code cleanups

	* channels/console_gui.c: resolve a load-time problem avoiding a
	  call to console_do_answer. On passing, fix dialling from the
	  keypad.

2008-01-05 23:05 +0000 [r96645-96743]  Russell Bryant <russell@digium.com>

	* res/snmp/agent.c: Convert this file over the new method of
	  getting the Asterisk version. (I don't have this building on this
	  machine, so caio1982 on IRC is going to test it for me. :) )

	* Makefile, funcs/func_version.c, main/manager.c,
	  channels/chan_sip.c, main/Makefile, build_tools/make_version_c
	  (added), include/asterisk/version.h (added), res/res_agi.c, main,
	  main/http.c, build_tools/make_version_h (removed),
	  include/asterisk, main/asterisk.c: Now that the version.h file
	  was getting properly regenerated every time the svn revision
	  changed, every module that used the version was getting rebuilt
	  after every svn update. This severly annoyed me pretty quickly,
	  so I have improved the situation. Now, instead of generating
	  version.h, main/version.c is generated. version.c includes the
	  version information, as well as a couple of API calls for modules
	  to retrieve the version. So now, only version.c will get rebuilt,
	  and the main asterisk binary relinked, which is must faster than
	  rebuilding http.c, manager.c, asterisk.c, relinking the asterisk
	  binary, chan_sip.c, func_version.c, res_agi ... The only minor
	  change in behavior here is that the version information reported
	  by chan_sip, for example, is the version of the Asterisk core,
	  and not necessarily the Asterisk version that the chan_sip module
	  came from.

	* main/pbx.c: Print out the name of a function being registered in
	  color, just like the name of applications when they get
	  registered.

	* UPGRADE.txt: Add a note about changing modules.conf since another
	  console channel driver is now present that can not be used at the
	  same time as chan_alsa or chan_oss.

	* channels/chan_console.c: Add the URL to the home page for
	  portaudio. Also add the location of the svn repository to check
	  out portaudio v19.

	* /, main/devicestate.c: Merged revisions 96644 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96644 | russell | 2008-01-04 20:09:19 -0600 (Fri, 04 Jan 2008) |
	  2 lines Don't pass an empty string as the device name. ........

2008-01-05 01:05 +0000 [r96621]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_usbradio.c: improve chan_usbradio to use
	  indications just like chan_alsa/chan_oss do now

2008-01-04 23:12 +0000 [r96576]  Tilghman Lesher <tlesher@digium.com>

	* /, main/devicestate.c: Merged revisions 96575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96575 | tilghman | 2008-01-04 17:03:40 -0600 (Fri, 04 Jan 2008)
	  | 7 lines Fix the problem of notification of a device state
	  change to a device with a '-' in the name. Could probably do with
	  a better fix in trunk, but this bug has been open way too long
	  without a better solution. Reported by: stevedavies Patch by:
	  tilghman (Closes issue #9668) ........

2008-01-04 22:57 +0000 [r96574]  Jason Parker <jparker@digium.com>

	* /, res/res_features.c: Merged revisions 96573 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #11237) ........ r96573 | qwell | 2008-01-04 16:55:56 -0600
	  (Fri, 04 Jan 2008) | 4 lines Properly continue in the dialplan if
	  using PARKINGEXTEN and the slot is full. Issue 11237, patch by
	  me. ........

2008-01-04 19:35 +0000 [r96547]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 96525 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96525 | tilghman | 2008-01-04 13:27:25 -0600 (Fri, 04 Jan 2008)
	  | 4 lines If you change the bindaddr in sip.conf to a non-bound
	  address and reload, sip goes kablooie. Reported and patched by:
	  one47 (Closes issue #11535) ........

2008-01-04 17:21 +0000 [r96500]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, configure, include/asterisk/autoconfig.h.in,
	  configure.ac, acinclude.m4: [commit message] (closes issue
	  #10393) Reported by: tzafrir Patches: chan_alarm_asterisk.diff
	  uploaded by tzafrir (license 46) (modified by me and added
	  configure script support)

2008-01-04 17:19 +0000 [r96499]  Philippe Sultan <philippe.sultan@gmail.com>

	* res/res_jabber.c: Use SASL DIGEST-MD5 authentication over
	  unsecured network connections only. This authentication mechanism
	  is implemented under the iksemel API, which makes use of GnuTLS,
	  whereas we use OpenSSL. Note : there's ongoing dicsussion at the
	  SASL IETF WG in order to deprecate SASL DIGEST-MD5, see
	  http://ietfreport.isoc.org/ids-wg-sasl.html.

2008-01-04 16:21 +0000 [r96450]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 96449 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96449 | russell | 2008-01-04 10:19:22 -0600 (Fri, 04 Jan 2008) |
	  7 lines Make use of the temporary channel pointer while the pvt
	  is unlocked. (closes issue #11675) Reported by: flefoll Patches:
	  chan_zap.c.patch-store-owner-before-unlock uploaded by flefoll
	  (license 244) ........

2008-01-03 23:14 +0000 [r96397-96398]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile: we have to *always* use a completely silent 'make'
	  invocation for generating the module embedding rules

	* Makefile: there was no reason to add this define for non-Solaris
	  platforms

2008-01-03 22:46 +0000 [r96395]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 96394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96394 | russell | 2008-01-03 16:44:22 -0600 (Thu, 03 Jan 2008) |
	  3 lines Don't crash if the iax2 pvt structure has been destroyed
	  before we get to this point (closes issue #11672, reported by
	  snuffy, patched by me) ........

2008-01-03 21:58 +0000 [r96301-96368]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/channel.h: Document recent API addition

	* res/res_config_pgsql.c, /: Merged revisions 96318 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r96318 | tilghman | 2008-01-03 15:37:02 -0600 (Thu, 03
	  Jan 2008) | 4 lines Missed initialization caused crash. Reported
	  and fixed by: tiziano (Closes issue #11671) ........

	* main/channel.c: Allow the uniqueid to be used for searching for a
	  channel in the list. Reported and initially patched by:
	  michael-fig (Closes issue #11340)

2008-01-03 20:04 +0000 [r96245-96272]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, tests/Makefile (added), tests/test_skel.c (added),
	  tests (added): add some simple infrastructure for modules to be
	  used for testing parts of Asterisk

	* channels/answer.h (removed), channels/ring10.h (removed),
	  channels/busy.h (removed), channels/ringtone.h (removed),
	  channels/Makefile, channels/chan_oss.c, channels/gentone.c
	  (removed), channels: eliminiate sound_thread() and other stuff
	  from chan_oss since Asterisk indications can handle it remove
	  gentone and all the headers containing tones that are no longer
	  needed

	* channels/chan_alsa.c: coding guidelines cleanup remove background
	  thread and all sound generation mechanisms, as the built-in
	  indications can handle everything that is needed

2008-01-03 14:47 +0000 [r96221]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 96198 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r96198 | crichter | 2008-01-03 13:08:40 +0100 (Do, 03
	  Jan 2008) | 1 line when overlapdial was used and no number was
	  dialed, the call was dropped, now we just jump into the s
	  extension, which makes a lot more sense. ........

2008-01-03 06:16 +0000 [r96147-96174]  Tilghman Lesher <tlesher@digium.com>

	* res/res_agi.c: Add coordination between AMI and AGI applications,
	  with an asyncagi method Feature proposed and patched by: moy
	  (Closes issue #11282)

	* apps/app_mp3.c, apps/app_ices.c, main/asterisk.c: Compatibility
	  fix for OpenBSD Report and fix by: mvanbaak (Closes issue #11669)

2008-01-02 23:48 +0000 [r96103]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 96102 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r96102 | mmichelson | 2008-01-02 17:46:02 -0600 (Wed, 02 Jan
	  2008) | 4 lines We need to reset the membername to NULL on each
	  iteration of this loop, otherwise the result is that multiple
	  members can have the same name, since the variable was not reset
	  on each iteration of the loop. ........

2008-01-02 23:22 +0000 [r96076-96079]  Russell Bryant <russell@digium.com>

	* channels/chan_console.c: Add support for generating a ringing
	  sound on an incoming call. This is a bit of a hack. It just asks
	  the core to generate the same tone that it would when you hear
	  ringback when making an outbound call. But hey, it works, and you
	  get the localized ring tone for the appropriate language set on
	  the channel.

	* channels/chan_console.c: Note that this module doesn't actually
	  play a ringing sound for an incoming call ... oops

	* channels/chan_console.c: Show the correct CLI command to answer
	  the call

2008-01-02 22:41 +0000 [r96073]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c: actually parse and store echocan parameters
	  from zapata.conf... this *should* work <G>

2008-01-02 22:40 +0000 [r96071]  Joshua Colp <jcolp@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac: Don't
	  use AST_C_DEFINE_CHECK for the two pthread things that may not
	  actually be definitions, they could be enums for example.

2008-01-02 22:29 +0000 [r96028]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c: Add curly braces around a compound if
	  statement so that trunk will build properly

2008-01-02 21:51 +0000 [r96019]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: another
	  checkpoint... chan_zap can now use the new ZT_ECHOCAN_PARAMS
	  ioctl if it is present, but doesn't parse any supplied parameters
	  yet (this implementation is not very memory efficient as the
	  parameters and their values will be duplicated for each channel
	  that has the same settings, but we can worry about that later
	  once it is working)

2008-01-02 21:49 +0000 [r96018]  Russell Bryant <russell@digium.com>

	* main/libresample/include/libresample.h: Add doxygen documentation
	  to libresample.h while it's still fresh on my mind

2008-01-02 21:08 +0000 [r95994]  Mark Michelson <mmichelson@digium.com>

	* funcs/func_odbc.c, channels/chan_agent.c, funcs/func_strings.c,
	  apps/app_rpt.c: Change instances of AST_NONSTANDARD_APP_ARGS(foo,
	  bar, ',') to AST_STANDARD_APP_ARGS(foo, bar) (closes issue
	  #11668, reported and patched by mvanbaak)

2008-01-02 20:26 +0000 [r95947]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 95946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95946 | file | 2008-01-02 16:24:09 -0400 (Wed, 02 Jan 2008) | 4
	  lines Allocate a SIP refer structure when performing a transfer
	  using BYE with Also so that the transfer information is properly
	  stored. (AST-2008-001) (closes issue #11637) Reported by:
	  greyvoip ........

2008-01-02 20:23 +0000 [r95944-95945]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Since ',' is the standard argument separator in
	  trunk, change app_queue to use AST_STANDARD_APP_ARGS instead of
	  AST_NONSTANDARD_APP_ARGS for determining member data.

	* include/asterisk/app.h: Fix a typo in a comment.
	  AST_STANDARD_APP_ARGS uses ',' as the separator, not '|'.

2008-01-02 19:47 +0000 [r95893-95939]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c: clean up hwgain CLI command and improve docs
	  for swgain CLI command

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4: improve AC_C_DEFINE_CHECK to not try to evaluate
	  the macro being checked for, but just check for its existence
	  finish implementation of check for Zaptel HWGAIN support add
	  check for Zaptel ECHOCANCEL_PARAMS support

	* codecs/Makefile, include/asterisk/libresample.h (added),
	  codecs/codec_resample.c: and now just to keep the libresample
	  party going... if the functions from libresample are going to be
	  in the main Asterisk binary, it makes sense for the header that
	  defines them to be available without any special CFLAGS and to
	  out-of-tree modules building against /usr/include/asterisk

	* channels/chan_zap.c: umm... this did not compile on x86-64, and
	  could not possibly have worked on any platform as it was passing
	  string pointers to a function expecting ints

2008-01-02 18:05 +0000 [r95891]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 95890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95890 | mmichelson | 2008-01-02 11:51:22 -0600 (Wed, 02 Jan
	  2008) | 9 lines A change to improve the accuracy of queue logging
	  in the case where a member does not answer during the specified
	  timeout period. Prior to this change, there was a small chance
	  that the member name recorded in this case would be blank. Also
	  prior to this change, if using the ringall strategy, if no one
	  answered the call during the specified timeout, the member name
	  listed in the queue log would randomly be one of the members that
	  was rung. (closes issue #11498, reported and tested by hloubser,
	  patched by me) ........

2008-01-02 17:38 +0000 [r95888]  Jason Parker <jparker@digium.com>

	* apps/app_osplookup.c: Update osplookup documentation to use
	  commas instead of pipes. Closes issue #11666, patch by Laureano.

2008-01-02 16:20 +0000 [r95864]  Russell Bryant <russell@digium.com>

	* main/Makefile, main/translate.c: For some odd reason, the last
	  set of libresample build changes from Kevin did not work for
	  everyone, but it did for some. This set of changes makes trunk
	  start again for those having problems. Instead of building
	  libresample as a static library, it just links the object files
	  in directly with the asterisk binary.

2008-01-02 14:53 +0000 [r95816-95841]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/Makefile: fix some long-time breakage that kept
	  chan_misdn from being embedded

	* channels/Makefile: use the proper technique for including
	  submodules so that embedding will work

	* CHANGES: note that chan_console requires portaudio v19

	* configure, configure.ac: actually check for a function present in
	  libiconv (don't know how this test could have worked before) and
	  don't do the check on Linux/GNU systems because libiconv is not
	  present there and attempting to link with '-liconv' always fails
	  (it's not necessary as the iconv functionality is always
	  available)

	* main/libresample/src/filterkit.h,
	  main/libresample/src/resample.c,
	  main/libresample/win/libresample.dsp, main/libresample/configure,
	  main/libresample/Makefile.in, res/Makefile,
	  main/libresample/configure.in, main/libresample/src,
	  main/libresample/tests/testresample.c,
	  main/libresample/win/libresample.vcproj,
	  main/libresample/tests/compareresample.c, main/libresample/tests,
	  codecs/codec_resample.c, res/res_resample.c (removed),
	  main/libresample/README.txt, main/libresample/src/resamplesubs.c,
	  main/libresample/tests/resample-sndfile.c,
	  main/libresample/src/configtemplate.h,
	  main/libresample/install-sh, main/Makefile, main/translate.c,
	  main/libresample/include, main/libresample/src/resample_defs.h,
	  codecs/Makefile, main/libresample/config.guess,
	  main/libresample/config.sub, main/libresample/win,
	  main/libresample/LICENSE.txt, main/libresample (added),
	  main/libresample/Makefile.asterisk, build_tools/strip_nonapi,
	  res/libresample (removed), main/libresample/src/filterkit.c,
	  main/libresample/include/libresample.h: go back to including
	  libresample in the main Asterisk binary, but this time including
	  a small hack to ensure that it does get linked in (and also
	  modify the strip_nonapi script to leave the resample_<foo>
	  symbols alone)

2008-01-02 11:34 +0000 [r95794]  Philippe Sultan <philippe.sultan@gmail.com>

	* res/res_jabber.c: Set stream flags to zero upon initialization.
	  When the XMPP over TLS/SSL connection resets for some reason, it
	  is wrongly believed as being secured, which makes the
	  re-connection process endlessly fail. This was reported by
	  mvanbaak in issue #11644.

2008-01-02 09:16 +0000 [r95771-95772]  Luigi Rizzo <rizzo@icir.org>

	* main/loader.c: some cleanup of this code while I am trying to
	  debug a problem with gdb dying while debugging asterisk. The
	  problem seems to be related with a race in the handling of
	  module_list, which in turn is triggeded by calling dlopen() on a
	  system which uses initializers to create locks.

	* include/asterisk/module.h: There are three instances of the
	  module definition macros, which make maintaining this file very
	  error prone. This commit merges the embedded and !embedded
	  versions, and fixes the C++ version. Eventually we should move to
	  a single version of the macro. Too bad C++ doesn't like the
	  C-style struct initializers .foo = some_value

2008-01-02 04:33 +0000 [r95697-95746]  Russell Bryant <russell@digium.com>

	* res/libresample/src/resample_defs.h,
	  res/libresample/src/resample.c: Don't make libresample print out
	  debugging output

	* main/translate.c: Make the translation table show slin16

	* apps/app_meetme.c: fix a spacing issue introduced in revision
	  95443.

	* main/Makefile, res/libresample/README.txt, res/Makefile,
	  res/libresample/install-sh, res/libresample/configure,
	  res/libresample/Makefile.in, res/libresample/include,
	  codecs/Makefile, res/libresample/configure.in,
	  res/libresample/src, res/libresample/config.guess,
	  main/libresample (removed), res/libresample/config.sub,
	  res/libresample/win, codecs/codec_resample.c,
	  res/libresample/LICENSE.txt, res/libresample (added),
	  res/libresample/Makefile.asterisk, res/libresample/tests,
	  res/res_resample.c (added): Instead of linking libresample into
	  the main Asterisk binary, build it as res_resample, and mark
	  codec_resample as dependent upon res_resample. This prevents the
	  linker from optimizing away libresample, and also makes it so the
	  libresample code isn't linked in to multiple places. (I have
	  another module in a branch that needs it, too.)

2008-01-01 23:55 +0000 [r95671-95673]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c: call directly the cli command to
	  implement hangup.

	* channels/vcodecs.c: prevent a panic when destroying a channel
	  with no incoming video.

	* channels/console_video.c: remove a leftover sleep(1) used for
	  debugging

2008-01-01 23:09 +0000 [r95648]  Joshua Colp <jcolp@digium.com>

	* codecs/Makefile: Fix building of codec_resample on platforms
	  other then Cygwin. On everything else it actually gets built
	  after codec_resample, so you can't exactly link it in since it
	  doesn't exist.

2008-01-01 22:21 +0000 [r95624-95625]  Luigi Rizzo <rizzo@icir.org>

	* codecs/Makefile, codecs/codec_resample.c: make codec_resample
	  build on __CYGWIN__, and make it load on FreeBSD (and probably
	  other systems as well). Both need libresample.a to be specified
	  in the linking phase, and cygwin needs <float.h> as other BSD.
	  The checks for OS-specific headers should really be moved to some
	  common header though.

	* build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  funcs/func_iconv.c, makeopts.in: implement "configure" checks for
	  libiconv, and add the iconv dependency for func_iconv. This fixes
	  some build issues on CYGWIN and FreeBSD and probably other
	  platforms where libiconv is not there by default

2007-12-31 23:44 +0000 [r95578]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, /: Merged revisions 95577 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95577 | mmichelson | 2007-12-31 17:43:13 -0600 (Mon, 31 Dec
	  2007) | 9 lines Avoiding a potentially bad locking situation.
	  ast_merge_contexts_and_delete writelocks the conlock, then calls
	  ast_hint_extension, which attempts to readlock the same lock.
	  Recursion with read-write locks is dangerous, so the inner lock
	  needs to be removed. I did this by copying the "guts" of
	  ast_hint_extension into ast_merge_contexts_and_delete (sans the
	  extra lock). (this change is inspired by the locking problems
	  seen in issue #11080, but I have no idea if this is the
	  problematic area experienced by the reporters of that issue)
	  ........

2007-12-31 22:41 +0000 [r95501-95550]  Russell Bryant <russell@digium.com>

	* codecs/codec_resample.c: Use float.h to fix the build on FreeBSD.
	  Also, add some other platforms as they are likely the same.

	* channels/chan_console.c: Update chan_console to natively use a 16
	  kHz sample rate. If it is talking to an 8 kHz endpoint, then
	  codec_resample will automatically be used to properly resample
	  the audio before sending it to/from chan_console.

	* main/libresample/src/filterkit.h, main/libresample/README.txt,
	  main/libresample/tests/resample-sndfile.c,
	  main/libresample/src/resamplesubs.c, main/Makefile,
	  main/libresample/install-sh,
	  main/libresample/src/configtemplate.h,
	  main/libresample/src/resample.c,
	  main/libresample/win/libresample.dsp, main/libresample/configure,
	  main/libresample/Makefile.in, main/libresample/include, CHANGES,
	  main/libresample/src/resample_defs.h,
	  main/libresample/configure.in, main/libresample/src,
	  main/libresample/config.guess, codecs/Makefile,
	  main/libresample/tests/testresample.c, codecs/slin_resample_ex.h
	  (added), main/libresample/config.sub, main/libresample/win,
	  main/libresample/win/libresample.vcproj,
	  main/libresample/LICENSE.txt, main/libresample (added),
	  main/libresample/Makefile.asterisk, main/libresample/tests,
	  main/libresample/tests/compareresample.c, codecs/codec_resample.c
	  (added), main/libresample/src/filterkit.c,
	  main/libresample/include/libresample.h: Merge changes from
	  team/russell/codec_resample This commit imports libresample for
	  use in Asterisk. It also adds a new codec module, codec_resample.
	  This module uses libresample to re-sample signed linear audio
	  between 8 kHz and 16 kHz. It also provides an alternative for
	  converting between 16 kHz G.722 and 8 kHz signed linear when
	  using G.722, which will likely be useful as some people have
	  complained about volume issues when the current codec_g722
	  converts to 8 kHz signed linear. But, to test this, you will have
	  to disable the g722-to-slin and g722-to-slin16 translators in
	  codec_g722.c.

2007-12-31 20:33 +0000 [r95490]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_env.c: Merged revisions 95470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95470 | tilghman | 2007-12-31 14:27:26 -0600 (Mon, 31 Dec 2007)
	  | 3 lines Allow the default "0" to be returned if the STAT fails
	  (Closes issue #11659) ........

2007-12-31 18:46 +0000 [r95443]  Mark Michelson <mmichelson@digium.com>

	* apps/app_meetme.c: Fix a compiler warning (closes issue #11658,
	  reported and patched by eliel)

2007-12-31 16:13 +0000 [r95383-95412]  Russell Bryant <russell@digium.com>

	* configs/console.conf.sample (added), configs/modules.conf.sample,
	  channels/chan_console.c (added), CHANGES: Merge the main set of
	  changes from team/russell/chan_console. Add a new console channel
	  driver, chan_console, which is a console channel driver that uses
	  portaudio as a cross platform audio interface. It was written to
	  provide a console channel driver that works with Mac CoreAudio,
	  but it supports a number of other audio interfaces, as well,
	  including OSS and ALSA. It could one day be the single console
	  channel driver, but does not yet have as many features as
	  chan_oss.

	* include/asterisk/channel.h: fix a spelling error in a comment

	* include/asterisk/config.h: Add CV_STRINGFIELD() macro. This lets
	  you set a config variable to a string field. (from
	  team/russell/chan_console)

	* configure, include/asterisk/autoconfig.h.in: Regenerate configure
	  script to include check for portaudio.

	* build_tools/menuselect-deps.in, configure.ac, makeopts.in: Add
	  configure script checking for portaudio.

2007-12-29 02:02 +0000 [r95262-95313]  Luigi Rizzo <rizzo@icir.org>

	* channels/vcodecs.c, channels/console_video.c, channels/Makefile,
	  channels/console_video.h, channels/vgrabbers.c (added): Move
	  grabbers definitions to a separate file, vgrabbers.c, so it is
	  easier to add more entries. This required moving struct grab_desc
	  to the common header, and adding an entry in the Makefile. On
	  passing, cleanup some comments and file headers (some are still
	  missing).

	* channels/console_gui.c, channels/console_video.c: virtualize the
	  interface for video grabbers, which should make it easier to add
	  support for more grabbers (V4L2, firewire, and so on).

	* channels/console_video.c: Add a few entries up to 1408x1152 in
	  the table of known video resolutions. This makes it very
	  convenient to enlarge images using the right-click on the video
	  window.

	* channels/vcodecs.c, channels/console_video.c: change the
	  interface of video encapsulation routines, they only need the
	  buffer and mtu as input.

	* channels/console_gui.c, channels/vcodecs.c,
	  channels/console_video.c, channels/console_video.h: various
	  rearrangements and renaming of console_video stuff

2007-12-28 18:39 +0000 [r95233]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: The diff for this change looks really bad, but
	  all I did here was decrease the indentation of most of the
	  queue_exec function by reversing the logic of an if statement.
	  This change makes the function comply better with the coding
	  guidelines. Since this change is purely a cosmetic change to the
	  code, I am only committing the change to trunk.

2007-12-28 18:26 +0000 [r95192]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 95191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95191 | russell | 2007-12-28 12:24:59 -0600 (Fri, 28 Dec 2007) |
	  6 lines Remove duplicate increment of the header count in the
	  add_header() function. (closes issue #11648) Reported by: makoto
	  Patch provided by sergee, committed patch by me, inspired by
	  comments from putnopvut ........

2007-12-28 16:12 +0000 [r95167]  Mark Michelson <mmichelson@digium.com>

	* apps/app_amd.c, CHANGES: Some changes to app_amd. The channel
	  name is printed in verbose messages maximumWordLength option
	  added. Duration of words that do not meet the minimum word
	  duration will be logged The duration of pre-greeting silence will
	  be logged Only consider us in the greeting if we actually
	  detected a valid word duration. (closes issue #11650, reported
	  and patched by davevg)

2007-12-28 08:57 +0000 [r95139]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_video.c: fix a small bug in printing out
	  geometries - wrong input.

2007-12-28 00:17 +0000 [r95096]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 95095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95095 | mmichelson | 2007-12-27 18:16:15 -0600 (Thu, 27 Dec
	  2007) | 8 lines I found a bug while browsing the queue code and
	  managed to reproduce it in a small setup. If a queue uses the
	  ringall strategy, it was possible through unfortunate coincidence
	  for a single member at a given penalty level to make app_queue
	  think that all members at that penalty level were unavailable and
	  cause the members at the next penalty level to be rung. With this
	  patch, we will only move to the next penalty level if ALL the
	  members at a given penalty level are unreachable. ........

2007-12-27 23:32 +0000 [r95073]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dictate.c, apps/app_mp3.c, apps/app_voicemail.c: remove
	  more unnecessary casts for NULL. main/say.c is a big offender in
	  this respect.

2007-12-27 23:28 +0000 [r95070]  Jason Parker <jparker@digium.com>

	* doc/asterisk.8, main/asterisk.c: Fix -s socket option, and
	  document it as well. Closes issue #11645, patch by Laureano.

2007-12-27 23:13 +0000 [r95068-95069]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_ices.c, apps/app_queue.c, apps/app_voicemail.c: NULL
	  does not need to be cast to (char *)

	* channels/chan_oss.c: remove useless casts

2007-12-27 21:41 +0000 [r95025]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 95024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r95024 | russell | 2007-12-27 15:40:02 -0600 (Thu, 27 Dec 2007) |
	  9 lines Don't report a syntax error when an empty string is
	  passed to ast_get_group. Just return 0. (closes issue #11540)
	  Reported by: tzafrir Patches: group_empty.diff uploaded by
	  tzafrir (license 46) -- slightly changed by me ........

2007-12-27 20:11 +0000 [r94978]  Mark Michelson <mmichelson@digium.com>

	* /, main/io.c: Merged revisions 94977 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94977 | mmichelson | 2007-12-27 14:09:06 -0600 (Thu, 27 Dec
	  2007) | 3 lines Fixing a typo in a comment. ........

2007-12-27 17:34 +0000 [r94908-94934]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_h323.c: Merged revisions 94924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94924 | file | 2007-12-27 13:32:15 -0400 (Thu, 27 Dec 2007) | 6
	  lines Include types.h in chan_h323 as without it it can not be
	  compiled on some operating systems like FreeBSD to name one.
	  (closes issue #11585) Reported by: sobomax Patches:
	  chan_h323.c.diff uploaded by sobomax (license 359) ........

	* /, channels/chan_sip.c: Merged revisions 94905 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94905 | file | 2007-12-27 13:27:11 -0400 (Thu, 27 Dec 2007) | 4
	  lines Use ast_strlen_zero to see if our_contact is set or not on
	  the dialog. It is possible for it to be a pointer to NULL.
	  (closes issue #11557) Reported by: FuriousGeorge ........

2007-12-27 17:26 +0000 [r94904]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/console_video.c: more
	  localization of gui stuff

2007-12-27 17:18 +0000 [r94903]  Mark Michelson <mmichelson@digium.com>

	* doc/manager_1_1.txt: Adding documentation for new manager actions
	  and events in app_queue

2007-12-27 16:51 +0000 [r94902]  Luigi Rizzo <rizzo@icir.org>

	* CHANGES: clarify the type of video support in chan_oss

2007-12-27 16:11 +0000 [r94830-94877]  Russell Bryant <russell@digium.com>

	* codecs/codec_g722.c: I went looking for where we downloaded the
	  g722 implementation and came across these two links. So, I'm
	  adding them so they are available for reference later.

	* /, main/translate.c, include/asterisk/translate.h: Merged
	  revisions 94828-94829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94828 | russell | 2007-12-27 08:33:21 -0600 (Thu, 27 Dec 2007) |
	  9 lines Change ast_translator_best_choice() to only pay attention
	  to audio formats. This fixes a problem where Asterisk claims that
	  a translation path can not be found for channels involving video.
	  (closes issue #11638) Reported by: cwhuang Tested by: cwhuang
	  Patch suggested by cwhuang, with some additional changes by me.
	  ........ r94829 | russell | 2007-12-27 08:44:29 -0600 (Thu, 27
	  Dec 2007) | 2 lines Use the constant that I really meant to use
	  here ... ........

2007-12-27 09:13 +0000 [r94826-94827]  Olle Johansson <oej@edvina.net>

	* funcs/func_dialplan.c: This function checks more than just
	  contexts...

	* apps/app_pickupchan.c: - Add Copyright - Doxygen fixes Note: -
	  This application needs better documentation and a RESULT code in
	  the dialplan.

2007-12-27 01:03 +0000 [r94825]  Kevin P. Fleming <kpfleming@digium.com>

	* main/manager.c, /: Merged revisions 94824 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94824 | kpfleming | 2007-12-26 18:01:47 -0700 (Wed, 26 Dec 2007)
	  | 2 lines make this comment explain the situation in an even more
	  explicit fashion ........

2007-12-27 00:48 +0000 [r94819-94823]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c: more steps to decouple the gui from the
	  rest of the code.

	* channels/console_gui.c, channels/console_video.c,
	  channels/console_video.h: Enable building the code even if SDL is
	  not present (similarly, SDL is also detected at runtime). Now we
	  should be able to stream video even without a rendering device
	  (useful for remote monitoring).

	* channels/console_gui.c, channels/console_video.c: more
	  localizations around sdl_setup

	* channels/console_gui.c: use fread instead of mmap to read in the
	  comment area from the keypad. fread is simpler and more portable,
	  and there is no performance gain in using mmap.

	* images/kpad2.jpg: update the region description with an empty
	  line at the beginning.

2007-12-26 22:38 +0000 [r94818]  Tilghman Lesher <tlesher@digium.com>

	* build_tools/cflags.xml, channels/chan_zap.c: Allow more spans
	  than 32. Also, rearrange compiler flags so the most often used
	  flags appear closer to the top. Reported by: tzafrir Patch by:
	  tzafrir,tilghman (Closes issue #11528)

2007-12-26 22:29 +0000 [r94817]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/console_video.c: another bunch
	  of gui localizations

2007-12-26 22:14 +0000 [r94814]  Jason Parker <jparker@digium.com>

	* apps/app_exec.c: Make 'else' argument to ExecIf optional. Clean
	  up the description and usage text a bit. Closes issue #11564,
	  patch by pnlarsson (with some extra cleanup by me).

2007-12-26 22:10 +0000 [r94810-94813]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/console_video.c: more
	  localization of sdl stuff

	* channels/console_gui.c, channels/console_video.c,
	  channels/console_video.h: move more gui stuff into console_gui.c

2007-12-26 20:49 +0000 [r94809]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 94808 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94808 | tilghman | 2007-12-26 14:43:38 -0600 (Wed, 26 Dec 2007)
	  | 6 lines Workaround for what is probably a glibc bug (but we'll
	  see this crop up again and again, if we don't add the
	  workaround). Reported by: rolek Patch by: tilghman (Closes issue
	  #11601, closes issue #11426) ........

2007-12-26 20:02 +0000 [r94806]  Jason Parker <jparker@digium.com>

	* pbx/pbx_loopback.c, apps/app_zapbarge.c, pbx/pbx_spool.c,
	  apps/app_authenticate.c, apps/app_zapscan.c, apps/app_zapras.c,
	  apps/app_alarmreceiver.c, apps/app_amd.c, pbx/pbx_realtime.c,
	  pbx/pbx_dundi.c, apps/app_zapateller.c, pbx/pbx_config.c,
	  pbx/pbx_gtkconsole.c, apps/app_adsiprog.c, apps/app_cdr.c: Use
	  defined return values in load_module in more places. (closes
	  issue #11096) Patches: pbx_config.c.patch uploaded by moy
	  (license 222) pbx_dundi.c.patch uploaded by moy (license 222)
	  pbx_gtkconsole.c.patch uploaded by moy (license 222)
	  pbx_loopback.c.patch uploaded by moy (license 222)
	  pbx_realtime.c.patch uploaded by moy (license 222)
	  pbx_spool.c.patch uploaded by moy (license 222)
	  app_adsiprog.c.patch uploaded by moy (license 222)
	  app_alarmreceiver.c.patch uploaded by moy (license 222)
	  app_amd.c.patch uploaded by moy (license 222)
	  app_authenticate.c.patch uploaded by moy (license 222)
	  app_cdr.c.patch uploaded by moy (license 222)
	  app_zapateller.c.patch uploaded by moy (license 222)
	  app_zapbarge.c.patch uploaded by moy (license 222)
	  app_zapras.c.patch uploaded by moy (license 222)
	  app_zapscan.c.patch uploaded by moy (license 222)

2007-12-26 20:01 +0000 [r94805]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c, channels/vcodecs.c,
	  channels/console_video.c, channels/console_video.h: more
	  preparation for untangling of the various console_video stuff

2007-12-26 19:09 +0000 [r94796-94802]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 94801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94801 | russell | 2007-12-26 13:04:31 -0600 (Wed, 26 Dec 2007) |
	  4 lines Just in case the AST_FLAG_END_DTMF_ONLY flag was already
	  set before starting autoservice, remember it and ensure that the
	  channel has the same setting when autoservice gets stopped.
	  (pointed out by d1mas, patched up by me) ........

	* funcs/func_dialplan.c (added), CHANGES: Add a new dialplan
	  function, DIALPLAN_EXISTS(), which allows you to check for the
	  existence of a dialplan target. (closes issue #11579) Reported
	  by: irroot Patches: func_dialplan2.c uploaded by irroot (license
	  52) -- Additional changes by me.

	* main/autoservice.c, /: Merged revisions 94797 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94797 | russell | 2007-12-26 12:46:39 -0600 (Wed, 26 Dec 2007) |
	  4 lines When a channel is in autoservice, mark a flag on the
	  channel that says that we only care about the END of a digit.
	  That way, no magic digit emulation stuff will happen when all
	  we're doing is queueing up END frames. ........

	* main/channel.c: Leave a note for a minor bug that was pointed out
	  by d1mas

2007-12-26 18:05 +0000 [r94795]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_zap.c: Convert raw bits for callprogress bitfield
	  to use constants, for greater code clarity Reported by: dimas
	  Patch by: dimas (Closes issue #11280)

2007-12-26 17:26 +0000 [r94787-94794]  Russell Bryant <russell@digium.com>

	* /, res/res_features.c: Merged revisions 94793 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94793 | russell | 2007-12-26 11:24:17 -0600 (Wed, 26 Dec 2007) |
	  3 lines Don't try to send a parked call back to itself. (closes
	  issue #11622, reported by djrodman, patched by me) ........

	* Makefile, /: Merged revisions 94789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94789 | russell | 2007-12-26 11:00:03 -0600 (Wed, 26 Dec 2007) |
	  5 lines List include/asterisk/version.h as a .PHONY target
	  because we want the commands listed for this target to be
	  executed regardless of whether the file exists or not. This fixes
	  having the version not up to date when running from svn. (closes
	  issue #11619, reported by plack, fixed by me) ........

	* main/autoservice.c, /: Merged revisions 94790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94790 | russell | 2007-12-26 11:06:26 -0600 (Wed, 26 Dec 2007) |
	  5 lines Don't store DTMF BEGIN frames while a channel is in
	  autoservice. It's just going to make ast_read() do a lot of extra
	  work when the channel comes back out of autoservice. (closes
	  issue #11628, patched by me) ........

	* channels/chan_iax2.c: Fix a bug in peer handling that caused
	  multiple instances of a peer to end up in the peers container
	  after a reload. Somehow, this bug doesn't exist in 1.4 ...
	  (closes issue #11626) (reported by pnlarsson, additional info
	  from mvanbaak, fixed by me)

	* utils: update svn:ignore for astcanary

2007-12-26 15:58 +0000 [r94782]  Mark Michelson <mmichelson@digium.com>

	* configs/extconfig.conf.sample, main/logger.c, CHANGES: Adding
	  support for storing the queue log entries in a realtime backend.
	  (closes issue #11625, reported and patched by sergee) Thank you
	  very much to sergee for adding this new feature!

2007-12-26 10:14 +0000 [r94774]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_gui.c (added), channels/vcodecs.c (added),
	  channels/console_video.c: Split console_video.c so that video
	  codecs and gui functions are in separate files (still #include'd
	  because of tangling in the data structures, but this is going to
	  be cleaned up). The video grabbing functions still need to be
	  moved to a separate file.

2007-12-25 04:10 +0000 [r94771-94773]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_pickupchan.c (added): Add pickup by channel (Closes
	  issue #11161)

	* channels/chan_zap.c, configs/zapata.conf.sample: Change the
	  abbreviated TON from 'A' to 'V', since 'A' is a legitimate DTMF
	  character. Also, fix the documentation to match the code.

	* res/res_agi.c: Add channel thread ID to the information passed to
	  AGI. Reported by: dror99 Patch by: tilghman (Closes issue #11162)

2007-12-24 19:43 +0000 [r94764-94768]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 94767 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94767 | tilghman | 2007-12-24 13:36:59 -0600 (Mon, 24 Dec 2007)
	  | 5 lines Race: we need to wait to queue a NewChannel event until
	  after the channel is inserted into the channel list. The reason
	  is because some manager users immediately queue requests from the
	  channel when they see that event and are confused when Asterisk
	  reports no such channel. (Closes issue #11632) ........

	* /: Merged revisions 94763 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94763 | tilghman | 2007-12-24 09:39:56 -0600 (Mon, 24 Dec 2007)
	  | 5 lines Another bit of bad logic in realtime_peer Reported by:
	  dimas Patch by: dimas (Closes issue #11631) ........

2007-12-23 14:51 +0000 [r94713-94741]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_video.c, channels/console_video.h: support
	  sdl_videodriver to send output to x11/aalib/console

	* channels/console_video.c: move reading info from the keypad to a
	  separate function. Remove an unused keypad field and some
	  debugging messages. Adjust formatting on config file parsing

	* channels/console_video.c: make sure the minimum surface depth is
	  16bpp so we can create YUVoverlays. With this change we can do
	  setenv SDL_VIDEODRIVER aalib and output to an ascii window (which
	  is still in an X11 window). If you also do unsetenv DISPLAY then
	  the output goes into the main asterisk window, unfortunately it
	  interferes with the normal output so you don't see much. In any
	  case, i don't think we are very far away from having a working
	  xterm videophone!

	* channels/Makefile: avoid rebuilding dependent files if the
	  generated busy.h and ringtone.h do not change. Ths masks (but
	  does not solve) a but that i am seeing in doing a 'gmake install'
	  without donig a 'gmake all' first.

2007-12-23 01:38 +0000 [r94662]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 94660 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94660 | tilghman | 2007-12-22 19:21:03 -0600 (Sat, 22 Dec 2007)
	  | 2 lines Argh... I suppose third time's the charm. ........

2007-12-22 22:44 +0000 [r94615-94638]  Luigi Rizzo <rizzo@icir.org>

	* configs/oss.conf.sample, channels/console_video.c: Change the
	  name of config file entries for keypad regions from
	  'keypad_entry' to 'region'. Fix the example file accordingly.
	  Also make some fixes in the code do reset entries on reload of
	  the keypad. The recently committed kpad2.jpg has the correct
	  names.

	* images/kpad2.jpg (added): add a sample keypad (with annotations)
	  for console video

	* channels/console_video.c, channels/Makefile, channels/chan_oss.c,
	  channels/console_video.h (added): Build console_video support by
	  linking in, as opposed to including, console_video.c This will
	  ease the task of splitting console_video.c into its components
	  (V4L and X11 grabbers, various video codecs and packetizers,
	  SDL), as well as ease future extensions (e.g. additional video
	  sources, codecs and rendering engines). For the time being
	  nothing changes for users: video support is off by default, and
	  requires -DHAVE_VIDEO_CONSOLE on the command line to be included
	  (if SDL and FFMPEG are available).

2007-12-21 21:19 +0000 [r94593]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Something I've been itching to do for a
	  while now. A minor optimization in app_voicemail. Since the
	  dtable in base_encode always gets populated with the same values
	  every time and never changes, make it static and const and only
	  initialize it once. Also, there's no reason to define
	  BASEMAXINLINE twice, so remove the redundant #define.

2007-12-21 20:50 +0000 [r94549-94551]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: We should only clear this value if we have
	  to

	* channels/chan_zap.c: Commit non TCP transport part of #11506.
	  Includes numerous additional parameters, as well as RLT support
	  for DMS type switches

2007-12-21 20:38 +0000 [r94542-94548]  Mark Michelson <mmichelson@digium.com>

	* res/res_config_sqlite.c: Store dates using local time instead of
	  UTC (closes issue #11610, reported and patched by
	  rbraun_performatique)

	* apps/app_queue.c: Fix a memory leak when reloading queue rules.

	* CHANGES: The one documentation source I forgot to update after
	  the merge of the queue-penalty branch was the CHANGES file. No
	  longer!

	* apps/app_voicemail.c: Lots of coding guidelines cleanup.

	* /, apps/app_voicemail.c: Merged revisions 94540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94540 | mmichelson | 2007-12-21 14:11:34 -0600 (Fri, 21 Dec
	  2007) | 8 lines Better quota support for using IMAP storage
	  voicemail (closes issue #11415, reported by jaroth) (closes issue
	  #11152, reported by selsky) Patch provided by jaroth ........

2007-12-21 20:12 +0000 [r94541]  Jason Parker <jparker@digium.com>

	* codecs/codec_lpc10.c, codecs/codec_g722.c, codecs/codec_adpcm.c,
	  codecs/codec_alaw.c, codecs/codec_speex.c, codecs/codec_g726.c,
	  codecs/codec_gsm.c, codecs/codec_ulaw.c, codecs/codec_zap.c:
	  codecs.conf really shouldn't be mandatory.. it never had been
	  before, so let's go back to being optional. A big "thank you" to
	  pnlarsson on IRC for allowing me access to his system to debug
	  this. Closes issue #11584.

2007-12-21 20:01 +0000 [r94477-94539]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 94538 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94538 | mmichelson | 2007-12-21 13:59:45 -0600 (Fri, 21 Dec
	  2007) | 5 lines The mail_copy c-client function does not expect a
	  full imap mailbox string, just the name of the mailbox. (closes
	  issue #11419, reported and patched by jaroth, with additional
	  patchwork from me) ........

	* main/dial.c: AST_LIST_REMOVE_CURRENT only takes one argument in
	  trunk

	* main/dial.c, /: Merged revisions 94468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94468 | mmichelson | 2007-12-21 10:49:35 -0600 (Fri, 21 Dec
	  2007) | 6 lines Since we are freeing list elements within a list
	  traversal, we need to use the safe traversal and remove the item
	  from the list before freeing it. (closes issue 11612, reported by
	  dtyoo) ........

2007-12-21 16:12 +0000 [r94463-94465]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 94464 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94464 | mmichelson | 2007-12-21 10:11:44 -0600 (Fri, 21 Dec
	  2007) | 3 lines Removing a debug message I accidentally just
	  committed ........

	* /, main/say.c, apps/app_queue.c: Merged revisions 94420 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94420 | mmichelson | 2007-12-21 09:45:14 -0600 (Fri, 21 Dec
	  2007) | 5 lines Fixing Portuguese syntax for saying dates and
	  times. Also some coding guidelines cleanup. (closes issue #11599,
	  reported and patched by caio1982, coding guidelines cleanup by
	  me) ........

2007-12-21 15:14 +0000 [r94419]  Tilghman Lesher <tlesher@digium.com>

	* /, main/asterisk.c: Merged revisions 94418 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94418 | tilghman | 2007-12-21 09:07:42 -0600 (Fri, 21 Dec 2007)
	  | 2 lines Fix for restart-as-user problem reported via the -dev
	  list ........

2007-12-21 01:14 +0000 [r94345-94396]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Moved the update of the queue_ent's rule list
	  to just before we try to call queue members. This allows for the
	  change in penalty levels to be executed at the most logical time
	  frame.

	* configs/queues.conf.sample, doc/tex/channelvariables.tex,
	  apps/app_queue.c, configs/queuerules.conf.sample (added): Merging
	  the queue-penalty branch. In short, this allows one to
	  dynamically adjust the QUEUE_MAX_PENALTY and the newly introduced
	  QUEUE_MIN_PENALTY during a call depending on the amount of time
	  passed. The purpose is to allow the call to open up to more (or
	  maybe just different) members without the caller's losing his
	  place in the queue. See configs/queuerules.conf.sample for an
	  example of how to set up queue rules and
	  configs/queues.conf.sample for how to associate a rule with a
	  queue. Along with the functional changes, new CLI and manager
	  commands exist to show the rules defined and there is an
	  additional CLI command to reload the queue rules. Future
	  enhancements that may be made: support for realtime queue rules
	  and support for dynamically adding a rule through the manager or
	  CLI. Also a manager command to reload the queue rules (I'll
	  probably write this myself very soon).

	* apps/app_voicemail.c: The changes to header inclusion in trunk
	  broke compilation of app_voicemail when using IMAP storage. The
	  reason is that c-client has its own definitions for LOG_WARNING
	  and LOG_DEBUG, so we need to be sure to include asterisk's
	  definitions last so that we use the proper values in
	  app_voicemail. (closes issue #11437, reported by blitzrage, patch
	  suggested by blitzrage)

2007-12-20 22:39 +0000 [r94320]  Russell Bryant <russell@digium.com>

	* configs/zapata.conf.sample: Add a bit more to the description of
	  the "mwimonitor" option.

2007-12-20 22:28 +0000 [r94319]  Steve Murphy <murf@digium.com>

	* build_tools/make_buildopts_h: closes issue #11287; thanks to
	  snuffy for this fix, which will surely make all solaris owners
	  shout praises to his name.

2007-12-20 20:25 +0000 [r94252-94257]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 94256 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r94256 | russell | 2007-12-20 14:22:22 -0600
	  (Thu, 20 Dec 2007) | 13 lines Merged revisions 94255 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r94255 | russell | 2007-12-20 14:21:41 -0600 (Thu, 20
	  Dec 2007) | 5 lines Fix another potential seg fault ... (closes
	  issue #11606) Reported by: dimas ........ ................

	* channels/chan_zap.c, /: Merged revisions 94251 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94251 | russell | 2007-12-20 14:08:42 -0600 (Thu, 20 Dec 2007) |
	  10 lines Fix a deadlock in d-channel handling in chan_zap. This
	  deadlock was introduced by the fix to ensure that channels are
	  properly locked when handling channel variables. There were
	  sections of this code where the channel pvt was locked before the
	  channel lock, when in fact it _must_ be the other way around.
	  (closes issue #11582) Reported by: bugi ........

2007-12-20 12:56 +0000 [r94168-94191]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_usbradio.c, include/asterisk/config.h,
	  channels/console_video.c, channels/chan_oss.c: add some macros to
	  simplify parsing the config file, see description in config.h .
	  They are a variant of the set of macros i used in chan_oss.c,
	  structured in a way to be more robust to the presence of spurious
	  ';' - basically, they define wrappers for 'do {' and '} while
	  (0)', plus some helper functions to deal with simple cases such
	  as ast_copy_string, ast_malloc, strtoul, ast_true ... The prefix
	  (CV_ as 'Config Variable') tries to be easy to remember and has
	  been chosen to not conflict with other existing macros in the
	  tree. For the time being, I have only updated the three source
	  files in the tree that used the old M_* macros. Hopefully, more
	  files will be converted. NOTE: I understand that inventing my own
	  dialect of C is generally wrong; however, the lack of adequate
	  support in the language encourages lazy programming practices
	  (such as ignoring errors, bounds, etc.) and this increases the
	  chance of vulnerability in the code, especially because we are
	  parsing user input here. Hopefully, these macros and the use of
	  ast_parse_arg (in config.h) should encourage the programmer to
	  write more robust code.

	* include/asterisk/paths.h, res/snmp/agent.c, utils/ael_main.c,
	  utils/extconf.c, main/asterisk.c, utils/conf2ael.c: modify
	  http://svn.digium.com/view/asterisk?view=rev&rev=93603 so that
	  paths and filename are writable by asterisk.c without causing
	  segfaults. This involves defining the variables as const char *,
	  and having them point to as static, writable buffer defined in
	  asterisk.c On passing, fix some errors in using these variables
	  in some files in utils/ , and in res/snmp/agent.c which was
	  redefining a variable without using paths.h (not applicable to
	  1.4)

2007-12-19 23:17 +0000 [r94123-94124]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: 1. Unify the check for a penalty < 0 into the
	  set_member_penalty code. 2. Fix an error when checking the CLI
	  command for setting a member's penalty. 3. Fix a logging error if
	  the incorrect parameter was the queue name or interface. (closes
	  issue #11544, reported and patched by Laureano)

	* /, res/res_monitor.c: Merged revisions 94122 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94122 | mmichelson | 2007-12-19 17:02:22 -0600 (Wed, 19 Dec
	  2007) | 6 lines Sox versions 13.0.0 and newer do not have
	  "soxmix" and instead use sox -m. res_monitor needs to use this if
	  the user does not have soxmix. (closes issue #11589, reported by
	  amessina, patch inspired by amessina but with a flourish from me)
	  ........

2007-12-19 22:51 +0000 [r94085]  Russell Bryant <russell@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 94077 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r94077 | russell | 2007-12-19 16:48:48 -0600 (Wed, 19 Dec 2007) |
	  4 lines Check for the existence of the soxmix application on the
	  target platform and have the result available in autoconfig.h.
	  (part of issue #11589) ........

2007-12-19 20:20 +0000 [r94052-94053]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Add 'voicemail reload' command. Reported
	  by: eliel Patch by: eliel (Closes issue #11365)

	* apps/app_waituntil.c (added): Add contributed WaitUntil app.
	  Original code by pprindeville, updated for trunk by tilghman.
	  (Closes issue #11487)

2007-12-19 19:29 +0000 [r94029]  Russell Bryant <russell@digium.com>

	* include/asterisk/time.h: Add a couple of new time API calls -
	  ast_tvdiff_sec and ast_tvdiff_usec (closes issue #11270) Reported
	  by: dimas Patches: tvdiff_us-4.patch uploaded by dimas (license
	  88)

2007-12-19 17:58 +0000 [r94002]  Luigi Rizzo <rizzo@icir.org>

	* channels/console_video.c: Add instructions on how to generate
	  your own font.

2007-12-19 17:31 +0000 [r93956]  Joshua Colp <jcolp@digium.com>

	* /: Merged revisions 93955 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93955 | file | 2007-12-19 13:29:20 -0400 (Wed, 19 Dec 2007) | 2
	  lines Make the 1.4 builders happy, ensure var is NULL. ........

2007-12-19 17:13 +0000 [r93952]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 93949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93949 | tilghman | 2007-12-19 11:04:13 -0600 (Wed, 19 Dec 2007)
	  | 3 lines Avoid segfault in chan_iax when peer isn't defined
	  (Closes issue #11602) ........

2007-12-19 17:09 +0000 [r93925-93950]  Luigi Rizzo <rizzo@icir.org>

	* main/utils.c, include/asterisk/strings.h: Add a new API function,
	  written at least twice in app_voicemail.c and likely in other
	  places too. This is quite useful when placing mail/html stuff in
	  config files. /*! \brief Convert some C escape sequences
	  (\b\f\n\r\t) into the equivalent characters. \brief s The string
	  to be converted (will be modified). \return The converted string.
	  */ char *ast_unescape_c(char *s);

	* include/asterisk/config.h, main/config.c: add support for
	  PARSE_DOUBLE, and remove identifiers for types not supported
	  (INT16 and UINT16)

2007-12-19 09:20 +0000 [r93899]  Olle Johansson <oej@edvina.net>

	* CHANGES: Reorganize CHANGES a bit. The "misc" section grew too
	  large...

2007-12-19 08:57 +0000 [r93898]  Luigi Rizzo <rizzo@icir.org>

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4, makeopts.in: Properly document AST_EXT_TOOL_CHECK()
	  and use it to check for NETSMP and GTK (GTK is not used thoug).
	  AST_EXT_TOOL_CHECK() could be used for checking curl status as
	  well, perhaps with a small addition because we currently seem to
	  require a curl version greater than X.Y.Z Add a NETSMP_INCLUDE
	  entry in makeopts.in We don't have yet any macros for using
	  pkg-config to check for a specific package (right now there is
	  only gtk2+ in the category).

2007-12-19 08:57 +0000 [r93897]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, configs/sip.conf.sample, CHANGES: Adding the
	  ability to specify the To: header in an outbound INVITE by adding
	  an exclamation mark to the dial string. This patch also exists
	  for 1.4 in the fixtoheader-1.4 branch and has been in production
	  for quite some time.

2007-12-19 08:12 +0000 [r93875]  Luigi Rizzo <rizzo@icir.org>

	* res/snmp/agent.c: make netsmp build under AST_DEVMODE.
	  Description, included in the source, is below. I should note that
	  the PACKAGE_* macros that asterisk defines in autoconfig.h are
	  not used anywhere in the tree so they should just be removed. /*
	  * There is some collision collision between netsmp and asterisk
	  names, * causing build under AST_DEVMODE to fail. * * The
	  following PACKAGE_* macros are one place. * Also netsnmp has an
	  improper check for HAVE_DMALLOC_H, using * #if HAVE_DMALLOC_H
	  instead of #ifdef HAVE_DMALLOC_H * As a countermeasure we define
	  it to 0, however this will fail * when the proper check is
	  implemented. */ No

2007-12-19 07:01 +0000 [r93854]  Olle Johansson <oej@edvina.net>

	* CHANGES, main/asterisk.c, doc/asterisk.sgml: Add option for
	  starting remote Asterisk by naming the actual runtime socket
	  instead of pointing to configuration file with -C Reported by:
	  sobomax Patches: asterisk.c.diff.trunk uploaded by sobomax
	  (license 359) doc changes by committer (closes issue #11598)

2007-12-19 00:09 +0000 [r93827]  Dwayne M. Hubbard <dhubbard@digium.com>

	* apps/app_osplookup.c: add missing header file

2007-12-18 23:38 +0000 [r93804-93805]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c: Making the canary error message a little more
	  obvious.

	* utils/Makefile, utils/astcanary.c (added), main/asterisk.c: Add a
	  canary process, for high priority mode (asterisk -p) to ensure
	  that if Asterisk goes into a busy loop, the machine will be
	  recoverable. We'd still need to do a restart to put Asterisk back
	  into high priority mode, but at least a reboot won't be required.
	  (Closes issue #11559)

2007-12-18 21:13 +0000 [r93741]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Move some warnings away to debug since some
	  devices send a packet with a silly string as a NAT keepalive
	  packet.

2007-12-18 18:39 +0000 [r93672]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, channels/chan_iax2.c: Merged revisions
	  93668 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r93668 | tilghman | 2007-12-18 12:29:39 -0600
	  (Tue, 18 Dec 2007) | 10 lines Merged revisions 93667 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r93667 | tilghman | 2007-12-18 12:23:06 -0600 (Tue, 18
	  Dec 2007) | 2 lines Fixing AST-2007-027 (Closes issue #11119)
	  ........ ................

2007-12-18 18:20 +0000 [r93666]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/paths.h: remove a leftover line with only a '#'
	  (wonder why the compiler does not complain!) and variables that
	  are only used in asterisk.c

2007-12-18 17:05 +0000 [r93626]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 93625 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93625 | mmichelson | 2007-12-18 11:02:48 -0600 (Tue, 18 Dec
	  2007) | 6 lines Rework deadlock avoidance used in ast_write,
	  since it meant that agent channels which were being monitored had
	  one audio file recorded and one empty audio file saved. (closes
	  issue #11529, reported by atis patched by me) ........

2007-12-18 10:24 +0000 [r93558-93603]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/paths.h, channels/chan_sip.c, res/res_crypto.c,
	  utils/ael_main.c, utils/extconf.c, main/asterisk.c,
	  res/res_monitor.c, utils/conf2ael.c: make configuration variable
	  const so they are not accidentally modified. This requires
	  casting the strings in asterisk.c when writing to them, so we do
	  it through a macro to do it consistently.

	* channels/chan_unistim.c, res/res_crypto.c, main/astmm.c,
	  apps/app_ices.c, utils/extconf.c, channels/chan_iax2.c,
	  main/asterisk.c, main/config.c, main/db.c, apps/app_adsiprog.c,
	  cdr/cdr_csv.c: remove unnecessary (char *) casts for
	  ast_config_AST_* variables. There are some left in the .flex
	  files, left to the maintainer...

	* build_tools/make_defaults_h, main/asterisk.c: Rename the macros
	  in defaults.h - they are not meant to be globally visible.
	  Document the fact that DEFAULT_TMP_DIR cannot be overridden from
	  the default configuration (this needs to be fixed, as you could
	  have a totally different spooldir configured at runtime, and yet
	  DEFAULT_TMP_DIR keeps the compile-time default). Remove two
	  unused entries for sounds and images.

	* Makefile.moddir_rules: make the code match documentation - now
	  you can specify multiple words in MODULE_PREFIX.

	* CREDITS: Name the people responsible for some recent
	  contributions to the tree.

	* Makefile: Two small changes: + document the difference between
	  "A=foo make ..." and "make A=foo ..." and suggest using
	  COPTS/LDOPTS if you need to use the second form to pass compiler
	  and loader flags; + define only in one place the environment used
	  to build stuff in menuselect/

2007-12-18 07:56 +0000 [r93557]  Olle Johansson <oej@edvina.net>

	* doc/CODING-GUIDELINES: A minor update, caused by a recent bug
	  report ;-)

2007-12-18 07:22 +0000 [r93536]  Luigi Rizzo <rizzo@icir.org>

	* doc/CODING-GUIDELINES: small documentation update (nothing
	  important).

2007-12-18 02:57 +0000 [r93514]  Joshua Colp <jcolp@digium.com>

	* channels/chan_unistim.c: You... will... build! I say so and
	  therefore you will.

2007-12-18 02:42 +0000 [r93493]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_unistim.c, include/asterisk/threadstorage.h: minor
	  cleanups

2007-12-17 23:10 +0000 [r93464]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_unistim.c: fix building under cygwin. At this point
	  WINARCH should go away.

2007-12-17 22:54 +0000 [r93405]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_unistim.c: remove some unnecessary includes

2007-12-17 22:50 +0000 [r93390]  Jason Parker <jparker@digium.com>

	* /, main/translate.c: Merged revisions 93381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93381 | qwell | 2007-12-17 16:45:57 -0600 (Mon, 17 Dec 2007) | 4
	  lines What was I thinking when I wrote this masterpiece? -1 + 1 =
	  0.. who woulda thunk it?. ........

2007-12-17 22:38 +0000 [r93380]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: surprising as it may be, chan_oss compiles
	  correctly under cygwin as well, provided you look for soundcard.h
	  in the right place...

2007-12-17 22:29 +0000 [r93378]  Joshua Colp <jcolp@digium.com>

	* /, main/utils.c: Merged revisions 93377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93377 | file | 2007-12-17 18:28:09 -0400 (Mon, 17 Dec 2007) | 7
	  lines Do not try to access information about a lock when printing
	  out a trylock attempt. It is possible for the lock that it
	  references to no longer be valid. This would have caused
	  segfaults or deadlocks. (issue #BE-263) (closes issue #11080)
	  Reported by: callguy (closes issue #11100) Reported by: callguy
	  ........

2007-12-17 21:14 +0000 [r93337]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/time.h: Merged revisions 93336 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r93336 | tilghman | 2007-12-17 15:12:42 -0600 (Mon, 17
	  Dec 2007) | 6 lines Today is tomorrow's yesterday, and
	  yesterday's tomorrow is today, and tomorrow's tomorrow is the day
	  after tomorrow, so who cares if you recycle anyway? If this
	  confuses you, that's nothing compared to what this fixes. ;-)
	  ........

2007-12-17 21:12 +0000 [r93335]  Olle Johansson <oej@edvina.net>

	* channels/chan_zap.c, /, channels/chan_sip.c, apps/app_queue.c,
	  channels/chan_iax2.c, channels/chan_mgcp.c: Merged revisions
	  93182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93182 | oej | 2007-12-17 08:15:13 +0100 (MÃ¥n, 17 Dec 2007) | 8
	  lines Issue 11574: Add dependencies on res_monitor and
	  res_features. I wonder if Asterisk can run at all without
	  res_features. My guess is that there's propably a lot of more
	  modules and the core that depends on it. Reported by: caio1982
	  (closes issue #11574) ........

2007-12-17 20:42 +0000 [r93293-93297]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Removing some leftover debug messages from a
	  while back.

	* /, apps/app_voicemail.c: Merged revisions 93291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93291 | mmichelson | 2007-12-17 13:53:48 -0600 (Mon, 17 Dec
	  2007) | 6 lines We need to create the directory for a voicemail
	  user even if they are using IMAP storage since greetings are
	  stored in the filesystem. (closes issue #11388, reported by
	  spditner, patch by me inspired by a patch by spditner) ........

2007-12-17 18:07 +0000 [r93252]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, /: Merged revisions 93250 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93250 | file | 2007-12-17 14:05:55 -0400 (Mon, 17 Dec 2007) | 6
	  lines If a call is received with a called number IE containing
	  nothing go to the 's' extension. (closes issue #9099) Reported
	  by: kb1_kanobe2 Patches: 20070906__9099.diff.txt uploaded by
	  Corydon76 (license 14) ........

2007-12-17 17:16 +0000 [r93191-93224]  Kevin P. Fleming <kpfleming@digium.com>

	* utils: all created files need to be listed in the ignore property

	* channels/chan_unistim.c, build_tools/menuselect-deps.in,
	  configure, configure.ac, channels/Makefile, channels/chan_oss.c:
	  make the configure script detect that it is running on a Windows
	  platform, and report that information so that menuselect can use
	  it (all information that is used to decide whether to build
	  modules or not must be fed to menuselect so the user knows what
	  will be built and why... don't make module build decisions in the
	  makefiles, please)

	* Makefile: make using PRINT_DIR a little easier

2007-12-17 15:18 +0000 [r93187-93190]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Fix usage of rtptimeout. It can be used
	  without rtpkeepalive, and the value can not be accessed directly
	  in the SIP pvt structure. All RTP related timeouts have to be
	  retrieved using the ast_rtp_* function calls. (closes issue
	  #11562) Reported by: ibc

	* channels/chan_unistim.c: If no timezone is available use the
	  default message. (closes issue #11576) Reported by: junky

	* channels/chan_unistim.c: Make chan_unistim actually be able to
	  unload. When creating a thread that you want to pthread_join you
	  have to explicitly create it as joinable, and also if using
	  pthread_cancel you have to have a pthread_testcancel to see if it
	  has been called.

2007-12-17 07:27 +0000 [r93184-93185]  Kevin P. Fleming <kpfleming@digium.com>

	* codecs, /, build_tools/make_version,
	  include/asterisk/autoconfig.h.in, configure.ac, apps,
	  Makefile.moddir_rules, res/Makefile, pbx/Makefile,
	  build_tools/prep_moduledeps (removed), channels/Makefile, cdr,
	  formats, Makefile, codecs/Makefile, funcs, apps/Makefile,
	  configure, build_tools/embed_modules.xml, cdr/Makefile,
	  build_tools/prep_tarball, makeopts.in, formats/Makefile, res,
	  pbx, channels, funcs/Makefile: Merged revisions 93180 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r93180 | kpfleming | 2007-12-16 22:44:51 -0800 (Sun, 16 Dec 2007)
	  | 23 lines In
	  http://lists.digium.com/pipermail/asterisk-dev/2007-December/031145.html,
	  rizzo brought up some issues related to the way that the metadata
	  required for menuselect and the rest of the build system is
	  extracted from the source files. Since I had a few hours to kill
	  on an airplane today, I decided to improve this situation... so
	  now the system caches the extracted metadata and uses it to build
	  the menuselect 'tree' as much as it can. The result of this is
	  that when a single source file is changed, only the metadata for
	  that file needs to be extracted again, and the rest is used from
	  the cache files. I also reduced the number of forked processes
	  required to do the metadata extraction; it was actually possible
	  to do most of what we needed in the Makefiles themselves without
	  using any shell scripts at all! On my laptop, these changes
	  resulted in an 80% decrease in the time required for the
	  'menuselect.makeopts' automatic check to occur after editing a
	  single source file. While doing this work I also cleaned up a few
	  minor things in the Makefiles, adding a check for 'awk' to the
	  configure script and changed all remaining places we use 'grep'
	  or 'awk' to use the ones found by the configure script, and
	  changed the 'prep_tarball' script to build the menuselect
	  metadata so that tarballs of Asterisk will include it and won't
	  require the user to wait while it is extracted after unpacking.
	  ........

2007-12-16 19:06 +0000 [r93173]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: menuselect.makeopts is not a .PHONY target

2007-12-16 13:38 +0000 [r93163-93167]  Olle Johansson <oej@edvina.net>

	* pbx/pbx_dundi.c: Convert from LOG_DEBUG etc to ast_debug. Thanks,
	  dimas! (closes issue #11572) Reported by: dimas Patches:
	  dundilog-trunk.patch uploaded by dimas (license 88)

	* main/manager.c, CHANGES: Adding a new CLI command for "manager
	  reload", which is important now that you need to reload after
	  changes. Thanks YS. Reported by: ys Patches:
	  trunk93163_manager_reload.c.diff uploaded by ys (license 281)
	  (related to issue #11414)

	* main/manager.c, CHANGES: Change manager so that registered
	  accounts are stored in memory. This opens for a manager realtime
	  implementation. If you change accounts in manager.conf, you now
	  need to reload to activate the changes (deletions, additions).
	  This was not the case with 1.4. Reported by: ys Patches:
	  trunk93163_manager_reload.c.diff uploaded by ys (license 281)
	  (closes issue #11414)

	* CHANGES: Adding console_video to CHANGES. It's important that we
	  keep this file up to date, even with experimental stuff.

	* channels/chan_unistim.c, main/udptl.c, configs/dundi.conf.sample,
	  channels/chan_sip.c, include/asterisk/rtp.h,
	  include/asterisk/netsock.h, channels/iax2-provision.c,
	  UPGRADE.txt, doc/tex/qos.tex, configs/skinny.conf.sample,
	  CHANGES, channels/chan_iax2.c, main/rtp.c, main/netsock.c,
	  configs/h323.conf.sample, configs/iax.conf.sample,
	  channels/chan_skinny.c, configs/mgcp.conf.sample,
	  configs/unistim.conf.sample, channels/chan_h323.c,
	  configs/iaxprov.conf.sample, pbx/pbx_dundi.c,
	  configs/sip.conf.sample, channels/chan_mgcp.c: HUGE improvements
	  to QoS/CoS handling by IgorG - Refer to the proper documentation
	  - Implement separate signalling/media QoS/CoS in many channels
	  using RTP - Improve warnings and verbose messages - Deprecate
	  some old settings Minor modifications by me, a big effort from
	  IgorG. Thanks! Reported by: IgorG Patches:
	  qoscleanup-89394-4-trunk.patch uploaded by IgorG (license 20)
	  Tested by: IgorG (closes issue #11145)

2007-12-16 10:34 +0000 [r93162]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: use a simpler idiom for 'cmp -s ...'

2007-12-16 09:37 +0000 [r93152-93161]  Olle Johansson <oej@edvina.net>

	* main/asterisk.c: Don't drop the first character randomly in long
	  listings in the CLI. Reported by: slavon Patches:
	  asterisk-consolerefresh2.diff.txt uploaded by jamesgolovich
	  (license 176) Tested by: eliel (closes issue #9325)

	* configs/sip.conf.sample, CHANGES: Update documentation

	* channels/chan_sip.c, configs/sip.conf.sample: Make more timers
	  settable in SIP so that we can force timeout earlier on
	  non-responsive SIP servers. Thanks, jcmoore, for the patch!
	  Reported by: jcmoore Patches: peer_t1_timerb_trunk_v3.patch.txt
	  uploaded by jcmoore (license 9) (closes issue #9771)

	* include/asterisk/file.h: Typo fixed earlier, that wasn't a typo
	  after all. Didn't a clever guy once say "Compile before you
	  commit" ? :-)

2007-12-15 08:10 +0000 [r93151]  Russell Bryant <russell@digium.com>

	* include/asterisk/file.h: fix a typo from revision 93138

2007-12-15 00:44 +0000 [r93138-93145]  Luigi Rizzo <rizzo@icir.org>

	* configs/oss.conf.sample: configuration options related to video
	  support.

	* channels/console_video.c (added): Bring in video console support
	  for chan_oss (and later chan_alsa too). This is disabled in the
	  default build, you need to explicitly enable it compiling with
	  make COPTS=-DHAVE_VIDEO_CONSOLE In return, you will be able to do
	  a video call with chan_oss, using the webcam (or X11 grabbing) as
	  local source, and rendering the incoming stream on your screen.
	  Currently supported formats are h261, h263, h263+, h264, mpeg4
	  (all through the avcodec lib, part of ffmpeg). Incoming video is
	  on the left, outgoing video is on the right, while the center
	  displays a keypad (if configured so). Right clicking on the video
	  windows increases the size, center clicking reduces the size.
	  Dragging the mouse (with the left key) on the right window while
	  the X11 grabber is active moves the grab area. This is the result
	  of work by Sergio Fadda, Marta Carbone and myself, all properly
	  disclaimed to digium. Note, there is a lot of work left to do in
	  this module, including adding support for Video4LinuxV2 (I have
	  patches from Matteo Brancaleoni which should be integrated), and
	  making the GUI a lot more friendly than it is now (e.g.
	  supporting merging or switching among multiple sources, a text
	  window, and more).

	* channels/chan_oss.c: remove some redundant headers

	* include/asterisk/file.h: include mmap header if detected by
	  configure

2007-12-14 22:02 +0000 [r93094-93115]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Resolve a compiler warning

	* apps/app_voicemail.c: Change places where the name "INBOX" was
	  hardcoded to use the imapfolder setting from voicemail.conf
	  instead. This commit will help to get issue #11415 moving towards
	  commitment.

2007-12-14 21:09 +0000 [r93090]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, channels/chan_unistim.c, codecs/ilbc/iLBC_define.h:
	  Solaris compat fixes Reported by: snuffy Patch by:
	  snuffy,tilghman (Closes issue #11315)

2007-12-14 19:31 +0000 [r93067]  Russell Bryant <russell@digium.com>

	* pbx/pbx_dundi.c: make something static

2007-12-14 19:27 +0000 [r93066]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_privacy.c, UPGRADE.txt, CHANGES,
	  configs/privacy.conf.sample (removed): Remove use of privacy.conf
	  by the Privacy app. Reported by: eliel Patch by: eliel (Closes
	  issue #11344)

2007-12-14 19:19 +0000 [r93042-93065]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, main/manager.c, funcs/func_timeout.c: I needed to
	  increment the numbers used on the VERBOSITY_ATLEAST calls by 1.
	  Thanks to kpfleming for pointing this out.

	* include/asterisk/logger.h, main/pbx.c, main/manager.c,
	  funcs/func_timeout.c: Changed VERBOSITY_LEVEL to
	  VERBOSITY_ATLEAST to be more accurate.

	* include/asterisk/logger.h, main/pbx.c, main/manager.c,
	  funcs/func_timeout.c, main/logger.c: After reading Russell's
	  e-mail to the dev list stating that checking option_verbose is
	  not equivalent to the check done by ast_verb, I wrote a macro,
	  VERBOSITY_LEVEL, which does this check. I did a quick look in the
	  source and used this macro in some places where option_verbose
	  was used. I also converted some verbose messages in logger.c to
	  use ast_verb instead of ast_verbose.

2007-12-14 18:24 +0000 [r93041]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_meetme.c: gcc 4.1.3 wants a union used here.

2007-12-14 17:49 +0000 [r93001-93004]  Russell Bryant <russell@digium.com>

	* main/config.c: Print an error message if a #included file does
	  not exist

2007-12-14 17:29 +0000 [r92999]  Tilghman Lesher <tlesher@digium.com>

	* res/res_agi.c: Publish the AGI events to manager. Reported by:
	  moy Patch by: moy,tilghman (Closes issue #11337)

2007-12-14 15:59 +0000 [r92976]  Mark Michelson <mmichelson@digium.com>

	* funcs/func_timeout.c: Reintroduce an optimization that was lost
	  when converting trunk to use ast_verb.

2007-12-14 15:49 +0000 [r92939]  Tilghman Lesher <tlesher@digium.com>

	* main/editline/sys.h: If malloc.h is included in a Solaris build,
	  the compilation breaks. Reported by: snuffy Patch by: snuffy
	  (Closes issue #11313)

2007-12-14 15:18 +0000 [r92938]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 92937 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92937 | file | 2007-12-14 11:16:15 -0400 (Fri, 14 Dec 2007) | 4
	  lines Up the length of the format on the SIP channel since it can
	  now be rather long. (closes issue #11552) Reported by:
	  francesco_r ........

2007-12-14 15:14 +0000 [r92936]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 92933 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92933 | tilghman | 2007-12-14 09:01:10 -0600 (Fri, 14 Dec 2007)
	  | 5 lines Change help documentation to match actual behavior
	  (FAILURE vs FAILED). Reported by: angeloxx-sir Patch by: tilghman
	  (Closes issue #11548) ........

2007-12-14 15:08 +0000 [r92935]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 92934 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r92934 | crichter | 2007-12-14 16:05:28 +0100 (Fr, 14
	  Dez 2007) | 1 line fixed the sequencing of WAITING_4DIGS state
	  setting and overlap_task thread starting. ........

2007-12-14 14:48 +0000 [r92913]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, main/pbx.c, main/srv.c, channels/chan_skinny.c,
	  res/res_features.c, apps/app_minivm.c, apps/app_amd.c,
	  res/snmp/agent.c, apps/app_chanspy.c, apps/app_mixmonitor.c,
	  main/asterisk.c, main/netsock.c, apps/app_voicemail.c: Convert
	  ast_verbose to ast_verb. Reported by: snuffy Patch by: snuffy
	  (Closes issue #11547)

2007-12-14 01:25 +0000 [r92876]  Mark Michelson <mmichelson@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 92875 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r92875 | mmichelson | 2007-12-13 19:24:06 -0600 (Thu, 13
	  Dec 2007) | 7 lines When compiling with DETECT_DEADLOCKS, don't
	  spam the CLI with messages about possible deadlocks. Instead just
	  print the intended single message every five seconds. (closes
	  issue 11537, reported and patched by dimas) ........

2007-12-13 23:10 +0000 [r92816-92855]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_meetme.c: When working with dates, use numeric form
	  whenever possible, as it's faster. Also, a bunch of coding
	  guidelines fixes.

	* channels/chan_zap.c, /: Merged revisions 92815 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92815 | tilghman | 2007-12-13 15:28:39 -0600 (Thu, 13 Dec 2007)
	  | 5 lines Properly initialize polarity statuses, so that they are
	  detected properly. Reported by: julianjm Patch by: julianjm
	  (Closes issue #10238) ........

2007-12-13 20:23 +0000 [r92811]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/app.h, include/asterisk/module.h, res/res_agi.c,
	  apps/app_rpt.c: Move usage of the old LOCAL_USER_* macros to the
	  new ast_module_user_* functions in a few documentation places.
	  (closes issue #11533) Reported by: IgorG Patches:
	  oldmacroclean.v1.diff uploaded by IgorG (license 20)

2007-12-13 20:14 +0000 [r92810]  Jason Parker <jparker@digium.com>

	* main/pbx.c, /: Merged revisions 92809 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92809 | qwell | 2007-12-13 14:13:48 -0600 (Thu, 13 Dec 2007) | 1
	  line Make application help text a little more clear about the use
	  of extensions in a filename. ........

2007-12-13 20:12 +0000 [r92806-92808]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 92807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92807 | mmichelson | 2007-12-13 14:03:20 -0600 (Thu, 13 Dec
	  2007) | 3 lines Prevent another potential fd leak ........

	* /, apps/app_voicemail.c: Merged revisions 92803 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92803 | mmichelson | 2007-12-13 13:49:55 -0600 (Thu, 13 Dec
	  2007) | 3 lines Prevent a possible fd leak. ........

2007-12-13 17:46 +0000 [r92779]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Don't use backslash as an escape
	  character, unless it really is an escape character.

2007-12-13 16:23 +0000 [r92758]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: Remove remnants of a poorly merged commit.
	  (92697)

2007-12-13 15:40 +0000 [r92737]  Doug Bailey <dbailey@digium.com>

	* apps/app_voicemail.c: Tag voicemails with UTC time as opposed to
	  local time zone

2007-12-13 00:18 +0000 [r92697]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c, channels/chan_h323.c, main/config.c:
	  Merged revisions 92696 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10690) ........ r92696 | qwell | 2007-12-12 18:11:09 -0600
	  (Wed, 12 Dec 2007) | 7 lines If a typo is found in a config file,
	  we previous continued on with what was already loaded. We do not
	  want to do this (see bug below for details). This makes it so
	  that if a [ is found without a ], the entire config will fail,
	  and nothing in it will be loaded. Issue 10690. ........

2007-12-12 23:44 +0000 [r92676]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Revert an "optimization" that I added in
	  revision 89887, as the user who reported issue #11449 has
	  demonstrated that it actually was a performance hit on his
	  machine. I think that it is possible that it could still be a
	  benefit on systems under higher load, especially SMP systems, but
	  I don't have enough time or interest to find out at the moment.
	  (closes issue #11449)

2007-12-12 21:22 +0000 [r92618]  Jason Parker <jparker@digium.com>

	* /, apps/app_meetme.c, channels/ringtone.h: Merged revisions 92617
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11048) ........ r92617 | qwell | 2007-12-12 15:15:45 -0600
	  (Wed, 12 Dec 2007) | 4 lines Don't increment user count until
	  after name has been recorded (if enabled). Issue 11048, tested by
	  pep. ........

2007-12-12 20:05 +0000 [r92594]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, main/logger.c, main/utils.c,
	  apps/app_mixmonitor.c: Conversions of free to ast_free, where
	  applicable, and several other formatting fixes. Reported by:
	  eliel Patch by: eliel,tilghman (Closes issue #11209)

2007-12-12 19:50 +0000 [r92562]  Russell Bryant <russell@digium.com>

	* res/res_features.c: Merged revisions 92556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92556 | russell | 2007-12-12 13:40:02 -0600 (Wed, 12 Dec 2007) |
	  1 line resolve compiler warning ........

2007-12-12 17:51 +0000 [r92511-92526]  Mark Michelson <mmichelson@digium.com>

	* res/res_features.c: Same change to trunk as revision 92510. I'm
	  not sure why I merged this way, but I did.

2007-12-12 17:15 +0000 [r92476-92507]  Tilghman Lesher <tlesher@digium.com>

	* main/asterisk.c: Correctly handle possible memory allocation
	  failure Reported by: eliel Patch by: eliel (Closes issue #11512)

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 92463 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92463 | tilghman | 2007-12-12 10:52:56 -0600 (Wed, 12 Dec 2007)
	  | 4 lines Test directly for the API that fixed AST-2007-026, to
	  ensure that older versions of PostgreSQL are no longer
	  acceptable. (Closes issue #11526) ........

2007-12-12 16:11 +0000 [r92444]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 92443 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92443 | mmichelson | 2007-12-12 10:08:55 -0600 (Wed, 12 Dec
	  2007) | 3 lines Removing an unused variable. ........

2007-12-11 22:20 +0000 [r92423]  Olle Johansson <oej@edvina.net>

	* include/asterisk/term.h, channels/misdn/isdn_msg_parser.c,
	  channels/ringtone.h, include/asterisk/ulaw.h,
	  include/jitterbuf.h, include/asterisk/manager.h,
	  include/asterisk/transcap.h, channels/misdn/isdn_lib.c,
	  channels/gentone.c, include/asterisk/zapata.h,
	  channels/misdn/isdn_lib.h, include/asterisk/doxyref.h,
	  channels/DialTone.h, channels/misdn/ie.c,
	  channels/misdn/chan_misdn_config.h, channels/iax2.h,
	  channels/misdn/portinfo.c, include/asterisk/udptl.h,
	  main/cygload.c, include/asterisk/translate.h: Doxygen updates,
	  formatting. misdn stuff needs a lot of doxygenification (Hello,
	  Qwell :-) )

2007-12-11 22:10 +0000 [r92422]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c, configure, include/asterisk/autoconfig.h.in,
	  configure.ac: Trunk build would fail due to the nonexistence of
	  zaptel hwgain structures missing. Patched configure to check for
	  this stuff and put a #ifdef around the offending code in
	  chan_zap. Thanks to file for overseeing this.

2007-12-11 21:58 +0000 [r92421]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: We need to set the address we want to match
	  against before we actually do the match.. Closes issue #11518.

2007-12-11 21:46 +0000 [r92402]  Mark Michelson <mmichelson@digium.com>

	* res/res_musiconhold.c: Removing a pointless memset. The memory
	  was just calloc'd, so the memory is already zeroed out

2007-12-11 21:17 +0000 [r92401]  Jason Parker <jparker@digium.com>

	* apps/app_controlplayback.c: Add variable to show which key was
	  pressed to stop playback. Issue #11377, initial patch by johan.

2007-12-11 20:06 +0000 [r92364-92365]  Joshua Colp <jcolp@digium.com>

	* res/res_monitor.c: Only look to see if options are set if some
	  have been provided. (closes issue #11505) Reported by: Mike
	  Anikienko

	* main/global_datastores.c, /: Merged revisions 92363 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r92363 | file | 2007-12-11 15:51:40 -0400 (Tue, 11 Dec
	  2007) | 6 lines Fix potential memory leak with the dialed
	  interfaces list if another memory allocation fails. (closes issue
	  #11507) Reported by: eliel Patches: global_datastores.c.patch
	  uploaded by eliel (license 64) ........

2007-12-11 17:44 +0000 [r92324]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 92323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92323 | mmichelson | 2007-12-11 11:42:25 -0600 (Tue, 11 Dec
	  2007) | 10 lines Fixing autofill to be more accurate.
	  Specifically, if calls ahead of the current caller were ringing
	  members (but not yet bridged) there could be available members
	  and waiting callers who would not get matched up. The member
	  availability checker was correctly determining the number of
	  available members in this scenario, but the queue itself did not
	  parallelly reflect this status on the pending calls. This commit
	  corrects the issue. (closes issue #11459, reported by
	  equissoftware, patched by me) ........

2007-12-11 16:29 +0000 [r92305]  Russell Bryant <russell@digium.com>

	* include/asterisk/unaligned.h, main/event.c: * In unaligned.h,
	  remove some unnecessary casts and mark the arg of the
	  get_unaligned functions as const * In event.c, use
	  get_unaligned_uint32() in a couple of places to fix issues on
	  architectures that don't allow unaligned access

2007-12-11 14:17 +0000 [r92267-92285]  Olle Johansson <oej@edvina.net>

	* include/asterisk/devicestate.h, include/asterisk/agi.h,
	  include/asterisk/astobj2.h, include/asterisk/extconf.h,
	  include/asterisk/io.h, include/asterisk/cdr.h,
	  include/asterisk/aes.h, include/asterisk/_private.h,
	  include/asterisk/localtime.h, include/asterisk/hashtab.h,
	  include/asterisk/callerid.h, include/asterisk/logger.h,
	  include/asterisk/doxyref.h, include/asterisk/app.h,
	  include/asterisk/adsi.h, include/asterisk/event.h,
	  include/asterisk/causes.h, include/asterisk/alaw.h,
	  include/asterisk/ast_expr.h, include/asterisk/dsp.h,
	  include/asterisk/mod_format.h, include/asterisk/ael_structs.h,
	  include/asterisk/astdb.h: A lot of doxygen updates

	* include/asterisk/frame.h: Doxygen updates

2007-12-10 20:18 +0000 [r92243]  Doug Bailey <dbailey@digium.com>

	* channels/chan_zap.c: Add CLI commands to dynamically set hw and
	  sw gains

2007-12-10 16:48 +0000 [r92205-92206]  Joshua Colp <jcolp@digium.com>

	* utils/check_expr.c: Add ast_atomic_fetchadd_int_slow to
	  check_expr for platforms that need it. (closes issue #11484)
	  Reported by: snuffy

	* /, main/rtp.c: Merged revisions 92204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92204 | file | 2007-12-10 12:36:15 -0400 (Mon, 10 Dec 2007) | 6
	  lines Add G729A as another possible payload name for G729. Some
	  devices use this instead of G729, which is perfectly normal since
	  the payload number itself is defined and can't be used by
	  anything else so the name doesn't matter that much. (closes issue
	  #11483) Reported by: revolution Patches: rtp.diff uploaded by
	  revolution (license 346) ........

2007-12-10 16:30 +0000 [r92203]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 92202 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92202 | mmichelson | 2007-12-10 10:29:44 -0600 (Mon, 10 Dec
	  2007) | 7 lines If there are no members in a queue, then the loop
	  where the datastore for detecting duplicate dialed numbers will
	  be skipped, meaning the datastore isn't created. This means that
	  when we try to free it, there's a crash. This stops that crash
	  from occurring. (closes issue #11499, reported by slavon, patched
	  by eliel) ........

2007-12-10 16:15 +0000 [r92199-92201]  Joshua Colp <jcolp@digium.com>

	* res/res_agi.c: Only send a SIGHUP if the pid is greater than -1,
	  otherwise all PIDs greater than -1 will get the SIGHUP... and
	  that is bad. (closes issue #11453) Reported by: alanmcmillan

2007-12-10 14:18 +0000 [r92140-92160]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Removing some LOG_DEBUG items

	* /, channels/chan_sip.c: Merged revisions 92158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r92158 | oej | 2007-12-10 15:04:44 +0100 (MÃ¥n, 10 Dec 2007) | 16
	  lines Avoid reinvite race situations with two Asterisks trying to
	  reinvite each other in 1.4 and trunk. This patch implements
	  support for the 491 error code that Asterisk 1.4 generates on
	  situations where we get an incoming INVITE and already has one in
	  progress. Thanks to mavetju for reporting and to Raj Jain for an
	  excellent explanation of the problem. Patch by myself. Tested
	  with 8 Asterisk servers connected to each other in a training
	  network. Closes issue #10481 ........

	* doc/manager_1_1.txt, apps/app_voicemail.c: Add a few extra
	  headers in the voicemail users listing in manager 1.1. Update
	  documentation too. (closes issue #11495) Reported by: caio1982
	  Patches: extra_vm_manager_info1.diff uploaded by caio1982
	  (license 22)

2007-12-10 09:00 +0000 [r91929-92122]  Luigi Rizzo <rizzo@icir.org>

	* build_tools/make_version, build_tools/make_version_h:
	  simplify/cleanup the scripts

	* utils/Makefile: remove relative paths and use ASTTOPDIR instead.
	  Give a default value to ASTTOPDIR if unset so we can at least do
	  a 'make clean' without too much trouble. The proper fix, however,
	  is to partition the top level Makefile in a 'setup' and a 'main'
	  part, in a way that the 'setup' part can be included from
	  subdirs' Makefiles and allow targets to be built without going
	  through the top level Makefile.

	* utils/clicompat.c: simplify this file

	* doc/CODING-GUIDELINES: add a bit of info on the build
	  infrastructure

	* Makefile: Fix the detection of modules installed from this build.
	  You can now add the path of local module subdirs from the command
	  line with make LOCAL_MOD_SUBDIRS= ....

	* codecs/Makefile, apps/Makefile, Makefile.moddir_rules,
	  cdr/Makefile, pbx/Makefile, res/Makefile, channels/Makefile,
	  formats/Makefile, funcs/Makefile: Put into Makefile.moddir_rules
	  the common instructions used to generate loadable and embedded
	  module lists. Individual Makefiles now are a lot simpler,
	  possibly as simple as this: -include
	  $(ASTTOPDIR)/menuselect.makeopts $(ASTTOPDIR)/menuselect.makedeps
	  MODULE_PREFIX=cdr_ all: _all include
	  $(ASTTOPDIR)/Makefile.moddir_rules and also more flexible because
	  in a single directory we can combine various types of modules
	  (app_, cdr_, func_, ... ) by simply listing them in the
	  MODULE_PREFIX variable. The individual Makefiles can also create
	  list of modules to be excluded by listing them in the variablel
	  MODULE_EXCLUDE (see an example in channels/Makefile). With this
	  change it becomes trivial to integrate a directory with locally
	  created/modified sources into the main build.

	* Makefile, Makefile.moddir_rules: make the install target a bit
	  less noisy

	* Makefile: document usage of several exported variables

	* utils/Makefile: add hashtab.c to the list of files deleted

	* Makefile.moddir_rules: another place where ../ should have been
	  ASTTOPDIR

	* codecs/Makefile, utils/Makefile, apps/Makefile, cdr/Makefile,
	  pbx/Makefile, res/Makefile, channels/Makefile, formats/Makefile,
	  funcs/Makefile: normalize subdirs' Makefile by using ASTTOPDIR
	  and not .. to reference the top level directory.

	* Makefile: Implement the outcome of a discussion on the -dev list
	  re. the use of DESTDIR and INSTALL_PATH - many thanks to Tzafrir
	  Cohen and Simon Perreault for extremely useful feedback: 1.
	  comment out the [directories] section the created asterisk.conf ;
	  you can set the correct defaults at build time using
	  INSTALL_PATH, so the repetition here is redundant and often
	  wrong. (The next step now is move asterisk.conf outside the
	  Makefile to asterisk.conf.sample, because there is little if
	  anything here that needs to be constructed at build/install
	  time). 2. use DESTDIR?=$(INSTALL_PATH) so you only need to
	  specify a path once if the two coincide. This should have no ill
	  side effects, because if you don't specify DESTDIR, you really
	  need INSTALL_PATH="" to set the correct defaults, and if you
	  specify DESTDIR the value is not overridden. The second part
	  required moving the 'export DESTDIR' right after the assignment
	  to prevent DESTDIR getting set by the export (this is documented
	  in the Makefile).o hopefully avoid the mistake)$ With this change
	  you can now do something like this from your source tree: make
	  INSTALL_PATH=/some/place install samples and then main/asterisk
	  -vdc which will pick up the correct config files and libraries
	  from /some/place - i.e. great for developers!

	* main/config.c: remove unused code, and simplify the logic for
	  #include/#exec (still a lot of cleanup needed here).

	* main/config.c: Implement comment_buffer and lline_buffer in terms
	  of the ast_str_*() API. I don't know if comment_buffers etc are
	  actually used at all...

	* main/config.c: unify some common code

	* main/config.c: normalize formatting

	* main/config.c: document a nice technique to exit from a block in
	  case of errors.

	* main/config.c: a little bit of documentation on how lines are
	  parsed.

	* utils/ael_main.c: normalize header order, and add a comment on
	  the need to clean up this file.

	* include/asterisk/network.h: some platforms (e.g. FreeBSD4) need
	  netinet/in.h to be included before arpa/inet.h

2007-12-07 23:32 +0000 [r91832-91891]  Jason Parker <jparker@digium.com>

	* /, main/dsp.c: Merged revisions 91890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11273) ........ r91890 | qwell | 2007-12-07 17:29:01 -0600
	  (Fri, 07 Dec 2007) | 4 lines We need to make sure we free the
	  input frame if we return a different frame in ast_dsp_process.
	  Issue 11273, pointed out by dimas, with a patch by eliel.
	  ........

	* pbx/pbx_lua.c, configs/extensions.lua.sample: Update
	  documentation for pbx_lua. Closes issue #11492, patch by
	  mnicholson.

2007-12-07 21:25 +0000 [r91784-91831]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 91830 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91830 | russell | 2007-12-07 15:24:33 -0600 (Fri, 07 Dec 2007) |
	  5 lines Make the lock protecting each thread's list of locks it
	  currently holds recursive. I think that this will fix the
	  situation where some people have said that "core show locks"
	  locks up the CLI. (related to issue #11080) ........

	* /, include/asterisk/lock.h: Merged revisions 91828 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r91828 | russell | 2007-12-07 15:17:24 -0600 (Fri, 07
	  Dec 2007) | 6 lines Fix another bug in the DEBUG_THREADS code.
	  The ast_mutex_init() function had the mutex attribute object
	  marked as static. This means that multiple threads initializing
	  locks at the same time could step on each other and end up with
	  improperly initialized locks. (found when tracking down locking
	  issues related to issue #11080) ........

	* /, include/asterisk/lock.h: Merged revisions 91826 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r91826 | russell | 2007-12-07 15:11:08 -0600 (Fri, 07
	  Dec 2007) | 6 lines I love fixing lock related errors in the lock
	  debugging code. That's about as ironic as it gets in Asterisk
	  programming land. Anyway, I spotted this bug while trying to
	  track down why systems are locking up and acting weird in issue
	  #11080. The mutex attribute object was marked as static in this
	  function when it should not have been. ........

	* apps/app_dial.c, /: Merged revisions 91783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91783 | russell | 2007-12-07 10:38:48 -0600 (Fri, 07 Dec 2007) |
	  6 lines * Add channel locking around datastore operations that
	  expect the channel to be locked. * Document why we don't record
	  Local channels in the dialed interfaces list. * Remove the dialed
	  variable as it isn't needed. * Restructure some code for clarity
	  and coding guidelines stuff ........

2007-12-07 16:37 +0000 [r91782]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: Fix a small typo in a comment. Closes issue
	  #11490

2007-12-07 16:28 +0000 [r91781]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 91780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91780 | russell | 2007-12-07 10:25:25 -0600 (Fri, 07 Dec 2007) |
	  7 lines * Add channel locking around datastore operations that
	  expect the channel to be locked. * Document why we don't record
	  Local channels in the dialed interfaces list. * Handle memory
	  allocation failure. * Remove the dialed variable, as it wasn't
	  actually needed. * Tweak some formatting to conform to coding
	  guidelines. ........

2007-12-07 16:11 +0000 [r91779]  Jason Parker <jparker@digium.com>

	* doc/asterisk-mib.txt, main/pbx.c, res/snmp/agent.c,
	  include/asterisk/pbx.h, main/cli.c: Add count of total number of
	  calls processed by asterisk during it's lifetime. Add number of
	  total calls and current calls to SNMP. Closes issue #10057, patch
	  by jcmoore.

2007-12-07 16:11 +0000 [r91778]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, /: Merged revisions 91777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91777 | russell | 2007-12-07 10:08:35 -0600 (Fri, 07 Dec 2007) |
	  6 lines * Add a bit more of a verbose comment as to why a hangup
	  frame needs to be queued up if autoservice gets a NULL return
	  from ast_read(). * Make the process of queueing the hangup frame
	  more efficient by putting the frame where it is going to end up
	  and avoiding some locking and extra memory allocations and
	  freeing. ........

2007-12-07 15:40 +0000 [r91738]  Mark Michelson <mmichelson@digium.com>

	* main/autoservice.c, /: Merged revisions 91737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91737 | mmichelson | 2007-12-07 09:39:58 -0600 (Fri, 07 Dec
	  2007) | 7 lines Hangups that happen during autoservice were not
	  processed appropriately. This is because a hangup actually causes
	  a NULL frame to be received, not a hangup frame. Queueing a
	  hangup if we receive a NULL frame during autoservice corrects
	  this problem (closes issue #11467, reported by jmls, patched by
	  me) ........

2007-12-07 02:52 +0000 [r91676-91700]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c, /: Merged revisions 91693 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91693 | russell | 2007-12-06 20:51:22 -0600 (Thu, 06 Dec 2007) |
	  2 lines Don't unlock the dialed_interfaces list until we're done
	  messing with the iterator. ........

	* apps/app_dial.c, /, apps/app_queue.c: Merged revisions 91677 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91677 | russell | 2007-12-06 20:38:40 -0600 (Thu, 06 Dec 2007) |
	  4 lines Allow dialing local channels from Queue() and Dial()
	  again. There was a slight flaw in the code to prevent call
	  forwards from looping that caused this problem. (related to issue
	  #11486) ........

	* /, apps/app_queue.c: Merged revisions 91675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91675 | russell | 2007-12-06 20:19:45 -0600 (Thu, 06 Dec 2007) |
	  7 lines Fix in an issue in the call forwarding handling code that
	  was causing crashes on every call into a queue. I'm not entirely
	  sure about the logic in this part of the code, so I want to look
	  at it some more tomorrow. However, this makes it safe and keeps
	  it from crashing. (closes issue #11486, reported by adamg,
	  patched by me) ........

2007-12-07 00:58 +0000 [r91617-91638]  Tilghman Lesher <tlesher@digium.com>

	* /, main/rtp.c: Merged revisions 91637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91637 | tilghman | 2007-12-06 18:52:17 -0600 (Thu, 06 Dec 2007)
	  | 5 lines At the end of a call, when we're reporting, RTCP may
	  already be partially torn down, so check for NULL dereference
	  Reported by: blitzrage Patch by: tilghman (Closes issue #11450)
	  ........

	* channels/chan_zap.c: Add a manager event for PRI events: this
	  will help manager users detect when a D-channel goes down

	* main/cdr.c: If duration or billsec are not yet calculated,
	  calculate them on demand.

2007-12-06 21:57 +0000 [r91598]  Jason Parker <jparker@digium.com>

	* cdr/cdr_sqlite3_custom.c: Fix a problem with quoting in sqlite3
	  cdr module.. Closes issue #11070, patch by seanbright.

2007-12-06 21:03 +0000 [r91579]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Handle allocation failure of the heard and
	  deleted arrays of the vm_state. (closes issue #11408, reported
	  and patched by jaroth)

2007-12-06 20:52 +0000 [r91561]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 90166,90736,90753 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90166 | tilghman | 2007-11-29 13:48:10 -0600 (Thu, 29 Nov 2007)
	  | 3 lines Properly escape cdr->src and cdr->dst and ensure we use
	  thread-safe escaping (Fixes AST-2007-026) ........ r90736 |
	  tilghman | 2007-12-03 17:23:55 -0600 (Mon, 03 Dec 2007) | 5 lines
	  If both dbhost and dbsock were not set, a NULL deref could result
	  Reported by: xrg Patch by: tilghman (Closes issue #11387)
	  ........ r90753 | tilghman | 2007-12-03 17:50:51 -0600 (Mon, 03
	  Dec 2007) | 5 lines Solaris requires the inclusion of
	  sys/loadavg.h for getloadavg(). Reported by: snuffy Patch by:
	  snuffy,tilghman (Closes issue #11430) ........

2007-12-06 16:54 +0000 [r91472]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we clear these flags when libpri
	  is not installed

2007-12-06 16:51 +0000 [r91440-91458]  Joshua Colp <jcolp@digium.com>

	* main/udptl.c, /: Merged revisions 91450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91450 | file | 2007-12-06 12:49:42 -0400 (Thu, 06 Dec 2007) | 6
	  lines Fix various in the udptl implementation. It could return
	  empty modem frames, have an incorrect sequence number on packets,
	  and display the wrong sequence number in the debug messages.
	  (closes issue #11228) Reported by: Cache Patches: udptl-4.patch
	  uploaded by dimas (license 88) ........

	* /, channels/chan_sip.c: Merged revisions 91439 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91439 | file | 2007-12-06 12:14:26 -0400 (Thu, 06 Dec 2007) | 4
	  lines Add support for accepting and sending T.38 in the initial
	  INVITE. (closes issue #9402) Reported by: thdei ........

2007-12-06 15:56 +0000 [r91347-91438]  Olle Johansson <oej@edvina.net>

	* doc/manager_1_1.txt (added), UPGRADE.txt: Adding documentation
	  for the massive manager changes to manager version 1.1 -
	  hopefully a more consistent manager interface.

	* main/manager.c: - The Ping Action - Now use Response: success -
	  New header "Ping: pong" :-) - The Events action - Now use
	  Response: Success - The new status is reported as "Events: On" or
	  "Events: Off" - Report if manager is enabled in the reload event
	  Small cleanups... From moremanager

	* main/channel.c: Changes to manager events in channel.c - Newstate
	  event - Now has "CalleridNum" for numeric caller id, like
	  Newchannel - The event does not send "<unknown>" for unknown
	  caller IDs just an empty field - Newstate and Newchannel events -
	  these have changed headers "State" -> ChannelStateDesc Text based
	  channel state -> ChannelState Numeric channel state - The events
	  does not send "<unknown>" for unknown caller IDs just an empty
	  field - Newstate event - Now has "CalleridNum" for numeric caller
	  id, like Newchannel - The event does not send "<unknown>" for
	  unknown caller IDs just an empty field - Link and Unlink events -
	  The "Link" and "Unlink" bridge events in channel.c are now
	  renamed to "Bridge" - The link state is in the bridgestate:
	  header as "Link" or "Unlink" - For channel.c bridges,
	  "Bridgetype: core" is added. This opens up for bridge events in
	  rtp.c and channel drivers - The "Rename" manager event has a
	  renamed header, to use the same terminology for the current
	  channel as other events - Oldname -> Channel (Moremanager)

	* main/cdr.c: New manager event when a channel changes account
	  code. Maybe belongs in the new cdr category? ---moremanager---
	  Event: NewAccountCode Modules: cdr.c Purpose: To report a change
	  in account code for a live channel Example: Event: NewAccountCode
	  Privilege: call,all Channel: SIP/olle-01844600 Uniqueid:
	  1177530895.2 AccountCode: Stinas account 1234848484
	  OldAccountCode: Olles Account 12345

	* apps/app_dial.c: - Dial event - Event Dial has new headers, to
	  comply with other events - Source -> Channel Channel name
	  (caller) - SrcUniqueID -> UniqueID Uniqueid (new) -> Dialstring
	  Dialstring in app data (moremanager)

	* apps/app_meetme.c: Adding small missing but important comma...

	* apps/app_meetme.c: A big oops...

	* apps/app_meetme.c: The MeetmeJoin now has caller ID name and
	  Caller ID number fields (like MeetMeLeave) (Moremanager)

	* channels/chan_zap.c: Update ZapShowChannels so that you can
	  specify one channel. Action ZapShowChannels Header changes -
	  Channel: -> ZapChannel For active channels, the Channel: and
	  Uniqueid: headers are added You can now add a "ZapChannel: "
	  argument to zapshowchannels actions to only get information about
	  one channel. From the moremanager branch

	* main/logger.c: Doxygen updates

	* include/asterisk/logger.h, /, main/logger.c, main/loader.c:
	  Merged revisions 91366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91366 | oej | 2007-12-06 13:54:11 +0100 (Tor, 06 Dec 2007) | 4
	  lines Make sure logger is reloaded at general reload in the cli.
	  (Discovered during Asterisk training in Portugal) ........

	* main/manager.c: Change description of new manager command

	* main/manager.c, CHANGES: Add manager command for showing all
	  current channels. Thanks, eliel, for writing the original patch.
	  Modified by me to follow other manager events and the new
	  "moremanager" style. (closes issue #11478) Reported by: eliel
	  Patches: manager.c.patch uploaded by eliel (license 64)

2007-12-06 04:37 +0000 [r91328]  Joshua Colp <jcolp@digium.com>

	* main/channel.c: Instead of iterating through the entire epoll
	  events array just look at the ones that will actually contain
	  data. (props to eliel on IRC for this)

2007-12-05 22:57 +0000 [r91291-91293]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 91292 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91292 | mmichelson | 2007-12-05 16:57:13 -0600 (Wed, 05 Dec
	  2007) | 3 lines Reverting extra stuff I didn't mean to commit
	  ........

	* apps/app_dial.c, /, apps/app_voicemail.c: Merged revisions 91273
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91273 | mmichelson | 2007-12-05 16:35:52 -0600 (Wed, 05 Dec
	  2007) | 11 lines The 'G' option for Dial() did not properly
	  handle the case where only a label was provided. This was due to
	  the fact that the answering channel did not have an extension
	  set, so ast_parseable_goto would fail. This fix eliminates the
	  call to ast_parseable_goto on the answering channel since it is a
	  wasteful call. The answering channel and the calling channel are
	  both directed to the same extension and context, just different
	  priorities, so we can just copy the values from the calling
	  channel to the answering channel and increment the answering
	  channel's priority. (closes issue #11382, reported by jon, patch
	  by me with correction by jon) ........

2007-12-05 21:46 +0000 [r91238]  Tilghman Lesher <tlesher@digium.com>

	* /, sounds/Makefile: Merged revisions 91237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91237 | tilghman | 2007-12-05 15:38:13 -0600 (Wed, 05 Dec 2007)
	  | 2 lines Upgrade to the latest version of extra sounds ........

2007-12-05 17:49 +0000 [r91193-91197]  Russell Bryant <russell@digium.com>

	* /, main/threadstorage.c: Merged revisions 91192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91192 | russell | 2007-12-05 11:31:42 -0600 (Wed, 05 Dec 2007) |
	  10 lines Make the lock in the threadstorage debugging code
	  untracked to avoid a deadlock on thread destruction. (closes
	  issue #11207) Reported by: ys Patches: threadstorage.c.diff
	  uploaded by ys (license 281) Also fixes an open bug report:
	  (closes issue #11446) ........

	* apps/app_directory.c: Resolve compiler warnings.

2007-12-05 16:46 +0000 [r91172-91173]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, UPGRADE.txt, configs/manager.conf.sample,
	  CHANGES, include/asterisk/manager.h, cdr/cdr_manager.c: Change
	  cdr_manager to use a "CDR" level, rather than the (overcrowded)
	  "call" level. (Closes issue #11015)

	* CHANGES, apps/app_directory.c: Added multiple name listing.
	  (Closes issue #10413)

2007-12-05 16:14 +0000 [r91171]  Joshua Colp <jcolp@digium.com>

	* configs/http.conf.sample: Remove second prefix line. Only need it
	  documented once in the same file. (closes issue #11472) Reported
	  by: eserra Patches: http.conf.sample.diff uploaded by eserra
	  (license 45)

2007-12-05 13:09 +0000 [r91151-91152]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, UPGRADE.txt, configs/sip.conf.sample: Rename
	  "username" to "defaultuser" to match with "defaultip". "Username"
	  still works, but is deprecated.

	* channels/chan_sip.c: Remove the cseqs from "sip show channel" and
	  make more place for the call ID.

2007-12-05 03:48 +0000 [r91133]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c: revert part of my changes from earlier today
	  since this code is no longer dependent on libpri.h

2007-12-05 03:34 +0000 [r91029-91131]  Russell Bryant <russell@digium.com>

	* res/res_odbc.c: Use ast_free() instead of free(). (closes issue
	  #11309) Reported by: Laureano Patches: res_odbc.c.patch uploaded
	  by Laureano (license 265)

	* /, include/asterisk/lock.h: Merged revisions 91070 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r91070 | russell | 2007-12-04 18:35:31 -0600 (Tue, 04
	  Dec 2007) | 11 lines Fix some crashes in chan_iax2 that were
	  reported as happening on Mac systems. It turns out that the
	  problem was the Mac version of the ast_atomic_fetchadd_int()
	  function. The Mac atomic add function returns the _new_ value,
	  while this function is supposed to return the old value. So, the
	  crashes happened on unreferencing objects. If the reference count
	  was decreased to 1, ao2_ref() thought that it had been decreased
	  to zero, and called the destructor. However, there was still an
	  outstanding reference around. (closes issue #11176) (closes issue
	  #11289) ........

	* /, main/utils.c: Merged revisions 91074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r91074 | russell | 2007-12-04 18:48:47 -0600 (Tue, 04 Dec 2007) |
	  4 lines When DEBUG_THREADS is enabled, we only have the details
	  about who is holding a lock that we are waiting on for a mutex,
	  not rwlocks. This should fix the problem where people have
	  reported "core show locks" crashing sometimes. ........

	* channels/chan_zap.c: Fix mwimonitornotify on reload ... again.
	  This option was only read at startup so a reload would erase it
	  and not reset it. (pointed out by tzafrir)

	* utils/astman.c: Fix the build of astman. Any file that includes
	  any asterisk sub-headers needs to first include asterisk.h.
	  (closes issue #11394)

2007-12-04 22:44 +0000 [r91012]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Don't error when we don't have libpri
	  installed with libss7 support. Also, print the debug message
	  anyway if we can't find the right PRI

2007-12-04 22:07 +0000 [r91010-91011]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 90967 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90967 | russell | 2007-12-04 13:57:39 -0600 (Tue, 04 Dec 2007) |
	  7 lines Make some changes to some additions I made recently for
	  doing channel autoservice when looking up extensions. This code
	  was added to handle the case where a dialplan switch was in use
	  that could block for a long time. However, the way that I added
	  it, it did this for all extension lookups. However, lookups in
	  the in-memory tree of extensions should _not_ take long enough to
	  matter. So, move the autoservice stuff to be only around
	  executing a switch. ........

	* channels/chan_zap.c: Fix resetting mwimonitornotify on reload. I
	  guess I only added this line in my head. (thanks to tzafrir for
	  pointing it out)

2007-12-04 21:46 +0000 [r90993]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_usbradio.c: Coding guidelines fixups (Closes issue
	  #11412)

2007-12-04 21:23 +0000 [r90991]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c, CHANGES: Add manager action
	  'sipshowregistry'. Closes issue #11464, patch by eliel.

2007-12-04 19:08 +0000 [r90949]  Russell Bryant <russell@digium.com>

	* include/asterisk/callerid.h, channels/chan_zap.c,
	  main/callerid.c, CHANGES, configs/zapata.conf.sample: Add support
	  for monitoring MWI on FXO lines. This introduces two new options
	  for zapata.conf: mwimonitor and mwimonitornotify. The mwimonitor
	  option enables MWI monitoring. When the MWI state on a line
	  changes, then the script specified by mwimonitornotify will be
	  executed for custom handling of the state change, similar to the
	  externnotify option of voicemail.conf. Also, when the MWI state
	  on an FXO line changes, an internal Asterisk event is generated
	  to indicate the new state of the associated mailbox. That may,
	  any module that cares about MWI information will get notified and
	  can handle it just as if app_voicemail had sent this
	  notification. (BE-253, original patch from markster, with some
	  minor modifications by me to add comments, documentation, and
	  internal event support)

2007-12-04 18:29 +0000 [r90930]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Kevin suggested doing the reverse of my
	  last commit, since imap_retrieve_file does not modify the
	  contents of the "mailbox" string. In other words, I'm changing
	  the imap_retrieve_file function to take a const char* as the
	  third argument so that I don't need to cast const char*'s as
	  char*'s to suppress compiler warnings.

2007-12-04 18:15 +0000 [r90929]  Jason Parker <jparker@digium.com>

	* Makefile: Add Makefile alias target 'pdf' which does the same
	  thing as asterisk.pdf. Issue 11452, reported by blitzrage.

2007-12-04 18:14 +0000 [r90928]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Suppress a compiler warning due to
	  discarding a "const" qualifier

2007-12-04 18:09 +0000 [r90927]  Jason Parker <jparker@digium.com>

	* main/global_datastores.c: Fix build, that some people aren't
	  seeing for some reason.

2007-12-04 17:51 +0000 [r90899]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Wrong locking style got merged from 1.4 to
	  trunk. My mistake.

2007-12-04 17:40 +0000 [r90880]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c: fix build of this module when libpri and/or
	  libss7 are or are not present

2007-12-04 17:38 +0000 [r90879]  Jason Parker <jparker@digium.com>

	* main/channel.c, /: Merged revisions 90876 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11454) ........ r90876 | qwell | 2007-12-04 11:28:08 -0600
	  (Tue, 04 Dec 2007) | 4 lines If we fail to create a channel after
	  allocating a timing fd, we need to make sure to close it. Issue
	  11454, patch by eliel. ........

2007-12-04 17:36 +0000 [r90878]  Russell Bryant <russell@digium.com>

	* main/Makefile: Fix a silly little typo :)

2007-12-04 17:35 +0000 [r90877]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c: Fix build in trunk. This was fixed in 1.4, but
	  blocked in trunk since this hadn't been merged yet.

2007-12-04 17:08 +0000 [r90873]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, main/global_datastores.c (added),
	  channels/chan_local.c, /, main/Makefile,
	  include/asterisk/channel.h, include/asterisk/global_datastores.h
	  (added), apps/app_queue.c: Merged revisions 90735 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r90735 | mmichelson | 2007-12-03 17:12:17 -0600 (Mon, 03
	  Dec 2007) | 22 lines A big one... This is the merge of the
	  forward-loop branch. The main change here is that call-forwards
	  can no longer loop. This is accomplished by creating a datastore
	  on the calling channel which has a linked list of all devices
	  dialed. If a forward happens, then the local channel which is
	  created inherits the datastore. If, through this progression of
	  forwards and datastore inheritance, a device is attempted to be
	  dialed a second time, it will simply be skipped and a warning
	  message will be printed to the CLI. After the dialing has been
	  completed, the datastore is detached from the channel and
	  destroyed. This change also introduces some side effects to the
	  code which I shall enumerate here: 1. Datastore inheritance has
	  been backported from trunk into 1.4 2. A large chunk of code has
	  been removed from app_dial. This chunk is the section of code
	  which handles the call forward case after the channel has been
	  requested but before it has been called. This was removed because
	  call-forwarding still works fine without it, it makes the code
	  less error-prone should it need changing, and it made this set of
	  changes much less painful to just have the forwarding handled in
	  one place in each module. 3. Two new files, global_datastores.h
	  and .c have been added. These are necessary since the datastore
	  which is attached to the channel may be created and attached in
	  either app_dial or app_queue, so they need a common place to find
	  the datastore info. This approach was taken in case similar
	  datastores are needed in the future, there will be a common place
	  to add them. ........

2007-12-04 15:16 +0000 [r90852-90854]  Olle Johansson <oej@edvina.net>

	* apps/app_queue.c: (closes issue #11431) Reported by: Laureano
	  Patches: app_queue.c.patch uploaded by Laureano (license 265)

	* main/pbx.c, CHANGES: (closes issue #11422) Reported by: eliel
	  Patches: core.show.hint.patch uploaded by eliel (license 64)

	* CHANGES: (closes issue #11462) Reported by: eliel Patches:
	  CHANGES.patch uploaded by eliel (license 64)

2007-12-04 15:01 +0000 [r90851]  Tilghman Lesher <tlesher@digium.com>

	* res/res_agi.c: Pass the Asterisk version to AGI scripts as part
	  of the initial dump of info Reported by: acunningham Patch by:
	  acunningham (Closes issue #11398)

2007-12-04 11:50 +0000 [r90834]  Luigi Rizzo <rizzo@icir.org>

	* res/Makefile: fix build on cygwin

2007-12-03 23:52 +0000 [r90760]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/compat.h: Merged revisions 90753 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r90753 | tilghman | 2007-12-03 17:50:51 -0600 (Mon, 03
	  Dec 2007) | 5 lines Solaris requires the inclusion of
	  sys/loadavg.h for getloadavg(). Reported by: snuffy Patch by:
	  snuffy,tilghman (Closes issue #11430) ........

2007-12-03 23:49 +0000 [r90746]  Steve Murphy <murf@digium.com>

	* main/hashtab.c: A small fix from snuffy

2007-12-03 23:48 +0000 [r90738]  Jason Parker <jparker@digium.com>

	* res/res_monitor.c: Add manager events for when a monitor is
	  started or stopped. Closes issue #10191, patch by dgradecak.

2007-12-03 23:29 +0000 [r90737]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_pgsql.c, /: Merged revisions 90736 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r90736 | tilghman | 2007-12-03 17:23:55 -0600 (Mon, 03
	  Dec 2007) | 5 lines If both dbhost and dbsock were not set, a
	  NULL deref could result Reported by: xrg Patch by: tilghman
	  (Closes issue #11387) ........

2007-12-03 22:07 +0000 [r90697]  Jason Parker <jparker@digium.com>

	* /, apps/app_meetme.c: Merged revisions 90696 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #11383) ........ r90696 | qwell | 2007-12-03 16:06:36 -0600
	  (Mon, 03 Dec 2007) | 4 lines Make sure we always close the
	  conference fd if we have an open one. Issue 11383, reported by
	  markmhy, patch by eliel. ........

2007-12-03 21:24 +0000 [r90670]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Replacing some calls to free() with
	  ast_free(). (closes issue #11448, reported and patched by jaroth)

2007-12-03 21:03 +0000 [r90656]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/agi.h, res/res_agi.c, CHANGES: Add AGI commands
	  for speech recognition. These mirror the dialplan applications
	  mostly but present the information in a nicer fashion. The SPEECH
	  RECOGNIZE command for example will return the results instead of
	  having to query the dialplan functions.

2007-12-03 21:00 +0000 [r90644]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_mgcp.c: Merged revisions 90639 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90639 | mmichelson | 2007-12-03 14:59:51 -0600 (Mon, 03 Dec
	  2007) | 5 lines Changing some bad logic when calculating the
	  interdigit timeout. (closes issue #11402, reported and patched by
	  eferro) ........

2007-12-03 20:58 +0000 [r90631]  Jason Parker <jparker@digium.com>

	* /, res/res_features.c: Merged revisions 90607 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #11436) ........ r90607 | qwell | 2007-12-03 14:51:17 -0600
	  (Mon, 03 Dec 2007) | 4 lines Fix crash in ParkAndAnnounce
	  application. Issue #11436, reported by lytledd, patch by eliel.
	  ........

2007-12-03 20:30 +0000 [r90591]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c: Avoid an additional function call. Reported by:
	  eliel Patch by: eliel (Closes issue #11438)

2007-12-03 20:07 +0000 [r90550-90589]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 90588 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90588 | file | 2007-12-03 16:05:42 -0400 (Mon, 03 Dec 2007) | 2
	  lines Do not create a smoother for G723.1 frames, they need to be
	  left alone to their native 20/24 byte size. ........

	* main/channel.c, /, include/asterisk/channel.h, .cleancount:
	  Merged revisions 90548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90548 | file | 2007-12-03 14:40:56 -0400 (Mon, 03 Dec 2007) | 2
	  lines Preserve the indication currently playing on a channel when
	  a masquerade operation happens. (issue #BE-88) ........

2007-12-03 16:46 +0000 [r90528]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample: Updating sample queues.conf file to
	  show how multiple periodic announcements may be specified since
	  this was not documented previously (closes issue #11432, reported
	  and patched by Laureano)

2007-12-03 14:14 +0000 [r90508]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c: Remove the file descriptors from the main poll
	  channel when the channel is hung up during the dialing attempt,
	  and make sure a channel exists before trying to remove it at the
	  end. (closes issue #11441) Reported by: blitzrage

2007-12-02 18:20 +0000 [r90471]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 90470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90470 | russell | 2007-12-02 12:18:52 -0600 (Sun, 02 Dec 2007) |
	  6 lines The other day when I went through making changes as a
	  result of the ao2_link() change, I added some code to set
	  pointers to NULL after they were unreferenced. This pointed out
	  that in this place, the object was unreferenced before the code
	  was done using it. So, move the unref down a little bit. (crash
	  reported by jmls on IRC) ........

2007-12-02 09:42 +0000 [r90433]  Tilghman Lesher <tlesher@digium.com>

	* main/autoservice.c, /: Merged revisions 90432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90432 | tilghman | 2007-12-02 03:34:23 -0600 (Sun, 02 Dec 2007)
	  | 7 lines Clarify the return value on autoservice. Specifically,
	  if you started autoservice and autoservice was already on, it
	  would erroneously return an error. Reported by: adiemus Patch by:
	  dimas (Closes issue #11433) ........

2007-12-01 01:37 +0000 [r90410]  Jason Parker <jparker@digium.com>

	* res/res_adsi.c: Only reload if the config file has changed.
	  Closes issue #11281, patch by eliel.

2007-11-30 21:19 +0000 [r90388]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, include/asterisk/app.h,
	  include/asterisk/audiohook.h, res/res_features.c,
	  include/asterisk/channel.h, main/audiohook.c, apps/app_queue.c,
	  configs/features.conf.sample: Adding support for the
	  "automixmonitor" dial and queue options. This works in much the
	  same way as the automonitor, except that instead of using the
	  monitor app, it uses the mixmonitor app. By providing an 'x' or
	  'X' as a dial or queue option, a DTMF sequence may be entered (as
	  defined in features.conf) to start the one-touch mixmonitor. This
	  patch also introduces some new API calls to the audiohooks code
	  for searching for an audiohook by type and for searching for a
	  running audiohook by type. Big thanks to joetester for writing
	  the initial patch, testing it and patiently waiting for it to be
	  committed. (closes issue #10185, reported and patched by
	  xmarksthespot)

2007-11-30 19:34 +0000 [r90311-90351]  Russell Bryant <russell@digium.com>

	* main/manager.c, /, include/asterisk/astobj2.h, apps/app_queue.c,
	  channels/chan_iax2.c, main/astobj2.c, main/config.c: Merged
	  revisions 90348 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90348 | russell | 2007-11-30 13:26:04 -0600 (Fri, 30 Nov 2007) |
	  8 lines Change the behavior of ao2_link(). Previously, in
	  inherited a reference. Now, it automatically increases the
	  reference count to reflect the reference that is now held by the
	  container. This was done to be more consistent with ao2_unlink(),
	  which automatically releases the reference held by the container.
	  It also makes it so it is no longer possible for a pointer to be
	  invalid after ao2_link() returns. ........

	* /, include/asterisk/astobj2.h: Merged revisions 90310 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90310 | russell | 2007-11-30 12:46:46 -0600 (Fri, 30 Nov 2007) |
	  2 lines Add some notes on the behavior of ao2_unlink() after a
	  discussion with Tilghman ........

2007-11-30 14:45 +0000 [r90270]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 90269 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90269 | file | 2007-11-30 10:43:15 -0400 (Fri, 30 Nov 2007) | 6
	  lines Fix locking issues under one legged replaces scenarios.
	  (closes issue #11420) Reported by: irroot Patches:
	  chan_sip_oneleg.patch uploaded by irroot (license 52) ........

2007-11-30 00:16 +0000 [r90164-90232]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_mgcp.c: Merged revisions 90231 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90231 | mmichelson | 2007-11-29 18:16:04 -0600 (Thu, 29 Nov
	  2007) | 5 lines Clear the DTMF buffer if the call times out.
	  (closes issue #11418, reported and patched by eferro) ........

	* /, apps/app_queue.c: Merged revisions 90163 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90163 | mmichelson | 2007-11-29 13:38:39 -0600 (Thu, 29 Nov
	  2007) | 6 lines This patch handles the case where a queue member
	  with a negative penalty is added via the manager. If a negative
	  value is submitted for a member penalty, we set it to 0. (closes
	  issue #11411, reported and patched by Laureano) ........

2007-11-29 19:35 +0000 [r90156-90162]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_pgsql.c, /: Merged revisions 90160 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r90160 | tilghman | 2007-11-29 13:24:11 -0600 (Thu, 29
	  Nov 2007) | 2 lines Properly escape input buffers (Fixes
	  AST-2007-025) ........

	* /, formats/format_wav.c, formats/format_pcm.c,
	  formats/format_ogg_vorbis.c, main/file.c,
	  include/asterisk/mod_format.h, formats/format_h263.c,
	  formats/format_h264.c, formats/format_wav_gsm.c,
	  formats/format_g726.c: Merged revisions 90155 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90155 | tilghman | 2007-11-29 11:29:59 -0600 (Thu, 29 Nov 2007)
	  | 5 lines Use of "private" as a field name in a header file
	  messes with C++ projects Reported by: chewbacca Patch by: casper
	  (Closes issue #11401) ........

	* include/asterisk/lock.h: Fix build of trunk

	* /, sounds/Makefile: Merged revisions 90154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90154 | tilghman | 2007-11-29 11:18:09 -0600 (Thu, 29 Nov 2007)
	  | 2 lines Upgrade the core sounds release version ........

2007-11-29 13:38 +0000 [r90149-90150]  Kevin P. Fleming <kpfleming@digium.com>

	* utils/Makefile, utils/hashtest.c: let's try this again... *all*
	  compilation and linking in Asterisk should be done using the
	  standard compilation rules, not manually created ones. changing
	  hashtest.c to use these rules caused the compiler to notice a
	  large number of coding guidelines violations, so those are fixed
	  too.

	* main/manager.c: restore behavior from the 1.4 branch... manager
	  users created via users.conf should default to *all* permissions,
	  not none

2007-11-29 00:37 +0000 [r90139-90148]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, include/asterisk/channel.h,
	  funcs/func_callerid.c: Merged revisions 90145 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90145 | russell | 2007-11-28 18:20:34 -0600 (Wed, 28 Nov 2007) |
	  5 lines This set of changes is to make some callerID handling
	  thread-safe. The ast_set_callerid() function needed to lock the
	  channel. Also, the handlers for the CALLERID() dialplan function
	  needed to lock the channel when reading or writing callerid
	  values directly on the channel structure. ........

	* include/asterisk/file.h, /, main/file.c: Merged revisions 90142
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90142 | russell | 2007-11-28 18:06:08 -0600 (Wed, 28 Nov 2007) |
	  4 lines Merge a change from team/russell/chan_refcount ... This
	  makes ast_stopstream() thread-safe. ........

	* include/asterisk/audiohook.h: Merge another small doxygen change
	  from team/russell/chan_refcount to indicate that a channel
	  doesn't need to be locked before calling a certain function.

	* include/asterisk/channel.h: Merge some channel.h doxygen updates
	  from team/russell/chan_refcount This was mostly to note whether a
	  channel needed to be locked or not before calling these
	  functions. However, I added some other things, too.

2007-11-28 23:03 +0000 [r90102]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c, apps/app_queue.c: Merged revisions
	  90101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90101 | file | 2007-11-28 18:59:28 -0400 (Wed, 28 Nov 2007) | 6
	  lines Fix a few memory leaks. (closes issue #11405) Reported by:
	  eliel Patches: load_realtime.patch uploaded by eliel (license 64)
	  ........

2007-11-28 22:44 +0000 [r90100]  Kevin P. Fleming <kpfleming@digium.com>

	* configs/users.conf.sample, main/manager.c, /: Merged revisions
	  90098 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90098 | kpfleming | 2007-11-28 16:30:46 -0600 (Wed, 28 Nov 2007)
	  | 2 lines it is impossible to set permissions for manager
	  accounts created by users.conf (reported internally, patched by
	  me) ........

2007-11-28 22:32 +0000 [r90099]  Joshua Colp <jcolp@digium.com>

	* main/cli.c: file says... compile before you commit!

2007-11-28 22:17 +0000 [r90060-90061]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c: Removing a pointless check of option_debug

	* main/pbx.c, /: Merged revisions 90059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r90059 | mmichelson | 2007-11-28 16:08:50 -0600 (Wed, 28 Nov
	  2007) | 13 lines Removing some seemingly pointless code. This
	  sets a channel variable for every priority executed in the
	  dialplan if you have debug set to anything non-zero. This seems
	  pointless due to the fact that these channel variables are not
	  referenced anywhere else in the code and their names are esoteric
	  enough that they would not be practical to reference in the
	  dialplan. Plus the fact that this behavior isn't documented
	  anywhere means that the change is not likely to cause any
	  disruption. If anything, this may actually cause a slight
	  performance increase if running with debug on. The motivating
	  influence for this code change is the eventwhencalled option for
	  queues. If set to vars, all channel variables will be output to
	  the manager. These unnecessary channel variables make the output
	  a lot more difficult to deal with. ........

2007-11-28 20:33 +0000 [r90039]  Steve Murphy <murf@digium.com>

	* main/ast_expr2f.c, main/ast_expr2.fl: Made expr2 parser 8-bit
	  transparent

2007-11-28 20:27 +0000 [r90038]  Jason Parker <jparker@digium.com>

	* main/pbx.c, res/res_crypto.c, include/asterisk/cli.h, main/cli.c:
	  Remove "old"-style CLI handler, since nothing uses it anymore.
	  Closes issue #11403, patch by eliel. This also completes the
	  janitor project.

2007-11-28 15:48 +0000 [r89981-89982]  Joshua Colp <jcolp@digium.com>

	* main/cli.c: Hide CLI commands starting with _ from tab completion
	  as was done previously. (closes issue #11395) Reported by: eliel
	  Patches: cli.c.patch uploaded by eliel (license 64)

	* main/abstract_jb.c, res/res_agi.c: Fix a few log messages.
	  (closes issue #11396) Reported by: IgorG Patches: spell.v1.diff
	  uploaded by IgorG (license 20)

2007-11-28 00:49 +0000 [r89947]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: Merge some little changes from
	  team/russell/chan_refcount to help reduce the diff to trunk. This
	  just removes some checks on the return value of alloca(), as
	  behavior is undefined if it runs out of stack space, and we don't
	  check it anywhere else.

2007-11-28 00:47 +0000 [r89946]  Mark Michelson <mmichelson@digium.com>

	* configs/musiconhold.conf.sample, configs/extconfig.conf.sample,
	  res/res_musiconhold.c, CHANGES: Adding support for realtime music
	  on hold. The following are the main points: 1. When moh is
	  started, we search first in memory to find the class. If we do
	  not find it in memory, we search realtime instead. 2. When moh is
	  restarted (as in, it had been started on this particular channel,
	  stopped, and now we're starting it again), if using the "files"
	  mode, then realtime will always be rechecked. If you are using
	  other modes, however, we will simply reattach to the external
	  running process which was playing moh earlier in the call. This
	  is a necessary compromise so that we don't end up with too many
	  background processes. 3. musiconhold.conf has a general section
	  now. It has one option: cachertclasses. If set to yes, then moh
	  classes found in realtime will be added to the in-memory list.
	  This has the advantage of not requiring database lookups each
	  time moh is started, but it has the disadvantage of not truly
	  being realtime. I have tested this for functionality, and it
	  passes. I also tested this under valgrind and there are no memory
	  problems reported under typical use. Special thanks to Sergee for
	  implementing this feature and enduring my complaints on the
	  bugtracker! (closes issue #11196, reported and patched by sergee)

2007-11-28 00:24 +0000 [r89840-89915]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /, include/asterisk/pbx.h: Merged revisions 89893 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89893 | russell | 2007-11-27 18:20:13 -0600 (Tue, 27 Nov 2007) |
	  4 lines - update documentation for some of the goto functions to
	  note that they handle locking the channel as needed - update
	  ast_explicit_goto() to lock the channel as needed ........

	* include/asterisk/channel.h: Document that the channel is not
	  locked when the send_digit_begin and end callbacks get called.

	* main/autoservice.c, /: Merged revisions 89886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89886 | russell | 2007-11-27 17:47:28 -0600 (Tue, 27 Nov 2007) |
	  2 lines Don't do frame processing if ast_read() returned NULL.
	  ........

	* channels/chan_iax2.c: Merge changes from
	  team/russell/iax2_frame_queue This patch is an optimization for
	  chan_iax2. This module is now heavily multi-threaded. However,
	  there is still a good number of globally shared resources that
	  prevent things from happen asynchronously. One of those things
	  was the global IAX frame queue. This queue was used to hold
	  frames that have been deferred for transmitting by another
	  thread, and frames that may need to get retransmitted. I changed
	  the frame queue to be per-call, since almost all of the frame
	  queue handling only cares about frames specific to a call number.

	* /, apps/app_queue.c: Merged revisions 89844 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89844 | russell | 2007-11-27 17:21:13 -0600 (Tue, 27 Nov 2007) |
	  3 lines Instead of depending on the return value of ast_true(),
	  explicitly set the eventwhencalled variable to 1. ........

	* main/pbx.c, /: Merged revisions 89839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89839 | russell | 2007-11-27 17:16:00 -0600 (Tue, 27 Nov 2007) |
	  2 lines Don't start/stop autoservice in pbx_extension_helper()
	  unless a channel exists ........

2007-11-27 23:11 +0000 [r89838]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 89837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89837 | mmichelson | 2007-11-27 17:10:05 -0600 (Tue, 27 Nov
	  2007) | 12 lines Two changes with regards to the
	  'eventwhencalled' option of queues.conf 1) Due to some signed vs.
	  unsigned silliness, setting 'eventwhencalled' to 'vars' or 'yes'
	  did exactly the same thing. Thus the sign change of the ast_true
	  call. 2) The vars2manager function overwrote a \n for every
	  channel variable it parsed, resulting in bizarre output for the
	  channel variables. This patch remedies this. (related to issue
	  #11385, however I'm not sure if this will actually be enough to
	  close it) ........

2007-11-27 22:42 +0000 [r89835]  Russell Bryant <russell@digium.com>

	* channels/chan_misdn.c: Bring in a small change from
	  team/russell/chan_refcount This replaces tab completion code with
	  the use of a public function that does the same thing

2007-11-27 22:14 +0000 [r89792]  Steve Murphy <murf@digium.com>

	* main/pbx.c, pbx/pbx_config.c: closes issue #11294; missed the
	  conditional unlock of the contexts when the hash table is used
	  instead; also, used the ast_free_ptr as advised.

2007-11-27 22:05 +0000 [r89791]  Russell Bryant <russell@digium.com>

	* main/autoservice.c, main/pbx.c, /: Merged revisions 89790 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89790 | russell | 2007-11-27 15:45:51 -0600 (Tue, 27 Nov 2007) |
	  41 lines Merge changes from team/russell/autoservice_1.4 This set
	  of changes fixes an issue that was reported to me on IRC
	  yesterday. The user, d1mas, was using chan_zap for incoming calls
	  and was having DTMF recognition issues in some situations.
	  Specifically, he noticed that the problem occurred when using
	  DISA or WaitExten. He also noticed that when using Read, the
	  problem did not occur. His system also used DUNDi for dialplan
	  lookups. So, he theorized that if the DUNDi lookups blocked for
	  some period of time, that audio from the zap channel could get
	  lost. If the audio got lost, then it wouldn't be run through the
	  DTMF detector, and digits could get lost. He was correct, and the
	  following set of changes fixes the problem. However, the changes
	  go a little bit further than what was necessary to fix this exact
	  problem. 1) I updated pbx_extension_helper() to autoservice the
	  associated channel to handle cases where extension lookups may
	  take a long time. This would normally be a dialplan switch that
	  does some lookup over the network, such as the DUNDi or IAX2
	  switches. This ensures that even while a DUNDi lookup is
	  blocking, the channel will be continuously serviced. 2) I made a
	  change to the autoservice code. This is actually something that
	  has bothered me for a long time. When a channel is in
	  autoservice, _all_ frames get thrown away. However, some frames
	  really shouldn't be thrown away. The most notable examples are
	  signalling (CONTROL) frames, and DTMF. So, this patch queues up
	  important frames while a channel is in autoservice. When
	  autoservice is stopped on the channel, the queued up frames get
	  stuck back on the channel so that they can get processed instead
	  of thrown away. 3) I made another change to the autoservice code
	  to handle the case where autoservice is started on channels
	  recursively. Previously, you could call ast_autoservice_start()
	  multiple times on a channel, and it would stop the first time
	  ast_autoservice_stop() gets called. Now, it will ensure that
	  autoservice doesn't actually stop until the final call to
	  ast_autoservice_stop(). ........

2007-11-27 21:10 +0000 [r89769-89772]  Olle Johansson <oej@edvina.net>

	* main/dnsmgr.c, res/res_jabber.c, main/enum.c, main/asterisk.c: A
	  few more "moremanager" fixes

	* include/asterisk.h, main/asterisk.c, main/loader.c: More
	  "moremanager" fixes. Manager commands to check module status.

	* include/asterisk/manager.h: More "moremanager" changes - doxygen
	  docs and changing manager version (finally) before making more
	  dramatic changes.

	* channels/chan_iax2.c: More additions from the "moremanager"
	  branch, this time for IAX2.

2007-11-27 20:21 +0000 [r89721]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/app.c: Merged revisions 89709 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89709 | kpfleming | 2007-11-27 14:16:56 -0600 (Tue, 27 Nov 2007)
	  | 2 lines on second thought... revert all the other changes i've
	  made in app options parsing leaving only one: if an empty
	  argument is supplied for an option, set that argument pointer to
	  point to an empty string rather than NULL, so that the
	  application can do normal checks on it without worrying about it
	  being NULL ........

2007-11-27 20:17 +0000 [r89710]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: remove a duplicate manager event

2007-11-27 19:50 +0000 [r89706]  Olle Johansson <oej@edvina.net>

	* channels/chan_gtalk.c: Manager events from the "moremanager"
	  branch

2007-11-27 19:47 +0000 [r89704]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/app.c: Merged revisions 89701 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89701 | kpfleming | 2007-11-27 13:36:55 -0600 (Tue, 27 Nov 2007)
	  | 2 lines generate a warning when an application option that
	  requires an argument is ignored due to lack of an argument
	  ........

2007-11-27 19:45 +0000 [r89698-89702]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Starting to merge changes from the
	  "moremanager" branch. Documentation will follow.

	* /, channels/chan_sip.c, include/asterisk/rtp.h, main/rtp.c: The
	  following patch with updates for trunk. Works much better in
	  trunk. Also by accident fixed a bad typo by a previous committer,
	  which actually made video calls not work fully... Merged
	  revisions 89630 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89630 | oej | 2007-11-27 16:23:17 +0100 (Tis, 27 Nov 2007) | 12
	  lines If we get a codec offer using a well-known payload type,
	  but using it for another codec that we don't know, Asterisk did
	  not remove that codec from the list. With this patch, we remove
	  the codec from audio and video rtp objects and deny it ever
	  existed. Thanks to lasse for testing. (closes issue #11376)
	  Reported by: lasse Patches: bug11376.txt uploaded by oej (license
	  306) Tested by: lasse ........

2007-11-27 19:12 +0000 [r89683]  Jason Parker <jparker@digium.com>

	* include/asterisk/strings.h: Add an S_COR macro, which is similar
	  to the existing S_OR macro, except with an additional boolean
	  arg. A hack such as: foo ? S_OR(bar, "baz") : "baz" becomes:
	  S_COR(foo, bar, "baz")

2007-11-27 18:50 +0000 [r89682]  Steve Murphy <murf@digium.com>

	* res/ael/ael.y, pbx/ael/ael-test/ref.ael-test11,
	  pbx/ael/ael-test/ref.ael-test20, pbx/ael/ael-test/ref.ael-test14,
	  pbx/ael/ael-test/ref.ael-test15, pbx/ael/ael-test/ref.ael-ntest9,
	  pbx/ael/ael-test/ref.ael-test16, pbx/ael/ael-test/ref.ael-test18,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-ntest10, res/ael/ael.tab.c,
	  pbx/ael/ael-test/ref.ael-test1, pbx/ael/ael-test/ref.ael-ntest12,
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-ntest22,
	  res/ael/ael_lex.c, pbx/ael/ael-test/ref.ael-test3,
	  pbx/ael/ael-test/ref.ael-test4, pbx/ael/ael-test/ref.ael-test5,
	  pbx/ael/ael-test/ref.ael-test6, res/ael/ael.flex,
	  pbx/ael/ael-test/ref.ael-test7, pbx/ael/ael-test/ref.ael-test8:
	  made AEL 8-bit transparent; mainly the lexer was tossing chars
	  with the hi-order bit set. Not nice. Also, allow @ in extension
	  names, and a backslash, also.

2007-11-27 17:01 +0000 [r89637]  Joshua Colp <jcolp@digium.com>

	* main/utils.c: Ensure the value returned from ast_random is
	  between 0 and RAND_MAX on 64-bit platforms. (closes issue #11348)
	  Reported by: sperreault

2007-11-27 16:13 +0000 [r89635]  Russell Bryant <russell@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 89634 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89634 | russell | 2007-11-27 10:12:33 -0600 (Tue, 27 Nov 2007) |
	  3 lines Add a note to the sample voicemail config noting that
	  when using IMAP storage, only the first format specified will be
	  attached to the message. ........

2007-11-27 15:41 +0000 [r89632]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_env.c: Merged revisions 89631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89631 | tilghman | 2007-11-27 09:38:03 -0600 (Tue, 27 Nov 2007)
	  | 3 lines Default result of STAT should be "0" not "". Reported
	  via the -users mailing list, fixed by me. ........

2007-11-27 07:36 +0000 [r89625]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Merged revisions 89624 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89624 | oej | 2007-11-27 08:34:19 +0100 (Tis, 27 Nov
	  2007) | 6 lines Clarify limitonpeers=yes (closes issue #11304)
	  Reported by: pj ........

2007-11-27 06:47 +0000 [r89623]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, main/cdr.c, /, configs/cdr.conf.sample,
	  include/asterisk/cdr.h: Merged revisions 89622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89622 | murf | 2007-11-26 23:24:02 -0700 (Mon, 26 Nov 2007) | 1
	  line closes issue #11379; OK, this is an attempt to make both
	  sides happy. To the cdr.conf file, I added the option
	  'unanswered', which defaults to 'no'. In this mode, you will see
	  a cdr for a call, whether it was answered or not. The disposition
	  will be NO ANSWER or ANSWERED, as appropriate. The src is as
	  you'd expect, the destination channel will be one of the channels
	  from the Dial() call, usually the last in the list if more than
	  one chan was specified. With unanswered set to 'yes', you will
	  still see this cdr entry in both cases. But in the case where the
	  dial timed out, you will also see a cdr for each line attempted,
	  marked NO ANSWER, with no destination channel name. The new
	  option defaults to 'no', so you don't see the pesky extra cdr's
	  by default, and you will not see the irritating 'not posted'
	  messages. ........

2007-11-26 23:15 +0000 [r89617-89621]  Mark Michelson <mmichelson@digium.com>

	* pbx/ael/ael-test/ael-test19/extensions.ael,
	  pbx/ael/ael-test/ael-vtest13/extensions.ael, doc/osp.txt,
	  pbx/ael/ael-test/ael-test3/extensions.ael,
	  pbx/ael/ael-test/ref.ael-vtest13,
	  pbx/ael/ael-test/ael-test7/extensions.ael: Change all instances
	  of "CALLERID(number)" to "CALLERID(num)" for consistency's sake
	  (closes issue #11381, reported and patched by jon)

	* /, apps/app_playback.c: Merged revisions 89618 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89618 | mmichelson | 2007-11-26 17:10:49 -0600 (Mon, 26 Nov
	  2007) | 7 lines After issuing a "say load new", if a caller hangs
	  up during the middle of playback of a number, app_playback will
	  continue to try to play the remaining files. With this change, no
	  more files will be played back upon hangup. (closes issue #11345,
	  reported and patched by IgorG) ........

2007-11-26 22:52 +0000 [r89615]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: Update the configure script check for
	  libpri to check for the newest function that was just added.
	  Cresl1n, please keep this in mind when making these changes to
	  libpri or libss7.

2007-11-26 21:23 +0000 [r89613]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, configs/sip.conf.sample: Rename
	  "limitonpeer" to "counteronpeer" since the call-limit is
	  deprecated. Both still works in this version.

2007-11-26 21:14 +0000 [r89612]  Joshua Colp <jcolp@digium.com>

	* main/dial.c, /: Merged revisions 89610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89610 | file | 2007-11-26 17:10:29 -0400 (Mon, 26 Nov 2007) | 2
	  lines Fix issues with async dialing with an application
	  executing. The application has to be terminated and control
	  returned to the thread before hanging things up. (issue #BE-252)
	  ........

2007-11-26 21:12 +0000 [r89606-89611]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Formatting, doxygenification

	* channels/chan_sip.c: Formatting changes, cleaning up some code

	* include/asterisk/doxyref.h, channels/chan_sip.c: Start using
	  Doxygen groupings to group variables and defines.

	* apps/app_meetme.c, UPGRADE.txt, CHANGES, main/cli.c: - Mark
	  "concise" as deprecated - Restructure other changes to
	  UPGRADE.txt and CHANGES We're still looking for scripts that
	  replace asterisk -rx "show shannels concise" by using the manager
	  interface, but still produces the same output. Anyone?

2007-11-26 18:11 +0000 [r89600-89602]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c, apps/app_queue.c: Perform some module use
	  counting audits. This is now done outside the scope of the
	  application/dialplan function so they do not need to worry about
	  it.

	* /, res/res_features.c: Merged revisions 89599 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89599 | file | 2007-11-26 14:02:56 -0400 (Mon, 26 Nov 2007) | 6
	  lines Add module counting removal for error conditions. (closes
	  issue #11333) Reported by: Laureano Patches:
	  res_features_v2.c.patch uploaded by Laureano (license 265)
	  ........

2007-11-26 17:49 +0000 [r89596]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 89594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89594 | russell | 2007-11-26 11:41:04 -0600 (Mon, 26 Nov 2007) |
	  3 lines Add channel locking to a function that needed to be doing
	  it. This is just a little something I noticed while working on a
	  completely unrelated issue. ........

2007-11-26 17:46 +0000 [r89595]  Steve Murphy <murf@digium.com>

	* utils/ael_main.c, utils/conf2ael.c, utils/check_expr.c: closes
	  issue #11341; made changes to make utils again right with the
	  MTX_PROFILE world.

2007-11-26 17:38 +0000 [r89593]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 89592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89592 | file | 2007-11-26 13:36:45 -0400 (Mon, 26 Nov 2007) | 6
	  lines Use ast_free to free memory, or else we shall implode if
	  MALLOC_DEBUG is enabled. (closes issue #11347) Reported by: ys
	  Patches: pbx.pbx_config.c.diff uploaded by ys (license 281)
	  ........

2007-11-26 17:26 +0000 [r89591]  Steve Murphy <murf@digium.com>

	* main/hashtab.c: closes issue #11356; Many thanks to snuffy for
	  his code review and changes to cut down duplication. I tested
	  this against hashtest, and it passes. I reviewed the changes, and
	  they look reasonable. I had to remove a few const decls to make
	  things compile on my workstation,

2007-11-26 17:25 +0000 [r89590]  Russell Bryant <russell@digium.com>

	* Makefile: make sure we check to see if the configure script has
	  been executed on a new checkout or after a distclean

2007-11-26 17:23 +0000 [r89589]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 89587 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89587 | file | 2007-11-26 13:20:58 -0400 (Mon, 26 Nov
	  2007) | 6 lines Close the audio file before sending it to the
	  post processing application. (closes issue #11357) Reported by:
	  reformed Patches: mixmonitor.patch uploaded by reformed (license
	  330) ........

2007-11-26 17:21 +0000 [r89588]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/app.c, apps/app_controlplayback.c: Merged revisions 89586
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89586 | kpfleming | 2007-11-26 11:20:36 -0600 (Mon, 26 Nov 2007)
	  | 2 lines when parsing application options that take arguments,
	  don't indicate that the option was supplied unless a
	  non-zero-length argument was found for it ........

2007-11-26 16:24 +0000 [r89583]  Steve Murphy <murf@digium.com>

	* main/pbx.c, CHANGES, configs/extensions.conf.sample: Thanks to
	  pnlarsson for noting the spelling error in the cli commands.
	  Also, added some verbage about the new algorithm to CHANGES.

2007-11-26 16:20 +0000 [r89582]  Joshua Colp <jcolp@digium.com>

	* main/utils.c: Revert change for 11348 until it can be looked at
	  even more.

2007-11-26 15:50 +0000 [r89581]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 89580 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89580 | mmichelson | 2007-11-26 09:48:06 -0600 (Mon, 26 Nov
	  2007) | 6 lines Revert vmu->email back to an empty string if it
	  was empty when imap_store_file was called. This prevents sending
	  a duplicate e-mail. (closes issue #11204, reported by spditner,
	  patched by me) ........

2007-11-26 15:36 +0000 [r89570-89578]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 89577 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89577 | file | 2007-11-26 11:34:38 -0400 (Mon, 26 Nov 2007) | 6
	  lines If channel allocation fails because the alert pipe could
	  not be created also free the scheduler context. (closes issue
	  #11355) Reported by: eliel Patches: main.channel.c.patch uploaded
	  by eliel (license 64) ........

	* main/utils.c: Make the behavior of using /dev/urandom for random
	  numbers the same as random(). (closes issue #11348) Reported by:
	  sperreault Patches: ast_random2.diff uploaded by sperreault
	  (license 252)

	* channels/chan_sip.c: Instead of printing out one codec in sip
	  show channels print out all of the native ones (this is for
	  video). (closes issue #11366) Reported by: ovi

	* /, apps/app_meetme.c: Merged revisions 89571 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89571 | file | 2007-11-26 10:41:03 -0400 (Mon, 26 Nov 2007) | 4
	  lines When unloading app_meetme destroy any auto created contexts
	  created by SLA. (closes issue #11367) Reported by: eliel ........

	* apps/app_controlplayback.c: Don't crash if the 'o' option of
	  ControlPlayback is used without any value. (closes issue #11375)
	  Reported by: johan

2007-11-25 21:12 +0000 [r89564-89566]  Olle Johansson <oej@edvina.net>

	* channels/chan_usbradio.c: Formatting changes

	* main/channel.c, include/asterisk/channel.h: Try to get channel.h
	  and channel.c aligned in regards to ast_set_callerid as well as
	  change name of variables to follow the rest of the naming.

2007-11-25 17:50 +0000 [r89560-89561]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/res_odbc.h, res/res_config_odbc.c, /,
	  res/res_odbc.c, configs/res_odbc.conf.sample: Merged revisions
	  89559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89559 | tilghman | 2007-11-25 11:17:10 -0600 (Sun, 25 Nov 2007)
	  | 14 lines We previously attempted to use the ESCAPE clause to
	  set the escape delimiter to a backslash. Unfortunately, this does
	  not universally work on all databases, since on databases which
	  natively use the backslash as a delimiter, the backslash itself
	  needs to be delimited, but on other databases that have no
	  delimiter, backslashing the backslash causes an error. So the
	  only solution that I can come up with is to create an option in
	  res_odbc that explicitly specifies whether or not backslash is a
	  native delimiter. If it is, we use it natively; if not, we use
	  the ESCAPE clause to make it one. Reported by: elguero Patch by:
	  tilghman (Closes issue #11364) ........

	* channels/chan_sip.c: Typo (someone needs to test compile before
	  committing his changes)

2007-11-25 12:18 +0000 [r89551-89557]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: More doxygen changes

	* channels/chan_sip.c: Housekeeping

	* channels/chan_sip.c: Formatting, doxygen updates

	* channels/chan_sip.c, configs/sip.conf.sample, CHANGES: -
	  Deprecate "call-limit" in chan_sip. No other channel driver
	  enforces call-limits and we now have the groupcount system to
	  implement call-limits in the dialplan. You can use the "setvar"
	  option in realtime/sip.conf to set limits per device. - Implement
	  "callcounter" as a new option to enable the call counting we need
	  to report device status to queue, manager and SIP subscriptions.
	  The call counter setting is now enabled in the code by setting
	  the device call-limit to 999. When we remove the call limit, we
	  can simply enable this with a boolean setting.

	* channels/chan_sip.c, include/asterisk/channel.h: Housekeeping...
	  - Fix typo in chan_sip - Remove changes to caller ID structure,
	  moving it to branch (russellb)

2007-11-24 21:00 +0000 [r89547]  Steve Murphy <murf@digium.com>

	* main/pbx.c, include/asterisk/pbx.h, pbx/pbx_config.c,
	  configs/extensions.conf.sample: closes issue #11363; where the
	  pattern _20x. buried in an included context, didn't match 2012;
	  There were a small set of problems to fix: 1. I needed NOT to
	  score patterns unless you are at the end of the data string. 2.
	  Capital N,X,Z and small n,x,z are OK in patterns. I canonicalize
	  the patterns in the trie to caps. 3. When a pattern ends with dot
	  or exclamation, CANMATCH/MATCHMORE should always report this
	  pattern, no matter the length. With this commit, I also supplied
	  the wish of Luigi, where the user can select which pattern
	  matching algorithm to use, the old (legacy) pattern matcher, or
	  the new, trie based matcher. The OLD matcher is the default. A
	  new [general] section variable, extenpatternmatchnew, is added to
	  the extensions.conf, and the example config has it set to false.
	  If true, the new matcher is used. In all other respects, the
	  context/exten structs are the same; the tries and hashtabs are
	  formed, but in the new mode the tries are not used. A new CLI
	  command 'dialplan set extenpatternmatch true/false' is provided
	  to allow switching at run time. I beg users that are forced to
	  return to the old matcher to please report the reason in the bug
	  tracker. Measured the speed benefit of the new matcher against an
	  impossibly large context with 10,000 extensions: the new matcher
	  is 374 times faster.

2007-11-24 17:07 +0000 [r89546]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_adsi.c: Merged revisions 89545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89545 | tilghman | 2007-11-24 10:59:59 -0600 (Sat, 24 Nov 2007)
	  | 5 lines Free some frames that would otherwise leak on error.
	  Reported by: Laureano Patch by: Laureano,tilghman (Closes issue
	  #11351) ........

2007-11-24 16:53 +0000 [r89544]  Steve Murphy <murf@digium.com>

	* main/app.c: Added <sys/file.h> include to allow trunk to compile.
	  Hope this doesn't louse thing up.

2007-11-24 13:57 +0000 [r89542-89543]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_h323.c: remove a DEBUG_THREADS message that
	  accesses private lock fields. If needed, the code to extract this
	  information should be implemented in some generic header or
	  library and the function called here. (closed bug #11362)

	* main/acl.c, main/http.c, main/app.c: remove some unnecessary
	  includes

2007-11-24 06:24 +0000 [r89535-89541]  Tilghman Lesher <tlesher@digium.com>

	* /, main/app.c, apps/app_voicemail.c: Merged revisions 89540 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89540 | tilghman | 2007-11-24 00:19:23 -0600 (Sat, 24 Nov 2007)
	  | 9 lines Currently, zero-length voicemail messages cause a
	  hangup in VoicemailMain. This change fixes the problem, with a
	  multi-faceted approach. First, we do our best to avoid these
	  messages from being created in the first place, and second, if
	  that fails, we detect when the voicemail message is zero-length
	  and avoid exiting at that point. Reported by: dtyoo Patch by:
	  gkloepfer,tilghman (Closes issue #11083) ........

	* main/manager.c, /: Merged revisions 89536 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89536 | tilghman | 2007-11-23 11:18:26 -0600 (Fri, 23 Nov 2007)
	  | 10 lines Up until this point, the XML output of the manager has
	  been technically invalid, due to the repetition of certain
	  parameters in a single event. This caused various issues for XML
	  parsers, some of which refused to parse at all, given the
	  invalidity of the rendered XML. So this commit fixes the XML
	  output, ensuring that each entity parameter has a unique name,
	  thus ensuring valid XML. Reported by: msetim Patch by: tilghman
	  (Closes issue #10220) ........

	* res/res_config_odbc.c, /: Merged revisions 89534 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89534 | tilghman | 2007-11-23 11:05:10 -0600 (Fri, 23
	  Nov 2007) | 5 lines Use ESCAPE clause for the first parameter,
	  not just 2nd-Nth parameters. Reported by: apsaras Patch by:
	  tilghman (Closes issue #11353) ........

2007-11-23 15:54 +0000 [r89532-89533]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: put in the necessary hooks for video support
	  in the console. This is a NOP as far as the current code is
	  concerned, but there is already support in ./configure and the
	  Makefiles for the various libraries used by console_video.c (not
	  yet in the tree) so addition is trivial.

	* channels/chan_sip.c: set rtpmap video info according to what is
	  read from SDP; make the format explicit in a debug message; print
	  the audio instead of aggregated peer capability in a debugging
	  msg.

2007-11-23 09:40 +0000 [r89531]  Olle Johansson <oej@edvina.net>

	* include/asterisk/channel.h: Let's start with implementing the
	  base architecture for UTF8 caller ID's so we can handle multiple
	  formats properly. This is not carved in stone, but a proposal to
	  start with. We need to add support for transliterations as well
	  as UTF8 handling, propably with libiconv. Murf is looking into
	  that for the dialplan.

2007-11-23 09:03 +0000 [r89530]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/image.h, formats/format_jpeg.c: formatting
	  cleanup on the header, normalization of the assignment of
	  descriptor fields.

2007-11-23 02:37 +0000 [r89529]  Russell Bryant <russell@digium.com>

	* configs/agents.conf.sample, /: Merged revisions 89527 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89527 | russell | 2007-11-22 12:29:41 -0500 (Thu, 22 Nov 2007) |
	  3 lines mvanbaak pointed out a spelling error in this sample
	  configuration file. While I was at it, I went ahead and tweaked
	  it a little bit more. ........

2007-11-22 07:10 +0000 [r89514-89526]  Luigi Rizzo <rizzo@icir.org>

	* doc/CODING-GUIDELINES: new info on the management of headers

	* apps/app_echo.c, apps/app_sendtext.c, apps/app_verbose.c,
	  apps/app_milliwatt.c: more header removal

	* include/asterisk/channel.h: formatting cleanup

	* include/asterisk.h, apps/app_read.c, apps/app_record.c,
	  apps/app_echo.c, apps/app_readexten.c,
	  include/asterisk/channel.h, apps/app_system.c,
	  apps/app_transfer.c, res/ael/pval.c, include/asterisk/app.h,
	  apps/app_dumpchan.c, include/asterisk/module.h, apps/app_url.c,
	  include/asterisk/pbx.h, apps/app_senddtmf.c, pbx/pbx_config.c,
	  apps/app_mixmonitor.c, apps/app_stack.c, apps/app_verbose.c,
	  apps/app_milliwatt.c, apps/app_cdr.c, apps/app_while.c: shuffle a
	  little bit the content of header files to reduce dependencies. In
	  this commit: - move the ast_register/unregister_app functions to
	  module.h to avoid the need to include pbx.h for the simpler apps;
	  - move the ast_group structure to channel.h to remove the
	  dependency of app.h on linkedlists.h Note, this is a long process
	  that I am doing in small steps. The main difficulty is that now
	  for each subsystem we have a single header (e.g. channel.h)
	  included by the subsystem provider (usually one file, e.g.
	  channel.c) and by its clients (dozens of them, e.g. we have some
	  70+ apps and 30+ functions). This requires the clients to include
	  all the extra headers required by the provider (eg. lock.h,
	  linkedlists.h, definitions of substructures...) even though many
	  of the clients would be just happy with opaque struct
	  declarations and function prototypes. The long term plan is to
	  eventually rectify this structure so that the compilation can
	  become faster, and also APIs are more stable.

	* funcs/func_md5.c, funcs/func_module.c, funcs/func_blacklist.c,
	  apps/app_url.c, funcs/func_sha1.c, funcs/func_global.c: remove
	  some useless includes

	* include/asterisk/audiohook.h, apps/app_dictate.c,
	  apps/app_readexten.c, apps/app_directory.c, apps/app_senddtmf.c,
	  apps/app_mixmonitor.c, apps/app_stack.c,
	  apps/app_controlplayback.c: more removal of redundant headers

	* apps/app_read.c, apps/app_echo.c, apps/app_record.c,
	  apps/app_userevent.c, apps/app_image.c, apps/app_system.c,
	  apps/app_verbose.c, apps/app_milliwatt.c, apps/app_playback.c,
	  apps/app_while.c: remove redundant headers

	* main/file.c, main/netsock.c: more removal of fcntl.h and other
	  system headers

	* codecs/codec_lpc10.c, codecs/codec_g722.c, codecs/codec_a_mu.c,
	  codecs/codec_speex.c, codecs/codec_alaw.c, codecs/codec_adpcm.c,
	  res/res_crypto.c, codecs/codec_g726.c, apps/app_test.c,
	  formats/format_ogg_vorbis.c, codecs/codec_gsm.c, res/res_agi.c,
	  apps/app_mp3.c, main/app.c, codecs/codec_ulaw.c,
	  codecs/codec_ilbc.c: remove a number of #include <fcntl.h> which
	  are either useless or done elsewhere

	* formats/format_sln.c, formats/format_wav.c,
	  formats/format_ogg_vorbis.c, include/asterisk/_private.h,
	  formats/format_wav_gsm.c, formats/format_ilbc.c,
	  include/asterisk/file.h, formats/format_vox.c,
	  formats/format_pcm.c, main/file.c, formats/format_h263.c,
	  formats/format_g723.c, formats/format_h264.c,
	  include/asterisk/frame.h, formats/format_jpeg.c,
	  formats/format_g726.c, formats/format_gsm.c,
	  formats/format_g729.c: implement the split of file.h and
	  mod_format.h

	* include/asterisk/mod_format.h (added): Add a specific header for
	  providers of file and format handling routines, moving here
	  structs and function declarations formerly in file.h

2007-11-21 23:54 +0000 [r89513]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, channels/chan_sip.c, channels/chan_skinny.c,
	  res/res_features.c, apps/app_queue.c, channels/chan_iax2.c:
	  closes issue #11285, where an unload of a module that creates a
	  dialplan context, causes a crash when you do a 'dialplan show' of
	  that context. This is because the registrar string is defined in
	  the module, and the stale pointer is traversed. The reporter
	  offered a patch that would always strdup the registrar string,
	  which is practical, but I preferred to destroy the created
	  contexts in each module where one is created. That seemed more
	  symmetric. There were only 6 place in asterisk where this is
	  done: chan_sip, chan_iax2, chan_skinny, res_features, app_dial,
	  and app_queue. The two apps destroyed the context, but left the
	  contexts. All is fixed now and unloads should be dialplan
	  friendly.

2007-11-21 23:24 +0000 [r89511-89512]  Luigi Rizzo <rizzo@icir.org>

	* funcs/func_rand.c, cdr/cdr_sqlite3_custom.c, apps/app_readfile.c,
	  channels/chan_local.c, apps/app_record.c, funcs/func_strings.c,
	  apps/app_sayunixtime.c, apps/app_test.c,
	  apps/app_alarmreceiver.c, cdr/cdr_adaptive_odbc.c,
	  apps/app_image.c, apps/app_chanisavail.c, apps/app_ices.c,
	  channels/chan_iax2.c, apps/app_exec.c, pbx/pbx_loopback.c,
	  pbx/pbx_spool.c, channels/chan_skinny.c, apps/app_dumpchan.c,
	  apps/app_zapscan.c, apps/app_zapras.c, pbx/pbx_realtime.c,
	  channels/chan_alsa.c, apps/app_amd.c, apps/app_url.c,
	  apps/app_externalivr.c, cdr/cdr_odbc.c, apps/app_dial.c,
	  funcs/func_timeout.c, apps/app_page.c, apps/app_privacy.c,
	  channels/chan_agent.c, apps/app_disa.c, apps/app_morsecode.c,
	  channels/iax2-provision.c, funcs/func_cut.c,
	  apps/app_talkdetect.c, apps/app_transfer.c, apps/app_db.c,
	  apps/app_playback.c, funcs/func_curl.c, channels/chan_misdn.c,
	  apps/app_zapbarge.c, apps/app_waitforring.c, apps/app_sendtext.c,
	  channels/chan_features.c, apps/app_macro.c, funcs/func_iconv.c,
	  pbx/pbx_config.c, apps/app_mixmonitor.c, apps/app_chanspy.c,
	  apps/app_voicemail.c, channels/chan_unistim.c,
	  channels/chan_vpb.cc, apps/app_meetme.c, apps/app_authenticate.c,
	  apps/app_readexten.c, funcs/func_vmcount.c,
	  channels/chan_gtalk.c, cdr/cdr_pgsql.c, apps/app_followme.c,
	  cdr/cdr_radius.c, apps/app_controlplayback.c, cdr/cdr_csv.c,
	  channels/chan_phone.c, funcs/func_enum.c, apps/app_osplookup.c,
	  funcs/func_odbc.c, apps/app_mp3.c, apps/app_minivm.c,
	  apps/app_rpt.c, channels/chan_mgcp.c, apps/app_parkandannounce.c,
	  apps/app_while.c, apps/app_adsiprog.c, apps/app_nbscat.c,
	  funcs/func_version.c, funcs/func_db.c, channels/chan_zap.c,
	  apps/app_read.c, channels/chan_sip.c, apps/app_festival.c,
	  apps/app_waitforsilence.c, funcs/func_lock.c, pbx/pbx_lua.c,
	  apps/app_system.c, apps/app_getcpeid.c, apps/app_queue.c,
	  channels/chan_oss.c, cdr/cdr_tds.c, funcs/func_realtime.c,
	  channels/chan_jingle.c, channels/chan_usbradio.c,
	  apps/app_channelredirect.c, apps/app_flash.c,
	  apps/app_directed_pickup.c, funcs/func_blacklist.c,
	  channels/chan_h323.c, pbx/pbx_dundi.c, apps/app_sms.c,
	  channels/chan_nbs.c, apps/app_senddtmf.c, funcs/func_callerid.c,
	  apps/app_verbose.c, apps/app_stack.c, pbx/pbx_gtkconsole.c:
	  remove another set of redundant #include "asterisk/options.h"

	* main/udptl.c, main/autoservice.c, main/frame.c, res/res_snmp.c,
	  main/say.c, res/res_features.c, main/devicestate.c, main/utils.c,
	  res/res_musiconhold.c, res/res_jabber.c, main/indications.c,
	  main/enum.c, res/res_config_sqlite.c, main/config.c,
	  main/loader.c, main/term.c, main/cli.c, main/io.c,
	  main/channel.c, main/cdr.c, main/dial.c, res/res_smdi.c,
	  res/res_config_odbc.c, main/manager.c, res/res_agi.c,
	  main/http.c, main/logger.c, res/res_realtime.c, main/app.c,
	  main/image.c, main/dns.c, main/db.c, res/res_speech.c,
	  main/sched.c, main/pbx.c, res/res_config_pgsql.c, main/dnsmgr.c,
	  main/translate.c, res/res_crypto.c, res/res_adsi.c,
	  main/jitterbuf.c, main/acl.c, formats/format_ogg_vorbis.c,
	  res/res_ael_share.c, res/res_monitor.c, main/rtp.c,
	  main/netsock.c, main/srv.c, main/hashtab.c, main/privacy.c,
	  main/adsistub.c, main/abstract_jb.c, main/file.c,
	  main/callerid.c, main/astmm.c, main/audiohook.c,
	  formats/format_g726.c, main/asterisk.c, res/res_odbc.c,
	  main/dsp.c: remove a bunch of useless #include "options.h"

2007-11-21 22:37 +0000 [r89509-89510]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Remove unneccessary explicit case for BRI

	* channels/chan_zap.c: Take some debug code out :-)

2007-11-21 22:20 +0000 [r89508]  Luigi Rizzo <rizzo@icir.org>

	* main/cygload.c: add a missing return

2007-11-21 22:07 +0000 [r89507]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add BRI support to chan_zap

2007-11-21 21:30 +0000 [r89506]  Luigi Rizzo <rizzo@icir.org>

	* utils/Makefile, configure, configure.ac: enable support for stack
	  backtrace for stuff built in utils/ (this was present in the main
	  tree but forgotten here).

2007-11-21 20:38 +0000 [r89505]  Steve Murphy <murf@digium.com>

	* main/pbx.c: closes issue #11290; the proposed patch was a good
	  guess, and would solve the bug to some extent, but was really
	  masking the real issue, that there were bad entries in the table.
	  This fix removes the condition that the hashtab updates be done
	  on exten removal only when the pattern_tree was present, which is
	  silly. The operations that apply to the pattern tree are instead
	  made conditional. Also, threw back in routines that kpfleming
	  deleted because of probs in the 64-bit world. Tested on both 32
	  and 64-bit machines (compile). Tested the reload problem with
	  over 20 reloads, and no problems. If you find more problems,
	  please reopen 11290.

2007-11-21 20:22 +0000 [r89504]  Terry Wilson <twilson@digium.com>

	* res/res_features.c: Simplify comparison in parking fix

2007-11-21 19:28 +0000 [r89494-89496]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 89495 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89495 | mmichelson | 2007-11-21 13:27:51 -0600 (Wed, 21 Nov
	  2007) | 3 lines Fix a small error I made in my previous commit
	  ........

	* /, apps/app_queue.c: Merged revisions 89493 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89493 | mmichelson | 2007-11-21 13:24:22 -0600 (Wed, 21 Nov
	  2007) | 5 lines Changing an inaccurate debug message to be less
	  inaccurate. Under the circumstances, this message would always
	  report that there were 0 members available, even though that may
	  not be true. ........

2007-11-21 19:20 +0000 [r89492]  Terry Wilson <twilson@digium.com>

	* /, res/res_features.c: Merged revisions 89491 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89491 | twilson | 2007-11-21 12:59:27 -0600 (Wed, 21 Nov 2007) |
	  4 lines If a channel gets masqueraded in the middle of a park,
	  don't play the announcement to the masqueraded channel, and dial
	  back to the original channel on timeout. ........

2007-11-21 18:52 +0000 [r89490]  Russell Bryant <russell@digium.com>

	* main/dsp.c: Remove obsolete OLD_DSP_ROUTINES code. Also, remove
	  the FAX_DETECT define and only do the calculations if fax
	  detection is enabled on the dsp. (closes issue #11331) Reported
	  by: dimas Patches: dsp.patch uploaded by dimas (license 88)

2007-11-21 18:38 +0000 [r89489]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_read.c, UPGRADE.txt, CHANGES: Change Read to set
	  READSTATUS as an indication of the result Also, some cleanup to
	  CHANGES. Reported by: michael-fig Patch by: michael-fig,tilghman
	  (Closes issue #11004)

2007-11-21 18:24 +0000 [r89488]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: fix a small gramatical error in a comment

2007-11-21 18:19 +0000 [r89487]  Mark Michelson <mmichelson@digium.com>

	* main/utils.c: There existed about a 1 in 4 billion chance that
	  reading from /dev/urandom would return LONG_MIN (1 in 9
	  quintillion if using 64-bit longs). Since there is no positive
	  equivalent of LONG_MIN, the result of labs() in this case is
	  unpredictable. This fixes that situation. (closes issue #11336,
	  reported and patched by sperreault)

2007-11-21 16:24 +0000 [r89484]  Russell Bryant <russell@digium.com>

	* channels/chan_unistim.c: Fix some code that was supposed to
	  ensure that a buffer was terminated, but was writing to the wrong
	  byte. Also, remove some non-thread safe test code. (closes issue
	  #11317) Reported by: IgorG Patches: unistim-2.patch uploaded by
	  IgorG (license 20) - additional changes by me

2007-11-21 16:08 +0000 [r89483]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c: I introduced a deadlock avoidance into 1.4, which I
	  attempted to port to trunk as well. Unfortunately, since trunk
	  uses read/write locks for the context lock, it means that I have
	  actually *introduced* a deadlock condition since they are not
	  recursive. Removing this change for now and will look into
	  introducing a different one.

2007-11-21 16:07 +0000 [r89480-89482]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk.h, include/asterisk/compat.h, utils/ael_main.c,
	  utils/conf2ael.c: move these forward declarations back to
	  asterisk.h where they belong... even though asterisk.h includes
	  compat.h, these declarations have nothing to do with the being
	  platform-compatible and are directly related to being part of
	  Asterisk

	* channels/chan_usbradio.c: get this to actually compile...

	* main/pbx.c: remove some debugging code that doesn't compile on
	  64-bit platforms

2007-11-21 15:17 +0000 [r89478-89479]  Steve Murphy <murf@digium.com>

	* res/res_features.c: OOOps! All the debug stuff I inserted was
	  accidentally committed. I hereby revert it.

	* main/hashtab.c, res/res_features.c: closes issue #11265; Thanks
	  to snuffy for his work on neatening up the code and removing
	  duplicated code.

2007-11-21 08:28 +0000 [r89475-89477]  Luigi Rizzo <rizzo@icir.org>

	* channels/gentone-ulaw.c (removed): remove this file, it is not
	  used anywhere.

	* main/astmm.c: add missing paths.h

	* configure, include/asterisk/autoconfig.h.in, configure.ac: add
	  check for video4linux

2007-11-21 01:09 +0000 [r89474]  Steve Murphy <murf@digium.com>

	* main/pbx.c: A free in add_pri was ultimately the source of the
	  grief we were having with parking. This set of changes fixes that
	  problem, and introduces some more error messages, and puts debugs
	  into ifdefs for what could be short-term usage. Txs to Terry W.
	  for his help, guidance, and especially patience.

2007-11-21 00:23 +0000 [r89472-89473]  Luigi Rizzo <rizzo@icir.org>

	* main/sha1.c, agi/eagi-test.c, utils/smsq.c, utils/hashtest2.c,
	  main/minimime/mm.h, utils/check_expr.c: more header
	  removal/normalization

	* configure, include/asterisk/autoconfig.h.in, configure.ac: X11
	  checks (at least some - for other platforms with unusual X11
	  locations you might need to add more directories)

2007-11-21 00:21 +0000 [r89470]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c, CHANGES: Merge changes from
	  team/russell/sla_trunk_moh ... * Added the ability to specify the
	  music on hold class used to play into the conference when there
	  is only one member and the M option is used. * Added the ability
	  to specify a music on hold class to play instead of ringing for
	  the SLATrunk application. (patched by me, and tested internally)

2007-11-21 00:20 +0000 [r89469]  Luigi Rizzo <rizzo@icir.org>

	* makeopts.in: complete support for X11

2007-11-20 23:29 +0000 [r89467-89468]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_meetme.c, cdr/cdr_sqlite.c, pbx/pbx_lua.c: Make trunk
	  build again

	* main/say.c: Add support for new recorded character sounds Closes
	  issue #5208

2007-11-20 23:16 +0000 [r89465-89466]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_unistim.c, cdr/cdr_sqlite3_custom.c,
	  apps/app_dictate.c, apps/app_test.c, apps/app_ices.c,
	  apps/app_followme.c, channels/chan_iax2.c, main/config.c,
	  main/loader.c, main/cli.c, cdr/cdr_csv.c, main/channel.c,
	  main/manager.c, pbx/pbx_spool.c, include/asterisk/compat.h,
	  res/res_agi.c, apps/app_minivm.c, main/logger.c, main/http.c,
	  main/app.c, main/image.c, apps/app_directory.c, main/db.c,
	  cdr/cdr_custom.c, apps/app_adsiprog.c, apps/app_dial.c,
	  include/asterisk/utils.h, include/asterisk.h, main/pbx.c,
	  channels/chan_sip.c, res/res_crypto.c,
	  include/asterisk/channel.h, res/res_monitor.c,
	  include/asterisk/paths.h, main/file.c, apps/app_sms.c,
	  include/asterisk/ael_structs.h, pbx/pbx_config.c,
	  apps/app_mixmonitor.c, apps/app_chanspy.c, apps/app_voicemail.c:
	  move asterisk/paths.h outside asterisk.h and into those files who
	  really need it.

	* main/pbx.c, include/asterisk.h, main/frame.c, main/dnsmgr.c,
	  main/threadstorage.c, main/devicestate.c,
	  include/asterisk/_private.h (added), main/astobj2.c,
	  main/loader.c, main/term.c, main/cli.c, main/channel.c,
	  main/manager.c, main/logger.c, build_tools/strip_nonapi,
	  main/event.c, main/asterisk.c, main/db.c: move internal function
	  declarations to include/asterisk/_private.h

2007-11-20 19:29 +0000 [r89464]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: i got a little carried away with commas
	  ...

2007-11-20 19:28 +0000 [r89463]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/module.h, build_tools/make_buildopts_h,
	  main/loader.c: switch compile-time option checking to string
	  storage mode in this branch too

2007-11-20 19:11 +0000 [r89460]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: fix the zaptel configure script check

2007-11-20 18:20 +0000 [r89459]  Luigi Rizzo <rizzo@icir.org>

	* acinclude.m4: the 'version' is now $7 not $6 (wait a bit before
	  regenerating configure, i have more changes)

2007-11-20 17:59 +0000 [r89458]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, /: Merged revisions 89457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89457 | mmichelson | 2007-11-20 11:50:31 -0600 (Tue, 20 Nov
	  2007) | 9 lines According to comments in main/pbx.c, it is
	  essential that if we are going to lock the conlock as well as the
	  hints lock, it must be locked in that respective order. In order
	  to prevent a potential deadlock, we need to lock the conlock
	  prior to locking the hints lock in ast_hint_state_changed (see
	  the call stack example on issue #11323 for how this can happen).
	  (closes issue #11323, reported by eelcob, suggestion for patch by
	  eelcob, patch by me) ........

2007-11-20 17:11 +0000 [r89454-89455]  Luigi Rizzo <rizzo@icir.org>

	* makeopts.in: prepare to support console_video

	* apps/Makefile, Makefile.moddir_rules, pbx/Makefile, res/Makefile,
	  channels/Makefile: Fix building of modules under cygwin. After
	  this commit we can actually load modules under windows, and we
	  can start debugging more interesting problems related to the load
	  order and functionality of modules.

2007-11-20 16:11 +0000 [r89453]  Mark Michelson <mmichelson@digium.com>

	* configs/sip.conf.sample: Changed occurrences of "busy-level" to
	  "busylevel" in sip.conf.sample in light of commit 89441. Thanks
	  to pj for pointing out the need for this (closes issue #11307,
	  reported by pj)

2007-11-20 15:39 +0000 [r89452]  Luigi Rizzo <rizzo@icir.org>

	* configure, configure.ac, acinclude.m4: add an argument for extra
	  headers to AC_EXT_LIB_CHECK, and on passing simplify the code.
	  Too bad that every time we need to regenerate configure...

2007-11-20 15:30 +0000 [r89451]  Steve Murphy <murf@digium.com>

	* /, doc/tex/queues-with-callback-members.tex: Merged revisions
	  89450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89450 | murf | 2007-11-20 08:22:08 -0700 (Tue, 20 Nov 2007) | 1
	  line closes issue #11324; break statements missing in switch
	  cases. ........

2007-11-20 15:00 +0000 [r89449]  Joshua Colp <jcolp@digium.com>

	* main/translate.c: Minor documentation tweak and if an incorrect
	  parameter is given to core show translation return the usage
	  information. (closes issue #11316) Reported by: eliel Patches:
	  translate.c.patch uploaded by eliel (license 64)

2007-11-20 14:54 +0000 [r89448]  Luigi Rizzo <rizzo@icir.org>

	* configure, acinclude.m4: comment a bit the code in acinclude.m4
	  There is still a lot of code to clean up there, but hopefully
	  this should clarify what goes on in there.

2007-11-20 14:49 +0000 [r89447]  Joshua Colp <jcolp@digium.com>

	* channels/h323/ast_h323.cxx: Include the compatibility header file
	  in ast_h323.cxx for compatibility reasons. (closes issue #11311)
	  Reported by: falves11

2007-11-20 14:44 +0000 [r89444-89446]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Fix sip show history. Closes issue #11312

	* channels/chan_sip.c: Change terminology a bit for CLI commands
	  handling SIP channels/calls/dialogs/whatever. Closes issue #11312

2007-11-20 07:42 +0000 [r89443]  Luigi Rizzo <rizzo@icir.org>

	* Makefile, main/Makefile, Makefile.moddir_rules: initial makefile
	  changes to build loadable modules under cygwin (not complete yet
	  - still need to sort out dependecies on res_*)

2007-11-20 00:17 +0000 [r89442]  Steve Murphy <murf@digium.com>

	* main/pbx.c: Get rid of some debug messages in pbx.c

2007-11-19 23:24 +0000 [r89441]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c, CHANGES: Changed the "busy-level" option in
	  sip.conf to "busylevel" to be more parallel with the SIPPEER()
	  argument of the same name. The deprecation procedure is not being
	  used here since this is a trunk-only option. (closes issue
	  #11307, reported by pj, patched by me)

2007-11-19 23:03 +0000 [r89439-89440]  Russell Bryant <russell@digium.com>

	* include/asterisk/module.h: Be a bit more pedantic about the type
	  for holding the md5 sum for the build options. Also, doxygenify
	  the comment.

	* funcs/func_sysinfo.c: Make the SYSINFO documentation reflect
	  which options were compiled in

2007-11-19 22:55 +0000 [r89438]  Steve Murphy <murf@digium.com>

	* main/pbx.c: These changes were made in response to
	  niklas@tese.se's letter of 11-17-2007, where he had 20 and 201 in
	  two different contexts, included in the same context. In that
	  particular case, we were behaving the same as 1.4, but after
	  experimenting, I quickly found that if 20 and 201 were in the
	  same extension, 1.4 would return 201, and this code returns 20.
	  These changes now enable the current code to replicate the
	  behavior of 1.4 in respect to MATCHMORE in cases like this.

2007-11-19 21:18 +0000 [r89430-89433]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_vpb.cc, channels/misdn_config.c, main/dsp.c:
	  another few errno.h removals

	* pbx/pbx_loopback.c, apps/app_zapbarge.c, pbx/pbx_spool.c,
	  apps/app_meetme.c, pbx/pbx_ael.c, pbx/pbx_lua.c,
	  pbx/pbx_realtime.c, pbx/pbx_dundi.c, apps/app_externalivr.c,
	  apps/app_directory.c, apps/app_system.c, pbx/pbx_config.c,
	  apps/app_milliwatt.c: more errno.h removal

	* funcs/func_sysinfo.c: remove unnecessary headers

	* funcs/func_base64.c, funcs/func_volume.c: remove some unnecessary
	  includes.

2007-11-19 20:13 +0000 [r89429]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_sip.c: Change delimiter of SIPPEER to be comma
	  (instead of pipe) and further deprecate the old ':' delimiter
	  Reported by: pj Patch by: tilghman Closes issue #11305

2007-11-19 19:51 +0000 [r89424-89428]  Luigi Rizzo <rizzo@icir.org>

	* codecs/codec_lpc10.c, codecs/codec_a_mu.c, codecs/codec_g722.c,
	  codecs/codec_adpcm.c, codecs/codec_alaw.c, codecs/codec_speex.c,
	  codecs/codec_g726.c, codecs/codec_gsm.c, codecs/codec_ulaw.c,
	  codecs/codec_ilbc.c, codecs/codec_zap.c: remove some useless
	  includes from codecs

	* formats/format_ilbc.c, formats/format_sln.c,
	  formats/format_vox.c, formats/format_wav.c, formats/format_pcm.c,
	  formats/format_ogg_vorbis.c, formats/format_g723.c,
	  formats/format_h263.c, formats/format_h264.c,
	  formats/format_wav_gsm.c, formats/format_g726.c,
	  formats/format_jpeg.c, formats/format_gsm.c,
	  formats/format_g729.c: format handlers don't need network, lock,
	  channel and scheduler headers

	* include/asterisk.h, include/asterisk/compat.h,
	  include/asterisk/lock.h, utils/extconf.c,
	  include/asterisk/abstract_jb.h: move the declaration of struct
	  ast_channel ast_frame and ast_module to compat.h so it is always
	  available - hopefully this will let us reduce the number of
	  inclusions of channel.h and frame.h

	* main/udptl.c, main/autoservice.c, funcs/func_rand.c,
	  cdr/cdr_sqlite3_custom.c, main/frame.c, funcs/func_module.c,
	  main/threadstorage.c, main/say.c, funcs/func_env.c,
	  funcs/func_strings.c, main/devicestate.c,
	  cdr/cdr_adaptive_odbc.c, main/indications.c, main/config.c,
	  main/loader.c, main/term.c, main/cli.c, funcs/func_shell.c,
	  main/http.c, cdr/cdr_odbc.c, main/db.c, cdr/cdr_manager.c,
	  main/sched.c, main/pbx.c, funcs/func_timeout.c,
	  funcs/func_math.c, funcs/func_cut.c, main/chanvars.c,
	  main/netsock.c, funcs/func_curl.c, main/srv.c, main/privacy.c,
	  funcs/func_cdr.c, funcs/func_channel.c, main/audiohook.c,
	  funcs/func_iconv.c, main/alaw.c, main/asterisk.c,
	  funcs/func_base64.c, funcs/func_md5.c, funcs/func_sysinfo.c,
	  main/utils.c, funcs/func_sha1.c, cdr/cdr_pgsql.c,
	  funcs/func_logic.c, cdr/cdr_radius.c, main/enum.c,
	  funcs/func_uri.c, main/io.c, cdr/cdr_csv.c, main/ulaw.c,
	  main/channel.c, main/cdr.c, funcs/func_enum.c, main/dial.c,
	  funcs/func_groupcount.c, main/manager.c, main/tdd.c,
	  funcs/func_odbc.c, cdr/cdr_sqlite.c, main/logger.c, main/app.c,
	  main/image.c, main/dns.c, cdr/cdr_custom.c, funcs/func_version.c,
	  funcs/func_db.c, main/dnsmgr.c, main/translate.c,
	  main/slinfactory.c, funcs/func_lock.c, main/acl.c, main/rtp.c,
	  cdr/cdr_tds.c, funcs/func_realtime.c, main/hashtab.c,
	  funcs/func_blacklist.c, main/abstract_jb.c, main/cryptostub.c,
	  main/adsistub.c, main/file.c, main/callerid.c, main/astmm.c,
	  funcs/func_callerid.c, main/dsp.c: another bunch of include
	  removals (errno.h and asterisk/logger.h)

	* channels/chan_local.c, apps/app_record.c,
	  apps/app_alarmreceiver.c, apps/app_chanisavail.c,
	  apps/app_ices.c, apps/app_exec.c, channels/chan_iax2.c,
	  channels/chan_skinny.c, formats/format_pcm.c,
	  apps/app_dumpchan.c, apps/app_zapras.c, formats/format_h263.c,
	  codecs/codec_g722.c, formats/format_wav.c, apps/app_softhangup.c,
	  codecs/codec_g726.c, formats/format_ogg_vorbis.c,
	  apps/app_morsecode.c, apps/app_talkdetect.c, apps/app_db.c,
	  apps/app_speech_utils.c, apps/app_sendtext.c,
	  formats/format_g726.c, apps/app_mixmonitor.c, res/res_odbc.c,
	  apps/app_voicemail.c, channels/chan_vpb.cc, formats/format_sln.c,
	  res/res_snmp.c, apps/app_dictate.c, apps/app_authenticate.c,
	  apps/app_readexten.c, codecs/codec_gsm.c, apps/app_userevent.c,
	  channels/chan_gtalk.c, res/res_jabber.c, apps/app_setcallerid.c,
	  res/res_config_odbc.c, apps/app_osplookup.c, apps/app_mp3.c,
	  apps/app_minivm.c, res/res_realtime.c, formats/format_h264.c,
	  apps/app_directory.c, apps/app_rpt.c, channels/chan_mgcp.c,
	  apps/app_adsiprog.c, codecs/codec_lpc10.c,
	  res/res_config_pgsql.c, apps/app_read.c, channels/chan_sip.c,
	  codecs/codec_alaw.c, res/res_adsi.c, res/res_crypto.c,
	  channels/chan_jingle.c, apps/app_channelredirect.c,
	  apps/app_forkcdr.c, formats/format_vox.c, apps/app_sms.c,
	  formats/format_g723.c, apps/app_verbose.c, apps/app_stack.c,
	  apps/app_readfile.c, res/res_features.c, codecs/codec_adpcm.c,
	  apps/app_sayunixtime.c, apps/app_test.c, apps/app_image.c,
	  formats/format_wav_gsm.c, res/res_smdi.c,
	  include/asterisk/compat.h, apps/app_skel.c, apps/app_zapscan.c,
	  channels/chan_alsa.c, apps/app_url.c, apps/app_externalivr.c,
	  formats/format_jpeg.c, formats/format_gsm.c,
	  apps/app_milliwatt.c, apps/app_dial.c, apps/app_page.c,
	  apps/app_privacy.c, codecs/codec_speex.c, apps/app_echo.c,
	  channels/chan_agent.c, apps/app_disa.c,
	  channels/iax2-provision.c, res/res_ael_share.c,
	  apps/app_transfer.c, res/res_monitor.c, apps/app_playback.c,
	  channels/chan_misdn.c, apps/app_waitforring.c,
	  apps/app_zapbarge.c, channels/chan_features.c, apps/app_macro.c,
	  apps/app_zapateller.c, res/res_indications.c,
	  codecs/codec_ilbc.c, apps/app_chanspy.c, channels/chan_unistim.c,
	  apps/app_meetme.c, res/res_musiconhold.c, apps/app_followme.c,
	  codecs/codec_zap.c, res/res_config_sqlite.c,
	  channels/misdn_config.c, apps/app_controlplayback.c,
	  formats/format_ilbc.c, channels/chan_phone.c, res/res_agi.c,
	  main/logger.c, apps/app_ivrdemo.c, apps/app_parkandannounce.c,
	  res/res_clioriginate.c, apps/app_while.c, include/asterisk.h,
	  apps/app_nbscat.c, channels/chan_zap.c, codecs/codec_a_mu.c,
	  res/res_limit.c, apps/app_festival.c, apps/app_waitforsilence.c,
	  res/res_convert.c, apps/app_getcpeid.c, apps/app_system.c,
	  apps/app_queue.c, channels/chan_oss.c, channels/chan_usbradio.c,
	  apps/app_flash.c, apps/app_directed_pickup.c,
	  channels/chan_h323.c, codecs/codec_ulaw.c, channels/chan_nbs.c,
	  apps/app_senddtmf.c, formats/format_g729.c: include "logger.h"
	  and errno.h from asterisk.h - usage shows that they were included
	  almost everywhere. Remove some of the instances.

2007-11-19 17:18 +0000 [r89422]  Steve Murphy <murf@digium.com>

	* main/pbx.c: a correction to code involved in an extension removal

2007-11-19 16:29 +0000 [r89421]  Mark Michelson <mmichelson@digium.com>

	* funcs/func_sysinfo.c (added), CHANGES: Adding SYSINFO() dialplan
	  function for retrieval of system information

2007-11-19 15:55 +0000 [r89417-89420]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 89419 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89419 | file | 2007-11-19 11:53:32 -0400 (Mon, 19 Nov 2007) | 6
	  lines Print out the correct filename (features.conf) in the log
	  message when parkpos options are incorrect. (closes issue #11295)
	  Reported by: Laureano Patches: res_features.c.patch uploaded by
	  Laureano (license 265) ........

	* /, doc/tex/localchannel.tex: Merged revisions 89416 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89416 | file | 2007-11-19 11:24:12 -0400 (Mon, 19 Nov
	  2007) | 4 lines Clarify documentation a bit, include that a frame
	  has to pass through the core in order for the Local channel
	  optimization to happen. (closes issue #11246) Reported by: jon
	  ........

2007-11-19 14:36 +0000 [r89412]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/logger.h: revert inclusion of options.h

2007-11-19 14:03 +0000 [r89410]  Joshua Colp <jcolp@digium.com>

	* apps/app_playback.c: Change warning messages (which are really
	  debug messages) into debug messages. (closes issue #11288)
	  Reported by: IgorG Patches: saydebug-89394-1-trunk.patch uploaded
	  by IgorG (license 20)

2007-11-19 09:16 +0000 [r89404-89407]  Olle Johansson <oej@edvina.net>

	* CHANGES: Update CHANGES

	* channels/chan_sip.c: Adding busy-level to the SIP_PEER() dialplan
	  function. With this, you can control the peer in the dialplan, so
	  you avoid placing outbound calls when the device has reached
	  busy-level. Reported by pj. Closes bug #11180

	* main/acl.c: Add some debugging to the routines that finds our
	  local IP address. Related to bug #9225

	* channels/chan_sip.c: Make some notes about a problem I found with
	  the OPTIONs handler while working with the bug tracker. Since we
	  don't authenticate devices (peers/users) on OPTIONS we don't have
	  the proper context set for the user/peer. However, we might not
	  want to process an authentication for every OPTIONS, so we could
	  have a config option for this, "optionsforceok" to always answer
	  200 OK on the request and not check device or destination, nor
	  add a SDP. If Asterisk sends the OPTIONs request, it doesn't care
	  about the reply. Some devices use OPTIONs to discover
	  capabilities, since we should answer like an INVITE from the
	  device and we need to support that properly too, which we don't
	  today. So much to do :-)

2007-11-18 21:50 +0000 [r89394-89399]  Joshua Colp <jcolp@digium.com>

	* build_tools/make_buildopts_h: Add OSX into the logic that uses
	  md5 instead of md5sum.

	* include/asterisk/compat.h: Use the easy way that rizzo mentioned,
	  only include malloc.h on the Windows platform.

	* include/asterisk/compat.h: Revert last commit, apparently
	  buildbot lied to me.

	* include/asterisk/compat.h: Change how we handle alloca to conform
	  with how it is suggested in the autoconf manual for
	  AC_FUNC_ALLOCA. FreeBSD 6 now builds again and no other platforms
	  should be broken by this.

	* configure, configure.ac: Change autoconf logic a bit so it says
	  what it is looking for in two instances where it didn't.

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  include/asterisk/lock.h, include/asterisk/network.h: Use autoconf
	  logic to determine the presence of
	  PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP and
	  PTHREAD_MUTEX_RECURSIVE_NP. Enclose error message from network.h
	  in "

2007-11-17 21:47 +0000 [r89393]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add SS7 Generic address support (#11156)

2007-11-17 19:29 +0000 [r89389-89392]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/compat.h: if alloca.h is not present, try
	  malloc.h

	* agi/Makefile: temporarily disable this target in mingw

	* Makefile: will i ever get precedences for windows right ? in the
	  meantime, use a variable to ease enabling/disabling print
	  subdirectories.

	* Makefile: reformulate dependencies in a more correct way

2007-11-17 17:46 +0000 [r89388]  Steve Murphy <murf@digium.com>

	* main/pbx.c, pbx/pbx_dundi.c: a quick fix to pbx_dundi.c to make
	  it so it will compile. Hope I did the right thing. And some
	  additions to removal of extens to take care of hashtab pointers
	  in all cases.

2007-11-17 17:27 +0000 [r89363-89387]  Luigi Rizzo <rizzo@icir.org>

	* Makefile.moddir_rules, Makefile.rules: as discussed some time ago
	  on the -dev list, create embedde object with a .eo suffix even if
	  they are coming from .cc sources. This simplifies the handling in
	  the build scripts.

	* include/asterisk/network.h: prefer socket.h over other variants
	  (winsock etc.)

	* channels/chan_local.c, main/translate.c,
	  channels/chan_features.c, main/http.c, main/config.c: trim more
	  redundant headers

	* main/acl.c: remove unnecessary includes

	* main/udptl.c, main/dnsmgr.c, channels/chan_sip.c, main/acl.c,
	  main/dns.c, main/rtp.c, main/netsock.c: fix breakage induced by
	  previous mistake

	* Makefile: wrong variable, wrong order -> broken build.

	* include/asterisk/acl.h, include/asterisk/utils.h,
	  include/asterisk/autoconfig.h.in, include/asterisk/rtp.h,
	  configure.ac, main/acl.c, include/asterisk/netsock.h,
	  main/utils.c, include/asterisk/manager.h, main/netsock.c,
	  main/manager.c, res/res_agi.c, pbx/pbx_dundi.c,
	  include/asterisk/udptl.h, include/asterisk/dnsmgr.h,
	  main/asterisk.c: start using asterisk/network.h for network
	  related headers. Also remove some unnecessary includes.

	* include/asterisk/network.h (added): wrapper for all generic
	  network headers that have different names and locations on the
	  various systems.

	* main/cygload.c: main is called main not amain!

	* main/Makefile: conditional targets for building the windows
	  version

	* Makefile: support cygwin targets

	* Makefile.moddir_rules: and this is the last one to have asterisk
	  compile (not run yet) natively under cygwin.

	* apps/app_sms.c: another cygwin compatibility fix. This one must
	  be handled in a better way in configure, also for other
	  architectures

	* utils/Makefile, main/Makefile, utils/extconf.c: more
	  cygwin/mingw32 compatibility fixes

	* include/asterisk/channel.h: use autoconf results to conditionally
	  compile timersub

	* include/asterisk/lock.h: compatibility fixes for cygwin

	* include/asterisk/compat.h: some version of flex produce code that
	  wants __STDC_VERSION__ defined, but the compiler does not always
	  define it.

	* Makefile: these linker flags apply to both cygwin and mingw32

	* utils/hashtest2.c: add a return NULL to a function that is
	  expected to return a value so compilers that don't understand
	  that this code is NOTREACHED will not complain (the fault is not
	  much on the compiler but on the declaration of pthread_exit on
	  certain platforms) s/certain platform/cygwin/ if you are really
	  curious

	* main/loader.c: define RTLD_LOCAL for platforms that don't have
	  it. This is only to complete the build, clearly the linker
	  behaviour will be completely different and likely to cause
	  trouble in those cases.

	* channels/Makefile: filter out modules that do not compile under
	  windows (this should be handled with the dependencies generated
	  by configure and menuselect, but will be fixed later)

	* main/utils.c: netdb.h is used for gethostbyname, and it was not
	  included in some platforms.

	* main/cygload.c (added): Loader for cygwin where asterisk is
	  really a big dll (something like this is already in 1.2)

	* configure, include/asterisk/autoconfig.h.in, configure.ac:
	  timersub is a macro not a function, so write the check in a way
	  that detects both formats.

2007-11-17 06:34 +0000 [r89359-89362]  Russell Bryant <russell@digium.com>

	* pbx/pbx_lua.c: fix the build of pbx_lua

	* configure, include/asterisk/autoconfig.h.in,
	  include/asterisk/compat.h, configure.ac, include/asterisk/io.h,
	  include/asterisk/channel.h: Update the configure script check for
	  sys/poll.h to also provide the result in
	  include/asterisk/autoconfig.h. Also, move the conditional include
	  of sys/poll.h or asterisk/poll-compat.h into asterisk/config.h
	  instead of the two headers it existed in before.

	* build_tools/make_buildopts_h: actually let this compile, oops :(

	* build_tools/make_buildopts_h: Use the fix suggested by Tilghman
	  on the -dev to make cutting up the BUILDSUM friendly to non-bash
	  shells. I think this should work for BSD/mingw as well, but did
	  not yet remove the switch statement.

2007-11-17 04:19 +0000 [r89348-89358]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: linker flags for mingw32

	* configure, include/asterisk/autoconfig.h.in, configure.ac: add
	  detection for timersub() and winsock.h/winsock2.h

	* include/asterisk/endian.h: provide definitions for
	  __LITTLE_ENDIAN and __BIG_ENDIAN if not present.

	* main/Makefile, include/asterisk/io.h, include/asterisk/channel.h:
	  use poll as detected by configure

	* configure, configure.ac, makeopts.in: use autoconf to check for
	  the existence of sys/poll.h

	* build_tools/make_buildopts_h: this script is run on the build
	  system, not on the host.

	* Makefile.moddir_rules: compatibility fix for mingw32

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4, makeopts.in: acinclude.m4: add a function to help
	  checking sdl-config, gtk-config and the like (this could be used
	  for gtk and gtk2 as well) Other files: add tests for sdl,
	  sdl_image and avcodec and regenerate configure and
	  autoconfig.h.in

	* include/asterisk/autoconfig.h.in, configure.ac: add check for the
	  presence of glob

	* channels/chan_jingle.c, channels/chan_unistim.c,
	  funcs/func_enum.c, channels/chan_local.c, channels/chan_misdn.c,
	  channels/chan_skinny.c, funcs/func_odbc.c, channels/chan_h323.c,
	  utils/ael_main.c, cdr/cdr_pgsql.c, channels/chan_gtalk.c,
	  apps/app_db.c, channels/chan_mgcp.c: more removal of duplicate
	  #include lines

	* main/udptl.c, funcs/func_module.c, res/res_features.c,
	  funcs/func_lock.c, res/res_adsi.c, funcs/func_strings.c,
	  channels/chan_agent.c, pbx/dundi-parser.c, main/rtp.c,
	  pbx/pbx_loopback.c, funcs/func_blacklist.c,
	  channels/chan_features.c, apps/app_dumpchan.c, res/res_agi.c,
	  main/logger.c, pbx/pbx_realtime.c, pbx/pbx_dundi.c,
	  apps/app_rpt.c, main/asterisk.c, apps/app_parkandannounce.c:
	  remove a bunch of duplicate includes Reproduce with grep -r
	  #include . | grep -v .svn | grep -v Binary | sort | uniq -c |
	  sort -nr

2007-11-16 23:44 +0000 [r89347]  Terry Wilson <twilson@digium.com>

	* res/res_features.c: Fix broken parking dial-back

2007-11-16 23:33 +0000 [r89346]  Steve Murphy <murf@digium.com>

	* main/pbx.c: My goodness, haven't handled an extension deletion.
	  Add code to ast_context_remove_extension2() to remove an
	  extension from the trie. Done by marking it deleted. The
	  scoreboard won't update for it any more. Also, a couple of calls
	  to insert hashtab had a spurious ->exten, which was removed.

2007-11-16 23:28 +0000 [r89341-89345]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/paths.h, include/asterisk.h: paths are already
	  in include/asterisk/paths.h so don't duplicate them in
	  include/asterisk.h

	* include/asterisk/utils.h, include/asterisk/lock.h: whitespace
	  only change - adjust indentation and add some comments on the
	  content of these two files. utils.h (which is included in over
	  150 files) contains a lot of unrelated functions which require
	  the inclusion of a large number of other headers. At some point
	  we should partition its content in a better way.

2007-11-16 21:23 +0000 [r89333-89338]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/logger.h: logger.h does not need options.h

	* include/asterisk/utils.h, channels/chan_sip.c,
	  include/asterisk/astobj.h, include/asterisk/compat.h,
	  include/asterisk/channel.h, include/asterisk/strings.h,
	  utils/extconf.c, include/asterisk/frame.h,
	  include/asterisk/stringfields.h, include/asterisk/endian.h:
	  remove redundant #include "asterisk/compat.h", but make sure that
	  asterisk/compiler.h is included everywhere

	* main/acl.c, main/asterisk.c: remove duplicate headers. Properly
	  check for netdb.h (there is actually tens of places to fix)

	* Makefile.rules: put back default optimization to -O6 (previously
	  changed by mistake)

	* main/frame.c, main/threadstorage.c, apps/app_alarmreceiver.c,
	  apps/app_ices.c, channels/chan_iax2.c, apps/app_exec.c,
	  channels/chan_skinny.c, main/strcompat.c, pbx/pbx_ael.c,
	  apps/app_zapras.c, formats/format_h263.c, cdr/cdr_odbc.c,
	  include/asterisk/sha1.h, main/db.c, cdr/cdr_manager.c,
	  main/pbx.c, funcs/func_timeout.c, formats/format_wav.c,
	  apps/app_softhangup.c, codecs/codec_g726.c, funcs/func_cut.c,
	  apps/app_talkdetect.c, apps/app_db.c, funcs/func_channel.c,
	  main/privacy.c, funcs/func_iconv.c, pbx/pbx_config.c,
	  main/asterisk.c, res/res_odbc.c, include/asterisk/stringfields.h,
	  apps/app_voicemail.c, formats/format_sln.c,
	  apps/app_authenticate.c, apps/app_readexten.c,
	  apps/app_userevent.c, codecs/codec_gsm.c, Makefile.rules,
	  apps/app_setcallerid.c, include/asterisk/astmm.h,
	  res/res_config_odbc.c, apps/app_osplookup.c, funcs/func_odbc.c,
	  apps/app_mp3.c, formats/format_h264.c, apps/app_directory.c,
	  main/md5.c, res/res_config_pgsql.c, main/dnsmgr.c,
	  funcs/func_version.c, channels/chan_sip.c, funcs/func_lock.c,
	  res/res_crypto.c, include/asterisk/cli.h, channels/chan_jingle.c,
	  apps/app_forkcdr.c, funcs/func_blacklist.c, main/abstract_jb.c,
	  main/file.c, apps/app_sms.c, formats/format_g723.c, main/astmm.c,
	  apps/app_stack.c, apps/app_verbose.c, main/dsp.c, main/udptl.c,
	  main/autoservice.c, funcs/func_module.c, codecs/codec_adpcm.c,
	  cdr/cdr_adaptive_odbc.c, main/devicestate.c, apps/app_image.c,
	  formats/format_wav_gsm.c, main/indications.c, pbx/pbx_loopback.c,
	  funcs/func_shell.c, include/asterisk/compat.h, apps/app_skel.c,
	  main/plc.c, channels/chan_alsa.c, apps/app_externalivr.c,
	  formats/format_gsm.c, apps/app_milliwatt.c, res/res_speech.c,
	  main/sched.c, apps/app_dial.c, apps/app_page.c, apps/app_disa.c,
	  channels/iax2-provision.c, res/res_monitor.c, main/netsock.c,
	  apps/app_waitforring.c, main/fixedjitterbuf.c,
	  include/asterisk/lock.h, apps/app_chanspy.c, apps/app_cdr.c,
	  channels/chan_unistim.c, funcs/func_base64.c, funcs/func_md5.c,
	  apps/app_meetme.c, main/sha1.c, funcs/func_vmcount.c,
	  res/res_musiconhold.c, cdr/cdr_radius.c, apps/app_followme.c,
	  res/res_config_sqlite.c, main/fskmodem.c,
	  channels/misdn_config.c, apps/app_controlplayback.c,
	  cdr/cdr_csv.c, formats/format_ilbc.c, main/cdr.c,
	  channels/chan_phone.c, funcs/func_enum.c, main/dial.c,
	  main/manager.c, funcs/func_groupcount.c, cdr/cdr_sqlite.c,
	  main/logger.c, main/image.c, apps/app_ivrdemo.c,
	  res/res_clioriginate.c, apps/app_nbscat.c, codecs/codec_a_mu.c,
	  channels/chan_zap.c, main/slinfactory.c, res/res_convert.c,
	  pbx/pbx_lua.c, apps/app_queue.c, apps/app_system.c,
	  channels/chan_oss.c, cdr/cdr_tds.c, funcs/func_realtime.c,
	  channels/chan_usbradio.c, main/hashtab.c, apps/app_flash.c,
	  include/asterisk/strings.h, apps/app_senddtmf.c,
	  funcs/func_callerid.c, include/asterisk/time.h,
	  channels/chan_local.c, funcs/func_dialgroup.c, funcs/func_env.c,
	  apps/app_record.c, funcs/func_strings.c, apps/app_chanisavail.c,
	  pbx/pbx_spool.c, apps/app_dumpchan.c, formats/format_pcm.c,
	  main/http.c, main/stdtime/localtime.c, codecs/codec_g722.c,
	  apps/app_morsecode.c, formats/format_ogg_vorbis.c,
	  channels/iax2-parser.c, apps/app_speech_utils.c,
	  include/asterisk/logger.h, main/srv.c, apps/app_sendtext.c,
	  funcs/func_cdr.c, include/asterisk/md5.h, utils/hashtest2.c,
	  utils/ael_main.c, main/audiohook.c, apps/app_mixmonitor.c,
	  formats/format_g726.c, channels/chan_vpb.cc, apps/app_dictate.c,
	  channels/chan_gtalk.c, funcs/func_logic.c, cdr/cdr_pgsql.c,
	  res/res_jabber.c, funcs/func_uri.c, main/io.c,
	  include/asterisk/abstract_jb.h, main/channel.c,
	  apps/app_minivm.c, res/res_realtime.c, main/dns.c,
	  apps/app_rpt.c, channels/chan_mgcp.c, apps/app_adsiprog.c,
	  codecs/codec_lpc10.c, apps/app_read.c, codecs/codec_alaw.c,
	  res/res_adsi.c, include/asterisk/plc.h,
	  apps/app_channelredirect.c, formats/format_vox.c,
	  main/cryptostub.c, main/callerid.c, pbx/pbx_dundi.c,
	  funcs/func_devstate.c, funcs/func_rand.c, apps/app_readfile.c,
	  cdr/cdr_sqlite3_custom.c, main/say.c, res/res_features.c,
	  apps/app_sayunixtime.c, apps/app_test.c, main/config.c,
	  main/loader.c, main/term.c, main/cli.c, res/res_smdi.c,
	  include/asterisk/astobj.h, apps/app_zapscan.c, apps/app_amd.c,
	  pbx/pbx_realtime.c, apps/app_url.c, formats/format_jpeg.c,
	  include/asterisk/utils.h, apps/app_privacy.c,
	  codecs/codec_speex.c, apps/app_echo.c, channels/chan_agent.c,
	  funcs/func_math.c, res/res_ael_share.c, pbx/dundi-parser.c,
	  apps/app_transfer.c, include/asterisk/manager.h,
	  apps/app_playback.c, main/chanvars.c, apps/app_zapbarge.c,
	  channels/chan_misdn.c, funcs/func_curl.c,
	  channels/chan_features.c, apps/app_macro.c, codecs/codec_ilbc.c,
	  res/res_indications.c, apps/app_zapateller.c, main/dlfcn.c,
	  include/asterisk/slinfactory.h, utils/hashtest.c, main/utils.c,
	  funcs/func_sha1.c, codecs/codec_zap.c, main/enum.c,
	  include/asterisk/file.h, main/tdd.c, funcs/func_volume.c,
	  res/res_agi.c, main/app.c, apps/app_parkandannounce.c,
	  cdr/cdr_custom.c, apps/app_while.c, funcs/func_db.c,
	  res/res_limit.c, apps/app_festival.c, apps/app_waitforsilence.c,
	  main/translate.c, include/asterisk/config.h, main/jitterbuf.c,
	  main/acl.c, apps/app_getcpeid.c, funcs/func_global.c, main/rtp.c,
	  funcs/func_extstate.c, apps/app_directed_pickup.c,
	  main/adsistub.c, channels/chan_h323.c, codecs/codec_ulaw.c,
	  main/event.c, channels/chan_nbs.c, pbx/pbx_gtkconsole.c,
	  formats/format_g729.c: Start untangling header inclusion in a way
	  that does not affect build times - tested, there is no
	  measureable difference before and after this commit. In this
	  change: use asterisk/compat.h to include a small set of system
	  headers: inttypes.h, unistd.h, stddef.h, stddint.h, sys/types.h,
	  stdarg.h, stdlib.h, alloca.h, stdio.h Where available, the
	  inclusion is conditional on HAVE_FOO_H as determined by autoconf.
	  Normally, source files should not include any of the above system
	  headers, and instead use either "asterisk.h" or
	  "asterisk/compat.h" which does it better. For the time being I
	  have left alone second-level directories (main/db1-ast, etc.).

2007-11-16 19:51 +0000 [r89331-89332]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c: Fixing a problem pointed out by Qwell

	* main/manager.c: Added some locks that should have been around
	  astman_send_error, at least according to the comments. (closes
	  issue #11258, reported and patched by eliel)

2007-11-16 19:26 +0000 [r89329-89330]  Steve Murphy <murf@digium.com>

	* main/pbx.c: This corrects a hashtab removal, given a bad argument

	* main/pbx.c, res/res_features.c: This fixes a problem with pattern
	  ranges; and corrects a situation in res_features, where an
	  extension would be created with the name Zap/51, as an example.
	  THe / is bad because it would tend to mean that the 51 is to be
	  cid matched.

2007-11-16 18:48 +0000 [r89328]  Luigi Rizzo <rizzo@icir.org>

	* build_tools/make_buildopts_h: both md5sum and variable
	  substitutions such as ${BUILDSUM:0:8} are not available in
	  FreeBSD. For the time being, put in a workaround so we can build
	  the system, and wait for the result of the discussion on whether
	  we can store the md5 as a string rather than 4 ints (if so, we
	  won't need more complex tricks with awk or sed for splitting the
	  md5). 1.4 will be fixed when we decide the issue.

2007-11-16 17:11 +0000 [r89327]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Adding confirmation playback when
	  forwarding voicemail messages. This will attempt to play the
	  name(s) of the person(s) to whom you are forwarding the message
	  prior to prompting for prepending. If no name is found, the
	  extension is read back verbatim. (closes issue #9046, reported
	  and patched by jaroth)

2007-11-16 16:56 +0000 [r89326]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/module.h, build_tools/make_buildopts_h,
	  main/loader.c: Merged revisions 89325 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89325 | kpfleming | 2007-11-16 10:47:46 -0600 (Fri, 16 Nov 2007)
	  | 4 lines To help combat problems where people build external
	  modules (asterisk-addons or others) and then change the build
	  options of the Asterisk build in a way that makes the
	  incompatible without warning, this commit introduces an MD5
	  signature of the important build-time options and includes that
	  signature into modules when they are built. When the loader loads
	  one of these modules and notices the problem, it will emit a
	  warning to console and refuse to initialize the module, as doing
	  so could cause the system to be unstable or even crash. If you
	  upgrade to this version of Asterisk, you must rebuild *all* of
	  your modules that came from other sources before trying to run
	  this version. If you are using Digium's G.729 binary codec
	  module, you will need v33 or newer. ........

2007-11-16 15:44 +0000 [r89324]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 89323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89323 | mmichelson | 2007-11-16 09:28:22 -0600 (Fri, 16 Nov
	  2007) | 5 lines Make realtime queues accessible from the
	  QUEUE_MEMBER_COUNT function. (closes issue #11271, reported and
	  patched by atis, with small modifications from me) ........

2007-11-16 10:07 +0000 [r89322]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/config.h, main/config.c: add a small new
	  function to retrieve variables from a config once we have a
	  pointer to the category.

2007-11-16 10:06 +0000 [r89321]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c: fixed #10631, about one way audio. thanks
	  IgorG again.

2007-11-16 09:51 +0000 [r89320]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: move the inner part of config file parsing
	  to a separate function, so it can be reused in the implementation
	  of cli commands when they have a similar syntax.

2007-11-16 08:54 +0000 [r89319]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c: fixed compilation of chan_misdn, #11269,
	  thanks IgorG.

2007-11-15 23:50 +0000 [r89299-89312]  Tilghman Lesher <tlesher@digium.com>

	* main/utils.c, include/asterisk/stringfields.h: If we're going to
	  be passing a negative value for the size of a stringfield, in
	  order to indicate something, then using an UNSIGNED parameter is
	  bad, mmmmmkay?

	* Makefile, /: Merged revisions 89302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89302 | tilghman | 2007-11-15 12:37:38 -0600 (Thu, 15 Nov 2007)
	  | 2 lines Start Asterisk in Debian at a more reasonable time
	  (since zaptel is at level 20) ........

	* /, channels/misdn/isdn_lib.c: Merged revisions 89301 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89301 | tilghman | 2007-11-15 12:23:14 -0600 (Thu, 15
	  Nov 2007) | 2 lines Fix an uninitialized memory read found by
	  valgrind ........

	* apps/app_zapscan.c: Fix trunk breakage due to chan->lock being
	  renamed.

	* /, channels/chan_iax2.c: Merged revisions 89298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89298 | tilghman | 2007-11-15 12:05:56 -0600 (Thu, 15 Nov 2007)
	  | 5 lines Yet another memory corruption issue. Reported by: atis
	  Patch by: tilghman Fixes issue #10923 ........

2007-11-15 17:27 +0000 [r89297]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 89296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89296 | russell | 2007-11-15 11:19:28 -0600 (Thu, 15 Nov 2007) |
	  8 lines Update the SLAStation application to account for the case
	  where the SLA thread has a call out to the station, but the user
	  has pressed a line button to answer the call instead of picking
	  up the handset. If they do, the phone sends out a new INVITE. So,
	  the SLAStation app must check to see if it is picking up a
	  ringing trunk, and ensure that the other stations stop ringing.
	  (reported internally, patched by me, tested by mogorman) ........

2007-11-15 16:50 +0000 [r89294-89295]  Steve Murphy <murf@digium.com>

	* main/pbx.c: Get rid of a previously missed ast_log call for
	  debug, no longer nec.

	* main/pbx.c: Perhaps I went overboard on initializing things. I
	  can remove unnecc. stuff later. A few bug fixes. Killing small
	  bugs on the way to killing bigger ones. Removed locking on
	  hashtabs; there's plenty of locks already being taken. A small
	  bug in the root_tree hashtab compare func.

2007-11-15 16:20 +0000 [r89293]  Luigi Rizzo <rizzo@icir.org>

	* main/channel.c, apps/app_channelredirect.c, main/manager.c,
	  res/res_features.c, apps/app_softhangup.c,
	  include/asterisk/channel.h, include/asterisk/lock.h,
	  apps/app_senddtmf.c: access channel locks through
	  ast_channel_lock/unlock/trylock and not through ast_mutex
	  primitives. To detect all occurrences, I have renamed the lock
	  field in struct ast_channel so it is clear that it shouldn't be
	  used directly. There are some uses in res/res_features.c (see
	  details of the diff) that are error prone as they try and lock
	  two channels without caring about the order (or without
	  explaining why it is safe).

2007-11-15 15:39 +0000 [r89290-89291]  Joshua Colp <jcolp@digium.com>

	* UPGRADE.txt: Fix typo in UPGRADE.txt. 'increase' should have been
	  used, not 'increasing'.

	* channels/chan_sip.c, channels/chan_h323.c,
	  channels/misdn_config.c: And file said... let trunk build again!
	  Accomplished by some more constification, and marking a function
	  in chan_sip as purposely unused until it is fixed up.

2007-11-15 14:58 +0000 [r89287-89289]  Mark Michelson <mmichelson@digium.com>

	* main/manager.c, /: Merged revisions 89288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89288 | mmichelson | 2007-11-15 08:57:28 -0600 (Thu, 15 Nov
	  2007) | 3 lines Undoing previous commit since I realize it was
	  wrong ........

	* main/manager.c, /: Merged revisions 89286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89286 | mmichelson | 2007-11-15 08:54:10 -0600 (Thu, 15 Nov
	  2007) | 4 lines Adding a missing mutex unlock. (closes issue
	  11256, reported and patched by ys) ........

2007-11-15 12:21 +0000 [r89278-89285]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Always relying on the responses when
	  crossing NAT's are not a good solution, it breaks communication.
	  Rizzo - you need to implement a configuration option for this
	  code. It's good, but maybe should be off by default.

	* /, channels/chan_sip.c: Merged revisions 89281 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89281 | oej | 2007-11-15 12:26:22 +0100 (Tor, 15 Nov 2007) | 6
	  lines Don't send re-invites during pending INVITE transactions.
	  Patch by one47 - thanks! Closes issue #9305 ........

	* /, channels/chan_sip.c: Merged revisions 89280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89280 | oej | 2007-11-15 12:15:09 +0100 (Tor, 15 Nov 2007) | 5
	  lines Improve support for multipart messages. Code by gasparz,
	  changes by me (mostly formatting). Thanks, gasparz! Closes issue
	  #10947 ........

	* channels/chan_sip.c: Exit early instead of deciding to exit after
	  processing the message.

	* channels/chan_sip.c, configs/sip.conf.sample: Add support for
	  application/dtmf SIP INFO dtmf handling. Yep, another way of
	  handling DTMF in SIP. Totally undocumented, but implemented in
	  enough devices so we have to support it. Code by sergee, small
	  changes by oej. Closes issue #11049

2007-11-15 01:42 +0000 [r89277]  Steve Murphy <murf@digium.com>

	* main/pbx.c: Had trouble playing with parking; spent a long time
	  trying to reason out MATCHMORE mode. made these updates and xfers
	  on zaptel lines seem to work ok now

2007-11-15 00:01 +0000 [r89273-89276]  Tilghman Lesher <tlesher@digium.com>

	* /, main/app.c: Merged revisions 89275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89275 | tilghman | 2007-11-14 17:23:58 -0600 (Wed, 14 Nov 2007)
	  | 5 lines When a recording ends with '#', we are improperly
	  trimming an extra 200ms from the recording. Reported by: sim
	  Patch by: tilghman Closes issue #11247 ........

	* main/channel.c: Typo

	* main/channel.c: Add callerid to the Hangup manager event.
	  Reported by: outtolunc Patch by: outtolunc Closes issue #11248

2007-11-14 18:05 +0000 [r89271-89272]  Steve Murphy <murf@digium.com>

	* main/pbx.c: Rescaled the weights of the patterns to give
	  something more independent of pattern length; and make . less
	  likely to win. Question: which should win for 14102241145--
	  _1xxxxxxx. or _XXXXXXXXXXX -- right now, the pure X pattern will
	  win.

	* main/pbx.c: A further problem highlighted by 11233 has been
	  resolved; a certain combination of patterns in a certain order,
	  led to a malformed trie, due to a ptr not being initialized in
	  the loop. Also, some tree printing prettifications.

2007-11-14 15:13 +0000 [r89269-89270]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_phone.c, channels/chan_zap.c, res/res_jabber.c,
	  res/res_config_sqlite.c, main/config.c, res/res_odbc.c: One more
	  typo in config.c; and missed conversions due to the constifying
	  of ast_variable_new parameters

	* main/config.c: Typo

2007-11-14 13:18 +0000 [r89268]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/acl.h, channels/chan_sip.c,
	  include/asterisk/config.h, channels/chan_agent.c, res/res_adsi.c,
	  main/acl.c, pbx/dundi-parser.c, apps/app_queue.c,
	  channels/chan_iax2.c, main/enum.c, channels/chan_oss.c,
	  apps/app_playback.c, main/config.c, pbx/dundi-parser.h,
	  include/asterisk/abstract_jb.h, main/manager.c,
	  channels/chan_skinny.c, apps/app_minivm.c, main/abstract_jb.c,
	  main/logger.c, pbx/pbx_dundi.c, apps/app_directory.c,
	  apps/app_voicemail.c: make the 'name' and 'value' fields in
	  ast_variable const char * This prevents modifying the strings in
	  the stored variables, and catched a few instances where this was
	  actually done. Given the differences between trunk and 1.4 (and
	  the fact that this is effectively an API change) it is better to
	  fix 1.4 independently. These are chan_sip.c::sip_register()
	  chan_skinny.c:: near line 2847 config.c:: near line 1774
	  logger.c::make_components() res_adsi.c:: near line 1049 I may
	  have missed some instances for modules that do not build here.

2007-11-14 03:22 +0000 [r89263-89266]  Russell Bryant <russell@digium.com>

	* main/hashtab.c, include/asterisk/hashtab.h: Fix up various coding
	  guidelines issues ... - handle memory allocation failures - add
	  an ast_ prefix to a publicly exported function - put curly braces
	  in the right places - add a bunch of spaces where they should be
	  be used

	* res/res_clioriginate.c: - Use the ARRAY_LEN macro in a couple
	  places - return errors from load_module / unload_module

	* apps/app_dial.c: Use BEGIN_OPTIONS / END_OPTIONS to make the
	  syntax highlighting in my editor happy

	* apps/app_queue.c: Instead of reserving 800 bytes for periodic
	  announcements, use an array of ast_str pointers and only alloate
	  space for the strings as needed.

2007-11-14 01:16 +0000 [r89262]  Joshua Colp <jcolp@digium.com>

	* main/srv.c, /: Merged revisions 89260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89260 | file | 2007-11-13 21:15:12 -0400 (Tue, 13 Nov 2007) | 4
	  lines Return the proper value when the srv_callback function
	  executes properly. (closes issue #11240) Reported by: jtodd
	  ........

2007-11-14 01:15 +0000 [r89261]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Convert most of the strings in the call_queue
	  struct to use stringfields.

2007-11-14 00:54 +0000 [r89259]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, main/pbx.c: use simpler technique for removing
	  known entries from lists

2007-11-14 00:33 +0000 [r89258]  Russell Bryant <russell@digium.com>

	* main/image.c: - Simplify removing an item from a list - move a
	  verbose message to after the item is added to the list - make use
	  of the ARRAY_LEN macro in one spot

2007-11-13 23:43 +0000 [r89256-89257]  Steve Murphy <murf@digium.com>

	* main/pbx.c: This hopefully will fix the re-opened 11233. Hadn't
	  covered the case of a context with no patterns. (blush)

	* main/pbx.c: closes issue #11233 -- where some fine points in the
	  algorithm to build the tree needed to be corrected. Many thanks
	  for the test case, jtodd

2007-11-13 21:01 +0000 [r89250-89253]  Russell Bryant <russell@digium.com>

	* include/asterisk/lock.h: This fixes a build error on my mac. It
	  also works on my linux box. Let me know if it breaks any other
	  platform ...

	* res/res_features.c: Fix a typo pointed out by outtolunc, thanks
	  :)

	* channels/chan_sip.c: - Convert initialization of a struct to C99
	  style instead of GNU style - Fix a minor spelling error in a
	  comment

	* res/res_features.c, CHANGES: Update the ParkedCall application to
	  grab the first available parked call if no parked extension is
	  provided as an argument. (closes issue #10803) Reported by:
	  outtolunc Patches: res_features-parkedcall-any.diff4 uploaded by
	  outtolunc (license 237) - modified by me to work a bit
	  differently ...

2007-11-13 19:48 +0000 [r89249]  Jason Parker <jparker@digium.com>

	* /, res/res_features.c: Merged revisions 89248 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11237) ........ r89248 | qwell | 2007-11-13 13:47:45 -0600
	  (Tue, 13 Nov 2007) | 7 lines Revert change from revision 67064.
	  It is documented behavior that if a parking extension already
	  exists while using PARKINGEXTEN, dialplan execution will
	  continue. If blind transferring to a Park with PARKINGEXTEN, you
	  must keep this in mind, and handle the failure yourself. Issue
	  11237, reported by jon. ........

2007-11-13 17:41 +0000 [r89247]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 89246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89246 | tilghman | 2007-11-13 11:34:11 -0600 (Tue, 13 Nov 2007)
	  | 2 lines If we set a value for qualify, we should actually pay
	  attention to it, instead of overriding the value ........

2007-11-13 16:03 +0000 [r89242]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 89241 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89241 | mmichelson | 2007-11-13 10:02:02 -0600 (Tue, 13
	  Nov 2007) | 5 lines Reverting commit made in revision 89205 since
	  it is unnecessary. Thanks to Kevin for pointing this out ........

2007-11-13 14:03 +0000 [r89240]  Tilghman Lesher <tlesher@digium.com>

	* /, main/utils.c: Merged revisions 89239 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89239 | tilghman | 2007-11-13 07:51:53 -0600 (Tue, 13 Nov 2007)
	  | 4 lines Debugging is running into the 16-lock limit. Increase
	  to avoid. (This define is only effective when debugging is turned
	  on, so there's no effect for most installations.) ........

2007-11-13 01:19 +0000 [r89206-89207]  Mark Michelson <mmichelson@digium.com>

	* apps/app_mixmonitor.c: There is the potential to copy
	  uninitialized memory into the mixmonitor->post_process string.
	  This fix prevents that.

	* /, apps/app_mixmonitor.c: Merged revisions 89205 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89205 | mmichelson | 2007-11-12 18:56:46 -0600 (Mon, 12
	  Nov 2007) | 5 lines Some sanity checking for MixMonitor. If only
	  1 argument is given, then the args.options and args.post_process
	  strings are uninitialized and could contain garbage. This change
	  handles this situation properly by only using arguments that we
	  have parsed. ........

2007-11-13 00:19 +0000 [r89202-89203]  Jason Parker <jparker@digium.com>

	* Makefile: oops, somebody left out the directory here...

	* channels/chan_unistim.c, res/res_features.c, main/ast_expr2f.c,
	  include/asterisk/config.h, res/res_convert.c, res/res_crypto.c,
	  pbx/pbx_lua.c, include/asterisk/cli.h, include/asterisk/pbx.h,
	  res/res_config_sqlite.c, res/res_monitor.c,
	  include/asterisk/stringfields.h, res/res_clioriginate.c: Doxygen
	  fixes. Also fix a common typo I kept seeing (arguement) in
	  various files. Closes issue #11222, patch by snuffy (with
	  arguement > argument by me).

2007-11-12 23:33 +0000 [r89196-89201]  Steve Murphy <murf@digium.com>

	* utils/hashtest.c: Don't forget the ASTERISK_VERSION for the sake
	  of the mtx_prof stuff.

	* include/asterisk/hashtab.h: Thanks to snuffy for this doxygen
	  update to hashtab.h; closes issue #11223

	* main/hashtab.c, include/asterisk/hashtab.h: Thanks to snuff-work,
	  who brought up that these fixes might need to be made.

2007-11-12 20:48 +0000 [r89195]  Jason Parker <jparker@digium.com>

	* main/pbx.c, /: Merged revisions 89194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89194 | qwell | 2007-11-12 14:46:52 -0600 (Mon, 12 Nov 2007) | 1
	  line Fix a typo pointed out by De_Mon on #asterisk-dev ........

2007-11-12 20:16 +0000 [r89190]  Kevin P. Fleming <kpfleming@digium.com>

	* utils/Makefile, utils/hashtest.c: (closes issue #11221) Reported
	  by: eliel Patches: utils.Makefile.patch uploaded by eliel
	  (modified by me) (license 64)

2007-11-12 18:44 +0000 [r89186]  Steve Murphy <murf@digium.com>

	* main/pbx.c, pbx/pbx_realtime.c, pbx/pbx_dundi.c,
	  funcs/func_logic.c, apps/app_exec.c, apps/app_queue.c,
	  apps/app_mixmonitor.c, cdr/cdr_manager.c: Based on a note in
	  asterisk-dev by Brian Capouch, I determined I too agressive in
	  not initializing arrays passed to pbx_substitute_variables_xxxx;
	  I reviewed the code (again) and hopefully found every possible
	  spot where substitute_variables is called conditionally, and made
	  sure the char array involved was set to a null string.

2007-11-12 17:44 +0000 [r89185]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /, channels/chan_sip.c: Merged revisions 89184
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89184 | tilghman | 2007-11-12 11:29:17 -0600 (Mon, 12 Nov 2007)
	  | 5 lines Fix two cases of memory corruption caused by background
	  threads. Reported by: atis Patch by: tilghman Fixes issue #10923
	  ........

2007-11-12 13:36 +0000 [r89178-89179]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, configs/misdn.conf.sample: Merged
	  revisions 89173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89173 | crichter | 2007-11-12 12:26:48 +0100 (Mo, 12 Nov 2007) |
	  1 line if we're NT and no number was dialed and overlapdial is
	  set, we wait for the ISDN timeout instead of starting our own
	  timer. added a comment for the misdn.conf.sample for the
	  overlapdial config option. ........

	* channels/misdn/isdn_lib_intern.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_msg_parser.c, channels/misdn/isdn_lib.c:
	  Merged revisions 89172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89172 | crichter | 2007-11-12 12:23:57 +0100 (Mo, 12 Nov 2007) |
	  1 line added restart all interfaces Restart_Indicator, to
	  automatically send a RESTART after the L2 of a PTP Port comes up.
	  Also fixed some places where we have send a RELEASE without need
	  for it. ........

2007-11-12 13:26 +0000 [r89177]  Joshua Colp <jcolp@digium.com>

	* channels/chan_unistim.c, utils/hashtest.c: Fix building on
	  FreeBSD by including/not including some headers. (closes issue
	  #11218) Reported by: ys Patches: trunk89169.diff uploaded by ys
	  (license 281)

2007-11-12 13:22 +0000 [r89174-89176]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 89171 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89171 | crichter | 2007-11-12 12:13:13 +0100 (Mo, 12 Nov 2007) |
	  1 line fixed a state/event issue with overlapdial=yes when no
	  extension matched. removed the general sending of a
	  RELEASE_COMPLETE when we receive a RELEASE, this is done by
	  mISDNuser/mISDN. This makes it possible to use asterisk-1.4 with
	  mISDN trunk, but requires users of mISDN/mISDNuser-1.1.X to
	  upgrade to at least mISDNuser-1.1.6 (when using the NT mode at
	  all) ........

	* /, channels/misdn/isdn_lib.c: Merged revisions 89170 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89170 | crichter | 2007-11-12 10:57:23 +0100 (Mo, 12
	  Nov 2007) | 1 line fixed the support for CW and therefore for the
	  reject_cause option. ........

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/chan_misdn_config.h, configs/misdn.conf.sample,
	  channels/misdn/isdn_lib.c, channels/misdn_config.c: Merged
	  revisions 89169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89169 | crichter | 2007-11-12 10:45:36 +0100 (Mo, 12 Nov 2007) |
	  1 line aded ntkeepcalls option, to avoid droÃpping calls when the
	  L2 goes down on a PTP link. There are some pbx which do turn off
	  the L1 for a very short while and restart it immediately.
	  normally T310 should be started and after 10 seconds or so the
	  calls should be dropped, this is a simple fix wihtout this timer.
	  ........

2007-11-09 18:57 +0000 [r89130-89132]  Jason Parker <jparker@digium.com>

	* configs/usbradio.conf.sample (added): Add usbradio.conf.sample
	  from branches/1.4/configs - r84162. It was mistakenly deleted in
	  1.4 without ever being merged to trunk. Reported by eliel on
	  #asterisk-dev.

	* cdr/cdr_sqlite3_custom.c, configs/cdr_sqlite3_custom.conf
	  (removed), configs/cdr_sqlite3_custom.conf.sample (added): Fix a
	  few potential deadlocks in cdr_sqlite3_custom. (also rename
	  sample config to .sample) Closes issue #11208, patch by Laureano.

2007-11-09 16:00 +0000 [r89129]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, utils/Makefile, main/pbx.c, main/hashtab.c
	  (added), main/Makefile, utils/hashtest.c (added), pbx/pbx_ael.c,
	  include/asterisk/hashtab.h (added), main/config.c: This is the
	  perhaps the biggest, boldest, most daring change I've ever
	  committed to trunk. Forgive me in advance any disruption this may
	  cause, and please, report any problems via the bugtracker. The
	  upside is that this can speed up large dialplans by 20 times (or
	  more). Context, extension, and priority matching are all fairly
	  constant-time searches. I introduce here my hashtables
	  (hashtabs), and a regression for them. I would have used the
	  ast_obj2 tables, but mine are resizeable, and don't need the
	  object destruction capability. The hashtab stuff is well tested
	  and stable. I introduce a data structure, a trie, for extension
	  pattern matching, in which knowledge of all patterns is
	  accumulated, and all matches can be found via a single traversal
	  of the tree. This is per-context. The trie is formed on the first
	  lookup attempt, and stored in the context for future lookups.
	  Destruction routines are in place for hashtabs and the pattern
	  match trie. You can see the contents of the pattern match trie by
	  using the 'dialplan show' cli command when 'core set debug' has
	  been done to put it in debug mode. The pattern tree traversal
	  only traverses those parts of the tree that are interesting. It
	  uses a scoreboard sort of approach to find the best match. The
	  speed of the traversal is more a function of the length of the
	  pattern than the number of patterns in the tree. The tree also
	  contains the CID matching patterns. See the source code comments
	  for details on how everything works. I believe the approach
	  general enough that any issues that might come up involving fine
	  points in the pattern matching algorithm, can be solved by just
	  tweaking things. We shall see. The current pattern matcher is
	  fairly involved, and replicating every nuance of it is difficult.
	  If you find and report problems, I will try to resolve than as
	  quickly as I can. The trie and hashtabs are added to the existing
	  context and exten structs, and none of the old machinery has been
	  removed for the sake of the multitude of functions that use them.
	  In the future, we can (maybe) weed out the linked lists and save
	  some space.

2007-11-08 23:53 +0000 [r89124-89126]  Jason Parker <jparker@digium.com>

	* /, main/say.c: Merged revisions 89125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11203) ........ r89125 | qwell | 2007-11-08 17:52:35 -0600
	  (Thu, 08 Nov 2007) | 4 lines Properly say the seconds here..
	  Issue 11203, fix described by vma. ........

	* pbx/pbx_lua.c: Add check_hangup() method to pbx_lua, which can be
	  used to check whether it is time to hangup a channel. Closes
	  issue #11202, patch by mnicholson

2007-11-08 22:33 +0000 [r89122-89123]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: app_voicemail failed to build when
	  compiling with IMAP_STORAGE Now it does not.

	* main/threadstorage.c: AST_LIST_REMOVE_CURRENT takes only one
	  argument. Thanks to snuffy for pointing this out on IRC

2007-11-08 21:27 +0000 [r89121]  Joshua Colp <jcolp@digium.com>

	* funcs/func_env.c: Make func_env build again.

2007-11-08 21:01 +0000 [r89120]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 89119 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89119 | mmichelson | 2007-11-08 15:00:08 -0600 (Thu, 08 Nov
	  2007) | 7 lines Rework of the commit I made yesterday to use the
	  already built-in ast_uri_decode function as opposed to my
	  home-rolled one. Also added comments. Thanks to oej for pointing
	  me in the right direction ........

2007-11-08 20:39 +0000 [r89118]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_features.c: convert this code to a more efficient
	  idiom

2007-11-08 18:49 +0000 [r89116-89117]  Jason Parker <jparker@digium.com>

	* res/res_smdi.c: Change a warning to a notice. Issue #11195, patch
	  by eliel

	* /, configs/cdr_adaptive_odbc.conf.sample,
	  configs/res_odbc.conf.sample: Merged revisions 89115 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11195) ........ r89115 | qwell | 2007-11-08 12:45:15 -0600
	  (Thu, 08 Nov 2007) | 4 lines Avoid warnings on load when using
	  sample configuration files. Issue 11195, patch by eliel. ........

2007-11-08 17:32 +0000 [r89113-89114]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_readfile.c, funcs/func_env.c: Add the FILE() dialplan
	  function and deprecate ReadFile.

	* channels/chan_features.c: Fix missed conversion to linkedlists
	  macro change

2007-11-08 16:51 +0000 [r89112]  Mark Michelson <mmichelson@digium.com>

	* /: Blocking changes from previous 1.4 commit

2007-11-08 09:21 +0000 [r89108-89110]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_voicemail.c: use %f instead of %lf (the 'l' is ignored
	  anyways).

	* main/audiohook.c: use %d and cast to int instead of %zd for
	  size_t object, this helps portability.

	* channels/chan_unistim.c: initialize a variable to silence
	  compiler. The type of warnings emitted depends on the
	  optimization level, at the lower levels the compiler doesn't
	  always understand what the programmer has in mind. In this case I
	  could not understand it either.

2007-11-08 05:36 +0000 [r89106-89107]  Kevin P. Fleming <kpfleming@digium.com>

	* main/srv.c, /: Merged revisions 89105 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89105 | kpfleming | 2007-11-08 00:26:47 -0500 (Thu, 08 Nov 2007)
	  | 2 lines fix a glaring bug in the new SRV record handling that
	  would cause incorrect weight sorting ........

	* main/autoservice.c, main/frame.c, apps/app_meetme.c,
	  res/res_features.c, funcs/func_strings.c, main/devicestate.c,
	  res/res_musiconhold.c, channels/chan_iax2.c, apps/app_followme.c,
	  codecs/codec_zap.c, res/res_jabber.c, main/indications.c,
	  main/astobj2.c, main/config.c, main/loader.c, main/cli.c,
	  main/cdr.c, main/channel.c, main/manager.c, res/res_agi.c,
	  main/logger.c, main/app.c, main/image.c, res/res_speech.c,
	  main/sched.c, main/pbx.c, main/translate.c, res/res_crypto.c,
	  channels/chan_agent.c, utils/astman.c, apps/app_queue.c,
	  channels/iax2-parser.c, main/srv.c,
	  include/asterisk/linkedlists.h, main/file.c, pbx/pbx_dundi.c,
	  main/event.c, main/audiohook.c, res/res_odbc.c, main/asterisk.c,
	  apps/app_voicemail.c: improve linked-list macros in two ways: -
	  the *_CURRENT macros no longer need the list head pointer
	  argument - add AST_LIST_MOVE_CURRENT to encapsulate the
	  remove/add operation when moving entries between lists

2007-11-08 05:00 +0000 [r89104]  Tilghman Lesher <tlesher@digium.com>

	* /, doc/valgrind.txt: Merged revisions 89103 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89103 | tilghman | 2007-11-07 22:55:19 -0600 (Wed, 07 Nov 2007)
	  | 2 lines Typo ........

2007-11-08 02:28 +0000 [r89096-89102]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 89101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89101 | file | 2007-11-07 22:26:48 -0400 (Wed, 07 Nov 2007) | 4
	  lines Do not add a sip: to the beginning of the To URI unless
	  needed. (closes issue #10756) Reported by: goestelecom ........

	* /, channels/chan_sip.c: Merged revisions 89099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89099 | file | 2007-11-07 21:28:56 -0400 (Wed, 07 Nov 2007) | 6
	  lines Improve the devicestate logic for multiple devices. If any
	  are available then the extension is considered available. (closes
	  issue #10164) Reported by: nic_bellamy Patches:
	  sip-hinting-svn-branch-1.4.patch uploaded by nic (license 299)
	  ........

	* /, channels/chan_sip.c: Merged revisions 89097 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89097 | file | 2007-11-07 21:11:25 -0400 (Wed, 07 Nov 2007) | 8
	  lines Add support for allowing one outgoing transaction. This
	  means if a response comes back out of order chan_sip will still
	  handle it. I dream of a chan_sip with real transaction support.
	  (closes issue #10946) Reported by: flefoll (closes issue #10915)
	  Reported by: ramonpeek (closes issue #9567) Reported by:
	  atca_pres ........

	* /, channels/chan_sip.c: Merged revisions 89095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89095 | file | 2007-11-07 19:53:25 -0400 (Wed, 07 Nov 2007) | 4
	  lines If callerid is configured in sip.conf use that for checking
	  the presence of an extension in the dialplan. (closes issue
	  #11185) Reported by: spditner ........

2007-11-07 23:47 +0000 [r89094]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_queue.c: Merged revisions 89093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89093 | tilghman | 2007-11-07 17:39:37 -0600 (Wed, 07 Nov 2007)
	  | 7 lines The member refcount must be incremented, to avoid using
	  it after deallocation. A huge thanks go to lvl- for patiently
	  providing the necessary valgrind output that was necessary to
	  finding this problem of memory corruption. Reported by: lvl-
	  Patch by: tilghman Closes issue #11174 ........

2007-11-07 23:18 +0000 [r89091-89092]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: If imapfolder has been specified in
	  voicemail.conf, we should not connect to INBOX... ever. It may
	  not exist. (closes issue #11151, reported by selsky, patched by
	  me)

	* /, channels/chan_sip.c: Merged revisions 89090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89090 | mmichelson | 2007-11-07 16:40:35 -0600 (Wed, 07 Nov
	  2007) | 6 lines This patch makes it possible for SIP phones to
	  dial extensions defined with '#' characters in extensions.conf
	  AND maintain their escaped characters when forming URI's (closes
	  issue #10681, reported by cahen, patched by me, code review by
	  file) ........

2007-11-07 22:09 +0000 [r89089]  Steve Murphy <murf@digium.com>

	* /, res/res_jabber.c, cdr/cdr_tds.c: Merged revisions 89088 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89088 | murf | 2007-11-07 14:40:28 -0700 (Wed, 07 Nov 2007) | 1
	  line In response to 10578, I just ran 1.4 thru valgrind; some of
	  the config leakage I've already fixed, but it doesn't hurt to
	  double check. I found and fixed leaks in res_jabber, cdr_tds,
	  pbx_ael. Nothing major, tho. ........

2007-11-07 17:45 +0000 [r89086]  Joshua Colp <jcolp@digium.com>

	* channels/h323/ast_h323.cxx: Minor change so chan_h323 builds
	  again.

2007-11-07 13:12 +0000 [r89082-89084]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: remove enter/exit comments when handling subdirectory.
	  If we really want them we can remove the --no-print-directory

	* main/loader.c: remove a debugging message which i forgot in.

	* Makefile: match changes in menuselect's Makefile

2007-11-07 04:21 +0000 [r89077-89081]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_playback.c: Suppress erroneous warnings on load.
	  Reported by: eliel Patch by: eliel Closes issue #11177

	* /, configs/extensions.ael.sample: Merged revisions 89079 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89079 | tilghman | 2007-11-06 22:07:49 -0600 (Tue, 06 Nov 2007)
	  | 5 lines Suppress AEL warnings on load. Reported by: eliel Patch
	  by: eliel Closes issue #11178 ........

	* channels/chan_zap.c, configs/zapata.conf.sample: Provide the
	  ability to directly manipulate the TON/NPI bits in the
	  dialstring. Reported by: thetatag Patch by:
	  thetatag/stevens/tilghman Closes issue #5331

	* contrib/utils/eagi_proxy.c (added): Add contributed EAGI proxy,
	  which provides FastAGI functionality for EAGI, while also
	  buffering the audio stream. Reported by: devil_slayer Patch by:
	  devil_slayer Closes issue #8921

2007-11-07 00:16 +0000 [r89076]  Russell Bryant <russell@digium.com>

	* main/astmm.c: Fix another CLI command so it doesn't run the real
	  code when called for initialization.

2007-11-07 00:04 +0000 [r89075]  Mark Michelson <mmichelson@digium.com>

	* doc/tex/imapstorage.tex: Adding documentation regarding
	  imapfolder, imapgreetings, and greetingsfolder options in
	  voicemail.conf (closes issue #11133, reported by selsky, patched
	  by blitzrage)

2007-11-07 00:00 +0000 [r89073-89074]  Russell Bryant <russell@digium.com>

	* include/asterisk/agi.h, res/res_agi.c, CHANGES: Print out the
	  channel name as a prefix to the "agi debug" output. This makes
	  AGI debugging on busy systems much easier. (closes issue #10730)
	  Reported by: junky Patches: agi_debug_chan.diff uploaded by junky
	  (license 177) 20070923_10730.diff uploaded by mvanbaak (license
	  7)

	* apps/app_meetme.c, CHANGES: Added the ability to do "meetme
	  concise" with the "meetme" CLI command. This extends the concise
	  capabilities of this CLI command to include listing all
	  conferences, instead of an addition to the other sub commands for
	  the "meetme" command. (closes issue #11078) Reported by: jthomas
	  Patches: meetme-concise.patch uploaded by jthomas (license 293)

2007-11-06 23:08 +0000 [r89072]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c: Fix up some PBX logic that became broken. The code
	  would exit prematurely when it should have been collecting more
	  digits. (closes issue #11175) Reported by: pj

2007-11-06 22:51 +0000 [r89071]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_jingle.c, channels/chan_phone.c,
	  codecs/codec_g722.c, main/frame.c, channels/chan_sip.c,
	  channels/chan_skinny.c, main/translate.c, channels/chan_h323.c,
	  main/file.c, channels/chan_gtalk.c, include/asterisk/frame.h,
	  main/rtp.c, channels/chan_mgcp.c, include/asterisk/translate.h:
	  Commit some cleanups to the format type code. - Remove the
	  AST_FORMAT_MAX_* types, as these are consuming 3 out of our
	  available 32 bits. - Add a native slin16 type, so that 16kHz
	  codecs can translate without losing resolution. (This doesn't
	  affect anything immediately, until another codec has wb support.)

2007-11-06 22:36 +0000 [r89070]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: Adding the
	  queue strategy wrandom (closes issue #10942, reported and patched
	  by julianjm, documentation changes by me)

2007-11-06 22:15 +0000 [r89069]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c, doc/tex/channelvariables.tex, CHANGES: Added
	  the S() and L() options to the MeetMe application. These are
	  pretty much identical to the S() and L() options to Dial(). They
	  let you set timeouts for the conference, as well as have warning
	  sounds played to let the caller know how much time is left, and
	  when it is running out. (closes issue #8030) Reported by: areski
	  Patches: meetme_timeout_timelimit_v2.patch uploaded by areski
	  (license 29)

2007-11-06 22:05 +0000 [r89068]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Added CLI and manager commands for changing a
	  queue member's penalty (closes issue #9374, reported and
	  initially patched by wuwu, intermediate patch by eliel, and final
	  patch by me)

2007-11-06 22:01 +0000 [r89067]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add some more locking as well as API update
	  for libss7 for new transport types

2007-11-06 21:08 +0000 [r89062]  Steve Murphy <murf@digium.com>

	* /, main/config.c: Merged revisions 89036 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89036 | murf | 2007-11-06 10:52:50 -0700 (Tue, 06 Nov 2007) | 1
	  line closes issue #8786 - where the [catname](!) and
	  [catname](othercat1,othercat2,...) notation gets dropped across a
	  ConfigUpdate (or any other thing that would cause a config file
	  to be written). While I was at it, I also cleaned up some of the
	  destroy routines to free up comments, which was not being done.
	  Made sure the new struct I introduced is also cleaned up properly
	  at destruction time. My code handles multiple template
	  inclusions. Many thanks to ssokol for his patch, which, while not
	  literally used in the final merge, served as a foundation for the
	  fix. ........

2007-11-06 20:55 +0000 [r89057]  Joshua Colp <jcolp@digium.com>

	* main/channel.c: Remove native bridging check for DTMF based
	  transfers. Thanks to the last batch of RTP changes it is no
	  longer required for the media stream to go through Asterisk if
	  DTMF is going over signalling. It will simply reinvite back as
	  needed. (closes issue #11172) Reported by: ibc

2007-11-06 20:32 +0000 [r89055]  Mark Michelson <mmichelson@digium.com>

	* res/res_features.c: Instead of trying to callback a local channel
	  on a failed attended transfer, call the device that made the
	  transfer instead. This makes for much smoother calling back when
	  queues are involved. (closes issue #11155, reported by IPetrov)
	  Tremendous thanks to Russell for pulling me out of my block I was
	  having on this one

2007-11-06 20:22 +0000 [r89052-89054]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 89053 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89053 | russell | 2007-11-06 14:18:49 -0600 (Tue, 06
	  Nov 2007) | 3 lines Fix init_classes() so that classes that
	  actually do have files loaded aren't treated as empty, and
	  immediately destroyed ... ........

	* main/astmm.c: Fix the memory show allocations CLI command so that
	  it doesn't spew out all of the current memory allocations when
	  you start Asterisk, when the command's handler gets called for
	  initialization.

2007-11-06 19:40 +0000 [r89051]  Steve Murphy <murf@digium.com>

	* main/ast_expr2f.c, main/ast_expr2.fl: Hoping to avoid a crash in
	  OSX for a problem blitzrage found

2007-11-06 19:23 +0000 [r89050]  Olle Johansson <oej@edvina.net>

	* main/fskmodem.c: Formatting. Illegaly using some spare spaces
	  from Russell's space-bucket.

2007-11-06 19:16 +0000 [r89049]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 89045 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89045 | tilghman | 2007-11-06 13:09:06 -0600 (Tue, 06
	  Nov 2007) | 2 lines We went to the trouble of creating a method
	  of tracking failed trylocks, then never turned it on (oops).
	  ........

2007-11-06 19:10 +0000 [r89048]  Olle Johansson <oej@edvina.net>

	* main/tdd.c, include/asterisk/tdd.h: Additional TDD changes
	  (preparing for SIP changes - adding TDD support to SIP)

2007-11-06 19:10 +0000 [r89047]  Jason Parker <jparker@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 89046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89046 | qwell | 2007-11-06 13:09:30 -0600 (Tue, 06 Nov 2007) | 4
	  lines Correctly set the total number of channels from a zaptel
	  transcoder board. SPD-49, patch by Matthew Nicholson. ........

2007-11-06 19:04 +0000 [r89044]  Mark Michelson <mmichelson@digium.com>

	* apps/app_readfile.c, res/res_features.c, apps/app_sayunixtime.c,
	  apps/app_test.c, apps/app_chanisavail.c, res/res_musiconhold.c,
	  apps/app_exec.c, apps/app_followme.c, apps/app_minivm.c,
	  apps/app_mp3.c, apps/app_amd.c, apps/app_while.c, main/pbx.c,
	  apps/app_nbscat.c, channels/chan_sip.c, apps/app_festival.c,
	  apps/app_softhangup.c, apps/app_waitforsilence.c,
	  channels/chan_agent.c, apps/app_morsecode.c, apps/app_getcpeid.c,
	  apps/app_playback.c, res/res_monitor.c, apps/app_speech_utils.c,
	  apps/app_forkcdr.c, apps/app_waitforring.c,
	  apps/app_directed_pickup.c, apps/app_macro.c, apps/app_sms.c,
	  res/res_indications.c, apps/app_chanspy.c, apps/app_mixmonitor.c,
	  apps/app_stack.c: "show application <foo>" changes for clarity.
	  (closes issue #11171, reported and patched by blitzrage) Many
	  thanks!

2007-11-06 19:04 +0000 [r89043]  Olle Johansson <oej@edvina.net>

	* /, main/tdd.c: Merged revisions 89042 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89042 | oej | 2007-11-06 19:53:37 +0100 (Tis, 06 Nov 2007) | 2
	  lines Bug fixes to tdd support in zaptel. ........ (Small changes
	  for trunk)

2007-11-06 18:44 +0000 [r89041]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, include/asterisk/jabber.h,
	  channels/chan_gtalk.c, res/res_jabber.c: Allow gtalk and jingle
	  to use TLS connections again. Closes issue #9972

2007-11-06 18:23 +0000 [r89038]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 89037 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r89037 | russell | 2007-11-06 12:20:07 -0600 (Tue, 06
	  Nov 2007) | 11 lines If someone were to delete the files used by
	  an existing MOH class, and then issue a reload, further use of
	  that class could result in a crash due to dividing by zero. This
	  set of changes fixes up some places to prevent this from
	  happening. (closes issue #10948) Reported by: jcomellas Patches:
	  res_musiconhold_division_by_zero.patch uploaded by jcomellas
	  (license 282) Additional changes added by me. ........

2007-11-06 17:10 +0000 [r89034]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 89032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r89032 | file | 2007-11-06 13:08:05 -0400 (Tue, 06 Nov 2007) | 4
	  lines Make it so that if a peer is determined to be unreachable
	  using qualify their devicestate will report back unavailable.
	  (closes issue #11006) Reported by: pj ........

2007-11-06 17:05 +0000 [r89031]  Luigi Rizzo <rizzo@icir.org>

	* main/loader.c: Fix embedding of modules on FreeBSD: the
	  constructor for the list of modules was run after the
	  constructors for the embedded modules (which appended entries to
	  the list). As a result, the list appeared empty when it was time
	  to use it. On linux the order of execution of constructor was
	  evidently different (it may depend on the ordering of modules in
	  the ELF file). This is only a workaround - there may be other
	  situations where the execution of constructors causes problems,
	  so if we manage to find a more general solution this workaround
	  can go away.

2007-11-06 16:29 +0000 [r88974-88995]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, /, configs/zapata.conf.sample: Merged
	  revisions 88994 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88994 | file | 2007-11-06 12:24:56 -0400 (Tue, 06 Nov 2007) | 6
	  lines Fix improbable but possible memory leaks in chan_zap.
	  (closes issue #11166) Reported by: eliel Patches:
	  chan_zap.c.patch uploaded by eliel (license 64) ........

	* channels/chan_agent.c: Update chan_agent documentation. Change a
	  | to , as that is now the required way. (closes issue #11167)
	  Reported by: eliel Patches: chan_agent.c.patch uploaded by eliel
	  (license 64)

2007-11-06 15:01 +0000 [r88973]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_unistim.c, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Set up detection
	  of IP_PKTINFO in autoconf for chan_unistim

2007-11-06 14:17 +0000 [r88932-88937]  Russell Bryant <russell@digium.com>

	* channels/chan_unistim.c: convert uses of LOG_DEBUG to use
	  ast_debug()

	* channels/chan_unistim.c, configs/unistim.conf.sample: Add
	  jitterbuffer support to chan_unistim. (closes issue #11168)
	  Reported by: IgorG Patches: unistimjb-88863-1.patch uploaded by
	  IgorG (license 20)

	* main/pbx.c, /, channels/busy.h, channels/ringtone.h,
	  include/asterisk/pbx.h: Merged revisions 88805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88805 | russell | 2007-11-05 16:07:54 -0600 (Mon, 05 Nov 2007) |
	  12 lines After seeing crashes related to channel variables, I
	  went looking around at the ways that channel variables are
	  handled. In general, they were not handled in a thread-safe way.
	  The channel _must_ be locked when reading or writing from/to the
	  channel variable list. What I have done to improve this situation
	  is to make pbx_builtin_setvar_helper() and friends lock the
	  channel when doing their thing. Asterisk API calls almost all
	  lock the channel for you as necessary, but this family of
	  functions did not. (closes issue #10923, reported by atis)
	  (closes issue #11159, reported by 850t) ........

	* /, include/asterisk/lock.h: Merged revisions 88931 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r88931 | russell | 2007-11-06 07:50:15 -0600 (Tue, 06
	  Nov 2007) | 8 lines Remove some checks to see if locks are
	  initialized from the non-DEBUG_THREADS versions of the lock
	  routines. These are incorrect for a number of reasons: - It
	  breaks the build on mac. - If there is a problem with locks not
	  getting initialized, then the proper fix is to find that place
	  and fix the code so that it does get initialized. - If additional
	  debug code is needed to help find the problem areas, then this
	  type of things should _only_ be put in the DEBUG_THREADS
	  wrappers. ........

2007-11-06 08:17 +0000 [r88898-88913]  Luigi Rizzo <rizzo@icir.org>

	* channels/Makefile: explain that the host environment must be used
	  to build gentone; Remove unset variables, they would be
	  misleading.

	* Makefile: don't export variables that can be retrieved from
	  makeopts in child subdirs

2007-11-06 02:53 +0000 [r88863]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/srv.h: Merged revisions 88862 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r88862 | kpfleming | 2007-11-05 20:52:05 -0600 (Mon, 05
	  Nov 2007) | 2 lines update comment to match the state of the code
	  ........

2007-11-05 23:31 +0000 [r88827]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 88826 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88826 | mmichelson | 2007-11-05 17:29:29 -0600 (Mon, 05 Nov
	  2007) | 6 lines Reworked deadlock avoidance in __ast_read.
	  Restored audio to callback agents. (closes issue #11071, reported
	  by callguy, patched by me, tested by callguy and Ted Brown)
	  ........

2007-11-05 21:36 +0000 [r88770]  Luigi Rizzo <rizzo@icir.org>

	* Makefile, utils/Makefile: Move AUDIO_LIBS outside the top level
	  Makefile. This too is used only in one place.

2007-11-05 21:35 +0000 [r88769]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 88768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88768 | russell | 2007-11-05 15:33:56 -0600 (Mon, 05 Nov 2007) |
	  8 lines When traversing the list of channel variables here in
	  transmit_invite(), the asterisk channel must be locked, as this
	  data may change at any time. (I have seen numerous reports of
	  crashes related to the handling of channel variables. There are a
	  couple of issues on the bug tracker related to it, but it has
	  also been noted on IRC and mailing lists. So, I am finding and
	  fixing some places where channel variables are handled
	  improperly.) ........

2007-11-05 21:27 +0000 [r88767]  Luigi Rizzo <rizzo@icir.org>

	* Makefile, main/Makefile: Move the last instance of AST_LIBS to
	  the only place it is used, namely main/Makefile . I am unclear
	  where decisions on the build environment (CFLAGS, LDFLAGS, LIBS
	  and so on) should be made - right now they are split here and
	  there. As a first step in cleaning up this situation, i am trying
	  to at least collect all instances of each variable in one place.

2007-11-05 21:23 +0000 [r88766]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 88765 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88765 | russell | 2007-11-05 15:21:39 -0600 (Mon, 05 Nov 2007) |
	  2 lines Fix up some indentation. ........

2007-11-05 20:50 +0000 [r88764]  Luigi Rizzo <rizzo@icir.org>

	* Makefile.moddir_rules: comment out an unused variable. Remove it
	  in a few days if no problems arise.

2007-11-05 20:44 +0000 [r88710-88740]  Russell Bryant <russell@digium.com>

	* main/srv.c, /, include/asterisk/srv.h: Merged revisions 88719 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88719 | russell | 2007-11-05 14:40:01 -0600 (Mon, 05 Nov 2007) |
	  7 lines Merge changes from
	  asterisk/team/kpfleming/SRV-priority-handling Previously, the SRV
	  record support in Asterisk was broken. There was no guarantee on
	  what record Asterisk would choose to actually use. This set of
	  changes improves the situation by ensuring that Asterisk will
	  choose the highest priority record. ........

	* main/channel.c, /: Merged revisions 88709 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88709 | russell | 2007-11-05 14:11:04 -0600 (Mon, 05 Nov 2007) |
	  20 lines Merge the last bit of changes from
	  asterisk/team/russell/readq-1.4 The issue here is that the
	  channel frame readq handling got broken when the code was
	  converted to use the linked list macros. It caused corruption of
	  the list head and tail pointers. So, I fixed up the usage of the
	  linked list macros and in passing, simplified the code. I also
	  documented what the code is doing, as it was a bit difficult to
	  figure out at first. This bug showed itself with crashes showing
	  messed up head/tail pointers for the readq. However, there are a
	  couple of crashes that aren't quite as obvious, but I think may
	  be related. So, if your bug gets closed by this commit, but you
	  still have a problem, please reopen or create a new bug report.
	  (closes issue #10936) (closes issue #10595) (closes issue #10368)
	  (closes issue #11084) (closes issue #10040) (closes issue #10840)
	  ........

2007-11-05 19:22 +0000 [r88675]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: Cleanup the installation of samples, avoiding
	  repetitions. I am preserving the behaviour on *.adsi files, i.e.
	  overwrite anything there without making a backup. However I am
	  not sure that this is the intended behaviour.

2007-11-05 18:52 +0000 [r88673]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 88671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88671 | file | 2007-11-05 14:47:13 -0400 (Mon, 05 Nov 2007) | 7
	  lines If a SIP channel is put on hold multiple times do not keep
	  incrementing the onHold value. (closes issue #11085) Reported by:
	  francesco_r Tested by: blitzrage (closes issue #10474) Reported
	  by: acennami ........

2007-11-05 18:22 +0000 [r88653]  Tilghman Lesher <tlesher@digium.com>

	* CHANGES: Change wording to that suggested by MasterYoda

2007-11-05 18:00 +0000 [r88652]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: simplify (hopefully) the printing of $(MAKE) in aligned
	  output.

2007-11-05 17:52 +0000 [r88651]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 88624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88624 | russell | 2007-11-05 11:46:02 -0600 (Mon, 05 Nov 2007) |
	  5 lines Fix up datastore handling in ast_do_masquerade(). The
	  code is intended to move any channel datastores from the old
	  channel to the new one. However, it did not use the linked list
	  macros properly to accomplish the task. The existing code would
	  only work if there was only a single datastore on the old
	  channel. ........

2007-11-05 17:44 +0000 [r88587-88615]  Luigi Rizzo <rizzo@icir.org>

	* Makefile: print messages when entering/leaving a directory so we
	  know where we are (sometimes it is obvious, sometimes it is not).

	* Makefile.moddir_rules: merge two rules with the same right hand;
	  document a bit what is done here.

2007-11-05 17:21 +0000 [r88586]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 88585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11163) ........ r88585 | qwell | 2007-11-05 11:19:41 -0600
	  (Mon, 05 Nov 2007) | 4 lines Make sure we destroy the config
	  structure on configuration failure. Issue 11163, patch by eliel.
	  ........

2007-11-05 17:00 +0000 [r88584]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile.rules: use a variable name that actually indicates what
	  it is for

2007-11-05 16:41 +0000 [r88553]  Luigi Rizzo <rizzo@icir.org>

	* Makefile.rules: Put extra compiler flags into a variable so they
	  are not repeated too many times. On passing, add some comments
	  and fix indentation a bit. On passing, i suspect that the
	  following pattern is wrong %.eoo: %.o but in case it will be
	  fixed in a later commit.

2007-11-05 16:30 +0000 [r88540]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 88539 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88539 | tilghman | 2007-11-05 10:20:13 -0600 (Mon, 05 Nov 2007)
	  | 4 lines Don't check used pooled connections for connection
	  status, as it will cause issues for prepared queries. Reported
	  by: Nick Gorham (via -dev list) Patch by: tilghman ........

2007-11-05 15:15 +0000 [r88525]  Luigi Rizzo <rizzo@icir.org>

	* main/db.c: remove a cygwin-specific function remap that does not
	  work.

2007-11-05 13:11 +0000 [r88510]  Joshua Colp <jcolp@digium.com>

	* channels/chan_unistim.c: Fix memory leaks and deadlocks in
	  chan_unistim. (closes issue #11158) Reported by: eliel Patches:
	  chan_unistim.c.patch uploaded by eliel (license 64)

2007-11-04 22:42 +0000 [r88454-88490]  Luigi Rizzo <rizzo@icir.org>

	* /: block merging of not-applicable patch

	* main/channel.c, main/pbx.c, apps/app_meetme.c,
	  channels/chan_sip.c, res/res_features.c, main/utils.c,
	  channels/chan_iax2.c, include/asterisk/stringfields.h: Simplify
	  the implementation and the API for stringfields; details and
	  examples are in include/asterisk/stringfields.h. Not applicable
	  to older branches except for 1.4 which will receive a fix for the
	  routines that free memory pools.

2007-11-03 14:19 +0000 [r88437]  Tilghman Lesher <tlesher@digium.com>

	* main/term.c: Revert commit #86119. Some users intentionally do
	  not want colorized terminals, so this was a misfeature.

2007-11-03 04:55 +0000 [r88422]  James Golovich <james@gnuinter.net>

	* main/db.c: Set CLI command to the correct name. Rev 85460
	  introduced two 'database show' commands when this one should have
	  been 'database showkey'

2007-11-02 22:36 +0000 [r88368-88409]  Russell Bryant <russell@digium.com>

	* channels/chan_unistim.c: fix some issues with crashing on unload,
	  when it didn't completely load cleanly

	* channels/chan_unistim.c: Convert the CLI commands to the new
	  format

	* pbx/pbx_lua.c: propagate the DECLINE return value back to the
	  loader

	* pbx/pbx_lua.c: Don't kill asterisk if extensions.lua is not
	  present.

	* main/cli.c: Show the channel unique ID in the "show channel
	  concise" output (closes issue #11148, requested by falves11,
	  patched by me)

	* channels/chan_unistim.c (added), CREDITS,
	  configs/unistim.conf.sample (added), CHANGES, doc/unistim.txt
	  (added): Merge the code from asterisk/team/group/chan_unistim:
	  This introduces a new channel driver, chan_unistim, that supports
	  the Unistim VoIP protocol for Nortel phones. The following models
	  have been confirmed to work: i2002, i2004 and i2050. (closes
	  issue #8864) Reported by: c_hans Patches: chan_unistim.patch
	  uploaded by c (license 304) ustm_no_conf.diff uploaded by junky
	  (license 177) Tested by: c_hans, dbowerman, math, junky, loloski

2007-11-02 20:51 +0000 [r88329-88367]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 88366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88366 | file | 2007-11-02 17:49:45 -0300 (Fri, 02 Nov 2007) | 4
	  lines Make subscribecontext behave as advertised. It will now
	  look for the presence of a hint in the given context (be it
	  subscribecontext or context). (closes issue #10702) Reported by:
	  slavon ........

	* /, channels/chan_sip.c: Merged revisions 88328 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88328 | file | 2007-11-02 17:20:21 -0300 (Fri, 02 Nov 2007) | 6
	  lines If an INFO request within a dialog is received with a
	  content length of 0 simply send back a 200 OK. It is valid to do
	  this and the remote side is probably using it to make sure the
	  signalling is still alive. (closes issue #5747) Reported by:
	  chandi Patches: infofix-81430-1.patch uploaded by IgorG (license
	  20) ........

2007-11-02 20:13 +0000 [r88327]  Russell Bryant <russell@digium.com>

	* doc/tex/Makefile: Fix replacing the version number when it has a
	  '/' in it, like SVN-group-chan_unistim-r88326M-/trunk

2007-11-02 17:34 +0000 [r88287]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_lua.c: Oops, some dev-mode changes for ISO C90

2007-11-02 16:54 +0000 [r88284]  Jason Parker <jparker@digium.com>

	* /, main/say.c: Merged revisions 88283 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11147) ........ r88283 | qwell | 2007-11-02 11:51:08 -0500
	  (Fri, 02 Nov 2007) | 4 lines We need to make sure to specify a
	  language to ast_fileexists, otherwise it may fail for anything
	  besides en Issue 11147, fix discovered by both citats and myself
	  (independently), with input from Corydon76 ........

2007-11-02 16:26 +0000 [r88209-88267]  Tilghman Lesher <tlesher@digium.com>

	* CHANGES: Add a few bytes on LUA

	* main/pbx.c, utils/build-extensions-conf.lua (added),
	  build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, pbx/pbx_lua.c
	  (added), configs/extensions.lua.sample (added),
	  include/asterisk/pbx.h, makeopts.in: Add pbx_lua as a method of
	  doing extensions Reported by: mnicholson Patch by: mnicholson
	  Closes issue #11140

	* main/config.c: Don't re-cache the filename, but check to see if
	  it already exists Reported by: jamesgolovich Patch by:
	  jamesgolovich Closes issue #11144

	* /, include/asterisk/lock.h: Merged revisions 88210 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r88210 | tilghman | 2007-11-02 08:03:03 -0500 (Fri, 02
	  Nov 2007) | 5 lines Fix build on Solaris Reported by: snuffy
	  Patch by: ys Closes issue #11143 ........

	* main/pbx.c: 'h' extension doesn't execute past first priority
	  Reported by: dimas Patch by: dimas Closes bug #11146

2007-11-02 03:09 +0000 [r88197]  Joshua Colp <jcolp@digium.com>

	* cdr/cdr_odbc.c: Restore building under 64-bit platforms.

2007-11-01 23:26 +0000 [r88184]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  include/asterisk/jabber.h, channels/chan_gtalk.c, makeopts.in:
	  Remove traces of gnutls, since we no longer use/need it.

2007-11-01 23:26 +0000 [r88182-88183]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c: Modify WaitExten to include an optional dialtone
	  Closes issue #10783

	* UPGRADE.txt, cdr/cdr_odbc.c: Convert cdr_odbc to use res_odbc
	  managed connections Closes issue #10614

2007-11-01 22:26 +0000 [r88166]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, main/pbx.c, cdr/cdr_sqlite3_custom.c,
	  funcs/func_strings.c, funcs/func_cut.c, funcs/func_logic.c,
	  apps/app_exec.c, apps/app_queue.c, apps/app_playback.c,
	  res/ael/pval.c, pbx/pbx_loopback.c, funcs/func_odbc.c,
	  apps/app_minivm.c, res/res_agi.c, main/logger.c,
	  pbx/pbx_realtime.c, apps/app_macro.c, pbx/pbx_dundi.c,
	  utils/extconf.c, include/asterisk/pbx.h, pbx/pbx_config.c,
	  apps/app_mixmonitor.c, apps/app_rpt.c, cdr/cdr_custom.c,
	  cdr/cdr_manager.c: This commits the performance mods that give
	  the priority processing engine in the pbx, a 25-30% speed boost.
	  The two updates used, are, first, to merge the
	  ast_exists_extension() and the ast_spawn_extension() where they
	  are called sequentially in a loop in the code, into a slightly
	  upgraded version of ast_spawn_extension(), with a few extra args;
	  and, second, I modified the substitute_variables_helper_full, so
	  it zeroes out the byte after the evaluated string instead of
	  demanding you pre-zero the buffer; I also went thru the code and
	  removed the code that zeroed this buffer before every call to the
	  substitute_variables_helper_full. The first fix provides about a
	  9% speedup, and the second the rest. These figures come from the
	  'PIPS' benchmark I describe in blogs, conf. reports, etc.

2007-11-01 22:19 +0000 [r88164-88165]  Jason Parker <jparker@digium.com>

	* /: Crap, accidentally copied the props. Thanks for pointing this
	  out mvanbaak. The odds are quite high that this will break
	  automerge on every team branch.

	* /, include/asterisk/jabber.h, res/res_jabber.c: Switch res_jabber
	  to use openssl rather than gnutls. Closes issue #9972, patch by
	  phsultan. Copied from branch at
	  http://svn.digium.com/svn/asterisk/team/phsultan/res_jabber-openssl/

2007-11-01 17:25 +0000 [r88117]  Tilghman Lesher <tlesher@digium.com>

	* /, doc/valgrind.txt (added): Merged revisions 88116 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r88116 | tilghman | 2007-11-01 12:17:56 -0500 (Thu, 01
	  Nov 2007) | 2 lines Add some notes on using valgrind ........

2007-11-01 16:22 +0000 [r88079]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 88078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88078 | qwell | 2007-11-01 11:21:22 -0500 (Thu, 01 Nov 2007) | 4
	  lines Make sure we set the poll fds to NULL after free()ing it.
	  Part of issue 11017, patch by tzafrir. ........

2007-11-01 15:56 +0000 [r88062-88077]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c, pbx/pbx_dundi.c: Change some uses of free()
	  to ast_free(). (No functional differences.) (closes issue #11138)
	  Reported by: eliel Patches: pbx_dundi.c.patch uploaded by eliel
	  (license 64) chan_sip.c.patch uploaded by eliel (license 64)

	* utils/Makefile: Remove another copied source file on "make
	  clean". (closes issue #11137) Reported by: IgorG Patches:
	  addonclean-87971-1.patch uploaded by IgorG (license 20)

2007-11-01 13:30 +0000 [r88027]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 88026 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r88026 | file | 2007-11-01 10:27:37 -0300 (Thu, 01 Nov 2007) | 2
	  lines Fix up commit for my Zap channel with spies in Meetme fix.
	  (thanks Tony Mountifield!) ........

2007-11-01 06:12 +0000 [r88007-88010]  Tilghman Lesher <tlesher@digium.com>

	* main/utils.c: Conditionally free lock_info->thread_name to avoid
	  a useless warning Reported by: snuffy Patch by: snuffy Closes
	  issue #11125

	* apps/app_meetme.c, channels/chan_iax2.c: Janitor: use ast_free to
	  pair calls of ast_malloc and ast_calloc Reported by: eliel Patch
	  by: eliel Closes issue #11135

	* cdr/cdr_adaptive_odbc.c: Fix memory leak Reported by: eliel Fixed
	  by: tilghman Closes issue #11136

2007-11-01 01:55 +0000 [r87953-87971]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 87970 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87970 | file | 2007-10-31 22:53:55 -0300 (Wed, 31 Oct 2007) | 4
	  lines If a Zap channel contains a spy or a spy is added take it
	  out of the conference in kernel space and make it go through
	  Asterisk so the spy gets audio from both sides. (closes issue
	  #10060) Reported by: mparker ........

	* main/pbx.c: Drop any more references to type in the Exception
	  dialplan function. (closes issue #11134) Reported by: blitzrage
	  Patches: exception_patch.txt uploaded by blitzrage (license 10)

2007-10-31 21:23 +0000 [r87889-87909]  Jason Parker <jparker@digium.com>

	* /, res/res_jabber.c: Merged revisions 87908 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11131) ........ r87908 | qwell | 2007-10-31 16:23:11 -0500
	  (Wed, 31 Oct 2007) | 4 lines Make sure we free some allocated
	  memory before returning. Issue 11131, patch by eliel. ........

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 87906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11130) (closes issue #11132) ........ r87906 | qwell |
	  2007-10-31 16:16:20 -0500 (Wed, 31 Oct 2007) | 4 lines Don't try
	  to allocate memory that we're just going to re-allocate later
	  anyways. Issues 11130 and 11132, patch by eliel. ........

	* formats/format_sln.c, codecs/codec_adpcm.c, codecs/codec_gsm.c,
	  formats/format_wav_gsm.c, res/res_musiconhold.c,
	  codecs/codec_zap.c, formats/format_ilbc.c, res/res_smdi.c,
	  formats/format_pcm.c, formats/format_h263.c,
	  formats/format_h264.c, formats/format_jpeg.c,
	  formats/format_gsm.c, res/res_speech.c, res/res_clioriginate.c,
	  codecs/codec_lpc10.c, codecs/codec_g722.c, codecs/codec_a_mu.c,
	  formats/format_wav.c, codecs/codec_speex.c, codecs/codec_alaw.c,
	  res/res_adsi.c, res/res_convert.c, codecs/codec_g726.c,
	  formats/format_ogg_vorbis.c, res/res_ael_share.c,
	  formats/format_vox.c, codecs/codec_ulaw.c, formats/format_g723.c,
	  res/res_indications.c, codecs/codec_ilbc.c,
	  formats/format_g726.c, formats/format_g729.c: More changes to
	  change return values from load_module functions. (issue #11096)
	  Patches: codec_adpcm.c.patch uploaded by moy (license 222)
	  codec_alaw.c.patch uploaded by moy (license 222)
	  codec_a_mu.c.patch uploaded by moy (license 222)
	  codec_g722.c.patch uploaded by moy (license 222)
	  codec_g726.c.diff uploaded by moy (license 222) codec_gsm.c.patch
	  uploaded by moy (license 222) codec_ilbc.c.patch uploaded by moy
	  (license 222) codec_lpc10.c.patch uploaded by moy (license 222)
	  codec_speex.c.patch uploaded by moy (license 222)
	  codec_ulaw.c.patch uploaded by moy (license 222)
	  codec_zap.c.patch uploaded by moy (license 222)
	  format_g723.c.patch uploaded by moy (license 222)
	  format_g726.c.patch uploaded by moy (license 222)
	  format_g729.c.patch uploaded by moy (license 222)
	  format_gsm.c.patch uploaded by moy (license 222)
	  format_h263.c.patch uploaded by moy (license 222)
	  format_h264.c.patch uploaded by moy (license 222)
	  format_ilbc.c.patch uploaded by moy (license 222)
	  format_jpeg.c.patch uploaded by moy (license 222)
	  format_ogg_vorbis.c.patch uploaded by moy (license 222)
	  format_pcm.c.patch uploaded by moy (license 222)
	  format_sln.c.patch uploaded by moy (license 222)
	  format_vox.c.patch uploaded by moy (license 222)
	  format_wav.c.patch uploaded by moy (license 222)
	  format_wav_gsm.c.patch uploaded by moy (license 222)
	  res_adsi.c.patch uploaded by eliel (license 64)
	  res_ael_share.c.patch uploaded by eliel (license 64)
	  res_clioriginate.c.patch uploaded by eliel (license 64)
	  res_convert.c.patch uploaded by eliel (license 64)
	  res_indications.c.patch uploaded by eliel (license 64)
	  res_musiconhold.c.patch uploaded by eliel (license 64)
	  res_smdi.c.patch uploaded by eliel (license 64)
	  res_speech.c.patch uploaded by eliel (license 64)

2007-10-31 18:53 +0000 [r87888]  Steve Murphy <murf@digium.com>

	* /: Merged revisions 87849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87849 | murf | 2007-10-31 11:49:39 -0600 (Wed, 31 Oct 2007) | 1
	  line closes issue #11108 -- where the 'dialplan save' cli command
	  saves a file where the semicolon is not escaped. Fixed this; User
	  also wanted comments to be preserved across dialplan save, but
	  this is impossible at this point in time, because comments are
	  not stored in the dialplan. They are 'compiled' out of
	  extensions.conf. The only way to preserve those comments is to
	  use the config file reader/writer that the GUI uses to allow
	  online user edits. extensions.conf is first and foremost, a
	  config file, and is read in by the normal config-file reading
	  routines. Then, it is processed into a dialplan (context/exten
	  structs). (in the case of trunk, tho, no mods needed to be made
	  -- works OK there -- just make sure you use ',' to sep app args!)
	  ........

2007-10-31 18:09 +0000 [r87854]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, /: Merged revisions 87852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87852 | tilghman | 2007-10-31 13:03:53 -0500 (Wed, 31 Oct 2007)
	  | 2 lines Create samples for ALL of the available options in
	  asterisk.conf ........

2007-10-31 18:03 +0000 [r87833-87851]  Joshua Colp <jcolp@digium.com>

	* apps/app_mixmonitor.c: Add volume adjustment in.

	* apps/app_mixmonitor.c: Restore operation of the option that only
	  writes when the channel is bridged.

	* apps/app_chanspy.c: Add volume adjustment to spy audiohook in
	  app_chanspy.

2007-10-31 16:13 +0000 [r87817]  Tilghman Lesher <tlesher@digium.com>

	* CREDITS: Formatting cleanups, remove obsolete contributions
	  (modules no longer in Asterisk), and obfuscate email addresses
	  enough to stop most spam harvesters.

2007-10-31 16:07 +0000 [r87815]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/channel.h: Remove old whisper remnants from
	  channel.h

2007-10-31 15:46 +0000 [r87811]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c: Optimize pbx_substitute_variables

2007-10-31 04:20 +0000 [r87776]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, /: Merged revisions 87775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87775 | murf | 2007-10-30 21:51:52 -0600 (Tue, 30 Oct 2007) | 1
	  line Included some verbage in the check_includes func, to inform
	  the user that included contexts that have no match in the AEL,
	  might be OK, as AEL cannot check in the extensions.conf or the
	  in-memory contexts, as they may not be there at the time of the
	  check. ........

2007-10-30 23:08 +0000 [r87724-87740]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 87739 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r87739 | tilghman | 2007-10-30 18:02:22 -0500 (Tue, 30
	  Oct 2007) | 5 lines Fix for uninitialized mutexes on *BSD
	  Reported by: ys Fixed by: ys Closes issue #11116 ........

	* apps/app_exec.c: If no '?' is found in the arguments, don't
	  attempt to continue. Reported by: blitzrage Fixed by: tilghman
	  Closes issue #11111

2007-10-30 21:22 +0000 [r87687]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 87686 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87686 | russell | 2007-10-30 16:19:09 -0500 (Tue, 30 Oct 2007) |
	  11 lines Merge the changes from team/russell/iax2_poke_fix and
	  iax2-poke-fix-trunk There was a race condition related to the
	  handling of POKEing peers. Essentially, a reference to a peer is
	  held by the scheduler when there are pending callbacks, but the
	  reference count didn't reflect it. So, it was possible for a peer
	  to hit a reference count of zero and have its destructor begin to
	  be called at the same time that the scheduler thread ran a POKE
	  related callback. If that happened, a crash would likely occur.
	  (closes issue #11082, closes issue #11094) ........

2007-10-30 20:30 +0000 [r87626-87651]  Jason Parker <jparker@digium.com>

	* /, channels/Makefile: Merged revisions 87650 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87650 | qwell | 2007-10-30 15:29:41 -0500 (Tue, 30 Oct 2007) | 1
	  line Only try to clean out h323/ if the h323/Makefile exists.
	  ........

	* main/pbx.c: Update documentation to give an example of how to use
	  the return status of RaiseException Closes issue #11117, patch by
	  blitzrage (yay blitzrage)

2007-10-30 17:07 +0000 [r87573-87608]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c: The priority gets incremented after raising an
	  exception, so the priority should be set to 0

	* main/pbx.c: Jumped the gun a bit in the RaiseException app. It
	  would always return -1 since it checked for the existence of
	  something that will never exist.

2007-10-30 16:15 +0000 [r87572]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 87571 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87571 | file | 2007-10-30 13:13:39 -0300 (Tue, 30 Oct 2007) | 4
	  lines Add two more checks before printing out a warning message
	  about bridging. If either channel has hungup of course the bridge
	  will have failed. (closes issue #10009) Reported by: dimas
	  ........

2007-10-30 15:47 +0000 [r87568]  Jason Parker <jparker@digium.com>

	* /, main/editline/np/vis.c: Merged revisions 87567 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11113) ........ r87567 | qwell | 2007-10-30 10:45:35 -0500
	  (Tue, 30 Oct 2007) | 4 lines Fix build of editline on Solaris.
	  Issue 11113, patch by snuffy. ........

2007-10-29 22:44 +0000 [r87462-87498]  Kevin P. Fleming <kpfleming@digium.com>

	* utils/Makefile, utils, utils/hashtest2.c: UGH... while trying to
	  fix #10995, I found all kinds of cruft in this Makefile. It
	  should all be gone now, and as a side effect hashtest2 now builds
	  with --enable-dev-mode enabled without a host of errors

	* agi/Makefile, utils/Makefile, codecs/g722/Makefile,
	  main/editline/Makefile.in, Makefile.moddir_rules,
	  codecs/ilbc/Makefile, codecs/lpc10/Makefile,
	  main/db1-ast/Makefile: clean up assembler and preprocessor files
	  if they are here too

	* utils, agi, codecs, apps, cdr, codecs/ilbc, formats, funcs,
	  codecs/lpc10, main/db1-ast, codecs/g722, main/editline, main,
	  codecs/gsm, main/minimime, pbx, res, channels: ignore
	  preprocessor and assembler files if they are present

	* Makefile, /: Merged revisions 87460 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87460 | kpfleming | 2007-10-29 17:04:29 -0500 (Mon, 29 Oct 2007)
	  | 2 lines don't put '-pipe' into ASTCFLAGS if '-save-temps' is
	  already there (used when debugging preprocessor issues) because
	  the compiler will whine about each compile command ........

2007-10-29 21:34 +0000 [r87397-87428]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c: If a caller is listen-only, then don't bother
	  with doing talker detection. (closes issue #10911, reported by
	  junky, patched by me)

	* /, main/utils.c, include/asterisk/lock.h: Merged revisions 87396
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87396 | russell | 2007-10-29 15:22:07 -0500 (Mon, 29 Oct 2007) |
	  5 lines Add some more details to the output of "core show locks".
	  When a thread is waiting for a lock, this will now show the
	  details about who currently has it locked. (inspired by issue
	  #11100) ........

2007-10-29 20:13 +0000 [r87395]  Mark Michelson <mmichelson@digium.com>

	* UPGRADE.txt, apps/app_queue.c: Adding the more flexible
	  QUEUE_MEMBER function to replace the QUEUE_MEMBER_COUNT function.
	  A deprecation notice will be issued the first time
	  QUEUE_MEMBER_COUNT is used.

2007-10-29 20:02 +0000 [r87394]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c: Drop the RTCP Read too short message to debug. There
	  are some phones out there that send a sort of keep alive packet
	  in the RTCP that trigger this every 5 seconds.

2007-10-29 19:56 +0000 [r87393]  Jason Parker <jparker@digium.com>

	* apps/app_record.c: Make sure we set flags to a 0 value before
	  trying to use it. Pointed out by seanbright while I was debugging
	  issue 11109.

2007-10-29 19:47 +0000 [r87392]  Russell Bryant <russell@digium.com>

	* /, main/astmm.c: Merged revisions 87373 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87373 | russell | 2007-10-29 14:21:06 -0500 (Mon, 29 Oct 2007) |
	  5 lines Remove a lock that doesn't make any sense. The regions
	  lock needs to be held when traversing the list of allocated
	  chunks so that they can be printed out to the CLI. (Thanks to
	  eliel on #asterisk-dev for pointing this out!) ........

2007-10-29 17:22 +0000 [r87343]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 87342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87342 | file | 2007-10-29 14:20:28 -0300 (Mon, 29 Oct 2007) | 6
	  lines Fix issue where if both sides of the dialog cancelled the
	  dialog at the same time chan_sip could kepe retransmitting a
	  response for no reason. (closes issue #9566) Reported by:
	  atca_pres Patches: bug9566.patch uploaded by oej ........

2007-10-29 16:38 +0000 [r87295-87327]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: Remove duplicate stdlib.h include. (closes
	  issue #11105) Reported by: eliel Patches: app_voicemail.c.patch
	  uploaded by eliel (license 64)

	* channels/chan_misdn.c, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Add autoconf
	  checks for extra suppserv definitions that are not present in
	  releases yet. chan_misdn should now build against the latest
	  release. (closes issue #11103) Reported by: IgorG

	* /, main/utils.c: Merged revisions 87294 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87294 | file | 2007-10-29 11:23:49 -0300 (Mon, 29 Oct 2007) | 6
	  lines Fix issue with ast_unescape_semicolon going into an endless
	  loop. (closes issue #10550) Reported by: ramonpeek Patches:
	  unescape-85177-1.patch uploaded by IgorG (license 20) ........

2007-10-28 14:16 +0000 [r87263-87264]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_dialgroup.c (added): Add a simple dialgroup function.
	  By taking one of the simpler uses of Queue away from Queue, we
	  simplify the lives of people who do not need all the bells and
	  whistles. Also, this is part of the functions that people need to
	  reimplement Queue in the dialplan, as a set of logic, rather than
	  as a single app with hundreds of options.

	* /, funcs/func_odbc.c, funcs/func_strings.c, funcs/func_cut.c,
	  funcs/func_realtime.c: Merged revisions 87262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87262 | tilghman | 2007-10-28 08:46:55 -0500 (Sun, 28 Oct 2007)
	  | 7 lines Add autoservice to several more functions which might
	  delay in their responses. Also, make sure that func_odbc
	  functions have a channel on which to set variables. Reported by
	  russell Fixed by tilghman Closes issue #11099 ........

2007-10-27 15:41 +0000 [r87233-87247]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: Update the configure script for the last
	  libss7 API change

	* funcs/func_shell.c, funcs/func_lock.c: Make sure a channel exists
	  before attempting to start or stop channel autoservice in
	  func_lock and func_shell.

2007-10-27 00:48 +0000 [r87231-87232]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add Circuit Group Queury message code

	* channels/chan_zap.c: Make sure we turn on the DSP when we answer
	  the call

2007-10-26 22:21 +0000 [r87217]  Mark Michelson <mmichelson@digium.com>

	* CHANGES: Forgot to update CHANGES when I committed the linear
	  queue strategy. Thank you Russell, for pointing this out!

2007-10-26 21:37 +0000 [r87202]  Jason Parker <jparker@digium.com>

	* channels/chan_local.c, channels/chan_zap.c,
	  channels/chan_agent.c, channels/chan_features.c,
	  res/res_crypto.c, res/res_realtime.c, res/res_monitor.c:
	  Correctly use defined return values in (some) load_module
	  functions. (issue #11096) Patches: chan_agent.c.patch uploaded by
	  eliel (license 64) chan_local.c.patch uploaded by eliel (license
	  64) chan_features.c.patch uploaded by eliel (license 64)
	  chan_zap.c.patch uploaded by eliel (license 64)
	  res_monitor.c.patch uploaded by eliel (license 64)
	  res_realtime.c.patch uploaded by eliel (license 64)
	  res_crypto.c.patch uploaded by eliel (license 64)

2007-10-26 17:39 +0000 [r87187]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, /, include/asterisk/pval.h, res/ael/ael.tab.c,
	  res/ael/ael.y, pbx/pbx_ael.c, res/ael/ael_lex.c,
	  res/ael/ael.tab.h, utils/ael_main.c,
	  pbx/ael/ael-test/ref.ael-test16, res/ael/ael.flex,
	  utils/conf2ael.c, pbx/ael/ael-test/ref.ael-test19: Merged
	  revisions 87168 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87168 | murf | 2007-10-26 10:34:02 -0600 (Fri, 26 Oct 2007) | 1
	  line closes issue #11086 where a user complains that references
	  to following contexts report a problem; The problem was REALLy
	  that he was referring to empty contexts, which were being
	  ignored. Reporter stated that empty contexts should be OK. I
	  checked it out against extensions.conf, and sure enough, empty
	  contexts ARE ok. So, I removed the restriction from AEL. This,
	  though, highlighted a problem with multiple contexts of the same
	  name. This should be OK, also. So, I added the extend keyword to
	  AEL, and it can preceed the 'context' keyword (mixed with
	  'abstract', if nec.). This will turn off the warnings in AEL if
	  the same context name is used 2 or more times. Also, I now call
	  ast_context_find_or_create for contexts now, instead of just
	  ast_context_create; I did this because pbx_config does this. The
	  'extend' keyword thus becomes a statement of intent. AEL can now
	  duplicate the behavior of pbx_config, ........

2007-10-26 15:19 +0000 [r87153-87154]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, apps/app_queue.c: Added queue
	  strategy "linear". This strategy is useful for those who always
	  wish for their phones to be rung in a specific order. (closes
	  issue #7279, reported and initially patched by diLLec, patch
	  reworked by me)

	* configs/queues.conf.sample: Remove information about the
	  roundrobin strategy from trunk's queues.conf.sample since it no
	  longer exists

2007-10-26 14:00 +0000 [r87103-87121]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_curl.c, /: Merged revisions 87120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87120 | tilghman | 2007-10-26 08:54:30 -0500 (Fri, 26 Oct 2007)
	  | 7 lines The addition of autoservice to func_curl additionally
	  made func_curl dependent on the existence of a channel, with no
	  real reason. This should make func_curl once again work without a
	  channel. Reported by jmls. Fixed by tilghman. Closes issue #11090
	  ........

	* include/asterisk/app.h, funcs/func_strings.c, funcs/func_cut.c,
	  main/app.c: Use the same delimited character as the FILTER
	  function in FIELDQTY and CUT.

2007-10-25 23:11 +0000 [r87070]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, /, include/asterisk/linkedlists.h: Merged
	  revisions 87069 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r87069 | kpfleming | 2007-10-25 18:03:11 -0500 (Thu, 25 Oct 2007)
	  | 2 lines appending one list to another should leave the first
	  list empty, and not require the user to do that ........

2007-10-25 18:59 +0000 [r87040]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c: Add support for a muted user to request to
	  talk. The '2' option in the user menu will adjust this status if
	  a user is muted. The talk request status will be reflected in the
	  CLI commands as well as the manager interface. (closes issue
	  #9418) Reported by: imesper Patches: app_meetme_v2.patch uploaded
	  by imesper (license 275)

2007-10-25 16:21 +0000 [r87024]  Steve Murphy <murf@digium.com>

	* main/ast_expr2.y, res/res_config_sqlite.c, main/ast_expr2.c:
	  closes issue #11045 - each file needs to define
	  ASTERISK_FILE_VERSION, if you are going to set MTX_PROFILE in the
	  compiler flags; the problem was that the fixes were getting made
	  to the generated .c file, and erased the next time someone
	  regenerated that file from the corresponding .y or .flex file.
	  Moral of story: keep your eyes open and make mods to the .y (or
	  flex input file) and re-run bison (or flex) as the Makefile
	  directs for that file, and then check in both. Also,
	  res_config_sqlite was kinda missed, and has the same issue.

2007-10-24 21:26 +0000 [r86985]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, apps/app_queue.c: Adding the general
	  option "shared_lastcall" to queues so that a member's wrapuptime
	  may be used across multiple queues. (closes issue #9777, reported
	  and patched by eliel)

2007-10-24 20:59 +0000 [r86983]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 86982 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #11079) ........ r86982 | qwell | 2007-10-24 15:56:47 -0500
	  (Wed, 24 Oct 2007) | 5 lines Correctly respect hidecalleridname
	  configuration option. Simplify code slightly in the process.
	  Issue 11079, reported by ddv2005 ........

2007-10-24 13:21 +0000 [r86900-86967]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-ntest22, pbx/ael/ael-test/ref.ael-test2,
	  pbx/ael/ael-test/ref.ael-test3, res/ael/ael_lex.c,
	  pbx/ael/ael-test/ref.ael-test4, res/ael/ael.flex: closes issue
	  #11005, where #include uses the current dir instead of the config
	  dir (/etc/asterisk) for relative path includes for AEL

	* /, res/ael/ael.tab.c, res/ael/ael.y: Merged revisions 86936 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86936 | murf | 2007-10-23 22:14:28 -0600 (Tue, 23 Oct 2007) | 1
	  line closes issue #11037 -- unable to specify app:spec in hint
	  arguments ........

	* /, funcs/func_logic.c: Merged revisions 86902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86902 | murf | 2007-10-23 15:18:08 -0600 (Tue, 23 Oct 2007) | 1
	  line closes issue #11052 -- where nothing after the ? will allow
	  un-initialized variable values to corrupt and crash asterisk on
	  64-bit platforms ........

	* /, main/ast_expr2f.c: Merged revisions 86880 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86880 | murf | 2007-10-23 14:20:54 -0600 (Tue, 23 Oct 2007) | 1
	  line This should get rid of a really, really irritating warning
	  generated by some 64-bit platforms from libc, where free(0) is
	  frowned upon ........

	* /, main/Makefile: Merged revisions 86881 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86881 | murf | 2007-10-23 14:22:25 -0600 (Tue, 23 Oct 2007) | 1
	  line this update to Makefile corrects how ast_expr2f.c should be
	  generated ........

2007-10-22 21:37 +0000 [r86835-86839]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 86836 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r86836 | russell | 2007-10-22 16:36:12 -0500 (Mon, 22
	  Oct 2007) | 9 lines If lock tracking is not enabled, then we can
	  not attempt to log any mutex failures. If so, we could end up in
	  infinite recursion. The only lock that is affected by this is a
	  mutex in astmm.c used when MALLOC_DEBUG is enabled. (closes issue
	  #11044) Reported by: ys Patches: lock.h.diff uploaded by ys
	  (license 281) ........

	* apps/app_playback.c: Convert some spaces to tabs and make it so
	  the CLI command is only registered once instead of 3 times.
	  (closes issue #11053) Reported by: seanbright Patches:
	  app_playback.patch uploaded by seanbright (license 71)

2007-10-22 20:05 +0000 [r86820]  Jason Parker <jparker@digium.com>

	* main/udptl.c, channels/chan_local.c, main/frame.c,
	  res/res_features.c, main/threadstorage.c, channels/chan_iax2.c,
	  main/astobj2.c, main/config.c, main/cli.c,
	  channels/chan_skinny.c, main/http.c, pbx/pbx_ael.c,
	  channels/chan_alsa.c, main/db.c, main/pbx.c,
	  channels/chan_agent.c, channels/iax2-provision.c,
	  apps/app_playback.c, channels/chan_misdn.c,
	  channels/chan_features.c, res/res_indications.c,
	  pbx/pbx_config.c, apps/app_mixmonitor.c, main/asterisk.c,
	  res/res_odbc.c, apps/app_voicemail.c, apps/app_meetme.c,
	  main/utils.c, channels/chan_gtalk.c, res/res_musiconhold.c,
	  res/res_jabber.c, codecs/codec_zap.c, res/res_config_sqlite.c,
	  main/channel.c, main/cdr.c, apps/app_osplookup.c, main/manager.c,
	  res/res_agi.c, apps/app_minivm.c, main/logger.c,
	  res/res_realtime.c, main/image.c, apps/app_rpt.c,
	  channels/chan_mgcp.c, res/res_clioriginate.c,
	  res/res_config_pgsql.c, main/dnsmgr.c, channels/chan_zap.c,
	  channels/chan_sip.c, res/res_limit.c, main/translate.c,
	  res/res_convert.c, res/res_crypto.c, include/asterisk/cli.h,
	  apps/app_queue.c, channels/chan_oss.c, main/rtp.c,
	  channels/chan_jingle.c, channels/chan_usbradio.c, main/file.c,
	  channels/chan_h323.c, pbx/pbx_dundi.c, main/astmm.c,
	  funcs/func_devstate.c: Switch from AST_CLI (formerly NEW_CLI) to
	  AST_CLI_DEFINE, since the former didn't make much sense

2007-10-22 17:40 +0000 [r86790]  Tilghman Lesher <tlesher@digium.com>

	* /, main/astmm.c: Merged revisions 86787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86787 | tilghman | 2007-10-22 12:38:13 -0500 (Mon, 22 Oct 2007)
	  | 2 lines Minor FreeBSD build fix ........

2007-10-22 16:36 +0000 [r86755-86757]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 86756 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86756 | file | 2007-10-22 13:35:22 -0300 (Mon, 22 Oct 2007) | 4
	  lines After reading online I have confirmed that Record-Route
	  headers should be copied to 1xx responses as well. (closes issue
	  #10113) Reported by: makoto ........

	* /, apps/app_controlplayback.c: Merged revisions 86754 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86754 | file | 2007-10-22 13:15:18 -0300 (Mon, 22 Oct 2007) | 4
	  lines Make sure res is a positive value before performing the
	  check to determine whether the user stopped it or not. (closes
	  issue #11023) Reported by: cfc ........

2007-10-22 15:57 +0000 [r86734-86751]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 86750 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86750 | russell | 2007-10-22 10:52:48 -0500 (Mon, 22 Oct 2007) |
	  8 lines Don't leak a frame in the case that an END frame is
	  received and the time since the BEGIN is less than that of the
	  defined minimum DTMF duration. (closes issue #11051) Reported by:
	  casper Patches: channel.c.86664.diff uploaded by casper (license
	  55) ........

	* channels/chan_zap.c: There is a really fun game that you can play
	  before committing code, and it's called "make". :)

	* /, include/asterisk/lock.h: Merged revisions 86726 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r86726 | russell | 2007-10-22 10:43:30 -0500 (Mon, 22
	  Oct 2007) | 4 lines Update the static mutex initializer to
	  include the initialization of the internal mutex used to protect
	  the lock debugging data. (closes issue #11044, patch suggested by
	  Ivan) ........

2007-10-22 14:59 +0000 [r86697]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: resetinterval
	  defaulting to something other than 'never' doesn't seem to
	  accomplish any good and causes problems for plenty of people...

2007-10-22 14:58 +0000 [r86696]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 86694 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86694 | mmichelson | 2007-10-22 09:48:46 -0500 (Mon, 22 Oct
	  2007) | 5 lines Account for the fact that sometimes headers may
	  be terminated with \r\n instead of just \n (closes issue #11043,
	  reported by yehavi) ........

2007-10-22 14:56 +0000 [r86695]  Kevin P. Fleming <kpfleming@digium.com>

	* main/loader.c: merging patches that don't compile is bad...
	  mmkay?

2007-10-22 14:28 +0000 [r86631-86664]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 86663 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86663 | file | 2007-10-22 11:27:03 -0300 (Mon, 22 Oct 2007) | 6
	  lines Move log message to before the frame it references is
	  freed. (closes issue #11050) Reported by: slavon Patches:
	  channel.c.86662.diff uploaded by casper (license 55) ........

	* /, pbx/pbx_dundi.c: Merged revisions 86661 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86661 | file | 2007-10-22 11:05:26 -0300 (Mon, 22 Oct 2007) | 6
	  lines Fix tab completion for dundi show peer. (closes issue
	  #11041) Reported by: jsmith Patches:
	  asterisk-dundicomplete.diff.txt uploaded by jamesgolovich
	  (license 176) ........

	* /, main/acl.c, main/loader.c: Merged revisions 86630 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r86630 | file | 2007-10-22 10:33:23 -0300 (Mon, 22 Oct
	  2007) | 6 lines Fixes for building under OpenSolaris. (closes
	  issue #11047) Reported by: snuffy Patches: 11047-fixes.diff
	  uploaded by snuffy (license 35) ........

2007-10-22 10:18 +0000 [r86616-86617]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 86598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86598 | crichter | 2007-10-22 11:21:15 +0200 (Mo, 22 Okt 2007) |
	  1 line we send DISCONNECT instead of RELEASE/RELEASE_COMPLETE if
	  the dialplan does not match after an overlap call. Also added
	  out_cause=1 ........

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c,
	  channels/misdn/isdn_msg_parser.c, channels/misdn/isdn_lib.c:
	  started to add some basic support for supplementary services like
	  CallForwarding and so forth

2007-10-21 22:52 +0000 [r86585]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/cli.h, main/asterisk.c, main/cli.c: Merged
	  revisions 85532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85532 | russell | 2007-10-13 00:24:33 -0500 (Sat, 13 Oct 2007) |
	  8 lines Properly handle the case where read() may return the text
	  for more than one CLI command at once for a remote console.
	  (closes issue #10888) Reported by: jamesgolovich Patches:
	  asterisk-climultiple.diff.txt uploaded by jamesgolovich (license
	  176) ........

2007-10-20 19:56 +0000 [r86572]  Matthew Fredrickson <creslin@digium.com>

	* configs/zapata.conf.sample: Improved comments and organization
	  for zapata.conf (#10904)

2007-10-19 18:46 +0000 [r86549]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add better support for blocking and
	  unblocking of CICs (#10965)

2007-10-19 18:29 +0000 [r86534-86536]  Jason Parker <jparker@digium.com>

	* main/udptl.c, channels/chan_local.c, main/frame.c,
	  res/res_features.c, main/threadstorage.c, channels/chan_iax2.c,
	  main/astobj2.c, main/config.c, main/cli.c,
	  channels/chan_skinny.c, main/http.c, pbx/pbx_ael.c,
	  channels/chan_alsa.c, main/db.c, main/pbx.c,
	  channels/chan_agent.c, channels/iax2-provision.c,
	  apps/app_playback.c, channels/chan_misdn.c,
	  channels/chan_features.c, res/res_indications.c,
	  pbx/pbx_config.c, apps/app_mixmonitor.c, main/asterisk.c,
	  res/res_odbc.c, apps/app_voicemail.c, apps/app_meetme.c,
	  main/utils.c, channels/chan_gtalk.c, res/res_musiconhold.c,
	  res/res_jabber.c, codecs/codec_zap.c, res/res_config_sqlite.c,
	  main/channel.c, main/cdr.c, apps/app_osplookup.c, main/manager.c,
	  res/res_agi.c, apps/app_minivm.c, main/logger.c,
	  res/res_realtime.c, main/image.c, apps/app_rpt.c,
	  channels/chan_mgcp.c, res/res_clioriginate.c,
	  res/res_config_pgsql.c, main/dnsmgr.c, channels/chan_zap.c,
	  channels/chan_sip.c, res/res_limit.c, main/translate.c,
	  res/res_convert.c, res/res_crypto.c, include/asterisk/cli.h,
	  apps/app_queue.c, channels/chan_oss.c, main/rtp.c,
	  channels/chan_jingle.c, channels/chan_usbradio.c, main/file.c,
	  channels/chan_h323.c, pbx/pbx_dundi.c, main/astmm.c,
	  funcs/func_devstate.c: Convert NEW_CLI to AST_CLI. Closes issue
	  #11039, as suggested by seanbright.

	* channels/chan_usbradio.c, res/res_config_pgsql.c,
	  channels/chan_misdn.c, channels/chan_h323.c,
	  res/res_indications.c, channels/chan_iax2.c, codecs/codec_zap.c,
	  res/res_config_sqlite.c, main/config.c, main/rtp.c: More changes
	  to NEW_CLI. Also fixes a few cli messages and some minor
	  formatting. (closes issue #11001) Reported by: seanbright
	  Patches: newcli.1.patch uploaded by seanbright (license 71)
	  newcli.2.patch uploaded by seanbright (license 71) newcli.4.patch
	  uploaded by seanbright (license 71) newcli.5.patch uploaded by
	  seanbright (license 71) newcli.6.patch uploaded by seanbright
	  (license 71) newcli.7.patch uploaded by seanbright (license 71)

2007-10-19 16:40 +0000 [r86470-86503]  Joshua Colp <jcolp@digium.com>

	* /, main/app.c: Merged revisions 86502 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86502 | file | 2007-10-19 13:38:29 -0300 (Fri, 19 Oct 2007) | 4
	  lines When returning a DTMF digit from ast_control_streamfile
	  cast it as a char so that 0 does not overlap with the success
	  return code. (closes issue #11023) Reported by: cfc ........

	* /, channels/chan_sip.c: Merged revisions 86471 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86471 | file | 2007-10-19 12:33:49 -0300 (Fri, 19 Oct 2007) | 6
	  lines Fix two issues with domains and transfers. If a port was
	  given in the hostname it was treated as part of the hostname. If
	  domains were configured but external domains were not enabled all
	  transfers would be considered remote. (closes issue #11027)
	  Reported by: ramonpeek Patches: 11027-1.diff uploaded by
	  ramonpeek (license 266) ........

	* /, channels/chan_sip.c: Merged revisions 86469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86469 | file | 2007-10-19 12:08:12 -0300 (Fri, 19 Oct 2007) | 4
	  lines Set port number in received as information for
	  registrations as well. (closes issue #11028) Reported by: brad-x
	  ........

2007-10-19 01:56 +0000 [r86439]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c: Fixed a buffer size issue.

2007-10-18 22:03 +0000 [r86407-86408]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 86405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #11029) ........ r86405 | qwell | 2007-10-18 16:58:44 -0500
	  (Thu, 18 Oct 2007) | 4 lines Add documentation for options in
	  asterisk.conf Issue 11029, patch by eserra ........

2007-10-18 18:40 +0000 [r86350]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_zap.c: Fixing a segfault from tab-completing a "zap
	  restart" CLI command. (patch made by seanbright, pointed out in
	  #asterisk-dev on IRC)

2007-10-18 18:06 +0000 [r86331]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, include/asterisk/channel.h: Merged revisions
	  86330 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86330 | russell | 2007-10-18 13:03:10 -0500 (Thu, 18 Oct 2007) |
	  10 lines The channel needs to stay locked while running timer
	  callbacks, as they access and modify channel data that may change
	  elsewhere. I went through every timer callback in the source tree
	  to make sure that none of them did any additional locking that
	  could introduce deadlocks, and all is well. (closes issue #10765)
	  Reported by: Ivan Patches: ast_1_4_11_svn_patch_channel_rc.diff
	  uploaded by Ivan (license 229) ........

2007-10-18 17:40 +0000 [r86298-86329]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 86328 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86328 | mmichelson | 2007-10-18 12:38:26 -0500 (Thu, 18 Oct
	  2007) | 5 lines If a non-existent file is specified to be played
	  either as a periodic announcement or as a hold/position
	  announcement, the caller would be kicked out of the queue. No
	  longer does this happen. ........

	* apps/app_queue.c: Changed some spaces to tabs

2007-10-18 15:57 +0000 [r86297]  Russell Bryant <russell@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 86296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86296 | russell | 2007-10-18 10:45:55 -0500 (Thu, 18 Oct 2007) |
	  3 lines Execute the RELEASE operation on transcoder channels in
	  the destroy callback. (patch from jsloan) ........

2007-10-18 07:23 +0000 [r86277-86278]  Tilghman Lesher <tlesher@digium.com>

	* main/acl.c: Code cleanup of acl.c Reported by dimas Closes issue
	  #10784

	* res/res_musiconhold.c: On reload, re-read the files in the
	  specified moh directory (closes issue #10536)

2007-10-18 04:41 +0000 [r86238]  Russell Bryant <russell@digium.com>

	* /, main/utils.c: Merged revisions 86237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86237 | russell | 2007-10-17 23:40:52 -0500 (Wed, 17 Oct 2007) |
	  9 lines Revert a change that I made for issue #10979 which, as
	  has been pointed out to me in issue #11018, doesn't really make
	  sense. There is no reason to have the base64 decode function
	  force a '\0' terminated buffer, when the result is almost always
	  binary, anyway. In fact, this caused some breakage, as some code
	  in res_crypto passed in a buffer exactly the right size to get
	  its binary result, which got stomped on by this patch. (closes
	  issue #11018, reported by dimas) ........

2007-10-17 21:41 +0000 [r86208]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 86202 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86202 | mmichelson | 2007-10-17 16:39:05 -0500 (Wed, 17 Oct
	  2007) | 6 lines Changing the strategy field of the call_queue
	  struct to be signed instead of unsigned, since the code attempts
	  to set the strategy to -1 if you specify a bogus strategy. While
	  this isn't a huge issue in 1.4, it could be a problem for someone
	  who, say, tries to use the roundrobin strategy in trunk (despite
	  all the deprecation warnings in 1.4). ........

2007-10-17 21:16 +0000 [r86195-86197]  Tilghman Lesher <tlesher@digium.com>

	* main/ast_expr2.h, main/ast_expr2.y, main/ast_expr2.c: Simplify
	  some preprocessor logic by using #elif

	* CHANGES, configs/meetme.conf.sample: Document the changes made
	  earlier today to meetme

2007-10-17 20:06 +0000 [r86180-86182]  Steve Murphy <murf@digium.com>

	* utils/hashtest2.c, utils/check_expr.c, utils/clicompat.c: and
	  then, I noticed the clicompat stuff.

	* utils/check_expr.c: more stub routines to allow linkage in
	  stand-alone environment, with thread debugs turned on

	* utils/hashtest2.c: more stub routines to allow linkage in
	  stand-alone environment, with thread debugs turned on

2007-10-17 18:01 +0000 [r86150]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 86149 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86149 | russell | 2007-10-17 12:57:45 -0500 (Wed, 17 Oct 2007) |
	  8 lines If Asterisk is in the middle of shutting down, respond to
	  OPTIONS with 503 Unavailable. (closes issue #10994) Reported by:
	  eserra Patches: sip-options-503.patch uploaded by eserra (license
	  45) ........

2007-10-17 17:06 +0000 [r86119]  Tilghman Lesher <tlesher@digium.com>

	* main/term.c: Support color on certain platforms, even when
	  started at boot (before TERM is set) Closes issue #9048

2007-10-17 17:00 +0000 [r86118]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 86117 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86117 | file | 2007-10-17 13:58:03 -0300 (Wed, 17 Oct 2007) | 4
	  lines Whoops, forgot to remove the original sip_scheddestroy.
	  (closes issue #11010) Reported by: vadim ........

2007-10-17 16:09 +0000 [r86104]  Jason Parker <jparker@digium.com>

	* channels/chan_usbradio.c, channels/xpmr/xpmr.c: Allow
	  chan_usbradio to compile again. Closes issue #11014, patch by
	  seanbright.

2007-10-17 15:39 +0000 [r86079]  Tilghman Lesher <tlesher@digium.com>

	* /, main/asterisk.c: Merged revisions 86066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86066 | tilghman | 2007-10-17 10:23:51 -0500 (Wed, 17 Oct 2007)
	  | 3 lines When runuser/rungroup is specified, a remote console
	  could only be attained by root (Closes issue #9999) ........

2007-10-17 15:30 +0000 [r86067]  Joshua Colp <jcolp@digium.com>

	* channels/chan_usbradio.c: Change dependency for chan_usbradio to
	  asound. Let's keep everything uniform. (closes issue #11013)
	  Reported by: seanbright

2007-10-17 15:13 +0000 [r86065]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_meetme.c: Enhancements to realtime (closes issue #9609)

2007-10-17 15:09 +0000 [r86064]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 86063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86063 | file | 2007-10-17 12:06:36 -0300 (Wed, 17 Oct 2007) | 4
	  lines Don't schedule dialog destruction if a MESSAGE is received
	  using an existing dialog. (closes issue #11010) Reported by:
	  vadim ........

2007-10-16 23:36 +0000 [r86029-86033]  Mark Michelson <mmichelson@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 86032 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r86032 | mmichelson | 2007-10-16 18:35:31 -0500 (Tue, 16 Oct
	  2007) | 3 lines Since monitor-join is deprecated now, remove the
	  example from the sample queues.conf file ........

	* apps/app_queue.c: Removed the monitor-join option. If one wishes
	  to mix audio, they should instead use monitor-type=mixmonitor.
	  (related to issue #10885)

2007-10-16 22:36 +0000 [r85995-85998]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 85997 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r85997 | russell | 2007-10-16 17:36:16 -0500 (Tue, 16
	  Oct 2007) | 1 line really picky formatting tweak ... ........

	* /, include/asterisk/lock.h: Merged revisions 85994 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r85994 | russell | 2007-10-16 17:14:36 -0500 (Tue, 16
	  Oct 2007) | 16 lines Some locking errors exposed the fact that
	  the lock debugging code itself was not thread safe. How ironic!
	  Anyway, these changes ensure that the code that is accessing the
	  lock debugging data is thread-safe. Many thanks to Ivan for
	  finding and fixing the core issue here, and also thanks to those
	  that tested the patch and provided test results. (closes issue
	  #10571) (closes issue #10886) (closes issue #10875) (might close
	  some others, as well ...) Patches: (from issue #10571)
	  ivan_ast_1_4_12_rel_patch_lock.h.diff uploaded by Ivan (license
	  229) - a few small changes by me ........

2007-10-16 21:51 +0000 [r85959-85992]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Fixing the build.

	* apps/app_read.c: Fixing app_read so that if a timeout of less
	  than 1 ms is specified, assume that 1 ms is desired. (closes
	  issue #11000, reported and patched by michael-fig, with a warning
	  line added by me)

	* /, apps/app_queue.c: Merged revisions 85958 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85958 | mmichelson | 2007-10-16 16:14:34 -0500 (Tue, 16 Oct
	  2007) | 5 lines Trying to remove a non-dynamic queue member via
	  dynamic means can lead to some interesting (read nasty)
	  situations. This patch clears up the issue by making only dynamic
	  queue members removable via dynamic methods. ........

2007-10-16 20:55 +0000 [r85957]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Don't hangup the call for SS7 if we get an
	  alarm

2007-10-16 20:32 +0000 [r85944]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: This fixes SIP subscriptions in trunk. Don't
	  improperly memset() over an ast_str. This was leftover from
	  before it got changed to use ast_str. (closes issue #11003,
	  reported by pj) (closes issue #10770, reported by yehavi)
	  (patched by me)

2007-10-16 19:47 +0000 [r85943]  Tilghman Lesher <tlesher@digium.com>

	* /, main/stdtime/localtime.c: Merged revisions 85921 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r85921 | tilghman | 2007-10-16 14:41:40 -0500 (Tue, 16
	  Oct 2007) | 4 lines Also set up gmtoff (this is used in the %z
	  gnu extension to strftime) Reported and fixed by jcmoore Closes
	  issue #11002 ........

2007-10-16 19:12 +0000 [r85897]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 85896 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85896 | russell | 2007-10-16 14:10:01 -0500 (Tue, 16 Oct 2007) |
	  2 lines Remove a pointless lock. ........

2007-10-16 16:40 +0000 [r85853-85883]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Fix IMAP compilation error. (closes issue
	  #10986, reported and patched by snuffy)

	* /: Blocking changes from previous commit

2007-10-16 15:15 +0000 [r85819-85851]  Joshua Colp <jcolp@digium.com>

	* /, funcs/func_vmcount.c: Merged revisions 85850 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85850 | file | 2007-10-16 11:52:22 -0300 (Tue, 16 Oct 2007) | 4
	  lines Check to make sure a value has been given to the VMCOUNT
	  dialplan function. (closes issue #10996) Reported by: marsosa
	  ........

	* main/threadstorage.c: Permit building under DEBUG_THREADLOCALS.
	  Thanks snuff.

	* /, main/threadstorage.c: Merged revisions 85818 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85818 | file | 2007-10-16 11:19:39 -0300 (Tue, 16 Oct 2007) | 6
	  lines Fix memory allocation issue in threadstorage. (closes issue
	  #10995) Reported by: snuffy Patches: new-patch.diff uploaded by
	  snuffy (license 35) ........

2007-10-16 10:38 +0000 [r85777-85787]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c, channels/chan_gtalk.c: Fix CLI help
	  output

	* channels/chan_jingle.c: Added two CLI functions, taken from
	  chan_gtalk : - jingle reload ; - jingle show channels.

	* channels/chan_jingle.c: Make an audio path under the following
	  call configuration : SIP Phone 1 --- [chan_sip]Asterisk
	  1[chan_jingle] --- [chan_jingle]Asterisk 2[chan_sip] --- SIP
	  Phone 2 Modifications : - set bridge type to partial ; - process
	  media candidates from the remote peer properly. Now we have
	  Jingle audio, at least between two Asterisk Jingle clients.

2007-10-15 23:20 +0000 [r85764]  Jason Parker <jparker@digium.com>

	* configs/dundi.conf.sample, channels/chan_sip.c,
	  channels/chan_h323.c, main/acl.c, UPGRADE.txt,
	  channels/iax2-provision.c, doc/tex/qos.tex, pbx/pbx_dundi.c,
	  channels/chan_iax2.c, channels/chan_mgcp.c: Switch dundi to new
	  tos config format. Remove old unused defines for old style.
	  Closes issue 10860, patch by IgorG.

2007-10-15 21:11 +0000 [r85718-85721]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 85720 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85720 | russell | 2007-10-15 16:10:02 -0500 (Mon, 15 Oct 2007) |
	  3 lines Ensure that no pending state changes are leaked when the
	  device state change thread gets stopped on module unload.
	  ........

	* /, main/say.c: Merged revisions 85686 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85686 | russell | 2007-10-15 15:21:27 -0500 (Mon, 15 Oct 2007) |
	  7 lines Add a small fix for the tw version of saying dates.
	  (closes issue #7827) Reported by: sharkey Patches: say.nits.patch
	  uploaded by sharkey (license 172) ........

2007-10-15 20:16 +0000 [r85685]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 85684 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10938) ........ r85684 | qwell | 2007-10-15 15:15:51 -0500
	  (Mon, 15 Oct 2007) | 5 lines Properly use DESTDIR in 'config'
	  target. Do not try to run chkconfig or similar if using DESTDIR.
	  Issue 10938, patch by cabal95. ........

2007-10-15 20:09 +0000 [r85648-85683]  Russell Bryant <russell@digium.com>

	* doc/tex/channelvariables.tex: add TOUCH_MONITOR_PREF to the
	  channel var docs

	* res/res_features.c, CHANGES: Added support for reading the
	  TOUCH_MONITOR_PREFIX channel variable. It allows you to configure
	  a prefix for auto-monitor recordings. (closes issue #6353)
	  Reported by: ivanfm Patches: asterisk_automon_v4.patch uploaded
	  by ivanfm (original patch) - updated patch:
	  6353-touch_monitor_prefix.diff uploaded by qwell (license 4)

	* /, main/utils.c: Merged revisions 85649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85649 | russell | 2007-10-15 14:22:45 -0500 (Mon, 15 Oct 2007) |
	  2 lines Be pedantic about handling memory allocation failure.
	  ........

	* /, main/utils.c: Merged revisions 85647 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85647 | russell | 2007-10-15 14:11:38 -0500 (Mon, 15 Oct 2007) |
	  5 lines The loop in the handler for the "core show locks" could
	  potentially block for some amount of time. Be a little bit more
	  careful and prepare all of the output in an intermediary buffer
	  while holding a global resource. Then, after releasing it, send
	  the output to ast_cli(). ........

2007-10-15 17:51 +0000 [r85633]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_strings.c: Document my changes from Friday

2007-10-15 16:59 +0000 [r85605]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 85604 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85604 | russell | 2007-10-15 11:54:57 -0500 (Mon, 15 Oct 2007) |
	  6 lines Make the default for the srvlookup option to be yes. It
	  doesn't really make sense for it to default to off. The default
	  configuration file has it on, and proper RFC behavior, as
	  indicated by a comment in the code, is for it to be on. So, let's
	  have it on by default to make lives easier. (closes issue #10954,
	  suggested by jtodd) ........

2007-10-15 16:41 +0000 [r85578]  Joshua Colp <jcolp@digium.com>

	* /, configs/features.conf.sample: Merged revisions 85571 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85571 | file | 2007-10-15 13:39:59 -0300 (Mon, 15 Oct 2007) | 4
	  lines Document that DTMF based features only work when two
	  channels are bridged together. (closes issue #10773) Reported by:
	  pbayley ........

2007-10-15 16:36 +0000 [r85562]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/strings.h: Merged revisions 85561 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85561 | russell | 2007-10-15 11:34:13 -0500 (Mon, 15 Oct 2007) |
	  4 lines Make a few changes so that characters in the upper half
	  of the ISO-8859-1 character set don't get stripped when reading
	  configuration. (closes issue #10982, dandre) ........

2007-10-15 16:23 +0000 [r85560]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 85559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85559 | file | 2007-10-15 13:22:02 -0300 (Mon, 15 Oct 2007) | 4
	  lines Bring both DTMF begin and end frames up through to the core
	  for DTMF feature handling. (closes issue #10826) Reported by:
	  dimas ........

2007-10-15 15:55 +0000 [r85557-85558]  Russell Bryant <russell@digium.com>

	* pbx/dundi-parser.c: Simplify buffer handling in dundi-parser.c.
	  This also makes the code a bit safer by removing various
	  assumptions about sizes. (No vulnerabilities, though) (closes
	  issue #10977) Reported by: dimas Patches: dundiparser.patch
	  uploaded by dimas (license 88)

	* /, pbx/pbx_dundi.c: Merged revisions 85556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85556 | russell | 2007-10-15 10:40:45 -0500 (Mon, 15 Oct 2007) |
	  9 lines Ensure the buffer passed to ast_canmatch_extension() is
	  properly initialized so that it is null terminated. (issue
	  #10977) Reported by: dimas Patches: pbxdundi.patch uploaded by
	  dimas (license 88) - small mods by me ........

2007-10-15 15:26 +0000 [r85555]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c: Allow RTP structure registration

2007-10-15 15:07 +0000 [r85553-85554]  Joshua Colp <jcolp@digium.com>

	* main/frame.c: Add packetization data for G.722. (closes issue
	  #10900) Reported by: andrew Patches: frame.diff uploaded by
	  andrew (license 240)

	* /, main/rtp.c: Merged revisions 85552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85552 | file | 2007-10-15 11:55:04 -0300 (Mon, 15 Oct 2007) | 4
	  lines If Monitor or a spy was added to a P2P or native bridged
	  channel bring the channel back to the generic bridging core so
	  the monitor or spy operations work. (closes issue #10943)
	  Reported by: julianjm ........

2007-10-15 13:51 +0000 [r85551]  Philippe Sultan <philippe.sultan@gmail.com>

	* res/res_jabber.c: Allocate more space for the base64 output we
	  need to generate. Closes issue #10913, reported by tootai, who
	  graciously granted us access to his Asterisk server, thanks!
	  Daniel, feel free to reopen the bug in case you can reproduce
	  this on 1.4.

2007-10-15 13:44 +0000 [r85539-85550]  Russell Bryant <russell@digium.com>

	* main/cli.c: Move the CLI commands that were in builtins[] into
	  the cli_cli[] array of CLI commands and remove the cli_iterator
	  struct. This gets tab completion working again. (closes issue
	  #10970) Reported by: jamesgolovich Patches:
	  asterisk-clicomplete.diff.txt uploaded by jamesgolovich (license
	  176)

	* doc/tex/jitterbuffer.tex, doc/tex/extensions.tex,
	  doc/tex/channelvariables.tex, doc/tex/ael.tex,
	  doc/tex/queues-with-callback-members.tex, doc/tex/realtime.tex,
	  doc/tex/dundi.tex, doc/tex/security.tex,
	  doc/tex/configuration.tex, doc/tex/ajam.tex,
	  doc/tex/cliprompt.tex, doc/tex/manager.tex, doc/tex/misdn.tex,
	  doc/tex/imapstorage.tex, doc/tex/privacy.tex, doc/tex/sla.tex,
	  doc/tex/app-sms.tex, doc/tex/billing.tex, apps/app_zapateller.c,
	  doc/tex/localchannel.tex, doc/tex/cdrdriver.tex,
	  doc/tex/queuelog.tex: Another major doc directory update from
	  IgorG. This patch includes - Many uses of the astlisting
	  environment around verbatim text to ensure that it gets properly
	  formatted and doesn't run off the page. - Update some things that
	  have been deprecated. - Add escaping as needed - and more ...
	  (closes issue #10978) Reported by: IgorG Patches:
	  texdoc-85542-1.patch uploaded by IgorG (license 20)

	* /, main/asterisk.c: Merged revisions 85545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85545 | russell | 2007-10-15 08:05:45 -0500 (Mon, 15 Oct 2007) |
	  7 lines Make sure remote consoles unmute themselves again after
	  reconnecting. (closes issue #10847) Reported by: atis Patches:
	  console_unmute_on_reconnect.patch uploaded by atis (license 242)
	  ........

	* /, main/utils.c: Merged revisions 85543 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85543 | russell | 2007-10-15 07:48:10 -0500 (Mon, 15 Oct 2007) |
	  8 lines Make sure that the base64 decoder returns a terminated
	  string. (closes issue #10979) Reported by: ys Patches:
	  util.c.diff uploaded by ys (license 281) - small mods by me
	  ........

	* configure, configure.ac: Change the configure script to check for
	  a function that was recently added to libss7.

	* /, pbx/pbx_config.c: Merged revisions 85540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85540 | russell | 2007-10-14 10:24:52 -0500 (Sun, 14 Oct 2007) |
	  7 lines Don't create the context for users in users.conf until we
	  know at least one user exists. (closes issue #10971) Reported by:
	  dimas Patches: pbxconfig.patch uploaded by dimas (license 88)
	  ........

	* doc/tex/backtrace.tex (added): When merging the last
	  documentation update, I forgot to "svn add" a file. Here it is.
	  (closes issue #10962)

2007-10-13 08:38 +0000 [r85535]  James Golovich <james@gnuinter.net>

	* main/cli.c: Fix compiling cli.c due to differences with new cli
	  system (closes issue 0010966)

2007-10-13 05:53 +0000 [r85534]  Russell Bryant <russell@digium.com>

	* include/asterisk/logger.h, /, main/asterisk.c, main/cli.c: Merged
	  revisions 85533 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85533 | russell | 2007-10-13 01:48:10 -0400 (Sat, 13 Oct 2007) |
	  12 lines Fix an issue with console verbosity when running
	  asterisk -rx to execute a command and retrieve its output. The
	  issue was that there was no way for the main Asterisk process to
	  know that the remote console was connecting in the -rx mode. The
	  way that James has fixed this is to have all remote consoles
	  muted by default. Then, regular remote consoles automatically
	  execute a CLI command to unmute themselves when they first start
	  up. (closes issue #10847) Reported by: atis Patches:
	  asterisk-consolemute.diff.txt uploaded by jamesgolovich (license
	  176) ........

2007-10-12 20:06 +0000 [r85527]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample, apps/app_queue.c: Allow for the
	  position announcement to be turned off if desired. (closes issue
	  #8515, reported by bruno_rocha, initial patch by bruno_rocha,
	  final patch by qwell)

2007-10-12 19:41 +0000 [r85525-85526]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, doc/tex/channelvariables.tex: Trying to
	  finish the last of the charge_number patch up #10916

	* channels/chan_zap.c: Add support for receive charge number in
	  dialplan #10916

2007-10-12 18:37 +0000 [r85522-85524]  Tilghman Lesher <tlesher@digium.com>

	* doc/asterisk-mib.txt, doc/PEERING, /, LICENSE: Merged revisions
	  85523 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85523 | tilghman | 2007-10-12 13:30:55 -0500 (Fri, 12 Oct 2007)
	  | 2 lines Change Digium address ........

	* funcs/func_strings.c: Enable ranges, hexadecimal, octal, and
	  special backslashed characters for the FILTER function

2007-10-12 15:50 +0000 [r85516-85519]  Russell Bryant <russell@digium.com>

	* doc/tex/odbcstorage.tex, doc/tex/extensions.tex,
	  doc/tex/channelvariables.tex, doc/tex/ael.tex,
	  doc/tex/queues-with-callback-members.tex, doc/tex/dundi.tex,
	  doc/tex/enum.tex, doc/tex/cliprompt.tex, doc/tex/manager.tex,
	  doc/tex/privacy.tex, doc/tex/sla.tex, doc/tex/app-sms.tex,
	  doc/tex/localchannel.tex, doc/tex/ices.tex,
	  doc/tex/cdrdriver.tex, doc/tex/asterisk.tex: Many doc directory
	  improvements, including: - Added development section
	  (backtrace.tex) - Correct filesystem path formating - Replace all
	  "|" argument separator to "," - Endless count of spaces at the
	  end of line - Using astlisting to make listings do not take so
	  much place - Take back ASTRISKVERSION on first page - Make
	  localchannel.tex readable by inserting extra end of lines (closes
	  issue #10962) Reported by: IgorG Patches: texdoc-85177-1.patch
	  uploaded by IgorG (license 20)

	* res/res_smdi.c, /: Merged revisions 85517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85517 | russell | 2007-10-12 10:45:09 -0500 (Fri, 12 Oct 2007) |
	  3 lines Fix a spelling error in a log message. SMDI, not SDMI.
	  (closes issue #10959) ........

	* /, pbx/pbx_realtime.c: Merged revisions 85515 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85515 | russell | 2007-10-12 10:40:35 -0500 (Fri, 12 Oct 2007) |
	  7 lines Fix the potential use of an uninitialized buffer in a log
	  message. (closes issue #10958) Reported by: dimas Patches:
	  realtime.patch uploaded by dimas (license 88) ........

2007-10-11 22:42 +0000 [r85474-85499]  Matthew Fredrickson <creslin@digium.com>

	* apps/app_dial.c: Make sure we propogate ANI2 to the outbound
	  channel

	* funcs/func_callerid.c: See if I can fix this borked ANI2 code I
	  added

	* channels/chan_zap.c: Make sure we set the ANI2 field for PRI

	* funcs/func_callerid.c: Add ANI2 support to func_callerid

	* channels/chan_zap.c: Add SS7 ANI2 support tx and rx. #10916

	* channels/chan_zap.c: Add CCR test support #10916

2007-10-11 19:03 +0000 [r85460]  Russell Bryant <russell@digium.com>

	* main/udptl.c, main/threadstorage.c, res/res_limit.c,
	  main/translate.c, res/res_crypto.c, res/res_convert.c,
	  channels/iax2-provision.c, channels/chan_gtalk.c,
	  channels/chan_oss.c, main/astobj2.c, main/cli.c, main/cdr.c,
	  main/channel.c, apps/app_osplookup.c, channels/chan_skinny.c,
	  pbx/pbx_ael.c, main/file.c, pbx/pbx_dundi.c, main/image.c,
	  pbx/pbx_config.c, apps/app_mixmonitor.c, apps/app_rpt.c,
	  main/asterisk.c, main/db.c, channels/chan_mgcp.c,
	  res/res_clioriginate.c: Merge a ton of NEW_CLI conversions.
	  Thanks to everyone that helped out! :) (closes issue #10724)
	  Reported by: eliel Patches: chan_skinny.c.patch uploaded by eliel
	  (license 64) chan_oss.c.patch uploaded by eliel (license 64)
	  chan_mgcp.c.patch2 uploaded by eliel (license 64)
	  pbx_config.c.patch uploaded by seanbright (license 71)
	  iax2-provision.c.patch uploaded by eliel (license 64)
	  chan_gtalk.c.patch uploaded by eliel (license 64) pbx_ael.c.patch
	  uploaded by seanbright (license 71) file.c.patch uploaded by
	  seanbright (license 71) image.c.patch uploaded by seanbright
	  (license 71) cli.c.patch uploaded by moy (license 222)
	  astobj2.c.patch uploaded by moy (license 222) asterisk.c.patch
	  uploaded by moy (license 222) res_limit.c.patch uploaded by
	  seanbright (license 71) res_convert.c.patch uploaded by
	  seanbright (license 71) res_crypto.c.patch uploaded by seanbright
	  (license 71) app_osplookup.c.patch uploaded by seanbright
	  (license 71) app_rpt.c.patch uploaded by seanbright (license 71)
	  app_mixmonitor.c.patch uploaded by seanbright (license 71)
	  channel.c.patch uploaded by seanbright (license 71)
	  translate.c.patch uploaded by seanbright (license 71)
	  udptl.c.patch uploaded by seanbright (license 71)
	  threadstorage.c.patch uploaded by seanbright (license 71)
	  db.c.patch uploaded by seanbright (license 71) cdr.c.patch
	  uploaded by moy (license 222) pbd_dundi.c.patch uploaded by moy
	  (license 222) app_osplookup-rev83558.patch uploaded by moy
	  (license 222) res_clioriginate.c.patch uploaded by moy (license
	  222)

2007-10-11 17:17 +0000 [r85431-85444]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Let's hard code this until I fix it

	* channels/chan_zap.c: Make sure we are clean to build without
	  libpri

2007-10-11 04:40 +0000 [r85357]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /: Merged revisions 85356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85356 | tilghman | 2007-10-10 23:35:33 -0500 (Wed, 10 Oct 2007)
	  | 2 lines A dollar sign by itself, not indicating a start of a
	  variable or expression prematurely ends substitution (closes
	  issue #10939) ........

2007-10-10 16:01 +0000 [r85317]  Russell Bryant <russell@digium.com>

	* include/asterisk/file.h, /: Merged revisions 85316 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r85316 | russell | 2007-10-10 10:56:23 -0500 (Wed, 10
	  Oct 2007) | 6 lines I introduced a new member to the
	  ast_filestream struct in 1.4.12, but put it in the middle of the
	  struct, instead of at the end. One of the Debian folks, paravoid,
	  pointed out that this breaks binary compatability with modules
	  compiled against older headers. So, I'm moving the new member to
	  the end of the struct to resolve the situation. ........

2007-10-10 14:43 +0000 [r85281]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 85280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85280 | file | 2007-10-10 11:42:00 -0300 (Wed, 10 Oct 2007) | 4
	  lines If devicestate is passed a port number strip it out.
	  (closes issue #10930) Reported by: ibc ........

2007-10-10 14:38 +0000 [r85279]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 85276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85276 | mmichelson | 2007-10-10 09:26:31 -0500 (Wed, 10 Oct
	  2007) | 5 lines A bunch of changes from sprintf to snprintf. See
	  security advisory AST-2002-022 ........

2007-10-10 14:30 +0000 [r85234-85278]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 85277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85277 | file | 2007-10-10 11:28:18 -0300 (Wed, 10 Oct 2007) | 6
	  lines Add support for handling a 182 Queued response. (closes
	  issue #10924) Reported by: ramonpeek Patches: queued-182.diff
	  uploaded by ramonpeek (license 266) ........

	* /, apps/app_voicemail.c: Merged revisions 85242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85242 | file | 2007-10-10 11:14:56 -0300 (Wed, 10 Oct 2007) | 6
	  lines Close voicemail message description file if duration did
	  not meet the minimum, or else we will eventually run out of file
	  descriptors. (closes issue #10918) Reported by: brak2718 Patches:
	  vm1.4.12.1.patch uploaded by brak2718 (license 279) ........

	* main/logger.c: Process outstanding log messages before shutting
	  down the logger thread. (closes issue #10933) Reported by:
	  sperreault

2007-10-10 06:48 +0000 [r85197]  Luigi Rizzo <rizzo@icir.org>

	* bootstrap.sh: Adapt the autotools names to different versions of
	  FreeBSD (and open the way to better adaptation for other
	  platforms as well).

2007-10-10 06:41 +0000 [r85196]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/frame.h: Merged revisions 85195 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r85195 | kpfleming | 2007-10-10 08:24:41 +0200 (Wed, 10
	  Oct 2007) | 2 lines use a macro instead of an inline function, so
	  that backtraces will report the caller of ast_frame_free()
	  properly ........

2007-10-09 22:35 +0000 [r85177]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Patch to add one-touch parking for queues.
	  (closes issue #10869, reported and patched by bluecrow76)

2007-10-09 22:21 +0000 [r85140-85176]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /, main/utils.c, include/asterisk/lock.h: Merged
	  revisions 85158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85158 | tilghman | 2007-10-09 16:55:06 -0500 (Tue, 09 Oct 2007)
	  | 5 lines This commit fixes the following issues: - Deadlock in
	  ast_write (issue #10406) - Deadlock in ast_read (issue #10406) -
	  Possible mutex initialization error in lock.h (issue #10571)
	  ........

	* apps/app_dial.c, channels/chan_jingle.c, channels/chan_misdn.c,
	  apps/app_festival.c, apps/app_minivm.c, apps/app_zapras.c,
	  utils/astman.c, apps/app_adsiprog.c, utils/check_expr.c: Remove
	  redundant includes (patch by snuffy) (Closes issue #10922)

2007-10-09 15:12 +0000 [r85097-85098]  Russell Bryant <russell@digium.com>

	* CHANGES: Note jitterbuffer support for chan_local in CHANGES

	* channels/chan_local.c, doc/tex/localchannel.tex: Add jitterbuffer
	  support for chan_local. To enable it, you use the 'j' option in
	  the Dial command. The 'j' option _must_ be used in conjunction
	  with the 'n' option. This feature will allow you to use the
	  existing jitterbuffer implementation to put a jitterbuffer on
	  incoming SIP calls connecting to Asterisk applications by putting
	  a local channel in the middle.

2007-10-09 14:31 +0000 [r84991-85094]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 85093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85093 | file | 2007-10-09 11:30:16 -0300 (Tue, 09 Oct 2007) | 4
	  lines Don't perform a reinvite if a transfer is in progress.
	  (issue #10915) Reported by: ramonpeek ........

	* /, main/rtp.c: Merged revisions 85057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85057 | file | 2007-10-08 17:06:33 -0300 (Mon, 08 Oct 2007) | 4
	  lines Only update codec information if the channel has a
	  technology private structure. (issue #10915) Reported by:
	  ramonpeek ........

	* res/res_limit.c, utils/hashtest2.c, utils/conf2ael.c,
	  main/ast_expr2.c, utils/check_expr.c: Fix up tree so that it
	  compiles when MTX Profiling is enabled. (closes issue #10898)
	  Reported by: snuffy Patches: 10898-mtx_prof.diff uploaded by
	  qwell (license 4)

	* /, main/rtp.c: Merged revisions 85023 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r85023 | file | 2007-10-08 12:37:46 -0300 (Mon, 08 Oct 2007) | 4
	  lines Update codec information as well as address when doing hold
	  reinvites. (issue #10868) Reported by: mavince ........

	* main/channel.c, /: Merged revisions 84990 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84990 | file | 2007-10-08 12:03:07 -0300 (Mon, 08 Oct 2007) | 4
	  lines Don't keep trying to native bridge if either of the
	  channels are involved in a masquerade operation to be done.
	  (closes issue #10696) Reported by: tbelder ........

2007-10-08 03:29 +0000 [r84958]  Russell Bryant <russell@digium.com>

	* /, Makefile.rules: Merged revisions 84957 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84957 | russell | 2007-10-07 22:28:34 -0500 (Sun, 07 Oct 2007) |
	  6 lines Enable file dependency tracking for _all_ builds, and not
	  just for builds with dev-mode enabled. I have seen enough
	  problems caused by this that I don't think it's worth keeping. I
	  want to continue to encourage anybody that is interested to
	  continue to run Asterisk from svn. Furthermore, I do not want
	  their systems to break when we change a structure definition in a
	  header file. :) ........

2007-10-07 16:28 +0000 [r84891-84939]  Philippe Sultan <philippe.sultan@gmail.com>

	* configs/jabber.conf.sample, include/asterisk/jabber.h,
	  res/res_jabber.c: Make the status and priority configurable.
	  Closes issue #10785, patch by Luke-Jr, thanks!

	* /, res/res_jabber.c: Merged revisions 84902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84902 | phsultan | 2007-10-07 18:15:39 +0200 (Sun, 07 Oct 2007)
	  | 5 lines Presence packets from a client who's connected with our
	  Jabber ID are valid, therefore, those clients must be considered
	  as buddies. The resource string helps us make the distinction
	  between clients. Closes issue #10707, reported by yusufmotiwala.
	  ........

	* res/res_jabber.c: Fix indentation

	* /, res/res_jabber.c: Merged revisions 84890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84890 | phsultan | 2007-10-07 17:52:44 +0200 (Sun, 07 Oct 2007)
	  | 5 lines Prevent Asterisk from crashing when receiving a
	  presence packet without resource from a buddy that is known to
	  have a resource list. Revert a change I previously made, where
	  Asterisk could point to a freed memory location. ........

2007-10-05 19:48 +0000 [r84852]  Tilghman Lesher <tlesher@digium.com>

	* /, main/db.c: Merged revisions 84851 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84851 | tilghman | 2007-10-05 14:42:21 -0500 (Fri, 05 Oct 2007)
	  | 2 lines Log exactly why we can't open the database, if we fail
	  (closes issue #10887) ........

2007-10-05 18:57 +0000 [r84819]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 84818 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84818 | file | 2007-10-05 15:55:36 -0300 (Fri, 05 Oct 2007) | 4
	  lines Update the remembered RTP peer information when putting an
	  endpoint on hold or taking it off hold so that the RTP stack does
	  not initiate a needless reinvite. (closes issue #10868) Reported
	  by: mavince ........

2007-10-05 16:49 +0000 [r84743-84784]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 84783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84783 | russell | 2007-10-05 11:44:21 -0500 (Fri, 05 Oct 2007) |
	  4 lines Do deadlock avoidance in a couple more places. You can't
	  lock two channels at the same time without doing extra work to
	  make sure it succeeds. (closes issue #10895, patch by me)
	  ........

	* main/manager.c, /: Merged revisions 84742 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84742 | russell | 2007-10-04 20:39:07 -0500 (Thu, 04 Oct 2007) |
	  3 lines Fix a copy/paste error in the description of UpdateConfig
	  that was pointed out by JerJer on #asterisk-dev ........

2007-10-04 22:58 +0000 [r84693-84726]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: A two-in-one patch from the bugtracker 1) Fix
	  some bad logic in the counting of statistics for QueueSummary
	  manager event. Variables were not being reset for each additional
	  queue, so cumulative totals were reported on each successive
	  queue. 2) Add a longest hold time stat to QueueSummary manager
	  event.

	* /, apps/app_queue.c: Merged revisions 84692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84692 | mmichelson | 2007-10-04 16:57:03 -0500 (Thu, 04 Oct
	  2007) | 5 lines Don't allocate space for queue members unless
	  it's needed. You end up deleting dynamic members on a reload. Not
	  good. closes issue (#10879, reported by dazza76, patched by me)
	  ........

2007-10-04 21:38 +0000 [r84691]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 84690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84690 | kpfleming | 2007-10-04 16:36:56 -0500 (Thu, 04 Oct 2007)
	  | 2 lines callers of sig2str already add the word 'signalling' in
	  the appropriate place, so don't duplicate it ........

2007-10-04 16:56 +0000 [r84671]  Tilghman Lesher <tlesher@digium.com>

	* res/res_jabber.c: Update to current coding standards, also
	  changing the argument delimiter to ',' (Closes issue #10876)

2007-10-04 14:54 +0000 [r84613-84638]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 84637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84637 | file | 2007-10-04 11:51:57 -0300 (Thu, 04 Oct 2007) | 4
	  lines Create a duplicate of the channel's member name as the tab
	  completion stuff will free it. (closes issue #10884) Reported by:
	  adamg ........

	* main/pbx.c: Don't register the exception function with module
	  information. Since it is in the core there is none and it will
	  explode.

2007-10-03 23:05 +0000 [r84580-84582]  Tilghman Lesher <tlesher@digium.com>

	* /, main/rtp.c: Merged revisions 84581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84581 | tilghman | 2007-10-03 17:59:17 -0500 (Wed, 03 Oct 2007)
	  | 2 lines When an RFC 2833 event is sent that we don't recognize,
	  ignore it, don't queue a NULL digit (closes issue #10877)
	  ........

	* main/pbx.c, doc/tex/extensions.tex, include/asterisk/pbx.h:
	  Create a universal exception handling extension, "e" (closes
	  issue #9785)

2007-10-03 18:23 +0000 [r84512-84545]  Steve Murphy <murf@digium.com>

	* /: blocked 84544 from trunk; it only applies to 1.4; 10870 -- the
	  CUT in AEL

	* res/ael/pval.c, pbx/ael/ael-test/ref.ael-vtest17, /,
	  pbx/ael/ael-test/ref.ael-ntest10, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test3, pbx/ael/ael-test/ref.ael-test5,
	  pbx/ael/ael-test/ref.ael-test8, pbx/ael/ael-test/ref.ael-test18,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-vtest13: Merged revisions 84511 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84511 | murf | 2007-10-03 08:23:00 -0600 (Wed, 03 Oct 2007) | 1
	  line closes issue #10834 ; where a null input to a switch
	  statement results in a hangup; since switch is implemented with
	  extensions, and the default case is implemented with a '.', and
	  the '.' matches 1 or more remaining characters, the case where 0
	  characters exist isn't matched, and the extension isn't matched,
	  and the goto fails, and a hangup occurs. Now, when a default case
	  is generated, it also generates a single fixed extension that
	  will match a null input. That extension just does a goto to the
	  default extension for that switch. I played with an alternate
	  solution, where I just tack an extra char onto all the patterns
	  and the goto, but not the default case's pattern. Then even a
	  null input will still have at least one char in it. But it made
	  me nervous, having that extra char in , even if that's a pretty
	  secret and low-level issue. ........

2007-10-02 20:07 +0000 [r84475]  Russell Bryant <russell@digium.com>

	* Makefile, /, build_tools/prep_tarball: Merged revisions 84474 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84474 | russell | 2007-10-02 15:06:07 -0500 (Tue, 02 Oct 2007) |
	  5 lines * Don't build the menuselect-tree for the tarball, as it
	  requires running the configure script first * Change the Makefile
	  to note that menuselect-tree depends on the configure script.
	  ........

2007-10-02 19:02 +0000 [r84432-84440]  Jason Parker <jparker@digium.com>

	* /, res/res_features.c: Merged revisions 84410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10821) ........ r84410 | qwell | 2007-10-02 13:52:55 -0500
	  (Tue, 02 Oct 2007) | 4 lines Finish up on transferee channel
	  before return on failure. Issue 10821, patch by Ivan ........

2007-10-02 18:12 +0000 [r84405]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c: Add MSet for people who prefer the old, deprecated
	  syntax of Set (Closes issue #10549)

2007-10-02 14:13 +0000 [r84371]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 84370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84370 | russell | 2007-10-02 09:12:35 -0500 (Tue, 02 Oct 2007) |
	  6 lines Use snprintf instead of sprintf in one place. There is no
	  vulnerability here due to various buffer sizes around the code,
	  but I still didn't like seeing a non length-limited copy of data
	  coming off of the wire into a stack buffer, as this would be a
	  problem in the future if buffer sizes elsewhere got changed or
	  size limitations removed ... ........

2007-10-02 13:58 +0000 [r84368]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c: Don't swap channel priority if using epoll as polling
	  should/will only happen off the first channel. (closes issue
	  #10867) Reported by: phsultan

2007-10-01 23:33 +0000 [r84327-84331]  Steve Murphy <murf@digium.com>

	* utils/check_expr.c: OK. THis a DEBUG_THREADS situation.

	* utils/check_expr.c: picky gcc versions... sigh.

	* utils/check_expr.c: This mod will allow check_expr to compile in
	  the presence of DEBUG_THREAD situations. At least, it does for
	  me. And it's less expensive than several other approaches I
	  tried.

	* res/ael/pval.c, /, res/ael/ael.tab.c, res/ael/ael.y,
	  pbx/pbx_ael.c: Merged revisions 84239 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84239 | murf | 2007-10-01 14:27:52 -0600 (Mon, 01 Oct 2007) | 1
	  line closes issue #10777 -- by returning a null for the parse
	  tree when there's really nothing there, and making sure we don't
	  try to do checking on a null tree. ........

2007-10-01 21:54 +0000 [r84300]  Jason Parker <jparker@digium.com>

	* Makefile, /, Makefile.rules, channels/Makefile: Merged revisions
	  84291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84291 | qwell | 2007-10-01 16:52:45 -0500 (Mon, 01 Oct 2007) | 6
	  lines Add dist-clean support for subdirs. Change h323 to only
	  remove the Makefile on a dist-clean, rather than a clean. This
	  fixes a bug I found with trying to run make after a make clean
	  ........

2007-10-01 21:31 +0000 [r84275]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/channel.c, main/manager.c, /, channels/chan_agent.c: Merged
	  revisions 84274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84274 | dhubbard | 2007-10-01 16:25:37 -0500 (Mon, 01 Oct 2007)
	  | 1 line moved get_base_channel() code from action_redirect to
	  ast_channel_masquerade() for issue 7706 and BE-160 ........

2007-10-01 21:15 +0000 [r84207-84272]  Russell Bryant <russell@digium.com>

	* /, main/utils.c, include/asterisk/lock.h: Merged revisions 84271
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84271 | russell | 2007-10-01 16:07:06 -0500 (Mon, 01 Oct 2007) |
	  4 lines Fulfull a feature request from Qwell on the "core show
	  locks" output. It will now note the lock type for each lock that
	  a thread holds. (mutex, rdlock, or wrlock) ........

	* /, res/res_agi.c: Merged revisions 84236 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84236 | russell | 2007-10-01 14:56:28 -0500 (Mon, 01 Oct 2007) |
	  5 lines Add another sanity check in the AGI read loop. We really
	  don't care about EAGAIN unless we didn't read an entire line. If
	  there is a newline at the end if the read buffer, break, because
	  we got the whole thing. (reported and patched by bmd) ........

	* /, include/asterisk/lock.h: Merged revisions 84206 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r84206 | russell | 2007-10-01 14:34:12 -0500 (Mon, 01
	  Oct 2007) | 2 lines Show rwlocks in the "core show locks" output.
	  Before, it only showed mutexes. ........

2007-10-01 15:57 +0000 [r84176]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Check to make sure a structure pointer is
	  non-NULL before touching it... crashing is bad, mmmk? (closes
	  issue #10831) Reported by: eliel Patches: chan_sip.c.patch
	  uploaded by eliel (license 64)

2007-10-01 15:34 +0000 [r84167-84174]  Russell Bryant <russell@digium.com>

	* main/say.c: Change simple uses of snprintf to ast_copy_string.
	  This was provided by mvanbaak as a part of issue #10843, but this
	  part didn't apply because of a patch I applied right beforehand.

	* channels/chan_misdn.c, main/frame.c, res/res_config_odbc.c,
	  apps/app_meetme.c, channels/chan_sip.c, channels/chan_skinny.c,
	  main/say.c, apps/app_minivm.c, pbx/dundi-parser.c,
	  channels/chan_iax2.c, channels/iax2-parser.c, main/asterisk.c,
	  main/rtp.c, channels/chan_mgcp.c: Corydon posted this janitor
	  project to the bug tracker and mvanbaak provided a patch for it.
	  It replaces a bunch of simple calls to snprintf with
	  ast_copy_string (closes issue #10843) Reported by: Corydon76
	  Patches: 2007092900_10843.diff uploaded by mvanbaak (license 7)

	* main/say.c: Simplify code by using the -= and %= operators.
	  (closes issue #10848) Reported by: opticron Patches: saymod.diff
	  uploaded by opticron (license 267)

	* codecs/g722/Makefile, /, res/Makefile, channels/Makefile: The
	  trunk version of this patch also includes a couple more small
	  clean fixes from IgorG. Merged revisions 84170 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84170 | russell | 2007-10-01 10:00:56 -0500 (Mon, 01 Oct 2007) |
	  3 lines Remove another file in "make clean". (closes issue
	  #10814, paravoid) ........

	* main/cli.c: Don't set the full command string until after
	  verifying that there is not another CLI command with the same
	  command text registered. This prevents a crash if someone
	  accidentally calls ast_cli_register() on the same CLI command
	  data twice. This also fixes a small bug where the helpers list
	  would get unlocked without being locked if building the full
	  command failed. (closes issue #10858, reported by jamesgolovich,
	  patched by me)

	* configs/musiconhold.conf.sample, res/res_musiconhold.c: Add a new
	  option for files-based music on hold to ensure that the sort
	  order of the files is alphabetical. (closes issue #10855)
	  Reported by: jamesgolovich Patches:
	  asterisk-mohsortalpha.diff.txt uploaded by jamesgolovich (license
	  176)

	* apps/app_dial.c, /: Merged revisions 84166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84166 | russell | 2007-10-01 09:24:49 -0500 (Mon, 01 Oct 2007) |
	  2 lines Simplify the CAN_EARLY_BRIDGE macro a bit. ........

2007-10-01 14:21 +0000 [r84159-84165]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Add MP4 to part of the SDP code. (closes
	  issue #10820) Reported by: ruikubo Patches: chan_sip.patch
	  uploaded by ruikubo (license 250)

	* main/dnsmgr.c: Don't register the dnsmgr refresh CLI command
	  twice. (closes issue #10856) Reported by: jamesgolovich Patches:
	  asterisk-dnsmgrclireg.diff.txt uploaded by jamesgolovich (license
	  176)

	* /, res/res_musiconhold.c: Merged revisions 84160 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r84160 | file | 2007-10-01 10:57:42 -0300 (Mon, 01 Oct
	  2007) | 6 lines Fix randomness. save_pos was being set to 0
	  initially instead of -1, causing it to jump to position 0 when
	  moh started. (closes issue #10859) Reported by: jamesgolovich
	  Patches: asterisk-mohpos2.diff.txt uploaded by jamesgolovich
	  (license 176) ........

	* apps/app_dial.c, /: Merged revisions 84158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84158 | file | 2007-10-01 10:49:36 -0300 (Mon, 01 Oct 2007) | 4
	  lines Only attempt early bridging if the options given to Dial()
	  permit it. (closes issue #10861) Reported by: peekyb ........

2007-09-30 20:06 +0000 [r84143-84147]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/module.h: Merged revisions 84146 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r84146 | russell | 2007-09-30 16:02:16 -0400 (Sun, 30
	  Sep 2007) | 4 lines Fix the AST_MODULE_INFO macro for C++
	  modules. The load and reload parameters were in the wrong place.
	  (closes issue #10846, alebm) ........

	* funcs/func_lock.c: * The documentation for the LOCK() function
	  says that it will block for up to 3 seconds while waiting on a
	  lock when other locks are currently held to avoid deadlocks.
	  Change the code to reflect this. * Since trying to grab a lock
	  may block for some time, put the channel in autoservice so that
	  audio is still read from the channel and that any active
	  generators on the channel don't pause.

2007-09-29 23:47 +0000 [r84134-84137]  Steve Murphy <murf@digium.com>

	* /, res/ael/ael_lex.c, res/ael/ael.flex: Merged revisions 84133
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84133 | murf | 2007-09-29 15:47:53 -0600 (Sat, 29 Sep 2007) | 1
	  line This issue sort of closes 10786; All config files support
	  #include with globbing (you know, *,[chars],?,{list,list},etc),
	  so I've updated the AEL system to support this also. ........

	* pbx/ael/ael-test/ael-ntest22/t2 (added),
	  pbx/ael/ael-test/ael-ntest22/t3 (added),
	  pbx/ael/ael-test/ael-ntest22/extensions.ael (added),
	  pbx/ael/ael-test/ael-ntest22 (added),
	  pbx/ael/ael-test/ael-ntest22/t1/a.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t1/b.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t1/c.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t2/d.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t2/e.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t2/f.ael (added),
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-ntest22
	  (added), pbx/ael/ael-test/ael-ntest22/t3/g.ael (added),
	  pbx/ael/ael-test/ref.ael-test3,
	  pbx/ael/ael-test/ael-ntest22/t3/h.ael (added),
	  pbx/ael/ael-test/ref.ael-test4,
	  pbx/ael/ael-test/ael-ntest22/t3/i.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t3/j.ael (added),
	  pbx/ael/ael-test/ael-ntest22/qq.ael (added),
	  pbx/ael/ael-test/ael-ntest22/t1 (added): the last commit for AEL
	  affected a small number of tests. Added a regression test for
	  glob'd includes

2007-09-29 18:21 +0000 [r84130]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_manager.c: Set enablecdr at the end of re-reading the
	  config file (Closes issue #10852)

2007-09-29 00:19 +0000 [r84115]  Matthew Fredrickson <creslin@digium.com>

	* main/translate.c: Let's use process time instead of wall clock
	  time for show translation

2007-09-28 14:35 +0000 [r84050-84080]  Tilghman Lesher <tlesher@digium.com>

	* configure, configure.ac: Autoconf requires version 2.60, not
	  2.59, to process (Closes issue #10842)

	* /, main/say.c: Merged revisions 84078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84078 | tilghman | 2007-09-28 09:13:47 -0500 (Fri, 28 Sep 2007)
	  | 2 lines Correct pronunciations of numbers for .nl (Closes issue
	  #10837) ........

	* main/channel.c, /: Merged revisions 84049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r84049 | tilghman | 2007-09-28 00:30:22 -0500 (Fri, 28 Sep 2007)
	  | 3 lines Avoid a deadlock with ALL of the locks in the
	  masquerade function, not just the pairs of channels. (Closes
	  issue #10406) ........

2007-09-27 23:18 +0000 [r84019]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/manager.c, /, channels/chan_agent.c,
	  include/asterisk/channel.h: Merged revisions 84018 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r84018 | dhubbard | 2007-09-27 18:12:25 -0500 (Thu, 27
	  Sep 2007) | 1 line if an Agent is redirected, the base channel
	  should actually be redirected. This was causing multiple issues,
	  especially issue 7706 and BE-160 ........

2007-09-27 00:08 +0000 [r83978-83986]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_alsa.c: Merged revisions 83974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83974 | kpfleming | 2007-09-26 16:53:03 -0700 (Wed, 26 Sep 2007)
	  | 2 lines avoid the weird usage of assert() in the ALSA header
	  files that gcc 4.2 wants to complain about ........

	* res/ael/ael.tab.c, res/ael/ael.y: deal with more gcc 4.2 const
	  pointer warnings

2007-09-27 00:02 +0000 [r83911-83977]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 83976 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83976 | russell | 2007-09-26 19:01:29 -0500 (Wed, 26 Sep 2007) |
	  1 line remove a todo item that has been completed ........

	* /, channels/chan_sip.c: Merged revisions 83943 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83943 | russell | 2007-09-26 16:35:23 -0500 (Wed, 26 Sep 2007) |
	  2 lines I changed my mind ... I think this should be a
	  LOG_NOTICE. ........

	* /, channels/chan_sip.c: Merged revisions 83941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83941 | russell | 2007-09-26 16:15:15 -0500 (Wed, 26 Sep 2007) |
	  5 lines Add a log message that was requested by the masses in the
	  developer tutorial session at Astricon. chan_sip did not output
	  any message when a call was rejected because the extension was
	  not found. This adds a verbose message (at verbose level 3) to
	  note when this happens. ........

	* /: Merged revisions 83910 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83910 | russell | 2007-09-26 15:50:09 -0500 (Wed, 26 Sep 2007) |
	  3 lines Fix building chan_misdn under dev-mode. (please run the
	  configure script with --enable-dev-mode so this doesn't happen
	  again ...) ........

2007-09-26 18:43 +0000 [r83880]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_zap.c, /: Merged revisions 83879 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83879 | tilghman | 2007-09-26 13:35:56 -0500 (Wed, 26 Sep 2007)
	  | 2 lines Remove unused 4k of memory on the program stack (closes
	  issue #10827) ........

2007-09-26 06:53 +0000 [r83849-83864]  Russell Bryant <russell@digium.com>

	* include/asterisk/event.h: fix a typo in a comment

	* include/asterisk/file.h: Change function documentation to use
	  doxygen tags. (Really, I just needed to make some minor change in
	  trunk to test something with automerge ...)

2007-09-25 23:14 +0000 [r83834]  Matthew Fredrickson <creslin@digium.com>

	* doc/ss7.txt: Fix typo in readme

2007-09-25 21:06 +0000 [r83819]  Russell Bryant <russell@digium.com>

	* include/asterisk/devicestate.h: Don't note that functions are
	  deprecated in favor of themselves. This was found by showing a
	  very poor example doxygen function in a presentation this
	  morning. :)

2007-09-25 16:34 +0000 [r83804]  Philippe Sultan <philippe.sultan@gmail.com>

	* res/res_jabber.c: Added a CLI command that shows our buddy list,
	  as suggested by Daniel McKeehan, thanks!

2007-09-25 14:18 +0000 [r83774]  Tilghman Lesher <tlesher@digium.com>

	* /, main/app.c: Merged revisions 83773 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83773 | tilghman | 2007-09-25 09:13:25 -0500 (Tue, 25 Sep 2007)
	  | 2 lines jmls pointed out that unsetting the group and setting
	  the group to the blank string aren't quite the same. ........

2007-09-25 13:41 +0000 [r83758]  Joshua Colp <jcolp@digium.com>

	* res/ael/pval.c: Fix minor memory leak in pval.c. Overwriting a
	  value without freeing the previous result is bad, mmmk?

2007-09-25 09:07 +0000 [r83743]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c, include/asterisk/jingle.h: Comply with
	  latest XEP-0166, XEP-0167, XEP-0176. No real Jingle
	  implementation being available, testing was made using two
	  Asterisk servers relaying SIP calls over their Jingle channels:
	  SIP Phone 1 --- [chan_sip]Asterisk 1[chan_jingle] ---
	  [chan_jingle]Asterisk 2[chan_sip] --- SIP Phone 2 Thus, it was
	  possible to test the code in both ways, and make the Jingle
	  channel comply with the latest specifications. No sound available
	  yet. Main modifications include : - modified the
	  'jingle_candidate' structure and the 'jingle_create_candidates'
	  function according to XEP-0176 ; - modified the 'jingle_action'
	  function in order to properly terminate a Jingle session, in
	  conformance with XEP-0166 ; - modified username format used in
	  STUN requests ; - actually make the bindaddr configuration field
	  useable. Todo : - set audio paths up (no native bridging) ; -
	  make the CLI gtalk functions available to jingle ; - clean up the
	  storage space used in strings.

2007-09-25 08:09 +0000 [r83741]  Russell Bryant <russell@digium.com>

	* utils/Makefile, utils: Add some files to the utils directory
	  svn:ignore and Makefile clean target (closes issue #10808,
	  reported by mvanbaak)

2007-09-24 22:06 +0000 [r83696-83726]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, main/asterisk.c: Permit custom locations for astdb and
	  the keys directory (though default to the current locations)
	  (Closes issue #10267)

	* /, build_tools/make_defaults_h: Merged revisions 83695 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83695 | tilghman | 2007-09-24 12:22:08 -0500 (Mon, 24 Sep 2007)
	  | 4 lines In the source, keys are relative to the datadir, not
	  varlib (which is the same in most cases, but it's good to be
	  accurate). Closes issue #10811 ........

2007-09-24 17:10 +0000 [r83671]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample: merged jcmoore's
	  patch for configurable SDP origin-field username and session
	  field, closes issue# 10795

2007-09-24 17:00 +0000 [r83656]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: interface_exists_global was never returning 1.
	  Most likely an error from my merge on Friday. (closes issue
	  #10817, reported and patched by snar, patch simplified by me)

2007-09-24 16:42 +0000 [r83654-83655]  Tilghman Lesher <tlesher@digium.com>

	* /, main/app.c: Merged revisions 83637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83637 | tilghman | 2007-09-24 10:17:06 -0500 (Mon, 24 Sep 2007)
	  | 3 lines Making change to group splitting, as discussed on the
	  -dev list. The main effect of this will be to permit
	  Set(GROUP([cat])=), i.e. unsetting a group. ........

2007-09-22 19:54 +0000 [r83575-83590]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c, /: Merged revisions 83589 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83589 | murf | 2007-09-22 13:39:16 -0600 (Sat, 22 Sep 2007) | 1
	  line This closes issue #10788 -- The exact same fixes are made
	  here for the first arg in the for(arg1; arg2; arg3) {} statement,
	  as were done for the 3rd arg. It can now be an assignment that
	  will embedded in a Set() app, or a macro call, or an app call.
	  ........

	* res/ael/pval.c, /, pbx/pbx_ael.c: Merged revisions 83558 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83558 | murf | 2007-09-22 10:41:43 -0600 (Sat, 22 Sep 2007) | 1
	  line This closes issue #10788 -- the 3rd arg in the for statement
	  is now wrapped in Set() only if there's an '=' in that string.
	  Otherwise, if it begins with '&', then a Macro call is generated;
	  otherwise it is made into an app call. A bit more accomodating,
	  keeps the new guys happy, and the guys with ael-1 code should be
	  happy, too ........

2007-09-22 17:37 +0000 [r83574]  Matthew Fredrickson <creslin@digium.com>

	* doc/ss7.txt: Fix potential point of confusion

2007-09-22 14:45 +0000 [r83517-83545]  Tilghman Lesher <tlesher@digium.com>

	* utils/Makefile, utils/hashtest2.c, utils/clicompat.c (added): Fix
	  build of check_expr and hashtest2 when DEBUG_THREADLOCAL is
	  defined

	* main/manager.c, apps/app_meetme.c: Add the MeetmeList and Reload
	  manager commands, which supplement the need to have Command
	  privilege. (closes issue #10736)

	* configure, include/asterisk/autoconfig.h.in, main/ast_expr2.h,
	  main/ast_expr2.y, configure.ac, main/ast_expr2.c: Fixes for
	  FreeBSD... testing for every conceivable math function now

2007-09-21 19:55 +0000 [r83500]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c: Fix compilation errors in CLI command
	  updates to SS7 CLI commands

2007-09-21 19:54 +0000 [r83499]  Matthew Fredrickson <creslin@digium.com>

	* doc/ss7.txt (added): Add an SS7 readme for setup and use of
	  libss7 and asterisk

2007-09-21 18:41 +0000 [r83484]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_queue.c: Fix some areas where we were still using '|'
	  for an argument delimiter (closes issue #10793)

2007-09-21 18:27 +0000 [r83483]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Update app_queue to use commas as application
	  argument separators. (closes issue #10793, snar)

2007-09-21 17:36 +0000 [r83466]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_manager.c: Fix cdr_manager, such that if the config file
	  is created past load, it'll start logging (and conversely, if the
	  config file is destroyed or deactivated, the logging is
	  disabled). Reported by Juggie via IRC, fix by me.

2007-09-21 14:40 +0000 [r83433]  Russell Bryant <russell@digium.com>

	* res/res_config_pgsql.c, main/dnsmgr.c, /, channels/chan_sip.c,
	  main/db1-ast/hash/hash.c, include/asterisk/channel.h,
	  channels/chan_iax2.c, main/rtp.c, channels/misdn_config.c,
	  main/cdr.c, main/channel.c, channels/chan_misdn.c,
	  main/ast_expr2f.c, main/file.c, include/asterisk/sched.h,
	  channels/chan_h323.c, utils/ael_main.c, pbx/pbx_dundi.c,
	  main/sched.c, channels/chan_mgcp.c, main/ast_expr2.fl: Merged
	  revisions 83432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83432 | russell | 2007-09-21 09:37:20 -0500 (Fri, 21 Sep 2007) |
	  4 lines gcc 4.2 has a new set of warnings dealing with cosnt
	  pointers. This set of changes gets all of Asterisk (minus
	  chan_alsa for now) to compile with gcc 4.2. (closes issue #10774,
	  patch from qwell) ........

2007-09-21 14:25 +0000 [r83431]  Tilghman Lesher <tlesher@digium.com>

	* configure, include/asterisk/autoconfig.h.in, main/ast_expr2.h,
	  main/ast_expr2.y, configure.ac, main/ast_expr2.c: Check for the
	  presence of trunc and round, and make the ISOC99 detection a
	  little more sane (closes issue #10776)

2007-09-20 23:14 +0000 [r83381]  Jason Parker <jparker@digium.com>

	* apps/app_minivm.c, main/astmm.c, apps/app_playback.c: More
	  NEW_CLI conversions. (issue #10724) Patches: app_playback.c.patch
	  uploaded by moy (license 222) app_minivm.c.patch uploaded by
	  eliel (license 64) astmm.c.patch uploaded by eliel (license 64)

2007-09-20 21:37 +0000 [r83350-83351]  Mark Michelson <mmichelson@digium.com>

	* /: Oops. Getting rid of svnmerge-integrated and automerge stuff

	* /, apps/app_queue.c: Merging changes from queue_refcount_trunk
	  into trunk. Refcounted queues now in place.

2007-09-20 21:17 +0000 [r83293-83349]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 83348 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83348 | russell | 2007-09-20 16:16:48 -0500 (Thu, 20 Sep 2007) |
	  4 lines When daemonizing, don't change working directory to "/".
	  It makes it not be able to do a core dump when not running as
	  uid=root. (closes issue #10766, xrg) ........

	* /, contrib/scripts/safe_asterisk: Merged revisions 83316 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83316 | russell | 2007-09-20 16:01:20 -0500 (Thu, 20 Sep 2007) |
	  3 lines Change safe_asterisk to explicitly ask for /bin/bash, as
	  it uses bashisms. (closes issue #10772, reported by culrich)
	  ........

	* main/dsp.c: trivial formatting change

	* main/asterisk.c: trivial formatting change

	* main/app.c: minor spelling fixes in a comment

	* main/app.c: minor grammar fix

	* channels/chan_sip.c: fix spelling in a comment

	* main/asterisk.c: trivial formatting change

2007-09-20 19:05 +0000 [r83251-83278]  Jason Parker <jparker@digium.com>

	* doc/modules.txt: Fix a trivial typo, to test our new commit bot

	* /, apps/app_disa.c: Merged revisions 83246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83246 | qwell | 2007-09-20 12:09:14 -0500 (Thu, 20 Sep 2007) | 8
	  lines If # is pressed after dialing an extension in DISA, stop
	  trying to collect more digits. (closes issue #10754) Reported by:
	  atis Patches: app_disa.c.branch.patch uploaded by atis (license
	  242) app_disa.c.trunk.patch uploaded by atis (license 242)
	  ........

2007-09-20 16:28 +0000 [r83234]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 83232 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83232 | file | 2007-09-20 13:25:30 -0300 (Thu, 20 Sep 2007) | 7
	  lines Make sure the minimum T1 timer value is obeyed in all
	  cases. (closes issue #10768) Reported by: flefoll Patches:
	  chan_sip.c.trunk.83071.retrans-patch uploaded by flefoll (license
	  244) chan_sip.c.br14.83070.retrans-patch uploaded by flefoll
	  (license 244) ........

2007-09-20 16:27 +0000 [r83233]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: Don't start the event processing thread until
	  after forking. (reported by Simon on the -dev list, thanks!)

2007-09-20 16:19 +0000 [r83229-83231]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 83230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83230 | file | 2007-09-20 13:17:24 -0300 (Thu, 20 Sep 2007) | 7
	  lines Fix a minor spelling error. (closes issue #10769) Reported
	  by: flefoll Patches: chan_sip.c.trunk.83071.inita-patch uploaded
	  by flefoll (license 244) chan_sip.c.br14.83070.inita-patch
	  uploaded by flefoll (license 244) ........

	* pbx/pbx_dundi.c, cdr/cdr_pgsql.c, main/config.c: Fix memory leaks
	  in pbx_dundi, cdr_pgsql, and the configuration file parser.

2007-09-19 23:16 +0000 [r83213]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, apps/app_meetme.c, apps/app_queue.c,
	  apps/app_voicemail.c: More conversions to NEW_CLI (issue #10724)
	  Patches: chan_zap.c.patch uploaded by moy (license 222)
	  app_queue.c.patch uploaded by eliel (license 64)
	  app_voicemail.c.patch uploaded by eliel (license 64)
	  app_meetme.c.patch uploaded by eliel (license 64)

2007-09-19 20:06 +0000 [r83182-83183]  Joshua Colp <jcolp@digium.com>

	* cdr/cdr_csv.c: Clean up code in cdr_csv. (Are you sensing a theme
	  for me today?)

	* res/res_adsi.c: Clean up code in res_adsi.

2007-09-19 19:54 +0000 [r83176-83181]  Russell Bryant <russell@digium.com>

	* funcs/func_shell.c: put the channel in autoservice when executing
	  func_shell

	* /, apps/app_system.c: Merged revisions 83179 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83179 | russell | 2007-09-19 14:50:48 -0500 (Wed, 19 Sep 2007) |
	  5 lines The System() and TrySystem() applications can take a
	  substantial amount of time to execute while not servicing the
	  channel. So, put the channel in autoservice while the command is
	  being executed. (closes issue #10726, reported by mnicholson)
	  ........

	* funcs/func_curl.c, /: Merged revisions 83177 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83177 | russell | 2007-09-19 14:34:25 -0500 (Wed, 19 Sep 2007) |
	  4 lines Using curl can take a substantial amount of time, so the
	  channel should be autoserviced while waiting for it to complete.
	  (closes issue #10725, reported by mnicholson) ........

	* /, channels/chan_iax2.c: Merged revisions 83175 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83175 | russell | 2007-09-19 14:13:29 -0500 (Wed, 19 Sep 2007) |
	  8 lines When handling a reload of chan_iax2, don't use an
	  ao2_callback() to POKE all peers. Instead, use an iterator. By
	  using an iterator, the peers container is not locked while the
	  POKE is being done. It can cause a deadlock if the peers
	  container is locked because poking a peer will try to lock pvt
	  structs, while there is a lot of other code that will hold a pvt
	  lock when trying to go lock the peers container. (reported to me
	  directly by Loic Didelot. Thank you for the debug info!) ........

2007-09-19 17:22 +0000 [r83155-83157]  Joshua Colp <jcolp@digium.com>

	* apps/app_db.c: Fix indentation in app_db.

	* apps/app_authenticate.c: Clean up code in app_authenticate.

	* apps/app_adsiprog.c: Clean up code in app_adsiprog.

2007-09-19 15:11 +0000 [r83126]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 83121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83121 | russell | 2007-09-19 10:10:14 -0500 (Wed, 19 Sep 2007) |
	  4 lines Fix up another potential race condition. Do the loop
	  decrementing use count on events with the eventq protected from
	  being changed. (reported on IRC by Ivan) ........

2007-09-19 15:08 +0000 [r83105-83114]  Joshua Colp <jcolp@digium.com>

	* apps/app_disa.c: DISA only needs to know about the end of DTMF,
	  not the beginning/duration.

	* apps/app_disa.c: Clean up app_disa code a bit.

2007-09-19 13:55 +0000 [r83076]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c: Replace Google namespace occurrences with
	  Jingle. The former namespace is handled by chan_gtalk.

2007-09-19 13:49 +0000 [r83073-83075]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 83074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83074 | file | 2007-09-19 10:47:59 -0300 (Wed, 19 Sep 2007) | 6
	  lines Protect the CDR record from modification by pbx_exec so
	  that the application data contains the Queue data. (closes issue
	  #10761) Reported by: snar Patches: app-queue-mixmonitor.patch
	  uploaded by snar (license 245) ........

	* main/manager.c: Extend manager show connected with additional
	  information. (closes issue #10757) Reported by: outtolunc
	  Patches: manager.c.sessionstart.diff uploaded by outtolunc
	  (license 237)

2007-09-19 13:29 +0000 [r83072]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c: Remove namespaces in payload-type tags.

2007-09-19 13:21 +0000 [r83071]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 83070 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83070 | file | 2007-09-19 10:18:22 -0300 (Wed, 19 Sep 2007) | 6
	  lines (closes issue #10760) Reported by: dimas Patches:
	  chan_sip.patch uploaded by dimas (license 88) Read in
	  subscribecontext option in general to be the default. ........

2007-09-19 12:23 +0000 [r83055]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c, include/asterisk/jingle.h: Transmit
	  proper invitation, thus conforming to XEP-0166 (Jingle general
	  specifications), XEP-0167 (Jingle Audio via RTP) and XEP-0176
	  (Jingle ICE Transport).

2007-09-19 09:48 +0000 [r83025]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/chan_misdn_config.h,
	  channels/misdn_config.c: Merged revisions 83023-83024 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r83023 | crichter | 2007-09-19 11:31:55 +0200 (Mi, 19 Sep 2007) |
	  1 line added 'astdtmf' option to allow configuring the asterisk
	  dtmf detector instead of the mISDN_dsp ones. also added the patch
	  from irroot #10190, so that dtmf tones detected by the asterisk
	  detector are passed outofband to asterisk, to make any use of
	  dtmf tones at all. ........ r83024 | crichter | 2007-09-19
	  11:32:42 +0200 (Mi, 19 Sep 2007) | 1 line removed comment which
	  violates the coding guidelines. ........

2007-09-19 00:21 +0000 [r82993]  Russell Bryant <russell@digium.com>

	* /, apps/app_flash.c: Merged revisions 82992 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82992 | russell | 2007-09-18 19:19:49 -0500 (Tue, 18 Sep 2007) |
	  4 lines Change the description of app_flash to note how it can be
	  a useful tool instead of just saying that it is generally a
	  worthless feature. (Thanks to Jim Van Meggelen for pointing it
	  out and providing the proposed text) ........

2007-09-18 23:42 +0000 [r82962]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 82961 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82961 | file | 2007-09-18 20:41:02 -0300 (Tue, 18 Sep 2007) | 2
	  lines Initialize a variable to NULL to make the world happy.
	  ........

2007-09-18 22:46 +0000 [r82931]  Russell Bryant <russell@digium.com>

	* include/asterisk/agi.h, /, res/res_agi.c: Merged revisions 82929
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82929 | russell | 2007-09-18 17:42:27 -0500 (Tue, 18 Sep 2007) |
	  11 lines Add a new patch to handle interrupting the fgets() call
	  when using FastAGI. This version of the patch maintains the
	  original behavior of the code when not using FastAGI. (closes
	  issue #10553) Reported by: juggie Patches: res_agi_fgets-4.patch
	  uploaded by juggie (license 24) res_agi_fgets_1.4svn.patch
	  uploaded by juggie (license 24) Slight mods by me Tested by:
	  juggie, festr ........

2007-09-18 22:43 +0000 [r82871-82930]  Jason Parker <jparker@digium.com>

	* main/pbx.c, main/frame.c, main/dnsmgr.c, channels/chan_local.c,
	  channels/chan_sip.c, res/res_features.c, channels/chan_agent.c,
	  res/res_musiconhold.c, res/res_jabber.c, main/manager.c,
	  res/res_agi.c, channels/chan_features.c, main/logger.c,
	  main/http.c, channels/chan_alsa.c, res/res_realtime.c,
	  res/res_odbc.c: (issue #10724) Reported by: eliel Patches:
	  res_features.c.patch uploaded by eliel (license 64)
	  res_agi.c.patch uploaded by seanbright (license 71)
	  res_musiconhold.c.patch uploaded by seanbright (license 71)
	  pbx.c.patch uploaded by moy (license 222) logger.c.patch uploaded
	  by moy (license 222) frame.c.patch uploaded by moy (license 222)
	  manager.c.patch uploaded by moy (license 222) http.c.patch
	  uploaded by moy (license 222) dnsmgr.c.patch uploaded by moy
	  (license 222) res_realtime.c.patch uploaded by eliel (license 64)
	  res_odbc.c.patch uploaded by seanbright (license 71)
	  res_jabber.c.patch uploaded by eliel (license 64)
	  chan_local.c.patch uploaded by eliel (license 64)
	  chan_agent.c.patch uploaded by eliel (license 64)
	  chan_alsa.c.patch uploaded by eliel (license 64)
	  chan_features.c.patch uploaded by eliel (license 64)
	  chan_sip.c.patch uploaded by eliel (license 64) RollUp.1.patch
	  (includes all of the above patches) uploaded by seanbright
	  (license 71) Convert many CLI commands to the NEW_CLI format.

	* configs/voicemail.conf.sample, apps/app_voicemail.c: (closes
	  issue #10739) Reported by: ruffle Patches: app_voicemail.c.diff
	  uploaded by ruffle (license 201) 10739-moveheard.diff uploaded by
	  qwell (license 4) Tested by: callguy, ruffle Add an option to
	  disable the automatic moving of "heard" messages to the Old
	  folder.

2007-09-18 20:59 +0000 [r82868]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 82867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82867 | russell | 2007-09-18 15:56:43 -0500 (Tue, 18 Sep 2007) |
	  10 lines Fix a memory leak that can occur on systems under higher
	  load. The issue is that when events are appended to the master
	  event queue, they use the number of active sessions as a use
	  count so it will know when all active sessions at the time the
	  event happened have consumed it. However, the handling of the
	  number of sessions was not properly synchronized, so the use
	  count was not always correct, causing an event to disappear
	  early, or get stuck in the event queue for forever. (closes issue
	  #9238, reported by bweschke, patch from Ivan, modified by me)
	  ........

2007-09-18 20:10 +0000 [r82866]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 82865 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82865 | mmichelson | 2007-09-18 15:09:02 -0500 (Tue, 18 Sep
	  2007) | 4 lines Moving the logic for handling an empty membername
	  to the create_member function so that there is a common place
	  where this occurs instead of being spread out to several
	  different places. ........

2007-09-18 19:06 +0000 [r82835]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_queue.c: Merged revisions 82834 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82834 | kpfleming | 2007-09-18 13:59:52 -0500 (Tue, 18 Sep 2007)
	  | 2 lines there is no need for conditional logic to select
	  ->interface or ->membername, snince ->membername will always be
	  populated ........

2007-09-18 16:34 +0000 [r82803]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 82802 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82802 | russell | 2007-09-18 11:31:01 -0500 (Tue, 18 Sep 2007) |
	  4 lines When copying the contents from the wildcard peer, do a
	  deep copy instead of shallow copy so that it doesn't crash when
	  beging destroyed. (closes issue #10546, patch by me) ........

2007-09-18 16:16 +0000 [r82800]  Jason Parker <jparker@digium.com>

	* configs/queues.conf.sample, apps/app_queue.c: (closes issue
	  #10755) Reported by: snar Patches: app-queue-cdr-trunk.patch
	  uploaded by snar (license 245) queues.conf.patch uploaded by snar
	  (license 245) Add an updatecdr option to queues.conf, so that if
	  a "member name" is specified, the cdr record will be updated with
	  that, rather than the channel.

2007-09-18 16:14 +0000 [r82776-82793]  Russell Bryant <russell@digium.com>

	* include/asterisk/threadstorage.h: Make sure that libpthread
	  doesn't try to call free() directly when MALLOC_DEBUG is enabled.
	  If it does, Asterisk will crash as the address isn't the real
	  beginning of the allocation.

	* channels/chan_zap.c: Don't use ast_channel_lock_both() here, it
	  only exists in one of my branches. This is theoretically a
	  potential deadlock, but it's the way it was before so I'm going
	  to leave it this way for now.

2007-09-18 15:29 +0000 [r82752]  Jason Parker <jparker@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 82751 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #10753) ........ r82751 | qwell | 2007-09-18 10:28:21 -0500
	  (Tue, 18 Sep 2007) | 4 lines Correct the allowexternaldomains
	  option in SIP sample config. Issue 10753 ........

2007-09-17 22:59 +0000 [r82728]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, channels/chan_zap.c, apps/app_zapscan.c,
	  channels/chan_agent.c, channels/chan_alsa.c,
	  channels/chan_iax2.c, channels/chan_mgcp.c: convert various
	  places that access the channel lock directly to use the channel
	  lock wrappers

2007-09-17 21:52 +0000 [r82710-82712]  Jason Parker <jparker@digium.com>

	* cdr/cdr_sqlite3_custom.c: Don't try to continue loading
	  cdr_sqlite3_custom on a module load failure (such as the config
	  not existing) Closes issue #10749, patch by seanbright.

	* configs/http.conf.sample: Fix the sample redirect to point to a
	  valid file in the Asterisk GUI. Closes issue #10748, patch by
	  bkruse

2007-09-17 20:24 +0000 [r82595-82679]  Russell Bryant <russell@digium.com>

	* doc/res_config_sqlite.txt, res/res_config_sqlite.c: Add support
	  for #include, var_metric, and cat_metric in res_config_sqlite
	  (closes issue #10738, rbraun_proformatique)

	* /, main/stdtime/localtime.c, apps/app_voicemail.c: Merged
	  revisions 82676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82676 | russell | 2007-09-17 15:16:25 -0500 (Mon, 17 Sep 2007) |
	  4 lines Put a memset in ast_localtime() instead of a couple
	  places in app_voicemail to prevent the problem everywhere instead
	  of just a couple of places. (related to issue #10746) ........

	* /, apps/app_voicemail.c: Merged revisions 82644 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82644 | russell | 2007-09-17 15:00:32 -0500 (Mon, 17 Sep 2007) |
	  6 lines Initialize some memory to fix crashes when leaving
	  voicemail. This problem was fixed by running Asterisk under
	  valgrind. (closes issue #10746, reported by arcivanov, patched by
	  me) *** IMPORTANT NOTE: We need to check to see if this same bug
	  exists elsewhere. ........

	* apps/app_dial.c, res/ael/pval.c, include/asterisk/utils.h,
	  apps/app_meetme.c, channels/chan_sip.c, channels/chan_skinny.c,
	  res/res_features.c, apps/app_queue.c, channels/chan_iax2.c,
	  pbx/pbx_config.c: Make the MALLOC_DEBUG output for free() useful
	  again. After changing calls to free to be ast_free, astmm said
	  all calls to free were coming from utils.h

	* /, res/res_features.c: Merged revisions 82594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82594 | russell | 2007-09-17 11:46:59 -0500 (Mon, 17 Sep 2007) |
	  5 lines Handle the case where there are multiple dynamic features
	  with the same digit mapping, but won't always match the activated
	  on/by access controls. In that case, the code needs to keep
	  trying features for a match. (reported by Atis on the
	  asterisk-dev list, patched by me) ........

2007-09-17 16:44 +0000 [r82593]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_queue.c: Merged revisions 82590,82592 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82590 | kpfleming | 2007-09-17 11:33:30 -0500 (Mon, 17
	  Sep 2007) | 2 lines fix a couple of places where a logical member
	  name (if specified) was not used, but instead the direct
	  interface was listed ........ r82592 | kpfleming | 2007-09-17
	  11:40:12 -0500 (Mon, 17 Sep 2007) | 2 lines revert a change that
	  wasn't supposed to be committed... doh! ........

2007-09-17 14:58 +0000 [r82568]  Doug Bailey <dbailey@digium.com>

	* main/http.c: Fix memory leak introduced when POST support was
	  added.

2007-09-17 02:20 +0000 [r82516-82546]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c: (closes issue #10715) Reported by:
	  the-chopper Don't bother hanging up the new channel if it does
	  not exist yet.

	* main/pbx.c, /: Merged revisions 82514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82514 | file | 2007-09-16 23:00:59 -0300 (Sun, 16 Sep 2007) | 4
	  lines (closes issue #10734) Reported by: asgaroth Instead of
	  passing a NULL pointer into snprintf pass "". It makes Solaris
	  much happier. ........

2007-09-16 15:32 +0000 [r82496]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Option maxmessage should be maxsecs
	  per-folder, too (closes issue #10729)

2007-09-14 21:30 +0000 [r82457]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 82444 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82444 | murf | 2007-09-14 15:19:27 -0600 (Fri, 14 Sep 2007) | 1
	  line closes issue #10668; thanks to arkadia for his patch; had to
	  leave out the bit about ending the previous cdr in the fork; it
	  would destroy current implementations. ........

2007-09-14 21:21 +0000 [r82454]  Russell Bryant <russell@digium.com>

	* /, configs/zapata.conf.sample: Merged revisions 82435 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82435 | russell | 2007-09-14 16:17:08 -0500 (Fri, 14 Sep 2007) |
	  3 lines Add a note to help clarify the value set with the
	  echocancel option. (inspired by Malcolm's blog post on
	  blogs.digium.com about HPEC) ........

2007-09-14 19:49 +0000 [r82401]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c, configs/skinny.conf.sample: Add support
	  in chan_skinny for sending RTP directly to the endpoints. Closes
	  issue #9154, patch by DEA

2007-09-14 18:37 +0000 [r82397-82400]  Mark Michelson <mmichelson@digium.com>

	* /: Blocking revision 82398

	* /, apps/app_queue.c: Merged revisions 82396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82396 | mmichelson | 2007-09-14 13:28:36 -0500 (Fri, 14 Sep
	  2007) | 5 lines Adding member name field to manager events where
	  they were missing before (closes issue #10721, reported by snar)
	  ........

2007-09-14 17:51 +0000 [r82395]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 82394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82394 | qwell | 2007-09-14 12:48:05 -0500 (Fri, 14 Sep 2007) | 5
	  lines If a channel does not have an owner, do not try to set a
	  channel variable. This will end up making the channel variable
	  global, which is not right. Closes issue #10720, patch by
	  flefoll. ........

2007-09-14 17:29 +0000 [r82393]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/res_odbc.h, res/res_odbc.c: Add a direct execute
	  method to res_odbc (closes issue #10722)

2007-09-14 16:02 +0000 [r82386-82391]  Russell Bryant <russell@digium.com>

	* channels/xpmr/xpmr.h, channels/xpmr/LICENSE (removed),
	  channels/xpmr/sinetabx.h, channels/xpmr/xpmr.c,
	  channels/xpmr/xpmr_coef.h: use the standard license header for
	  the xpmr files

	* channels/chan_usbradio.c (added), channels/xpmr (added): Add
	  chan_usbradio to trunk

	* /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in:
	  Merged revisions 82385 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82385 | russell | 2007-09-14 10:50:49 -0500 (Fri, 14 Sep 2007) |
	  3 lines Add checking for libusb here, so nobody has to deal with
	  conflicts in the chan_usbradio-1.4 branch every time the
	  configure script gets changed ........

2007-09-14 14:44 +0000 [r82377]  Mark Michelson <mmichelson@digium.com>

	* doc/CODING-GUIDELINES, /: Merged revisions 82376 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82376 | mmichelson | 2007-09-14 09:42:29 -0500 (Fri, 14
	  Sep 2007) | 5 lines Fixing a typo in the coding guidelines
	  (closes issue #10717, reported and patched by leedm777) ........

2007-09-14 13:02 +0000 [r82373]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c: Fix DTMF following what has been done in
	  issue #9401. Thanks irroot.

2007-09-13 23:12 +0000 [r82359]  Jason Parker <jparker@digium.com>

	* pbx/pbx_spool.c, /: Merged revisions 82358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82358 | qwell | 2007-09-13 18:11:27 -0500 (Thu, 13 Sep 2007) | 4
	  lines Fix a small typo. retrytime > waittime ........

2007-09-13 21:53 +0000 [r82347-82352]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Changed "in" to "queue" in "queue
	  {pause|unpause} member" command to be more clear. Also added
	  check to be sure that sixth argument is the word "reason" if full
	  command is given

	* CHANGES, apps/app_queue.c: Added the ability to pause and unpause
	  members via the CLI

	* /, apps/app_queue.c: Merged revisions 82346 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82346 | mmichelson | 2007-09-13 15:16:37 -0500 (Thu, 13 Sep
	  2007) | 4 lines Preemptively fixing a possible segfault. It is
	  possible that queuename is NULL (meaning pause ALL queues), so
	  use q->name instead. ........

2007-09-13 20:13 +0000 [r82345]  Jason Parker <jparker@digium.com>

	* /, cdr/cdr_csv.c: Merged revisions 82344 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82344 | qwell | 2007-09-13 15:11:40 -0500 (Thu, 13 Sep 2007) | 9
	  lines Fix a crash that could occur in cdr_csv when mutliple
	  threads tried to close the same file. Do we actually need the
	  locking here? What happens if you open the same file twice, and
	  two threads try to write to it at the same time? Is fputs() going
	  to write out the entire line at once? I suspect that it could be
	  possible for the second fopen to run during the first fputs, so
	  the position could be in the middle of the previously written
	  line... Issue 10347, initial patch by explidous (but I removed
	  all of the paranoia stuff..) ........

2007-09-13 19:16 +0000 [r82338-82341]  Russell Bryant <russell@digium.com>

	* /, main/astobj2.c: Merged revisions 82339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82339 | russell | 2007-09-13 13:57:08 -0500 (Thu, 13 Sep 2007) |
	  1 line resolve a warning when not building under dev mode
	  ........

	* include/asterisk.h, /, main/astobj2.c, main/asterisk.c: Merged
	  revisions 82337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82337 | russell | 2007-09-13 13:45:59 -0500 (Thu, 13 Sep 2007) |
	  4 lines Only compile in tracking astobj2 statistics if dev-mode
	  is enabled. Also, when dev mode is enabled, register the CLI
	  command that can be used to run the astobj2 test and print out
	  statistics. ........

2007-09-13 18:13 +0000 [r82336]  Kevin P. Fleming <kpfleming@digium.com>

	* /, LICENSE: Merged revisions 82335 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r82335 | kpfleming | 2007-09-13 11:12:00 -0700
	  (Thu, 13 Sep 2007) | 10 lines Merged revisions 82334 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r82334 | kpfleming | 2007-09-13 11:10:12 -0700 (Thu, 13
	  Sep 2007) | 2 lines clarify the OpenSSL and OpenH323 license
	  exceptions ........ ................

2007-09-13 16:58 +0000 [r82329]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, CHANGES, configs/zapata.conf.sample: Add
	  setvar support to chan_zap. Just like you can in chan_sip and
	  chan_iax2 you can now use it with zaptel channels. (done while in
	  Montreal at the Asterisk bootcamp!)

2007-09-13 16:27 +0000 [r82327]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 82326 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82326 | mmichelson | 2007-09-13 11:25:59 -0500 (Thu, 13 Sep
	  2007) | 7 lines Added logic to handle the unlikely case that
	  someone has two queues with the same name. Asterisk will log a
	  warning message letting the user know that one was already
	  defined with that name and is it skipping all further instances.
	  This also will work for realtime queues but in order for that to
	  happen, the user would have to trigger a perfectly timed reload
	  as a realtime queue is being looked up, which is highly unlikely
	  (but taken care of nonetheless). ........

2007-09-13 15:26 +0000 [r82321]  Russell Bryant <russell@digium.com>

	* include/asterisk/doxyref.h, doc/res_config_sqlite.txt,
	  res/res_config_sqlite.c, configs/res_config_sqlite.conf: Various
	  code and documentation cleanups for res_config_sqlite (closes
	  issue #10711, rbraun_proformatique)

2007-09-13 15:25 +0000 [r82312-82320]  Philippe Sultan <philippe.sultan@gmail.com>

	* channels/chan_jingle.c: Modify rule filters to match with the
	  Jingle namespace constant

	* include/asterisk/jingle.h: Assign namespace properly

	* channels/chan_jingle.c, include/asterisk/jingle.h: Changed Jingle
	  and Jingle DTMF namespaces. As both specifications are in the
	  Experimental status, the namespaces specified therein shall be of
	  the form "http://www.xmpp.org/extensions/xep-XXXX.html#ns". See
	  the Namespace issuance section in XEP-0053 :
	  http://www.xmpp.org/extensions/xep-0053.html#namespaces

	* channels/chan_jingle.c: Reflect Jingle DTMF specification changes

2007-09-13 13:34 +0000 [r82311]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Fix a missing unref of a member struct. This
	  was pointed out by Marta. Thanks! This function in 1.4 didn't
	  have the problem.

2007-09-13 11:54 +0000 [r82310]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 82309 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82309 | phsultan | 2007-09-13 13:47:14 +0200 (Thu, 13
	  Sep 2007) | 4 lines Closes issue #9401, reported and patched by
	  irrot, with slight modifications by me. Handle DTMF sent by
	  Asterisk properly. ........

2007-09-12 21:57 +0000 [r82297]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c: Merged revisions 82296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82296 | russell | 2007-09-12 16:56:32 -0500 (Wed, 12 Sep 2007) |
	  3 lines Fix a check of the wrong pointer, as pointed out by an
	  XXX comment left in the code. The problem was harmless, however.
	  ........

2007-09-12 21:55 +0000 [r82294]  Jason Parker <jparker@digium.com>

	* channels/chan_iax2.c: After some discussions, we decided that the
	  return values here were a bit messy. This also fixes a bug on
	  reload, where peers may not have reregistered properly.

2007-09-12 21:32 +0000 [r82290-82292]  Tilghman Lesher <tlesher@digium.com>

	* /, main/stdtime/tzfile.h: Merged revisions 82291 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82291 | tilghman | 2007-09-12 16:28:33 -0500 (Wed, 12
	  Sep 2007) | 2 lines Oops, wrong location for FreeBSD zone files
	  ........

	* main/stdtime/private.h, /, main/stdtime/tzfile.h,
	  funcs/func_strings.c, apps/app_sms.c,
	  include/asterisk/localtime.h, main/stdtime/localtime.c: Merged
	  revisions 82285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82285 | tilghman | 2007-09-12 15:12:06 -0500 (Wed, 12 Sep 2007)
	  | 4 lines Working on issue #10531 exposed a rather nasty 64-bit
	  issue on ast_mktime, so we updated the localtime.c file from
	  source. Next we'll have to write ast_strptime to match. ........

2007-09-12 21:17 +0000 [r82289]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Removed an unneeded ao2_ref. This was a problem
	  because unless get_member_status returned QUEUE_NORMAL, a NULL
	  member would be unreferenced. While this didn't cause any crashes
	  or anything terrible, it still is incorrect

2007-09-12 20:50 +0000 [r82288]  Steve Murphy <murf@digium.com>

	* main/config.c: This fix closes issue #10642 -- it's not perfect,
	  but should retain most blank lines in config files, via
	  read/write cycles.

2007-09-12 20:47 +0000 [r82287]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, apps/app_meetme.c: Merged revisions 82286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82286 | dhubbard | 2007-09-12 15:24:24 -0500 (Wed, 12 Sep 2007)
	  | 1 line remove a race condition for the creation of
	  recordthread's, and fix a small memory leak. This closes issue#
	  10636 ........

2007-09-12 16:24 +0000 [r82283]  Mark Michelson <mmichelson@digium.com>

	* main/pbx.c, main/app.c, main/asterisk.c: Fixes Solaris build
	  warnings (closes issue #10698, reported and patched by snuffy)

2007-09-12 15:53 +0000 [r82279-82282]  Russell Bryant <russell@digium.com>

	* utils/hashtest2.c: Change the traversal to use ao2_callback()
	  instead of an ao2_iterator. Using ao2_callback() is a much more
	  efficient way of performing an operation on every item in the
	  container. This change makes hashtest2 run in about 25% of the
	  time it ran before on my system. In general, I would say that it
	  makes the most sense to use an ao2_iterator if the operation
	  being performed is going to take a long time and you don't want
	  to keep the container locked while you work with each object.
	  Otherwise, the use of ao2_callback is preferred.

	* /, main/asterisk.c: Merged revisions 82280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82280 | russell | 2007-09-12 10:16:49 -0500 (Wed, 12 Sep 2007) |
	  4 lines Clean up the output of "asterisk -h". This tweaks the
	  wording and wraps lines at 80 characters. (closes issue #10699,
	  seanbright) ........

	* /, res/res_agi.c: Merged revisions 82278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82278 | russell | 2007-09-12 10:11:11 -0500 (Wed, 12 Sep 2007) |
	  3 lines revert patch from issue #10553, as someone not using
	  fastagi reported that this broke their system. ........

2007-09-12 14:31 +0000 [r82275-82277]  Mark Michelson <mmichelson@digium.com>

	* /: Blocking changes from revision 82276

	* /, apps/app_queue.c: Merged revisions 82274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82274 | mmichelson | 2007-09-12 09:24:53 -0500 (Wed, 12 Sep
	  2007) | 6 lines We should only initialize a realtime queue when
	  it is allocated, not every time we access it. This prevents the
	  members ao2_container from being reallocated every time the queue
	  is accessed. I also removed a debug message I had accidentally
	  left in on a previous commit. ........

2007-09-11 23:07 +0000 [r82273]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Fix to make sure we don't hangup a call when
	  getting a RLC without sending REL. Found making sure we are Q.784
	  (the SS7 test specification) compliant

2007-09-11 22:38 +0000 [r82269-82270]  Russell Bryant <russell@digium.com>

	* main/config.c: remove unused functions that made this file not
	  build under dev mode

	* /, apps/app_queue.c: Merged revisions 82267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82267 | russell | 2007-09-11 17:37:17 -0500 (Tue, 11 Sep 2007) |
	  3 lines Fix incorrect uses of ao2_find(). Every one of these
	  calls was reading bogus memory ... ........

2007-09-11 22:37 +0000 [r82268]  Steve Murphy <murf@digium.com>

	* utils/Makefile, main/config.c: This solves an unreported solaris
	  compile problem (missing -lnsl -lsocket).

2007-09-11 21:43 +0000 [r82266]  Joshua Colp <jcolp@digium.com>

	* /, codecs/gsm/src/long_term.c, codecs/gsm/src/lpc.c: Merged
	  revisions 82265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82265 | file | 2007-09-11 18:41:49 -0300 (Tue, 11 Sep 2007) | 4
	  lines (closes issue #10679) Reported by: andrew Build under dev
	  mode when K6OPTS is enabled. ........

2007-09-11 20:50 +0000 [r82264]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 82263 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82263 | russell | 2007-09-11 15:49:34 -0500 (Tue, 11 Sep 2007) |
	  5 lines Fix another missing unref of member objects. This one was
	  pointed out by Marta. When building the outgoing list in
	  try_calling(), a member reference is stored in each outgoing
	  entry. However, when this list got destroyed, the reference was
	  not released. ........

2007-09-11 20:49 +0000 [r82262]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 82261 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82261 | murf | 2007-09-11 14:36:15 -0600 (Tue, 11 Sep 2007) | 1
	  line this change should fix issue # 10659 -- what I worry about
	  is how many other bug reports it may generate. Hopefully, we can
	  please the/a majority. Hopefully. We shall see. Calls not marked
	  ANSWERED and with only one channel name will not be posted. This
	  should eliminate the double CDR's. ........

2007-09-11 18:37 +0000 [r82257-82258]  Joshua Colp <jcolp@digium.com>

	* configs/sip.conf.sample: Lil' bit more documentation to keep
	  folks happy.

	* channels/chan_sip.c, configs/sip.conf.sample, CHANGES: (closes
	  issue #9433) Reported by: junky Patches: register_trying.diff.txt
	  uploaded by jcmoore Disable sending 100 Trying on REGISTER
	  attempts and make it an option. This has been signed off by oej.

2007-09-11 17:16 +0000 [r82256]  Steve Murphy <murf@digium.com>

	* utils/Makefile: fixing up the pthread stuff for hashtest2

2007-09-11 16:15 +0000 [r82254]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, channels/misdn/isdn_lib.c: Merged
	  revisions 82249 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82249 | crichter | 2007-09-11 18:01:27 +0200 (Di, 11 Sep 2007) |
	  1 line fixed a hold/retrieve issue. ........

2007-09-11 16:12 +0000 [r82253]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 82252 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82252 | mmichelson | 2007-09-11 11:05:56 -0500 (Tue, 11 Sep
	  2007) | 6 lines All instances of ao2_iterators which were just
	  named 'i' have been renamed to 'mem_iter' so that when refcounted
	  queues are merged into trunk, there will be little confusion
	  regarding iterator names, especially when a queue and member
	  iterator are used in the same function. ........

2007-09-11 16:05 +0000 [r82251]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 82250 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82250 | russell | 2007-09-11 11:03:42 -0500 (Tue, 11 Sep 2007) |
	  4 lines The sample dundi.conf claims support for a wildcard peer
	  entry - [*], but the code did not support it. This patch makes it
	  work. (closes issue #10546, patch by dds, with some changes by
	  me) ........

2007-09-11 15:34 +0000 [r82248]  Joshua Colp <jcolp@digium.com>

	* main/cdr.c: (closes issue #10666) Reported by: arkadia Patches:
	  cdr_lockorder.patch uploaded by arkadia (license 233) Optimize
	  CDR stuff a bit.

2007-09-11 15:31 +0000 [r82246-82247]  Russell Bryant <russell@digium.com>

	* res/res_agi.c: Remove an unused variable. I have no idea why this
	  was marked with the unused attribute instead of just removing it.
	  :)

	* /, res/res_agi.c: Merged revisions 82245 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82245 | russell | 2007-09-11 10:26:51 -0500 (Tue, 11 Sep 2007) |
	  9 lines (closes issue #10553) Reported by: juggie Patches:
	  res_agi_fgets-2.patch uploaded by juggie (license 24) Tested by:
	  juggie When using fastagi, fgets() can return before a full line
	  is read. Add explicit handling for the case where it gets
	  interrupted. ........

2007-09-11 14:58 +0000 [r82242-82244]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 82243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82243 | file | 2007-09-11 11:56:39 -0300 (Tue, 11 Sep 2007) | 6
	  lines (closes issue #10577) Reported by: jamesgolovich Patches:
	  asterisk-dundifree.diff.txt uploaded by jamesgolovich (license
	  176) Don't leak memory when unloading DUNDi. ........

	* apps/app_meetme.c: (closes issue #10560) Reported by: ruffle
	  Patches: rb uploaded by ruffle (license 201) Show whether the
	  conference is locked or not on the CLI.

2007-09-11 14:35 +0000 [r82237-82241]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 82240 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82240 | russell | 2007-09-11 09:34:12 -0500 (Tue, 11 Sep 2007) |
	  2 lines Add a couple more missing unrefs of queue member objects
	  ........

	* /, apps/app_queue.c: Merged revisions 82238 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82238 | russell | 2007-09-11 09:21:17 -0500 (Tue, 11 Sep 2007) |
	  2 lines Add a missing unref of a queue member in an error
	  handling block ........

	* /, apps/app_queue.c: Merged revisions 82236 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82236 | russell | 2007-09-11 09:09:43 -0500 (Tue, 11 Sep 2007) |
	  2 lines Document why membercount can not simply be replaced by
	  ao2_container_count() ........

2007-09-11 13:46 +0000 [r82231-82235]  Joshua Colp <jcolp@digium.com>

	* utils/Makefile: Include string compatibility file in hashtest2.

	* utils/hashtest2.c: Include compat.h to hopefully make it
	  compatible with FreeBSD.

	* utils/hashtest2.c: Fix building under FreeBSD. Make sure alloca.h
	  exists before including it.

	* main/manager.c: (closes issue #10695) Reported by: junky Patches:
	  count_showconn.diff uploaded by junky (license 177) Provide a
	  count of connected users to manager.

	* main/minimime/minimime.c, main/minimime/tests/create.c,
	  main/minimime/mm_mem.c, main/minimime/tests/parse.c: (closes
	  issue #10692) Reported by: snuffy Patches: minivm.diff uploaded
	  by snuffy (license 35) Instead of using err (which is not
	  available under Solaris) use fdprintf with stderr.

2007-09-10 20:03 +0000 [r82200]  Tilghman Lesher <tlesher@digium.com>

	* UPGRADE.txt, channels/chan_iax2.c: Change the IAXPeers command to
	  have manager-style output, instead of CLI-style output (closes
	  issue #8254)

2007-09-10 19:10 +0000 [r82185]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Fixing a problem where NULL channels would
	  cause a crash when calling indisposed queue members (i.e. paused,
	  wrapup time not completed, etc.)

2007-09-10 18:32 +0000 [r82178]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_queue.c: Merged revisions 82155 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r82155 | tilghman | 2007-09-10 13:02:02 -0500 (Mon, 10 Sep 2007)
	  | 2 lines Convert struct member to use refcounts (closes issue
	  #10199) ........

2007-09-10 17:39 +0000 [r82154]  Jason Parker <jparker@digium.com>

	* main/db.c: Add a counter to the 'database deltree' CLI command.
	  Note: this is slightly different than the initial patch, because
	  I felt that using res <= 0 would be a change in behavior. Closes
	  issue #10687, patch by junky

2007-09-10 16:59 +0000 [r82140]  Steve Murphy <murf@digium.com>

	* utils/Makefile, utils/hashtest2.c (added): Committing my test for
	  astobj2, hashtest2.c, along with makefile changes in utils.

2007-09-10 16:24 +0000 [r82125]  Jason Parker <jparker@digium.com>

	* main/db.c: Add counter to 'database show' CLI command. (also a
	  minor whitespace change that I found along the way) Closes issue
	  #10683, patch by junky

2007-09-10 16:19 +0000 [r82124]  Steve Murphy <murf@digium.com>

	* main/astobj2.c: Changes applied from marta's team/marta/astobj2
	  branch to solve a race condition

2007-09-10 15:05 +0000 [r82092]  Mark Michelson <mmichelson@digium.com>

	* /, configs/misdn.conf.sample: Merged revisions 82091 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82091 | mmichelson | 2007-09-10 10:02:12 -0500 (Mon, 10
	  Sep 2007) | 5 lines Removing non-existent options from misdn
	  configuration sample. (closes issue #10678, reported and patched
	  by IgorG) ........

2007-09-10 14:26 +0000 [r82062-82077]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: (closes issue #10688) Reported by: casper
	  Patches: chan_sip.c.82076.diff uploaded by casper (license 55)
	  Remove double check for zombie flag and optimize things a bit.

	* res/res_agi.c: (closes issue #10684) Reported by: junky Patches:
	  debug.diff uploaded by junky (license 177) Fix issue with debug
	  always showing up.

	* apps/app_meetme.c: (closes issue #10686) Reported by: junky
	  Patches: meet.diff uploaded by junky (license 177) Change NOTICE
	  message to DEBUG.

2007-09-09 02:45 +0000 [r82029]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 82028 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r82028 | tilghman | 2007-09-08 21:35:18 -0500 (Sat, 08
	  Sep 2007) | 2 lines Fix inline compiles on really old compilers
	  (who uses gcc 2.7 anymore, really?) (closes issue #10675)
	  ........

2007-09-08 19:01 +0000 [r81998-81999]  Russell Bryant <russell@digium.com>

	* include/asterisk/slinfactory.h: Add doxygen documentation for
	  slinfactory_destroy(), mainly just noting that it doesn't free
	  the slinfactory itself. (This isn't related to a bug, i'm just
	  looking over random code)

	* /, main/asterisk.c: Merged revisions 81997 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81997 | russell | 2007-09-08 13:41:32 -0500 (Sat, 08 Sep 2007) |
	  2 lines Fix a small memory leak. ast_unregister_atexit() did not
	  free the entry it removed. ........

2007-09-08 16:37 +0000 [r81984]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Make Callerid more consistent in IMAP mail
	  headers (closes issue #10056, reported and patched by jaroth,
	  with small modification by me)

2007-09-08 13:45 +0000 [r81953]  Russell Bryant <russell@digium.com>

	* /, .cleancount: Merged revisions 81952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81952 | russell | 2007-09-08 08:42:26 -0500 (Sat, 08 Sep 2007) |
	  11 lines (closes issue #10672) Bump the cleancount so that a
	  "make clean" will be forced. This is needed because my fix in
	  revision 81599 made a change to a data structure in file.h, and
	  since file dependency tracking is only on with dev-mode enabled,
	  file format modules that don't get rebuilt may crash, as is the
	  case with this issue. This makes me wonder - how much faster does
	  the code build without the file dependency tracking enabled? If
	  it doesn't make much of a difference, then it may be worth just
	  keeping it on all of the time, or perhaps just not in release
	  tarballs, so that this type of issue is avoided. ........

2007-09-07 19:53 +0000 [r81910-81924]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 81923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10671) ........ r81923 | qwell | 2007-09-07 14:48:00 -0500
	  (Fri, 07 Sep 2007) | 5 lines Allow the MEMBERINTERFACE variable
	  to be used as the mixmonitor filename. This moves the setting of
	  the MEMBERINTERFACE variable to before mixmonitor. Issue 10671,
	  patch by sim. ........

	* apps/app_queue.c: Add an optional reason parameter to
	  PauseQueueMember/UnpauseQueueMember applications and manager
	  events. Issue 8738, patch by rgollent

2007-09-07 15:29 +0000 [r81891]  Mark Michelson <mmichelson@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 81886 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81886 | mmichelson | 2007-09-07 10:25:19 -0500 (Fri, 07 Sep
	  2007) | 3 lines Moving the explanation for joinempty to a more
	  appropriate place ........

2007-09-07 12:32 +0000 [r81858-81873]  Joshua Colp <jcolp@digium.com>

	* configure, configure.ac: Don't check for epoll support when cross
	  compiling.

	* main/channel.c, main/audiohook.c: Fix memory issue that crept up
	  with Russell's testing. It is *not* proper to free the frame we
	  get in ast_write.

2007-09-06 22:32 +0000 [r81839-81849]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: fix the build ... oops

	* /, channels/chan_sip.c: Merged revisions 81832 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81832 | russell | 2007-09-06 17:28:57 -0500 (Thu, 06 Sep 2007) |
	  16 lines (closes issue #9724, closes issue #10374) Reported by:
	  kenw Patches: 9724.txt uploaded by russell (license 2) Tested by:
	  kenw, russell Resolve a deadlock that occurs when doing a SIP
	  transfer to parking. I come across this type of deadlock fairly
	  often it seems. It is very important to mind the boundary between
	  the channel driver and the core in respect to the channel lock
	  and the channel-pvt lock. Channel drivers lock to lock the pvt
	  and then the channel once it calls into the core, while the core
	  will do it in the opposite order. The way this is avoided is by
	  having channel drivers either release their pvt lock while
	  calling into the core, or such as in this case, unlocking the pvt
	  just long enough to acquire the channel lock. ........

2007-09-06 22:06 +0000 [r81827]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 81826 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81826 | qwell | 2007-09-06 17:05:02 -0500 (Thu, 06 Sep 2007) | 1
	  line We added COPTS for ASTCFLAGS additions, but not LDOPTS for
	  ASTLDFLAGS. This adds LDOPTS ........

2007-09-06 21:01 +0000 [r81814]  Joshua Colp <jcolp@digium.com>

	* channels/iax2-parser.c: Initialize iax_frames variable to NULL,
	  keeps valgrind happy.

2007-09-06 20:54 +0000 [r81783-81813]  Russell Bryant <russell@digium.com>

	* CHANGES, funcs/func_extstate.c (added): Add EXTENSION_STATE()
	  function that can retrieve the state of an extension that has a
	  hint. (closes issue #10635, adamgundy)

	* CHANGES: s/DEVSTATE/DEVICE_STATE/

	* funcs/func_devstate.c: Rename the DEVSTATE() function to
	  DEVICE_STATE() to better conform to how other functions are
	  named. (inspired by issue #10635)

	* CHANGES, funcs/func_devstate.c: Merge HINT() dialplan function
	  from my sandbox branch into trunk. This function will let you
	  retrieve the list of devices or name associated with a hint.
	  (inspired by issue #10635)

2007-09-06 20:16 +0000 [r81782]  Joshua Colp <jcolp@digium.com>

	* channels/chan_skinny.c, CHANGES: (closes issue #10377) Reported
	  by: mvanbaak Patches: chan_skinny_info.diff uploaded by mvanbaak
	  (license 7) Add skinny show device, skinny show line, and skinny
	  show settings CLI commands.

2007-09-06 20:05 +0000 [r81781]  Russell Bryant <russell@digium.com>

	* configs/extensions.conf.sample: Fix the syntax of declaring a
	  hint with a name to be compatible with trunk

2007-09-06 20:00 +0000 [r81779]  Jason Parker <jparker@digium.com>

	* /, include/asterisk/astobj2.h: Merged revisions 81778 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81778 | qwell | 2007-09-06 14:59:07 -0500 (Thu, 06 Sep 2007) | 2
	  lines This should fix a build issue that people building against
	  uClibc were seeing with the addition of astobj2 ........

2007-09-06 19:43 +0000 [r81777]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 81776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81776 | file | 2007-09-06 16:40:37 -0300 (Thu, 06 Sep 2007) | 7
	  lines (closes issue #10122) Reported by: stevefeinstein Patches:
	  meetme-unmute-manager.diff uploaded by qwell (license 4) Tested
	  by: stevefeinstein After looking over the code I agree with
	  Qwell. Setting the file descriptor to conference each time just
	  causes a fight back and forth. ........

2007-09-06 17:00 +0000 [r81745]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, include/asterisk/jabber.h, channels/chan_gtalk.c: Merged
	  revisions 81743 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81743 | phsultan | 2007-09-06 18:56:29 +0200 (Thu, 06 Sep 2007)
	  | 1 line Various string length fixes. Removed an unused variable
	  in aji_client structure (context) ........

2007-09-06 16:57 +0000 [r81744]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/safe_asterisk: Incorporate the ability to log
	  output of safe_asterisk to syslog (closes issue #9882)

2007-09-06 16:38 +0000 [r81742]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Patch on 10575. Add support for unequipped
	  CIC (UCIC) message as well as improve some of our CIC flags in
	  chan_zap

2007-09-06 16:31 +0000 [r81730]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81713 | mmichelson | 2007-09-06 11:25:40 -0500 (Thu, 06 Sep
	  2007) | 6 lines Fixes an issue where valid DTMF had to be pressed
	  twice to exit a queue if a member's phone was ringing. (closes
	  issue #10655, reported by strider2k, patched by me) ........

2007-09-06 15:43 +0000 [r81712]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/astobj2.h, main/astobj2.c: various changes to
	  the documentation, and redefinition of ao2_hash_fn and
	  ao2_callback_fn typedefs, in preparation to more cleanup of the
	  _search_flags Please do not merge this change to 1.4 yet - there
	  are no functional changes anyways.

2007-09-06 15:21 +0000 [r81683]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_features.c: Merged revisions 81682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81682 | mmichelson | 2007-09-06 10:20:36 -0500 (Thu, 06 Sep
	  2007) | 5 lines Fixes a memory leak (closes issue #10658,
	  reported and patched by Ivan) ........

2007-09-06 14:24 +0000 [r81651]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 81650 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81650 | phsultan | 2007-09-06 16:20:54 +0200 (Thu, 06 Sep 2007)
	  | 3 lines According to both RFC 3920 - section 9.1.2 - and
	  Google's XMPP server complaint, if set, the 'from' attribute must
	  be set to the user's full JID. ........

2007-09-05 21:59 +0000 [r81632]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Not having this epoll specific code in
	  wait_for_answer was causing app_queue to infinitely loop. This
	  makes it so it doesn't. Thanks to file for pointing out where the
	  problem was and showing a similar function in app_dial as an
	  example of how to fix it.

2007-09-05 21:45 +0000 [r81631]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 81569 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81569 | tilghman | 2007-09-05 12:18:24 -0500 (Wed, 05
	  Sep 2007) | 2 lines Solaris x86 compatibility fix ........

2007-09-05 20:58 +0000 [r81601]  Dwayne M. Hubbard <dhubbard@digium.com>

	* apps/app_zapateller.c: added ZAPATELLERSTATUS to app_zapateller

2007-09-05 20:58 +0000 [r81600]  Russell Bryant <russell@digium.com>

	* include/asterisk/file.h, /, main/say.c, res/res_features.c,
	  main/file.c, include/asterisk/channel.h: Merged revisions 81599
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81599 | russell | 2007-09-05 15:53:41 -0500 (Wed, 05 Sep 2007) |
	  11 lines Fix an issue that can occur when you do an attended
	  transfer to parking. If you complete the transfer before the
	  announcement of the parking spot finishes, then the channel being
	  parked will hear the remainder of the announcement. These changes
	  make it so that will not happen anymore. Basically, res_features
	  sets a flag on the channel is playing the announcement to so that
	  the file streaming core knows that it needs to watch out for a
	  channel masquerade, and if it occurs, to abort the announcement.
	  (closes BE-182) ........

2007-09-05 16:48 +0000 [r81568]  Tilghman Lesher <tlesher@digium.com>

	* utils: Add two more generated files (requested by mvanbaak via
	  irc)

2007-09-05 16:31 +0000 [r81560]  Jason Parker <jparker@digium.com>

	* include/asterisk/devicestate.h, res/res_config_odbc.c,
	  channels/chan_sip.c, include/asterisk/audiohook.h, main/sha1.c,
	  res/res_features.c, include/asterisk/astobj2.h, res/res_crypto.c,
	  include/asterisk/strings.h, main/audiohook.c, res/res_jabber.c,
	  res/res_config_sqlite.c, include/asterisk/sha1.h,
	  include/asterisk/stringfields.h, include/asterisk/features.h:
	  Doxygen cleanups/fixes. Closes issue #10654, patch by snuffy

2007-09-05 15:32 +0000 [r81526-81535]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Weird. When I merged my changes from 1.4, they
	  merged into the wrong function. This should fix the build for
	  trunk.

	* /, apps/app_queue.c: Merged revisions 81525 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81525 | mmichelson | 2007-09-05 10:19:47 -0500 (Wed, 05 Sep
	  2007) | 4 lines Fixing the build... ........

2007-09-05 15:16 +0000 [r81524]  Jason Parker <jparker@digium.com>

	* channels/chan_phone.c, /: Merged revisions 81523 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10651) ........ r81523 | qwell | 2007-09-05 10:14:30 -0500
	  (Wed, 05 Sep 2007) | 5 lines Do not try to unregister a NULL
	  channel tech. Also changed load_module function to use defines
	  rather than numbers for return values. Issue 10651, patch by
	  rbraun_proformatique, with additions by me. ........

2007-09-05 15:04 +0000 [r81522]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81520 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81520 | mmichelson | 2007-09-05 10:03:22 -0500 (Wed, 05 Sep
	  2007) | 6 lines Reverting behavior of QUEUE_MEMBER_COUNT to only
	  count members who are logged in and available. (related to issue
	  #10652, reported by wuwu) ........

2007-09-05 14:47 +0000 [r81519]  Steve Murphy <murf@digium.com>

	* include/asterisk/config.h, main/config.c: this set of changes
	  fixes issue # 10643 by keeping track of the last object defined
	  in a file, and attaching any accumulated comments to that object
	  (category header or variable declaration). The file_save routine
	  also had to be upgraded to output these trailing comments.
	  Config.h was modified to include the trailing comment list on
	  categories and variables.

2007-09-05 13:13 +0000 [r81459-81493]  Joshua Colp <jcolp@digium.com>

	* main/editline/sys.h: Finish up commit from revision 81452 by
	  removing last remnants of strlcat/strlcpy checks.

2007-09-04 20:59 +0000 [r81454-81456]  Jason Parker <jparker@digium.com>

	* /, apps/app_followme.c: Merged revisions 81455 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10634) ........ r81455 | qwell | 2007-09-04 15:54:51 -0500
	  (Tue, 04 Sep 2007) | 4 lines Rather than attempt to play a file,
	  we can just check whether it exists. Issue 10634, patch by me,
	  testing by pabelanger, sanity checked by bweschke ........

	* /, configs/followme.conf.sample: Merged revisions 81453 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10644) ........ r81453 | qwell | 2007-09-04 14:56:06 -0500
	  (Tue, 04 Sep 2007) | 4 lines Change default followme config file
	  to point to the correct files. Issue 10644, patch by pabelanger
	  ........

2007-09-04 19:51 +0000 [r81445-81452]  Russell Bryant <russell@digium.com>

	* main/editline/configure, main/editline/configure.in: Don't check
	  for and include strlcpy and strlcat in editline. We also include
	  them directly in Asterisk. For platforms that need them (like my
	  mac), you will get a linker error due to the functions being
	  included twice.

	* /, include/asterisk/astobj2.h, channels/chan_iax2.c,
	  main/astobj2.c: Merged revisions 81448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81448 | russell | 2007-09-04 13:37:44 -0500 (Tue, 04 Sep 2007) |
	  4 lines Remove the typedefs on ao2_container and ao2_iterator.
	  This is simply because we don't typedef objects anywhere else in
	  Asterisk, so we might as well make this follow the same
	  convention. ........

	* include/asterisk/logger.h: logger.h depends on options.h, so go
	  ahead and include it

2007-09-04 16:41 +0000 [r81443]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 81442 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81442 | kpfleming | 2007-09-04 11:40:39 -0500 (Tue, 04 Sep 2007)
	  | 2 lines there is no point in sending 401 Unauthorized to a UAS
	  that sent us a properly-formatted Authentication header with the
	  expected username and nonce but an incorrect response (which
	  indicates the shared secret does not match)... instead, let's
	  send 403 Forbidden so that the UAS doesn't retry with the same
	  authentication credentials repeatedly ........

2007-09-04 14:28 +0000 [r81436-81441]  Joshua Colp <jcolp@digium.com>

	* configs/extensions.ael.sample: (closes issue #10633) Reported by:
	  pabelanger Patches: extensions.ael.sample.patch uploaded by
	  pabelanger (license 224) Update extensions.ael.sample with
	  voicemail and | changes.

	* /, channels/chan_iax2.c: Merged revisions 81439 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81439 | file | 2007-09-04 11:23:18 -0300 (Tue, 04 Sep 2007) | 6
	  lines (closes issue #10632) Reported by: jamesgolovich Patches:
	  asterisk-iaxfirmwareleak.diff.txt uploaded by jamesgolovich
	  (license 176) Fix memory leak when unloading chan_iax2. The
	  firmware files were not being freed. ........

	* main/channel.c, /: Merged revisions 81437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81437 | file | 2007-09-04 10:46:23 -0300 (Tue, 04 Sep 2007) | 4
	  lines (closes issue #10476) Reported by: mdu113 Only look for the
	  end of a digit when waiting for a digit. This in turn disables
	  emulation in the core. ........

	* /, main/dns.c: Merged revisions 81435 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81435 | file | 2007-09-04 10:10:56 -0300 (Tue, 04 Sep 2007) | 7
	  lines (closes issue #10610) Reported by: john Patches:
	  dns.c.patch uploaded by john (license 218) Tested by: mvanbaak
	  Don't return a match if no SRV record actually exists. ........

2007-09-03 18:59 +0000 [r81434]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 81433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81433 | russell | 2007-09-03 13:57:53 -0500 (Mon, 03 Sep 2007) |
	  5 lines Remove a couple of calls to ast_string_field_free_pools()
	  on peers in error handling blocks in the code for building peers.
	  The peer object destructor does this and doing it twice will
	  cause a crash. (closes issue #10625, reported by and patched by
	  pnlarsson) ........

2007-09-03 18:01 +0000 [r81430-81432]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c: Once we get past the file checks, we're loading,
	  so clear the FILEUNCHANGED flag (fixes #include) (closes issue
	  #10629)

	* /, funcs/func_logic.c: Merged revisions 81415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81415 | tilghman | 2007-08-31 14:16:52 -0500 (Fri, 31 Aug 2007)
	  | 2 lines The IF() function was not allowing true values that had
	  embedded colons (closes issue #10613) ........

	* main/config.c: We shouldn't use a filename blindly without
	  checking to make sure it's unused first

2007-09-01 06:03 +0000 [r81427]  Mark Michelson <mmichelson@digium.com>

	* /, include/asterisk/astobj2.h, main/astobj2.c: Merged revisions
	  81426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81426 | mmichelson | 2007-09-01 01:02:06 -0500 (Sat, 01 Sep
	  2007) | 4 lines Making match_by_addr into ao2_match_by_addr and
	  making it available everywhere since it could be a handy callback
	  to have ........

2007-08-31 21:29 +0000 [r81419]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/astobj2.h: Merged revisions 81418 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81418 | russell | 2007-08-31 16:27:49 -0500 (Fri, 31 Aug 2007) |
	  2 lines Remove references to a debugging parameter that does not
	  exist ........

2007-08-31 19:50 +0000 [r81417]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81416 | mmichelson | 2007-08-31 14:48:55 -0500 (Fri, 31 Aug
	  2007) | 6 lines Fixed broken behavior of a reload on realtime
	  queues. Prior to this patch, if a reload was issued and a
	  realtime queue had callers waiting in it, then the queue would be
	  removed from the queue list, but it would not actually be freed
	  (in fact, a debug message warning about a memory leak would come
	  up). With this patch, reloads do not touch realtime queues at
	  all. ........

2007-08-31 18:46 +0000 [r81413]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c, /: Merged revisions 81412 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10621) ........ r81412 | qwell | 2007-08-31 13:44:44 -0500
	  (Fri, 31 Aug 2007) | 4 lines Re-order dial options to be in line
	  with the existing alpha order. Issue 10621, initial patch by
	  junky ........

2007-08-31 17:43 +0000 [r81411]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 81410 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81410 | phsultan | 2007-08-31 19:38:26 +0200 (Fri, 31
	  Aug 2007) | 3 lines Make the 'gtalk show channels' CLI command
	  available. Closes issue 10548, reported by keepitcool. ........

2007-08-31 15:58 +0000 [r81408]  Kevin P. Fleming <kpfleming@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 81405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81405 | kpfleming | 2007-08-31 10:51:45 -0500 (Fri, 31 Aug 2007)
	  | 2 lines add missing "transcoder show" (and deprecated "show
	  transcoder") CLI commands that were in 1.2 but never added to 1.4
	  ........

2007-08-31 15:54 +0000 [r81402-81407]  Joshua Colp <jcolp@digium.com>

	* /, res/res_speech.c: Merged revisions 81406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81406 | file | 2007-08-31 12:53:16 -0300 (Fri, 31 Aug 2007) | 2
	  lines Make it the engine's responsible to check for the presence
	  of results. ........

	* /, res/res_features.c: Merged revisions 81403 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81403 | file | 2007-08-31 11:38:59 -0300 (Fri, 31 Aug 2007) | 4
	  lines (closes issue #10618) Reported by: dimas Don't pass through
	  the stopped sounds frame.... just drop it. ........

	* /, res/res_features.c: Merged revisions 81401 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81401 | file | 2007-08-30 20:53:41 -0300 (Thu, 30 Aug 2007) | 4
	  lines (closes issue #10009) Reported by: dimas Don't output a
	  bridge failed warning message if it failed because one of the
	  channels was part of the masquerade process. That is perfectly
	  normal. ........

2007-08-30 23:52 +0000 [r81400]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_zap.c: Add new queryable fields from zaptel to 'zap
	  show status'

2007-08-30 22:08 +0000 [r81398]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81397 | mmichelson | 2007-08-30 17:05:56 -0500 (Thu, 30 Aug
	  2007) | 7 lines Removing an extraneous (and possibly misleading)
	  log message. Firstly, if the announce file isn't found, the
	  streaming functions will report it. Secondly, not all non-zero
	  returns from play_file mean that the announce file wasn't found.
	  Positive return values simply mean that a digit was pressed (most
	  likely to skip through the announcement). (closes issue #10612,
	  reported and patched by dimas) ........

2007-08-30 21:25 +0000 [r81394-81396]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 81395 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81395 | file | 2007-08-30 18:23:50 -0300 (Thu, 30 Aug 2007) | 6
	  lines (closes issue #10514) Reported by: casper Patches:
	  chan_sip.c.80129.diff uploaded by casper (license 55) Remove
	  needless check for AUTH_UNKNOWN_DOMAIN. It was impossible for it
	  to ever be that value. ........

	* channels/chan_sip.c: (closes issue #10565) Reported by: tootai
	  Make sure the external IP address has the standard SIP port set
	  for when the user does not specify the port in the externip
	  setting.

2007-08-30 21:16 +0000 [r81393]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 81392 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81392 | murf | 2007-08-30 15:11:48 -0600 (Thu, 30 Aug 2007) | 1
	  line via issue 10599, where 'CDR already initialized' messages
	  are being generated. Since all channels will have an init'd CDR
	  attached at creation time, this message is now particularly
	  useless. Removed. ........

2007-08-30 20:55 +0000 [r81391]  Joshua Colp <jcolp@digium.com>

	* apps/app_minivm.c: (closes issue #10336) Reported by: junky
	  Patches: minivm_output2.diff uploaded by junky (license 177)
	  Change console output of minivm show stats to be more simple for
	  external parsing.

2007-08-30 20:31 +0000 [r81389-81390]  Tilghman Lesher <tlesher@digium.com>

	* main/sched.c: A schedule id of 0 is not possible and is used to
	  flag that we want to add a new item

	* apps/app_readexten.c: Change wording as requested by Kevin

2007-08-30 18:52 +0000 [r81388]  Mark Michelson <mmichelson@digium.com>

	* configs/queues.conf.sample: Added note to sample queues.conf file
	  to line up with most recent change regarding setinterfacevar.
	  MEMBERREALTIME indicates whether a member is realtime.

2007-08-30 17:51 +0000 [r81387]  Tilghman Lesher <tlesher@digium.com>

	* main/logger.c: Always force reread of the config when we're
	  rotating the log file (closes issue #10598)

2007-08-30 15:40 +0000 [r81384]  Russell Bryant <russell@digium.com>

	* /, channels/h323/ast_h323.cxx: Merged revisions 81383 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81383 | russell | 2007-08-30 10:38:29 -0500 (Thu, 30 Aug 2007) |
	  3 lines Add missing checks for the PTRACING define. (closes issue
	  #10559, paravoid) ........

2007-08-30 15:36 +0000 [r81382]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81381 | mmichelson | 2007-08-30 10:35:51 -0500 (Thu, 30 Aug
	  2007) | 3 lines Changed some manager event messages to reflect
	  whether a queue member is a realtime member or not ........

2007-08-30 15:34 +0000 [r81380]  Russell Bryant <russell@digium.com>

	* configs/modem.conf.sample (removed), /, configs/enum.conf.sample,
	  configs/extensions.ael.sample: Merged revisions 81379 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81379 | russell | 2007-08-30 10:33:48 -0500 (Thu, 30 Aug 2007) |
	  3 lines Fix a typo, update a reload command, and remove an unused
	  configuration file. (closes issue #10606, casper) ........

2007-08-30 15:24 +0000 [r81378]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_readexten.c (added): Add ReadExten app and VALID_EXTEN
	  function (closes issue #10082)

2007-08-30 14:54 +0000 [r81376]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 81373 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81373 | crichter | 2007-08-30 16:43:33 +0200 (Do, 30
	  Aug 2007) | 1 line Fixed some warnings. ........

2007-08-30 14:42 +0000 [r81370-81372]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, CHANGES: (closes issue #10603) Reported by: jmls
	  Patches: pbx.diff uploaded by jmls (license 141) Add REASON
	  dialplan variable for when an originated call fails and the
	  failed extension is executed.

	* /, res/res_features.c: Merged revisions 81369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81369 | file | 2007-08-30 11:23:40 -0300 (Thu, 30 Aug 2007) | 4
	  lines (issue #10599) Reported by: dimas Handle the -1 control
	  subclass during feature dialing (it indicates to stop sounds).
	  ........

2007-08-30 08:50 +0000 [r81368]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 81367 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81367 | crichter | 2007-08-30 10:31:59 +0200 (Do, 30 Aug 2007) |
	  11 lines Fixed a severe issue where a misdn_read would lock the
	  channel, but read would not return because it blocks. later
	  chan_misdn would try to queue a frame like a AST_CONTROL_ANSWER
	  which could result in a deadlock situation. misdn_read will now
	  not block forever anymore, and we don't queue the ANSWER frame at
	  all when we already was called with misdn_answer -> answer would
	  be called twice. Also we don't explicitly send a RELEASE_COMPLETE
	  on receiption of a RELEASE anymore, because mISDN does that for
	  us, this resulted in a problem on some switches, which would
	  block our port after some calls for a short while. ........

2007-08-29 22:05 +0000 [r81365]  Mark Michelson <mmichelson@digium.com>

	* apps/app_queue.c: Added the MEMBERREALTIME variable when using
	  setinterfacevar in queues.conf

2007-08-29 21:55 +0000 [r81364]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/event.h: Make the event header file work under
	  C++.

2007-08-29 21:30 +0000 [r81363]  Steve Murphy <murf@digium.com>

	* main/config.c: init newer so compile won't complain.

2007-08-29 21:25 +0000 [r81362]  Russell Bryant <russell@digium.com>

	* main/config.c: make trunk build again. murf will have to review
	  this to see if it was the right fix, as it is related to his last
	  change.

2007-08-29 20:55 +0000 [r81361]  Steve Murphy <murf@digium.com>

	* res/res_config_pgsql.c, channels/chan_sip.c,
	  include/asterisk/config.h, channels/chan_iax2.c,
	  channels/iax2-parser.c, res/res_config_sqlite.c, main/config.c,
	  main/channel.c, res/res_config_odbc.c, pbx/pbx_spool.c,
	  main/manager.c, channels/chan_skinny.c, apps/app_minivm.c,
	  main/http.c, utils/extconf.c, apps/app_directory.c,
	  apps/app_parkandannounce.c, apps/app_voicemail.c: This code was
	  in team/murf/bug8684-trunk; it should fix bug 8684 in trunk. I
	  didn't add it to 1.4 yet, because it's not entirely clear to me
	  if this is a bug fix or an enhancement. A lot of files were
	  affected by small changes like ast_variable_new getting an added
	  arg, for the file name the var was defined in; ast_category_new
	  gets added args of filename and lineno; ast_category and
	  ast_variable structures now record file and lineno for each
	  entry; a list of all #include and #execs in a config file (or any
	  of its inclusions are now kept in the ast_config struct; at save
	  time, each entry is put back into its proper file of origin, in
	  order. #include and #exec directives are folded in properly.
	  Headers indicating that the file was generated, are generated
	  also for each included file. Some changes to main/manager.c to
	  take care of file renaming, via the UpdateConfig command.
	  Multiple inclusions of the same file are handled by exploding
	  these into multiple include files, uniquely named. There's
	  probably more, but I can't remember it right now.

2007-08-29 19:41 +0000 [r81353-81356]  Russell Bryant <russell@digium.com>

	* main/event.c: Try to clarify the rules on changing ast_event and
	  ast_event_ie

	* main/event.c: Fix parenthesis from my last commit

	* main/event.c: Change pointer aritmetic on void * to char *

	* main/event.c: there is not actually code that sends these over
	  the network in trunk yet

2007-08-29 16:39 +0000 [r81350]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81349 | mmichelson | 2007-08-29 11:35:29 -0500 (Wed, 29 Aug
	  2007) | 12 lines This patch, in essence, will correctly pause a
	  realtime queue member and reflect those changes in the realtime
	  engine. (issue #10424, reported by irroot, patch by me) This
	  patch creates a new function called update_realtime_member_field,
	  which is a generic function which will allow any one field of a
	  realtime queue member to be updated. This patch only uses this
	  function to update the paused status of a queue member, but it
	  lays the foundation for persisting the state of a realtime member
	  the same way that static members' state is maintained when using
	  the persistentmembers setting ........

2007-08-29 16:25 +0000 [r81348]  Joshua Colp <jcolp@digium.com>

	* main/event.c: Return ast_event_get_ie_raw to using an iterator
	  and fix logic in ast_event_iterator_next.

2007-08-29 16:09 +0000 [r81347]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81346 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81346 | mmichelson | 2007-08-29 11:08:09 -0500 (Wed, 29 Aug
	  2007) | 3 lines Changed some tabs to spaces ........

2007-08-29 16:07 +0000 [r81344-81345]  Joshua Colp <jcolp@digium.com>

	* main/event.c: This concludes bringing trunk back to a working
	  state.

	* include/asterisk/event.h, main/event.c: To keep others happy...
	  revert part of my additions so trunk works.

2007-08-29 15:59 +0000 [r81343]  Russell Bryant <russell@digium.com>

	* /, main/Makefile: Merged revisions 81342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81342 | russell | 2007-08-29 10:57:29 -0500 (Wed, 29 Aug 2007) |
	  3 lines If chan_h323 is not being built, don't use g++ to do the
	  final link of Asterisk. (in response to a question on the
	  asterisk-dev list) ........

2007-08-29 15:57 +0000 [r81341]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81340 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81340 | mmichelson | 2007-08-29 10:52:42 -0500 (Wed, 29 Aug
	  2007) | 8 lines This fix creates a more accurate way of detecting
	  whether realtime members were deleted. (closes issue 10541,
	  reported by Alric, patched by me) The REALLY nice things about
	  this patch is that queue members now have a "realtime" field
	  which will be true if the member is a realtime member. This means
	  we can check this value prior to certain processing if it should
	  ONLY be done for realtime members. ........

2007-08-29 15:21 +0000 [r81335]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c: Changed one too many variable settings in
	  issue #9315 (closes issue #10592)

2007-08-29 15:19 +0000 [r81334]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/event.h, include/asterisk/event_defs.h,
	  main/event.c: Add API calls for iterating through an event. This
	  should allow events to have multiple information elements (while
	  there was nothing preventing it before you could not actually
	  access any except the first one).

2007-08-29 14:19 +0000 [r81333]  Mark Michelson <mmichelson@digium.com>

	* apps/app_meetme.c: Changing a NOTICE to a DEBUG. (closes issue
	  #10591, reported and patched by junky, with small modification by
	  me)

2007-08-29 14:16 +0000 [r81326-81332]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 81331 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81331 | file | 2007-08-29 11:13:55 -0300 (Wed, 29 Aug 2007) | 4
	  lines (closes issue #9690) Reported by: mattv Make rtp timeouts
	  work even if two RTP streams are directly bridged in the RTP
	  stack. ........

	* include/asterisk/utils.h: Add inline function for signed linear
	  subtraction.

2007-08-28 21:39 +0000 [r81292]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 81291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81291 | russell | 2007-08-28 16:38:26 -0500 (Tue, 28 Aug 2007) |
	  3 lines Change the message about receiving a mini-frame before
	  the first full voice frame to a DEBUG message. ........

2007-08-28 21:35 +0000 [r81290]  Joshua Colp <jcolp@digium.com>

	* main/logger.c: Add some read/write locking magic to make logger
	  reload operate again.

2007-08-28 20:03 +0000 [r81277]  Tilghman Lesher <tlesher@digium.com>

	* main/logger.c, UPGRADE.txt, configs/logger.conf.sample: Support
	  better rotation of log files to be more like system logging
	  (closes issue #10398)

2007-08-28 19:12 +0000 [r81227-81264]  Russell Bryant <russell@digium.com>

	* include/asterisk/audiohook.h: Change the audiohook lock and
	  unlock wrappers to macros instead of inline functions. As inline
	  functions, the lock debug information will show that these are
	  always locked in audiohooks.h instead of the file where the lock
	  was actually acquired.

	* funcs/func_enum.c, pbx/pbx_dundi.c: Add proper channel locking
	  around the uses of datastore_add and _find. There are still more
	  places in the tree that I have not yet changed if someone wants
	  to go through and find the places they are used without the
	  channel locked.

	* main/channel.c, funcs/func_volume.c, include/asterisk/channel.h:
	  * Constify the uid field of channel datastores * Convert some
	  spaces to tabs in func_volume * Add a note in channel.h making it
	  clear that none of the datastore API calls lock the channel they
	  are given, so the channel should be locked before calling the
	  functions that take a channel argument.

	* include/asterisk/app.h, main/app.c, CHANGES, main/asterisk.c,
	  doc/tex/asterisk-conf.tex: (closes issue #7852) Reported by:
	  nic_bellamy Patches:
	  2006-10-03_svn_44249_voicemail_lockmode_v3.patch uploaded by
	  nic_bellamy (license 213) Add support for configurable file
	  locking methods. The default is "lockfile", which is the old
	  behavior. There is an additional option, "flock", which is
	  intended for use in situations where the lockfile method will not
	  work, such as with SMB/CIFS mounts.

	* /, configs/indications.conf.sample: Merged revisions 81226 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81226 | russell | 2007-08-28 10:41:15 -0500 (Tue, 28 Aug 2007) |
	  2 lines Add Russian tones. (closes issue #7953, hanabana)
	  ........

2007-08-28 14:37 +0000 [r81210]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c: (closes issue #10579) Reported by: ornati
	  Make sure the called channel during the attended transfer process
	  becomes associated with the calling channel so that the
	  ast_waitfor_* call works properly under epoll.

2007-08-28 14:12 +0000 [r81121-81190]  Mark Michelson <mmichelson@digium.com>

	* /, contrib/scripts/vmail.cgi: Merged revisions 81189 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81189 | mmichelson | 2007-08-28 09:12:14 -0500 (Tue, 28
	  Aug 2007) | 5 lines Fixes a forwarding problem when using
	  res_config_mysql (closes issue #10573, reported by chrisvaughan,
	  patch suggested by chrisvaughan as well) ........

	* /, apps/app_queue.c: Merged revisions 81158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81158 | mmichelson | 2007-08-27 17:40:19 -0500 (Mon, 27 Aug
	  2007) | 5 lines Resolve a potential deadlock. In this case, a
	  single queue is locked, then the queue list. In changethread(),
	  the queue list is locked, and then each individual queue is
	  locked. Under the right circumstances, this could deadlock. As
	  such, I have unlocked the individual queue before locking the
	  queue list, and then locked the queue back after the queue list
	  is unlocked. ........

	* /, channels/chan_agent.c: Merged revisions 81120 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81120 | mmichelson | 2007-08-27 16:08:48 -0500 (Mon, 27
	  Aug 2007) | 7 lines DTMF begin frames should be ignored so that
	  when an agent acks a call with the '#' key, he doesn't cause a
	  queue's announce file to be interrupted. Also went ahead and did
	  the same for the '*' key and for ending a call. (closes issue
	  #10528, reported by deskhack, patched by me) ........

2007-08-27 20:55 +0000 [r81118]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_directed_pickup.c: Enhance Pickup to do native
	  pickupgroup pickup when no arguments are specified (closes issue
	  #10404)

2007-08-27 17:44 +0000 [r81043-81098]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_dundi.c: This should have been trunk only, I guess. oh
	  well ... it's harmless. Merged revisions 81065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81065 | russell | 2007-08-27 11:38:33 -0500 (Mon, 27 Aug 2007) |
	  1 line explicity define a variable as a boolean ........

	* /, pbx/pbx_dundi.c: Merged revisions 81074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81074 | russell | 2007-08-27 12:27:48 -0500 (Mon, 27 Aug 2007) |
	  3 lines Add a \todo to note that this module leaks most of the
	  memory it allocates on unload and should be fixed (when I'm not
	  in the middle of something else ...). ........

	* /, res/res_musiconhold.c: Merged revisions 81042 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r81042 | russell | 2007-08-27 11:16:25 -0500 (Mon, 27
	  Aug 2007) | 11 lines (closes issue #10419) Reported by:
	  mustardman Patches: asterisk-mohposition.diff.txt uploaded by
	  jamesgolovich (license 176) This patch fixes a few problems with
	  music on hold. * Fix issues with starting at the beginning of a
	  file when it shouldn't. * Fix the inuse counter to be decremented
	  even if the class had not been set to be deleted when not in use
	  anymore * Don't arbitrarily limit the number of MOH files to 255
	  ........

2007-08-27 15:03 +0000 [r81013]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 81012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81012 | file | 2007-08-27 12:01:59 -0300 (Mon, 27 Aug 2007) | 6
	  lines (closes issue #10561) Reported by: jesselang Patches:
	  chan_sip-ChannelReload-20080825.patch uploaded by jesselang
	  (license 202) Remove an extra \r\n to make the ChannelReload
	  event conform with every other event. ........

2007-08-27 14:56 +0000 [r81011]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 81010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r81010 | mmichelson | 2007-08-27 09:55:44 -0500 (Mon, 27 Aug
	  2007) | 3 lines Found a case where the queue's membercount is
	  off. It does not take into account dynamic members on a reload.
	  ........

2007-08-27 13:35 +0000 [r80962-80991]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Remove places that say if no language is
	  specified it will default to english... since on some setups this
	  is untrue.

	* /, main/rtp.c: Merged revisions 80974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80974 | file | 2007-08-27 10:20:31 -0300 (Mon, 27 Aug 2007) | 4
	  lines (closes issue #10562) Reported by: idkpmiller Correct
	  jitter value output in the CLI to be as expected. ........

	* configs/sip.conf.sample: (closes issue #10569) Reported by: IgorG
	  Patches: sip_conf-80933-1.patch uploaded by IgorG (license 20)
	  Fix up sip.conf sample configuration.

2007-08-26 18:12 +0000 [r80933]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 80932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80932 | russell | 2007-08-26 13:11:26 -0500 (Sun, 26 Aug 2007) |
	  3 lines Remove an extra signal_condition() for the scheduler
	  thread. (closes issue #10564, patch from casper) ........

2007-08-25 17:55 +0000 [r80821-80898]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 80895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80895 | russell | 2007-08-25 12:37:39 -0500 (Sat, 25 Aug 2007) |
	  7 lines Fix some issues with the handling of the scheduler in
	  chan_iax2. Most of the places that scheduled items to be executed
	  by the scheduler thread did not signal the scheduler thread to
	  wake up so that it could recalculate the time until the next
	  action. These changes will make the scheduler thread more
	  responsive and ensure that actions get executed as close to when
	  intended as possible instead of it being possible for very long
	  delays. ........

	* pbx/pbx_dundi.c: localize a variable and remove a duplicate error
	  message

	* apps/app_queue.c: use ast_strlen_zero

	* /, channels/chan_iax2.c: Merged revisions 80849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80849 | russell | 2007-08-24 16:22:50 -0500 (Fri, 24 Aug 2007) |
	  5 lines If dnsmgr is in use, and no DNS servers are available
	  when Asterisk first starts, then don't give up on poking peers.
	  Allow the poke to get rescheduled so that it will work once the
	  dnsmgr is able to resolve the host. (closes issue #10521, patch
	  by jamesgolovich) ........

	* /, main/dsp.c: Merged revisions 80820 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80820 | russell | 2007-08-24 15:24:05 -0500 (Fri, 24 Aug 2007) |
	  7 lines Improve the debouncing logic in the DTMF detector to fix
	  some reliability issues. Previously, this code used a shift
	  register of hits and non-hits. However, if the start of the digit
	  isn't clean, it is possible for the leading edge detector to miss
	  the digit. These changes replace the flawed shift register logic
	  and also does the debouncing on the trailing edge as well.
	  (closes issue #10535, many thanks to softins for the patch)
	  ........

2007-08-24 20:21 +0000 [r80819]  BJ Weschke <bweschke@btwtech.com>

	* apps/app_queue.c: Merged revisions 80818 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80818 | bweschke | 2007-08-24 15:52:06 -0400 (Fri, 24 Aug 2007)
	  | 3 lines A minor correction to the available logic of autofill.
	  If a queue member is paused, they're not really "available" so
	  don't count them as such. Somewhat related to issue #10155
	  ........

2007-08-24 19:50 +0000 [r80817]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c: Fix documentation for Set (closes issue #10549)

2007-08-24 19:03 +0000 [r80790]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 80789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80789 | murf | 2007-08-24 12:52:15 -0600 (Fri, 24 Aug 2007) | 1
	  line From a complaint by jmls, I realize that the message in
	  cdr_disposition is unnecessary. To get failure disposition, just
	  return -1; no use having more than one case do that. ........

2007-08-24 18:05 +0000 [r80778]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add VMWI chan_zap support #9909

2007-08-24 15:53 +0000 [r80751]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 80750 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80750 | mmichelson | 2007-08-24 10:51:03 -0500 (Fri, 24 Aug
	  2007) | 3 lines Fix a possible crash in IMAP voicemail. ........

2007-08-24 15:42 +0000 [r80748]  Steve Murphy <murf@digium.com>

	* utils/conf2ael.c: fix up the MODULEINFO in conf2ael.c as well

2007-08-24 15:29 +0000 [r80725]  Russell Bryant <russell@digium.com>

	* /, utils/ael_main.c: Merged revisions 80722 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80722 | russell | 2007-08-24 10:28:05 -0500 (Fri, 24 Aug 2007) |
	  3 lines Tweak the formatting of this MODULEINFO block. I think
	  this would have caused a "*" to get in the menuselect-tree file.
	  ........

2007-08-24 14:55 +0000 [r80690-80718]  Steve Murphy <murf@digium.com>

	* /, utils/ael_main.c, utils/conf2ael.c: Merged revisions 80717 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80717 | murf | 2007-08-24 08:48:49 -0600 (Fri, 24 Aug 2007) | 1
	  line This change addresses JerJer's complaint that aelparse
	  builds and installs even if pbx_ael is unchecked in the
	  menuselect stuff. ........

2007-08-24 11:49 +0000 [r80662]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, channels/chan_gtalk.c: Merged revisions 80661 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r80661 | phsultan | 2007-08-24 13:42:46 +0200 (Fri, 24
	  Aug 2007) | 9 lines Closes issue #10509 Googletalk calls are
	  answered too early, which results in CDRs wrongly stating that a
	  call was ANSWERED when the calling party cancelled a call before
	  before being established. We must not answer the call upon
	  reception of a 'transport-accept' iq packet, but this packet
	  still needs to be acknowledged, otherwise the remote peer would
	  close the call (like in #8970). ........

2007-08-23 23:37 +0000 [r80649]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-ntest10, res/ael/ael.tab.c,
	  res/ael/ael.y, res/ael/ael.tab.h, pbx/ael/ael-test/ref.ael-test6,
	  pbx/ael/ael-test/ref.ael-test7: an unreported crash I debugged,
	  looked like it was backing up way too far after hitting the
	  syntax error. An inspection of the code revealed that error
	  tokens in lists were not rearranged when the rules were
	  rearranged as part of a code neatening-up process. By moving the
	  error tokens to where they should be, I also reduced the number
	  of shift/reduce conflicts to 3 instead of 8. This introduces
	  subtle differences in error messages, so the regressions had to
	  be updated.

2007-08-23 21:34 +0000 [r80510-80616]  Russell Bryant <russell@digium.com>

	* apps/app_while.c: Use the comma separator in app_while. reported
	  by blitzrage on irc, patched by me

	* /, res/res_features.c, include/asterisk/features.h: Merged
	  revisions 80573 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80573 | russell | 2007-08-23 15:16:41 -0500 (Thu, 23 Aug 2007) |
	  5 lines When executing a dynamic feature, don't look it up a
	  second time by digit pattern after we already looked it up by
	  name. This causes broken behavior if there is more than one
	  feature defined with the same digit pattern. (closes issue
	  #10539, reported by bungalow, patch by me) ........

	* /, funcs/func_timeout.c: Merged revisions 80547 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80547 | russell | 2007-08-23 14:29:44 -0500 (Thu, 23 Aug 2007) |
	  3 lines Revert very broken fix for issue #10540 ... none of these
	  values take ms so I don't know what I was thinking ........

	* /, funcs/func_timeout.c: Merged revisions 80539 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80539 | russell | 2007-08-23 14:21:53 -0500 (Thu, 23 Aug 2007) |
	  4 lines Fix func_timeout to take values in floating point so 1.5
	  actually means 1.5 seconds instead of being rounded. (closes
	  issue #10540, reported by spendergrass, patch by me) ........

	* doc/asterisk-mib.txt, res/snmp/agent.c: Fix a typo in the
	  Asterisk MIB and fix astNumChanBridged so it acts as a counter
	  again (closes issue #10118, patch by jeffg)

2007-08-23 17:18 +0000 [r80508]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 80501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80501 | kpfleming | 2007-08-23 12:08:25 -0500 (Thu, 23 Aug 2007)
	  | 2 lines report the actual channel number that was unregistered,
	  instead of assuming that the interface list consists of channels
	  1 through <x> with no gaps in the sequence ........

2007-08-23 17:04 +0000 [r80470-80500]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 80499 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80499 | russell | 2007-08-23 12:02:50 -0500 (Thu, 23 Aug 2007) |
	  3 lines Fix some code where it was possible for a reference to a
	  peer to not get released when it should. Thank you to Marta
	  Carbone for pointing this out! ........

	* /, res/res_agi.c: Merged revisions 80469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80469 | russell | 2007-08-23 10:49:28 -0500 (Thu, 23 Aug 2007) |
	  2 lines Revert res_agi fix that didn't quite work until we get it
	  right ... ........

2007-08-23 15:48 +0000 [r80453-80468]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: If no default language has been specified
	  print out that it will default to english when using sip show
	  peer or sip show user.

	* main/minimime/mm.h: Return trunk to a working state by including
	  compat.h in minimime.

2007-08-22 23:26 +0000 [r80428-80429]  Jason Parker <jparker@digium.com>

	* main/minimime/mm_util.c, main/minimime/mm_codecs.c,
	  main/minimime/mm_mem.h, main/minimime/mm_base64.c,
	  main/minimime/mm.h: Convert minimime to use the proper uint*_t
	  types, rather than u_int*_t

	* apps/app_minivm.c: Cast calls to getpid. This was done in 1.4
	  already, this one was just new

2007-08-22 22:54 +0000 [r80361-80427]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/astobj2.h: Merged revisions 80426 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80426 | russell | 2007-08-22 17:54:03 -0500 (Wed, 22 Aug 2007) |
	  6 lines Add some more documentation on iterating ao2 containers.
	  The documentation implies that is possible to miss an object or
	  see an object twice while iterating. After looking through the
	  code and talking with mmichelson, I have documented the exact
	  conditions under which this can happen (which are rare and
	  harmless in most cases). ........

	* /, main/astobj2.c: Merged revisions 80424 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80424 | russell | 2007-08-22 17:40:27 -0500 (Wed, 22 Aug 2007) |
	  10 lines When converting this code to use the list macros, I
	  changed it so objects are added to the head of a bucket instead
	  of the tail. However, while looking over code with mmichelson, we
	  noticed that the algorithm used in ao2_iterator_next requires
	  that items are added to the tail. This wouldn't have caused any
	  huge problem, but it wasn't correct. It meant that if an object
	  was added to a container while you were iterating it, and it was
	  added to the same bucket that the current element is in, then the
	  new object would be returned by ao2_iterator_next, and any other
	  objects in the bucket would be bypassed in the traversal.
	  ........

	* channels/chan_iax2.c: allow peers and users to go into a hash
	  table

	* /, channels/chan_sip.c: Merged revisions 80390 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80390 | russell | 2007-08-22 16:00:44 -0500 (Wed, 22 Aug 2007) |
	  3 lines Don't crash when using realtime in chan_sip without an
	  insecure setting in the database. (closes issue #10348, reported
	  by link55, fixed by me) ........

	* channels/chan_iax2.c: Unsubscribe from MWI events in the peer
	  destructor

	* /, main/Makefile, include/asterisk/astobj2.h (added),
	  include/asterisk/strings.h, channels/chan_iax2.c, main/astobj2.c
	  (added): Merged revisions 80362 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80362 | russell | 2007-08-22 15:21:36 -0500 (Wed, 22 Aug 2007) |
	  34 lines Merge changes from team/russell/iax_refcount. This set
	  of changes fixes problems with the handling of iax2_user and
	  iax2_peer objects. It was very possible for a thread to still
	  hold a reference to one of these objects while a reload operation
	  tries to delete them. The fix here is to ensure that all
	  references to these objects are tracked so that they can't go
	  away while still in use. To accomplish this, I used the astobj2
	  reference counted object model. This code has been in one of
	  Luigi Rizzo's branches for a long time and was primarily
	  developed by one of his students, Marta Carbone. I wanted to go
	  ahead and bring this in to 1.4 because there are other problems
	  similar to the ones fixed by these changes, so we might as well
	  go ahead and use the new astobj if we're going to go through all
	  of the work necessary to fix the problems. As a nice side benefit
	  of these changes, peer and user handling got more efficient.
	  Using astobj2 lets us not hold the container lock for peers or
	  users nearly as long while iterating. Also, by changing a define
	  at the top of chan_iax2.c, the objects will be distributed in a
	  hash table, drastically increasing lookup speed in these
	  containers, which will have a very big impact on systems that
	  have a large number of users or peers. The use of the hash table
	  will be made the default in trunk. It is not the default in 1.4
	  because it changes the behavior slightly. Previously, since peers
	  and users were stored in memory in the same order they were
	  specified in the configuration file, you could influence peer and
	  user matching order based on the order they are specified in the
	  configuration. The hash table does not guarantee any order in the
	  container, so this behavior will be going away. It just means
	  that you have to be a little more careful ensuring that peers and
	  users are matched explicitly and not forcing chan_iax2 to have to
	  guess which user is the right one based on secret, host, and
	  access list settings, instead of simply using the username. If
	  you have any questions, feel free to ask on the asterisk-dev
	  list. ........

	* /, res/res_agi.c: Merged revisions 80360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80360 | russell | 2007-08-22 14:53:30 -0500 (Wed, 22 Aug 2007) |
	  5 lines Juggie in #asterisk-dev was reporting problems where
	  fgets would return without reading the whole line when using
	  fastagi. When this happens, errno was set to EINTR or EAGAIN.
	  This patch accounts for the possibility and lets fgets continue
	  in that case. ........

2007-08-22 18:54 +0000 [r80303-80331]  Jason Parker <jparker@digium.com>

	* Makefile, build_tools/mkpkgconfig, /, build_tools/make_build_h,
	  build_tools/strip_nonapi, build_tools/prep_moduledeps,
	  build_tools/make_buildopts_h: Merged revisions 80330 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r80330 | qwell | 2007-08-22 13:53:18 -0500 (Wed, 22 Aug
	  2007) | 7 lines Fix a few build issues in Solaris (and likely
	  others). Use GREP and ID variables from autoconf. Reported to me
	  in #asterisk-dev I forgot who reported this - sorry. :( ........

	* Makefile, /: Merged revisions 80304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80304 | qwell | 2007-08-22 13:25:34 -0500 (Wed, 22 Aug 2007) | 2
	  lines Change a syntax that the GNU make in Solaris dislikes.
	  ........

	* /, build_tools/make_version: Merged revisions 80302 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r80302 | qwell | 2007-08-22 13:06:00 -0500 (Wed, 22 Aug
	  2007) | 3 lines Fix a bashism (we explicitly request /bin/sh).
	  Remove some oddly placed quotes I found in passing. ........

2007-08-22 16:27 +0000 [r80258-80262]  Russell Bryant <russell@digium.com>

	* utils/check_expr.c: Ensure that the object code for
	  ast_atomic_fetchadd_int() gets included in the check_expr binary
	  when building with LOW_MEMORY defined. (reported by Brian Capouch
	  on the asterisk-dev list, patch by me)

	* Makefile, /: Merged revisions 80257 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80257 | russell | 2007-08-22 11:21:58 -0500 (Wed, 22 Aug 2007) |
	  4 lines Honor the contents of the COPTS variable as custom target
	  CFLAGS. Apparently this is what openwrt does. (reported by Brian
	  Capouch on the asterisk-dev list, patch by me) ........

2007-08-22 16:16 +0000 [r80256]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 80255 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80255 | file | 2007-08-22 13:14:38 -0300 (Wed, 22 Aug 2007) | 4
	  lines (closes issue #10526) Reported by: sinistermidget Revert
	  commit from issue #10355 and return timestamp skew to 640.
	  ........

2007-08-22 14:17 +0000 [r80241-80242]  Steve Murphy <murf@digium.com>

	* /: blocking 80167

	* /, main/alaw.c: Merged revisions 80166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80166 | murf | 2007-08-21 10:36:34 -0600 (Tue, 21 Aug 2007) | 1
	  line This patch solves problem 1 in 8126; it should not slow down
	  the alaw codec, but should prevent signal degradation via
	  multiple trips thru the codec. Fossil estimates the twice thru
	  this codec will prevent fax from working. 4-6 times thru would
	  result hearable, noticeable, voice degradation. ........

2007-08-21 21:58 +0000 [r80226]  Russell Bryant <russell@digium.com>

	* funcs/func_odbc.c: use ast_atomic_fetchadd_int for incrementing
	  resultcount

2007-08-21 20:55 +0000 [r80217]  Steve Murphy <murf@digium.com>

	* res/ael/pval.c: As per 10472, mvanbaak thought the generated code
	  would look better this way.

2007-08-21 18:49 +0000 [r80184]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 80183 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80183 | russell | 2007-08-21 13:42:15 -0500 (Tue, 21 Aug 2007) |
	  7 lines Don't record SIP dialog history if it's not turned on.
	  Also, put an upper limit on how many history entires will be
	  stored for each SIP dialog. It is currently set to 50, but can be
	  increased if deemed necessary. (closes issue #10421, closes issue
	  #10418, patches suggested by jmoldenhauer, patches updated by me)
	  (Security implications documented in AST-2007-020) ........

2007-08-21 15:51 +0000 [r80157]  Joshua Colp <jcolp@digium.com>

	* main/audiohook.c: Minor tweak. Don't manipulate volume of the
	  audio in the buffer if no audio is actually there.

2007-08-21 15:23 +0000 [r80133]  Russell Bryant <russell@digium.com>

	* /, channels/chan_mgcp.c: Merged revisions 80132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80132 | russell | 2007-08-21 10:22:22 -0500 (Tue, 21 Aug 2007) |
	  3 lines Don't try to dereference the owner channel when it may
	  not exist (issue #10507, maxper) ........

2007-08-21 15:04 +0000 [r80131]  Jason Parker <jparker@digium.com>

	* /, configs/cdr.conf.sample: Merged revisions 80130 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r80130 | qwell | 2007-08-21 10:03:45 -0500 (Tue, 21 Aug
	  2007) | 7 lines (closes issue #10510) Reported by: casper
	  Patches: cdr.conf.diff uploaded by casper (license 55) Fix a few
	  errors in sample cdr config file. ........

2007-08-20 22:53 +0000 [r80113]  Steve Murphy <murf@digium.com>

	* build_tools/cflags.xml, main/ulaw.c, codecs/slin_ulaw_ex.h,
	  codecs/ulaw_slin_ex.h, include/asterisk/alaw.h, main/translate.c,
	  include/asterisk/ulaw.h, main/alaw.c: This change set fixes bug
	  8126 in trunk. It is implemented via compile time options,
	  activated via the menuselect stuff, which defaults to the old
	  way. non-zero sample data added. Translate tables expressed in
	  microseconds instead of milliseconds, with 5-digit data now
	  instead of 3, giving 2 more digits of precision.

2007-08-20 17:37 +0000 [r80075]  Steve Murphy <murf@digium.com>

	* include/asterisk/lock.h, utils/extconf.c: Stephn Davies reports
	  that this will help make things work on 64-bit machines

2007-08-20 16:18 +0000 [r80050]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 80049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80049 | mmichelson | 2007-08-20 11:17:43 -0500 (Mon, 20 Aug
	  2007) | 4 lines Found a pointless ternary if. member->dynamic was
	  set to 1 and has no opportunity to change between then and this
	  line, so "dynamic" will ALWAYS be output. ........

2007-08-20 16:12 +0000 [r80048]  Jason Parker <jparker@digium.com>

	* /, configs/extensions.conf.sample: Merged revisions 80047 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80047 | qwell | 2007-08-20 11:08:49 -0500 (Mon, 20 Aug 2007) | 7
	  lines (closes issue #10499) Reported by: casper Patches:
	  extensions.conf.sample.diff uploaded by casper (license 55)
	  Update CLI examples in extensions.conf.sample to reflect command
	  changes. ........

2007-08-20 15:53 +0000 [r80046]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: Remove remnants of last commit so trunk
	  builds again.

2007-08-20 15:37 +0000 [r80045]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 80044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r80044 | mmichelson | 2007-08-20 10:34:43 -0500 (Mon, 20 Aug
	  2007) | 5 lines Ukrainian language voicemail support. (closes
	  issue #10458, reported and patched by Oleh) ........

2007-08-20 15:27 +0000 [r80037]  Steve Murphy <murf@digium.com>

	* utils/pval.c (removed): pval.c should not be in svn, in the utils
	  dir

2007-08-20 15:10 +0000 [r80023-80033]  Joshua Colp <jcolp@digium.com>

	* utils/pval.c: Bring pval.c in utils up to date with pval.c in
	  res/ael.

	* channels/chan_zap.c: Fix random segfault issue when loading
	  chan_zap. Trying to access a configuration structure that has
	  already been destroyed is bad, mmmk?

2007-08-20 02:46 +0000 [r79999]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 79998 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79998 | tilghman | 2007-08-19 21:42:49 -0500 (Sun, 19 Aug 2007)
	  | 2 lines Missing curly braces. Oops. (Reported by snuffy via
	  IRC) ........

2007-08-20 00:54 +0000 [r79988-79990]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: (closes issue #10495) Reported by:
	  stevedavies Make sure context pointer is valid or else chan_iax2
	  will go kaboom.

	* utils/Makefile: (closes issue #10496) Reported by: caio1982 Fix
	  building on OSX.

	* channels/chan_h323.c: Fix building of trunk. I'm doing work on a
	  Sunday night just to avoid watching Snakes on a Plane which my
	  roommate is watching.

2007-08-19 14:17 +0000 [r79980]  Tilghman Lesher <tlesher@digium.com>

	* utils/Makefile: Add strcompat dependency for check_expr (needed
	  for platforms that don't have strndup)

2007-08-18 23:58 +0000 [r79972]  Joshua Colp <jcolp@digium.com>

	* configure, configure.ac: Actually check the return value of
	  epoll_create to make sure it works.

2007-08-18 14:34 +0000 [r79940-79949]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 79947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79947 | tilghman | 2007-08-18 09:30:44 -0500 (Sat, 18 Aug 2007)
	  | 3 lines Don't allocate vmu for messagecount when we could just
	  use the stack instead (closes issue #10490) Also, remove a
	  useless (and leaky) SQLAllocHandle (closes issue #10480) ........

	* channels/chan_zap.c, channels/chan_sip.c, channels/chan_h323.c,
	  channels/chan_iax2.c: We weren't properly encapsulating the mtime
	  ignores of config files (closes issue #10488)

2007-08-17 21:19 +0000 [r79915]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: I broke the build. Now I'm fixing it.

2007-08-17 21:04 +0000 [r79913]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 79912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79912 | russell | 2007-08-17 16:01:43 -0500 (Fri, 17 Aug 2007) |
	  4 lines Avoid a crash in the handling of DTMF based Caller ID. It
	  is valid for ast_read to return NULL in the case that the channel
	  has been hung up. (crash reported by anonymouz666 on IRC in
	  #asterisk-dev) ........

2007-08-17 19:16 +0000 [r79907]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 79906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79906 | mmichelson | 2007-08-17 14:14:05 -0500 (Fri, 17 Aug
	  2007) | 6 lines Patch allows for more seamless transition from
	  file storage voicemail to ODBC storage voicemail. If a retrieval
	  of a greeting from the database fails, but the file is found on
	  the file system, then we go ahead an insert the greeting into the
	  database. The result of this is that people who switch from file
	  storage to ODBC storage do not need to rerecord their voicemail
	  greetings. ........

2007-08-17 19:13 +0000 [r79903-79905]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c, main/utils.c, include/asterisk/strings.h:
	  Merged revisions 79904 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10430) ........ r79904 | qwell | 2007-08-17 14:12:19 -0500
	  (Fri, 17 Aug 2007) | 11 lines Don't send a semicolon over the
	  wire in sip notify messages. Caused by fix for issue 9938. I
	  basically took the code that existed before 9938 was fixed, and
	  copied it into a new function - ast_unescape_semicolon There
	  should be very few places this will be needed (pbx_config does
	  NOT need this (see issue 9938 for details)) Issue 10430, patch by
	  me, with help/ideas from murf (thanks murf). ........

	* channels/chan_local.c, /: Merged revisions 79902 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10485) ........ r79902 | qwell | 2007-08-17 12:44:22 -0500
	  (Fri, 17 Aug 2007) | 4 lines Re-add the setting of callerid name
	  and number. Issue 10485, reported by and fix explained by
	  paradise. ........

2007-08-17 16:39 +0000 [r79901]  Tilghman Lesher <tlesher@digium.com>

	* configs/logger.conf.sample: Documentation for %q in logger.conf,
	  as suggested by jtodd (closes issue #10475)

2007-08-17 16:04 +0000 [r79888-79894]  Jason Parker <jparker@digium.com>

	* res/res_features.c: Fix Dial arguments in res_features. Closes
	  issue #10484, patch by lunn.

	* pbx/pbx_dundi.c: Correct the argument separator for a Dial
	  statement in pbx_dundi. Closes issue #10483, patch by lunn

2007-08-17 14:41 +0000 [r79885]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c: Change this flag... might not otherwise unlock in
	  an OOM situation

2007-08-17 14:14 +0000 [r79861-79862]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Make use of ast_sched_replace() in some
	  places in chan_iax2

	* channels/chan_sip.c, include/asterisk/sched.h, main/sched.c: This
	  commit adds a scheduler API call, ast_sched_replace that can be
	  used in place of a very common construct. I also used it in a
	  number of places in chan_sip. if (id > -1) ast_sched_del(sched,
	  id); id = ast_sched_add(sched, ...); changes to:
	  ast_sched_replace(id, sched, ...);

2007-08-17 13:45 +0000 [r79859-79860]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, res/res_config_sqlite.c: store and destroy
	  implementations for sqlite (closes issue #10446) and odbc (closes
	  issue #10447)

	* res/res_config_pgsql.c, funcs/func_lock.c: store and destroy
	  implementations for realtime pgsql (closes issue #10372)

2007-08-17 13:39 +0000 [r79858]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 79857 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79857 | russell | 2007-08-17 08:37:08 -0500 (Fri, 17 Aug 2007) |
	  5 lines Fix some crashes in chan_sip. This patch changes various
	  places that add items to the scheduler to ensure that they don't
	  overwrite the ID of a previously scheduled item. If there is one,
	  it should be removed. (closes issue #10391, closes issue #10256,
	  probably others, patch by me) ........

2007-08-17 08:29 +0000 [r79841]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 79833 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r79833 | crichter | 2007-08-17 10:22:36 +0200 (Fr, 17
	  Aug 2007) | 1 line sometimes we don't need to signal dtmf tones
	  to asterisk, we just want them to go through as inband. Otherwise
	  they might be generated by the other channel partner and then
	  there is a double tone. ........

2007-08-17 01:19 +0000 [r79824]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c: Fix building of chan_zap under development
	  mode without libpri and libss7 installed.

2007-08-16 23:31 +0000 [r79813]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_lock.c: Revise dialplan locks to permit multiple locks
	  per channel, but with deadlock avoidance

2007-08-16 22:33 +0000 [r79764-79794]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 79792 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79792 | russell | 2007-08-16 17:32:33 -0500 (Thu, 16 Aug 2007) |
	  4 lines Fix a little race condition that could cause a crash if
	  two channels had MOH stopped at the same time that were using a
	  class that had been marked for deletion when its use count hits
	  zero. ........

	* /, res/res_musiconhold.c: Merged revisions 79778 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r79778 | russell | 2007-08-16 17:24:25 -0500 (Thu, 16
	  Aug 2007) | 14 lines This patch fixes a bug where reloading the
	  module with "module reload" did not delete classes from memory
	  that were no longer in the config. This patch fixes that problem
	  as well as another one. Previously, if you reloaded MOH using the
	  "moh reload" CLI command, which behaved differently than "module
	  reload ...", MOH had to be stopped on every channel and started
	  again immediately. However, there was no way to tell what class
	  was being used, so they would all fall back to the default class.
	  (closes issue #10139) Reported by: blitzrage Patches:
	  asterisk-10139-advanced.diff.txt uploaded by jamesgolovich
	  (license 176) Tested by: jamesgolovich ........

	* /, channels/chan_iax2.c: Merged revisions 79756 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79756 | russell | 2007-08-16 16:29:24 -0500 (Thu, 16 Aug 2007) |
	  11 lines Fix more deadlocks in chan_iax2 that were introduced by
	  making frame handling and scheduling multi-threaded.
	  Unfortunately, we have to do some expensive deadlock avoidance
	  when queueing frames on to the ast_channel owner of the IAX2 pvt
	  struct. This was already handled for regular frames, but
	  ast_queue_hangup and ast_queue_control were still used directly.
	  Making these changes introduced even more places where the IAX2
	  pvt struct can disappear in the context of a function holding its
	  lock due to calling a function that has to unlock/lock it to
	  avoid deadlocks. I went through and fixed all of these places to
	  account for this possibility. (issue #10362, patch by me)
	  ........

2007-08-16 21:28 +0000 [r79755]  Joshua Colp <jcolp@digium.com>

	* /: Fix properties on trunk again.

2007-08-16 21:21 +0000 [r79749]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 79748 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r79748 | mmichelson | 2007-08-16 16:16:40 -0500 (Thu, 16
	  Aug 2007) | 8 lines Fixes a problem where agents would get stuck
	  busy due to their wrapuptime being longer than the queue's
	  wrapuptime and ringinuse=no for the queue. (closes issue #10215,
	  reported by Doug, repaired by me) Special thanks to fkasumovic
	  for pointing out the source of the problem and to bweschke for
	  helping to come up with a solution! ........

2007-08-16 21:09 +0000 [r79747]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, cdr/cdr_sqlite3_custom.c, /, res/res_features.c,
	  codecs/codec_adpcm.c, apps/app_alarmreceiver.c,
	  cdr/cdr_adaptive_odbc.c, channels/chan_iax2.c, main/config.c,
	  main/loader.c, res/res_smdi.c, channels/chan_skinny.c,
	  main/http.c, apps/app_amd.c, channels/chan_alsa.c,
	  cdr/cdr_odbc.c, cdr/cdr_manager.c, codecs/codec_g722.c,
	  apps/app_privacy.c, codecs/codec_speex.c, channels/chan_agent.c,
	  codecs/codec_g726.c, channels/iax2-provision.c,
	  apps/app_playback.c, channels/iax2-provision.h,
	  channels/chan_misdn.c, res/res_indications.c, pbx/pbx_config.c,
	  main/asterisk.c, res/res_odbc.c, apps/app_voicemail.c,
	  channels/chan_vpb.cc, res/res_snmp.c, apps/app_meetme.c,
	  codecs/codec_gsm.c, res/res_musiconhold.c, channels/chan_gtalk.c,
	  cdr/cdr_pgsql.c, apps/app_followme.c, res/res_jabber.c,
	  cdr/cdr_radius.c, codecs/codec_zap.c, res/res_config_sqlite.c,
	  main/enum.c, channels/misdn_config.c, cdr/cdr_csv.c, main/cdr.c,
	  channels/chan_phone.c, res/res_config_odbc.c, main/manager.c,
	  apps/app_osplookup.c, funcs/func_odbc.c, apps/app_minivm.c,
	  main/logger.c, apps/app_directory.c, apps/app_rpt.c,
	  cdr/cdr_custom.c, channels/chan_mgcp.c, codecs/codec_lpc10.c,
	  res/res_config_pgsql.c, main/dnsmgr.c, channels/chan_zap.c,
	  channels/chan_sip.c, apps/app_festival.c, codecs/codec_alaw.c,
	  res/res_adsi.c, include/asterisk/config.h, apps/app_queue.c,
	  channels/chan_oss.c, main/rtp.c, cdr/cdr_tds.c,
	  channels/chan_jingle.c, channels/misdn/chan_misdn_config.h,
	  channels/chan_h323.c, pbx/pbx_dundi.c, codecs/codec_ulaw.c: Don't
	  reload a configuration file if nothing has changed.

2007-08-16 19:40 +0000 [r79736]  Steve Murphy <murf@digium.com>

	* utils/pval.c, utils/conf2ael.c: Many thanks to mvanbaak for his
	  update to translate hints; I added the -d option for local
	  testing purposes. This is from bug 10472

2007-08-16 18:23 +0000 [r79724-79725]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_iax2.c: added counter for iax2 show registry CLI
	  output, closes issue 10461, thanks junky

	* apps/app_voicemail.c: added counter for voicemail show users,
	  issue 10462, thanks junky

2007-08-16 17:34 +0000 [r79714-79719]  Steve Murphy <murf@digium.com>

	* utils/conf2ael.c: mvanbaak asks: why did you include that twice?
	  Answer: dunno. removed redundant include

	* utils/extconf.c, utils/conf2ael.c: svn did me dirty for some
	  reason. Left 5 files out of the commit; Tilghman copied them in
	  from the branch, but I had made changes to these. Here they are.

2007-08-16 15:59 +0000 [r79691]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 79690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79690 | mmichelson | 2007-08-16 10:58:34 -0500 (Thu, 16 Aug
	  2007) | 5 lines base_encode is not trying to open a log file, so
	  we should not call it a log file in the warning. (related to
	  issue #10452, reported by bcnit) ........

2007-08-16 15:29 +0000 [r79687-79688]  Joshua Colp <jcolp@digium.com>

	* pbx/pbx_dundi.c: (closes issue #10467) Reported by: lunn Patches:
	  pbx_dundi.diff uploaded by lunn (license 179) Don't print a
	  warning saying an ethernet interface was found when it indeed
	  was.

	* utils/conf2ael.c: Make conf2ael build on 64-bit systems.

2007-08-16 09:45 +0000 [r79666]  Philippe Sultan <philippe.sultan@gmail.com>

	* /, res/res_jabber.c: Merged revisions 79665 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79665 | phsultan | 2007-08-16 11:37:10 +0200 (Thu, 16 Aug 2007)
	  | 21 lines A fix for two critical problems detected while working
	  with Daniel McKeehan in issue #10184. Upon priority change, the
	  resource list is not NULL terminated when moving an item to the
	  end of the list. This makes Asterisk endlessy loop whenever it
	  needs to read the list. Jids with different resource and priority
	  values, like in Gmail's and GoogleTalk's jabber clients put that
	  problem in evidence. Upon reception of a 'from' attribute with an
	  empty resource string, Asterisk crashes when trying to access the
	  found->cap pointer if the resource list for the given buddy is
	  not empty. This situation is perfectly valid and must be handled.
	  The Gizmoproject's jabber client put that problem in evidence.
	  Also added a few comments in the code as well as a handle for the
	  capabilities from Gmail's jabber client, which are stored in a
	  caps:c tag rather than the usual c tag. Closes issue #10184.
	  ........

2007-08-16 09:22 +0000 [r79660]  Christian Richter <christian.richter@beronet.com>

	* /, channels/misdn/ie.c: Merged revisions 79642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79642 | crichter | 2007-08-16 10:21:21 +0200 (Do, 16 Aug 2007) |
	  1 line 0x80 + protocol is wrong for USERUSER when we want to send
	  IA5 Chars. ........

2007-08-16 06:52 +0000 [r79638]  Olle Johansson <oej@edvina.net>

	* CHANGES: Doc change

2007-08-15 22:53 +0000 [r79634]  Jason Parker <jparker@digium.com>

	* res/res_musiconhold.c: Modify the names of functions/variables in
	  res_musiconhold to be useful. Closes issue #10464, patch by
	  caio1982

2007-08-15 21:25 +0000 [r79623]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/pval.h (added), utils/pval.c (added),
	  include/asterisk/extconf.h (added), utils/extconf.c (added),
	  utils/conf2ael.c (added): Missing from murf's last trunk commit,
	  which was why trunk won't compile

2007-08-15 19:34 +0000 [r79611]  Joshua Colp <jcolp@digium.com>

	* /: Remove properties that appeared from Steve's last branch
	  merge. Automerge has already run so everyone's branches based off
	  of trunk are probably toast by now.

2007-08-15 19:21 +0000 [r79595]  Steve Murphy <murf@digium.com>

	* /, pbx/ael/ael.y (removed), pbx/ael/ael-test/ref.ael-test11,
	  res/Makefile, pbx/ael/ael-test/ref.ael-test14,
	  pbx/ael/ael-test/ref.ael-test15, pbx/ael/ael-test/ref.ael-test16,
	  pbx/ael/ael-test/ref.ael-test19, include/asterisk/ast_expr.h,
	  pbx/ael/ael_lex.c (removed), pbx/pbx_ael.c, pbx/ael/ael.flex
	  (removed), res/ael (added), main/pbx.c, UPGRADE.txt,
	  res/res_ael_share.c (added), pbx/Makefile, CHANGES,
	  utils/Makefile, pbx/ael/ael-test/ref.ael-ntest10,
	  pbx/ael/ael.tab.c (removed), pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-test3,
	  pbx/ael/ael-test/ref.ael-test4, include/asterisk/ael_structs.h,
	  pbx/ael/ael.tab.h (removed), pbx/ael/ael-test/ref.ael-test5,
	  utils/ael_main.c, include/asterisk/pbx.h,
	  pbx/ael/ael-test/ref.ael-test6, pbx/ael/ael-test/ref.ael-test7,
	  utils/check_expr.c: This commit closes bug 7605, and half-closes
	  7638. The AEL code has been redistributed/repartitioned to allow
	  code re-use both inside and outside of Asterisk. This commit
	  introduces the utils/conf2ael program, and an external
	  config-file reader, for both normal config files, and for
	  extensions.conf (context, exten, prio); It provides an API for
	  programs outside of asterisk to use to play with the dialplan and
	  config files.

2007-08-15 14:42 +0000 [r79558]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 79553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79553 | file | 2007-08-15 11:40:23 -0300 (Wed, 15 Aug 2007) | 6
	  lines (closes issue #10440) Reported by: irroot (closes issue
	  #10454) Reported by: flo_turc Increase maximum timestamp skew to
	  120. 20 was apparently far too low. ........

2007-08-15 14:27 +0000 [r79529]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 79527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79527 | mmichelson | 2007-08-15 09:26:40 -0500 (Wed, 15 Aug
	  2007) | 5 lines Fixed an error in the Russian language voicemail
	  intro. (issue #10458, reported and patched by Oleh) ........

2007-08-15 14:20 +0000 [r79524]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 79523 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79523 | file | 2007-08-15 11:18:44 -0300 (Wed, 15 Aug 2007) | 6
	  lines (closes issue #10456) Reported by: irroot Patches:
	  sip_timeout.patch uploaded by irroot (license 52) Change
	  hardcoded timer value to defined value. I'm doing this in 1.4 as
	  well so if it needs to be changed in the future this place would
	  not have been forgotten. ........

2007-08-15 11:27 +0000 [r79507]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/ie.c,
	  channels/misdn/isdn_msg_parser.c: Merged revisions 78936 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78936 | crichter | 2007-08-10 15:24:03 +0200 (Fr, 10 Aug 2007) |
	  1 line fixed a bug with the useruser information element. We send
	  them now also in the disconnect message. ........

2007-08-14 18:50 +0000 [r79437-79471]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 79470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79470 | russell | 2007-08-14 13:49:10 -0500 (Tue, 14 Aug 2007) |
	  2 lines Fix another spot where an iax2_peer would be leaked if
	  realtime was in use. ........

	* /, channels/chan_iax2.c: Merged revisions 79436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79436 | russell | 2007-08-14 12:31:39 -0500 (Tue, 14 Aug 2007) |
	  3 lines Fix some memory leaks throughout chan_iax2 related to the
	  use of realtime. I found these while working on iax2_peer object
	  reference tracking. ........

2007-08-14 15:30 +0000 [r79403]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 79397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79397 | file | 2007-08-14 12:27:13 -0300 (Tue, 14 Aug 2007) | 4
	  lines (closes issue #10415) Reported by: atis Revert fix for
	  #10327 as it causes more issues then it solves. ........

2007-08-14 14:32 +0000 [r79392]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-vtest17, /,
	  pbx/ael/ael-test/ref.ael-test11, pbx/ael/ael-test/ref.ael-test14,
	  pbx/ael/ael-test/ael-test5/extensions.ael,
	  pbx/ael/ael-test/ael-test6/extensions.ael,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ael-vtest21/extensions.ael,
	  pbx/ael/ael-test/ael-vtest21 (added),
	  pbx/ael/ael-test/ref.ael-ntest10, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test2, pbx/pbx_ael.c,
	  pbx/ael/ael-test/ref.ael-test3, pbx/ael/ael-test/ref.ael-test4,
	  utils/ael_main.c, pbx/ael/ael-test/ref.ael-test6,
	  pbx/ael/ael-test/ref.ael-vtest21 (added),
	  pbx/ael/ael-test/ref.ael-vtest13: Merged revisions 79255 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79255 | murf | 2007-08-13 11:49:54 -0600 (Mon, 13 Aug 2007) | 1
	  line This patch fixes bug 10411. I added a new regression test,
	  some regression test cleanups ........

2007-08-14 14:17 +0000 [r79379]  Joshua Colp <jcolp@digium.com>

	* main/channel.c: (closes issue #10427) Reported by: pj Two of the
	  three places ast_waitfor_nandfds could branch off to did not
	  clear outfd and exception. If the calling function did not clear
	  these there was a chance they could get a false positive on
	  testing to see whether they were set.

2007-08-14 13:46 +0000 [r79378]  Steve Murphy <murf@digium.com>

	* main/channel.c, channels/chan_zap.c: Don't ask me why, but
	  waitfordigit will immediately return a 1 on my system, unless the
	  outfd is initialized to -1 before calling the nandfds func

2007-08-13 21:59 +0000 [r79335]  Joshua Colp <jcolp@digium.com>

	* /, include/asterisk/speech.h, res/res_speech.c,
	  apps/app_speech_utils.c: Merged revisions 79334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79334 | file | 2007-08-13 18:57:20 -0300 (Mon, 13 Aug 2007) | 2
	  lines Instead of accepting a single DTMF character accept a full
	  string. ........

2007-08-13 21:44 +0000 [r79333]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c: Only use the sanitysql if it's not zero-len

2007-08-13 20:40 +0000 [r79273-79306]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 79301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79301 | russell | 2007-08-13 15:37:50 -0500 (Mon, 13 Aug 2007) |
	  3 lines Don't call find_peer in registry_authrequest with the pvt
	  lock held to avoid a deadlock. ........

	* /, channels/chan_iax2.c: Merged revisions 79276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79276 | russell | 2007-08-13 15:18:30 -0500 (Mon, 13 Aug 2007) |
	  4 lines Release the pvt lock before calling find_peer in
	  register_verify to avoid a deadlock. Also, remove some
	  unnecessary locking in auth_fail that was only done recursively.
	  ........

	* /, channels/chan_iax2.c: Merged revisions 79274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79274 | russell | 2007-08-13 15:02:57 -0500 (Mon, 13 Aug 2007) |
	  3 lines Don't call find_peer within update_registry with a pvt
	  lock held. This can cause a deadlock as the code will eventually
	  call find_callno. ........

	* /, channels/chan_iax2.c: Merged revisions 79272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79272 | russell | 2007-08-13 14:27:39 -0500 (Mon, 13 Aug 2007) |
	  9 lines I am fighting deadlocks in chan_iax2. I have tracked them
	  down to a single core issue. You can not call find_callno() while
	  holding a pvt lock as this function has to lock another (every)
	  other pvt lock. Doing so can lead to a classic deadlock. So, I am
	  tracking down all of the code paths where this can happen and
	  fixing them. The fix I committed earlier today was along the same
	  theme. This patch fixes some code down the path of
	  authenticate_reply. ........

2007-08-13 15:39 +0000 [r79238]  Mark Michelson <mmichelson@digium.com>

	* CHANGES, apps/app_queue.c: Allow non-realtime queues to have
	  realtime members (issue #10424, reported and patched by irroot)

2007-08-13 15:32 +0000 [r79222]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 79214 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79214 | russell | 2007-08-13 10:28:13 -0500 (Mon, 13 Aug 2007) |
	  4 lines Fix a potential deadlock in socket_process.
	  check_provisioning can eventually call find_callno. You can't
	  hold a pvt lock while calling find_callno because it goes through
	  and locks every single one looking for a match. ........

2007-08-13 14:55 +0000 [r79208]  Joshua Colp <jcolp@digium.com>

	* /, include/asterisk/speech.h, res/res_speech.c,
	  apps/app_speech_utils.c: Merged revisions 79207 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79207 | file | 2007-08-13 11:51:09 -0300 (Mon, 13 Aug 2007) | 2
	  lines Add an API call to allow the engine to know that DTMF was
	  received. ........

2007-08-13 14:23 +0000 [r79176]  Russell Bryant <russell@digium.com>

	* main/channel.c, include/asterisk/channel.h: constify the return
	  value of reason2str

2007-08-13 14:22 +0000 [r79175]  Joshua Colp <jcolp@digium.com>

	* channels/chan_jingle.c, channels/chan_phone.c,
	  channels/chan_local.c, channels/chan_misdn.c,
	  channels/chan_zap.c, /, channels/chan_sip.c,
	  channels/chan_skinny.c, channels/chan_h323.c,
	  channels/chan_gtalk.c, channels/chan_iax2.c, channels/chan_oss.c,
	  channels/chan_mgcp.c: Merged revisions 79174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79174 | file | 2007-08-13 11:18:04 -0300 (Mon, 13 Aug 2007) | 4
	  lines (closes issue #10437) Reported by: haklin Don't set the
	  callerid name and number a second time on a newly created
	  channel. ast_channel_alloc itself already sets it and setting it
	  twice would cause a memory leak. ........

2007-08-11 05:28 +0000 [r79147]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 79142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79142 | tilghman | 2007-08-11 00:23:04 -0500 (Sat, 11 Aug 2007)
	  | 2 lines Ensure the connection gets marked as used at allocation
	  time (closes issue #10429, report and fix by mnicholson) ........

2007-08-10 21:29 +0000 [r79109]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c: Use localized softkey labels. Add some
	  information about localization "codes".

2007-08-10 21:03 +0000 [r79100]  Steve Murphy <murf@digium.com>

	* main/channel.c, pbx/pbx_spool.c, include/asterisk/channel.h:
	  Merged revisions 79099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79099 | murf | 2007-08-10 14:53:43 -0600 (Fri, 10 Aug 2007) | 1
	  line From a user complaint on #asterisk, I have forced pbx_spool
	  to explain what reason codes mean, when they are logged ........

2007-08-10 20:48 +0000 [r79098]  Russell Bryant <russell@digium.com>

	* funcs/func_devstate.c: Store custom device states in astdb so
	  that they will persist a restart. As a side benefit, this
	  simplifies the code a bit, too.

2007-08-10 18:37 +0000 [r79074]  Joshua Colp <jcolp@digium.com>

	* main/dial.c: Bring up to date with poll changes.

2007-08-10 18:35 +0000 [r79045-79068]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 79049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79049 | murf | 2007-08-10 12:25:51 -0600 (Fri, 10 Aug 2007) | 1
	  line Re bug behavior mentioned in #asterisk, made this tweak to
	  code, to prevent hundreds of log messages from being generated
	  ........

	* /: oops. forgot to commit the prop change on .

	* main/cdr.c: Merged revisions 79044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r79044 | murf | 2007-08-10 11:43:49 -0600 (Fri, 10 Aug 2007) | 1
	  line This will help debug; from a question asked on #asterisk
	  ........

2007-08-10 16:24 +0000 [r79005-79027]  Russell Bryant <russell@digium.com>

	* include/asterisk/devicestate.h, apps/app_meetme.c,
	  res/res_features.c, main/devicestate.c, main/event.c,
	  funcs/func_devstate.c: Merge a set of device state improvements
	  from team/russell/events. The way a device state change
	  propagates is kind of silly, in my opinion. A device state
	  provider calls a function that indicates that the state of a
	  device has changed. Then, another thread goes back and calls a
	  callback for the device state provider to find out what the new
	  state is before it can go send it off to whoever cares. I have
	  changed it so that you can include the state that the device has
	  changed to in the first function call from the device state
	  provider. This removes the need to have to call the callback,
	  which locks up critical containers to go find out what the state
	  changed to. This change set changes the "simple" device state
	  providers to use the new method. This includes parking, meetme,
	  and SLA. I have also mostly converted chan_agent in my branch,
	  but still have some more things to think through before
	  presenting the plan for converting channel drivers to ensure all
	  of the right events get generated ...

	* /, include/asterisk/lock.h: Merged revisions 78995 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78995 | russell | 2007-08-10 10:20:09 -0500 (Fri, 10
	  Aug 2007) | 4 lines The last set of changes that I made to "core
	  show locks" made it not able to track mutexes unless they were
	  declared using AST_MUTEX_DEFINE_STATIC. Locks initialized with
	  ast_mutex_init() were not tracked. It should work now. ........

2007-08-10 14:17 +0000 [r78952-78956]  Joshua Colp <jcolp@digium.com>

	* /, main/file.c: Merged revisions 78955 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78955 | file | 2007-08-10 11:15:53 -0300 (Fri, 10 Aug 2007) | 2
	  lines Don't bother having the core pass through or emulate begin
	  DTMF frames when in an ast_waitstream. It only cares about the
	  end of DTMF. ........

	* /, configs/queues.conf.sample: Merged revisions 78951 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78951 | file | 2007-08-10 10:49:19 -0300 (Fri, 10 Aug 2007) | 4
	  lines (closes issue #10422) Reported by: bhowell Add note to
	  sample configuration about module load order and how it can cause
	  perfectly good queue members to be marked as invalid. ........

2007-08-09 23:49 +0000 [r78908]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 78907 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78907 | mmichelson | 2007-08-09 18:47:00 -0500 (Thu, 09 Aug
	  2007) | 4 lines Improved a bit of logic regarding comma-separated
	  mailboxes in has_voicemail. Also added some braces to some
	  compound if statements since unbraced if statements scare me in
	  general. ........

2007-08-09 23:32 +0000 [r78906]  Steve Murphy <murf@digium.com>

	* Makefile, /: Merged revisions 78891 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78891 | murf | 2007-08-09 17:10:46 -0600 (Thu, 09 Aug 2007) | 1
	  line This fixes bug 10416; thanks to mvanbaak for the pretty
	  output ........

2007-08-09 22:19 +0000 [r78861-78862]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 78859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78859 | mmichelson | 2007-08-09 16:51:17 -0500 (Thu, 09 Aug
	  2007) | 9 lines Quite a few changes regarding IMAP storage. 1.
	  instead of using inboxcount as the core message counting
	  function, we use messagecount instead. This makes it possible to
	  count messages in folders besides just INBOX and Old. 2.
	  inboxcount and hasvoicemail now use messagecount as their means
	  of determining return values. 3. Added a copy_message function
	  for IMAP storage. Unfortunately I don't have the means to test
	  it, but it seems like a pretty straightforward function. 4.
	  Removed a #ifndef IMAP_STORAGE and matching #endif from
	  leave_voicemail for a couple of reasons. One, we want to support
	  copying mail to multiple IMAP boxes, and two, IMAP was broken
	  because a STORE macro had been moved into this section of code.
	  ........

2007-08-09 20:07 +0000 [r78829]  Russell Bryant <russell@digium.com>

	* apps/app_minivm.c: Don't use strncpy for moving a chunk of memory
	  to another that is overlapping. This was found by running
	  Asterisk under valgrind.

2007-08-09 19:35 +0000 [r78718-78824]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: When looking up a mailbox, use the default
	  context if not specified as something else

	* channels/chan_sip.c: Restore the ability to have multiple
	  mailboxes listed for the mailbox option in sip.conf. chan_sip now
	  maintains separate internal MWI subscriptions for each one.

	* /, apps/app_voicemail.c: Merged revisions 78778 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78778 | russell | 2007-08-09 12:58:31 -0500 (Thu, 09 Aug 2007) |
	  1 line add a comment to indicate that inboxcount for ODBC_STORAGE
	  needs to be fixed to support multiple mailboxes ........

	* /, apps/app_voicemail.c: Merged revisions 78749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78749 | russell | 2007-08-09 12:24:40 -0500 (Thu, 09 Aug 2007) |
	  9 lines Fix subscriptions to multiple mailboxes for ODBC_STORAGE.
	  Also, leave a comment for this to be fixed for IMAP_STORAGE, as
	  well. I left IMAP alone since I know MarkM was working on this
	  code right now for another reason. This is broken even worse in
	  trunk, but for a different reason. The fact that the mailbox
	  option supported multiple mailboxes is completely not obvious
	  from the code in the channel drivers. Anyway, I will fix that in
	  another commit ... ........

	* channels/chan_zap.c, channels/chan_sip.c,
	  include/asterisk/event_defs.h, channels/chan_iax2.c,
	  channels/chan_mgcp.c, apps/app_voicemail.c: Fix a problem that I
	  had introduced into MWI handling. I had ignored the mailbox
	  context. Now, all related MWI event dealings pay attention to the
	  context as well.

	* /, apps/app_meetme.c: Merged revisions 78717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78717 | russell | 2007-08-09 11:12:57 -0500 (Thu, 09 Aug 2007) |
	  7 lines Fix a problem with the combination of the 'F' option to
	  pass DTMF through a conference and options that use DTMF to
	  activate various features. The problem was that the BEGIN frame
	  would be passed through, but the END frame would get intercepted
	  to activate a feature. Then, the other conference members would
	  hear DTMF for forever, which they didn't seem to like very much.
	  (closes issue #10400, reported by stevefeinstein, fixed by me)
	  ........

2007-08-08 22:05 +0000 [r78649-78686]  Joshua Colp <jcolp@digium.com>

	* configure: Regenerate configure script. This actually just
	  updated the revision number... since my last merge changed it to
	  an older number, while it was in fact generated from a much newer
	  revision.

	* channels/chan_skinny.c: Minor fix for building under dev mode
	  when byteswapping macro header files are not available.

	* apps/app_dial.c, channels/chan_zap.c, channels/chan_sip.c,
	  include/asterisk/autoconfig.h.in, channels/chan_agent.c,
	  configure.ac, include/asterisk/channel.h, channels/chan_gtalk.c,
	  channels/chan_oss.c, main/rtp.c, main/channel.c,
	  channels/chan_jingle.c, channels/chan_phone.c,
	  channels/chan_misdn.c, channels/chan_skinny.c, configure,
	  channels/chan_features.c, channels/chan_h323.c,
	  channels/chan_alsa.c, channels/chan_nbs.c, channels/chan_mgcp.c:
	  Add support for using epoll instead of poll. This should increase
	  scalability and is done in such a way that we should be able to
	  add support for other poll() replacements.

	* channels/chan_zap.c: HAVEL_SS7 should be HAVE_SS7. Reported by
	  kwallace.

	* main/channel.c, include/asterisk/audiohook.h (added),
	  funcs/func_volume.c (added), main/Makefile, main/slinfactory.c,
	  include/asterisk/chanspy.h (removed), include/asterisk/channel.h,
	  main/audiohook.c (added), apps/app_chanspy.c,
	  apps/app_mixmonitor.c, include/asterisk/slinfactory.h: Merge
	  audiohooks branch into trunk. This is a new API for developers to
	  listen and manipulate the audio going through a channel.

2007-08-08 19:30 +0000 [r78648]  Jason Parker <jparker@digium.com>

	* /, doc/jabber.txt: Merged revisions 78646 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78646 | qwell | 2007-08-08 14:29:42 -0500 (Wed, 08 Aug 2007) | 2
	  lines Fix mogs email address. ........

2007-08-08 19:03 +0000 [r78637]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Correct spelling. s/threaads/threads/

2007-08-08 18:34 +0000 [r78590-78635]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 78575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78575 | mmichelson | 2007-08-08 09:26:36 -0500 (Wed, 08 Aug
	  2007) | 4 lines Changing a bit of logic so that someone will
	  NEVER exit the queue on timeout unless they have enabled the 'n'
	  option. This commit relates to issue #10320. Thanks to
	  jfitzgibbon for detailing the idea behind this code change.
	  ........

2007-08-08 13:52 +0000 [r78570]  Joshua Colp <jcolp@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 78569 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78569 | file | 2007-08-08 10:51:01 -0300 (Wed, 08 Aug
	  2007) | 4 lines (closes issue #10335) Reported by: adamgundy
	  Update sip.conf to include another scenario where directrtpsetup
	  will fail. ........

2007-08-07 23:04 +0000 [r78541]  Russell Bryant <russell@digium.com>

	* main/pbx.c, pbx/pbx_spool.c, main/sha1.c, res/res_features.c,
	  res/res_crypto.c, utils/smsq.c, include/asterisk/features.h: Add
	  another big set of doxygen documentation improvements from
	  snuffy. (closes issue #9892) (closes issue #10395)

2007-08-07 22:13 +0000 [r78521]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, include/asterisk/manager.h: Use the linkedlists.h
	  macros for the manager action list.

2007-08-07 21:00 +0000 [r78489]  Russell Bryant <russell@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 78488 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78488 | russell | 2007-08-07 15:57:54 -0500 (Tue, 07
	  Aug 2007) | 2 lines Fix the build of this module on 64-bit
	  platforms ........

2007-08-07 19:44 +0000 [r78451]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 78450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78450 | mmichelson | 2007-08-07 14:43:57 -0500 (Tue, 07 Aug
	  2007) | 5 lines The logic behind inboxcount's return value was
	  reversed in has_voicemail and message_count. (closes issue
	  #10401, reported by st1710, patched by me) ........

2007-08-07 19:36 +0000 [r78442]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 78437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78437 | tilghman | 2007-08-07 14:34:25 -0500 (Tue, 07 Aug 2007)
	  | 2 lines Don't free the environment handle when the connection
	  fails, because other connections might be depending upon it
	  ........

2007-08-07 19:14 +0000 [r78417]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, /, apps/app_directory.c,
	  apps/app_voicemail.c: Merged revisions 78415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78415 | tilghman | 2007-08-07 14:09:38 -0500 (Tue, 07 Aug 2007)
	  | 2 lines Reconnection doesn't happen automatically when a DB
	  goes down (fixes issue #9389) ........

2007-08-07 18:26 +0000 [r78378]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 78375 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78375 | qwell | 2007-08-07 13:25:15 -0500 (Tue, 07 Aug
	  2007) | 3 lines Properly check the capabilities count to avoid a
	  segfault. (ASA-2007-019) ........

2007-08-07 17:46 +0000 [r78372]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 78371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r78371 | russell | 2007-08-07 12:45:30 -0500
	  (Tue, 07 Aug 2007) | 12 lines Merged revisions 78370 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r78370 | russell | 2007-08-07 12:44:04 -0500 (Tue, 07
	  Aug 2007) | 4 lines Revert patch committed for issue #9660. It
	  broke E&M trunks. (closes issue #10360) (closes issue #10364)
	  ........ ................

2007-08-07 16:17 +0000 [r78346-78347]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c: Can't forget outsignaling!

	* channels/chan_zap.c: Just for jsmith... make signaling a valid
	  option that acts like signalling.

2007-08-07 16:04 +0000 [r78342]  Russell Bryant <russell@digium.com>

	* res/res_eventtest.c (removed): Remove some test code from trunk
	  as it doesn't need to be here. I'm just going to keep it with a
	  bunch of other changes i have sitting in a branch.

2007-08-07 15:40 +0000 [r78338]  Joshua Colp <jcolp@digium.com>

	* main/frame.c: (closes issue #10225) Reported by: klaus3000 Clean
	  up AST_FORMAT_LIST list. It may have mattered in the old days to
	  have undefined entries but these days it does not.

2007-08-06 23:00 +0000 [r78312]  Jason Parker <jparker@digium.com>

	* channels/chan_agent.c: Add a TalkingToChan to the response of the
	  "agents" manager action. This is similar to the existing "talking
	  to" that you see what using the "agent show" CLI command. Closes
	  issue #10102

2007-08-06 21:59 +0000 [r78276-78279]  Joshua Colp <jcolp@digium.com>

	* apps/app_senddtmf.c: Fix bug where a NULL timeout would make
	  things explode if SendDTMF was called with it.

	* apps/app_dial.c, main/channel.c, include/asterisk/app.h,
	  res/res_features.c, apps/app_test.c, main/app.c,
	  include/asterisk/channel.h, apps/app_senddtmf.c: Extend the
	  ast_senddigit and ast_dtmf_stream API calls to allow the duration
	  of the DTMF digit(s) to be specified and make the SendDTMF
	  application have the capability to use it.

	* main/channel.c, /: Merged revisions 78275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78275 | file | 2007-08-06 18:41:13 -0300 (Mon, 06 Aug 2007) | 2
	  lines Add additional DTMF log messages to help when debugging
	  issues. ........

2007-08-06 20:45 +0000 [r78243]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 78242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78242 | russell | 2007-08-06 15:44:09 -0500 (Mon, 06 Aug 2007) |
	  4 lines Fix an issue where dynamic threads can get free'd, but
	  still exist in the dynamic thread list. (closes issue #10392,
	  patch from Mihai, with credit to his colleague, Pete) ........

2007-08-06 19:52 +0000 [r78227]  Doug Bailey <dbailey@digium.com>

	* main/tdd.c, include/asterisk/fskmodem.h, main/callerid.c,
	  main/fskmodem.c: Change the fsk filter used in CID and TDD decode
	  to an integer based implementation

2007-08-06 17:51 +0000 [r78186-78192]  Mark Michelson <mmichelson@digium.com>

	* channels/chan_sip.c: Fixing a compiler warning which warns that a
	  variable may be used unitialized. Thanks to mvanbaak for pointing
	  this out.

	* /, channels/chan_sip.c, include/asterisk/config.h, main/config.c:
	  Merged revisions 78103 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78103 | mmichelson | 2007-08-03 15:25:22 -0500 (Fri, 03 Aug
	  2007) | 7 lines Changed the behavior of sip's realtime_peer
	  function to match the corresponding way of matching for
	  non-realtime peers. Now matches are made on both the IP address
	  and port number, or if the insecure setting is set to "port" then
	  just match on the IP address. In order to accomplish this, I also
	  added a new API call, ast_category_root, which returns the first
	  variable of an ast_category struct ........

2007-08-06 16:51 +0000 [r78185]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 78184 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78184 | russell | 2007-08-06 11:50:54 -0500 (Mon, 06 Aug 2007) |
	  5 lines Fix the return value of AST_LIST_REMOVE(). This shouldn't
	  be causing any problems, though, because the only code that uses
	  the return value only checks to see if it is NULL. (closes issue
	  #10390, pointed out by mihai) ........

2007-08-06 16:34 +0000 [r78183]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 78182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78182 | file | 2007-08-06 13:32:44 -0300 (Mon, 06 Aug 2007) | 2
	  lines It is possible for a transfer to occur before the remote
	  device has our tag in which case they send none in the transfer.
	  In this case we need to not fail the transfer dialog lookup.
	  ........

2007-08-06 16:31 +0000 [r78179-78181]  Jason Parker <jparker@digium.com>

	* /, main/config.c: Merged revisions 78180 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #9938) ........ r78180 | qwell | 2007-08-06 11:30:51 -0500
	  (Mon, 06 Aug 2007) | 5 lines Fix an issue with using UpdateConfig
	  (manager action) where escaped semicolons in a config would be
	  converted to just semicolons (\; to ;) Issue 9938 ........

	* channels/chan_skinny.c, configs/skinny.conf.sample: Implement
	  setvar functionality in chan_skinny Closes issue #10379, patch by
	  mvanbaak.

2007-08-06 15:28 +0000 [r78167-78173]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 78172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78172 | file | 2007-08-06 12:27:24 -0300 (Mon, 06 Aug 2007) | 4
	  lines (closes issue #10355) Reported by: wdecarne Now that we
	  pass through RTP timestamp information we need to make the
	  allowed timestamp skew considerably less. There are situations
	  where a source may change and due to the timestamp difference the
	  receiver will experience an audio gap since we did not indicate
	  by setting the marker bit that the source changed. ........

	* apps/app_externalivr.c: (closes issue #10381) Reported by: yehavi
	  Use the filename we parsed using the standard parsing when
	  launching the application specified to ExternalIVR.

	* /, configure, configure.ac: Merged revisions 78166 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78166 | file | 2007-08-06 11:18:20 -0300 (Mon, 06 Aug
	  2007) | 4 lines (closes issue #10383) Reported by: rizzo Include
	  stdlib.h so NULL gets defined for gethostbyname_r checks.
	  ........

2007-08-05 04:16 +0000 [r78142-78144]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 78143 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r78143 | russell | 2007-08-04 23:15:31 -0500 (Sat, 04
	  Aug 2007) | 2 lines Fix compilation failure when MALLOC_DEBUG is
	  enabled, but DEBUG_THREADS is not ........

	* apps/app_exec.c: Make this module build on my mac

2007-08-05 03:42 +0000 [r78140]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 78139 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78139 | tilghman | 2007-08-04 22:29:01 -0500 (Sat, 04 Aug 2007)
	  | 2 lines If peer is not found, the error message is misleading
	  (should be peer not found, not ACL failure) ........

2007-08-05 03:14 +0000 [r78138]  Russell Bryant <russell@digium.com>

	* include/asterisk/linkedlists.h: Fix building res_crypto on
	  systems that init locks with constructors. The problem was that
	  res_crypto now has a RWLIST named "keys". The macro for defining
	  this list defines a function used as a constructor for the list
	  called "init_keys". However, there was another function called
	  init_keys in this module for a CLI command. The fix is just to
	  prepend the generated functions with underscores.

2007-08-03 20:21 +0000 [r78029-78102]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 78101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78101 | russell | 2007-08-03 15:14:06 -0500 (Fri, 03 Aug 2007) |
	  10 lines (closes issue #10194) Reported by: blitzrage Patches:
	  bug0010194 uploaded by vovochka Tested by: blitzrage Fix a
	  problem when you call Voicemail() with multiple mailboxes
	  specified and ODBC_STORAGE is in use. The audio part of the
	  message was only given to the first mailbox specified. ........

	* /, main/utils.c, include/asterisk/lock.h, main/astmm.c: Merged
	  revisions 78095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78095 | russell | 2007-08-03 14:39:49 -0500 (Fri, 03 Aug 2007) |
	  28 lines Add some improvements to lock debugging. These changes
	  take effect with DEBUG_THREADS enabled and provide the following:
	  * This will keep track of which locks are held by which thread as
	  well as which lock a thread is waiting for in a thread-local data
	  structure. A reference to this structure is available on the
	  stack in the dummy_start() function, which is the common entry
	  point for all threads. This information can be easily retrieved
	  using gdb if you switch to the dummy_start() stack frame of any
	  thread and print the contents of the lock_info variable. * All of
	  the thread-local structures for keeping track of this lock
	  information are also stored in a list so that the information can
	  be dumped to the CLI using the "core show locks" CLI command.
	  This introduces a little bit of a performance hit as it requires
	  additional underlying locking operations inside of every
	  lock/unlock on an ast_mutex. However, the benefits of having this
	  information available at the CLI is huge, especially considering
	  this is only done in DEBUG_THREADS mode. It means that in most
	  cases where we debug deadlocks, we no longer have to request
	  access to the machine to analyze the contents of ast_mutex_t
	  structures. We can now just ask them to get the output of "core
	  show locks", which gives us all of the information we needed in
	  most cases. I also had to make some additional changes to astmm.c
	  to make this work when both MALLOC_DEBUG and DEBUG_THREADS are
	  enabled. I disabled tracking of one of the locks in astmm.c
	  because it gets used inside the replacement memory allocation
	  routines, and the lock tracking code allocates memory. This
	  caused infinite recursion. ........

	* /, channels/chan_iax2.c: Merged revisions 78063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78063 | russell | 2007-08-03 12:01:07 -0500 (Fri, 03 Aug 2007) |
	  4 lines Only pass through HOLD and UNHOLD control frames when the
	  mohinterpret option is set to "passthrough". This was pointed out
	  by Kevin in the middle of a training session. ........

	* /, channels/chan_iax2.c: Merged revisions 78028 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r78028 | russell | 2007-08-02 21:04:22 -0500 (Thu, 02 Aug 2007) |
	  6 lines Don't reuse the timespec that was set to 0 in the
	  previous timedwait as it will just return immediately. Also, fix
	  some logic so the thread's lock isn't unlocked twice in the weird
	  case of dynamic threads getting acquired right after a timeout.
	  (pointed out by SteveK) ........

2007-08-02 21:54 +0000 [r77994-77997]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c, configs/skinny.conf.sample: Merged
	  revisions 77996 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #9779) ........ r77996 | qwell | 2007-08-02 16:53:39 -0500
	  (Thu, 02 Aug 2007) | 5 lines Make sure we actually allow 6 chars
	  to be sent. Also make note of the "A" option of date format.
	  Issue 9779, modifications by DEA, wedhorn, and myself. ........

	* /, channels/chan_skinny.c: Merged revisions 77993 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10325) ........ r77993 | qwell | 2007-08-02 15:22:40 -0500
	  (Thu, 02 Aug 2007) | 5 lines If a device disconnects, the session
	  will go away. If this happens during call setup, we need to give
	  up. Issue 10325. ........

2007-08-02 19:26 +0000 [r77950]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 77949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77949 | russell | 2007-08-02 14:25:14 -0500 (Thu, 02 Aug 2007) |
	  5 lines Fix the case where a dynamic thread times out waiting for
	  something to do during the first time it runs. This shouldn't
	  ever happen, but we should account for it anyway. (pointed out by
	  pete, who works with mihai) ........

2007-08-02 18:43 +0000 [r77948]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 77947 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10299) ........ r77947 | qwell | 2007-08-02 13:42:36 -0500
	  (Thu, 02 Aug 2007) | 5 lines Make sure we clear the prompt status
	  message on a hangup. Also rearrange messages to better fit with
	  what a wireshark trace shows it should be. Issue 10299, initial
	  patch and solution by sbisker, modified by me to fit with
	  wireshark trace. ........

2007-08-02 18:32 +0000 [r77946]  Steve Murphy <murf@digium.com>

	* /, main/fskmodem.c: Merged revisions 77945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r77945 | murf | 2007-08-02 12:21:40 -0600 (Thu,
	  02 Aug 2007) | 9 lines Merged revisions 77942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r77942 | murf | 2007-08-02 11:56:37 -0600 (Thu, 02 Aug 2007) | 1
	  line This patch hopefully solves 10141; The user is running with
	  it, and it doesn't appear to harm asterisk's operation, and may
	  prevent a crash. I'll store it in 1.2, as we have shut down
	  support on 1.2, but since I developed the patch before support
	  finished, and it might affect 1.4 and trunk, I'm going ahead with
	  it. ........ ................

2007-08-02 18:05 +0000 [r77940-77944]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 77943 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77943 | russell | 2007-08-02 13:04:43 -0500 (Thu, 02 Aug 2007) |
	  9 lines Fix another race condition in the handling of dynamic
	  threads. If the dynamic thread timed out waiting for something to
	  do, but was acquired to perform an action immediately afterwords,
	  then wait on the condition again to give the other thread a
	  chance to finish setting up the data for what action this thread
	  should perform. Otherwise, if it immediately continues, it will
	  perform the wrong action. (reported on IRC by mihai, patch by me)
	  (related to issue #10289) ........

	* channels/chan_iax2.c: Fix an issue that Simon pointed out to me
	  on IRC. There were cases in the trunk version of
	  find_idle_thread() where the old full frame processing
	  information was not cleared out. This would have caused full
	  frames to get deferred for processing by threads that weren't
	  actually processing frames for that call. Nice catch!!

	* /, channels/chan_iax2.c: Merged revisions 77939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77939 | russell | 2007-08-02 11:56:04 -0500 (Thu, 02 Aug 2007) |
	  4 lines Add another sanity check to vnak_retransmit(). This check
	  ensures that frames that have already been marked for deletion
	  don't get retransmitted. (closes issue #10361, patch from mihai)
	  ........

2007-08-02 15:16 +0000 [r77891-77895]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 77894 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10358) ........ r77894 | qwell | 2007-08-02 10:15:45 -0500
	  (Thu, 02 Aug 2007) | 5 lines Make sure that we show the correct
	  extension if dialed from a macro "From: 5555" rather than "From:
	  s" Issue 10358, initial patch by DEA, reworked by me to use S_OR,
	  tested by sbisker ........

	* /, channels/chan_skinny.c: Merged revisions 77890 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10291) ........ r77890 | qwell | 2007-08-01 17:28:56 -0500
	  (Wed, 01 Aug 2007) | 4 lines Put in some additional debug
	  information for softkey/stimulus messages. Issue 10291, patch by
	  DEA. ........

2007-08-01 22:24 +0000 [r77889]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 77887 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77887 | russell | 2007-08-01 17:16:17 -0500 (Wed, 01 Aug 2007) |
	  23 lines Fix some race conditions which have been causing weird
	  problems in chan_iax2. The most notable problem is that people
	  have been seeing storms of VNAK frames being sent due to really
	  old frames mysteriously being in the retransmission queue and
	  never getting removed. It was possible that a dynamic thread got
	  created, but did not acquire its lock before the thread that
	  created it signals it to perform an action. When this happens,
	  the thread will sleep until it hits a timeout, and then get
	  destroyed. So, the action never gets performed and in some cases,
	  means a frame doesn't get transmitted and never gets freed since
	  the scheduler never gets a chance to reschedule transmission.
	  Another less severe race condition is in the handling of a
	  timeout for a dynamic thread. It was possible for it to be
	  acquired to perform at action at the same time that it hit a
	  timeout. When this occurs, whatever action it was acquired for
	  would never get performed. (patch contributed by Mihai and
	  SteveK) (closes issue #10289) (closes issue #10248) (closes issue
	  #10232) (possibly related to issue #10359) ........

2007-08-01 22:19 +0000 [r77888]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 77886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77886 | tilghman | 2007-08-01 17:14:47 -0500 (Wed, 01 Aug 2007)
	  | 2 lines Voicemail with ODBC_STORAGE defined does not compile
	  cleanly (missing def) ........

2007-08-01 21:12 +0000 [r77879-77884]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 77883 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77883 | qwell | 2007-08-01 16:08:42 -0500 (Wed, 01 Aug
	  2007) | 7 lines Fix an issue that caused one-way audio on some
	  newer devices (specifically the 7921), due to sending packets in
	  the wrong order during hangup. Also make sure we clear
	  tones/messages on the correct line/instance. Issue 10291, patch
	  by DEA, tested by sbisker and myself. ........

	* apps/app_queue.c, doc/tex/queuelog.tex: Add the Ring time in the
	  CONNECT on the queue_log and on the Manager event AgentConnect
	  Closes issue #10349, patch by eliel

2007-08-01 19:37 +0000 [r77864-77878]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, configure, configure.ac, main/asterisk.c: Instead of
	  adding the SOLARIS check to each HAVE_SYSINFO check let's just
	  make the sysinfo autoconf logic a bit pickier about what it
	  considers a usable sysinfo.

	* main/pbx.c, main/asterisk.c: Solaris does not have a sysinfo like
	  we know of on Linux.

	* configure, configure.ac: Don't look for /dev/urandom when cross
	  compiling. Just assume it is not available.

	* /, utils/smsq.c, channels/chan_iax2.c,
	  include/asterisk/threadstorage.h, channels/chan_mgcp.c,
	  apps/app_voicemail.c: Merged revisions 77869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77869 | file | 2007-08-01 14:56:59 -0300 (Wed, 01 Aug 2007) | 2
	  lines Add some fixes for building on Solaris. ........

	* /, main/utils.c: Merged revisions 77867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77867 | file | 2007-08-01 14:52:11 -0300 (Wed, 01 Aug 2007) | 2
	  lines Whoops, I meant R_5 not R5. ........

	* /, configure, configure.ac: Merged revisions 77865 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77865 | file | 2007-08-01 14:42:52 -0300 (Wed, 01 Aug
	  2007) | 2 lines And for my last trick... make sure that if
	  gethostbyname_r is exported by a library that it is used.
	  ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/utils.c: Merged revisions 77863 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77863 | file | 2007-08-01 14:22:35 -0300 (Wed, 01 Aug 2007) | 2
	  lines Extend autoconf logic to determine which version of
	  gethostbyname_r is on the system. ........

2007-08-01 15:39 +0000 [r77858]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c, main/autoservice.c, main/pbx.c,
	  apps/app_osplookup.c, channels/chan_local.c,
	  channels/chan_vpb.cc, apps/app_meetme.c, res/res_features.c,
	  apps/app_zapras.c, apps/app_macro.c, pbx/pbx_dundi.c,
	  apps/app_queue.c: Convert code that checks the _softhangup member
	  of ast_channel directory to use the ast_check_hangup() funciton.
	  This function takes scheduled hangups into account. (closes issue
	  #10230, patch by Juggie)

2007-08-01 15:28 +0000 [r77857]  Joshua Colp <jcolp@digium.com>

	* main/cli.c: Convert CLI helpers list to rwlist.

2007-08-01 14:09 +0000 [r77853-77855]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 77854 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77854 | mmichelson | 2007-08-01 09:08:57 -0500 (Wed, 01 Aug
	  2007) | 8 lines Fixes an issue I introduced to queues wherein a
	  queue with joinempty=yes would kick people out of the queue
	  because of erroneously thinking the 'n' option was in use.
	  (closes issue #10320, reported by jfitzgibbon, patched by me,
	  tested by blitzrage and me) Thank you blitzrage for all the
	  testing you've done lately with queues! It's much appreciated!
	  ........

	* /, apps/app_queue.c: Merged revisions 77852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77852 | mmichelson | 2007-08-01 08:59:59 -0500 (Wed, 01 Aug
	  2007) | 7 lines If a queue uses dynamic realtime members, then
	  the member list should be updated after each attempt to call the
	  queue. This fixes an issue where if a caller calls into a queue
	  where no one is logged in, they would wait forever even if a
	  member logged in at some point. (closes issue #10346, reported by
	  and tested by blitzrage, patched by me) ........

2007-08-01 04:36 +0000 [r77851]  Tilghman Lesher <tlesher@digium.com>

	* res/res_agi.c: Twould help if we actually defined ->mod before
	  comparing against it (reported and fixed by Juggie via IRC).

2007-07-31 21:33 +0000 [r77847]  Steve Murphy <murf@digium.com>

	* /, contrib/scripts/ast_grab_core: Merged revisions 77844 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r77844 | murf | 2007-07-31 14:59:10 -0600 (Tue,
	  31 Jul 2007) | 9 lines Merged revisions 77842 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r77842 | murf | 2007-07-31 13:19:35 -0600 (Tue, 31 Jul 2007) | 1
	  line This probably isn't super-general, but it's a first stab at
	  using kill -11 to generate a core file instead of gcore. ........
	  ................

2007-07-31 18:50 +0000 [r77834-77838]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_lock.c, CHANGES: Add some documentation detailing an
	  aspect of dialplan functions, as requested by Russell

	* funcs/func_lock.c (added), UPGRADE.txt: Add func_lock, which
	  creates dialplan mutexes, and note that the Macro apps are now
	  deprecated. (Closes issue #10264)

2007-07-31 16:21 +0000 [r77833]  Joshua Colp <jcolp@digium.com>

	* /, include/asterisk/speech.h, res/res_speech.c: Merged revisions
	  77831 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77831 | file | 2007-07-31 13:17:09 -0300 (Tue, 31 Jul 2007) | 2
	  lines Add a flag to the speech API that allows an engine to set
	  whether it received results or not. ........

2007-07-31 15:59 +0000 [r77829]  Steve Murphy <murf@digium.com>

	* channels/chan_sip.c: thanks to Russel, for pointing out that the
	  dialoglist_lock/unlock routines also need to be macros if
	  DETECT_DEADLOCKS is set

2007-07-31 15:54 +0000 [r77828]  Kevin P. Fleming <kpfleming@digium.com>

	* build_tools/cflags.xml, /: Merged revisions 77827 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77827 | kpfleming | 2007-07-31 10:53:42 -0500 (Tue, 31
	  Jul 2007) | 2 lines DETECT_DEADLOCKS can't be enabled without
	  DEBUG_THREADS or it does nothing ........

2007-07-31 15:22 +0000 [r77825]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 77824 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77824 | mmichelson | 2007-07-31 10:21:22 -0500 (Tue, 31 Jul
	  2007) | 6 lines This patch makes Asterisk send 100 Trying
	  provisional responses upon receipt of re-invites. This makes it
	  so that if there are two or more Asterisk servers between
	  endpoints, the Asterisk servers will not keep retransmitting the
	  re-invites. (closes issue #10274, reported by cstadlmann, patched
	  by me with approval from file) ........

2007-07-31 15:01 +0000 [r77819-77821]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: there is no use in having functions that
	  have no code in them, and hide the locking info when
	  DEBUG_THREADS is enabled... i could have fixed this to be
	  dependent on DEBUG_THREADS, but it would be just as easy for
	  someone to add their test/debugging code to the macros as it
	  would have been to the functions

	* channels/chan_sip.c: use a different method for overriding the
	  send_digit_begin pointer, as the old one fails to compile on my
	  64-bit system with gcc-4.1 and --enable-dev-mode turned on

	* apps/app_senddtmf.c: umm... let's build with --enable-dev-mode,
	  mmkay?

2007-07-31 03:32 +0000 [r77810]  Steve Murphy <murf@digium.com>

	* channels/chan_sip.c: Discovered in experiments on core files: if
	  you wrap the lock and unlock calls with sip_pvt_lock and
	  sip_pvt_unlock, you lose the tracing info you would normally get
	  via DETECT_DEADLOCKS; so I turn these two functions into macros
	  when DETECT_DEADLOCKS is called. This way, you get meaningful
	  stuff in the file and func slots in the lock_info struct.

2007-07-31 01:10 +0000 [r77808]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_meetme.c, apps/app_dictate.c, apps/app_record.c,
	  apps/app_authenticate.c, apps/app_sayunixtime.c,
	  apps/app_userevent.c, apps/app_chanisavail.c, apps/app_image.c,
	  apps/app_followme.c, apps/app_controlplayback.c,
	  funcs/func_enum.c, funcs/func_odbc.c, apps/app_minivm.c,
	  res/res_agi.c, apps/app_amd.c, apps/app_url.c,
	  apps/app_directory.c, apps/app_rpt.c, apps/app_parkandannounce.c,
	  apps/app_read.c, funcs/func_timeout.c, apps/app_page.c,
	  apps/app_festival.c, apps/app_privacy.c,
	  apps/app_waitforsilence.c, apps/app_disa.c, apps/app_transfer.c,
	  apps/app_talkdetect.c, apps/app_queue.c, apps/app_playback.c,
	  res/res_monitor.c, apps/app_speech_utils.c, funcs/func_curl.c,
	  funcs/func_channel.c, funcs/func_cdr.c, apps/app_sendtext.c,
	  apps/app_macro.c, apps/app_sms.c, apps/app_senddtmf.c,
	  apps/app_mixmonitor.c, apps/app_chanspy.c, apps/app_stack.c,
	  apps/app_voicemail.c: Mostly cleanup of documentation to
	  substitute the pipe with the comma, but a few other formatting
	  cleanups, too.

2007-07-30 20:42 +0000 [r77801]  Joshua Colp <jcolp@digium.com>

	* main/dial.c, include/asterisk/dial.h: Add support for call
	  forwarding and timeouts to the dialing API.

2007-07-30 20:36 +0000 [r77797-77800]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Change another unnecessary use of the
	  increment operator to explicitly set the var to 1

	* channels/chan_iax2.c: Explicitly set a variable to 1 instead of
	  using the increment operator.

	* /, channels/chan_iax2.c: Merged revisions 77794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77794 | russell | 2007-07-30 15:16:43 -0500 (Mon, 30 Jul 2007) |
	  8 lines Fix an issue that could potentially cause corruption of
	  the global iax frame queue. In the network_thread() loop, it
	  traverses the list using the AST_LIST_TRAVERSE_SAFE macro.
	  However, to remove an element of the list within this loop, it
	  used AST_LIST_REMOVE, instead of AST_LIST_REMOVE_CURRENT, which I
	  believe could leave some of the internal variables of the SAFE
	  macro invalid. Mihai says that he already made this change in his
	  local copy and it didn't help his VNAK storm issues, but I still
	  think it's wrong. :) ........

2007-07-30 20:19 +0000 [r77796]  Jason Parker <jparker@digium.com>

	* /, main/say.c: Merged revisions 77795 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10083) ........ r77795 | qwell | 2007-07-30 15:17:08 -0500
	  (Mon, 30 Jul 2007) | 6 lines Applications like SayAlpha() should
	  not hang up the channel if you request an "unknown" character
	  such as a comma. Instead, skip the character and move on. Issue
	  10083, initial patch by jsmith, modified by me. ........

2007-07-30 19:42 +0000 [r77793]  Luigi Rizzo <rizzo@icir.org>

	* main/channel.c: print formats as 0x%x instead of %d in a warning
	  message. Being bitmasks, it is a lot easier to read this way.

2007-07-30 19:39 +0000 [r77789-77792]  Russell Bryant <russell@digium.com>

	* res/res_agi.c: Fix the return value of ast_agi_fdprintf() to
	  include the result from ast_carefulwrite()

	* res/res_agi.c: Improve ast_agi_fdprintf() by using the ast_str()
	  API. * Use a thread local ast_str for building the string that
	  will be written out to the console for debug, and to the FD for
	  the AGI itself, instead of allocating a buffer on the heap every
	  time the function is called. * Use the information contained
	  within the ast_str to determine how many bytes need to be written
	  instead of calling strlen().

	* main/manager.c: Remove an XXX comment noting that it would be
	  nice for a declaration to be inside of a function. (Yes, it
	  would!) Replace it with a note that explains why it can't be done
	  using the way that the AST_THREADSTORAGE macro is currently
	  defined.

	* include/asterisk/agi.h, /, res/res_agi.c: Merged revisions 77788
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77788 | russell | 2007-07-30 14:13:31 -0500 (Mon, 30 Jul 2007) |
	  10 lines (closes issue #10279) Reported by: seanbright Patches:
	  res_agi.carefulwrite.1.4.07252007.patch uploaded by seanbright
	  (license 71) res_agi.carefulwrite.trunk.07252007.patch uploaded
	  by seanbright (license 71) Allow the "agi_network: yes" line to
	  be printed out in the AGI debug output. Also, allow partial
	  writes to be handled when writing out this line just like it is
	  for all of the others. ........

2007-07-30 19:11 +0000 [r77787]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/agi.h, res/res_agi.c: Cleanup of res_agi,
	  ensuring thread safety (closes issue #10288)

2007-07-30 18:56 +0000 [r77786]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 77785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77785 | russell | 2007-07-30 13:55:15 -0500 (Mon, 30 Jul 2007) |
	  3 lines file and I both committed changes for issue #10301.
	  Remove a duplicated assignment to restore the original value of
	  the previous channel. ........

2007-07-30 18:45 +0000 [r77784]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 77783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r77783 | tilghman | 2007-07-30 13:43:55 -0500
	  (Mon, 30 Jul 2007) | 10 lines Merged revisions 77782 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r77782 | tilghman | 2007-07-30 13:40:54 -0500 (Mon, 30
	  Jul 2007) | 2 lines Revert change in revision 71656, even though
	  it fixed a bug, because many people were depending upon the
	  (broken) behavior. ........ ................

2007-07-30 17:31 +0000 [r77781]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 77780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77780 | russell | 2007-07-30 12:29:43 -0500 (Mon, 30 Jul 2007) |
	  16 lines (closes issue #10301) Reported by: fnordian Patches:
	  asterisk-1.4.9-channel.c.patch uploaded by fnordian (license 110)
	  Additional changes by me Fix some problems in
	  channel_find_locked() which can cause an infinite loop. The
	  reference to the previous channel is set to NULL in some cases.
	  These changes ensure that the reference to the previous channel
	  gets restored before needing it again. I'm not convinced that the
	  code that is setting it to NULL is really the right thing to do.
	  However, I am making these changes to fix the obvious problem and
	  just leaving an XXX comment that it needs a better explanation
	  that what is there now. ........

2007-07-30 17:12 +0000 [r77772-77779]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 77778 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77778 | file | 2007-07-30 14:11:02 -0300 (Mon, 30 Jul 2007) | 4
	  lines (closes issue #10327) Reported by: kkiely Instead of
	  directly mucking with the extension/context/priority of the
	  channel we are transferring when it has a PBX simply call
	  ast_async_goto on it. This will ensure that the channel gets
	  handled properly and sent to the right place. ........

	* apps/app_followme.c: Minor clean up of app_followme.

	* main/channel.c, /: Merged revisions 77771 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77771 | file | 2007-07-30 12:47:52 -0300 (Mon, 30 Jul 2007) | 6
	  lines (closes issue #10301) Reported by: fnordian Patches:
	  asterisk-1.4.9-channel.c.patch uploaded by fnordian (license 110)
	  Restore previous behavior where if we failed to lock the channel
	  we wanted we would return to exactly the same point as if we had
	  just reentered the function. ........

2007-07-30 15:22 +0000 [r77770]  Russell Bryant <russell@digium.com>

	* cdr/cdr_adaptive_odbc.c: Resolve some compiler warnings so that I
	  can build under dev mode

2007-07-30 14:53 +0000 [r77769]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_macro.c: Merged revisions 77768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r77768 | file | 2007-07-30 11:51:44 -0300 (Mon,
	  30 Jul 2007) | 12 lines Merged revisions 77767 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r77767 | file | 2007-07-30 11:50:02 -0300 (Mon, 30 Jul 2007) | 4
	  lines (closes issue #10334) Reported by: ramonpeek Pass through
	  the return value from macro_exec through the MacroIf application.
	  ........ ................

2007-07-30 10:55 +0000 [r77616-77766]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: minor code rearrangements: + place the link
	  field at the beginning of struct sip_pvt, and not somewhere in
	  the middle; + in __sip_reliable_xmit, remove a duplicate
	  assignment, and put the statements in a more logical order (i.e.
	  first copy the payload and associated info, then copy arguments
	  from the caller, then finish initializing the headers...) nothing
	  to backport.

	* channels/chan_sip.c: rename handle_request() to
	  handle_incoming(), as the former was misleading - the function
	  deals with all incoming packets, be them requests or responses.

	* channels/chan_sip.c: move some dialog-only flags to proper
	  variables, namely SIP_NOVIDEO, SIP_DIALOG_ANSWEREDELSEWHERE,
	  SIP_PAGE2_NOTEXT, SIP_PAGE2_OUTGOING_CALL These are seldom used
	  so the diff is relatively small. Note that 'OUTGOING_CALL' is
	  dangerously similar to another dialog flag, 'SIP_OUTGOING', so
	  the description will need to clarify the different meaning of the
	  two. Also note that the description of NOTEXT is a bit unclear -
	  does it mean we don't support it, or 'not requested or not
	  supported' ? On passing fix a comment referring to video instead
	  of text. Finally, mark with XXX a possibly misleading debugging
	  message. (maybe the latter is worth backporting).

	* channels/chan_sip.c: use a function, cli_yesno(), to produce the
	  output Yes or No for CLI lines. This helps maintaining
	  consistency on output, slightly improves readability, and maybe
	  one day will make it easier to translate the output in other
	  languages (though i have a hard time believing that a CLI user
	  who needs 'yes' and 'no' to be translated can actually figure out
	  what he/she is doing!)

	* channels/chan_sip.c: move the two remaining peer flags to proper
	  variables.

	* channels/chan_sip.c: move RT_FROMCONTACT to a proper sip_peer
	  field.

	* channels/chan_sip.c: Move some global 'flags' to individual
	  variables. Start putting these variables in a single struct
	  (called 'sip_cfg' for the time being, but it could as well be
	  'global' or some other name) so it is easy, when reading the
	  code, to figure out what they are for. The downside of using
	  struct fields instead of individual global variables is that the
	  compiler cannot tell if there are unused fields. But the
	  advantage of not cluttering the namespace and manilpulating all
	  these variables at once certainly overcome the disadvantagess.
	  Nothing to backport, again.

	* channels/chan_sip.c: minor simplification of a conditional
	  statement

	* channels/chan_sip.c: build the version of sip_tech with no
	  send_digit_begin at load time instead of duplicating the
	  initializer. This should remove the risk of forgetting fields in
	  the initializer.

	* channels/chan_sip.c: remove bit position from description of
	  SIP_* flags. use AST_FORMAT_AUDIO_MASK instead of playing with
	  AST_FORMAT_MAX_AUDIO to determine audio formats. There is a
	  dubious use of AST_FORMAT_MAX_AUDIO in sip_request_call() which
	  surely needs fixing, namely: /* mask request with some set of
	  allowed formats. * XXX this needs to be fixed. * The original
	  code uses AST_FORMAT_AUDIO_MASK, but it is * unclear what to use
	  here. We have global_capabilities, which is * configured from
	  sip.conf, and sip_tech.capabilities, which is * hardwired to all
	  audio formats. */ The latter is possibly something to backport
	  when fixed.

	* channels/chan_sip.c: back on cleaning up the usage of flags. Move
	  together flags used in the same way (e.g. dialog only,
	  dialog-peer, ...) so it will become easier to deal with them in a
	  more systematic way. This is being done in stages so it will be
	  easier to detect breakage, if any should occur.

	* channels/chan_sip.c: more documentation on internal
	  representation of incoming SIP messages. Remove definitions for
	  now-unused flags, and add references to print routines for other
	  flags.

	* channels/chan_sip.c: make register_unref() return NULL so it is
	  easy to cleanup the original pointer while calling the function.
	  on passing add some comments on one of the places where it is
	  used, and explain why it is safe there. again, a no-op for
	  practical purposes.

	* channels/chan_sip.c: add some documentation to auto_congest(),
	  and some dialog_ref/unref (they are a no-op at the moment). Also
	  clean a pointer after freeing memory to avoid dangling
	  references, and write a for() loop in canonical form. In
	  practice, everything in this commit is a no-op.

	* channels/chan_sip.c: more dialog_ref()/dialog_unref() calls

	* channels/chan_sip.c: more dialog_ref()/dialog_unref() calls

	* channels/chan_sip.c: start introducing hooks for reference counts
	  on dialog descriptors. This commit is, for all practical
	  purposes, a no-op, as it only introduces the dialog_ref() and
	  dialog_unref() methods, and uses them in a few places (not all
	  the places where they would be needed). The goal is to start
	  annotating the code with these calls, so the transition to a
	  proper container will be easier. Nothing to backport.

	* channels/chan_sip.c: remove an unused string

	* channels/chan_sip.c: simplify a conditional expression using S_OR

	* channels/chan_sip.c: make use of received= and rport= fields in
	  sip replies. In a nutshell, these fields are used to tell a sip
	  entity the address and port its request came from, and are
	  extremely useful in the presence of NATs, especially with
	  symmetric NATs where STUN is totally ineffective. This patch
	  stores the address and port in the 'ourip' field of the dialog
	  descriptor, so they can be reused in subsequent transactions. As
	  it is, it works well for things like REGISTER requiring
	  authentication, because the second REGISTER request (with auth
	  credentials) will carry the correct address. Maybe it can also be
	  useful, in case of an address change, to do one or both of the
	  following: + propagate the new address to the parent user/peer
	  descriptor so that new dialogs will use the correct address from
	  the beginning. This is trivial to implement, I am just waiting
	  for feedback on this. + re-issue a request in case of an address
	  change. This a lot less trivial, maybe unnecessary, and probably
	  covered by the previous item. I would seriously consider this
	  patch for addition to 1.4 and 1.2. The code is very little
	  intrusive, and it would solve in a correct way the nat traversal
	  problems for which externip/externaddr/stunaddr are only a
	  partial and expensive workaround.

2007-07-27 23:21 +0000 [r77572-77603]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Some ODBC drivers don't set the
	  CHAR_OCTET_LENGTH field correctly.

	* Makefile: Target asterisk.pdf stopped building when the build was
	  moved to the doc directory.

	* /, res/res_odbc.c: Merged revisions 77571 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77571 | tilghman | 2007-07-27 13:15:58 -0500 (Fri, 27 Jul 2007)
	  | 2 lines Missing newline ........

2007-07-27 17:05 +0000 [r77537-77541]  Joshua Colp <jcolp@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 77540 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77540 | file | 2007-07-27 14:04:08 -0300 (Fri, 27 Jul 2007) | 6
	  lines (closes issue #10310) Reported by: prashant_jois Patches:
	  cdr_pgsql.patch uploaded by prashant (license 114) Finish the
	  Postgresql connection after the log messages are printed so we
	  don't access invalid memory. ........

	* channels/chan_sip.c: Turn 4 lines of code into 1 line that does
	  the same thing.

	* /, channels/chan_sip.c: Merged revisions 77536 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77536 | file | 2007-07-27 13:27:16 -0300 (Fri, 27 Jul 2007) | 6
	  lines (closes issue #10323) Reported by: julianjm Patches:
	  chan_sip_device_state_hold_fix.v1.diff.txt uploaded by julianjm
	  (license 99) Clear ONHOLD flag when decrementing the onHold peer
	  count. If we did not do this the count may keep decreasing.
	  ........

2007-07-27 16:20 +0000 [r77534]  Tilghman Lesher <tlesher@digium.com>

	* pbx/pbx_config.c: 'dialplan save' shouldn't be converting '|'
	  back to ',' anymore.

2007-07-27 15:46 +0000 [r77520]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, pbx/pbx_ael.c: These fixes take care of two
	  problems: a complaint in asterisk-dev that goto's aren't working
	  in trunk, a side effect of the move to commas as arg seps in apps
	  and funcs; and a problem I spotted myself with dial's 'e' option,
	  where gotos were off by one, because I forgot to set the AUTOLOOP
	  flag in the peer channel.

2007-07-27 14:31 +0000 [r77491]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 77490 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77490 | mmichelson | 2007-07-27 09:30:43 -0500 (Fri, 27 Jul
	  2007) | 3 lines "re-invite" was misspelled ........

2007-07-26 23:20 +0000 [r77461]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 77460 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77460 | file | 2007-07-26 20:19:04 -0300 (Thu, 26 Jul 2007) | 4
	  lines (closes issue #10302) Reported by: litnialex If a DTMF end
	  frame comes from a channel without a begin and it is going to a
	  technology that only accepts end frames (aka INFO) then use the
	  minimum DTMF duration if one is not in the frame already.
	  ........

2007-07-26 22:17 +0000 [r77432]  Kevin P. Fleming <kpfleming@digium.com>

	* /, doc/tex/mp3.tex, sounds/Makefile: Merged revisions 77424,77429
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77424 | kpfleming | 2007-07-26 17:14:21 -0500 (Thu, 26 Jul 2007)
	  | 2 lines use new canonical name for download server ........
	  r77429 | kpfleming | 2007-07-26 17:16:42 -0500 (Thu, 26 Jul 2007)
	  | 2 lines change protocol for downloads as well ........

2007-07-26 21:24 +0000 [r77411]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 77410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77410 | russell | 2007-07-26 16:23:23 -0500 (Thu, 26 Jul 2007) |
	  10 lines AST_DEVMODE was defined in trunk, but not in 1.4. When
	  Asterisk is compiled under dev mode, AST_DEVMODE will get defined
	  in buildopts.h. Change 1.4 to define it in the same way that
	  trunk does. Also, revert the change that added this define in the
	  Makefile The advantage to doing it this way is that buildopts.h
	  gets installed when you install Asterisk. Then, when building any
	  out of tree modules, or building asterisk-addons, these modules
	  know which options the rest of Asterisk was built with. ........

2007-07-26 20:39 +0000 [r77381]  Mark Michelson <mmichelson@digium.com>

	* Makefile, /, main/logger.c: Merged revisions 77380 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77380 | mmichelson | 2007-07-26 15:35:17 -0500 (Thu, 26
	  Jul 2007) | 7 lines Fixes to get ast_backtrace working properly.
	  The AST_DEVMODE macro was never defined so the majority of
	  ast_backtrace never attempted compilation. The makefile now
	  defines AST_DEVMODE if configure was run with --enable-dev-mode.
	  Also, changes were made to acccomodate 64 bit systems in
	  ast_backtrace. Thanks to qwell, kpfleming, and Corydon76 for
	  their roles in allowing me to get this committed ........

2007-07-26 19:33 +0000 [r77349-77351]  Tilghman Lesher <tlesher@digium.com>

	* /, main/logger.c: Merged revisions 77350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77350 | tilghman | 2007-07-26 14:32:17 -0500 (Thu, 26 Jul 2007)
	  | 2 lines Missed one ........

	* /, main/logger.c: Merged revisions 77348 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77348 | tilghman | 2007-07-26 14:27:18 -0500 (Thu, 26 Jul 2007)
	  | 2 lines Oops, that builtin define should be all-lowercase.
	  ........

2007-07-26 18:31 +0000 [r77319]  Mark Michelson <mmichelson@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 77318 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77318 | mmichelson | 2007-07-26 13:30:29 -0500 (Thu, 26 Jul
	  2007) | 8 lines Two consecutive calls to PQfinish could occur,
	  meaning free gets called on the same variable twice. This patch
	  sets the connection to NULL after calls to PQfinish so that the
	  problem does not occur. Also in this patch, prashant_jois
	  informed me that it is safe to pass a null pointer to PQfinish,
	  so I have removed the check for conn's existence from
	  my_unload_module. (closes issue 10295, reported by junky, patched
	  by me with input from prashant_jois) ........

2007-07-26 15:49 +0000 [r77268-77299]  Russell Bryant <russell@digium.com>

	* main/udptl.c, res/res_features.c, main/say.c,
	  codecs/codec_adpcm.c, apps/app_alarmreceiver.c,
	  cdr/cdr_adaptive_odbc.c, channels/chan_iax2.c,
	  main/indications.c, main/config.c, main/loader.c, res/res_smdi.c,
	  pbx/pbx_spool.c, channels/chan_skinny.c, apps/app_zapscan.c,
	  apps/app_zapras.c, pbx/pbx_realtime.c, channels/chan_alsa.c,
	  apps/app_amd.c, cdr/cdr_odbc.c, res/res_speech.c,
	  apps/app_dial.c, codecs/codec_g722.c, funcs/func_timeout.c,
	  codecs/codec_speex.c, channels/chan_agent.c, codecs/codec_g726.c,
	  channels/iax2-provision.c, apps/app_db.c, channels/chan_misdn.c,
	  main/srv.c, apps/app_waitforring.c, apps/app_macro.c,
	  apps/app_chanspy.c, apps/app_voicemail.c, channels/chan_vpb.cc,
	  apps/app_meetme.c, res/res_snmp.c, codecs/codec_gsm.c,
	  res/res_musiconhold.c, apps/app_followme.c, codecs/codec_zap.c,
	  res/res_jabber.c, main/channel.c, main/cdr.c,
	  channels/chan_phone.c, main/dial.c, res/res_config_odbc.c,
	  main/manager.c, funcs/func_odbc.c, res/res_agi.c, main/app.c,
	  main/image.c, apps/app_rpt.c, apps/app_parkandannounce.c,
	  channels/chan_mgcp.c, apps/app_adsiprog.c, apps/app_while.c,
	  codecs/codec_lpc10.c, res/res_config_pgsql.c, main/dnsmgr.c,
	  channels/chan_zap.c, apps/app_read.c, channels/chan_sip.c,
	  main/translate.c, codecs/codec_alaw.c, apps/app_waitforsilence.c,
	  res/res_crypto.c, apps/app_queue.c, apps/app_getcpeid.c,
	  channels/chan_oss.c, main/rtp.c, apps/app_flash.c,
	  main/abstract_jb.c, main/file.c, channels/chan_h323.c,
	  codecs/codec_ulaw.c, pbx/pbx_dundi.c, apps/app_sms.c,
	  pbx/pbx_gtkconsole.c: Do a massive conversion for using the
	  ast_verb() macro (closes issue #10277, patches by mvanbaak)
	  Basically, this changes ... if (option_verbose > 2)
	  ast_verbose(VERBOSE_PREFIX_3, "Something\n"); to ... ast_verb(3,
	  "Something\n");

	* doc/tex/odbcstorage.tex, doc/tex/hardware.tex, doc/tex/mp3.tex,
	  doc/tex/channelvariables.tex, doc/tex/qos.tex,
	  doc/tex/queues-with-callback-members.tex, doc/tex/realtime.tex,
	  doc/tex/dundi.tex, doc/tex/enum.tex, doc/tex/asterisk-conf.tex,
	  doc/tex/manager.tex, doc/tex/misdn.tex, doc/tex/imapstorage.tex,
	  doc/tex/privacy.tex, LICENSE, doc/tex/app-sms.tex,
	  doc/tex/cdrdriver.tex, doc/tex/asterisk.tex: Merge a big batch of
	  documentation fixes for escaping, marking URLs, places where
	  verbatim text went off the end of the page on the PDF, and
	  various other improvements (closes issue #10307, IgorG)

	* channels/chan_sip.c: Revert some changes to call abs() on the
	  result of ast_random(). * random() is defined to return a
	  positive result, and now ast_random() will always do so as well

	* main/utils.c: Ensure that the read from /dev/urandom returns a
	  positive result (closes issue #10308, reported by yehavi, patched
	  by me)

2007-07-26 13:19 +0000 [r77267]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_sip.c: Things expecting a positive result from
	  ast_random() should not be surprised (closes #10308)

2007-07-26 13:10 +0000 [r77266]  Russell Bryant <russell@digium.com>

	* main/rtp.c: Add a link to the list of assigned RTP payload types
	  for convenience.

2007-07-26 05:35 +0000 [r77233-77248]  Luigi Rizzo <rizzo@icir.org>

	* main/rtp.c: document how the RTP marker bit is passed for video
	  frames, and why this does not overwrite useful information.

	* main/rtp.c: add an entry for h263plus in an empty slot of the rtp
	  types.

2007-07-26 01:33 +0000 [r77217-77218]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: The upgrade of application argument separators
	  to comma has an effect on AEL; I commented out the code that
	  substitutes commas with vertbars, so we can get apps to parse
	  their args correctly.

	* apps/app_meetme.c: Merged revisions 77191 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77191 | murf | 2007-07-25 16:39:27 -0600 (Wed, 25 Jul 2007) | 1
	  line This fix solves problem with intense squelch noise when
	  someone joins conf in bug 9430; We repro'd the problem with
	  meetme opts of 'CciMo'; Josh Colp supplied this patch, and I'm
	  applying it. It looks like playing the recorded username will
	  louse up the next thing played into the channel. Josh rearranged
	  the code so as to start things over before playing data directly
	  into the conference. ........

2007-07-25 22:18 +0000 [r77182]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 77176 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77176 | file | 2007-07-25 19:16:10 -0300 (Wed, 25 Jul
	  2007) | 4 lines (closes issue #10303) Reported by: jtodd Add
	  SPEECH_DTMF_TERMINATOR variable so the user can specify the digit
	  to terminate a DTMF string with. If none is specified then no
	  terminator will be used. ........

2007-07-25 21:58 +0000 [r77156]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_iax2.c: silence a warning in ast-devmode on a
	  potentially uninitialized var. At first sight (but the function
	  is very large so i am not 100% sure) the code seems correct, so
	  maybe my compiler is just not smart enough to figure that out at
	  the optimization level it has. Not worthwhile merging to 1.4 i
	  believe.

2007-07-25 21:53 +0000 [r77155]  Mark Michelson <mmichelson@digium.com>

	* main/channel.c, /: Merged revisions 77154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77154 | mmichelson | 2007-07-25 16:52:47 -0500 (Wed, 25 Jul
	  2007) | 3 lines chan->emulate_dtmf_duration is an unsigned int,
	  not a signed int, so use %u instead of %d in the format string
	  ........

2007-07-25 17:16 +0000 [r77072]  Joshua Colp <jcolp@digium.com>

	* /, configure, acinclude.m4: Merged revisions 77071 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r77071 | file | 2007-07-25 14:14:14 -0300 (Wed, 25 Jul
	  2007) | 2 lines Fix autoconf logic for finding OpenH323 when it
	  is not in the first place searched (/usr/share/openh323).
	  ........

2007-07-25 14:13 +0000 [r77023-77054]  Luigi Rizzo <rizzo@icir.org>

	* main/translate.c: change the debug level to 3 for an exceedingly
	  annoying message (3-deep nested loop)

	* main/rtp.c: Merged revisions 77022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r77022 | rizzo | 2007-07-25 11:34:01 +0200 (Wed, 25 Jul 2007) | 3
	  lines set the sequence number in a frame for all frame types
	  ........

2007-07-25 01:06 +0000 [r76985]  Russell Bryant <russell@digium.com>

	* CHANGES: remove a couple of entries that got duplicated and snuck
	  into the SIP section. Also, align the NAT/STUN entry with the
	  others.

2007-07-25 00:34 +0000 [r76984]  Steve Murphy <murf@digium.com>

	* channels/chan_zap.c, /: Merged revisions 76983 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r76983 | murf | 2007-07-24 18:18:32 -0600 (Tue,
	  24 Jul 2007) | 9 lines Merged revisions 76978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r76978 | murf | 2007-07-24 18:07:24 -0600 (Tue, 24 Jul 2007) | 1
	  line this fixes bug 10293, where the error message because
	  defaultzone or loadzone was not defined was confusing ........
	  ................

2007-07-24 22:13 +0000 [r76874-76940]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 76937 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r76937 | tilghman | 2007-07-24 17:12:43 -0500
	  (Tue, 24 Jul 2007) | 10 lines Merged revisions 76934 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r76934 | tilghman | 2007-07-24 17:11:33 -0500 (Tue, 24
	  Jul 2007) | 2 lines Oops, res contains the error code, not errno.
	  I was wondering why a mutex was reporting "No such file or
	  directory"... ........ ................

	* build_tools/cflags.xml: Add the flag to trigger an intentional
	  crash on mutex errors

	* doc/tex/manager.tex, doc/tex/misdn.tex, doc/tex/jitterbuffer.tex,
	  doc/tex/odbcstorage.tex, doc/tex/hardware.tex,
	  doc/tex/privacy.tex, doc/tex/billing.tex, doc/tex/ael.tex,
	  doc/tex/channelvariables.tex, doc/tex/qos.tex,
	  doc/tex/realtime.tex, doc/tex/asterisk.tex, doc/tex/queuelog.tex:
	  Fix escaping and some of the formattting (closes issue #10285)

2007-07-24 17:43 +0000 [r76841-76852]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c: Revert trivial whitespace change (for
	  testing)

	* channels/chan_skinny.c: Trivial whitespace change to test
	  comitting...

2007-07-24 17:05 +0000 [r76807]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 76803 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76803 | qwell | 2007-07-24 11:32:20 -0500 (Tue, 24 Jul 2007) | 3
	  lines Don't create the Asterisk channel until we are starting the
	  PBX on it. (ASA-2007-018) ........

2007-07-24 16:42 +0000 [r76804]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 76801 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76801 | mmichelson | 2007-07-24 11:26:58 -0500 (Tue, 24 Jul
	  2007) | 13 lines Added a membercount variable to call_queue
	  struct which keeps track of the number of logged in members in a
	  particular queue. This makes it so that the 'n' option for
	  Queue() can act properly depending on which strategy is used. If
	  the strategy is roundrobin, rrmemory, or ringall, we want to ring
	  each phone once before moving on in the dialplan. However, if any
	  other strategy is used, we will only ring one phone since it
	  cannot be guaranteed that a different phone will ring on
	  subsequent attempts to ring a phone. As a side effect of this,
	  the QUEUE_MEMBER_COUNT dialplan function now just reads the
	  membercount variable instead of traversing through the member
	  list to figure out how many members there are. Special thanks to
	  blitzrage for helping to test this out. (closes issue #10127,
	  reported by bcnit, patched by me, tested by blitzrage) ........

2007-07-24 16:09 +0000 [r76791]  Joshua Colp <jcolp@digium.com>

	* sounds/Makefile: Don't download/install the sound packages if
	  already installed.

2007-07-24 15:35 +0000 [r76785]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c: The chan_skinny Dial() syntax was funky.
	  You had to do Dial(Skinny/line@device) This allows you to just
	  Dial(Skinny/line), as long as line isn't ambiguous. Note that
	  this does not remove or deprecate the "old" syntax, as it's still
	  quite useful - even moreso if shared lines get implemented.
	  Initial patch by me, with some changes and suggestions from
	  wedhorn. (closes issue #10263)

2007-07-24 14:49 +0000 [r76755-76770]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: two small fixes when using stun (reported by
	  Marta Carbone): + externexpire was not initialized properly; +
	  stunaddr was not handled properly on a sip reload

	* CHANGES: add documentation on nat/stun support in chan_sip

2007-07-24 02:59 +0000 [r76710-76712]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: Move manager users list over to an rwlist.

	* res/res_agi.c: You need to put static in front of a static RWLIST
	  declaration to make it really static... and don't call
	  AST_RWLIST_HEAD_DESTROY on a statically declared list.

	* main/manager.c: Don't bother calling AST_RWLIST_EMPTY on a list
	  before AST_RWLIST_TRAVERSE, it's just a double check.

2007-07-23 22:41 +0000 [r76707-76709]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 76708 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76708 | tilghman | 2007-07-23 17:38:06 -0500 (Mon, 23 Jul 2007)
	  | 4 lines It was our stated intention for 1.4 that files created
	  in app_voicemail should depend upon the umask. Unfortunately,
	  mkstemp() creates files with mode 0600, regardless of the umask.
	  This corrects that deficiency. ........

	* include/asterisk/agi.h, res/res_agi.c: Enhance AGI with several
	  fixes: - Makes the structures handling external AGI commands a
	  bit more thread-safe - Makes AGI transparently work with both
	  live and hungup channels - DeadAGI is hence no longer necessary
	  and is deprecated - CLI bug fixes - Commands will refuse to run
	  if the channel is dead and the command is nonsensical for dead
	  channels.

2007-07-23 21:42 +0000 [r76706]  Joshua Colp <jcolp@digium.com>

	* res/res_crypto.c: Clean up res_crypto module. It now uses an
	  rwlist to keep the keys and it should also be thread safe now.

2007-07-23 20:27 +0000 [r76703-76704]  Tilghman Lesher <tlesher@digium.com>

	* res/res_agi.c, UPGRADE.txt: Missed one conversion to comma
	  delimiter (thanks, Juggie) and add documentation on the change to
	  the Local channel name.

	* funcs/func_rand.c, apps/app_readfile.c, channels/chan_local.c,
	  apps/app_record.c, funcs/func_env.c, funcs/func_strings.c,
	  funcs/func_vmcount.c, include/asterisk/aes.h, funcs/func_logic.c,
	  apps/app_exec.c, apps/app_controlplayback.c, funcs/func_odbc.c,
	  apps/app_skel.c, apps/app_zapras.c, apps/app_url.c,
	  apps/app_externalivr.c, apps/app_parkandannounce.c,
	  apps/app_dial.c, main/pbx.c, apps/app_page.c,
	  apps/app_softhangup.c, UPGRADE.txt, funcs/func_cut.c,
	  apps/app_talkdetect.c, apps/app_queue.c, funcs/func_realtime.c,
	  include/asterisk/app.h, apps/app_channelredirect.c,
	  apps/app_macro.c, pbx/pbx_config.c, apps/app_verbose.c,
	  apps/app_chanspy.c, funcs/func_callerid.c, apps/app_voicemail.c:
	  Merge the dialplan_aesthetics branch. Most of this patch simply
	  converts applications using old methods of parsing arguments to
	  using the standard macros. However, the big change is that the
	  really old way of specifying application and arguments separated
	  by a comma will no longer work (e.g. NoOp,foo|bar). Instead, the
	  way that has been recommended since long before 1.0 will become
	  the only method available (e.g. NoOp(foo,bar).

2007-07-23 19:00 +0000 [r76657]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 76656 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r76656 | qwell | 2007-07-23 13:59:28 -0500 (Mon, 23 Jul
	  2007) | 3 lines Fix some incorrect softkey labels in messages.
	  Don't try to play dialtone in some unimplemented features.
	  ........

2007-07-23 18:31 +0000 [r76655]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_agent.c: Merged revisions 76654 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r76654 | file | 2007-07-23 15:29:48 -0300 (Mon,
	  23 Jul 2007) | 12 lines Merged revisions 76653 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r76653 | file | 2007-07-23 15:28:13 -0300 (Mon, 23 Jul 2007) | 4
	  lines (closes issue #5866) Reported by: tyler Do not force
	  channel format changes when a generator is present. The generator
	  may have changed the formats itself and changing them back would
	  cause issues. ........ ................

2007-07-23 17:58 +0000 [r76621]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 76620 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10276) ........ r76620 | qwell | 2007-07-23 12:57:53 -0500
	  (Mon, 23 Jul 2007) | 4 lines Don't try to queue up hold/unhold
	  frames on a non-existent channel. Issue 10276. ........

2007-07-23 17:49 +0000 [r76619]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_morsecode.c: Merged revisions 76618 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76618 | file | 2007-07-23 14:48:51 -0300 (Mon, 23 Jul 2007) | 2
	  lines Allow app_morsecode to build on PPC Linux by putting the
	  value of the digit char in an int. ........

2007-07-23 14:45 +0000 [r76564]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: add two missing entries in the replica of
	  the sip_tech that does not use DTMF BEGIN frames. 1.4 seems
	  correct (it does not have the two fields). However, as this bug
	  shows, the current way of creating the sip_tech replica is too
	  error-prone, one can easily forget to update one of the two
	  entries. Perhaps it would be better to create sip_tech_info
	  expliclty at module load, by doing sip_tech_info = sip_tech;
	  sip_tech_info.send_digit_begin = NULL (in this case, this is
	  something applicable to 1.4 as well).

2007-07-23 14:38 +0000 [r76563]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 76561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r76561 | file | 2007-07-23 11:34:21 -0300 (Mon,
	  23 Jul 2007) | 14 lines Merged revisions 76560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r76560 | file | 2007-07-23 11:32:07 -0300 (Mon, 23 Jul 2007) | 6
	  lines (closes issue #10236) Reported by: homesick Patches:
	  rpid_1.4_75840.patch uploaded by homesick (license 91) Accept
	  Remote Party ID on guest calls. ........ ................

2007-07-23 14:37 +0000 [r76555-76562]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Mark str2dtmfmode() as currently unused to
	  resolve a compiler warning and allow building under dev mode

	* include/asterisk.h, res/res_snmp.c, channels/chan_sip.c,
	  res/res_crypto.c, res/res_convert.c, main/devicestate.c,
	  include/jitterbuf.h, res/res_config_sqlite.c, main/enum.c,
	  res/res_monitor.c, include/asterisk/file.h,
	  include/asterisk/doxyref.h, res/res_config_odbc.c,
	  res/res_indications.c, main/asterisk.c, res/res_clioriginate.c:
	  (closes issue #10271) Reported by: snuffy Patches:
	  doxygen-updates.diff uploaded by snuffy (license 35) Another big
	  batch of doxygen documentation updates

	* CHANGES: note the debug and verbose changes in CHANGES

	* include/asterisk/logger.h, main/pbx.c, main/logger.c,
	  include/asterisk/options.h, main/asterisk.c, main/cli.c: (closes
	  issue #10192) Reported by: bbryant Patches:
	  20070720__core_debug_by_file.patch uploaded by bbryant (license
	  36) (with some modifications by me) Tested by: russell, bbryant
	  This set of changes introduces the ability to set the core debug
	  or verbose levels on a per-file basis. Interestingly enough, in
	  1.4, you have the ability to set core debug for a single file,
	  but that functionality was accidentally lost in the conversion of
	  the CLI commands to the new format. This patch improves upon what
	  was in 1.4 by letting you set it for more than 1 file, and by
	  also supporting verbose. *** Janitor Project *** This patch also
	  introduces a new macro, ast_verb(), which is similar to
	  ast_debug(). Setting the per file verbose value only works for
	  messages that use this macro. Converting existing uses of
	  ast_verbose() can be done like: if (option_debug > 2)
	  ast_verbose(VERBOSE_PREFIX_3 "Something useful\n"); ...
	  ast_verb(3, "Something useful\n");

2007-07-23 14:18 +0000 [r76547]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: introduce two functions, map_x_s() and
	  map_s_x(), to map between integers and strings using a single
	  translation table, and use them in a few places instead of ad-hoc
	  routines that duplicate the table. On passing, note that
	  REFER_CONFIRMED is never used, and add a few comments. Nothing to
	  backport here.

2007-07-23 14:02 +0000 [r76524]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Remove an unused function to resolve a
	  compiler warning

2007-07-23 13:46 +0000 [r76523]  Joshua Colp <jcolp@digium.com>

	* channels/chan_skinny.c, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Use autoconf
	  logic to determine byte swapping macro presence. This should now
	  also use other macros if present.

2007-07-23 13:29 +0000 [r76521]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: move "sip prunte realtime ..." and "sip set
	  debug ... " to NEW_CLI style.

2007-07-23 13:24 +0000 [r76520]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 76519 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r76519 | file | 2007-07-23 10:23:09 -0300 (Mon, 23 Jul
	  2007) | 6 lines (closes issue #10268) Reported by: mvanbaak
	  Patches: chan_skinny_openbsd.diff uploaded by mvanbaak (license
	  7) Add another OS that has to use the Macros for byte ordering.
	  ........

2007-07-23 12:29 +0000 [r76486]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 76485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76485 | russell | 2007-07-23 07:25:01 -0500 (Mon, 23 Jul 2007) |
	  6 lines Use a signed integer for storing the number of bytes in
	  the packet read from the network. Using an unsigned value here
	  made it impossible to handle an error returned from recvfrom().
	  Furthermore, in the case that recvfrom() did return an error,
	  this would cause a crash due to a heap overflow. (closes issue
	  #10265, reported by and fix suggested by timrobbins) ........

2007-07-23 03:10 +0000 [r76313-76467]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: Add some documentation on the sipregistry
	  states and the handling of the sip_register structures. This
	  commit only changes comments and whitespace.

	* channels/chan_sip.c: add a bit of comments on internal functions.

	* channels/chan_sip.c: rewrite "sip show {channels|subscriptions}"
	  CLI handler using the new-style cli format. No functional
	  changes, nothing to backport.

	* channels/chan_sip.c: Make sip_destroy() return NULL so the caller
	  can do things like foo = sip_destroy(foo); and reduce the chance
	  of bugs due to dangling pointers. Also remove a duplicate
	  prototype for the function. nothing to backport.

	* channels/chan_sip.c: add two comment blocks, one on reusing
	  nonces, and one on the handling of an 'authpeer' local variable.

	* channels/chan_sip.c: comment and slightly restructure
	  handle_request() in the part that handles responses, so that
	  there is a common exit point. Mark two places where probably we
	  could return -1 instead of 0 to report an error to the caller.
	  (change triggered by investigations on how the 'SIP_PKT_IGNORE'
	  field was used). nothing to backport from this commit

	* channels/chan_sip.c: remove unused argument from
	  handle_invite_replaces(), and also leftover SIP_PKT_* stuff from
	  the previous commit.

	* channels/chan_sip.c: Cleanup of flags used in struct sip_request,
	  moving them to individual variables. Apart from SIP_PKT_IGNORE
	  which was used a zillion times, the other two are used seldom. On
	  passing: - move the arrays to the end of struct sip_request, so a
	  (small) buffer overflow is less likely to overwrite the other
	  fields; - note that the 'ignore' argument to
	  handle_invite_replaces() is not used and should be removed (will
	  be done in a separate commit). Nothing to backport in this
	  change.

	* channels/chan_sip.c: move two per-packet flags to proper
	  variables.

	* channels/chan_sip.c: minor clarification on the usage of SIP_*
	  flags. Also correct some items that were misclassified.

	* channels/chan_sip.c: document the way sipdebug works, and
	  implement it through variables and not flags. NOTE: The old
	  behaviour (preserved in this commit) is that if sipdebug is set
	  in the config file, it can only be disabled by reloading the
	  config. I am not sure if this is accidental or voluntary, but it
	  is really unconvenient and I think it should be handled in the
	  same way as other options i.e. consider requests from the config
	  file or the cli (or the command line) to be fully equivalent and
	  act on the same status variable.

	* channels/chan_sip.c: move the SIP_REALTIME flag to a field in the
	  user/peer structure.

	* channels/chan_sip.c: Add a note to document how the temporary
	  'pvt' should be initialized before using it. I am unclear on the
	  details right now so i hope someone can comment more. The obvious
	  (and lazy) approach would be to bzero() all of it (except for the
	  string pool), but isn't that too much work ? Feedback wanted
	  here...

2007-07-21 14:39 +0000 [r76296]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/utils.h, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, main/utils.c: Add
	  support for using /dev/urandom to get random numbers on systems
	  that support it.

2007-07-21 09:35 +0000 [r76229-76279]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: whoops... was setting needdestroy on the
	  wrong dialog. (spotted by a diff with my own branch)

	* channels/chan_sip.c: more two more flags to proper variables:
	  ALREADYGONE and NEEDDESTROY.

	* channels/chan_sip.c: use explicit variables for things that don't
	  need to be stored in ast_flags. First victim is 'SIP_NO_HISTORY'
	  replaced by a 'do_history' field in the sip_pvt structure.

	* channels/chan_sip.c: Use ast_str_append() instead of
	  ast_build_string() to construct the sdp messages. Overall the
	  code is slightly more readable (because the string is fully
	  described by a single pointer), and more efficient (because the
	  length is stored explicitly so you don't need to do strlen()). (I
	  have been using this code for almost a year now.) I wish we had
	  infix string operators to do this sort of things! Nothing to
	  backport from this change.

2007-07-21 01:25 +0000 [r76224]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: We have two 'technology' descriptors for a
	  SIP channel, so define and use a macro to determine whether we
	  are pointing to one of them, so when one goes away (or a new one
	  appears) we don't have to touch all the code.

2007-07-21 01:08 +0000 [r76222]  Steve Murphy <murf@digium.com>

	* apps/app_queue.c: One small documentation update made to
	  accompany 10154, the upgrading of the queue ringing to allow
	  periodic announcments

2007-07-21 01:01 +0000 [r76221]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c, configs/sip.conf.sample: Enhance NAT support
	  as discussed on the -dev list, i.e.: + extensive documentation
	  changes both in sip.conf.sample and in the source; + allow
	  "externip" and "externhost" to include a port number as well; +
	  allow "bindaddr" to have a port number (making bindport
	  unnecessary, even though it is still present for backward
	  compatibility); + introduce the new "stunaddr" parameter to
	  specify an STUN server to be used from the main SIP socket; +
	  extend the "sip show settings" output to show all the above.
	  Internally: + change related data structures from struct in_addr
	  to struct sockaddr_in to store the port numbers as well; +
	  reorganize ast_sip_ouraddrfor() (should also be renamed to
	  sip_ouraddrfor() because it is not a generic API, though it might
	  become so if called with a socket as an additional argument, in
	  which case it can be moved elsewhere). As mentioned in the
	  documentation, media sessions still do not use STUN so the port
	  numbers may still be incorrect when Asterisk is behind a NAT On
	  passing, some of the debugging messages printing media addresses
	  are probably using the wrong values, but this will be
	  checked/fixed in a subsequent commit if needed. Part of the
	  following chunk in the function that handles a "sip reload" is
	  probably needed on previous versions as well, to avoid leaking
	  the memory used for the "localaddr" list: @@ -17244,13 +17274,17
	  @@ /* Reset IP addresses */ memset(&bindaddr, 0,
	  sizeof(bindaddr)); + memset(&stunaddr, 0, sizeof(stunaddr)); +
	  memset(&internip, 0, sizeof(internip)); + /* Free memory for
	  local network address mask */ + ---> ast_free_ha(localaddr);
	  <----- memset(&localaddr, 0, sizeof(localaddr));
	  memset(&externip, 0, sizeof(externip)); memset(&default_prefs, 0
	  , sizeof(default_prefs));

2007-07-21 00:57 +0000 [r76220]  Steve Murphy <murf@digium.com>

	* apps/app_queue.c: This update was supplied in 10154; to allow
	  announcemnts if the 'r' option (ringing) is provided.

2007-07-20 22:25 +0000 [r76216]  Jason Parker <jparker@digium.com>

	* configs/say.conf.sample, apps/app_playback.c: Add support for
	  default "say mode" (whether to use the "old" method or "new"
	  method. "new" method being config file) Add support for
	  autocomplete of "say load" CLI command. Patch by IgorG (closes
	  issue #10243)

2007-07-20 21:41 +0000 [r76213]  Steve Murphy <murf@digium.com>

	* /, sounds/Makefile: Merged revisions 76211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76211 | murf | 2007-07-20 15:36:05 -0600 (Fri, 20 Jul 2007) | 1
	  line This patch from 10249 is worth applying! It prevents
	  downloading sound files if they are already downloaded. Darn
	  Practical, if you ask me ........

2007-07-20 21:04 +0000 [r76175-76179]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 76174 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r76174 | qwell | 2007-07-20 15:32:55 -0500 (Fri, 20 Jul
	  2007) | 2 lines It's possible for sub->owner to be NULL here if
	  you cancel the call immediately after/during sending a digit.
	  ........

2007-07-20 18:44 +0000 [r76140]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_directory.c: Merged revisions 76139 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76139 | mmichelson | 2007-07-20 13:42:27 -0500 (Fri, 20 Jul
	  2007) | 6 lines When using users.conf for the entries in the
	  directory, if multiple users had the same last name, only the
	  first user listed would be available in the directory. (closes
	  issue #10200, reported by mrskippy, patched by me) ........

2007-07-20 18:28 +0000 [r76138]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 76132 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76132 | russell | 2007-07-20 13:22:24 -0500 (Fri, 20 Jul 2007) |
	  6 lines Use the define that specifies the default length of an
	  artificially created DTMF digit in the ast_senddigit() function.
	  The define is set to 100ms by default, which is the same thing
	  that this function was using. But, using the define lets changes
	  take effect in this case, as well as the others where it was
	  already used. ........

2007-07-20 17:21 +0000 [r76055-76091]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 76087 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r76087 | file | 2007-07-20 14:20:09 -0300 (Fri,
	  20 Jul 2007) | 14 lines Merged revisions 76080 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r76080 | file | 2007-07-20 14:16:48 -0300 (Fri, 20 Jul 2007) | 6
	  lines (closes issue #10247) Reported by: fkasumovic Patches:
	  chan_sip.patch uploaded by fkasumovic (license #101) Drop any
	  peer realm authentication entries when reloading so multiple
	  entries do not get added to the peer. ........ ................

	* /, res/res_convert.c: Merged revisions 76067 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r76067 | file | 2007-07-20 14:10:17 -0300 (Fri, 20 Jul 2007) | 6
	  lines (closes issue #10246) Reported by: fkasumovic Patches:
	  res_conver.patch uploaded by fkasumovic (license #101) Use the
	  last occurance of . to find the extension, not the first
	  occurance. ........

	* channels/chan_sip.c: It is impossible for the externhost variable
	  to not exist, it is however possible for it to be empty.

2007-07-20 15:06 +0000 [r76034-76037]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: Don't use a field size for the last argument
	  of printf format, because in this case the string is left-aligned
	  and it is not truncated anyways. Omitting the field size prevents
	  the generation of trailing whitespace, which makes the string fit
	  in smaller windows.

	* channels/chan_sip.c: Extend the 'network settings' section with
	  indication on the localnet settings (requires the change in SVN
	  76034), and also give an indication on whether/why/how the
	  remapping of addresses in SIP message is done or not. I think
	  this is especially useful for debugging the configuration, as the
	  address remapping depends on a combination of at least 3
	  parameters (localnet, externhost, externip) and successful DNS
	  lookup. An example of the output of this section is below:
	  Network Settings: --------------------------- SIP address
	  remapping: Enabled using externhost Externhost: foo.dyndns.net
	  Externip: 80.64.128.23:0 Externrefresh: 10 Internal IP:
	  12.34.56.78:5060 Localnet: 192.168.0.0/255.255.0.0
	  10.0.0.0/255.0.0.0 I leave to the community the judgement if the
	  above info is a useful addition for 1.4. It is not a bugfix, but
	  it is neither a new feature, only a useful diagnostic tool. Note
	  that I would like to move there also the bindaddress/port
	  information, in the usual addr:port format e.g. Bindaddress:
	  0.0.0.0:5060 so that network information is all in one place.

	* include/asterisk/acl.h, main/acl.c: expose struct ast_ha so
	  external code can do things such as printing it (e.g. chan_sip.c
	  in a subsequent commit). Obviously exposing the internals of a
	  data structure is far from ideal (especially in a case like this
	  where the implementation is very inefficient and will need to be
	  changed at some point). On the other hand, it was also unclear
	  what additional APIs should we provide instead, and because
	  exposing the stucture has no impact on source and binary
	  compatibility, this seemed to me the best option at this time.

2007-07-20 01:54 +0000 [r76015]  Tilghman Lesher <tlesher@digium.com>

	* main/logger.c: Reduce some logging contention by switching
	  several locks over to rwlocks

2007-07-19 23:24 +0000 [r75982-75983]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, include/asterisk/utils.h, channels/chan_local.c,
	  channels/chan_sip.c, include/asterisk/dundi.h,
	  res/res_features.c, include/asterisk/chanspy.h,
	  include/asterisk/speech.h, channels/iax2-provision.c,
	  include/asterisk/cdr.h, include/asterisk/channel.h,
	  res/res_musiconhold.c, channels/chan_iax2.c, main/rtp.c,
	  channels/iax2-provision.h, main/loader.c,
	  include/asterisk/abstract_jb.h, include/asterisk/features.h,
	  main/channel.c, include/asterisk/app.h, funcs/func_odbc.c,
	  include/asterisk/module.h, include/asterisk/jabber.h,
	  apps/app_minivm.c, main/app.c, pbx/pbx_dundi.c,
	  apps/app_mixmonitor.c, apps/app_voicemail.c: After some study,
	  thought, comparing, etc. I've backed out the previous universal
	  mod to make ast_flags a 64 bit thing. Instead, I added a 64-bit
	  version of ast_flags (ast_flags64), and 64-bit versions of the
	  test-flag, set-flag, etc. macros, and an app_parse_options64
	  routine, and I use these in app_dial alone, to eliminate the
	  30-option limit it had grown to meet. There is room now for 32
	  more options and flags. I was heavily tempted to implement some
	  of the other ideas that were presented, but this solution does
	  not intro any new versions of dial, doesn't have a different API,
	  has a minimal/zero impact on code outside of dial, and doesn't
	  seriously (I hope) affect the code structure of dial. It's the
	  best I can think of right now. My goal was NOT to rewrite dial. I
	  leave that to a future, coordinated effort.

	* apps/app_queue.c: This repairs a 'warning: ISO C90 forbids mixed
	  declarations and code' message that cripples my dev-mode enabled
	  build

2007-07-19 19:02 +0000 [r75977-75979]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 75978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75978 | mmichelson | 2007-07-19 13:59:30 -0500 (Thu, 19 Jul
	  2007) | 3 lines The diff on this looks pretty big but all I did
	  was remove a pointless if statement (always evaluates true).
	  ........

	* /, apps/app_queue.c: Merged revisions 75969 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75969 | mmichelson | 2007-07-19 11:26:10 -0500 (Thu, 19 Jul
	  2007) | 10 lines Changes in handling return values of several
	  functions in app_queue. This all started as a fix for issue
	  #10008 but now includes all of the following changes: 1.
	  Simplifying the code to handle positive return values from ast
	  API calls. 2. Removing the background_file function. 3. The fix
	  for issue #10008 (closes issue #10008, reported and patched by
	  dimas) ........

2007-07-19 15:59 +0000 [r75911-75930]  Russell Bryant <russell@digium.com>

	* res/res_agi.c: (closes issue #10210, reported and patched by
	  juggie) This merges the trunk only part of the patches from this
	  issue. In 1.4, res_agi will issue a warning if you try to use
	  DeadAGI on a channel that is not hung up. Now, in trunk, it just
	  plain won't let you do it.

	* /, channels/chan_iax2.c: Merged revisions 75928 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75928 | russell | 2007-07-19 10:53:15 -0500
	  (Thu, 19 Jul 2007) | 14 lines Merged revisions 75927 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75927 | russell | 2007-07-19 10:49:42 -0500 (Thu, 19
	  Jul 2007) | 6 lines When processing full frames, take sequence
	  number wraparound into account when deciding whether or not we
	  need to request retransmissions by sending a VNAK. This code
	  could cause VNAKs to be sent erroneously in some cases, and to
	  not be sent in other cases when it should have been. (closes
	  issue #10237, reported and patched by mihai) ........
	  ................

	* main/acl.c: Remove some debug code that was added in revision
	  75894, which removed some other debug code. :)

2007-07-19 12:38 +0000 [r75873-75894]  Luigi Rizzo <rizzo@icir.org>

	* main/acl.c: comment out some terribly expensive debugging code in
	  the body of ast_apply_ha()

	* channels/chan_sip.c: print more of the network settings
	  (externip, externhost etc.) in the "sip show settings" cli
	  output. I have put these in a separate section, probably even
	  bindaddr and SIP port should go there. There are more things to
	  add here e.g. localnet and so on.

	* channels/chan_sip.c: document the use of externip, externhost and
	  other nat-related options, as well as the handling of the sip
	  socket.

	* channels/chan_sip.c: ast_sip_ouraddrfor() never fails, so make it
	  void and remove the code that would never be called.

	* channels/chan_sip.c: portability fix: use %f instead of %lf when
	  printing double. The l is useless.

2007-07-19 04:45 +0000 [r75841-75857]  Tilghman Lesher <tlesher@digium.com>

	* channels/misdn/ie.c, channels/misdn/isdn_lib.c: Allow chan_misdn
	  to build in dev-mode

	* apps/app_rpt.c: Fix trunk where I broke it earlier (for
	  ast_strftime branch)

2007-07-18 23:00 +0000 [r75808]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 75807 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r75807 | qwell | 2007-07-18 17:59:18 -0500 (Wed, 18 Jul
	  2007) | 1 line Need to make sure we set milliseconds and
	  timestamp - pointed out by the recent ast_ time stuff from
	  Tilghman ........

2007-07-18 22:52 +0000 [r75806]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: I thought I noticed a memory leak earlier
	  when I saw that the contents of this list were not destroyed when
	  the module is unloaded. However, after reading the code related
	  to the use of this list a lot today, I realized that it isn't
	  necessary. So, I have added a comment to explain why it isn't
	  necessary.

2007-07-18 22:40 +0000 [r75805]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_iax2.c: Change IAX variables to use datastores
	  (closes issue #9315)

2007-07-18 21:10 +0000 [r75761]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 75759 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75759 | russell | 2007-07-18 16:09:46 -0500
	  (Wed, 18 Jul 2007) | 13 lines Merged revisions 75757 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75757 | russell | 2007-07-18 16:09:13 -0500 (Wed, 18
	  Jul 2007) | 5 lines When traversing the queue of frames for
	  possible retransmission after receiving a VNAK, handle sequence
	  number wraparound so that all frames that should be retransmitted
	  actually do get retransmitted. (issue #10227, reported and
	  patched by mihai) ........ ................

2007-07-18 20:43 +0000 [r75750]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 75749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75749 | tilghman | 2007-07-18 15:40:18 -0500
	  (Wed, 18 Jul 2007) | 10 lines Merged revisions 75748 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75748 | tilghman | 2007-07-18 15:31:36 -0500 (Wed, 18
	  Jul 2007) | 2 lines Store prior to copy (closes issue #10193)
	  ........ ................

2007-07-18 20:18 +0000 [r75714-75734]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 75732 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r75732 | qwell | 2007-07-18 15:17:27 -0500 (Wed, 18 Jul
	  2007) | 1 line Umm, why are we transmitting dialtone on cfwdall?
	  ........

	* /, channels/chan_skinny.c: Merged revisions 75711 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #9245) ........ r75711 | qwell | 2007-07-18 14:54:32 -0500
	  (Wed, 18 Jul 2007) | 4 lines Fixes for 7935/7936 conference
	  phones. Issue 9245, patch by slimey. ........

2007-07-18 19:51 +0000 [r75710]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 75707 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #9887) ........ r75707 | qwell | 2007-07-18 14:48:12 -0500
	  (Wed, 18 Jul 2007) | 4 lines Fix issues with new 79x1 phones.
	  Issue 9887, patches by DEA ........

2007-07-18 19:50 +0000 [r75709]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: convert some lines indented with spaces to
	  tabs

2007-07-18 19:47 +0000 [r75706]  Tilghman Lesher <tlesher@digium.com>

	* main/say.c, funcs/func_strings.c, main/utils.c,
	  apps/app_alarmreceiver.c, include/asterisk/localtime.h,
	  cdr/cdr_pgsql.c, cdr/cdr_radius.c, channels/chan_iax2.c,
	  main/loader.c, main/cli.c, cdr/cdr_csv.c, main/cdr.c,
	  channels/chan_phone.c, main/manager.c, channels/chan_skinny.c,
	  cdr/cdr_sqlite.c, apps/app_minivm.c, channels/misdn/ie.c,
	  main/logger.c, main/http.c, main/stdtime/localtime.c,
	  cdr/cdr_odbc.c, apps/app_rpt.c, include/asterisk/options.h,
	  channels/chan_mgcp.c, cdr/cdr_manager.c, main/pbx.c,
	  channels/chan_zap.c, funcs/func_timeout.c, channels/chan_sip.c,
	  channels/chan_agent.c, channels/iax2-parser.c,
	  apps/app_playback.c, cdr/cdr_tds.c, main/callerid.c,
	  res/snmp/agent.c, apps/app_sms.c, include/asterisk/strings.h,
	  main/asterisk.c, apps/app_voicemail.c: Merge in ast_strftime
	  branch, which changes timestamps to be accurate to the
	  microsecond, instead of only to the second

2007-07-18 17:59 +0000 [r75659]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, apps/app_queue.c: Merged revisions 75658 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75658 | dhubbard | 2007-07-18 12:56:30 -0500
	  (Wed, 18 Jul 2007) | 9 lines Merged revisions 75657 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75657 | dhubbard | 2007-07-18 12:48:33 -0500 (Wed, 18
	  Jul 2007) | 1 line removed the word 'pissed' from ast_log(...)
	  function call for BE-90 ........ ................

2007-07-18 15:45 +0000 [r75586-75624]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 75623 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75623 | file | 2007-07-18 12:44:02 -0300 (Wed, 18 Jul 2007) | 2
	  lines Few more places that needs to check for onhold state.
	  ........

	* /, channels/chan_sip.c: Merged revisions 75621 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75621 | file | 2007-07-18 12:41:06 -0300 (Wed, 18 Jul 2007) | 5
	  lines (closes issue #10165) Reported by: elandivar It is possible
	  for hold status to exist without call limits set, so we need to
	  ensure update_call_counter is executed regardless. ........

	* /, channels/chan_h323.c: Merged revisions 75619 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75619 | file | 2007-07-18 12:25:45 -0300 (Wed, 18 Jul 2007) | 2
	  lines Don't bother reloading chan_h323 if it did not load
	  successfully in the first place. This would otherwise cause a
	  crash. ........

	* funcs/func_curl.c: Clean up func_curl a bit.

2007-07-18 14:35 +0000 [r75585]  Steve Murphy <murf@digium.com>

	* main/channel.c, channels/chan_sip.c, res/res_features.c,
	  pbx/pbx_dundi.c, main/rtp.c, apps/app_voicemail.c: This corrects
	  the problem with flags and %lld formats on 64-bit machines, where
	  uint64_t is NOT acceptable for %lld, and also works on 32-bit
	  machines. At least, with gcc.

2007-07-18 14:20 +0000 [r75566-75584]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 75583 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75583 | file | 2007-07-18 11:18:53 -0300 (Wed, 18 Jul 2007) | 5
	  lines (closes issue #10224) Reported by: irroot Record the
	  threadid of each running thread before shutting them down as the
	  thread themselves may change the value. ........

	* channels/chan_sip.c, channels/chan_agent.c, pbx/pbx_realtime.c,
	  apps/app_voicemail.c: Minor code tweaks. Variables were being
	  checked wrong in some situations and didn't need to be checked in
	  others.

2007-07-18 12:38 +0000 [r75530]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_meetme.c: Merged revisions 75529 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75529 | tilghman | 2007-07-18 07:29:41 -0500 (Wed, 18 Jul 2007)
	  | 2 lines Using a freed frame causes crashes (closes issue #9317)
	  ........

2007-07-17 21:52 +0000 [r75505]  Steve Murphy <murf@digium.com>

	* pbx/pbx_ael.c: Spotted this bug today myself, trying to reproduce
	  a BE bug. Use a vert bar instead of a comma, when calling RAND.

2007-07-17 20:58 +0000 [r75446-75451]  Russell Bryant <russell@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 75450 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75450 | russell | 2007-07-17 15:57:56 -0500
	  (Tue, 17 Jul 2007) | 11 lines Merged revisions 75449 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75449 | russell | 2007-07-17 15:57:09 -0500 (Tue, 17
	  Jul 2007) | 3 lines Properly check for the length in the skinny
	  packet to prevent an invalid memcpy. (ASA-2007-016) ........
	  ................

	* channels/iax2-parser.h, /, channels/chan_iax2.c,
	  channels/iax2-parser.c: Merged revisions 75445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75445 | russell | 2007-07-17 15:48:21 -0500
	  (Tue, 17 Jul 2007) | 13 lines Merged revisions 75444 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75444 | russell | 2007-07-17 15:45:27 -0500 (Tue, 17
	  Jul 2007) | 5 lines Ensure that when encoding the contents of an
	  ast_frame into an iax_frame, that the size of the destination
	  buffer is known in the iax_frame so that code won't write past
	  the end of the allocated buffer when sending outgoing frames.
	  (ASA-2007-014) ........ ................

2007-07-17 20:42 +0000 [r75438-75442]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 75441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75441 | russell | 2007-07-17 15:42:12 -0500
	  (Tue, 17 Jul 2007) | 12 lines Merged revisions 75440 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75440 | russell | 2007-07-17 15:41:41 -0500 (Tue, 17
	  Jul 2007) | 4 lines After parsing information elements in IAX
	  frames, set the data length to zero, so that code later on does
	  not think it has data to copy. (ASA-2007-015) ........
	  ................

2007-07-17 20:05 +0000 [r75406]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /: Merged revisions 75405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75405 | mmichelson | 2007-07-17 15:03:48 -0500 (Tue, 17 Jul
	  2007) | 6 lines Fixing an error I made earlier. ast_fileexists
	  can return -1 on failure, so I need to be sure that we only enter
	  the if statement if it is successful. Related to my fix to issue
	  #10186 ........

2007-07-17 20:01 +0000 [r75402-75404]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 75403 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75403 | russell | 2007-07-17 15:01:12 -0500 (Tue, 17 Jul 2007) |
	  12 lines (closes issue #10209) Reported by: juggie Patches:
	  10209-trunk-2.patch uploaded by juggie Tested by: juggie,
	  blitzrage In ast_pbx_run(), mark a channel as hung up after an
	  application returned -1, or when it runs out of extensions to
	  execute. This is so that code can detect that this channel has
	  been hung up for things like making sure DeadAGI is used on
	  actual dead channels, and is beneficial for other things, like
	  making sure someone doesn't try to start spying on a channel that
	  is about to go away. ........

	* /, res/res_agi.c: Merged revisions 75401 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75401 | russell | 2007-07-17 14:45:07 -0500 (Tue, 17 Jul 2007) |
	  3 lines Remove a duplicated newline character in AGI debug
	  output. (closes issue #10207, patch by seanbright) ........

2007-07-17 19:40 +0000 [r75400]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, include/asterisk/utils.h, channels/chan_local.c,
	  channels/chan_sip.c, include/asterisk/dundi.h,
	  res/res_features.c, include/asterisk/chanspy.h,
	  include/asterisk/speech.h, channels/iax2-provision.c,
	  include/asterisk/cdr.h, include/asterisk/channel.h,
	  res/res_musiconhold.c, channels/chan_iax2.c, main/rtp.c,
	  channels/iax2-provision.h, main/loader.c,
	  include/asterisk/features.h, include/asterisk/abstract_jb.h,
	  main/channel.c, funcs/func_odbc.c, include/asterisk/module.h,
	  include/asterisk/jabber.h, apps/app_minivm.c, utils/ael_main.c,
	  pbx/pbx_dundi.c, apps/app_mixmonitor.c, utils/check_expr.c,
	  apps/app_voicemail.c: via 10206, I have added an option (e) to
	  Dial to allow the h exten to get run on peer. Had to upgrade
	  ast_flag stuff to 64 bits to do this.

2007-07-17 14:48 +0000 [r75381]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/config.h: Make trunk build once again.

2007-07-17 14:32 +0000 [r75365-75379]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/config.h, main/config.c: Introduce
	  ast_parse_arg() , a generic function to parse strings in a
	  consistent way. This is meant to replace the custom code which is
	  repeated all over the place in the various files when parsing
	  config files, CLI entries and other string information. Right now
	  the code supports parsing int32, uint32 and sockaddr_in with
	  optional default values and bound checks. It contains minimal
	  error checking, but that can be easily extended as the need
	  arises. Being a new API i am introducing this only in trunk,
	  though I believe that once the interface has been ironed out it
	  might become a worthwhile addition to 1.4 as well - basically,
	  the first time we will need to fix a piece of argument parsing
	  code, we might as well bring in this change and use the new API
	  instead.

	* apps/app_minivm.c: Initialize a variable to avoid a warning when
	  the compiler (and/or the optimization level) may think it is used
	  uninitialized. The code was indeed correct, but unfortunately the
	  result of some compiler checks such as -Wunused and
	  -Wuninitialized depends heavily on the optimization level.

2007-07-17 12:01 +0000 [r75351]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c: Fix an incorrect parenthesization (TODO: Find a
	  better word) in app_dial Pointed out by Fanzhou Zhao Closes issue
	  #10216

2007-07-16 20:58 +0000 [r75307]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/dns.c: Merged revisions 75306 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75306 | kpfleming | 2007-07-16 15:53:24 -0500
	  (Mon, 16 Jul 2007) | 11 lines Merged revisions 75304 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75304 | kpfleming | 2007-07-16 15:46:58 -0500 (Mon, 16
	  Jul 2007) | 3 lines provide proper copyright/license attribution
	  for this structure that was copied from a BSD-licensed header
	  file long, long ago... ........ ................

2007-07-16 18:38 +0000 [r75255-75260]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, include/asterisk/pbx.h: Change the function name
	  slightly... just for kpfleming!

	* configure, include/asterisk/autoconfig.h.in, configure.ac: Add in
	  check for the GCC attribute deprecated. It may be used soon!

	* funcs/func_enum.c, funcs/func_rand.c, main/pbx.c,
	  funcs/func_curl.c, funcs/func_version.c, funcs/func_cut.c,
	  funcs/func_vmcount.c, include/asterisk/pbx.h,
	  funcs/func_realtime.c: For my next trick I will make it so
	  dialplan functions no longer need to call ast_module_user_add and
	  ast_module_user_remove. These are now called in the ast_func_read
	  and ast_func_write functions outside of the module.

2007-07-16 18:18 +0000 [r75254]  Mark Michelson <mmichelson@digium.com>

	* apps/app_dial.c, /: Merged revisions 75253 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r75253 | mmichelson | 2007-07-16 13:16:15 -0500 (Mon, 16 Jul
	  2007) | 8 lines Restoring functionality from 1.2 wherein
	  Retrydial will not exit if there is no announce file specified.
	  This change makes it so that if there is no announce file
	  specified, the application will continue until finished (or
	  caller hangs up). If a bogus announce file is specified, then a
	  warning message will be printed saying that the file could not be
	  found, but execution will still continue. (closes issue #10186,
	  reported by jon, patched by me) ........

2007-07-16 15:57 +0000 [r75183-75227]  Joshua Colp <jcolp@digium.com>

	* apps/app_verbose.c: I found this sillyness when I did my
	  ast_module_user conversion. Return immediately if no data was
	  passed to the Verbose application.

	* apps/app_readfile.c, apps/app_record.c, apps/app_sayunixtime.c,
	  apps/app_test.c, apps/app_alarmreceiver.c, apps/app_image.c,
	  apps/app_chanisavail.c, apps/app_ices.c, apps/app_exec.c,
	  apps/app_skel.c, apps/app_zapscan.c, apps/app_dumpchan.c,
	  apps/app_zapras.c, apps/app_amd.c, apps/app_url.c,
	  apps/app_externalivr.c, apps/app_milliwatt.c, apps/app_dial.c,
	  main/pbx.c, apps/app_page.c, apps/app_privacy.c, apps/app_echo.c,
	  apps/app_softhangup.c, apps/app_disa.c, apps/app_morsecode.c,
	  apps/app_talkdetect.c, apps/app_transfer.c, apps/app_db.c,
	  apps/app_playback.c, apps/app_speech_utils.c,
	  apps/app_zapbarge.c, apps/app_waitforring.c, apps/app_sendtext.c,
	  apps/app_macro.c, apps/app_zapateller.c, apps/app_chanspy.c,
	  apps/app_mixmonitor.c, apps/app_cdr.c, apps/app_voicemail.c,
	  apps/app_meetme.c, apps/app_dictate.c, apps/app_authenticate.c,
	  apps/app_userevent.c, apps/app_followme.c,
	  apps/app_controlplayback.c, apps/app_osplookup.c,
	  apps/app_setcallerid.c, apps/app_minivm.c, apps/app_mp3.c,
	  apps/app_directory.c, apps/app_rpt.c, apps/app_ivrdemo.c,
	  apps/app_parkandannounce.c, apps/app_adsiprog.c,
	  apps/app_while.c, apps/app_nbscat.c, apps/app_read.c,
	  apps/app_festival.c, apps/app_system.c, apps/app_getcpeid.c,
	  apps/app_queue.c, apps/app_channelredirect.c, apps/app_forkcdr.c,
	  apps/app_flash.c, apps/app_directed_pickup.c, apps/app_sms.c,
	  include/asterisk/pbx.h, apps/app_senddtmf.c, apps/app_stack.c,
	  apps/app_verbose.c: Applications no longer need to call
	  ast_module_user_add and ast_module_user_remove. This is now taken
	  care of in the pbx_exec function outside of the application.

	* apps/app_readfile.c, res/res_features.c, apps/app_record.c,
	  apps/app_sayunixtime.c, apps/app_test.c,
	  apps/app_alarmreceiver.c, apps/app_image.c,
	  apps/app_chanisavail.c, apps/app_ices.c, apps/app_exec.c,
	  apps/app_zapscan.c, apps/app_dumpchan.c, apps/app_zapras.c,
	  apps/app_amd.c, apps/app_url.c, apps/app_externalivr.c,
	  apps/app_milliwatt.c, apps/app_dial.c, apps/app_page.c,
	  apps/app_privacy.c, apps/app_echo.c, apps/app_softhangup.c,
	  apps/app_disa.c, apps/app_morsecode.c, funcs/func_cut.c,
	  apps/app_talkdetect.c, apps/app_transfer.c, apps/app_playback.c,
	  apps/app_speech_utils.c, funcs/func_curl.c, apps/app_zapbarge.c,
	  apps/app_waitforring.c, apps/app_sendtext.c, apps/app_macro.c,
	  apps/app_zapateller.c, apps/app_mixmonitor.c, apps/app_chanspy.c,
	  apps/app_cdr.c, apps/app_voicemail.c, apps/app_meetme.c,
	  apps/app_authenticate.c, apps/app_userevent.c,
	  funcs/func_vmcount.c, apps/app_followme.c, funcs/func_enum.c,
	  res/res_config_odbc.c, apps/app_setcallerid.c,
	  apps/app_osplookup.c, apps/app_minivm.c, res/res_agi.c,
	  apps/app_mp3.c, res/res_realtime.c, apps/app_rpt.c,
	  apps/app_ivrdemo.c, apps/app_parkandannounce.c,
	  apps/app_adsiprog.c, apps/app_while.c, apps/app_nbscat.c,
	  res/res_config_pgsql.c, apps/app_read.c, apps/app_festival.c,
	  apps/app_waitforsilence.c, apps/app_system.c, apps/app_queue.c,
	  apps/app_getcpeid.c, funcs/func_realtime.c, apps/app_forkcdr.c,
	  apps/app_channelredirect.c, apps/app_flash.c,
	  funcs/func_blacklist.c, apps/app_sms.c, apps/app_senddtmf.c,
	  apps/app_stack.c, apps/app_verbose.c: It is no longer required
	  for each module that deals with a channel to call
	  ast_module_user_hangup_all in it's unload function. The loader
	  will automatically perform this action for it.

2007-07-16 02:51 +0000 [r75163-75164]  Russell Bryant <russell@digium.com>

	* include/asterisk/devicestate.h, include/asterisk/dundi.h,
	  include/asterisk/enum.h, include/asterisk/config.h,
	  include/asterisk/io.h, include/asterisk/cli.h,
	  include/asterisk/channel.h, include/asterisk/cdr.h,
	  include/asterisk/manager.h, include/asterisk/tdd.h,
	  include/asterisk/abstract_jb.h, include/asterisk/file.h,
	  include/asterisk/res_odbc.h, include/asterisk/adsi.h,
	  include/asterisk/crypto.h, include/asterisk/doxyref.h,
	  include/asterisk/image.h, include/asterisk/musiconhold.h,
	  include/asterisk/jabber.h, include/asterisk/linkedlists.h,
	  include/asterisk/module.h, include/asterisk/strings.h,
	  include/asterisk/pbx.h, include/asterisk/frame.h,
	  include/asterisk/say.h, include/asterisk/translate.h: Merge a
	  bunch of doxygen updates to header files. This includes changes
	  to use the \retval tag for documenting return values, fixing
	  various warnings when generating the documentation, and various
	  other things. (closes issue #10203, snuffy)

	* funcs/func_iconv.c: Cast the 2nd argument to iconv() to a void *,
	  as some systems define it as a (const char *), while others
	  define it as (char *). This is done to suppress compiler warnings
	  about it.

2007-07-13 20:37 +0000 [r75109]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 75108 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75108 | russell | 2007-07-13 15:36:16 -0500
	  (Fri, 13 Jul 2007) | 11 lines Merged revisions 75107 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75107 | russell | 2007-07-13 15:35:22 -0500 (Fri, 13
	  Jul 2007) | 3 lines Fix a couple potential minor memory leaks.
	  load_moh_classes() could return without destroying the loaded
	  configuration. ........ ................

2007-07-13 20:16 +0000 [r75082]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 75078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75078 | mmichelson | 2007-07-13 15:15:30 -0500
	  (Fri, 13 Jul 2007) | 13 lines Merged revisions 75066 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75066 | mmichelson | 2007-07-13 15:10:39 -0500 (Fri, 13
	  Jul 2007) | 5 lines Fixed an issue where chanspy flags were
	  uninitialized if no options were passed. What triggered this
	  investigation was an IRC chat where some people's quiet flags
	  were set while others' weren't even though none of them had
	  specified the q option. ........ ................

2007-07-13 20:15 +0000 [r75054-75077]  Russell Bryant <russell@digium.com>

	* main/rtp.c: resolve a compiler warning

	* /, res/res_musiconhold.c: Merged revisions 75067 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75067 | russell | 2007-07-13 15:10:40 -0500
	  (Fri, 13 Jul 2007) | 14 lines Merged revisions 75059 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75059 | russell | 2007-07-13 15:07:21 -0500 (Fri, 13
	  Jul 2007) | 6 lines Ensure that adding a user to the list of
	  users of a specific music on hold class is not done at the same
	  time as any of the other operations on this list to prevent list
	  corruption. Using the global moh_data lock for this is not ideal,
	  but it is what is used to protect these lists everywhere else in
	  the module, and I am only changing what is necessary to fix the
	  bug. ........ ................

	* channels/chan_zap.c, /: Merged revisions 75053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r75053 | russell | 2007-07-13 14:11:26 -0500
	  (Fri, 13 Jul 2007) | 20 lines Merged revisions 75052 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r75052 | russell | 2007-07-13 14:10:00 -0500 (Fri, 13
	  Jul 2007) | 12 lines (closes issue #9660) Reported by: mmacvicar
	  Patches submitted by: bbryant, russell Tested by: mmacvicar,
	  marco, arcivanov, jmhunter, explidous When using a TDM400P (and
	  probably other analog cards) there was a chance that you could
	  hang up and pick the phone back up where it has been long enough
	  to be not considered a flash hook, but too soon such that the
	  device reports that it is busy and the person on the phone will
	  only hear silence. This patch makes chan_zap more tolerant of
	  this and gives the device a couple of seconds to succeed so the
	  person on the phone happily gets their dialtone. ........
	  ................

2007-07-13 16:22 +0000 [r75034]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/rtp.h, main/rtp.c: Small improvement to the STUN
	  support so it can be used by sockets other than RTP ones. The
	  main change is a new API function in main/rtp.c (see there for a
	  description) int ast_stun_request(int s, struct sockaddr_in *dst,
	  const char *username, struct sockaddr_in *answer) which can be
	  used to send an STUN request on a socket, and optionally wait for
	  a reply and store the STUN_MAPPED_ADDRESS into the 'answer'
	  argument (obviously, the version that waits for a reply is
	  blocking, but this is no different from DNS resolutions).
	  Internally there are minor modifications to let
	  stun_handle_packet() be somewhat configurable on how to parse the
	  body of responses. At the moment i am not committing any change
	  to the clients, but adding STUN client support is extremely
	  simple, e.g. chan_sip.c could do something like this: + add a
	  variable to store the stun server address; static struct
	  sockaddr_in stunaddr = { 0, }; /*!< stun server address */ + add
	  code to parse a config file of the form
	  "stunaddr=my.stun.server.org:3478" (not shown for brevity); +
	  right after binding the main sip socket, talk to the stun server
	  to determine the externally visible address if
	  (stunaddr.sin_addr.s_addr != 0) ast_stun_request(sipsock,
	  &stunaddr, NULL, &externip); so now 'externip' is set with the
	  externally visible address. so it is really trivial. Similarly
	  ast_stun_request could be called when creating the RTP socket
	  (possibly adding a struct sockaddr_in field in the struct ast_rtp
	  to store the externalip).

2007-07-12 23:02 +0000 [r74999]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 74997 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ ........

2007-07-12 20:46 +0000 [r74956]  Steve Murphy <murf@digium.com>

	* /, channels/chan_sip.c: Merged revisions 74955 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74955 | murf | 2007-07-12 14:42:08 -0600 (Thu, 12 Jul 2007) | 1
	  line This patch resolves 10143; thanks to irroot for the patch;
	  looked acceptable. Let the community decide if it messes things
	  up ........

2007-07-12 19:19 +0000 [r74891-74923]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 74922 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74922 | file | 2007-07-12 16:17:59 -0300 (Thu, 12 Jul 2007) | 2
	  lines Whoops... didn't want this to be returned to 0 each
	  iteration. ........

	* main/channel.c, /: Merged revisions 74888 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74888 | file | 2007-07-12 14:16:28 -0300 (Thu, 12 Jul 2007) | 2
	  lines When waiting for a digit ensure that a begin frame was
	  received with it, not just an end frame. (issue #10084 reported
	  by rushowr) ........

2007-07-12 16:54 +0000 [r74865-74867]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 74866 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74866 | qwell | 2007-07-12 11:53:35 -0500 (Thu, 12 Jul
	  2007) | 1 line It helps if I actually add this stuff for the 7921
	  too - otherwise it won't actually do much of anything. ........

	* /, channels/chan_skinny.c: Merged revisions 74864 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74864 | qwell | 2007-07-12 11:48:49 -0500 (Thu, 12 Jul
	  2007) | 1 line Add device ID for 7921 wireless skinny phone
	  ........

2007-07-12 16:21 +0000 [r74850]  Luigi Rizzo <rizzo@icir.org>

	* main/rtp.c: more cleanup, this time to stun_handle_packet().
	  Among other things: + mark a potentially dangerous
	  write-past-end-of-buffer + localize some variables in the block
	  generating stun replies. As before, not ready yet for a merge to
	  1.4

2007-07-12 15:55 +0000 [r74816]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 74815 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74815 | file | 2007-07-12 12:53:55 -0300 (Thu,
	  12 Jul 2007) | 10 lines Merged revisions 74814 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74814 | file | 2007-07-12 12:51:24 -0300 (Thu, 12 Jul 2007) | 2
	  lines Only print out a warning for situations where it is
	  actually helpful. (issue #10187 reported by denke) ........
	  ................

2007-07-12 15:42 +0000 [r74813]  Luigi Rizzo <rizzo@icir.org>

	* main/rtp.c: a little bit of code cleanup to rtp.c, mostly to
	  function ast_rtp_new_with_bindaddr(): 1. add comments to the
	  logic of the main loop; 2. use a common exit point on failure so
	  the cleanup is done only in one place; 3. handle failures in
	  rtp_socket() in the main loop of the function; No functional
	  changes except for #3 above, so it is not yet worthwhile merging
	  this and other changes to 1.4 Once the cleanup work on this file
	  will be complete (which among other things should include some
	  extensions to the stun support) it might be a good thing to push
	  all the changes to 1.4

2007-07-11 23:05 +0000 [r74769]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 74767 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74767 | russell | 2007-07-11 17:57:07 -0500
	  (Wed, 11 Jul 2007) | 13 lines Merged revisions 74766 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r74766 | russell | 2007-07-11 17:53:26 -0500 (Wed, 11
	  Jul 2007) | 5 lines The function make_trunk() can fail and return
	  -1 instead of a valid new call number. Fix the uses of this
	  function to handle this instead of treating it as the new call
	  number. This would cause a deadlock and memory corruption.
	  (possible cause of issue #9614 and others, patch by me) ........
	  ................

2007-07-11 21:15 +0000 [r74726]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 74722 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74722 | mmichelson | 2007-07-11 16:14:09 -0500
	  (Wed, 11 Jul 2007) | 13 lines Merged revisions 74719 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r74719 | mmichelson | 2007-07-11 16:12:30 -0500 (Wed, 11
	  Jul 2007) | 5 lines The cli command "agent logoff Agent/x soft"
	  did not work...at all. Now it does. (closes issue #10178,
	  reported and patched by makoto, with slight modification for 1.4
	  and trunk by me) ........ ................

2007-07-11 21:09 +0000 [r74703-74713]  Joshua Colp <jcolp@digium.com>

	* res/res_agi.c: Code cleanup of res_agi

	* res/res_smdi.c: Code cleanup of res_smdi

	* pbx/pbx_spool.c: Clean up pbx_spool. So many nested if
	  statements...

	* main/udptl.c, include/asterisk/udptl.h: Use linkedlist macros for
	  UDPTL protocol list.

2007-07-11 18:35 +0000 [r74658]  Russell Bryant <russell@digium.com>

	* res/res_config_odbc.c: Merged revisions 74657 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74657 | russell | 2007-07-11 13:34:51 -0500
	  (Wed, 11 Jul 2007) | 12 lines Merged revisions 74656 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r74656 | russell | 2007-07-11 13:33:23 -0500 (Wed, 11
	  Jul 2007) | 4 lines Make sure that the ESCAPE immediately follows
	  the condition that uses LIKE. This fixes realtime extensions with
	  ODBC. (closes issue #10175, reported by stuarth, patch by me)
	  ........ ................

2007-07-11 18:21 +0000 [r74636-74648]  Steve Murphy <murf@digium.com>

	* Makefile, /: Merged revisions 74642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74642 | murf | 2007-07-11 12:18:42 -0600 (Wed, 11 Jul 2007) | 1
	  line This fixes 10172, where the entire man8 dir gets removed
	  during an uninstall of asterisk ........

	* /: blocking 74628 from trunk... only applied to 1.4

2007-07-11 17:34 +0000 [r74575-74616]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/speech.h, res/res_speech.c,
	  apps/app_speech_utils.c: Use the linkedlists.h AST_LIST_NEXT
	  macro for modifying the list of results.

	* channels/chan_phone.c, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac: Merged revisions
	  74572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74572 | file | 2007-07-11 14:03:08 -0300 (Wed, 11 Jul 2007) | 2
	  lines Instead of figuring out kernel versions that have
	  compiler.h and not... let's just use autoconf to check for it's
	  presence. (issue #10174 reported by francesco_r) ........

2007-07-11 16:24 +0000 [r74571]  Luigi Rizzo <rizzo@icir.org>

	* main/rtp.c: add a bit of documentation on what the stun code in
	  rtp.c does (which is very little, at the moment). Eventually,
	  when the functionality is extended, the changes can be merged
	  back to 1.4. At the moment this is pointless. Note, this change
	  is whitespace only.

2007-07-11 16:19 +0000 [r74516-74570]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/speech.h, res/res_speech.c,
	  apps/app_speech_utils.c: Allow the native formats of a channel to
	  influence the audio that is going to the engine. The best format
	  will try to be chosen with an ultimate fallback to signed linear
	  if possible.

	* res/res_speech.c: Can't forget to remember what format is in use
	  for writing.

	* include/asterisk/speech.h, res/res_speech.c: Change the speech
	  API to allow passing the format through to the engine.

	* channels/misdn/isdn_lib_intern.h: Change header a bit to get rid
	  of a doxygen parse error. (issue #10177 reported by snuffy)

	* channels/chan_phone.c, /: Merged revisions 74515 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74515 | file | 2007-07-11 11:09:13 -0300 (Wed, 11 Jul
	  2007) | 2 lines Only check if we need to do a SIGMA based tone
	  generation if we have a card. (issue #10179 reported by mikowhy)
	  ........

2007-07-10 23:34 +0000 [r74477]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 74476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74476 | mmichelson | 2007-07-10 18:32:52 -0500 (Tue, 10 Jul
	  2007) | 5 lines Forwarding a message with IMAP storage was
	  storing the message in the sender's box instead of the forwarded
	  mailbox. (closes issue #10138, reported and patched by jaroth)
	  ........

2007-07-10 20:02 +0000 [r74375-74429]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 74428 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10158) ................ r74428 | qwell | 2007-07-10
	  14:58:53 -0500 (Tue, 10 Jul 2007) | 14 lines Merged revisions
	  74427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74427 | qwell | 2007-07-10 14:57:20 -0500 (Tue, 10 Jul 2007) | 6
	  lines Fix an issue where it was possible to have a service level
	  of over 100% Between the time recalc_holdtime and update_queue
	  was called, it was possible that the call could have been hungup.
	  Move both additions to the same place, so this won't happen.
	  Issue 10158, initial patch by makoto, modified by me. ........
	  ................

	* /, main/dns.c: Merged revisions 74388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74388 | qwell | 2007-07-10 14:10:36 -0500 (Tue, 10 Jul 2007) | 4
	  lines Don't use #if to check if something is defined - use #ifdef
	  instead. Pointed out by kpfleming ........

	* /, channels/chan_agent.c: Merged revisions 74379 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10169) ................ r74379 | qwell | 2007-07-10
	  14:06:24 -0500 (Tue, 10 Jul 2007) | 12 lines Merged revisions
	  74376 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74376 | qwell | 2007-07-10 14:03:45 -0500 (Tue, 10 Jul 2007) | 4
	  lines Fix an issue with wrapuptime not working when using
	  AgentLogin. Issue 10169, patch by makoto, with a minor mod by me
	  to not re-break issue 9618 ........ ................

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/dns.c: Merged revisions 74374 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (closes
	  issue #10133) ................ r74374 | qwell | 2007-07-10
	  13:39:30 -0500 (Tue, 10 Jul 2007) | 13 lines Merged revisions
	  74373 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74373 | qwell | 2007-07-10 13:37:23 -0500 (Tue, 10 Jul 2007) | 5
	  lines Use res_ndestroy on systems that have it. Otherwise, use
	  res_nclose. This prevents a memleak on NetBSD - and possibly
	  others. Issue 10133, patch by me, reported and tested by scw
	  ........ ................

2007-07-10 16:01 +0000 [r74324]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 74323 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74323 | russell | 2007-07-10 11:00:11 -0500 (Tue, 10
	  Jul 2007) | 1 line fix an uninitialized variable ........

2007-07-10 15:41 +0000 [r74318-74319]  Jason Parker <jparker@digium.com>

	* /: svn revert != svn resolved Fix merged property...

	* apps/app_voicemail.c: Merged revisions 74317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 (Closes
	  issue #10170) ................ r74317 | qwell | 2007-07-10
	  10:38:32 -0500 (Tue, 10 Jul 2007) | 12 lines Merged revisions
	  74316 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74316 | qwell | 2007-07-10 10:37:54 -0500 (Tue, 10 Jul 2007) | 4
	  lines Fix a small typo in description in of Voicemail()
	  application. Issue 10170, patch by casper. ........
	  ................

2007-07-10 15:32 +0000 [r74315]  Russell Bryant <russell@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 74314 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74314 | russell | 2007-07-10 10:31:41 -0500
	  (Tue, 10 Jul 2007) | 11 lines Merged revisions 74313 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r74313 | russell | 2007-07-10 10:30:20 -0500 (Tue, 10
	  Jul 2007) | 3 lines Only use ESCAPE when LIKE is used. (issue
	  #10075, this part reported by jmls on IRC, patch by me) ........
	  ................

2007-07-10 15:07 +0000 [r74272]  Jason Parker <jparker@digium.com>

	* channels/chan_agent.c, include/asterisk/monitor.h,
	  apps/app_queue.c, res/res_monitor.c: Fix building that was broken
	  by recent monitor.h changes. Thanks Russell for pointing this out
	  (and pointing out what I probably did to prevent gcc from fixing
	  it - don't ctrl-C builds)

2007-07-10 14:51 +0000 [r74263-74266]  Joshua Colp <jcolp@digium.com>

	* /, main/app.c: Merged revisions 74265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r74265 | file | 2007-07-10 11:50:00 -0300 (Tue,
	  10 Jul 2007) | 10 lines Merged revisions 74264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r74264 | file | 2007-07-10 11:48:00 -0300 (Tue, 10 Jul 2007) | 2
	  lines Ensure the group information category exists before trying
	  to do a string comparison with it. (issue #10171 reported by
	  mlegas) ........ ................

2007-07-09 21:32 +0000 [r74212]  Russell Bryant <russell@digium.com>

	* /, configure, configure.ac: Merged revisions 74211 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74211 | russell | 2007-07-09 16:31:30 -0500 (Mon, 09
	  Jul 2007) | 5 lines Update the configure script to check for a
	  required function that is not present in the 1.2 version of
	  libpri. This will prevent the configure script from thinking that
	  it has compatible libpri support for Asterisk 1.4, when it
	  actually does not because the installed version is from 1.2.
	  ........

2007-07-09 20:58 +0000 [r74164]  Jason Parker <jparker@digium.com>

	* include/asterisk/monitor.h, res/res_monitor.c: (closes issue
	  #7596) Reported by: julien23 Patches submitted by: julien23 Add
	  the ability to disable recording the input or output streams in
	  res_monitor.

2007-07-09 20:54 +0000 [r74163]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 74162 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74162 | russell | 2007-07-09 15:53:46 -0500 (Mon, 09
	  Jul 2007) | 9 lines (closes issue #10123) Reported by: blitzrage
	  Patches submitted by: juggie, qwell, me Tested by: blitzrage When
	  trying to find a music on hold class to use, try all of the
	  options, instead of only the first one that is set. Also, change
	  the MusicOnHold applications to not hang up on the channel when a
	  class can not be found. ........

2007-07-09 20:21 +0000 [r74160]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /: Merged revisions 74159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 Closes issue
	  #9186 ................ r74159 | qwell | 2007-07-09 15:19:28 -0500
	  (Mon, 09 Jul 2007) | 16 lines Merged revisions 74158 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r74158 | qwell | 2007-07-09 15:18:15 -0500 (Mon, 09 Jul
	  2007) | 8 lines Several chan_zap options were not working on
	  reload because they were arbitrarily disallowed when reloading
	  some/most PRI options (such as signalling) was disallowed.
	  Options such as polarityonanswerdelay and answeronpolarityswitch
	  can safely be changed on a reload. This corrects that behavior.
	  Issue 9186, patch by tzafrir. ........ ................

2007-07-09 18:58 +0000 [r74125]  Russell Bryant <russell@digium.com>

	* channels/chan_agent.c: remove an unused variable

2007-07-09 18:43 +0000 [r74121-74123]  Mark Michelson <mmichelson@digium.com>

	* /: Merged revisions 74122 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74122 | mmichelson | 2007-07-09 13:38:28 -0500 (Mon, 09 Jul
	  2007) | 3 lines Forgot to get rid of an extraneous debug message.
	  ........

	* /, apps/app_queue.c: Merged revisions 74120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74120 | mmichelson | 2007-07-09 13:32:50 -0500 (Mon, 09 Jul
	  2007) | 6 lines The n option for Queue should make the queue exit
	  immediately after failure to reach any members and should not be
	  dependent on the timeout value passed to Queue (closes issue
	  #10127, reported by bcnit, repaired by me) ........

2007-07-09 16:35 +0000 [r74084]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Add Queue and DestinationChannel headers to the
	  AgentCalled manager event to be more like the rest of the events
	  in this module. (closes issue #10114, patch by kwakwaversal)

2007-07-09 15:34 +0000 [r74083]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 74082 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74082 | file | 2007-07-09 12:32:43 -0300 (Mon, 09 Jul
	  2007) | 2 lines Only destroy the scheduler context if it was
	  allocated. (issue #10124 reported by gzero) ........

2007-07-09 14:58 +0000 [r74048]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 74047 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74047 | mmichelson | 2007-07-09 09:57:41 -0500 (Mon, 09 Jul
	  2007) | 4 lines Fixed a logic error in leave_voicemail. Pass the
	  mailbox instead of the context to inbox_count when the context is
	  "default." (closes issue #10135, reported by yannj, repaired by
	  me) ........

2007-07-09 14:50 +0000 [r74044-74046]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_skinny.c, pbx/pbx_dundi.c: Merged revisions
	  74045 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r74045 | file | 2007-07-09 11:49:05 -0300 (Mon, 09 Jul 2007) | 2
	  lines Few minor thread synchronization tweaks. (issue #10124
	  reported by gzero) ........

	* /, configure, acinclude.m4: Merged revisions 74043 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r74043 | file | 2007-07-09 11:34:33 -0300 (Mon, 09 Jul
	  2007) | 2 lines Use AC_CHECK_HEADER to check for ptlib/openh323
	  to allow for cross compiling. (issue #9675 reported by zandbelt)
	  ........

2007-07-09 08:30 +0000 [r74024-74025]  Olle Johansson <oej@edvina.net>

	* CHANGES: Update with new features

	* apps/app_dial.c, channels/chan_local.c, channels/chan_sip.c,
	  include/asterisk/channel.h: Implementation of a feature that will
	  disable "missed calls" counters on SIP phones. If the call is
	  answered by another phone, other phones won't display the call as
	  "missed". You can also add an option to the dial command so that
	  you can have a "followme" scenario and not count the calls as
	  "missed" when you cancel the call. Thanks to Ramon and Frank for
	  feedback on this feature.

2007-07-09 04:09 +0000 [r73994]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/app.h, /, channels/chan_sip.c,
	  main/ast_expr2f.c, include/asterisk/channel.h,
	  funcs/func_devstate.c, apps/app_voicemail.c: Merged revisions
	  73985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73985 | tilghman | 2007-07-08 23:03:20 -0500 (Sun, 08 Jul 2007)
	  | 2 lines Doxygen formatting fixes; fixes errors while 'make
	  progdocs'. (Closes issue #10104) ........

2007-07-09 03:14 +0000 [r73931-73983]  Joshua Colp <jcolp@digium.com>

	* main/cdr.c, /: Merged revisions 73980 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73980 | file | 2007-07-09 00:13:19 -0300 (Mon, 09 Jul 2007) | 2
	  lines Give Agent channel names priority when doing CDR merging.
	  (issue #10011 reported by krtorio) ........

	* res/res_features.c: Use linkedlist macros for parking.

	* main/manager.c: Make sure the idText variable is empty, and put
	  it in the right place for the manager ack packet. (issue #10152
	  reported by srt)

	* /, pbx/pbx_config.c: Merged revisions 73930 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73930 | file | 2007-07-08 22:13:57 -0300 (Sun, 08 Jul 2007) | 2
	  lines Add a few sanity checks when writing out the dialplan.
	  (issue #10157 reported by dome) ........

2007-07-08 21:01 +0000 [r73911]  Tilghman Lesher <tlesher@digium.com>

	* configure, include/asterisk/autoconfig.h.in, main/ast_expr2.h,
	  main/ast_expr2.y, configure.ac, main/ast_expr2.c: Restore EXP2
	  and LOG2 functions, by providing mathematical identify functions,
	  when the underlying C functions are not available.

2007-07-08 13:22 +0000 [r73886]  Russell Bryant <russell@digium.com>

	* res/res_features.c: ast_exists_extension() does not return an
	  ast_device_state, so change this function to explicitly check for
	  the int return value. Also, make a few other minor changes such
	  as removing a variable.

2007-07-08 09:49 +0000 [r73850]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 73849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73849 | oej | 2007-07-08 11:47:31 +0200 (Sun, 08 Jul 2007) | 2
	  lines While tracking down a bug, I need some more history.
	  Dumphistory is very useful, indeed. ........

2007-07-07 16:44 +0000 [r73821]  Steve Murphy <murf@digium.com>

	* configure, include/asterisk/autoconfig.h.in, main/ast_expr2.y,
	  configure.ac, bootstrap.sh, main/ast_expr2.c: These changes fix
	  10145 and 10150, a prob with BSD and exp2/log2 not existing, as
	  well as the bootstrap needing a small upgrade for openbsd. Many
	  thanks to mvanbaak

2007-07-06 23:05 +0000 [r73771]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 73769 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73769 | russell | 2007-07-06 18:02:58 -0500
	  (Fri, 06 Jul 2007) | 12 lines Merged revisions 73768 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73768 | russell | 2007-07-06 18:01:22 -0500 (Fri, 06
	  Jul 2007) | 4 lines If a sip_pvt struct has already registered an
	  extension state callback, remove the old one before adding a new
	  one. If this isn't done, Asterisk will crash. (issue #10120)
	  ........ ................

2007-07-06 16:39 +0000 [r73728]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 73727 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73727 | mmichelson | 2007-07-06 11:36:17 -0500 (Fri, 06 Jul
	  2007) | 8 lines Fixing a rare case which causes voicemail to
	  crash when compiled with IMAP storage. inboxcount has the
	  possibility of finding an "interactive" vm_state when no
	  persistent "non-interactive" vm_state exists for that mailbox. If
	  this should happen when someone attempts to leave a message, it
	  results in a crash. This patch, along with my commit in revision
	  72670 fix issue 10053, reported by jaroth. closes issue #10053
	  ........

2007-07-06 16:30 +0000 [r73726]  Kevin P. Fleming <kpfleming@digium.com>

	* main/minimime/mimeparser.yy.c, main/minimime/mimeparser.h,
	  main/minimime/mimeparser.tab.c, main/minimime/mimeparser.y,
	  main/minimime/Makefile, main/minimime/mimeparser.l,
	  main/minimime/mimeparser.tab.h, main/minimime/mm_parse.c:
	  eliminate another batch of compiler warnings (and a bug, although
	  in code we aren't using)... note that this required manually
	  editing the lexer output code (generated by flex), so some of
	  them will come back if the lexer is rebuilt

2007-07-06 16:14 +0000 [r73680-73701]  Russell Bryant <russell@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 73696 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73696 | russell | 2007-07-06 11:12:51 -0500
	  (Fri, 06 Jul 2007) | 16 lines Merged revisions 73684 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73684 | russell | 2007-07-06 11:06:27 -0500 (Fri, 06
	  Jul 2007) | 8 lines (closes issue #10075) Reported by: apsaras
	  Patches submitted by: Corydon76 Tested by: apsaras Fix a problem
	  with MSSQL 2005 by explicitly stating that '\' is being used as
	  an escape character. ........ ................

	* /, channels/chan_sip.c: Merged revisions 73679 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73679 | russell | 2007-07-06 10:57:25 -0500
	  (Fri, 06 Jul 2007) | 15 lines Merged revisions 73678 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73678 | russell | 2007-07-06 10:55:41 -0500 (Fri, 06
	  Jul 2007) | 7 lines (closes issue #10125) Reported by: makoto
	  Patches submitted by: makoto This fixes a crash in chan_sip that
	  happens when the bindaddr setting is not valid on Asterisk
	  startup, gets fixed, and then a reload gets issued. ........
	  ................

2007-07-06 15:47 +0000 [r73677]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/busy.h (added), channels/ringtone.h (added),
	  channels/Makefile, channels: it really seems pointless to run
	  gentone to create these header files every time we build
	  Asterisk...

2007-07-06 15:28 +0000 [r73676]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 73675 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73675 | mmichelson | 2007-07-06 10:27:28 -0500
	  (Fri, 06 Jul 2007) | 13 lines Merged revisions 73674 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73674 | mmichelson | 2007-07-06 10:26:40 -0500 (Fri, 06
	  Jul 2007) | 5 lines Fixed a bug wherein agents get stuck busy.
	  (issue 9618, reported by jiddings, patched by moi) closes issue
	  #9618 ........ ................

2007-07-06 03:48 +0000 [r73557-73633]  Russell Bryant <russell@digium.com>

	* CHANGES: Redistribute a lot of the items that were in the Misc.
	  section

	* CHANGES: note TLS support for manager and HTTP in CHANGES

	* CREDITS: Philippe was listed twice

	* /, BUGS: Merged revisions 73629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73629 | russell | 2007-07-05 22:34:46 -0500 (Thu, 05 Jul 2007) |
	  1 line fix a little spelling error ........

	* /, channels/chan_sip.c: Merged revisions 73598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73598 | russell | 2007-07-05 18:59:22 -0500 (Thu, 05 Jul 2007) |
	  3 lines Fix a crash in chan_sip. Don't try to stop the monitor
	  thread if it was never started. (closes issue #10124, reported by
	  gzero, fixed by me) ........

	* /, channels/chan_iax2.c: Merged revisions 73555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73555 | russell | 2007-07-05 18:05:33 -0500 (Thu, 05 Jul 2007) |
	  3 lines copy from the correct buffer when deferring a full frame
	  (related to issue #9937) ........

2007-07-05 22:48 +0000 [r73553]  Kevin P. Fleming <kpfleming@digium.com>

	* main/minimime/mm_contenttype.c, main/minimime/mm_envelope.c,
	  main/minimime/mm_mimepart.c, main/minimime/mm_param.c,
	  main/minimime/mm_context.c, main/minimime/mm_mimeutil.c: comment
	  out some code that is not used and does not have prototypes

2007-07-05 22:32 +0000 [r73552]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 73551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73551 | russell | 2007-07-05 17:31:31 -0500 (Thu, 05 Jul 2007) |
	  6 lines * Store the call number that a thread is processing
	  without the full frame bit set to ease debugging * When deferring
	  a full frame for processing, stick it into the queue for the
	  thread that is processing frames for that call, not the one that
	  read the current frame and is about to go back into the idle list
	  (related to issue #9937) ........

2007-07-05 22:29 +0000 [r73550]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 73548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73548 | kpfleming | 2007-07-05 17:20:44 -0500
	  (Thu, 05 Jul 2007) | 10 lines Merged revisions 73547 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73547 | kpfleming | 2007-07-05 17:11:51 -0500 (Thu, 05
	  Jul 2007) | 2 lines we shouldn't allow G.723.1 endpoints to use
	  VAD, just like we don't support it for G.729 ........
	  ................

2007-07-05 22:23 +0000 [r73549]  Jason Parker <jparker@digium.com>

	* apps/app_queue.c: Add the ability to play an announcement to
	  queue caller just before bridging Issue 7479, patch by
	  tristan_mahe.

2007-07-05 20:52 +0000 [r73513-73514]  Russell Bryant <russell@digium.com>

	* main/ast_expr2.y, main/ast_expr2.c: resolve a compiler warning so
	  i can build in dev mode

	* /, res/res_features.c: Merged revisions 73512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73512 | russell | 2007-07-05 15:50:08 -0500 (Thu, 05 Jul 2007) |
	  5 lines Pass HOLD and UNHOLD frames to the other channel when
	  they are returned from a native bridge function. This fixes a
	  problem where when two zap channels are natively bridged and one
	  does a flash hook, the other channel did not receive music on
	  hold. (Reported to me directly by Doug Bailey at Digium) ........

2007-07-05 19:20 +0000 [r73468]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 73467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73467 | file | 2007-07-05 16:18:02 -0300 (Thu,
	  05 Jul 2007) | 10 lines Merged revisions 73466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r73466 | file | 2007-07-05 16:15:18 -0300 (Thu, 05 Jul 2007) | 2
	  lines Copy language information to the dialog structure when
	  calling a peer for situations where a PBX may be started on the
	  dialed channel. (issue #10121 reported by clegall_proformatique)
	  ........ ................

2007-07-05 18:15 +0000 [r73449]  Steve Murphy <murf@digium.com>

	* main/pbx.c, utils/expr2.testinput, main/ast_expr2.h,
	  main/ast_expr2.y, main/ast_expr2f.c, include/asterisk/ast_expr.h,
	  pbx/pbx_ael.c, UPGRADE.txt, doc/tex/channelvariables.tex,
	  utils/ael_main.c, main/ast_expr2.fl, main/ast_expr2.c,
	  utils/check_expr.c: In regards to changes for 9508, expr2 system
	  choking on floating point numbers, I'm adding this update to
	  round out (no pun intended) and make this FP-capable version of
	  the Expr2 stuff interoperate better with previous integer-only
	  usage, by providing Functions syntax, with 20 builtin functions
	  for floating pt to integer conversions, and some general floating
	  point math routines that might commonly be used also. Along with
	  this, I made it so if a function was not a builtin, it will try
	  and find it in the ast_custom_function list, and if found,
	  execute it and collect the results. Thus, you can call system
	  functions like CDR(), CHANNEL(), etc, from within $\[..\] exprs,
	  without having to wrap them in $\{...\} (curly brace) notation.
	  Did a valgrind on the standalone and made sure there's no mem
	  leaks. Looks good. Updated the docs, too.

2007-07-05 17:21 +0000 [r73432]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Remove directory creation of directories
	  we've never used.

2007-07-05 16:05 +0000 [r73402]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_queue.c: Merged revisions 73400 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73400 | mmichelson | 2007-07-05 10:59:41 -0500 (Thu, 05 Jul
	  2007) | 5 lines Correcting a minor CLI bug I found. When issuing
	  the queue show command, if you type queue show and then press
	  tab, you can continue pressing tab and it will keep
	  auto-completing queue names even though only 1 queue can be used
	  as an argument. ........

2007-07-05 15:29 +0000 [r73399]  Russell Bryant <russell@digium.com>

	* channels/chan_vpb.cc, /, channels/Makefile: Merged revisions
	  73398 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r73398 | russell | 2007-07-05 10:28:27 -0500 (Thu, 05 Jul 2007) |
	  2 lines Make this module build for me in dev-mode ........

2007-07-05 14:22 +0000 [r73317-73359]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /, apps/app_chanspy.c: Merged revisions 73355 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73355 | file | 2007-07-05 11:21:44 -0300 (Thu,
	  05 Jul 2007) | 10 lines Merged revisions 73349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r73349 | file | 2007-07-05 11:19:14 -0300 (Thu, 05 Jul 2007) | 2
	  lines Tweak spy locking. (issue #9951 reported by welles)
	  ........ ................

	* channels/chan_local.c, /: Merged revisions 73319 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73319 | file | 2007-07-05 10:27:40 -0300 (Thu,
	  05 Jul 2007) | 10 lines Merged revisions 73318 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r73318 | file | 2007-07-05 10:26:02 -0300 (Thu, 05 Jul 2007) | 2
	  lines Actually check to make sure a PBX was started on one of the
	  Local channels instead of blindly assuming it was. (issue #10112
	  reported by makoto) ........ ................

	* /, apps/app_queue.c: Merged revisions 73316 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73316 | file | 2007-07-05 10:22:13 -0300 (Thu,
	  05 Jul 2007) | 10 lines Merged revisions 73315 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r73315 | file | 2007-07-05 10:19:17 -0300 (Thu, 05 Jul 2007) | 2
	  lines Reset ServicelevelPerf variable back to 0 if we are unable
	  to calculate it each time... otherwise we will get previous
	  values. (issue #10117 reported by noriyuki) ........
	  ................

2007-07-05 07:45 +0000 [r73209-73298]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, channels/misdn/chan_misdn_config.h,
	  configs/misdn.conf.sample, channels/misdn_config.c: added general
	  Jitterbuffer Implementation. #9960

	* /, channels/misdn/isdn_lib.c: Merged revisions 73253 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73253 | crichter | 2007-07-04 16:53:48 +0200
	  (Mi, 04 Jul 2007) | 9 lines Merged revisions 73252 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73252 | crichter | 2007-07-04 16:50:58 +0200 (Mi, 04
	  Jul 2007) | 1 line bchannel configurations like echocancel and
	  volume control, need to be setuped on inbound calls too. ........
	  ................

	* channels/chan_misdn.c, /: Merged revisions 73208 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73208 | crichter | 2007-07-04 10:27:44 +0200
	  (Mi, 04 Jul 2007) | 9 lines Merged revisions 73207 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73207 | crichter | 2007-07-04 10:20:54 +0200 (Mi, 04
	  Jul 2007) | 1 line bad bug in overlapdial case, we called
	  start_pbx multiple times, because the state wasn't changed..
	  ........ ................

2007-07-03 22:17 +0000 [r73191]  Steve Murphy <murf@digium.com>

	* /: blocking 73143 (revert of 9508 bug fix for 1.4) -- don't want
	  it backed out of trunk, too

2007-07-03 21:44 +0000 [r73144-73175]  Jason Parker <jparker@digium.com>

	* apps/app_voicemail.c: mkstemp doesn't specify a file mode, so we
	  should chmod it to VOICEMAIL_FILE_MODE Taken from a larger patch
	  by ltd - the rest of which is no longer necessary in trunk.
	  Closes issue #9231

	* apps/app_meetme.c: Fix a build warning, and potential issue if
	  option p is not set at all.

	* apps/app_meetme.c: Add support for changing the exit key from #
	  to any DTMF. This does not break existing configs - the arguments
	  to p are optional. Issue 8827, initial patch by junky, mostly
	  rewritten by fw to re-use option p, further modified by me.

2007-07-03 18:25 +0000 [r73127]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Fix up the device state processing thread in
	  app_queue so that it's not possible for there to be entries in
	  the queue and the thread is just sleeping (Thanks to mmichelson
	  for bringing the problem to my attention)

2007-07-03 12:40 +0000 [r73054]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /: Merged revisions 73053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73053 | tilghman | 2007-07-03 07:38:53 -0500
	  (Tue, 03 Jul 2007) | 10 lines Merged revisions 73052 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73052 | tilghman | 2007-07-03 07:34:14 -0500 (Tue, 03
	  Jul 2007) | 2 lines RetryDial should accept a 0 argument, but it
	  does not, because atoi does not distinguish between 0 and error
	  (closes issue #10106) ........ ................

2007-07-03 08:22 +0000 [r73006]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 73005 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r73005 | crichter | 2007-07-03 10:17:06 +0200
	  (Di, 03 Jul 2007) | 9 lines Merged revisions 73004 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r73004 | crichter | 2007-07-03 10:04:35 +0200 (Di, 03
	  Jul 2007) | 1 line fixed issue, that misdn_l2l1_check could only
	  be called from mISDN Source channels.. #9449 ........
	  ................

2007-07-03 05:21 +0000 [r73003]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Typo (closes issue 10105)

2007-07-03 02:51 +0000 [r72987]  Jason Parker <jparker@digium.com>

	* res/res_jabber.c: Correct an issue where the wrong type was being
	  used to start sasl. Pointed out by and patch provided by mog.

2007-07-02 23:02 +0000 [r72982-72986]  Russell Bryant <russell@digium.com>

	* main/pbx.c, doc/tex/ast_funcdocs.tex (removed), main/manager.c,
	  doc/tex/ast_cli_commands.tex (removed), res/res_agi.c,
	  doc/tex/ast_appdocs.tex (removed), doc/tex/asterisk.tex,
	  doc/tex/ast_manager_actiondocs.tex (removed),
	  doc/tex/ast_agi_commands.tex (removed), main/cli.c: After some
	  discussion on the asterisk-dev list, we determined that this
	  approach for extracting application, function, manager, and agi
	  documentation is the wrong one to take. The most severe problem
	  is that the output depends on which modules are loaded as well as
	  compile time options, which both determine which parts are
	  available.

	* doc/jitterbuffer.tex (removed), doc/extensions.tex (removed),
	  doc/tex/ast_cli_commands.tex (added), doc/tex/ast_appdocs.tex
	  (added), doc/tex/realtime.tex (added), doc/qos.tex (removed),
	  doc/queues-with-callback-members.tex (removed), doc/tex/dundi.tex
	  (added), doc/ajam.tex (removed), doc/tex/cliprompt.tex (added),
	  doc/misdn.tex (removed), doc/manager.tex (removed),
	  doc/tex/chaniax.tex (added), doc/sla.tex (removed),
	  doc/billing.tex (removed), doc/tex/app-sms.tex (added),
	  build_tools/prep_tarball, doc/tex/ices.tex (added),
	  doc/localchannel.tex (removed), doc/cdrdriver.tex (removed),
	  doc/tex/asterisk.tex (added), doc/tex/queuelog.tex (added),
	  doc/freetds.tex (removed), doc/odbcstorage.tex (removed),
	  doc/tex/hardware.tex (added), doc/tex/mp3.tex (added), doc/tex
	  (added), doc/channelvariables.tex (removed), doc/ael.tex
	  (removed), doc/enum.tex (removed), doc/tex/configuration.tex
	  (added), doc/security.tex (removed), doc/tex/asterisk-conf.tex
	  (added), Makefile, doc/imapstorage.tex (removed),
	  doc/tex/ast_funcdocs.tex (added), doc/privacy.tex (removed),
	  doc/tex/ast_manager_actiondocs.tex (added),
	  doc/ast_agi_commands.tex (removed), doc/tex/jitterbuffer.tex
	  (added), doc/ast_cli_commands.tex (removed),
	  doc/tex/extensions.tex (added), doc/ast_appdocs.tex (removed),
	  doc/tex/queues-with-callback-members.tex (added), doc/tex/qos.tex
	  (added), doc/realtime.tex (removed), doc/dundi.tex (removed),
	  doc/tex/ajam.tex (added), doc/cliprompt.tex (removed),
	  doc/tex/manager.tex (added), doc/tex/misdn.tex (added),
	  doc/chaniax.tex (removed), doc/tex/README.txt (added),
	  doc/tex/sla.tex (added), doc/app-sms.tex (removed),
	  doc/tex/billing.tex (added), doc/ices.tex (removed),
	  doc/tex/localchannel.tex (added), doc/tex/cdrdriver.tex (added),
	  doc/asterisk.tex (removed), doc/queuelog.tex (removed),
	  doc/tex/odbcstorage.tex (added), doc/tex/freetds.tex (added),
	  doc/hardware.tex (removed), doc/mp3.tex (removed),
	  doc/tex/channelvariables.tex (added), doc/tex/ael.tex (added),
	  doc/tex/enum.tex (added), doc/configuration.tex (removed),
	  doc/tex/security.tex (added), doc/asterisk-conf.tex (removed),
	  doc/tex/imapstorage.tex (added), doc/ast_funcdocs.tex (removed),
	  doc/tex/privacy.tex (added), doc/tex/Makefile (added),
	  doc/ast_manager_actiondocs.tex (removed),
	  doc/tex/ast_agi_commands.tex (added): * Move LaTeX docs into a
	  tex/ subdirectory of the doc/ dir * Add a Makefile in doc/tex/
	  for generating PDF and HTML * Add a README.txt file to doc/tex/
	  to document which tools are used and what web sites to visit for
	  getting them. * Update build_tools/prep_tarball to put the proper
	  Asterisk version string in the automatically generated PDF for
	  release tarballs

2007-07-02 21:50 +0000 [r72940]  Steve Murphy <murf@digium.com>

	* utils/expr2.testinput, /, main/Makefile, main/ast_expr2.h,
	  main/ast_expr2.y, main/ast_expr2f.c, UPGRADE.txt,
	  main/ast_expr2.fl, main/ast_expr2.c: Merged revisions 72933 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72933 | murf | 2007-07-02 14:16:31 -0600 (Mon, 02 Jul 2007) | 1
	  line support for floating point numbers added to ast_expr2
	  $\[...\] exprs. Fixes bug 9508, where the expr code fails with fp
	  numbers. The MATH function returns fp numbers by default, so this
	  fix is considered necessary. ........

2007-07-02 20:45 +0000 [r72937-72939]  Russell Bryant <russell@digium.com>

	* res/res_agi.c, doc/ast_agi_commands.tex: Fix up the AGI doc dump
	  CLI command and update the AGI commands tex file to not include a
	  bunch of empty entries.

	* doc/ast_cli_commands.tex (added), doc/asterisk.tex: Add CLI
	  commands to the docs

	* main/cli.c: Add a CLI command to output docs on CLI commands to a
	  file

2007-07-02 20:35 +0000 [r72935-72936]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Yet another Solaris tweak...

	* res/res_limit.c: Fix building under Solaris.

2007-07-02 19:31 +0000 [r72920-72932]  Russell Bryant <russell@digium.com>

	* doc/asterisk.tex, doc/ast_agi_commands.tex (added): Add AGI
	  commands to the documentation

	* res/res_agi.c: Add a CLI command to export the AGI command docs

	* res/res_agi.c: Add a note that the AGI commands array is not
	  handled in a thread-safe way

	* doc/asterisk.tex, doc/ast_manager_actiondocs.tex (added): Update
	  the documentation to include a manager action reference

	* main/manager.c: Add a CLI command to dump the built-in manager
	  action documentation

	* main/manager.c, /: Merged revisions 72926 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72926 | russell | 2007-07-02 13:18:46 -0500 (Mon, 02 Jul 2007) |
	  3 lines Remove a bogus comment and add proper locking to the
	  handler function for the CLI command to show information on
	  manager actions. ........

	* doc/ast_funcdocs.tex (added), doc/asterisk.tex: update
	  documentation to include dialplan functions

	* main/pbx.c: Add "core dump funcdocs" CLI command

	* main/pbx.c: change the "core dump appdocs" CLI command to use the
	  new API for creating CLI commands

	* doc/ast_appdocs.tex: update application documentation dump

2007-07-02 14:39 +0000 [r72889]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 72888 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72888 | file | 2007-07-02 11:32:59 -0300 (Mon, 02 Jul 2007) | 2
	  lines Added additional DTMF debug messages for when emulation
	  occurs. ........

2007-07-02 09:34 +0000 [r72867-72869]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 72852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72852 | crichter | 2007-07-02 10:41:08 +0200
	  (Mo, 02 Jul 2007) | 9 lines Merged revisions 72585 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72585 | crichter | 2007-06-29 15:08:26 +0200 (Fr, 29
	  Jun 2007) | 1 line check if the bchannel stack id is already
	  used, if so don't use it a second time. Also added a release_chan
	  lock, so that the same chan_list object cannot be freed twice.
	  chan_misdn does not crash anymore on heavy load with these
	  changes. ........ ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_msg_parser.c, channels/misdn/isdn_lib.c:
	  Merged revisions 72851 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72851 | crichter | 2007-07-02 10:27:19 +0200
	  (Mo, 02 Jul 2007) | 9 lines Merged revisions 72099 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72099 | crichter | 2007-06-27 15:22:37 +0200 (Mi, 27
	  Jun 2007) | 1 line simplified generation for dummy bchannels,
	  also we mark them as dummies, so they are not used later as
	  real-bchannels, optimized the RESTART mechanisms, we block a
	  channel now on cause:44, and send out a RESTART automatically,
	  then on reception of RESTART_ACKNOWLEDGE we unblock the channel
	  again. ........ ................

	* channels/misdn/isdn_lib.h, /, channels/misdn/isdn_lib.c: Merged
	  revisions 72850 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72850 | crichter | 2007-07-02 10:14:43 +0200
	  (Mo, 02 Jul 2007) | 9 lines Merged revisions 72087 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72087 | crichter | 2007-06-27 11:26:53 +0200 (Mi, 27
	  Jun 2007) | 1 line simplified channel finding and locking a lot.
	  removed unnecessary #ifdefed areas. ........ ................

2007-07-01 23:53 +0000 [r72807]  Russell Bryant <russell@digium.com>

	* pbx/pbx_spool.c, /: Merged revisions 72806 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72806 | russell | 2007-07-01 18:52:45 -0500
	  (Sun, 01 Jul 2007) | 13 lines Merged revisions 72805 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72805 | russell | 2007-07-01 18:51:34 -0500 (Sun, 01
	  Jul 2007) | 5 lines When appending lines to call files to keep
	  track of retries, write a leading newline just in case the
	  original call file did not have a newline at the end. This fix is
	  in response to a problem I saw reported on the asterisk-users
	  mailing list. ........ ................

2007-06-30 16:53 +0000 [r72767]  Russell Bryant <russell@digium.com>

	* /, configure, configure.ac: Merged revisions 72766 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r72766 | russell | 2007-06-30 11:50:40 -0500 (Sat, 30
	  Jun 2007) | 3 lines Tweak the configure script so that error
	  output isn't spewed to the console when searching for GTK2 libs,
	  and they aren't found. ........

2007-06-29 21:37 +0000 [r72741]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c, configs/skinny.conf.sample: Add support
	  for regcontext and regexten to chan_skinny Issue 9762, patch by
	  mvanbaak.

2007-06-29 21:24 +0000 [r72738]  Russell Bryant <russell@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/http.c: Fix my recent change for sending large files via the
	  http server. This code *must* write the file to the FILE *, and
	  not the raw fd. Otherwise, it breaks TLS support. Thanks to rizzo
	  for catching this!

2007-06-29 21:14 +0000 [r72727]  Luigi Rizzo <rizzo@icir.org>

	* main/minimime/Makefile: As the comment in the code says: Use
	  weaker error checking because we have some automatically
	  generated files. However just mask out -Werror, because other
	  warnings below: -Wundef -Wstrict-prototypes
	  -Wmissing-declarations -Wmissing-prototypes may actually be
	  important and spot out real bugs.

2007-06-29 20:56 +0000 [r72701-72706]  Russell Bryant <russell@digium.com>

	* /, formats/format_pcm.c: Merged revisions 72705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72705 | russell | 2007-06-29 15:56:18 -0500 (Fri, 29 Jun 2007) |
	  1 line give format_pcm a more concise destription ........

	* include/asterisk/http.h, main/manager.c, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, main/http.c:
	  Merge changes from team/russell/http_filetxfer Handle
	  transferring large files from the built-in http server.
	  Previously, the code attempted to malloc a block as large as the
	  file itself. Now it uses the sendfile() system call so that the
	  file isn't copied into userspace at all if it is available.
	  Otherwise, it just uses a read/write of small chunks at a time.

2007-06-29 20:33 +0000 [r72700]  Luigi Rizzo <rizzo@icir.org>

	* main/Makefile: Make sure that we properly recurse in
	  subdirectories to check dependencies for libraries. Because these
	  targets (e.g. minimime/libmmime.a) are real ones, declaring them
	  .PHONY would cause them to be rebuilt every time (see e.g. SVN
	  64355). As a workaround I am using the following CHECK_SUBDIR
	  target: CHECK_SUBDIR: # do nothing, just make sure that we
	  recurse in the subdir/ minimime/libmmime.a: CHECK_SUBDIR @cd
	  minimime && $(MAKE) libmmime.a which seems to do a better job
	  than .PHONY (probably because .PHONY forces the rebuild even if
	  the recursive make does not think it is necessary). If this turns
	  out to be the correct approach, we can then merge it back into
	  1.4

2007-06-29 20:02 +0000 [r72670]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Found a grievous logical error in
	  get_vm_state_by_imapuser. The imapuser being passed in was never
	  getting compared to imapusers of any of the vm_states in the
	  vmstates list. I also found some places in the code where I used
	  my typical brace style and changed it to match the typical
	  Asterisk brace style.

2007-06-29 19:09 +0000 [r72666]  Luigi Rizzo <rizzo@icir.org>

	* /: 72665 not applicable to trunk

2007-06-29 04:56 +0000 [r72555-72557]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 72556 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72556 | tilghman | 2007-06-28 23:47:11 -0500 (Thu, 28 Jun 2007)
	  | 2 lines Issue 10055 - Change memory allocation to use the heap
	  for a command, since the output has the potential to overflow the
	  stack (as it did here) ........

2007-06-28 21:31 +0000 [r72539]  Jason Parker <jparker@digium.com>

	* Makefile, configure, configure.ac, makeopts.in: Apparently some
	  builds of gcc don't have declaration-after-statement. This checks
	  for it in configure, and only uses it if it's available. If it's
	  wrong, somebody please yell at me and tell me why.

2007-06-28 20:52 +0000 [r72524]  Dwayne M. Hubbard <dhubbard@digium.com>

	* funcs/func_math.c: Added AND, OR, and XOR bitwise operations to
	  MATH for issue 9891, thanks jcmoore

2007-06-28 19:41 +0000 [r72492]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_pgsql.c, res/res_config_odbc.c,
	  include/asterisk/strings.h: Remove the ill-advised ast_restrdupa
	  API call and related structures

2007-06-28 19:35 +0000 [r72490-72491]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: Fix building with
	  -Wdeclaration-after-statement, here too

	* res/res_jabber.c: Fix building with -Wdeclaration-after-statement

2007-06-28 19:07 +0000 [r72452-72466]  Luigi Rizzo <rizzo@icir.org>

	* /: 72462 is not applicable to trunk

	* res/res_features.c, apps/app_sms.c: move variable declarations to
	  the beginning of a block. Not applicable to previous branches.

	* channels/chan_skinny.c: move variable declarations to the
	  beginning of the block

	* apps/app_minivm.c: move variable declarations to the beginning of
	  a block. Not applicable to previous branches

	* /: 72453 was already applied to trunk some time ago

	* Makefile: Add -Wdeclaration-after-statement to AST_DEVMODE to
	  detect declarations in the middle of a block. Approved by:
	  Russel, Kevin The fallout will be fixed in separate commits. I am
	  doing this only on trunk only for the time being, because 1.4
	  still requires a bit more polishing to give a clean compile (at
	  least on FreeBSD).

2007-06-28 16:35 +0000 [r72437]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Fix bug where point code gets corrupted on
	  CPG

2007-06-27 23:30 +0000 [r72384]  Brett Bryant <bbryant@digium.com>

	* /, main/asterisk.c: Merged revisions 72383 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72383 | bbryant | 2007-06-27 18:29:14 -0500
	  (Wed, 27 Jun 2007) | 11 lines Merged revisions 72373 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72373 | bbryant | 2007-06-27 18:22:13 -0500 (Wed, 27
	  Jun 2007) | 3 lines Reinstating patch. This actually fixes the
	  problem, however I was running a development branch without it
	  and mistakenly thought it wasn't fixed. Fixes issue #10010, and
	  #9654: 100% CPU usage caused by an asterisk console losing it's
	  controlling terminal. ........ ................

2007-06-27 23:26 +0000 [r72354-72382]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 72381 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72381 | file | 2007-06-27 19:25:12 -0400 (Wed,
	  27 Jun 2007) | 10 lines Merged revisions 72378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r72378 | file | 2007-06-27 19:24:01 -0400 (Wed, 27 Jun 2007) | 2
	  lines Update documentation to clarify variable usage with
	  MixMonitor. (issue #9494 reported by netoguy) ........
	  ................

	* channels/chan_jingle.c: Silly jingle...

	* channels/chan_sip.c, CHANGES: Add SIPREFERRINGCONTEXT and
	  SIPREFERREDBYHDR variables when a transfer takes place. (issue
	  #8378 reported by jcovert)

2007-06-27 23:04 +0000 [r72337]  Brett Bryant <bbryant@digium.com>

	* /, main/asterisk.c: Merged revisions 72335 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72335 | bbryant | 2007-06-27 18:03:01 -0500
	  (Wed, 27 Jun 2007) | 10 lines Merged revisions 72333 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72333 | bbryant | 2007-06-27 17:58:53 -0500 (Wed, 27
	  Jun 2007) | 2 lines Reverted changes for earlier revisions 72259
	  to 72261. Issue #9654, #10010 ........ ................

2007-06-27 22:58 +0000 [r72330-72332]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 72331 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r72331 | file | 2007-06-27 18:58:02 -0400 (Wed, 27 Jun
	  2007) | 2 lines Make payload IDs for iLBC/Speex match to our
	  list. Since these are dynamic payloads the other side shouldn't
	  care. (issue #9426 reported by irroot) ........

	* /, apps/app_queue.c: Merged revisions 72328 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72328 | file | 2007-06-27 18:45:49 -0400 (Wed,
	  27 Jun 2007) | 10 lines Merged revisions 72327 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r72327 | file | 2007-06-27 18:43:11 -0400 (Wed, 27 Jun 2007) | 2
	  lines Fix issue where queue log events might be missing. (issue
	  #7765 reported by mtryfoss) ........ ................

2007-06-27 22:47 +0000 [r72329]  Mark Michelson <mmichelson@digium.com>

	* configs/voicemail.conf.sample, CHANGES, apps/app_voicemail.c:
	  Added ability to customize which buttons control forward,
	  reverse, pause, and stop during message playback. (closes issue
	  9474, reported and patched by jaroth with modifications by me)

2007-06-27 22:27 +0000 [r72325-72326]  Jason Parker <jparker@digium.com>

	* main/cli.c: Fix a segfault when trying to tab complete the "core
	  show uptime" command. Reported in #asterisk-dev on IRC by
	  jcmoore, fixed by me.

	* main/say.c: Add support for Thai language in say.c Issue 9417,
	  patch by dome, with some cleanup done by me.

2007-06-27 21:44 +0000 [r72304]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Let's NOT create a deadlock scenario here

2007-06-27 21:09 +0000 [r72274]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 72272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72272 | russell | 2007-06-27 16:08:34 -0500
	  (Wed, 27 Jun 2007) | 13 lines Merged revisions 72267 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72267 | russell | 2007-06-27 16:06:45 -0500 (Wed, 27
	  Jun 2007) | 5 lines Fix a minor issue with parsing the priority
	  number. You could have as much whitespace as you want around a
	  numeric priority, but you couldn't have any whitespace around a
	  special priority like "n" or "hint". (issue #10039, reported by
	  mitheloc, fixed by me) ........ ................

2007-06-27 20:47 +0000 [r72261]  Brett Bryant <bbryant@digium.com>

	* /, main/asterisk.c: Merged revisions 72260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72260 | bbryant | 2007-06-27 15:46:12 -0500
	  (Wed, 27 Jun 2007) | 12 lines Merged revisions 72259 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r72259 | bbryant | 2007-06-27 15:43:53 -0500 (Wed, 27
	  Jun 2007) | 4 lines Fixes 100% load when controlling terminal
	  disappears. Issue #9654, #10010 ........ ................

2007-06-27 20:26 +0000 [r72233-72258]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 72257 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72257 | file | 2007-06-27 16:25:24 -0400 (Wed,
	  27 Jun 2007) | 10 lines Merged revisions 72256 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r72256 | file | 2007-06-27 16:23:24 -0400 (Wed, 27 Jun 2007) | 2
	  lines I may possibly get shot for doing this... but... defer CDR
	  processing until after the channel has been dealt with. This
	  should eliminate all of the issues with channels going funky
	  (SIP/PRI) when you are posting CDRs to a database that is either
	  slow or unavailable and do not want to enable batching. ........
	  ................

	* /: Fix up properties.

	* main/logger.c: Fix -T option. (issue #10073 reported by xylome)

2007-06-27 19:50 +0000 [r72232]  Mark Michelson <mmichelson@digium.com>

	* /, configs/voicemail.conf.sample, CHANGES, apps/app_voicemail.c:
	  Adding feature to support the storage and retrieval of voicemail
	  greetings using IMAP storage. This feature may be turned on by
	  adding imapgreetings=yes to the general section of voicemail.conf
	  voicemail.conf.sample has details on the options added. As a
	  result, IMAP storage now has RETRIEVE and DISPOSE macros defined.
	  In addition to the IMAP greeting changes, I also have added an
	  enum for the voicemail folders and so now the code should be
	  easier to understand and maintain when it comes to this area.

2007-06-27 19:13 +0000 [r72207]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 72205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72205 | kpfleming | 2007-06-27 14:13:21 -0500 (Wed, 27 Jun 2007)
	  | 2 lines use the proper type for storing group number bits so
	  that if someone specifies 'group=42' it will actually work
	  instead of being silently ignored ........

2007-06-27 18:37 +0000 [r72183]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 72182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72182 | qwell | 2007-06-27 13:36:56 -0500 (Wed, 27 Jun 2007) | 4
	  lines Fix another problem in voicemail with missing symbols.
	  Issue 10074, patch by kryptolus, extended to include #if 0'd
	  blocks (just in case) ........

2007-06-27 17:34 +0000 [r72149]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 72148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72148 | file | 2007-06-27 13:31:50 -0400 (Wed, 27 Jun 2007) | 2
	  lines Make the ast_read_noaudio API call behave better under
	  circumstances where DTMF emulation was happening and a generator
	  was setup. (issue #10065 reported by stevefeinstein) ........

2007-06-27 17:14 +0000 [r72134]  Jason Parker <jparker@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 72125 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r72125 | qwell | 2007-06-27 12:10:32 -0500 (Wed, 27 Jun
	  2007) | 4 lines Don't modify a variable that we don't want
	  modified. Make a copy of it instead. Issue 10029, patch by
	  phsultan with slight modifications by me (to remove needless
	  casts). Note: chan_jingle in trunk does not appear to have the
	  same bug. ........

2007-06-27 16:38 +0000 [r72113]  Russell Bryant <russell@digium.com>

	* /, main/rtp.c: Merged revisions 72112 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72112 | russell | 2007-06-27 11:34:24 -0500 (Wed, 27 Jun 2007) |
	  3 lines Only output debug information related to RTCP timestamps
	  when RTCP debug is turned on (issue #10066, patch by me) ........

2007-06-27 08:08 +0000 [r72052]  Christian Richter <christian.richter@beronet.com>

	* /, channels/misdn/isdn_lib.c: Merged revisions 72042 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r72042 | crichter | 2007-06-27 09:58:06 +0200
	  (Mi, 27 Jun 2007) | 13 lines Merged revisions 72040-72041 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r72040 | crichter | 2007-06-27 09:49:27 +0200 (Mi, 27 Jun 2007) |
	  1 line for inbound TE calls, we setup the bchannel when we get
	  the CONNECT_ACKNOWLEDGE, to make sure mISDN has everything ready.
	  removed some #if 0 areas which weren't used anymore. ........
	  r72041 | crichter | 2007-06-27 09:54:30 +0200 (Mi, 27 Jun 2007) |
	  1 line isdn_lib.c didn't compile ........ ................

2007-06-27 01:00 +0000 [r71988-72007]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 72006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r72006 | file | 2007-06-26 20:58:35 -0400 (Tue, 26 Jun 2007) | 2
	  lines Make unloading of pbx_dundi actually work. ........

	* channels/chan_sip.c, funcs/func_channel.c, CHANGES: Add rtpdest
	  option to SIP CHANNEL() dialplan function to return the IP
	  address and port that RTP (be it audio/video/text) is going to.

2007-06-26 23:03 +0000 [r71952-71954]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 71953 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71953 | mmichelson | 2007-06-26 18:02:09 -0500 (Tue, 26 Jun
	  2007) | 4 lines Removing a pointless line. This variable was
	  already set earlier and between then and this line, there is no
	  way that the values on the right side of the assignment could
	  have changed. ........

	* apps/app_voicemail.c: The variable msgnum was being overwritten
	  if IMAP storage was enabled. Put necessary #ifndef's around the
	  line which would overwrite.

2007-06-26 20:36 +0000 [r71916]  Jason Parker <jparker@digium.com>

	* /, main/rtp.c: Merged revisions 71915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71915 | qwell | 2007-06-26 15:36:09 -0500 (Tue, 26 Jun 2007) | 4
	  lines Don't dereference a pointer that may be NULL here. Issue
	  10017. ........

2007-06-26 20:34 +0000 [r71883-71914]  Mark Michelson <mmichelson@digium.com>

	* apps/app_record.c: Create directory if it does not exist. (Closes
	  issue 10061, Reported and patched by eliel)

	* /, apps/app_voicemail.c: Merged revisions 71877 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71877 | mmichelson | 2007-06-26 14:00:05 -0500 (Tue, 26 Jun
	  2007) | 11 lines A few changes, the ultimate goal of which is to
	  keep better track of the number of messages that a mailbox
	  currently has. A description of the changes: 1. Changed the
	  "updated" field of the vm_state struct to act more as a binary
	  semaphore than a counting semaphore, since its current
	  implementation made the inboxcount function not work properly.
	  This change falls in line with a change made by UPenn with their
	  IMAP setup and helps to sync our changes with theirs. 2.
	  Eliminated some redundant calls to get_vm_state_by_mailbox inside
	  leave_voicemail 3. Use the play_folder variable to keep track of
	  the number of old and new messages in a mailbox as the messages
	  are deleted 4. Added an increment to the number of new messages
	  that was not there previously in the leave_voicemail function
	  ........

2007-06-26 16:39 +0000 [r71830]  Jason Parker <jparker@digium.com>

	* res/res_jabber.c: Simplify some code in res_jabber relating to
	  SASL support. Issue 9988, patch by phsultan.

2007-06-26 15:50 +0000 [r71797]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 71796 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71796 | mmichelson | 2007-06-26 10:47:31 -0500 (Tue, 26 Jun
	  2007) | 5 lines Fixing bug where the authuser was mistakenly
	  pulled from the mailbox string instead of the IMAP user. (closes
	  issue 10054, reported and patched by jaroth) ........

2007-06-26 12:30 +0000 [r71752]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 71751 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71751 | tilghman | 2007-06-26 07:27:47 -0500
	  (Tue, 26 Jun 2007) | 10 lines Merged revisions 71750 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r71750 | tilghman | 2007-06-26 07:25:58 -0500 (Tue, 26
	  Jun 2007) | 2 lines Issue 10062 - Trying to move a message
	  without selecting one first results in memory corruption ........
	  ................

2007-06-26 00:10 +0000 [r71721-71732]  Mark Michelson <mmichelson@digium.com>

	* configure, configure.ac: Fixes a problem where Asterisk would not
	  compile if IMAP_STORAGE was enabled. Needed to add a space
	  between file name and options.

	* apps/app_voicemail.c: In my commit earlier today, I accidentally
	  left a prototype that isn't defined. This gets rid of that
	  prototype.

2007-06-25 19:20 +0000 [r71688]  Russell Bryant <russell@digium.com>

	* doc/imapstorage.tex, configure, configure.ac,
	  apps/app_voicemail.c: Allow compilation off app_voicemail with
	  IMAP_STORAE against a system installed version of the c-client
	  library. (issue #10047, jcollie)

2007-06-25 18:20 +0000 [r71658]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_agi.c: Merged revisions 71657 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71657 | tilghman | 2007-06-25 13:14:59 -0500
	  (Mon, 25 Jun 2007) | 10 lines Merged revisions 71656 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r71656 | tilghman | 2007-06-25 13:12:37 -0500 (Mon, 25
	  Jun 2007) | 2 lines Issue 10035 - handle_exec returns a result
	  inconsistent with all of the other AGI commands ........
	  ................

2007-06-25 16:43 +0000 [r71637]  Steve Murphy <murf@digium.com>

	* main/cdr.c: Luigi's suggestion to move the llfrom decl was a good
	  one. Done.

2007-06-25 16:13 +0000 [r71630]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Using inboxcount instead of countmessages.

2007-06-25 15:35 +0000 [r71577-71613]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Tweak CLI command completion and some help
	  text. (issue #10049 reported by IgorG)

	* /, channels/chan_h323.c: Merged revisions 71576 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71576 | file | 2007-06-25 10:13:45 -0400 (Mon, 25 Jun 2007) | 2
	  lines Build a peer as well when hash323 is enabled in users.conf
	  (issue #9599 reported by asagage) ........

2007-06-25 13:42 +0000 [r71557]  Russell Bryant <russell@digium.com>

	* main/say.c, main/rtp.c, main/sched.c: Convert so more logging to
	  ast_debug (issue #10045, dimas)

2007-06-25 13:04 +0000 [r71521-71525]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_agent.c: Merged revisions 71522 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r71522 | file | 2007-06-25 09:03:03 -0400 (Mon, 25 Jun
	  2007) | 2 lines Minor tweak for queueing up the unhold frame...
	  this will teach me to do bugs while half asleep. (issue #10046
	  reported by dimas) ........

	* res/res_agi.c: Minor header inclusion tweak for new usage of
	  stat()

2007-06-25 12:40 +0000 [r71520]  Russell Bryant <russell@digium.com>

	* doc/asterisk-mib.txt, /: Merged revisions 71519 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71519 | russell | 2007-06-25 07:40:06 -0500 (Mon, 25 Jun 2007) |
	  2 lines Fix a typo in the Asterisk mib. (issue #10048, Matti)
	  ........

2007-06-25 09:46 +0000 [r71475-71500]  Christian Richter <christian.richter@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_lib.c: Merged revisions 71214 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71214 | crichter | 2007-06-23 00:44:42 +0200
	  (Sa, 23 Jun 2007) | 9 lines Merged revisions 70341 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70341 | crichter | 2007-06-20 17:29:09 +0200 (Mi, 20
	  Jun 2007) | 1 line fixed a bug that was introduced by copy and
	  paste in the last commit ..bchannels weren't cleaned properly.
	  ........ ................

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 71123 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71123 | crichter | 2007-06-22 17:38:08 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 70672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70672 | crichter | 2007-06-21 15:11:29 +0200 (Do, 21
	  Jun 2007) | 1 line we activate the bchannels in TE mode on
	  incoming calls only when we want to connect the call. ........
	  ................

	* /, channels/misdn/isdn_lib.c: Merged revisions 71122 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71122 | crichter | 2007-06-22 17:34:31 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 70342 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70342 | crichter | 2007-06-20 17:42:39 +0200 (Mi, 20
	  Jun 2007) | 1 line forgot one place .. ........ ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_lib.c: Merged revisions 71121 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71121 | crichter | 2007-06-22 17:32:54 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 70311 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70311 | crichter | 2007-06-20 16:47:59 +0200 (Mi, 20
	  Jun 2007) | 1 line on receiption of cause:44 we mark the channel
	  as in use and inform the user about the situation, we need to
	  test the RESTART stuff then. Also shuffled the
	  empty_chan_in_stack function after the bchannel cleaning
	  functions, to avoid race conditions. ........ ................

	* channels/chan_misdn.c, /: Merged revisions 71120 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71120 | crichter | 2007-06-22 17:30:08 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 69887 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r69887 | crichter | 2007-06-19 15:23:04 +0200 (Di, 19
	  Jun 2007) | 1 line when we send out a SETUP, but get no response,
	  we should cleanup everything after reception of a hangup.
	  ........ ................

	* /, channels/misdn/isdn_msg_parser.c: Merged revisions 71118 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71118 | crichter | 2007-06-22 17:27:53 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 69053 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r69053 | crichter | 2007-06-13 11:55:54 +0200 (Mi, 13
	  Jun 2007) | 1 line restart indicator 0x80 is correct, at least
	  that's what libpri does. ........ ................

	* channels/chan_misdn.c, /: Merged revisions 71106 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71106 | crichter | 2007-06-22 17:22:06 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 68887 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68887 | crichter | 2007-06-12 10:35:22 +0200 (Di, 12
	  Jun 2007) | 1 line if the bridged partner is mISDN too we should
	  not send dtmf tones, they are transmitted inband always ........
	  ................

	* channels/chan_misdn.c, /: Merged revisions 71096 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71096 | crichter | 2007-06-22 17:17:04 +0200
	  (Fr, 22 Jun 2007) | 9 lines Merged revisions 68874 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68874 | crichter | 2007-06-12 09:48:52 +0200 (Di, 12
	  Jun 2007) | 1 line if we have already some digits, we just stop
	  the tones. ........ ................

2007-06-25 01:11 +0000 [r71413-71434]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 71430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71430 | file | 2007-06-24 21:10:06 -0400 (Sun,
	  24 Jun 2007) | 10 lines Merged revisions 71414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r71414 | file | 2007-06-24 21:02:49 -0400 (Sun, 24 Jun 2007) | 2
	  lines Ignore other URIs after the first in a 300 Multiple Choice
	  response. (issue #10041 reported by homesick) ........
	  ................

	* main/cdr.c, /: Merged revisions 71422 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71422 | file | 2007-06-24 21:07:31 -0400 (Sun, 24 Jun 2007) | 2
	  lines Fix it so 1.4 actually compiles on my box. ........

	* /, channels/chan_agent.c: Merged revisions 71412 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r71412 | file | 2007-06-24 20:49:21 -0400 (Sun, 24 Jun
	  2007) | 2 lines Check to make sure the channel pointer is present
	  before queueing up an unhold frame on it. (issue #10046 reported
	  by dimas) ........

2007-06-24 20:17 +0000 [r71338-71372]  Russell Bryant <russell@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 71371 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r71371 | russell | 2007-06-24 15:16:32 -0500 (Sun, 24
	  Jun 2007) | 3 lines Include the menuselect-tree file in tarballs
	  to make builds from tarballs a little bit faster ........

	* /, main/asterisk.c: Merged revisions 71362 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71362 | russell | 2007-06-24 15:06:31 -0500
	  (Sun, 24 Jun 2007) | 10 lines Merged revisions 71358 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r71358 | russell | 2007-06-24 15:04:21 -0500 (Sun, 24
	  Jun 2007) | 2 lines Revert the patch from issue 9654 due to an
	  unexpected side effect ........ ................

	* main/udptl.c, apps/app_meetme.c, main/say.c, main/translate.c,
	  main/jitterbuf.c, apps/app_test.c, main/rtp.c, main/loader.c,
	  main/io.c, main/manager.c, apps/app_skel.c, apps/app_minivm.c,
	  main/logger.c, main/http.c, apps/app_rpt.c, main/sched.c:
	  Conversions to ast_debug() (issue #9984, patches from eliel and
	  dimas)

2007-06-24 17:51 +0000 [r71268-71292]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_features.c: Merged revisions 71291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71291 | tilghman | 2007-06-24 12:50:24 -0500 (Sun, 24 Jun 2007)
	  | 2 lines Issue 10044 - chan->cdr is NULL here, so peer->cdr is
	  what we really wanted to use ........

	* main/manager.c, /, main/db.c: Merged revisions 71289 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71289 | tilghman | 2007-06-24 12:39:34 -0500
	  (Sun, 24 Jun 2007) | 10 lines Merged revisions 71288 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r71288 | tilghman | 2007-06-24 12:32:21 -0500 (Sun, 24
	  Jun 2007) | 2 lines Issue 10043 - There is a legitimate need to
	  be able to set variables to the empty string. ........
	  ................

	* apps/app_mixmonitor.c: Issue 9970 - Ensure directory exists
	  before trying to write an output file

2007-06-23 03:32 +0000 [r71231]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /, res/res_features.c: Merged revisions 71230 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71230 | murf | 2007-06-22 21:29:48 -0600 (Fri, 22 Jun 2007) | 1
	  line This patch is meant to fix 8433; where clid and src are lost
	  via bridging. ........

2007-06-22 19:53 +0000 [r71190]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_sms.c: Code cleanups

2007-06-22 16:19 +0000 [r71146-71158]  Joshua Colp <jcolp@digium.com>

	* res/res_agi.c: Use stat to determine whether the file exists or
	  not. (issue #10038 reported by Mike Anikienko)

	* main/rtp.c: Behold the magic of casting!

2007-06-22 15:15 +0000 [r71093]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /, main/rtp.c: Merged revisions 71063 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r71063 | murf | 2007-06-22 08:10:24 -0600 (Fri, 22 Jun
	  2007) | 1 line My conditions for merging amaflags info was naive;
	  DOCUMENTATION is the default, although null is possible; theft of
	  user-settable fields is not good. Just copy them, leave them
	  alone. This is for bug 10016. (plus a small fix to rtp, to elim a
	  compiler warning (dev mode)) ........

2007-06-22 15:03 +0000 [r71069]  Jason Parker <jparker@digium.com>

	* /, res/res_agi.c, main/file.c, apps/app_speech_utils.c: Merged
	  revisions 71068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71068 | qwell | 2007-06-22 10:00:30 -0500 (Fri,
	  22 Jun 2007) | 12 lines Merged revisions 71065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r71065 | qwell | 2007-06-22 09:52:18 -0500 (Fri, 22 Jun 2007) | 4
	  lines Fix a few silly usages of ast_playstream() - it only ever
	  returns 0... Issue 10035 ........ ................

2007-06-22 14:56 +0000 [r71067]  Brett Bryant <bbryant@digium.com>

	* /, main/asterisk.c: Merged revisions 71066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r71066 | bbryant | 2007-06-22 09:53:08 -0500
	  (Fri, 22 Jun 2007) | 18 lines Merged revisions 71064 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r71064 | bbryant | 2007-06-22 09:39:34 -0500 (Fri, 22
	  Jun 2007) | 10 lines Fixed infinite loop when controlling
	  terminal was lost and return value of input function wasn't
	  checked for errors. This would cause 100% cpu to be taken up.
	  (closes issue #9654, issue #10010) Reported by: mnicholson, and
	  eserra Idea for the patch from mnicholson, patched by me ........
	  ................

2007-06-22 04:35 +0000 [r71040]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, include/asterisk/utils.h, pbx/pbx_spool.c,
	  apps/app_dictate.c, apps/app_minivm.c, apps/app_test.c,
	  main/logger.c, main/utils.c, apps/app_sms.c, res/res_monitor.c,
	  apps/app_voicemail.c: Issue 9990 - New API ast_mkdir, which
	  creates parent directories as necessary (and is faster than an
	  outcall to mkdir -p)

2007-06-22 04:13 +0000 [r71024]  Jason Parker <jparker@digium.com>

	* build_tools/cflags.xml, main/asterisk.c: Nothing to see here.

2007-06-22 03:15 +0000 [r71004]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 71003 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r71003 | russell | 2007-06-21 22:14:41 -0500 (Thu, 21 Jun 2007) |
	  3 lines Fix a small typo which ... well ... completely broke
	  chan_iax2. oops! (issue #9937, patch by me) ........

2007-06-21 23:07 +0000 [r70961]  Jason Parker <jparker@digium.com>

	* main/manager.c, configs/manager.conf.sample,
	  include/asterisk/manager.h, main/rtp.c: Add manager events for
	  RTCP statistics. Also adds a new "reporting" permission for
	  manager, since it can be incredibly spammy. This permission was
	  discussed on the -dev mailing list some months back. Issue 8613,
	  patch by johann8384, with some minor changes by me.

2007-06-21 22:41 +0000 [r70951]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 70949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70949 | murf | 2007-06-21 16:34:41 -0600 (Thu,
	  21 Jun 2007) | 9 lines Merged revisions 70948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r70948 | murf | 2007-06-21 16:29:50 -0600 (Thu, 21 Jun 2007) | 1
	  line This little fix is in response to bug 10016, but may not
	  cure it. The code is wrong, clearly. In a situation where you set
	  the CDR's amaflags, and then ForkCDR, and then set the new CDR's
	  amaflags to some other value, you will see that all CDRs have had
	  their amaflags changed. This is not good. So I fixed it. ........
	  ................

2007-06-21 21:41 +0000 [r70900]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 70899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70899 | file | 2007-06-21 17:40:19 -0400 (Thu,
	  21 Jun 2007) | 10 lines Merged revisions 70898 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r70898 | file | 2007-06-21 17:37:55 -0400 (Thu, 21 Jun 2007) | 2
	  lines Don't explode if the gain option is specified without a
	  value. (issue #9274 reported by mfarver) ........
	  ................

2007-06-21 21:16 +0000 [r70877-70887]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 70883 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70883 | russell | 2007-06-21 16:14:53 -0500 (Thu, 21 Jun 2007) |
	  3 lines Put the thread reading from the socket back in the idle
	  list if it deferred the processing of a full frame to another
	  thread ........

	* /, channels/chan_iax2.c: Merged revisions 70866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70866 | russell | 2007-06-21 16:07:04 -0500 (Thu, 21 Jun 2007) |
	  5 lines If a full frame is received while one of the iax2 threads
	  is in the middle of handling a full frame for the same call,
	  queue it up for processing by that same thread later instead of
	  dropping it. (issue #9937, patch by me) ........

2007-06-21 20:28 +0000 [r70857]  Steve Murphy <murf@digium.com>

	* /, cdr/cdr_custom.c: Merged revisions 70841 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70841 | murf | 2007-06-21 14:19:36 -0600 (Thu,
	  21 Jun 2007) | 9 lines Merged revisions 70804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r70804 | murf | 2007-06-21 13:13:17 -0600 (Thu, 21 Jun 2007) | 1
	  line it was pointed out that the cdr_custom config load could get
	  a lock, and under certain circumstances, would never release it.
	  I also noted that the situation where more than one mapping spec
	  was warned about, but did not ignore further mappings as it had
	  promised. I think I have fixed both situations. ........
	  ................

2007-06-21 19:54 +0000 [r70809]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 70808 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70808 | mmichelson | 2007-06-21 14:49:44 -0500 (Thu, 21 Jun
	  2007) | 4 lines When volgain is used don't leave a temporary file
	  behind. (Closes Issue 8514, Reported and patched by ulogic, code
	  reviewed by Jason Parker) ........

2007-06-21 19:08 +0000 [r70794]  Kevin P. Fleming <kpfleming@digium.com>

	* build_tools/make_buildopts_h: when we are building modules that
	  other modules depend on, create preprocessor defines (in
	  buildopts.h) marking that those modules were built

2007-06-21 18:40 +0000 [r70783]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c: Merge changes from team/russell/sla_reload *
	  Add support for the reload of sla.conf (closes issue #9481, patch
	  by me)

2007-06-21 18:03 +0000 [r70769]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Remove deprecated function call

2007-06-21 15:58 +0000 [r70729-70731]  Joshua Colp <jcolp@digium.com>

	* res/res_agi.c: Expand AGISTATUS variable to include NOTFOUND
	  which is set when the AGI file could not be found. (issue #9285
	  reported by srdjan)

	* /, main/rtp.c: Merged revisions 70727 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70727 | file | 2007-06-21 11:22:39 -0400 (Thu, 21 Jun 2007) | 2
	  lines Do not Packet2Packet bridge if packetization settings do
	  not allow it. (issue #9117 reported by phsultan) ........

2007-06-21 15:23 +0000 [r70728]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 70726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70726 | russell | 2007-06-21 10:21:16 -0500 (Thu, 21 Jun 2007) |
	  2 lines Remove a couple of duplicate unlocks ........

2007-06-21 14:00 +0000 [r70678]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 70677 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70677 | file | 2007-06-21 09:58:36 -0400 (Thu, 21 Jun 2007) | 2
	  lines Fix building with ODBC storage enabled. (issue #10025
	  reported by denisgalvao) ........

2007-06-21 13:18 +0000 [r70676]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 70656 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70656 | murf | 2007-06-21 07:00:39 -0600 (Thu, 21 Jun 2007) | 1
	  line Via complaints aired in asterisk-users, I submit these
	  changes, which allow cdr updates to see macro context/exten,
	  whether hung up or not ........

2007-06-20 23:33 +0000 [r70613]  Jason Parker <jparker@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 70612 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70612 | qwell | 2007-06-20 18:32:39 -0500 (Wed, 20 Jun 2007) | 4
	  lines Fix some potential memory leaks in cdr_pgsql. Issue 10020,
	  patch by me, with credit to prashant_jois for pointing out the
	  problem. ........

2007-06-20 23:31 +0000 [r70611]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Removed an extraneous debug message I'd
	  left in my previous commit

2007-06-20 23:31 +0000 [r70610]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, apps/app_queue.c: Fix trunk brokenness; also,
	  optimize application registration

2007-06-20 23:26 +0000 [r70607]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, main/pbx.c, apps/app_queue.c: Cleaning up a
	  small disaster I created earlier

2007-06-20 22:55 +0000 [r70555-70561]  Jason Parker <jparker@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 70560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70560 | qwell | 2007-06-20 17:55:21 -0500 (Wed, 20 Jun 2007) | 1
	  line Fix a stupid mistake in my last cdr_pgsql race condition fix
	  ........

	* /, cdr/cdr_pgsql.c: Merged revisions 70554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70554 | qwell | 2007-06-20 17:31:35 -0500 (Wed, 20 Jun 2007) | 4
	  lines Fix a race condition in cdr_pgsql that can occur when
	  reloading the module. Issue 10022, patch by me, with credit to
	  prashant_jois for finding the bug. ........

2007-06-20 22:24 +0000 [r70553]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 70552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70552 | file | 2007-06-20 18:22:20 -0400 (Wed,
	  20 Jun 2007) | 10 lines Merged revisions 70551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r70551 | file | 2007-06-20 18:20:16 -0400 (Wed, 20 Jun 2007) | 2
	  lines Don't overwrite the configured username setting upon a
	  REGISTER. (issue #8565 reported by jsmith) ........
	  ................

2007-06-20 21:38 +0000 [r70531]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, apps/app_queue.c: As per 9228, now app_queue
	  should have the proper machinery to do gosubs.

2007-06-20 21:31 +0000 [r70530]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Main fix: Fixing a bug which caused
	  VoiceMailMain to always report that you had 0 messages when using
	  IMAP storage. Secondary fixes: adding locks to list access in
	  several places Big thanks to Russell Bryant for helping out with
	  this.

2007-06-20 20:54 +0000 [r70493-70495]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 70494 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r70494 | qwell | 2007-06-20 15:53:16 -0500 (Wed, 20 Jun
	  2007) | 4 lines Make sure we clear the previously dialed number
	  if it did not exist. Issue 9958. ........

	* main/http.c: Revert the change made in revision 45474, since this
	  causes other issues. Issue 10021.

2007-06-20 20:10 +0000 [r70461]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael.tab.c, pbx/ael/ael.y, pbx/ael/ael_lex.c,
	  pbx/pbx_ael.c, doc/ael.tex, include/asterisk/ael_structs.h,
	  pbx/ael/ael.tab.h, CHANGES, pbx/ael/ael.flex: This finishes the
	  changes for making Macro args LOCAL to the call, and allowing
	  users to declare local variables.

2007-06-20 19:30 +0000 [r70446]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, /: Merged revisions 70445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70445 | tilghman | 2007-06-20 14:29:23 -0500
	  (Wed, 20 Jun 2007) | 10 lines Merged revisions 70444 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70444 | tilghman | 2007-06-20 14:25:54 -0500 (Wed, 20
	  Jun 2007) | 2 lines Issue 9997 - Timelimit times out the wrong
	  channel ........ ................

2007-06-20 18:48 +0000 [r70398]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 70397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70397 | russell | 2007-06-20 13:46:49 -0500
	  (Wed, 20 Jun 2007) | 13 lines Merged revisions 70396 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r70396 | russell | 2007-06-20 13:45:38 -0500 (Wed, 20
	  Jun 2007) | 5 lines Fix a problem where an established call would
	  not be properly disconnected when a PRI disconnect is received
	  depending on which cause code was received. (issue #9588,
	  original patch by softins, updated patch from jtexter3, and some
	  additional feedback from mhardeman) ........ ................

2007-06-20 17:55 +0000 [r70361]  Joshua Colp <jcolp@digium.com>

	* main/frame.c, /, main/rtp.c: Merged revisions 70360 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r70360 | file | 2007-06-20 13:52:57 -0400 (Wed, 20 Jun
	  2007) | 2 lines Put the speex packetization values back in but
	  disable it when setting up the smoother. ........

2007-06-20 17:35 +0000 [r70358]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_dial.c, pbx/pbx_ael.c: Merge work to make U(...) option
	  work for Dial

2007-06-20 14:33 +0000 [r70310]  Olle Johansson <oej@edvina.net>

	* channels/chan_zap.c: Show TDD status in "zap show channels"
	  Inspired by work at Omnitor in Sweden

2007-06-20 13:00 +0000 [r70253-70291]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Oops, shouldn't have taken that last shortcut
	  (also add some checks)

	* apps/app_stack.c: Another method of doing local variables,
	  hopefully a little closer to what codefreeze had in mind

	* apps/app_stack.c: Local variables for codefreeze

2007-06-20 02:13 +0000 [r70234]  Russell Bryant <russell@digium.com>

	* /, contrib/scripts/ast_grab_core: Merged revisions 70164 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70164 | russell | 2007-06-19 19:03:22 -0500 (Tue, 19 Jun 2007) |
	  2 lines don't delete the backtrace in ast_grab_core ........

2007-06-20 00:26 +0000 [r70199]  Joshua Colp <jcolp@digium.com>

	* main/frame.c, /: Merged revisions 70198 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70198 | file | 2007-06-19 20:24:36 -0400 (Tue, 19 Jun 2007) | 2
	  lines Don't do packetization/smoother stuff with speex, it
	  doesn't work. ........

2007-06-19 23:38 +0000 [r70122-70162]  Steve Murphy <murf@digium.com>

	* CHANGES: Added a little verbage to CHANGES

	* apps/app_dial.c, apps/app_queue.c, apps/app_rpt.c: Via bug9228,
	  no way to create macros via AEL, and some of the apps allow you
	  to call macros..., I modded the apps that allow macro calls to
	  allow gosubs calls also, to make them AEL compliant.

	* UPGRADE.txt, CHANGES: Moved those comments from UPGRADE.txt to
	  CHANGES. Ooops.

	* UPGRADE.txt: Some UPGRADE.txt comments to cover some enhancements
	  added today.

	* configs/cdr_manager.conf.sample, cdr/cdr_manager.c: This
	  enhancement provided via bug 9993, a patch to upgrade cdr_manager
	  to have cdr_custom capabilities. Many thanks to eserra for this
	  contribution

2007-06-19 19:15 +0000 [r70088]  Russell Bryant <russell@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 70084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r70084 | russell | 2007-06-19 14:13:45 -0500 (Tue, 19 Jun 2007) |
	  3 lines Only attempt to queue a hangup on the owner channel if it
	  actually exists. (issue #9795, patch from zandbelt) ........

2007-06-19 18:31 +0000 [r70063]  Steve Murphy <murf@digium.com>

	* main/channel.c, /: Merged revisions 70062 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70062 | murf | 2007-06-19 12:23:23 -0600 (Tue,
	  19 Jun 2007) | 9 lines Merged revisions 70053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r70053 | murf | 2007-06-19 12:07:59 -0600 (Tue, 19 Jun 2007) | 1
	  line This fixes 9246, where channel variables are not available
	  in the 'h' exten, on a 'ZOMBIE' channel. The fix is to
	  consolidate the channel variables during a masquerade, and then
	  copy the merged variables back onto the clone, so the zombie has
	  the same vars that the 'original' has. ........ ................

2007-06-19 17:09 +0000 [r70006]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 70003 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r70003 | file | 2007-06-19 13:07:40 -0400 (Tue,
	  19 Jun 2007) | 10 lines Merged revisions 69992 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69992 | file | 2007-06-19 13:00:58 -0400 (Tue, 19 Jun 2007) | 2
	  lines Handle the CC field in the RTP header. (issue #9384
	  reported by DoodleHu) ........ ................

2007-06-19 17:07 +0000 [r70001]  Steve Murphy <murf@digium.com>

	* include/asterisk/callerid.h, channels/chan_zap.c,
	  doc/India-CID.txt (added), configs/zapata.conf.sample: These
	  changes were submitted via bug 6683, to allow CID detection in
	  India, with carriers that do Polarity/DTMF CID signalling.

2007-06-19 16:25 +0000 [r69988]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 69987 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69987 | file | 2007-06-19 12:24:31 -0400 (Tue,
	  19 Jun 2007) | 10 lines Merged revisions 69986 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69986 | file | 2007-06-19 12:21:29 -0400 (Tue, 19 Jun 2007) | 2
	  lines Update BRIDGEPEER variable if set to the new channel name
	  when a masquerade happens. (issue #9699 reported by dimas)
	  ........ ................

2007-06-19 15:27 +0000 [r69945]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69944 | russell | 2007-06-19 10:22:36 -0500 (Tue, 19 Jun 2007) |
	  10 lines Fix a crash that could occur when handing device state
	  changes. When the state of a device changes, the device state
	  thread tells the extension state handling code that it changed.
	  Then, the extension state code calls the callback in chan_sip so
	  that it can update subscriptions to that extension. A pointer to
	  a sip_pvt structure is passed to this function as the call which
	  needs a NOTIFY sent. However, there was no locking done to ensure
	  that the pvt struct didn't disappear during this process. (issue
	  #9946, reported by tdonahue, patch by me, patch updated to trunk
	  to use the sip_pvt lock wrappers by eliel) ........

2007-06-19 15:14 +0000 [r69943]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: Add support for
	  setting nature of address, presentation, and other related SS7
	  number options (#10000)

2007-06-19 13:56 +0000 [r69850-69896]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 69895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69895 | file | 2007-06-19 09:55:25 -0400 (Tue,
	  19 Jun 2007) | 10 lines Merged revisions 69894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69894 | file | 2007-06-19 09:54:03 -0400 (Tue, 19 Jun 2007) | 2
	  lines Perform an extra hangup check just in case. (issue #9589
	  reported by bcnit) ........ ................

	* /, res/res_features.c: Merged revisions 69847 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69847 | file | 2007-06-19 09:00:57 -0400 (Tue,
	  19 Jun 2007) | 10 lines Merged revisions 69846 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69846 | file | 2007-06-19 08:57:55 -0400 (Tue, 19 Jun 2007) | 2
	  lines Add parked call extension AFTER the parking slot has been
	  announced, otherwise two threads will try to handle the same
	  channel and it will go kaboom. (issue #9191 reported by japple)
	  ........ ................

2007-06-18 23:28 +0000 [r69808-69809]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Undoing my last commit. I misread the code
	  before.

	* apps/app_voicemail.c: Cleaned up a section where there were two
	  consecutive identical if statements. Combined the bodies of the
	  two into one if. I blame svn merging for this.

2007-06-18 22:23 +0000 [r69807]  Brett Bryant <bbryant@digium.com>

	* apps/app_queue.c: Fixed issue where 'stop gracfeully' was hanging
	  ...

2007-06-18 21:58 +0000 [r69806]  Joshua Colp <jcolp@digium.com>

	* /, main/callerid.c: Merged revisions 69805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69805 | file | 2007-06-18 17:57:10 -0400 (Mon, 18 Jun 2007) | 2
	  lines Fix for building on PowerPC under Linux. ........

2007-06-18 19:52 +0000 [r69797]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69796 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69796 | tilghman | 2007-06-18 14:48:17 -0500 (Mon, 18 Jun 2007)
	  | 2 lines Issue 10005 - Segfault with missing arguments, plus fix
	  a missing define for SIP INFO channels ........

2007-06-18 19:02 +0000 [r69779-69795]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69794 | file | 2007-06-18 15:00:50 -0400 (Mon, 18 Jun 2007) | 2
	  lines Don't count RTP timeout when involved in a T38 fax session.
	  (issue #9222 reported by ivoc) ........

	* /, channels/chan_sip.c: Merged revisions 69775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69775 | file | 2007-06-18 14:18:12 -0400 (Mon,
	  18 Jun 2007) | 10 lines Merged revisions 69765 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69765 | file | 2007-06-18 14:13:03 -0400 (Mon, 18 Jun 2007) | 2
	  lines Set the peer name on the dialog to the one configured in
	  sip.conf and NOT the username to be used for authentication
	  attempts. (issue #9967 reported by achauvin) ........
	  ................

2007-06-18 17:50 +0000 [r69745-69746]  Tilghman Lesher <tlesher@digium.com>

	* /, contrib/scripts/safe_asterisk: Merged revisions 69744 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69744 | tilghman | 2007-06-18 12:46:40 -0500
	  (Mon, 18 Jun 2007) | 10 lines Merged revisions 69743 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r69743 | tilghman | 2007-06-18 12:45:15 -0500 (Mon, 18
	  Jun 2007) | 2 lines Issue 9998 - Remove SIG prefix, since it's
	  not supported by ksh ........ ................

	* apps/app_rpt.c: Janitor for ast_localtime

2007-06-18 16:56 +0000 [r69705-69709]  Joshua Colp <jcolp@digium.com>

	* main/dnsmgr.c, /: Merged revisions 69708 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69708 | file | 2007-06-18 12:51:36 -0400 (Mon, 18 Jun 2007) | 2
	  lines Remember the DNS lookup done when dnsmgr is called for the
	  first time so that it does not needlessly spit out changed
	  messages when the host really didn't change. ........

	* main/cdr.c, main/dnsmgr.c, main/asterisk.c: Few more rwlist
	  conversions... why not.

2007-06-18 16:35 +0000 [r69691-69703]  Russell Bryant <russell@digium.com>

	* res/res_config_odbc.c, /, build_tools/menuselect-deps.in,
	  configure, funcs/func_odbc.c, include/asterisk/autoconfig.h.in,
	  configure.ac, cdr/cdr_odbc.c, res/res_odbc.c,
	  apps/app_voicemail.c: Merged revisions 69702 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69702 | russell | 2007-06-18 11:35:02 -0500 (Mon, 18 Jun 2007) |
	  6 lines To prevent 92138749238754 more reports of "I have
	  unixodbc installed, but still can't build *_odbc.so!", check for
	  ltdl directly, instead of just listing it as another library to
	  include in the unixodbc check in the configure script. This also
	  makes ltdl show up as a dependency in menuselect so people know
	  what to go install. (related to issue #9989, patch by me)
	  ........

	* /, build_tools/prep_moduledeps: Merged revisions 69689 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69689 | russell | 2007-06-18 11:15:12 -0500 (Mon, 18 Jun 2007) |
	  5 lines Change the use of "echo -e" to "printf". On systems where
	  /bin/sh is not bash, most of the lines in menuselect-tree were
	  getting a "-e" at the beginning of every line. I'm surprised
	  nobody noticed this, but I think the XML parser was being very
	  nice and ignoring them. ........

2007-06-18 16:06 +0000 [r69663-69672]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69668 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69668 | file | 2007-06-18 12:04:55 -0400 (Mon, 18 Jun 2007) | 2
	  lines Don't defer the BYE till later on a transfer when the
	  transfer itself goes kaboom and has no hope of working. ........

	* /, channels/chan_sip.c: Merged revisions 69661 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69661 | file | 2007-06-18 11:46:32 -0400 (Mon, 18 Jun 2007) | 2
	  lines Few minor transfer tweaks. We can't unlock something we
	  never locked, and better handle a specific scenario with doing an
	  attended transfer between two non-bridged calls. ........

2007-06-18 15:46 +0000 [r69662]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 69660 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69660 | russell | 2007-06-18 10:46:14 -0500 (Mon, 18 Jun 2007) |
	  2 lines Tweak paths for BSD systems (issue #10001, stuarth)
	  ........

2007-06-18 13:57 +0000 [r69626]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69625 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69625 | file | 2007-06-18 09:55:00 -0400 (Mon, 18 Jun 2007) | 2
	  lines Fix issue where it would be possible for the negotiated
	  codecs to get set back to nothing. (issue #9992 reported by
	  yehavi) ........

2007-06-15 20:21 +0000 [r69583]  Russell Bryant <russell@digium.com>

	* /: This was only an issue in 1.4. This issue was fixed in trunk
	  as a part of bbryant's patch to support named dynamic feature
	  groups. Merged revisions 69579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69579 | russell | 2007-06-15 15:18:58 -0500 (Fri, 15 Jun 2007) |
	  5 lines Fix a silly deadlock in res_features that I found while
	  debugging on one of blitzrage's test machines. It was one of the
	  situations where he was seeing hung channels, and may be the
	  cause of some of the reports from other people. (related to issue
	  #9235) ........

2007-06-15 19:25 +0000 [r69559]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 69558 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69558 | file | 2007-06-15 15:23:45 -0400 (Fri,
	  15 Jun 2007) | 2 lines Add support for setting the maximum length
	  of acceptable DTMF in SpeechBackground.

2007-06-15 15:36 +0000 [r69519]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 69518 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69518 | russell | 2007-06-15 10:27:34 -0500 (Fri, 15 Jun 2007) |
	  5 lines The SLATRUNK_STATUS variable indicated "SUCCESS" for both
	  an answer of the incoming call on the trunk, or if the trunk
	  reached its ring timeout. This patch changes the variable to say
	  "RINGTIMEOUT" in that case. (issue #9973, reported by n00dle,
	  patch by me) ........

2007-06-14 23:23 +0000 [r69471]  Jason Parker <jparker@digium.com>

	* /, main/config.c: Merged revisions 69470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69470 | qwell | 2007-06-14 18:22:51 -0500 (Thu,
	  14 Jun 2007) | 12 lines Merged revisions 69469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69469 | qwell | 2007-06-14 18:21:45 -0500 (Thu, 14 Jun 2007) | 4
	  lines Fix an issue where the line number in an unterminated
	  comment block error message would show the wrong line number.
	  "Reported" to me on #asterisk (somebody posted an error message,
	  and I happened to catch it) ........ ................

2007-06-14 23:01 +0000 [r69436]  Russell Bryant <russell@digium.com>

	* main/pbx.c, channels/chan_vpb.cc, apps/app_meetme.c,
	  res/res_features.c, channels/iax2-provision.c, main/enum.c,
	  res/res_monitor.c, apps/app_speech_utils.c, main/loader.c,
	  main/cli.c, main/channel.c, channels/chan_misdn.c,
	  apps/app_minivm.c, main/http.c, main/file.c,
	  channels/chan_h323.c, res/res_indications.c,
	  apps/app_directory.c, main/asterisk.c: Convert uses of strdup()
	  to ast_strdup() (issue #9983, eliel)

2007-06-14 22:56 +0000 [r69435]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 69434 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69434 | qwell | 2007-06-14 17:56:09 -0500 (Thu, 14 Jun 2007) | 1
	  line Update to latest versions of sound files. ........

2007-06-14 22:09 +0000 [r69394-69405]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/utils.h, main/pbx.c, /, main/say.c,
	  cdr/cdr_pgsql.c, cdr/cdr_radius.c, channels/chan_iax2.c,
	  cdr/cdr_tds.c, cdr/cdr_csv.c, main/cdr.c, channels/chan_phone.c,
	  main/manager.c, cdr/cdr_sqlite.c, apps/app_minivm.c,
	  main/callerid.c, main/logger.c, main/stdtime/localtime.c,
	  cdr/cdr_odbc.c, main/asterisk.c, cdr/cdr_manager.c,
	  channels/chan_mgcp.c, apps/app_voicemail.c: Merged revisions
	  69392 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69392 | kpfleming | 2007-06-14 16:50:40 -0500 (Thu, 14 Jun 2007)
	  | 2 lines use ast_localtime() in every place localtime_r() was
	  being used ........

	* formats/format_ogg_vorbis.c: oops... somebody patched this module
	  without compile-testing it... bad :-)

2007-06-14 21:09 +0000 [r69327-69360]  Russell Bryant <russell@digium.com>

	* /, main/say.c: Merged revisions 69358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69358 | russell | 2007-06-14 16:08:23 -0500 (Thu, 14 Jun 2007) |
	  3 lines Fix some problems with saying dates and times for the
	  "tw" langauge (issue #9964, ljmid) ........

	* CHANGES: update CHANGES for tw support in voicemail

	* apps/app_voicemail.c: Add support for the tw language in
	  voicemail (issue #9964, ljmid)

	* funcs/func_rand.c, main/frame.c, channels/chan_local.c,
	  res/res_features.c, apps/app_record.c, funcs/func_strings.c,
	  apps/app_test.c, main/devicestate.c, apps/app_alarmreceiver.c,
	  apps/app_ices.c, channels/chan_iax2.c, main/config.c,
	  res/res_smdi.c, channels/chan_skinny.c, apps/app_zapscan.c,
	  apps/app_zapras.c, apps/app_amd.c, channels/chan_alsa.c,
	  cdr/cdr_odbc.c, main/db.c, apps/app_dial.c, formats/format_wav.c,
	  channels/chan_agent.c, apps/app_disa.c,
	  formats/format_ogg_vorbis.c, channels/iax2-provision.c,
	  apps/app_talkdetect.c, apps/app_db.c, res/res_monitor.c,
	  apps/app_zapbarge.c, channels/chan_misdn.c,
	  channels/chan_features.c, apps/app_macro.c, funcs/func_iconv.c,
	  formats/format_g726.c, apps/app_chanspy.c, main/asterisk.c,
	  apps/app_voicemail.c, channels/chan_vpb.cc, apps/app_meetme.c,
	  res/res_musiconhold.c, cdr/cdr_pgsql.c, channels/chan_gtalk.c,
	  apps/app_followme.c, codecs/codec_zap.c, cdr/cdr_radius.c,
	  res/res_jabber.c, res/res_config_sqlite.c, main/enum.c,
	  cdr/cdr_csv.c, main/cdr.c, main/channel.c, main/dial.c,
	  channels/chan_phone.c, apps/app_osplookup.c, apps/app_minivm.c,
	  res/res_agi.c, apps/app_mp3.c, main/app.c, apps/app_rpt.c,
	  main/dns.c, channels/chan_mgcp.c, apps/app_nbscat.c,
	  res/res_config_pgsql.c, funcs/func_version.c,
	  channels/chan_zap.c, funcs/func_db.c, channels/chan_sip.c,
	  apps/app_festival.c, apps/app_waitforsilence.c, res/res_crypto.c,
	  res/res_adsi.c, main/acl.c, apps/app_queue.c, cdr/cdr_tds.c,
	  channels/chan_jingle.c, apps/app_channelredirect.c,
	  apps/app_directed_pickup.c, main/adsistub.c, main/callerid.c,
	  main/file.c, channels/chan_h323.c, channels/chan_nbs.c,
	  apps/app_stack.c, main/dsp.c: Add a massive set of changes for
	  converting to use the ast_debug() macro. (issue #9957, patches
	  from mvanbaak, caio1982, critch, and dimas)

2007-06-14 16:41 +0000 [r69308]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Clean up debug messages a little bit for ss7
	  linkset debugging

2007-06-14 15:43 +0000 [r69261]  Brett Bryant <bbryant@digium.com>

	* main/manager.c: Couple of manager ssl options weren't loading
	  because of a typo.

2007-06-14 15:25 +0000 [r69260]  Jason Parker <jparker@digium.com>

	* funcs/func_groupcount.c, /: Merged revisions 69259 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69259 | qwell | 2007-06-14 10:21:29 -0500 (Thu,
	  14 Jun 2007) | 12 lines Merged revisions 69258 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69258 | qwell | 2007-06-14 10:15:53 -0500 (Thu, 14 Jun 2007) | 4
	  lines Change a quite broken while loop to a for loop, so
	  "continue;" works as expected instead of eating 99% CPU... Issue
	  9966, patch by me. ........ ................

2007-06-13 21:20 +0000 [r69223]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 69221 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69221 | file | 2007-06-13 17:17:28 -0400 (Wed, 13 Jun 2007) | 2
	  lines Let's make chan_iax2 media only native transfers actually
	  work. (issue #9376 reported by simone cittadini) ........

2007-06-13 20:03 +0000 [r69187]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69183 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69183 | russell | 2007-06-13 14:57:38 -0500 (Wed, 13 Jun 2007) |
	  9 lines Move the logic for destroying a call when no response is
	  received to a BYE outside of the block that checks for FLAG_FATAL
	  to be set. This flag is only set when the packet is transmitted
	  with the reliability set to XMIT_CRITICAL when the original
	  packet is transmitted. A BYE is always sent with it set to
	  XMIT_RELIABLE, meaning this code could never be encountered. This
	  resulted in seeing some SIP channels that would never go away
	  with the last packet sent being a BYE. (part of issue #9235,
	  patch from jcmoore) ........

2007-06-13 20:00 +0000 [r69185]  Joshua Colp <jcolp@digium.com>

	* /, channels/iax2-parser.c: Merged revisions 69184 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r69184 | file | 2007-06-13 15:58:59 -0400 (Wed, 13 Jun
	  2007) | 2 lines Add TXMEDIA to list so that it is properly
	  displayed during iax2 packet output. ........

2007-06-13 19:47 +0000 [r69182]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 69181 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69181 | mmichelson | 2007-06-13 14:41:13 -0500 (Wed, 13 Jun
	  2007) | 5 lines Contains a patch for fixing an encoding problem
	  when using Outlook to view voicemail emails and attachments. This
	  fix has also been tested on Thunderbird, Evolution, Pine, and
	  Mutt. (Issue 9336, reported by marwick, patched by mutterc)
	  ........

2007-06-13 19:10 +0000 [r69147]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 69144 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69144 | file | 2007-06-13 15:08:24 -0400 (Wed, 13 Jun 2007) | 2
	  lines Really ignore NULL frames and check whether the channel
	  hungup or not. (issue #9912 reported by junky) ........

2007-06-13 19:05 +0000 [r69137]  Jason Parker <jparker@digium.com>

	* channels/chan_agent.c: Completely remove callback mode and all
	  references to it from chan_agent. Issue 9969, patch by eliel.

2007-06-13 18:23 +0000 [r69129-69130]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/app.h, funcs/func_groupcount.c, main/app.c,
	  main/cli.c: Use read/write lock based lists for group counting.

	* /, main/app.c: Merged revisions 69128 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r69128 | file | 2007-06-13 14:16:00 -0400 (Wed,
	  13 Jun 2007) | 10 lines Merged revisions 69127 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r69127 | file | 2007-06-13 14:12:48 -0400 (Wed, 13 Jun 2007) | 2
	  lines Return group counting to previous behavior where you could
	  only have one group per category. (issue #9711 reported by
	  irroot) ........ ................

2007-06-13 17:37 +0000 [r69081-69108]  Jason Parker <jparker@digium.com>

	* res/res_config_pgsql.c: Continuation of issue 9968 (revision
	  69081). This should be the last one.

	* main/pbx.c, channels/chan_sip.c: Fixes for ast_strlen_zero()
	  janitor project. Issue 9968, patch by eliel.

2007-06-13 16:59 +0000 [r69017-69072]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 69071 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69071 | russell | 2007-06-13 11:56:16 -0500 (Wed, 13 Jun 2007) |
	  3 lines Clarify a bit of logic. This doesn't change behavior in
	  any way, but it is helpful when following the logic to debug
	  problems like 9235. ........

	* /, channels/chan_iax2.c: Merged revisions 69069 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69069 | russell | 2007-06-13 11:29:12 -0500 (Wed, 13 Jun 2007) |
	  3 lines Fix a place where a chan_iax2 pvt struct was accessed
	  without the lock held. This issue was reported to me via email by
	  Dmitry Mishchenko. Thanks! ........

	* res/snmp/agent.c: Simplify some logic and convert spaces to tabs

	* res/snmp/agent.c: The variable used for the return value must be
	  declared as static. I broke this when applying the patch, sorry!
	  (issue #9637, jeffg)

	* include/asterisk/logger.h: Put parenthesis around the level
	  argument to ast_debug()

	* /, cdr/cdr_pgsql.c: Merged revisions 69016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69016 | russell | 2007-06-12 14:40:17 -0500 (Tue, 12 Jun 2007) |
	  4 lines Fix a memory leak pointed out by prashant_jois in
	  #asterisk-bugs. PQclear() was not called on the result structure
	  after doing a PQexec(). Also, fix up some formatting in passing.
	  ........

2007-06-12 19:38 +0000 [r69013-69015]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 69014 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69014 | file | 2007-06-12 15:36:29 -0400 (Tue, 12 Jun 2007) | 2
	  lines Change the full frame dropping log message to debug to
	  avoid future bug reports. ........

	* /, channels/chan_iax2.c: Merged revisions 69012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69012 | file | 2007-06-12 15:26:38 -0400 (Tue, 12 Jun 2007) | 2
	  lines Schedule the sending of a PING packet a second later than
	  previously so that it does not collide with the LAGRQ. ........

2007-06-12 19:19 +0000 [r68970-69011]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 69010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r69010 | russell | 2007-06-12 14:13:41 -0500 (Tue, 12 Jun 2007) |
	  12 lines In ast_channel_make_compatible(), just return if the
	  channels' read and write formats already match up. There are code
	  paths that call this function on a pair of channels multiple
	  times. This made calls fail that were using g729 in some cases.
	  The reason is that codec_g729a will unregister itself from the
	  list of available translators will all licenses are in use. So,
	  the first time the function got called, the right translation
	  path was allocated. However, the second time it got called, the
	  code would not find a translation path to/from g729 and make the
	  call fail, even if the channel actually already had a g729
	  translation path allocated. (SPD-32) ........

	* main/pbx.c: Convert pbx.c to use ast_debug() for debug logging.
	  (issue #9925, dimas)

	* include/asterisk/logger.h: Add a new macro, ast_debug(), which
	  combines the check of the value of option_debug and the actual
	  call to ast_log(). (issue #9925, dimas)

	* doc/ast_appdocs.tex: update the dump of application docs

	* apps/app_dial.c, apps/app_privacy.c, apps/app_authenticate.c,
	  channels/chan_agent.c, apps/app_image.c, apps/app_chanisavail.c,
	  apps/app_transfer.c, apps/app_system.c, apps/app_queue.c,
	  apps/app_playback.c, apps/app_controlplayback.c,
	  apps/app_osplookup.c, apps/app_sendtext.c, apps/app_minivm.c,
	  apps/app_url.c, pbx/pbx_config.c, include/asterisk/options.h,
	  apps/app_voicemail.c: Completely remove all of the code related
	  to jumping to priority n + 101. yay! (issue #9926, caio1982)

2007-06-12 14:26 +0000 [r68900-68923]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 68922 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68922 | file | 2007-06-12 10:23:11 -0400 (Tue,
	  12 Jun 2007) | 10 lines Merged revisions 68921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68921 | file | 2007-06-12 10:18:57 -0400 (Tue, 12 Jun 2007) | 2
	  lines Bring RTP back to Asterisk at the end of a native bridge no
	  matter what. ........ ................

	* main/autoservice.c, main/app.c: Even more minor code cleanup!

	* main/channel.c: Minor code cleanup.

	* channels/chan_agent.c: Remove old stuff from the
	  AgentCallbackLogin days and only autocomplete agents in the agent
	  logoff CLI command that are logged in. (issue #9952 reported by
	  eliel)

2007-06-11 22:31 +0000 [r68855]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/frame.c: corrected CLI 'core show codecs' syntax for issue
	  9945, thanks eserra.

2007-06-11 22:21 +0000 [r68854]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_disa.c, UPGRADE.txt: Issue 8971 - Allow DISA input to be
	  ended with a '#'.

2007-06-11 22:07 +0000 [r68816-68831]  Jason Parker <jparker@digium.com>

	* main/manager.c, configs/manager.conf.sample: Change
	  displayconnects option in manager.conf to be per-user. Issue
	  9932, patch by eliel

	* /, include/asterisk/time.h: Merged revisions 68814 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r68814 | qwell | 2007-06-11 16:20:15 -0500 (Mon, 11 Jun
	  2007) | 2 lines Solaris 10 sometimes (?) needs this include in
	  order to have NULL defined. ........

2007-06-11 20:51 +0000 [r68782]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_directory.c: Merged revisions 68781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68781 | tilghman | 2007-06-11 15:45:53 -0500 (Mon, 11 Jun 2007)
	  | 2 lines Issue 9947 - fn2 was unused / incorrectly used ........

2007-06-11 17:05 +0000 [r68740]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_msg_parser.c:
	  Merged revisions 68733 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68733 | crichter | 2007-06-11 18:57:59 +0200
	  (Mo, 11 Jun 2007) | 9 lines Merged revisions 68732 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68732 | crichter | 2007-06-11 18:49:00 +0200 (Mo, 11
	  Jun 2007) | 1 line added check for NULL Pointer when calling
	  misdn_new. Asterisk does not allow us to create channels anymore
	  when stop gracefully is used :). also modified the
	  restart_indicator to 0 ........ ................

2007-06-11 14:41 +0000 [r68662-68685]  Joshua Colp <jcolp@digium.com>

	* main/channel.c: Change channel list to read/write list... I'm
	  crazy.

	* main/channel.c, /: Merged revisions 68683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68683 | file | 2007-06-11 10:33:12 -0400 (Mon,
	  11 Jun 2007) | 10 lines Merged revisions 68682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68682 | file | 2007-06-11 10:29:58 -0400 (Mon, 11 Jun 2007) | 2
	  lines Improve deadlock handling of the channel list. (issue #8376
	  reported by one47) ........ ................

	* main/manager.c: Add username completion for manager show user CLI
	  command. (issue #9929 reported by eliel)

	* configs/sip.conf.sample: Update documentation for proper CLI
	  commands. (issue #9936 reported by eserra)

2007-06-11 11:40 +0000 [r68661]  Christian Richter <christian.richter@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/ie.c, channels/misdn/isdn_msg_parser.c,
	  channels/misdn/isdn_lib.c: Merged revisions 68644 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68644 | crichter | 2007-06-11 12:29:18 +0200
	  (Mo, 11 Jun 2007) | 9 lines Merged revisions 68631 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68631 | crichter | 2007-06-11 11:18:01 +0200 (Mo, 11
	  Jun 2007) | 1 line fixed problem that the dummybc chanels had no
	  lock, checking for the lock now. Also fixed the channel restart
	  stuff, we can now specify and restart particular channels too.
	  ........ ................

2007-06-11 04:28 +0000 [r68596]  Tilghman Lesher <tlesher@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 68595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68595 | tilghman | 2007-06-10 23:21:30 -0500 (Sun, 10 Jun 2007)
	  | 2 lines "dialplan save" produced garbage in the config file
	  ........

2007-06-09 01:06 +0000 [r68575]  Jason Parker <jparker@digium.com>

	* channels/chan_misdn.c: Fix compile errors in chan_misdn.c
	  Reported by d1mas in #asterisk-bugs on IRC.

2007-06-08 22:23 +0000 [r68473-68528]  Russell Bryant <russell@digium.com>

	* /, apps/app_dictate.c: Merged revisions 68527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68527 | russell | 2007-06-08 17:23:22 -0500
	  (Fri, 08 Jun 2007) | 12 lines Merged revisions 68526 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68526 | russell | 2007-06-08 17:22:36 -0500 (Fri, 08
	  Jun 2007) | 4 lines Don't automatically hang up after running
	  Dictate so that callers can exit cleanly using '#' (closes issue
	  #9577, patch from Thomas Andrews) ........ ................

	* doc/asterisk-mib.txt, res/snmp/agent.c: Add support for
	  retrieving the number of channels that are currently bridged via
	  SNMP. (closes issue #9637, initial patch from jeffg, modified by
	  me)

	* include/asterisk/app.h, res/res_agi.c, main/app.c,
	  apps/app_controlplayback.c, apps/app_voicemail.c: Add an option
	  for ControlPlayback to be able to start at an offset from the
	  beginning of the file. Also, add a channel variable that
	  indicates the location in the file where the Playback was
	  stopped. (closes issue #7655, patch from sharkey)

	* main/pbx.c: Add channel variable manager event (issue #7291,
	  patch from tonyh and jontow)

2007-06-08 16:03 +0000 [r68453]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 68450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68450 | kpfleming | 2007-06-08 10:52:47 -0500 (Fri, 08 Jun 2007)
	  | 2 lines actually remember the type/subclass of full frames that
	  are in process ........

2007-06-08 15:51 +0000 [r68449]  Jason Parker <jparker@digium.com>

	* res/res_config_sqlite.c: Fix incorrect logic for param count.
	  Issue 9918.

2007-06-08 15:32 +0000 [r68448]  Russell Bryant <russell@digium.com>

	* main/asterisk.c: Minor formatting change to test changes to
	  mantis auto-closing issues (closes issue #6000)

2007-06-08 00:18 +0000 [r68374-68405]  Joshua Colp <jcolp@digium.com>

	* /, main/say.c: Merged revisions 68401 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68401 | file | 2007-06-07 20:17:04 -0400 (Thu,
	  07 Jun 2007) | 10 lines Merged revisions 68397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68397 | file | 2007-06-07 20:15:33 -0400 (Thu, 07 Jun 2007) | 2
	  lines Don't call ast_waitstream_full when the control file
	  descriptor and audio file descriptor are not set, simply call
	  ast_waitstream! (issue #8530 reported by rickead2000) ........
	  ................

	* main/dnsmgr.c, /: Merged revisions 68370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68370 | file | 2007-06-07 20:02:34 -0400 (Thu,
	  07 Jun 2007) | 10 lines Merged revisions 68368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68368 | file | 2007-06-07 19:59:04 -0400 (Thu, 07 Jun 2007) | 2
	  lines Do a DNS lookup immediately upon calling the dnsmgr
	  function, don't wait until a refresh happens. (issue #9097
	  reported by plack) ........ ................

2007-06-07 23:17 +0000 [r68339-68359]  Russell Bryant <russell@digium.com>

	* /, main/say.c: Merged revisions 68354 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68354 | russell | 2007-06-07 18:14:45 -0500
	  (Thu, 07 Jun 2007) | 11 lines Merged revisions 68351 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r68351 | russell | 2007-06-07 18:13:33 -0500 (Thu, 07
	  Jun 2007) | 3 lines Fix a problem where saying a character
	  wouldn't properly break out when the caller pressed '#' (issue
	  #8113, reported by patbaker82, patch from jamesgolovich (hey,
	  long time no see!) and patbaker82) ........ ................

	* include/asterisk/devicestate.h, channels/chan_sip.c,
	  contrib/asterisk-ng-doxygen, main/devicestate.c,
	  include/asterisk/manager.h, res/res_config_sqlite.c, main/rtp.c,
	  include/asterisk/http.h, include/asterisk/doxyref.h,
	  main/manager.c, include/asterisk/event.h, funcs/func_shell.c,
	  apps/app_skel.c, channels/chan_h323.c,
	  include/asterisk/strings.h, include/asterisk/stringfields.h: Fix
	  a bunch of doxygen errors and document more things (issue #9842,
	  snuffy)

2007-06-07 23:00 +0000 [r68327]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 68326 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68326 | qwell | 2007-06-07 18:00:01 -0500 (Thu, 07 Jun 2007) | 5
	  lines Fix incorrect French syntax of "old messages". Request for
	  feedback was sent to asterisk-dev mailing list, with little
	  response. Issue 9118, patch by junky. ........

2007-06-07 22:38 +0000 [r68325]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c: Fix a couple of places that got missed in
	  the conversion to using the new API call for creating detached
	  threads. (issue #9915, reported by elguro, fixed by me)

2007-06-07 22:18 +0000 [r68321]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 68313 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68313 | kpfleming | 2007-06-07 17:14:35 -0500 (Thu, 07 Jun 2007)
	  | 6 lines some improvements to the IAX2 full frame dropping logic
	  recently added: - use inaddrcmp(), since we have it - output the
	  type of frame and subclass being dropped, and the type/subclass
	  that is already being processed (which caused the drop) ........

2007-06-07 21:22 +0000 [r68284-68289]  Russell Bryant <russell@digium.com>

	* res/res_jabber.c: Doxygenify a lot of the functions in res_jabber
	  (issue #9886, snuffy)

	* /, channels/chan_agent.c, apps/app_queue.c: Merged revisions
	  68280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68280 | russell | 2007-06-07 16:16:07 -0500 (Thu, 07 Jun 2007) |
	  4 lines Fix loading persistent queue members when using realtime
	  configuration for queues. Also, remove an unneeded leading slash
	  for the astdb family. (issue #9911, patch by atis) ........

2007-06-07 20:25 +0000 [r68220-68251]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 68249 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r68249 | qwell | 2007-06-07 15:25:18 -0500 (Thu, 07 Jun
	  2007) | 4 lines Fix an issue with newer phones which require
	  packets be padded out to the correct length. Issue 9887, patch by
	  DEA. ........

	* /, apps/app_voicemail.c: Merged revisions 68211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68211 | qwell | 2007-06-07 15:06:00 -0500 (Thu,
	  07 Jun 2007) | 12 lines Merged revisions 68204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68204 | qwell | 2007-06-07 15:02:50 -0500 (Thu, 07 Jun 2007) | 4
	  lines Don't try to save voicemail greetings unless the user
	  presses '1' to accept/save. Issue 9904, patch by me. ........
	  ................

2007-06-07 19:51 +0000 [r68201]  Olle Johansson <oej@edvina.net>

	* CREDITS: Adding Philippe to CREDITS for hard work on detecting
	  bugs in our jabber/jingle integration

2007-06-07 19:50 +0000 [r68200]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 68198 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68198 | mmichelson | 2007-06-07 14:47:42 -0500 (Thu, 07 Jun
	  2007) | 5 lines Submitting a fix for Issue 8016. Added a check to
	  make sure that greetings get stored properly. (Issue 8016,
	  reported by edhorton, patched by alamantia with modification by
	  me. Thanks to Jason Parker for the advice on this). ........

2007-06-07 19:49 +0000 [r68195-68199]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_features.c: Merged revisions 68196 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r68196 | oej | 2007-06-07 21:46:10 +0200 (Thu, 07 Jun
	  2007) | 2 lines Disable chan_features by default in menuselect
	  ........

	* channels/chan_sip.c: - Doxygen updates - Adding docs on flags to
	  be able to clean up a bit

2007-06-07 19:31 +0000 [r68193]  Russell Bryant <russell@digium.com>

	* /, main/strcompat.c: Merged revisions 68192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68192 | russell | 2007-06-07 14:30:30 -0500 (Thu, 07 Jun 2007) |
	  3 lines Include stdarg.h for build issues on Solaris (issue
	  #9381) ........

2007-06-07 18:41 +0000 [r68138-68158]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 68157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68157 | file | 2007-06-07 14:39:52 -0400 (Thu, 07 Jun 2007) | 2
	  lines Fix logic when doing a name based channel search for a
	  structure when you want to start from a specific point in the
	  channel list. (issue #9324 reported by slavon) ........

	* doc/queues-with-callback-members.tex: AEL in trunk now uses GOSUB
	  so we have to update the queues with callback members example.
	  (issue #9813 reported by Mike Anikienko)

2007-06-07 15:48 +0000 [r68118]  Russell Bryant <russell@digium.com>

	* res/res_jabber.c: Minor formatting change ... testing mantis
	  stuff to see if we're done (issue #9790) (closes issue #9816)

2007-06-07 14:23 +0000 [r68072]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 68071 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r68071 | file | 2007-06-07 10:21:59 -0400 (Thu,
	  07 Jun 2007) | 10 lines Merged revisions 68070 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r68070 | file | 2007-06-07 10:19:40 -0400 (Thu, 07 Jun 2007) | 2
	  lines Allow the 'g' option to work if used with the 'S' option.
	  (issue #9888 reported by gasparz) ........ ................

2007-06-07 10:06 +0000 [r67991-68040]  Olle Johansson <oej@edvina.net>

	* /, res/res_jabber.c: Merged revisions 68030 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68030 | oej | 2007-06-07 12:00:17 +0200 (Thu, 07 Jun 2007) | 2
	  lines Adding a few Todo's to res_jabber so we don't forget.
	  ........

	* /, res/res_jabber.c: Merged revisions 68028 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68028 | oej | 2007-06-07 11:55:13 +0200 (Thu, 07 Jun 2007) | 4
	  lines Ok, we found out that this is not about if you have any
	  *active* clients using TLS, but if you have initialized TLS at
	  all during the lifetime of the module. So if you reload to
	  disable TLS, it won't help. ........

	* /, res/res_jabber.c: Merged revisions 68027 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r68027 | oej | 2007-06-07 11:42:26 +0200 (Thu, 07 Jun 2007) | 8
	  lines If you have a jabber client that uses TLS, refuse unload.
	  Bad fix, but will prevent crashes while we are trying to find a
	  workaround. Iksemel development seems to have stalled and we
	  might have to stop using the TCP/TLS connections in that library
	  and use our own, which would scale better from a poll/select
	  perspective I guess. It would also make it easier to migrate to
	  OpenSSL and stop Asterisk from depending on both OpenSSL and
	  GnuTLS. ........

	* /, include/asterisk/jabber.h, res/res_jabber.c: Merged revisions
	  67993 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67993 | oej | 2007-06-07 11:00:44 +0200 (Thu, 07 Jun 2007) | 6
	  lines Issue #9738 - Make sure we can unload res_jabber. Patch by
	  phsultan - thanks! Due to a bug in the iksemel library, this will
	  not work if you are using GTLS in the connection. That's being
	  investigated. If you figure out a way to handle that without us
	  having to patch iksemel, let us know in the bug report. Thanks.
	  ........

	* res/res_jabber.c: Simplification of res_jabber code (done at
	  Inria, Paris with Philippe)

	* main/strcompat.c: Reverting part of #67864 to be able to compile
	  agi/eagi-test that relies on this without having ast_log and
	  other asterisk api functions available - I could not compile on
	  OS/X without reverting this.

2007-06-07 00:12 +0000 [r67925-67944]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 67941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67941 | file | 2007-06-06 20:10:48 -0400 (Wed,
	  06 Jun 2007) | 10 lines Merged revisions 67938 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r67938 | file | 2007-06-06 20:09:13 -0400 (Wed, 06 Jun 2007) | 2
	  lines Only notify the devicestate system of a peer state change
	  when the peer is built from the config file. (issue #9900
	  reported by arkadia) ........ ................

	* /, main/file.c: Merged revisions 67924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67924 | file | 2007-06-06 19:38:15 -0400 (Wed, 06 Jun 2007) | 2
	  lines Properly handle cases where a stream can't be written to.
	  (issue #9757 reported by junky) ........

2007-06-06 23:12 +0000 [r67920]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Allow overlapdialing directions to be
	  configurable. Bug #8554

2007-06-06 22:35 +0000 [r67901]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_iax2.c: added CLI 'iax2 unregister <peername>' for
	  issue 9812, thanks eliel

2007-06-06 22:27 +0000 [r67875-67895]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample: Remove our little
	  joke that was making fun of email disclaimers which nobody else
	  seemed to think was very funny. Oh well ... :)

	* /, res/res_snmp.c: Merged revisions 67872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67872 | russell | 2007-06-06 17:08:02 -0500 (Wed, 06 Jun 2007) |
	  6 lines Disable reload functionality in res_snmp. It is not
	  possible to initialize the snmp library more than once without
	  completely unloading the module and loading it again. (issue
	  #9571, reported by hristo, additional helpful debug information
	  from festr, patch from me) ........

2007-06-06 21:20 +0000 [r67864]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, main/autoservice.c, main/frame.c,
	  channels/chan_local.c, apps/app_readfile.c, res/res_features.c,
	  main/threadstorage.c, main/say.c, funcs/func_strings.c,
	  apps/app_alarmreceiver.c, main/devicestate.c,
	  cdr/cdr_adaptive_odbc.c, channels/chan_iax2.c,
	  main/indications.c, main/config.c, main/loader.c, main/cli.c,
	  res/res_smdi.c, channels/chan_skinny.c, main/strcompat.c,
	  main/http.c, apps/app_externalivr.c, cdr/cdr_odbc.c, main/db.c,
	  res/res_speech.c, apps/app_milliwatt.c, main/sched.c,
	  apps/app_dial.c, main/pbx.c, channels/chan_agent.c,
	  channels/iax2-provision.c, channels/iax2-parser.c,
	  main/chanvars.c, res/res_monitor.c, main/netsock.c,
	  apps/app_speech_utils.c, channels/chan_misdn.c,
	  funcs/func_curl.c, main/fixedjitterbuf.c, apps/app_macro.c,
	  res/res_indications.c, apps/app_mixmonitor.c, main/asterisk.c,
	  res/res_odbc.c, main/dlfcn.c, apps/app_voicemail.c,
	  channels/chan_vpb.cc, apps/app_meetme.c, main/utils.c,
	  res/res_musiconhold.c, channels/chan_gtalk.c, cdr/cdr_pgsql.c,
	  apps/app_followme.c, codecs/codec_zap.c, res/res_jabber.c,
	  res/res_config_sqlite.c, main/enum.c, channels/misdn_config.c,
	  main/io.c, main/channel.c, main/cdr.c, funcs/func_enum.c,
	  main/dial.c, main/manager.c, apps/app_osplookup.c, main/tdd.c,
	  funcs/func_odbc.c, cdr/cdr_sqlite.c, res/res_agi.c,
	  apps/app_minivm.c, main/app.c, apps/app_directory.c,
	  apps/app_rpt.c, channels/chan_mgcp.c, apps/app_adsiprog.c,
	  codecs/codec_lpc10.c, res/res_config_pgsql.c,
	  channels/chan_zap.c, main/dnsmgr.c, channels/chan_sip.c,
	  apps/app_festival.c, main/translate.c, main/jitterbuf.c,
	  main/acl.c, apps/app_queue.c, channels/chan_oss.c, main/rtp.c,
	  cdr/cdr_tds.c, main/file.c, main/callerid.c, main/event.c,
	  funcs/func_devstate.c, funcs/func_callerid.c, main/dsp.c: Issue
	  9869 - replace malloc and memset with ast_calloc, and other
	  coding guidelines changes

2007-06-06 21:16 +0000 [r67813-67863]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 67862 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67862 | russell | 2007-06-06 16:14:46 -0500 (Wed, 06 Jun 2007) |
	  4 lines Fix a crash when doing call pickups with SIP phones. The
	  code unlocked the channel when it should not have. (issue #9652,
	  reported by corruptor, fixed by me) ........

	* res/res_features.c, include/asterisk/features.h: Constify the
	  return values of ast_parking_ext() and ast_pickup_ext()

	* main/manager.c: Minor formatting change to test closing mantis
	  issues through commit tags (closes issue #9828)

	* main/manager.c: Minor formatting change to test closing mantis
	  issues through commit tags (closes issue #9828)

	* apps/app_voicemail.c: Please forgive this flood of tiny changes
	  ... this will be cool when it works how we want it to :) (testing
	  mantis+svn) (issue #9828)

2007-06-06 19:46 +0000 [r67808]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 67804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67804 | mmichelson | 2007-06-06 14:26:55 -0500 (Wed, 06 Jun
	  2007) | 10 lines Fix for Issue 9810. There was a segfault under a
	  specific set of circumstances: 1. VoiceMailMain was configured in
	  the dialplan with an extension as its argument 2. A message was
	  left for this mailbox 3. Tried to call VoiceMailMain but hung up
	  before entering password. This was fixed by checking that a
	  pointer was non-null prior to trying to dereference it. (Issue
	  9810, reported by xmarksthespot, patched by Corydon76 with
	  modifications by me). ........

2007-06-06 19:44 +0000 [r67787-67807]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: minor formatting change ... testing
	  mantis/svn (issue #9828)

	* apps/app_voicemail.c: Don't try to check the result of alloca ...
	  ... testing mantis/svn stuff ... (issue #9828)

	* main/dsp.c: Yet another minor change to test mantis/svn (issue
	  #9828)

	* main/dsp.c: minor formatting change ... testing mantis/svn (issue
	  #9828)

	* main/dsp.c: minor formatting change ... testing mantis/svn (issue
	  #9828)

	* main/app.c: Formatting change ... testing (issue #9828)

2007-06-06 19:02 +0000 [r67784]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Fixing a crash wherein Asterisk would
	  segfault when attempting to leave a voicemail when IMAP storage
	  was enabled. Though no bug was reported to the bugtracker, there
	  was mention of this made as a note on bug 9810 by edhorton.

2007-06-06 19:00 +0000 [r67697-67782]  Russell Bryant <russell@digium.com>

	* main/app.c: Make another formatting change ... testing mantis/svn
	  stuff (issue #9828)

	* main/app.c: Another minor formatting change ... testing
	  mantis/svn (issue #9828)

	* main/app.c: Minor formatting change ... testing mantis/svn (issue
	  #9828)

	* channels/chan_iax2.c: Make another small tweak ... mantis/svn
	  testing (issue #9828)

	* res/res_features.c: Another tiny formatting change for testing
	  ... (issue #9828)

	* main/app.c: More random formatting changes to test Mantis/SVN
	  integration (issue #9828)

	* main/app.c: Make a completely arbitrary formatting change to test
	  out some Mantis/SVN integration stuff. (issue #9828)

	* main/channel.c, /, include/asterisk/linkedlists.h: Merged
	  revisions 67716 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67716 | russell | 2007-06-06 11:55:59 -0500
	  (Wed, 06 Jun 2007) | 13 lines Merged revisions 67715 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67715 | russell | 2007-06-06 11:40:51 -0500 (Wed, 06
	  Jun 2007) | 5 lines We have some bug reports showing crashes due
	  to a double free of a channel. Add a sanity check to
	  ast_channel_free() to make sure we don't go on trying to free a
	  channel that wasn't found in the channel list. (issue #8850, and
	  others...) ........ ................

	* res/res_features.c: Change "show parkedcalls" to "parkedcalls
	  show" and mark the previous command as deprecated. Also, convert
	  the CLI command to the new style. (issue #9861, patch from eliel)

2007-06-06 13:32 +0000 [r67595-67651]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 67650 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67650 | file | 2007-06-06 09:30:25 -0400 (Wed,
	  06 Jun 2007) | 10 lines Merged revisions 67649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r67649 | file | 2007-06-06 09:28:34 -0400 (Wed, 06 Jun 2007) | 2
	  lines Reinvite the RTP back to the Asterisk machine when the
	  timeout happens. (issue #9888 reported by gasparz) ........
	  ................

	* /, main/translate.c: Merged revisions 67631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67631 | file | 2007-06-06 09:18:39 -0400 (Wed, 06 Jun 2007) | 2
	  lines Fix plc_samples warning when registering a translator.
	  (issue #9897 reported by xylome) ........

	* /, apps/app_directed_pickup.c: Merged revisions 67626 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67626 | file | 2007-06-06 09:16:34 -0400 (Wed, 06 Jun 2007) | 2
	  lines Include macroexten while searching for a channel to pick up
	  in case they are in a macro. (issue #9491 reported by jamesb63)
	  ........

	* /, res/res_agi.c: Merged revisions 67597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67597 | file | 2007-06-06 08:34:06 -0400 (Wed, 06 Jun 2007) | 2
	  lines Make the new "agi debug off" CLI command work. (issue #9890
	  reported by eliel) ........

	* channels/chan_zap.c: When SS7 is enabled add w/SS7 to the end.
	  (issue #9893 reported by Mike Anikienko)

	* /, main/devicestate.c: Merged revisions 67594 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67594 | file | 2007-06-06 08:20:27 -0400 (Wed,
	  06 Jun 2007) | 10 lines Merged revisions 67593 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r67593 | file | 2007-06-06 08:18:36 -0400 (Wed, 06 Jun 2007) | 2
	  lines Revert channel name splitting fix for Zap. The moral of the
	  story is don't use - in your user/peer names. (issue #9668
	  reported by stevedavies) ........ ................

2007-06-05 23:02 +0000 [r67560]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 67558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67558 | russell | 2007-06-05 18:01:44 -0500 (Tue, 05 Jun 2007) |
	  5 lines Fix some crashes related to the use of the "meetme" CLI
	  command. The code for this command was not locking the conference
	  list at all. (issue #9351, reported by and patch submitted by
	  Junk-Y, committed patch is different and by me) ........

2007-06-05 22:59 +0000 [r67557]  Mark Michelson <mmichelson@digium.com>

	* main/cli.c: Found a bug where when "core set debug #" is used,
	  the verbosity is read as the old value instead of the old debug
	  value, leading to an erroneous status message after setting. This
	  was purely a cosmetic issue and had no other underlying problems.

2007-06-05 22:04 +0000 [r67529]  Steve Murphy <murf@digium.com>

	* utils/Makefile, /, pbx/ael/ael.tab.c, pbx/ael/ael.y,
	  pbx/pbx_ael.c, pbx/Makefile: Merged revisions 67526 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r67526 | murf | 2007-06-05 15:30:18 -0600 (Tue, 05 Jun
	  2007) | 1 line this fixes bug 9883, wherein macros were not
	  allowing the includes construct. fixed and tested, looks OK. Now
	  includes can serve as an adjunct to catch. ........

2007-06-05 20:55 +0000 [r67493]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 67492 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67492 | russell | 2007-06-05 15:53:28 -0500 (Tue, 05 Jun 2007) |
	  16 lines This bug has been hanging over my head ever since I
	  wrote this SLA code. Every time I tried to go debug it by adding
	  some debug output, the behavior would change. It turns out I
	  wasn't crazy. I had the following piece of code: if (remove)
	  AST_LIST_REMOVE_CURRENT(...); Well, AST_LIST_REMOVE_CURRENT was
	  not wrapped in braces, so my conditional statement didn't do much
	  good at all. It always ran at least all of the macro minus the
	  first statement, so I was seeing list entries magically disappear
	  when they weren't supposed to. After many hours of debugging, I
	  have come to this extremely irritating fix. :) (issues #9581,
	  #9497) ........

2007-06-05 20:16 +0000 [r67486]  Mark Michelson <mmichelson@digium.com>

	* apps/app_voicemail.c: Merged revisions 67424 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67424 | mmichelson | 2007-06-05 13:32:50 -0500 (Tue, 05 Jun
	  2007) | 5 lines Fix for bug number 9786, wherein voicemails saved
	  to IMAP storage using extensions other than gsm were unable to be
	  played over the phone. (Issue 9786, reporter: xmarksthespot,
	  Patched by xmarksthe spot with revisions by me, reviewed by
	  Russell Bryant). ........

2007-06-05 19:50 +0000 [r67458]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 67457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67457 | russell | 2007-06-05 14:48:02 -0500 (Tue, 05 Jun 2007) |
	  2 lines Suppress a bunch of debug output unless option_debug is
	  on ........

2007-06-05 18:23 +0000 [r67423]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 67420 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67420 | murf | 2007-06-05 12:17:28 -0600 (Tue, 05 Jun 2007) | 1
	  line Added code to automatically add a default case to switches
	  that don't have one. In some cases, rather than fall thru, it
	  results in a goto with -1 result, which terminates the extension;
	  a sort of dialplan seqfault, sort of. This was required to fix
	  bug reported in 9881 ........

2007-06-05 18:19 +0000 [r67398-67422]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 67421 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r67421 | qwell | 2007-06-05 13:18:24 -0500 (Tue, 05 Jun
	  2007) | 4 lines Correctly update date/time on devices throughout
	  the life of the device, instead of just at registration. Issue
	  9152, yet another patch by DEA. ........

	* main/manager.c: Make sure we default allowmultiplelogin to
	  on/yes, per the default stated in the config. Issue 9885, patch
	  by eliel.

2007-06-05 17:24 +0000 [r67397]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/misdn/isdn_msg_parser.c: changed #if DEBUG to #ifdef
	  DEBUG to fix make failure when configured with --enable-dev-mode

2007-06-05 17:11 +0000 [r67361-67380]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c: Improve the way that the zaptel channel name
	  is created by using the Asterisk strings API and by only
	  allocating space on the stack

	* /: Merged revisions 67360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67360 | russell | 2007-06-05 11:56:36 -0500 (Tue, 05 Jun 2007) |
	  5 lines Fix a problem that showed itself by causing Zap channel
	  names to be completely bogus on my machine.
	  ast_safe_string_alloc() was broken. It called vsnprintf() on a
	  va_args list twice without re-initializing it. After the first
	  usage, va_end() and va_start() must be called again. ........

2007-06-05 16:21 +0000 [r67345-67350]  Christian Richter <christian.richter@beronet.com>

	* /, channels/misdn/chan_misdn_config.h: Merged revisions 67334 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67334 | crichter | 2007-06-05 18:14:07 +0200
	  (Di, 05 Jun 2007) | 9 lines Merged revisions 67307 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67307 | crichter | 2007-06-05 17:42:03 +0200 (Di, 05
	  Jun 2007) | 1 line briding is a bool, fixed copy and paste issue.
	  ........ ................

	* channels/chan_misdn.c, /: Merged revisions 67329 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67329 | crichter | 2007-06-05 18:11:57 +0200
	  (Di, 05 Jun 2007) | 9 lines Merged revisions 67306 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67306 | crichter | 2007-06-05 17:39:43 +0200 (Di, 05
	  Jun 2007) | 1 line simplified the EVENT_SETUP handling in the
	  cb_events function a lot. Commented the different possibilities a
	  bit and made functions of shared code. When the dialed extension
	  does not exist in the extensions.conf we'll jump into the 'i'
	  extension if this does exist, else we disconnect the call with
	  the cause:1 = No Route to Destination. ........ ................

2007-06-05 15:54 +0000 [r67310]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/module.h, main/asterisk.c, main/loader.c:
	  Merged revisions 67308 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67308 | russell | 2007-06-05 10:51:53 -0500 (Tue, 05 Jun 2007) |
	  5 lines When shutting down "gracefully", go through and run the
	  unload() callbacks for all of the modules. "stop now" is
	  considered a non-graceful shutdown and will not go through this
	  process. (issue #9804, reported by chrisost, patch by me)
	  ........

2007-06-05 15:24 +0000 [r67305]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 67304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67304 | file | 2007-06-05 12:22:30 -0300 (Tue, 05 Jun 2007) | 2
	  lines Only muck with the thread structure if an idle one was
	  found/created. ........

2007-06-05 14:59 +0000 [r67272-67273]  Russell Bryant <russell@digium.com>

	* doc/CODING-GUIDELINES: add a note about inline comments

	* channels/chan_iax2.c: Doxygenify the comments for new members of
	  the iax2_thread struct

2007-06-05 14:45 +0000 [r67271]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 67270 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67270 | kpfleming | 2007-06-05 09:35:52 -0500 (Tue, 05 Jun 2007)
	  | 3 lines ensure that a burst of full frames (AST_FRAME_DTMF
	  being the prime example) will not be processed out of order...
	  this is a brute force fix, but seems to be the safest fix for now
	  (thanks to the Digium PQ department for finding this bug)
	  ........

2007-06-05 11:48 +0000 [r67240]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/chan_misdn_config.h,
	  channels/misdn_config.c: Merged revisions 67210 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67210 | crichter | 2007-06-05 12:25:32 +0200
	  (Di, 05 Jun 2007) | 9 lines Merged revisions 67209 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67209 | crichter | 2007-06-05 12:05:45 +0200 (Di, 05
	  Jun 2007) | 1 line added possibility to deactivate bridging per
	  port ........ ................

2007-06-04 23:45 +0000 [r67164]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_math.c: Merged revisions 67162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67162 | tilghman | 2007-06-04 18:43:01 -0500
	  (Mon, 04 Jun 2007) | 10 lines Merged revisions 67161 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67161 | tilghman | 2007-06-04 18:41:49 -0500 (Mon, 04
	  Jun 2007) | 2 lines According to MATH, 0+1181000386 = 1181000448.
	  Oops. ........ ................

2007-06-04 23:32 +0000 [r67160]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 67158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67158 | russell | 2007-06-04 18:31:40 -0500 (Mon, 04 Jun 2007) |
	  5 lines Fix up a bunch of places where the iax2 pvt structure can
	  disappear and the code did not account for it and crashes.
	  (issues #9642, #9569, #9666, probably others ... based on the
	  work by stevedavies and mihai, with additional changes from me)
	  ........

2007-06-04 23:29 +0000 [r67122-67157]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 67156 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r67156 | qwell | 2007-06-04 18:26:28 -0500 (Mon, 04 Jun
	  2007) | 6 lines Fix for skinny keepalives. If there is no traffic
	  from the phone for (keep_alive * 1100) ms (arbitrarily adding 10%
	  for network issues, etc), unregister the device. Issue 8394,
	  patch by DEA. ........

	* /, channels/chan_mgcp.c: Merged revisions 67121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67121 | qwell | 2007-06-04 17:36:57 -0500 (Mon, 04 Jun 2007) | 4
	  lines Fixes for dtmf/dialing with mgcp (similar to the recent fix
	  for chan_skinny) Issue 9855, patch by DEA. ........

2007-06-04 22:29 +0000 [r67120]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 67119 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67119 | russell | 2007-06-04 17:28:55 -0500 (Mon, 04 Jun 2007) |
	  6 lines Add comments for two functions that get called with the
	  appropriate call locked, but perform operations that could result
	  in the pvt structure getting destroyed before returning again,
	  causing numerous seg faults all over the module. (inspired by
	  issues #9642, #9569, and #9666, and the work done by stevedavies
	  and mihai) ........

2007-06-04 22:15 +0000 [r67095]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 67073 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67073 | murf | 2007-06-04 15:59:34 -0600 (Mon, 04 Jun 2007) | 1
	  line This typo has been here since 1.4 forked. It has been the
	  source of heartburn to many a dialplan/CDR programmer. ........

2007-06-04 21:48 +0000 [r67070-67072]  Russell Bryant <russell@digium.com>

	* /, main/rtp.c: Merged revisions 67071 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67071 | russell | 2007-06-04 16:47:36 -0500 (Mon, 04 Jun 2007) |
	  2 lines Add a missing \n. (pointed out by jcmoore on IRC)
	  ........

	* channels/chan_iax2.c: Remove a leftover unlock and lock of the
	  iax2 pvt struct lock that was left over from my attempt at
	  putting pvt structs in a hash table. It can cause seg faults, and
	  has no reason to stay. (issue #9642, pointed out by stevedavies)

2007-06-04 19:32 +0000 [r67063-67069]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 67068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67068 | file | 2007-06-04 15:31:09 -0400 (Mon, 04 Jun 2007) | 2
	  lines Better handle SIP devices that say they have SDP content...
	  but really don't. (issue #9398 reported by mthomasslo) ........

	* apps/app_dial.c, /: Merged revisions 67066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67066 | file | 2007-06-04 13:59:14 -0400 (Mon, 04 Jun 2007) | 2
	  lines Initialize cidname variable to nothing since it may be used
	  without having been touched. (issue #9661 reported by dimas)
	  ........

	* /, res/res_features.c: Merged revisions 67064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67064 | file | 2007-06-04 13:41:59 -0400 (Mon, 04 Jun 2007) | 2
	  lines Returning a value that indicates the parking of a call was
	  a success when it really wasn't (because the parking slot
	  selected was in use) is the wrong thing to do. (issue #9723
	  reported by mdu113) ........

	* apps/app_directed_pickup.c: Minor clean up. Constify a few
	  variables and use ast_strlen_zero in a few places.

2007-06-04 17:12 +0000 [r67062]  Tilghman Lesher <tlesher@digium.com>

	* contrib/init.d/rc.debian.asterisk,
	  contrib/init.d/rc.mandrake.asterisk, /,
	  contrib/init.d/rc.redhat.asterisk,
	  contrib/init.d/rc.gentoo.asterisk,
	  contrib/init.d/rc.mandrake.zaptel,
	  contrib/init.d/rc.slackware.asterisk: Merged revisions 67061 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r67061 | tilghman | 2007-06-04 12:11:43 -0500
	  (Mon, 04 Jun 2007) | 10 lines Merged revisions 67060 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r67060 | tilghman | 2007-06-04 12:10:30 -0500 (Mon, 04
	  Jun 2007) | 2 lines Add revision Id tags (by request of tzafrir)
	  ........ ................

2007-06-04 16:03 +0000 [r67024-67029]  Russell Bryant <russell@digium.com>

	* /, configure, configure.ac: Merged revisions 67026 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r67026 | russell | 2007-06-04 11:02:31 -0500 (Mon, 04
	  Jun 2007) | 6 lines Change the configure script to build a test
	  program against libcurl to make sure the results from curl-config
	  can be used to compile successfully. This is intended to help
	  prevent a situation where you are cross compiling, and the
	  configure script finds the curl library installed on the host.
	  (issue #9865, reported and patched by zandbelt) ........

	* main/ast_expr2f.c, pbx/ael/ael_lex.c, main/app.c: Change javadoc
	  style code documentation to the same format we use elsewhere.
	  (issue #9864, patch from snuffy)

2007-06-04 15:53 +0000 [r67023]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_jabber.c: Merged revisions 67021 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67021 | tilghman | 2007-06-04 10:50:16 -0500 (Mon, 04 Jun 2007)
	  | 2 lines Issue 9739 - Malformed jid causes a crash ........

2007-06-04 15:50 +0000 [r67016-67022]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 67020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r67020 | russell | 2007-06-04 10:47:40 -0500 (Mon, 04 Jun 2007) |
	  7 lines Resolve a deadlock in chan_iax2. When handling an
	  implicit ACK to a frame that was marked as the final transmission
	  for a call, don't call iax2_destroy() for that call while the
	  global frame queue is still locked. There is a very nice
	  explanation of the deadlock in the report. (issue #9663, thorough
	  report and patch from stevedavies, additional positive test
	  reports from mihai and joff_oconnell) ........

	* include/asterisk/stringfields.h: Fix some compiler warnings in
	  C++ modules. (issue #9866, reported by osk, patch by Corydon76)

	* channels/chan_sip.c, main/netsock.c: Fix a couple of places where
	  "tos" was used instead of "cos". (issue #9540, patch by IgorG)

2007-06-04 11:48 +0000 [r66998]  Joshua Colp <jcolp@digium.com>

	* apps/app_mixmonitor.c: Add support for autocompleting start/stop
	  options of the mixmonitor CLI command. (issue #9862 reported by
	  eliel)

2007-06-03 06:10 +0000 [r66981]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_jingle.c, channels/chan_phone.c,
	  channels/chan_features.c, channels/chan_h323.c,
	  channels/chan_gtalk.c, channels/chan_nbs.c, channels/chan_mgcp.c:
	  ast_calloc janitor (Inspired by issue 9860)

2007-06-01 23:39 +0000 [r66957-66959]  Russell Bryant <russell@digium.com>

	* main/pbx.c: remove a bogus comment that came from copy/paste

	* include/asterisk/devicestate.h, include/asterisk.h, main/pbx.c,
	  include/asterisk/event_defs.h, main/devicestate.c,
	  include/asterisk/pbx.h, apps/app_queue.c, main/asterisk.c: Merge
	  major changes to the way device state is passed around Asterisk.
	  The two places that cared about device states were app_queue and
	  the hint code in pbx.c. The changes include converting it to use
	  the Asterisk event system, as well as other efficiency
	  improvements. * app_queue: This module used to register a
	  callback into devicestate.c to monitor device state changes. Now,
	  it is just a subscriber to Asterisk events with the type, device
	  state. * pbx.c hints: Previously, the device state processing
	  thread in devicestate.c would call ast_hint_state_changed() each
	  time the state of a device changed. Then, that code would go
	  looking for all the hints that monitor that device, and call
	  their callbacks. All of this blocked the device state processing
	  thread. Now, the hint code is a subscriber of Asterisk events
	  with the type, device state. Furthermore, when this code receives
	  a device state change event, it queues it up to be processed by
	  another thread so that it doesn't block one of the event
	  processing threads.

	* channels/chan_iax2.c: Remove 80 bytes in the iax2_registry struct
	  that weren't being used

2007-06-01 21:49 +0000 [r66920]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_odbc.c: Merged revisions 66919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66919 | tilghman | 2007-06-01 16:45:44 -0500 (Fri, 01 Jun 2007)
	  | 2 lines On some drivers, deallocating the statement handle
	  isn't enough. We also have to clear the cursor (nice, Oracle)
	  ........

2007-06-01 21:33 +0000 [r66910-66918]  Mark Michelson <mmichelson@digium.com>

	* /: Merged revisions 66916 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  ........

	* /, apps/app_voicemail.c: Merged revisions 66897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66897 | mmichelson | 2007-06-01 16:09:30 -0500 (Fri, 01 Jun
	  2007) | 3 lines Submitting a fix for voicemail with IMAP storage.
	  Attachments with format specified as gsm were duplicated (i.e.
	  two attachments) were left. Thank you very much to xmarksthespot
	  for submitting the patch that fixed this. (Issues 9787 and 8873,
	  Reported by xmarksthespot and jerjer, patched by xmarksthespot)
	  ........

2007-06-01 19:42 +0000 [r66880-66882]  Russell Bryant <russell@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 66881 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r66881 | russell | 2007-06-01 14:41:30 -0500 (Fri, 01
	  Jun 2007) | 6 lines Changes to the way DTMF is handled in the
	  core broke dialing in chan_skinny. This patch makes chan_skinny
	  usable again. I did not end up testing this, but there are
	  multiple positive test reports listed in the bug report. (issue
	  #9596, reported by pj, testing by pj and mvanbaak, and the fix
	  was written by DEA) ........

	* /, apps/app_page.c: Merged revisions 66879 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66879 | russell | 2007-06-01 14:35:13 -0500 (Fri, 01 Jun 2007) |
	  2 lines List app_meetme as a module that app_page depends on.
	  ........

2007-06-01 18:36 +0000 [r66878]  Jason Parker <jparker@digium.com>

	* res/res_config_sqlite.c: Documentation fixes for
	  res_config_sqlite. Issue 9854, patch by tzafrir.

2007-06-01 13:48 +0000 [r66856]  Russell Bryant <russell@digium.com>

	* configs/sip.conf.sample: Add some more information about the SIP
	  Disclaimer header.

2007-05-31 23:04 +0000 [r66822]  Tilghman Lesher <tlesher@digium.com>

	* /, doc/asterisk.8: Merged revisions 66821 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66821 | tilghman | 2007-05-31 18:03:28 -0500 (Thu, 31 May 2007)
	  | 2 lines Issue 9850 - update preferred command line syntax
	  ........

2007-05-31 21:23 +0000 [r66772-66818]  Russell Bryant <russell@digium.com>

	* configs/sip.conf.sample: fix a typo.

	* channels/chan_sip.c, configs/sip.conf.sample: To satisfy some
	  legal concerns, add an option for chan_sip to include a
	  disclaimer along with SIP messages in the header, X-Disclaimer.
	  This is off by default. Also, the text of the disclaimer can be
	  customized in sip.conf.

	* include/asterisk/app.h, /, include/asterisk/speech.h,
	  res/res_speech.c: Merged revisions 66775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66775 | russell | 2007-05-31 13:41:58 -0500 (Thu, 31 May 2007) |
	  3 lines Change a couple of header files to not use "new", which
	  is a reserved keyword in C++. (issue #9830, reported by osk)
	  ........

	* res/res_features.c, CHANGES, configs/features.conf.sample: Add
	  support for configuring named groups of custom call features in
	  features.conf. This allows you to create a feature one time, and
	  then map it into groups for various different key mappings for
	  the same feature, as well as easy access control to groups of
	  features. (patch from bbryant)

	* res/res_features.c, configs/features.conf.sample: Revert changes
	  that snuck in with revision 66724.

	* apps/app_minivm.c: - Don't check if the list is empty needlessly
	  - Don't free structures before calling load_config(), because
	  load_config() already does it - Use the existing functions for
	  freeing the minivm structures instead of replicating the code
	  (issue #9846, patch from eliel)

2007-05-31 17:16 +0000 [r66771]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 66770 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r66770 | tilghman | 2007-05-31 12:15:09 -0500
	  (Thu, 31 May 2007) | 10 lines Merged revisions 66744 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r66744 | tilghman | 2007-05-31 10:58:45 -0500 (Thu, 31
	  May 2007) | 2 lines Issue 9818 - Fix for issue 8329 breaks
	  pbx_realtime. Issue 8329 will remain unfixed for pbx_realtime,
	  but only because we lack core API to do it. ........
	  ................

2007-05-31 16:18 +0000 [r66769]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 66768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r66768 | file | 2007-05-31 12:14:48 -0400 (Thu,
	  31 May 2007) | 10 lines Merged revisions 66764 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r66764 | file | 2007-05-31 12:12:39 -0400 (Thu, 31 May 2007) | 2
	  lines It is now possible for this path of execution to have the
	  frame pointer be NULL, therefore we need to check for it before
	  trying to access it. (issue #9836 reported by barthpbx) ........
	  ................

2007-05-31 15:05 +0000 [r66734]  Tilghman Lesher <tlesher@digium.com>

	* configs/func_odbc.conf.sample, funcs/func_odbc.c: Issue 9799 -
	  Multirow results for func_odbc

2007-05-31 14:52 +0000 [r66724]  Russell Bryant <russell@digium.com>

	* res/res_features.c, apps/app_minivm.c,
	  configs/features.conf.sample: Fix a crash on reload by using
	  calloc() instead of malloc() to ensure that data is properly
	  initialized. (issue #9765, reported by MatsK, patch from eliel)

2007-05-31 10:26 +0000 [r66705]  Olle Johansson <oej@edvina.net>

	* include/asterisk/app.h, apps/app_osplookup.c,
	  include/asterisk/event.h, apps/app_meetme.c, channels/chan_sip.c,
	  include/asterisk/event_defs.h, apps/app_skel.c,
	  apps/app_minivm.c, res/res_jabber.c: Issue #9842 - Doxygen
	  updates by snuffy. Thanks! (Committed from Media Plaza in
	  Utrecht, Netherlands - Open Source VoIP conference)

2007-05-30 23:44 +0000 [r66672]  Mark Michelson <mmichelson@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 66671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66671 | mmichelson | 2007-05-30 18:26:39 -0500 (Wed, 30 May
	  2007) | 2 lines Fixed seg-faults when recording greetings in
	  voicemail with IMAP enabled. (Issue No. 9734, reported by
	  xmarksthespot, patched by me) ........

2007-05-30 17:23 +0000 [r66603-66638]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, channels/chan_features.c: This concludes my
	  tweaking of things.

2007-05-30 05:17 +0000 [r66539-66585]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_channelredirect.c, channels/chan_vpb.cc,
	  res/res_config_odbc.c, funcs/func_shell.c, funcs/func_cdr.c,
	  apps/app_zapras.c, res/res_indications.c, apps/app_transfer.c,
	  apps/app_stack.c, funcs/func_devstate.c, res/res_config_sqlite.c,
	  res/res_odbc.c: Issue 9477 - Improve menuselect labels

	* /, funcs/func_strings.c: Merged revisions 66538 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r66538 | tilghman | 2007-05-29 16:56:07 -0500
	  (Tue, 29 May 2007) | 10 lines Merged revisions 66537 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r66537 | tilghman | 2007-05-29 16:49:35 -0500 (Tue, 29
	  May 2007) | 2 lines If the value of a variable passed to FIELDQTY
	  is blank, then FIELDQTY should return 0, not 1. ........
	  ................

	* funcs/func_enum.c: Shorten description to a much more reasonable
	  length

2007-05-29 19:53 +0000 [r66502-66505]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: oops. Thanks Terry.

	* /, channels/chan_sip.c: Merged revisions 66503 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66503 | oej | 2007-05-29 21:32:57 +0200 (Tue, 29 May 2007) | 2
	  lines Properly handle 408 request timeout - according to the RFC,
	  the dialog dies if a request in a dialog gets this response.
	  ........

	* /, channels/chan_sip.c: Merged revisions 66474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66474 | oej | 2007-05-29 21:02:04 +0200 (Tue, 29 May 2007) | 2
	  lines Don't issue hangup on hangup on hangup on hangup (for
	  jcmoore) ........

2007-05-29 19:00 +0000 [r66471]  Doug Bailey <dbailey@digium.com>

	* main/dsp.c: Changed the dtmf detection to integer based goertzel
	  algorithm.

2007-05-29 16:46 +0000 [r66438]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 66437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66437 | file | 2007-05-29 12:44:34 -0400 (Tue, 29 May 2007) | 2
	  lines Handle cases where a frame may have no data. (issue #9519
	  reported by dmb) ........

2007-05-29 16:19 +0000 [r66432-66433]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 66414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66414 | oej | 2007-05-29 18:07:44 +0200 (Tue, 29 May 2007) | 2
	  lines Don't reset hangupcause if we already have one ........

	* /, channels/chan_sip.c: Merged revisions 66404 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66404 | oej | 2007-05-29 18:02:50 +0200 (Tue, 29 May 2007) | 2
	  lines Tracking down hanging channels, killing them one by one.
	  Issue #9235 and related ........

2007-05-29 15:44 +0000 [r66399]  Joshua Colp <jcolp@digium.com>

	* /, doc/datastores.txt: Merged revisions 66398 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66398 | file | 2007-05-29 11:43:16 -0400 (Tue, 29 May 2007) | 2
	  lines Update datastores documentation. (issue #9801 reported by
	  mnicholson) ........

2007-05-29 10:02 +0000 [r66367]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 66363 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r66363 | oej | 2007-05-29 11:41:40 +0200 (Tue,
	  29 May 2007) | 10 lines Merged revisions 66349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r66349 | oej | 2007-05-29 09:53:14 +0200 (Tue, 29 May 2007) | 2
	  lines Issue #9802 - Change inuse counter on CANCEL ........
	  ................

2007-05-28 23:28 +0000 [r66313-66315]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Don't try to unregister a peer using the sip
	  unregister CLI command if they are not registered. (issue #9811
	  reported by eliel)

	* channels/chan_sip.c: Due to the way stringfields work the value
	  of the url pointer will always be non-NULL so we have to use
	  ast_strlen_zero to make sure it is not empty. (issue #9821
	  reported by pj)

2007-05-28 18:50 +0000 [r66295]  Olle Johansson <oej@edvina.net>

	* apps/app_voicemail.c: - Don't re-invent existing headers (some
	  already existed in chan_sip) - Rename command so taht module name
	  comes first

2007-05-28 15:59 +0000 [r66278]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_iconv.c (added): Issue 7021 - Add ICONV function for
	  converting between character sets

2007-05-26 19:35 +0000 [r66225]  Joshua Colp <jcolp@digium.com>

	* apps/app_minivm.c: Unlock the minivmlock when no configuration is
	  found. (issue #9814 reported by eliel)

2007-05-26 06:07 +0000 [r66208]  Russell Bryant <russell@digium.com>

	* apps/app_meetme.c: Since this code now uses the API call for
	  creating a detached thread, there is no reason to keep a thread
	  attribute structure on the conference structure. (Pointed out by
	  Tony Mountifield on the asterisk-dev list)

2007-05-25 15:08 +0000 [r66175-66178]  Kevin P. Fleming <kpfleming@digium.com>

	* /: block change that is already here

	* channels/chan_jingle.c, configure, configure.ac: more minor fixes

2007-05-25 14:49 +0000 [r66161]  Tilghman Lesher <tlesher@digium.com>

	* /, main/say.c: Merged revisions 66159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r66159 | tilghman | 2007-05-25 09:41:27 -0500
	  (Fri, 25 May 2007) | 10 lines Merged revisions 66127 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r66127 | tilghman | 2007-05-25 08:46:35 -0500 (Fri, 25
	  May 2007) | 2 lines Issue 9791 - Fix pronunciation of seconds in
	  Dutch ........ ................

2007-05-25 14:37 +0000 [r66158]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_jingle.c, /, configure, configure.ac,
	  channels/chan_gtalk.c, makeopts.in, res/res_jabber.c: Merged
	  revisions 66157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66157 | kpfleming | 2007-05-25 10:28:46 -0400 (Fri, 25 May 2007)
	  | 3 lines handle the GNUTLS library properly in the configure
	  script and build system don't build in OSP support unless we have
	  found and are allowed to use SSL support ........

2007-05-25 13:26 +0000 [r66109-66126]  Joshua Colp <jcolp@digium.com>

	* main/slinfactory.c: Minor tweak... drop translation path if one
	  exists when we get an already signed linear frame in. Chances are
	  the stream has then switched to signed linear and we no longer
	  need the path.

	* /, main/slinfactory.c: Merged revisions 66074 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66074 | file | 2007-05-24 18:16:58 -0400 (Thu, 24 May 2007) | 2
	  lines Fix slinfactory logic when dealing with frames coming in
	  that may already be in the signed linear format. ........

2007-05-24 22:25 +0000 [r66072-66077]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 66076 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66076 | russell | 2007-05-24 17:23:59 -0500 (Thu, 24 May 2007) |
	  1 line if the string field init fails, clean up the stuff that
	  was allocated already ........

	* main/channel.c, /: Merged revisions 66070 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66070 | russell | 2007-05-24 17:07:39 -0500 (Thu, 24 May 2007) |
	  2 lines Check the result of ast_string_field_init() in
	  ast_channel_alloc() ........

2007-05-24 22:07 +0000 [r66071]  Kevin P. Fleming <kpfleming@digium.com>

	* main/aescrypt.c, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, include/asterisk/aes_internal.h
	  (added), configure.ac, main/aestab.c, include/asterisk/aes.h,
	  main/aeskey.c, pbx/pbx_dundi.c, channels/chan_iax2.c,
	  makeopts.in: use the OpenSSL AES implementation if it's available
	  (unless configured not to)

2007-05-24 20:55 +0000 [r66031]  Jason Parker <jparker@digium.com>

	* /, configure, configure.ac: Merged revisions 66029-66030 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r66029 | qwell | 2007-05-24 15:53:18 -0500 (Thu, 24 May 2007) | 2
	  lines Following moving strip to AC_PATH_TOOL, we need to do
	  something similar for ar. ........ r66030 | qwell | 2007-05-24
	  15:54:16 -0500 (Thu, 24 May 2007) | 2 lines Rebuild configure
	  script for previous ar fix. ........

2007-05-24 20:51 +0000 [r66028]  Joshua Colp <jcolp@digium.com>

	* CHANGES, apps/app_voicemail.c: Add ListAllVoicemailUsers manager
	  command. (issue #8112 reported by Tony Zhao)

2007-05-24 20:44 +0000 [r65982-66027]  Russell Bryant <russell@digium.com>

	* /, configure, configure.ac: Merged revisions 66026 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r66026 | russell | 2007-05-24 15:42:53 -0500 (Thu, 24
	  May 2007) | 3 lines Checking for the strip application needs to
	  be done with AC_PATH_TOOL instead of AC_PATH_PROG to properly
	  handle cross compilation environments. ........

	* doc/CODING-GUIDELINES: add a note about using the intenal API for
	  creating detached threads

	* Makefile, /: Merged revisions 65978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65978 | russell | 2007-05-24 14:05:08 -0500 (Thu, 24 May 2007) |
	  3 lines Clear CFLAGS before running make for menuselect. (issue
	  #9784, reported by ovi, patch by me) ........

2007-05-24 19:05 +0000 [r65979]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 65965-65967 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65965 | kpfleming | 2007-05-24 14:24:55 -0400 (Thu, 24 May 2007)
	  | 2 lines don't use uninitialized variables ........ r65966 |
	  kpfleming | 2007-05-24 14:25:21 -0400 (Thu, 24 May 2007) | 2
	  lines don't reference GnuTLS headers and functions unless the
	  configure script found it ........ r65967 | kpfleming |
	  2007-05-24 14:28:48 -0400 (Thu, 24 May 2007) | 2 lines oops, use
	  #ifdef instead of #if ........

2007-05-24 18:30 +0000 [r65964-65968]  Russell Bryant <russell@digium.com>

	* main/pbx.c, include/asterisk/utils.h, channels/chan_zap.c,
	  channels/chan_sip.c, apps/app_meetme.c, main/utils.c,
	  channels/chan_iax2.c, main/cdr.c, main/manager.c,
	  pbx/pbx_spool.c, channels/chan_skinny.c, main/http.c,
	  channels/chan_h323.c, pbx/pbx_dundi.c, apps/app_rpt.c,
	  apps/app_mixmonitor.c, main/asterisk.c, channels/chan_mgcp.c: Add
	  a new API call for creating detached threads. Then, go replace
	  all of the places in the code where the same block of code for
	  creating detached threads was replicated. (patch from bbryant)

	* main/rtp.c: Make this build on *my* machine again, and hopefully
	  not break others.

2007-05-24 15:35 +0000 [r65906]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, funcs/func_math.c: Merged revisions 65866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65866 | dhubbard | 2007-05-24 10:08:56 -0500 (Thu, 24 May 2007)
	  | 1 line merged qwell's func_math patch for issue 9507 ........

2007-05-24 15:30 +0000 [r65905]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, /: Merged revisions 65902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65902 | file | 2007-05-24 11:27:23 -0400 (Thu, 24 May 2007) | 2
	  lines Add the ability to blacklist certain commands from being
	  executed using the Command AMI action. (issue #9240 reported by
	  junky) ........

2007-05-24 15:29 +0000 [r65904]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_gtalk.c: Merged revisions 65901 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r65901 | oej | 2007-05-24 17:26:10 +0200 (Thu, 24 May
	  2007) | 2 lines Issue 7672 - fix by zandbelt - Asterisk core dump
	  since the GnuTLS interface did not support multithreading
	  correctly. ........

2007-05-24 15:28 +0000 [r65903]  Jason Parker <jparker@digium.com>

	* /, codecs/codec_speex.c, main/translate.c, codecs/codec_ilbc.c,
	  .cleancount, include/asterisk/translate.h: Merged revisions 65877
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65877 | qwell | 2007-05-24 11:14:02 -0400 (Thu, 24 May 2007) | 4
	  lines Fix handling of zero-length frames when a codec is capable
	  of native PLC. Issue 9183, patch by Mihai. ........

2007-05-24 15:23 +0000 [r65894-65898]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_gtalk.c: Merged revisions 65892 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r65892 | oej | 2007-05-24 17:20:54 +0200 (Thu, 24 May
	  2007) | 2 lines Issue 8193 - NAT issues with gtalk/STUN. Patch by
	  phsultan. Thanks! ........

	* /, channels/chan_gtalk.c: Merged revisions 65857 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r65857 | oej | 2007-05-24 17:05:10 +0200 (Thu, 24 May
	  2007) | 2 lines Issue 7686, fix by phsultan, NAT issues when
	  calling from gtalk to SIP over nat. ........

2007-05-24 15:10 +0000 [r65869]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 65863 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65863 | file | 2007-05-24 11:08:17 -0400 (Thu, 24 May 2007) | 2
	  lines I like it when the RTP stack compiles myself... ........

2007-05-24 15:04 +0000 [r65855]  Russell Bryant <russell@digium.com>

	* /, apps/app_festival.c: Merged revisions 65853 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65853 | russell | 2007-05-24 10:04:14 -0500 (Thu, 24 May 2007) |
	  4 lines Ensure that frames are fully initialized. This will
	  probably fix getting weird timestamp log messages in logs when
	  using the Festival app. (issue #9781, patch by me) ........

2007-05-24 14:52 +0000 [r65844]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_gtalk.c: Merged revisions 65841 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r65841 | oej | 2007-05-24 16:48:55 +0200 (Thu, 24 May
	  2007) | 2 lines Issue #8536 - Caller ID not set in CDR for jingle
	  ........

2007-05-24 14:50 +0000 [r65843]  Russell Bryant <russell@digium.com>

	* /, main/rtp.c: Merged revisions 65842 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65842 | russell | 2007-05-24 09:49:05 -0500 (Thu, 24 May 2007) |
	  5 lines Fix the calculation of the RTT for RTCP. The previous
	  code would result in oscillating and incorrect data.
	  Additionally, the RTT would sometimes report negative values due
	  to incorrect calculations. (issue #9601, patch from davetroy)
	  ........

2007-05-24 14:43 +0000 [r65840]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 65839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65839 | file | 2007-05-24 10:42:12 -0400 (Thu,
	  24 May 2007) | 10 lines Merged revisions 65837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r65837 | file | 2007-05-24 10:40:38 -0400 (Thu, 24 May 2007) | 2
	  lines Allow RFC2833 to be negotiated when an INVITE comes in
	  without SDP and is not matched to a user or peer. (issue #9546
	  reported by mcrawford) ........ ................

2007-05-24 14:41 +0000 [r65838]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, res/res_jabber.c: Issue #8409 and
	  accidentally a fix to chan_sip that wasn't supposed to be there
	  but is still ok... Sorry. Lack of Tea, really.

2007-05-24 11:38 +0000 [r65814]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: Yes Virginia, there is a reason why we have
	  stringfields in the sip_pvt structure...

2007-05-24 09:51 +0000 [r65769]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 65768 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65768 | crichter | 2007-05-24 11:37:32 +0200
	  (Do, 24 Mai 2007) | 9 lines Merged revisions 65767 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65767 | crichter | 2007-05-24 11:19:58 +0200 (Do, 24
	  Mai 2007) | 1 line we should only activate the generator in
	  chan_misdn, when asterisk hask not yet taken the call
	  (WAITING4DIGS state). Alerting audio will be generated fomr
	  asterisk for example. ........ ................

2007-05-24 03:28 +0000 [r65749]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: - Remove debug variable that was only used
	  in one place - convert string handling to the ast_str API -
	  Convert strdup() to ast_strdup() and check the result - Minor
	  formatting changes

2007-05-24 03:27 +0000 [r65748]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Oops, should have released this when we
	  were done with it.

2007-05-24 02:23 +0000 [r65731]  Mark Spencer <markster@digium.com>

	* channels/chan_sip.c: Add SendURL support

2007-05-23 21:01 +0000 [r65678-65688]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 65685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65685 | kpfleming | 2007-05-23 16:59:19 -0400 (Wed, 23 May 2007)
	  | 2 lines start the delayed PBX when receive voice or video full
	  frames as well, and comment this delayed-PBX activity ........

	* /, channels/chan_sip.c: Merged revisions 65683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65683 | kpfleming | 2007-05-23 16:51:56 -0400
	  (Wed, 23 May 2007) | 10 lines Merged revisions 65682 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65682 | kpfleming | 2007-05-23 16:46:22 -0400 (Wed, 23
	  May 2007) | 2 lines ensure that variables are set on a newly
	  created channel before we start a PBX on it ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 65679-65680 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65679 | kpfleming | 2007-05-23 16:30:24 -0400 (Wed, 23 May 2007)
	  | 2 lines don't start a PBX on a new incoming IAX2 channel until
	  we have some sort of response to our ACCEPT (ACK or anything
	  else) ........ r65680 | kpfleming | 2007-05-23 16:35:50 -0400
	  (Wed, 23 May 2007) | 2 lines clear the 'delay PBX' flag when we
	  are ready to start the PBX ........

	* /, channels/chan_iax2.c: Merged revisions 65677 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65677 | kpfleming | 2007-05-23 16:07:59 -0400
	  (Wed, 23 May 2007) | 10 lines Merged revisions 65676 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65676 | kpfleming | 2007-05-23 16:06:13 -0400 (Wed, 23
	  May 2007) | 2 lines if we are going to set variables on a newly
	  created channel, it should be done *before* we start the PBX on
	  it ........ ................

2007-05-23 17:17 +0000 [r65659]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: Don't check for MWI event subscribers
	  before creating the MWI event in voicemail. MWI events get
	  cached, so go ahead and always generate them so the cache gets
	  populated.

2007-05-23 15:37 +0000 [r65640]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we get the cause code in the REL

2007-05-23 13:10 +0000 [r65591]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 65589 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65589 | russell | 2007-05-23 08:07:13 -0500
	  (Wed, 23 May 2007) | 11 lines Merged revisions 65588 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65588 | russell | 2007-05-23 08:06:17 -0500 (Wed, 23
	  May 2007) | 3 lines Revert revision 62417 as someone reported
	  problems with it to Mark. This was related to issue #9588.
	  ........ ................

2007-05-23 13:07 +0000 [r65590]  Joshua Colp <jcolp@digium.com>

	* res/res_musiconhold.c: Fix compiling of res_musiconhold under dev
	  mode.

2007-05-23 02:55 +0000 [r65573]  Russell Bryant <russell@digium.com>

	* main/devicestate.c: Fix a couple minor spelling mistakes.

2007-05-22 20:26 +0000 [r65542]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/make_version: Merged revisions 65541 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r65541 | kpfleming | 2007-05-22 16:25:41 -0400 (Tue, 22
	  May 2007) | 2 lines when building a version string for a
	  developer branch, include the base branch in the version string
	  ........

2007-05-22 18:52 +0000 [r65502-65505]  Russell Bryant <russell@digium.com>

	* main/channel.c, configs/musiconhold.conf.sample,
	  include/asterisk/channel.h, res/res_musiconhold.c, CHANGES: Add a
	  new feature for Music on Hold. If you set the "digit" option for
	  a class in musiconhold.conf, a caller on hold may press this
	  digit to switch to listening to that music class. This involved
	  adding a new callback for generators, which allow generators to
	  get notified of DTMF from the channel they are running on. Then,
	  a callback was implemented for the music on hold generators.
	  (patch from bbryant)

	* channels/chan_zap.c, /, apps/app_voicemail.c: Merged revisions
	  65501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65501 | russell | 2007-05-22 13:40:38 -0500 (Tue, 22 May 2007) |
	  3 lines List res_smdi as a dependency for app_voicemail and
	  chan_zap (Thanks to mnicholson for pointing it out) ........

2007-05-22 15:25 +0000 [r65455]  BJ Weschke <bweschke@btwtech.com>

	* /, apps/app_followme.c: Merged revisions 65408 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65408 | bweschke | 2007-05-22 10:02:56 -0400 (Tue, 22 May 2007)
	  | 3 lines Fix a problem with flag recognition. ........

2007-05-22 15:08 +0000 [r65451-65454]  Joshua Colp <jcolp@digium.com>

	* channels/chan_agent.c: Use ast_strlen_zero where possible. (issue
	  #9774 reported by eliel)

	* main/cdr.c: Make my compiler happy! Yay!

2007-05-22 12:58 +0000 [r65376]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c: Don't overwrite a pointer to the first
	  channel... that is bad. (issue #9770 reported by tfbu)

2007-05-22 12:52 +0000 [r65375]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: Fix a couple of spots in the handling of device
	  states that could lead to a double free. (issue #9772, reported
	  by Mike Anikienko, fix by me)

2007-05-22 08:21 +0000 [r65343]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 65342 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65342 | crichter | 2007-05-22 10:12:20 +0200
	  (Di, 22 Mai 2007) | 9 lines Merged revisions 65328 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65328 | crichter | 2007-05-22 09:46:39 +0200 (Di, 22
	  Mai 2007) | 1 line we stop the tones only when we're in the
	  pre-call phase, otherwise e.g. when in CONNECTED state we should
	  not stop tones when we receive an Information Message ........
	  ................

2007-05-22 02:41 +0000 [r65313]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Fix for 64-bit platform

2007-05-21 06:56 +0000 [r65298]  Russell Bryant <russell@digium.com>

	* apps/app_queue.c: I know we have talked about rewriting app_queue
	  for Asterisk 1.6, but once I saw this, I couldn't help myself
	  from changing it. Previously, for *every* device state change,
	  app_queue would spawn a thread to handle it. Now, the device
	  state callback just puts the state change in a queue and it gets
	  handled by a single state change processing thread.

2007-05-21 02:05 +0000 [r65283]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c: Comment a few more things, and remove an
	  unnecessary db connection check

2007-05-20 18:01 +0000 [r65233-65253]  Joshua Colp <jcolp@digium.com>

	* /, res/res_agi.c: Merged revisions 65250 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65250 | file | 2007-05-20 13:59:58 -0400 (Sun, 20 May 2007) | 2
	  lines res_agi needs to export two symbols (ast_agi_register and
	  ast_agi_unregister) for usage by others. (issue #9755 reported by
	  mnicholson) ........

	* res/res_crypto.c, res/res_musiconhold.c: Music on hold and crypto
	  no longer need their symbols globally exported. They register the
	  function pointers upon loading with their respective stubs.

	* main/adsistub.c, main/cryptostub.c: Clean up adsistub file a bit
	  (just spacing) and change over the crypto sub to use this
	  build_stub macro strategy.

	* main/Makefile, main/adsistub.c, res/res_adsi.c: Add the adsistub
	  file to the Asterisk makefile, fix a stub definition, and no
	  longer make the symbols from res_adsi global since they don't
	  need to be.

2007-05-18 22:35 +0000 [r65202-65203]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 65201 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r65201 | murf | 2007-05-18 16:26:51 -0600 (Fri, 18 May 2007) | 1
	  line Ugh. The svnmerge didn't catch the shift from cdr.c to
	  main/cdr.c, and neither did I. This is the remainder of the 9717
	  patch, the fix for the run-away FAIL status for a call ........

	* apps/app_dial.c, /, include/asterisk/cdr.h: Merged revisions
	  65200 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65200 | murf | 2007-05-18 16:06:27 -0600 (Fri,
	  18 May 2007) | 9 lines Merged revisions 65172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r65172 | murf | 2007-05-18 14:56:20 -0600 (Fri, 18 May 2007) | 1
	  line This update will fix the situation that occurs as described
	  by 9717, where when several targets are specified for a dial, if
	  any one them reports FAIL, the whole call gets FAIL, even though
	  others were ringing OK. I rearranged the priorities, so that a
	  new disposition, NULL, is at the lowest level, and the
	  disposition get init'd to NULL. Then, next up is FAIL, and next
	  up is BUSY, then NOANSWER, then ANSWERED. All the related set
	  routines will only do so if the disposition value to be set to is
	  greater than what's already there. This gives the intended
	  effect. So, if all the targets are busy, you'd get BUSY for the
	  call disposition. If all get BUSY, but one, and that one rings is
	  not answered, you get NOANSWER. If by some freak of nature, the
	  NULL value doesn't get overridden, then the disp2str routine will
	  report NOANSWER as before. ........ ................

2007-05-18 20:21 +0000 [r65169]  Tilghman Lesher <tlesher@digium.com>

	* cdr/cdr_adaptive_odbc.c (added),
	  configs/cdr_adaptive_odbc.conf.sample (added): Merge
	  cdr_adaptive_odbc from developer branch

2007-05-18 18:18 +0000 [r65077-65124]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Related to issue #9235 btw. Merged
	  revisions 65123 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65123 | oej | 2007-05-18 20:16:09 +0200 (Fri,
	  18 May 2007) | 10 lines Merged revisions 65122 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r65122 | oej | 2007-05-18 20:10:46 +0200 (Fri, 18 May 2007) | 2
	  lines Not getting an ACK to a 200 OK in the initial invite is
	  critical to the call. ........ ................

	* /, channels/chan_sip.c: Merged revisions 65076 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65076 | oej | 2007-05-18 17:18:13 +0200 (Fri,
	  18 May 2007) | 13 lines Merged revisions 65075 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r65075 | oej | 2007-05-18 17:12:09 +0200 (Fri, 18 May 2007) | 5
	  lines Issue 9235 - part of the problem, maybe not all. Please
	  retry with this patch (and no other patch) if you have problems
	  with hanging SIP channels. Thank you. A special Thank You to
	  WeBRainstorm that gave me access to his system. ........
	  ................

2007-05-18 12:43 +0000 [r65006-65040]  Christian Richter <christian.richter@beronet.com>

	* /, channels/misdn/ie.c, channels/misdn/isdn_msg_parser.c: Merged
	  revisions 65039 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r65039 | crichter | 2007-05-18 14:40:46 +0200
	  (Fr, 18 Mai 2007) | 9 lines Merged revisions 65007 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r65007 | crichter | 2007-05-18 13:23:11 +0200 (Fr, 18
	  Mai 2007) | 1 line fixed a warning regarding Keypad encoding.
	  encode the IE sending_complete at the right position. ........
	  ................

	* channels/chan_misdn.c, /: Merged revisions 64904 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64904 | crichter | 2007-05-18 10:58:51 +0200
	  (Fr, 18 Mai 2007) | 9 lines Merged revisions 64902 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r64902 | crichter | 2007-05-18 10:24:08 +0200 (Fr, 18
	  Mai 2007) | 1 line we *need* to send a PROCEEDING when
	  sending_complete is set, even if need_more_infos is requested.
	  ........ ................

2007-05-18 10:41 +0000 [r64973-64975]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 64974 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64974 | oej | 2007-05-18 12:37:44 +0200 (Fri, 18 May 2007) | 2
	  lines Issue 9487 - stop media flows at hangup of call ........

	* channels/chan_sip.c: Makeup, darling.

2007-05-18 10:03 +0000 [r64951-64963]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 64515 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64515 | crichter | 2007-05-16 10:44:51 +0200
	  (Mi, 16 Mai 2007) | 9 lines Merged revisions 64513 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r64513 | crichter | 2007-05-16 10:23:42 +0200 (Mi, 16
	  Mai 2007) | 1 line in the case immediate=yes, we directly jump
	  into the dialplan, where people can use PlayTones to indicate a
	  Dialtone, so we don't need to to that by ourself. also we should
	  not do a dialtone_indicate for incoming calls on a TE port in
	  overlapdialmode. ........ ................

	* channels/chan_misdn.c, /, channels/misdn/isdn_msg_parser.c,
	  channels/misdn/isdn_lib.c: Merged revisions 63534 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63534 | crichter | 2007-05-09 15:17:10 +0200
	  (Mi, 09 Mai 2007) | 17 lines Merged revisions 62945,63402,63519
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62945 | crichter | 2007-05-03 17:39:21 +0200 (Do, 03 Mai 2007) |
	  1 line when we're in state WAITING4DIGS, we use the asterisk
	  tone-generator which prods us, so we can't just return -1 in
	  misdn_write in this case. Added a MISDN_KEYPAD channel variable,
	  and fixed the sending of keypad. this enables us to modify the
	  call forward parameters in the switch. ........ r63402 | crichter
	  | 2007-05-08 17:07:37 +0200 (Di, 08 Mai 2007) | 1 line added
	  application misdn_check_l2l1 which tries to pull up the L1/L2 on
	  all ports that have the layers down in a group. It waits then for
	  a timeout. This helps for scenarios where multiple PMP BRIs are
	  grouped together, or where a provider has a faulty PTP
	  Implementation, that looses the L2 after a while. ........ r63519
	  | crichter | 2007-05-09 13:26:16 +0200 (Mi, 09 Mai 2007) | 1 line
	  release_chan frees ch, so we should never touch ch after
	  release_chan, this may cause segfaults. ........ ................

	* channels/misdn/isdn_lib_intern.h, channels/misdn/isdn_lib.h,
	  channels/chan_misdn.c, /, channels/misdn/ie.c,
	  channels/misdn/isdn_msg_parser.c, channels/misdn/isdn_lib.c:
	  Merged revisions 62912 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62912 | crichter | 2007-05-03 16:36:32 +0200
	  (Do, 03 Mai 2007) | 17 lines Merged revisions 61357,61770,62885
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61357 | crichter | 2007-04-11 14:05:57 +0200 (Mi, 11 Apr 2007) |
	  1 line some fixes for PMP Hold/Retrieve, it should work now, when
	  briding=no ........ r61770 | crichter | 2007-04-24 15:50:05 +0200
	  (Di, 24 Apr 2007) | 1 line added lock for sending messages to
	  avoid double sending. shuffled some empty_chans after the
	  cb_event calls, this avoids that a release_complete from a quite
	  different call releases a fresh created setup by accident.
	  ........ r62885 | crichter | 2007-05-03 15:59:00 +0200 (Do, 03
	  Mai 2007) | 1 line fixed the problem that misdn_write did not
	  return -1 when called with 0 samples in a frame this resultet in
	  a deadlock in some circumstances, when the call ended because of
	  a busy extension. added encoding of keypad. ........
	  ................

	* channels/chan_misdn.c, /, channels/misdn/chan_misdn_config.h,
	  channels/misdn/isdn_lib.c, channels/misdn_config.c: Merged
	  revisions 59774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59774 | crichter | 2007-04-03 09:20:27 +0200
	  (Di, 03 Apr 2007) | 17 lines Merged revisions 59623-59624,59639
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59623 | crichter | 2007-04-02 09:12:24 +0200 (Mo, 02 Apr 2007) |
	  1 line we can now make 30 channels on a PRI (before we forgot
	  chan 31..) ........ r59624 | crichter | 2007-04-02 09:25:54 +0200
	  (Mo, 02 Apr 2007) | 1 line don't be verbose if no need ........
	  r59639 | crichter | 2007-04-02 14:08:12 +0200 (Mo, 02 Apr 2007) |
	  1 line added option which allows us to accept incoming SETUP
	  Messages without automatically sending Proceeding or Setup
	  Acknowledge, this is useful with some broken switches and if you
	  want to Release incoming calls without previously having
	  acknowledged them. The new option is
	  noautorespond_on_setup=yes|no default is no, so we don't break
	  the existing behaviour ........ ................

	* channels/chan_misdn.c, /: Merged revisions 59254 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59254 | crichter | 2007-03-27 17:00:10 +0200
	  (Di, 27 Mär 2007) | 9 lines Merged revisions 59252 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59252 | crichter | 2007-03-27 15:56:15 +0200 (Di, 27
	  Mär 2007) | 1 line fixed #9355 ........ ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/chan_misdn_config.h, channels/misdn/isdn_lib.c,
	  channels/misdn_config.c: Merged revisions 59064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59064 | crichter | 2007-03-20 14:16:06 +0100
	  (Di, 20 Mär 2007) | 21 lines Merged revisions
	  58849-58850,59062-59063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58849 | crichter | 2007-03-13 12:58:16 +0100 (Di, 13 Mär 2007) |
	  1 line added method standard_dec for dialing out on groups, to
	  avoid conflicts, which caused issues with some ISDN providers
	  ........ r58850 | crichter | 2007-03-13 13:58:32 +0100 (Di, 13
	  Mär 2007) | 1 line fixed the crypt_keys stuff ........ r59062 |
	  crichter | 2007-03-20 10:18:06 +0100 (Di, 20 Mär 2007) | 1 line
	  avoid sending a disconnect when we already received one. ........
	  r59063 | crichter | 2007-03-20 10:23:22 +0100 (Di, 20 Mär 2007) |
	  1 line modified a loglevel ........ ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/ie.c, channels/misdn/isdn_msg_parser.c,
	  channels/misdn/isdn_lib.c: Merged revisions 58825-58826 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58825 | crichter | 2007-03-12 13:43:24 +0100
	  (Mo, 12 Mär 2007) | 1 line added UU transceiving and corect
	  handling for rdnis ................ r58826 | crichter |
	  2007-03-12 14:08:06 +0100 (Mo, 12 Mär 2007) | 21 lines Merged
	  revisions 57034,57523,57753,58558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57034 | crichter | 2007-02-28 17:09:27 +0100 (Mi, 28 Feb 2007) |
	  1 line fixed bugs.digium.com bugs: #9157 and bugs.beronet.com
	  bugs: #302, #303, #304 ........ r57523 | crichter | 2007-03-02
	  19:32:51 +0100 (Fr, 02 Mar 2007) | 1 line fixed typo ........
	  r57753 | crichter | 2007-03-04 11:39:50 +0100 (So, 04 Mar 2007) |
	  1 line fixed another place where the out_cause was hardcoded to
	  16 ........ r58558 | crichter | 2007-03-09 15:43:58 +0100 (Fr, 09
	  Mar 2007) | 1 line we can free channel 31 as well, since we can
	  occupy it ........ ................

2007-05-18 09:10 +0000 [r64903-64921]  Olle Johansson <oej@edvina.net>

	* include/asterisk/adsi.h, main/adsistub.c (added), res/res_adsi.c,
	  apps/app_voicemail.c: Issue #5930 - Remove dependencies on
	  res_adsi.so - clwade A big THANK YOU to clwade for this patch.
	  Minor modifications by me.

	* channels/chan_sip.c: Another fix for the support for recordings
	  controlled by INFO-packets We still lack a setting to
	  enable/disable this per peer

2007-05-18 02:55 +0000 [r64869-64870]  Russell Bryant <russell@digium.com>

	* CHANGES: Add ENUMQUERY and ENUMRESULT to the CHANGES file.

	* /, apps/app_queue.c: Merged revisions 64868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64868 | russell | 2007-05-17 21:48:51 -0500 (Thu, 17 May 2007) |
	  5 lines Fix a small bug I noticed while working on something
	  else. app_queue did not unregister its device state monitoring
	  callback in unload_module(). So, this would make Asterisk crash
	  on the first device state change after you unload the module.
	  ........

2007-05-17 21:20 +0000 [r64821]  Tilghman Lesher <tlesher@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 64820 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64820 | tilghman | 2007-05-17 16:19:34 -0500
	  (Thu, 17 May 2007) | 10 lines Merged revisions 64819 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r64819 | tilghman | 2007-05-17 16:14:36 -0500 (Thu, 17
	  May 2007) | 2 lines How is it that we never caught that this is
	  returning the opposite of our documentation, until now? ........
	  ................

2007-05-17 17:12 +0000 [r64786]  Russell Bryant <russell@digium.com>

	* main/manager.c, configs/manager.conf.sample: Add an option that
	  lets you only allow one connection at a time for each manager
	  user. (issue #8664, reported and original patch by ssokol, patch
	  updated by bkruse, and further updated by me)

2007-05-17 16:54 +0000 [r64762]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 64761 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64761 | qwell | 2007-05-17 11:53:27 -0500 (Thu,
	  17 May 2007) | 12 lines Merged revisions 64758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r64758 | qwell | 2007-05-17 11:52:38 -0500 (Thu, 17 May 2007) | 4
	  lines If we have a negative current message, we shouldn't go back
	  even further... Issue 9727. ........ ................

2007-05-17 16:53 +0000 [r64757-64760]  Russell Bryant <russell@digium.com>

	* /, contrib/scripts/astxs (removed): Merged revisions 64759 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64759 | russell | 2007-05-17 11:52:53 -0500 (Thu, 17 May 2007) |
	  3 lines Remove script that is no longer functional since the
	  build system was redone. (issue #9340, reported by junky)
	  ........

	* apps/app_dial.c, /: Merged revisions 64756 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64756 | russell | 2007-05-17 11:47:29 -0500 (Thu, 17 May 2007) |
	  3 lines Increase the size of a buffer to support longer dial
	  strings for channels. (issue #9291, reported and fix suggested by
	  meni) ........

2007-05-17 16:11 +0000 [r64721-64755]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 64754 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64754 | file | 2007-05-17 12:10:12 -0400 (Thu, 17 May 2007) | 2
	  lines Even more direct RTP setup fixes! Don't allow a codec that
	  isn't supported to creep into the SDP of either side. (issue
	  #9446 reported by marcelbarbulescu) ........

	* /, apps/app_voicemail.c: Merged revisions 64720 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64720 | file | 2007-05-17 09:48:44 -0400 (Thu, 17 May 2007) | 2
	  lines Fix authuser support. (issue #9740 reported by
	  xmarksthespot) ........

2007-05-17 06:14 +0000 [r64657-64687]  Russell Bryant <russell@digium.com>

	* README, /: Merged revisions 64686 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64686 | russell | 2007-05-17 01:13:53 -0500 (Thu, 17 May 2007) |
	  3 lines Update the main README to reflect the new build process
	  for 1.4 and above. (issue #9725, patch by eliel) ........

	* main/app.c: Ignore this ... playing with jira (AST-1)

2007-05-16 11:01 +0000 [r64494-64611]  Olle Johansson <oej@edvina.net>

	* /: Blocking patch

	* /, channels/chan_sip.c: Below patches with some re-structuring
	  for trunk --- Merged revisions 64602 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64602 | oej | 2007-05-16 12:38:18 +0200 (Wed, 16 May 2007) | 2
	  lines Issue #9681 - Handle www-auth on BYE ........

	* /, channels/chan_sip.c: Merged revisions 64578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64578 | oej | 2007-05-16 12:05:47 +0200 (Wed, 16 May 2007) | 2
	  lines Final part of issue #9483 - fixing transfer() of sip calls
	  in the dial plan (twilson) ........

	* /: Blocking patch that was already committed to trunk

	* /, channels/chan_sip.c: Merged revisions 64543 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64543 | oej | 2007-05-16 11:12:34 +0200 (Wed,
	  16 May 2007) | 10 lines Merged revisions 64535 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r64535 | oej | 2007-05-16 11:08:22 +0200 (Wed, 16 May 2007) | 2
	  lines Support SIP uri's starting with SIP: and sip: (reported by
	  Tony Mountfield on the mailing list. Thanks!) ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 64516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64516 | oej | 2007-05-16 10:46:18 +0200 (Wed,
	  16 May 2007) | 17 lines Merged following patch with a lot of
	  changes for 1.4 ------ Merged revisions 64514 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r64514 | oej | 2007-05-16 10:25:56 +0200 (Wed, 16 May 2007) | 6
	  lines Issue #9726 - rlister - Better logging for ACL denials
	  While at it, also added better logging and handling of peers that
	  are not supposed to register. My patch, stole the issue report
	  from Russell. My apologies, Russell :-) ........ ................

	* channels/chan_sip.c: Issue #9304 - Update help text to match
	  functionality. Patch by kshumard with changes by oej

	* channels/chan_sip.c, configs/sip.conf.sample: Issue #6789 -
	  Marquis - Add option to support regexten removal when host
	  becomes unreachable

	* main/event.c: This file really needs more documentation... When
	  we implement new API's - please include a small general overview
	  in Doxygen

	* main/dial.c: Small doxygen updates

2007-05-15 23:05 +0000 [r64469-64480]  Russell Bryant <russell@digium.com>

	* funcs/func_enum.c, include/asterisk/enum.h, main/enum.c: Add two
	  new dialplan functions: ENUMQUERY and ENUMRESULT. These functions
	  allow you to initiate an ENUM query using ENUMQUERY, and then
	  access the details of all of the results using ENUMRESULT.
	  Previously, if you wanted to access multiple results, Asterisk
	  would have to do a new DNS lookup every time. (patch by bbryant)

	* pbx/pbx_dundi.c: Make sure that DUNDIRESULT is given an ID.

2007-05-15 20:45 +0000 [r64455]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: XXX-XXX-XXX
	  appears to be the standard ANSI pointcode format

2007-05-15 19:57 +0000 [r64427]  Russell Bryant <russell@digium.com>

	* /, res/res_features.c: Merged revisions 64426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64426 | russell | 2007-05-15 14:52:18 -0500 (Tue, 15 May 2007) |
	  3 lines Properly fix a problem that occurs when you set
	  PARKINGEXTEN to an exten where a call is already parked. (issue
	  #9723, patch by me) ........

2007-05-14 23:43 +0000 [r64399]  Kevin P. Fleming <kpfleming@digium.com>

	* /: this does not belong here

2007-05-14 22:25 +0000 [r64384]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Only print the SS7 UP once. Not every time
	  we get the test messages on the line.

2007-05-14 21:51 +0000 [r64355]  Jason Parker <jparker@digium.com>

	* main/Makefile: With libmmime.a as a .PHONY target, asterisk gets
	  rebuilt every time, but without proper ASTCFLAGS. This caused a
	  problem with the buildinfo.o file not being able to find
	  asterisk/build.h This was affecting DESTDIR, but I *think* that
	  if asterisk had never been installed before, it would've failed
	  also.

2007-05-14 21:17 +0000 [r64354]  Russell Bryant <russell@digium.com>

	* /, res/res_features.c: Merged revisions 64353 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64353 | russell | 2007-05-14 16:16:39 -0500 (Mon, 14 May 2007) |
	  4 lines When someone requests a specific parking space using the
	  PARKINGEXTEN variable, ensure that no other caller is already
	  there. (issue #9723, reported by mdu113, patch by me) ........

2007-05-14 19:35 +0000 [r64323-64325]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 64324 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64324 | oej | 2007-05-14 21:26:50 +0200 (Mon, 14 May 2007) | 2
	  lines Change -2 to XMIT_ERROR to clarify a bit more ........

	* /: Blocking patch already committed to trunk

2007-05-14 19:21 +0000 [r64322]  Russell Bryant <russell@digium.com>

	* /, channels/chan_alsa.c: Merged revisions 64306 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64306 | russell | 2007-05-14 14:13:00 -0500 (Mon, 14 May 2007) |
	  3 lines Properly handle AST_CONTROL_PROGRESS by just ignoring it.
	  An unknown indication will trigger an error and cause sounds to
	  stop, which in this case, is ringing. ........

2007-05-14 18:49 +0000 [r64274-64279]  Joshua Colp <jcolp@digium.com>

	* /, codecs/codec_speex.c: Merged revisions 64278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64278 | file | 2007-05-14 14:48:33 -0400 (Mon, 14 May 2007) | 2
	  lines Properly set datalen field when doing PLC in codec_speex.
	  (issue #9722 reported by mihai) ........

	* /, main/devicestate.c: Merged revisions 64276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r64276 | file | 2007-05-14 14:36:34 -0400 (Mon,
	  14 May 2007) | 10 lines Merged revisions 64275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r64275 | file | 2007-05-14 14:34:06 -0400 (Mon, 14 May 2007) | 2
	  lines Only perform stripping of - strings from the channel name
	  for Zap channels. Anywhere else we might remove a legitimate part
	  of a device name. (issue #9668 reported by stevedavies) ........
	  ................

	* channels/chan_sip.c: If no port is specified in the outboundproxy
	  setting then use the standard SIP port. (issue #9665 reported by
	  tootai)

2007-05-14 18:14 +0000 [r64243-64273]  Jason Parker <jparker@digium.com>

	* configs/queues.conf.sample: oops - silly typo there

	* configs/queues.conf.sample, apps/app_queue.c: Don't allow
	  rounding seconds to weird values that may cause "unexpected"
	  results. Issue 9514.

	* apps/app_queue.c: Add 'c' option to app_queue which allows for
	  continuing in the dialplan if the callee hangs up. Issue 9284,
	  patch by lyl, modified a little bit by me (I felt 'continue' was
	  better than 'keepalive')

2007-05-14 17:25 +0000 [r64242]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 64240 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64240 | file | 2007-05-14 13:23:51 -0400 (Mon, 14 May 2007) | 2
	  lines Fix scenario where if a phone that simply called Echo() put
	  itself on hold it could never get off hold. ........

2007-05-14 16:08 +0000 [r64225-64226]  Russell Bryant <russell@digium.com>

	* configure: Regenerate configure script after last change to
	  acinclude.m4

	* acinclude.m4: Remove an extra space from the macro that checks
	  for C defines. (issue #9715, tzafrir)

2007-05-14 14:13 +0000 [r64208]  Steve Murphy <murf@digium.com>

	* main/cdr.c, main/pbx.c, channels/chan_local.c, /: Merged
	  revisions 64193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64193 | murf | 2007-05-14 07:58:42 -0600 (Mon, 14 May 2007) | 1
	  line As per 9570, worrisome CDR warnings have been removed, that
	  are either not helpful, or not relevant. ........

2007-05-14 10:40 +0000 [r64142-64158]  Olle Johansson <oej@edvina.net>

	* main/channel.c, /: Merged revisions 64157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64157 | oej | 2007-05-14 12:39:12 +0200 (Mon, 14 May 2007) | 2
	  lines Add hangupcause when we lack codecs for transcoding
	  ........

	* channels/chan_sip.c: Improve handling network errors on
	  transmission to hosts that don't reply or are unreachable With
	  this code, the call will fail as soon as we get a network error.
	  This may happen on first xmit or a later one, so the retransmit
	  code handles this too.

2007-05-12 22:28 +0000 [r64087-64115]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 64114 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64114 | file | 2007-05-12 18:27:04 -0400 (Sat, 12 May 2007) | 2
	  lines This concludes my final adventure with bitmasks and the
	  onhold flag. Would anyone care for some peanuts? ........

	* /, channels/chan_sip.c: Merged revisions 64086 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64086 | file | 2007-05-12 17:10:45 -0400 (Sat, 12 May 2007) | 2
	  lines Tweak hold flags some more. They can be of three states
	  when active: active, inactive, one direction. ........

2007-05-12 19:38 +0000 [r64072]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_enum.c: Issue 9716 - doc/enum.txt no longer exists in
	  trunk

2007-05-12 16:33 +0000 [r64045]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 64044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r64044 | file | 2007-05-12 12:32:15 -0400 (Sat, 12 May 2007) | 2
	  lines Ensure the onhold flag is set no matter what when being put
	  on hold. ........

2007-05-11 22:52 +0000 [r63967-64030]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c, configs/skinny.conf.sample: Add/fix
	  support for Redial, Speeddial, and Messages buttons. Combined
	  effort by DEA and mvanbaak.

	* main/asterisk.c: oops.. Fix the logic of the last commit.

	* Makefile, main/asterisk.c: Better fallback method for
	  autosystemname. Issue 9713, patch by Juggie with minor mods by
	  me.

	* main/manager.c, /: Merged revisions 63982 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63982 | qwell | 2007-05-11 15:16:17 -0500 (Fri, 11 May 2007) | 7
	  lines Hide manager password from "manager show user foo". I
	  realize that there are other ways to get this, but we really
	  don't need to just show it in plain text so easily. Issue 9273,
	  patch by junky ........

	* Makefile, main/asterisk.c: Add autosystemname setting to
	  asterisk.conf When enabled, it will set the systemname to be the
	  hostname of the system Issue 9713, patch by Juggie - slightly
	  modified by me, to "failover" to localhost

2007-05-11 18:31 +0000 [r63946]  Russell Bryant <russell@digium.com>

	* doc/qos.tex: Fix some syntax errors.

2007-05-11 16:37 +0000 [r63906]  Tilghman Lesher <tlesher@digium.com>

	* Makefile, /, contrib/scripts/safe_asterisk: Merged revisions
	  63905 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63905 | tilghman | 2007-05-11 11:35:51 -0500
	  (Fri, 11 May 2007) | 10 lines Merged revisions 63903 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r63903 | tilghman | 2007-05-11 11:31:03 -0500 (Fri, 11
	  May 2007) | 2 lines Issue 9121 - fixups for safe_asterisk script
	  ........ ................

2007-05-11 16:21 +0000 [r63901-63902]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 63886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63886 | russell | 2007-05-11 11:05:43 -0500 (Fri, 11 May 2007) |
	  6 lines When MD5 authentication is not possible because there is
	  no challenge present, either because the Challenge action was
	  never issued, or some other reason, give a proper error message
	  and return an error instead of claiming that the user wasn't
	  found. (reported by jsmith on IRC) ........

	* res/res_agi.c: Add gender support for AGI SAY NUMBER. (issue
	  #9537, patch by chappell)

2007-05-11 15:48 +0000 [r63873]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 63872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63872 | file | 2007-05-11 11:43:14 -0400 (Fri, 11 May 2007) | 2
	  lines Make the PARKINGEXTEN feature of parking actually work.
	  (issue #9708 reported by mdu113) ........

2007-05-10 23:16 +0000 [r63832]  Jason Parker <jparker@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 63830 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63830 | qwell | 2007-05-10 18:15:37 -0500 (Thu,
	  10 May 2007) | 12 lines Merged revisions 63828 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r63828 | qwell | 2007-05-10 18:14:55 -0500 (Thu, 10 May 2007) | 4
	  lines Fix an issue with trying to kill a thread before it gets
	  created. Issue 9709, patch by nic_bellamy. ........
	  ................

2007-05-10 22:25 +0000 [r63805]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 63804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63804 | russell | 2007-05-10 17:23:42 -0500 (Thu, 10 May 2007) |
	  4 lines Strip terminal escape sequences from CLI command output
	  that is going to be sent out over the manager interface. (issue
	  #9659, reported by pari, fixed by me) ........

2007-05-10 21:25 +0000 [r63786]  Doug Bailey <dbailey@digium.com>

	* main/callerid.c: Added check for negative offset in cid spill to
	  prevent infinite loops

2007-05-10 20:51 +0000 [r63730-63751]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 63749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63749 | oej | 2007-05-10 22:46:41 +0200 (Thu,
	  10 May 2007) | 12 lines Merged revisions 63748 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r63748 | oej | 2007-05-10 22:38:54 +0200 (Thu, 10 May 2007) | 4
	  lines Do not allocate SIP pvt's for PEERs we can not reach. This
	  was seen as a lot of dialogs being created then immediately
	  destroyed at reload/restart of the SIP channel. ........
	  ................

	* apps/app_minivm.c: Fixing reload. Thanks to Mats Karlsson!

2007-05-09 19:24 +0000 [r63699]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 63698 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63698 | file | 2007-05-09 15:22:39 -0400 (Wed, 09 May 2007) | 2
	  lines Use the DTMF frame on the channel when returning a DTMF
	  frame from AST_FRAME_NULL or AST_FRAME_VOICE. ........

2007-05-09 19:21 +0000 [r63697]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 63612 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63612 | russell | 2007-05-09 11:55:27 -0500 (Wed, 09 May 2007) |
	  5 lines Modify ast_senddigit_begin() to use the same assumptions
	  used elsewhere in the code in that if a channel does not have a
	  send_digit_begin() callback, it only cares about DTMF END events.
	  (pointed out by Michael Neuhauser on the asterisk-dev list)
	  ........

2007-05-09 17:35 +0000 [r63655]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Merged revisions 63654 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63654 | mattf | 2007-05-09 12:25:21 -0500 (Wed,
	  09 May 2007) | 10 lines Merged revisions 63653 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r63653 | mattf | 2007-05-09 12:20:20 -0500 (Wed, 09 May 2007) | 2
	  lines Make sure we only create a DSP if it's requested on
	  SUB_REAL ........ ................

2007-05-09 16:56 +0000 [r63613]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 63611 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63611 | file | 2007-05-09 12:54:56 -0400 (Wed,
	  09 May 2007) | 10 lines Merged revisions 63610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r63610 | file | 2007-05-09 12:51:03 -0400 (Wed, 09 May 2007) | 2
	  lines Properly handle hints that point to multiple devices in
	  chan_sip. Why chan_sip is even doing this I have no idea but I
	  would rather not go into a rant. (issue #9536 reported by
	  rlister) ........ ................

2007-05-09 16:44 +0000 [r63609]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 63608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63608 | russell | 2007-05-09 11:43:50 -0500 (Wed, 09 May 2007) |
	  5 lines Only call ast_senddigit_begin() in ast_senddigit() if the
	  channel has a send_digit_begin() callback. Checking the
	  END_DTMF_ONLY flag was the wrong thing to do, because that flag
	  indicates that a *bridged* channel only wants DTMF END events
	  coming from this channel. ........

2007-05-09 14:52 +0000 [r63567]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_directory.c: Merged revisions 63566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63566 | tilghman | 2007-05-09 09:50:33 -0500
	  (Wed, 09 May 2007) | 10 lines Merged revisions 63565 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r63565 | tilghman | 2007-05-09 09:48:06 -0500 (Wed, 09
	  May 2007) | 2 lines Replicate fix from 51158 (app_voicemail) to
	  app_directory (Issue 9224) ........ ................

2007-05-09 13:24 +0000 [r63536]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 63535 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63535 | russell | 2007-05-09 08:24:03 -0500 (Wed, 09 May 2007) |
	  6 lines I have seen multiple people post questions trying to
	  figure out what the message "The configure script must be
	  executed before running 'make'" means. So, add another like that
	  says to specifically run ./configure. If this isn't obvious
	  enough, then they should be using something like AsteriskNOW and
	  not installing from source. ........

2007-05-09 13:07 +0000 [r63533]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 63532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63532 | oej | 2007-05-09 15:04:14 +0200 (Wed, 09 May 2007) | 2
	  lines Don't retransmit 200 OK's on ignore status. (Reported on
	  asterisk-users) ........

2007-05-08 22:40 +0000 [r63479]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 63478 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63478 | tilghman | 2007-05-08 17:38:02 -0500
	  (Tue, 08 May 2007) | 10 lines Merged revisions 63477 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r63477 | tilghman | 2007-05-08 17:19:15 -0500 (Tue, 08
	  May 2007) | 2 lines Issue 9602 - segfault in app_macro ........
	  ................

2007-05-08 16:54 +0000 [r63404-63449]  Russell Bryant <russell@digium.com>

	* /, res/res_features.c: Merged revisions 63448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63448 | russell | 2007-05-08 11:53:09 -0500 (Tue, 08 May 2007) |
	  4 lines I mixed up the use of the find_feature() function, so I
	  renamed it find_dynamic_feature, and changed the code to use the
	  correct lock when using it. ........

	* channels/chan_sip.c, res/res_features.c,
	  include/asterisk/features.h: I noted this on the dev list but got
	  no response, so I just did it myself. Lock the call features when
	  being used in chan_sip.

	* /, res/res_features.c: Merged revisions 63445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63445 | russell | 2007-05-08 11:30:43 -0500 (Tue, 08 May 2007) |
	  2 lines Use a read/write lock when accessing the built-in
	  features. ........

	* contrib/scripts/realtime_pgsql.sql (added), /,
	  contrib/realtime_pgsql.sql (removed): Merged revisions 63403 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63403 | russell | 2007-05-08 10:10:37 -0500 (Tue, 08 May 2007) |
	  3 lines Move realtime_pgsql.sql to contrib/scripts to be with the
	  rest of the sql examples. (issue #9676, suretec) ........

2007-05-08 06:26 +0000 [r63361]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 63360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63360 | tilghman | 2007-05-08 01:22:37 -0500
	  (Tue, 08 May 2007) | 10 lines Merged revisions 63359 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r63359 | tilghman | 2007-05-08 01:20:16 -0500 (Tue, 08
	  May 2007) | 2 lines Issue 9527 - upon entering a folder, no
	  message is selected (curmsg == -1), so deleting causes memory
	  corruption (beyond bounds) ........ ................

2007-05-07 22:32 +0000 [r63319-63330]  Russell Bryant <russell@digium.com>

	* /, contrib/realtime_pgsql.sql (added),
	  configs/res_pgsql.conf.sample (added): Merged revisions 63329 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63329 | russell | 2007-05-07 17:28:50 -0500 (Mon, 07 May 2007) |
	  3 lines Add a sample configuration file and example tables for
	  use with res_config_pgsql. (issue #9676, suretec) ........

	* apps/app_meetme.c: Make a minor tweak to admin_exec() - don't
	  lock the conference list until it is actually necessary.

	* apps/app_meetme.c, CHANGES: Add a new application,
	  MeetMeChannelAdmin, which is similar to MeetMeAdmin, except it
	  lets you operate on a channel by name instead of conference
	  member number. It is very useful in combination with the 'X'
	  option to ChanSpy. (issue #9671, patch by mnicholson, with some
	  small modifications by me)

2007-05-07 21:47 +0000 [r63284-63287]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, include/asterisk/app.h, /, main/app.c: Merged
	  revisions 63286 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r63286 | file | 2007-05-07 17:45:01 -0400 (Mon,
	  07 May 2007) | 10 lines Merged revisions 63285 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r63285 | file | 2007-05-07 17:39:52 -0400 (Mon, 07 May 2007) | 2
	  lines Properly handle what happens during a masquerade in
	  relation to group counting. (issue #9657 reported by ramonpeek)
	  ........ ................

2007-05-07 20:07 +0000 [r63228-63255]  Olle Johansson <oej@edvina.net>

	* /, main/config.c: Merged revisions 63254 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63254 | oej | 2007-05-07 22:05:15 +0200 (Mon, 07 May 2007) | 2
	  lines Don't remove configuration from memory just because one
	  section failed. ........

	* include/asterisk/module.h, main/loader.c: Constifications

	* channels/chan_jingle.c, res/res_jabber.c: Adding external
	  referenses for doxygen See
	  http://www.asterisk.org/doxygen/trunk/extref.html

	* channels/chan_misdn.c: Adding external reference

	* channels/chan_misdn.c: Doxyfication... There's a shortage of
	  comments in this file...

2007-05-06 20:09 +0000 [r63182]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Lock iax2 pvt structure when passing off to
	  the AMI function, and make sure it exists. (issue #9674 reported
	  by arabe)

2007-05-06 13:11 +0000 [r63168]  Olle Johansson <oej@edvina.net>

	* /, main/file.c: Merged revisions 63152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63152 | oej | 2007-05-06 14:28:38 +0200 (Sun, 06 May 2007) | 2
	  lines Stop the video stream when you stop playback of all streams
	  for a call ........

2007-05-05 08:05 +0000 [r63136]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: - Adding some missing spaces - Correcting
	  error messages - Disabling code that doesn't do anything - Making
	  sure we always respond to this request, happily

2007-05-04 20:11 +0000 [r63105]  Pari Nannapaneni <paripurnachand@digium.com>

	* /, configs/manager.conf.sample: Merged revisions 63047 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63047 | pari | 2007-05-04 11:45:29 -0500 (Fri, 04 May 2007) | 1
	  line explanation for httptimeout in manager.conf ........

2007-05-04 20:06 +0000 [r63104]  Jason Parker <jparker@digium.com>

	* /, res/res_jabber.c: Merged revisions 63099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r63099 | qwell | 2007-05-04 15:03:49 -0500 (Fri, 04 May 2007) | 4
	  lines Fix a crash when checking version attribute in an incoming
	  XML caps element. Issue 9667, patch by phsultan. ........

2007-05-04 19:48 +0000 [r63089]  Russell Bryant <russell@digium.com>

	* main/manager.c: Convert spaces to tabs for indentation.

2007-05-04 18:47 +0000 [r63046-63076]  Steve Murphy <murf@digium.com>

	* res/res_features.c: According to my testing, it's better if the
	  ast_find_call_feature func ran this way instead, as far as the
	  snom record button is concerned

	* doc/CODING-GUIDELINES, channels/chan_sip.c, res/res_features.c,
	  include/asterisk/features.h: a small upgrade to the coding
	  standard, and an update to the code that triggered the upgrade.

	* channels/chan_sip.c, res/res_features.c, UPGRADE.txt,
	  include/asterisk/features.h: Added a small bit of code to support
	  the SNOM 360's Record button. Made the find_feature func in
	  res_features.c public, so I could use it to find the automon dial
	  sequence as configured by the user. When the INFO packet has a
	  Record: header with on/off, the sequence is sent as consecutive
	  DTMF frames on the phone's channel, triggering the automon
	  functionality. The user has to configure the automon in
	  features.conf, and set up his dialplan accordingly.

2007-05-04 13:56 +0000 [r63030-63032]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, channels/chan_iax2.c: Add the new
	  ChannelUpdate event to inform manager clients about the PVT ID
	  and some other channel driver data that is needed to follow the
	  call through the PBX.

	* main/manager.c: Add "CoreStatus" - from the moremanager branch.
	  This can be extended with more information, ideas and patches are
	  welcome, as usual :-)

	* include/asterisk.h, main/manager.c, include/asterisk/manager.h,
	  include/asterisk/options.h: - Add manager command CoreSettings -
	  Add missing option to options.h - Add missing variables to
	  asterisk.h - Move manager version to manager.h include file

2007-05-03 16:45 +0000 [r62990]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 62989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62989 | file | 2007-05-03 13:44:00 -0300 (Thu,
	  03 May 2007) | 10 lines Merged revisions 62987 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62987 | file | 2007-05-03 13:42:19 -0300 (Thu, 03 May 2007) | 2
	  lines When a peer is seeded or built tell the devicestate core to
	  update it's status. This is easier then having chan_sip load
	  before pbx_config. (issue #9658 reported by dlynes) ........
	  ................

2007-05-03 16:43 +0000 [r62988]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/loader.c: Merged revisions 62986 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62986 | kpfleming | 2007-05-03 11:38:56 -0500 (Thu, 03 May 2007)
	  | 2 lines improve loader a bit, by avoiding trying to initialize
	  embedded modules twice and avoiding trying to load modules from
	  disk when they have been loaded already during the 'preload' pass
	  (reported by blitzrage on IRC, patch by me) ........

2007-05-03 15:23 +0000 [r62943]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 62942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62942 | russell | 2007-05-03 10:23:13 -0500 (Thu, 03 May 2007) |
	  17 lines Fix YADB (Yet Another DTMF Bug) ((C) Russell Bryant,
	  2007, TM, Patent Pending). This set of changes came from a
	  debugging session I had with Dwayne Hubbard. When he called into
	  his home FXO, ran the Echo application, and pressed a digit, the
	  digit would be echoed back and would never end. This is fixed,
	  along with a couple other little improvements. * When chan_zap is
	  in the middle of playing a digit to a channel, it feeds back null
	  frames, not voice frames. So, I have modified ast_read to check
	  the timing on emulated DTMF when it receives null frames, in
	  addition to where it was doing this on voice frames. * Make a
	  tweak to setting the duration on emulated DTMF digits. If there
	  was no duration specified, it set it to be the minimum, instead
	  of the default. * Instead of timing the emulated digits off of
	  the number of samples in audio frames that pass through, just use
	  time values. Now there is no code in this section that assumes
	  8kHz audio. ........

2007-05-03 14:44 +0000 [r62911-62914]  Steve Murphy <murf@digium.com>

	* /: blocking 62913 (1.4) from trunk, as it's already done here

	* /, pbx/ael/ael.tab.c, pbx/ael/ael.y,
	  pbx/ael/ael-test/ref.ael-test20 (added), pbx/ael/ael.tab.h,
	  pbx/ael/ael-test/ael-test20/extensions.ael (added),
	  pbx/ael/ael-test/ael-test20 (added): Merged revisions 62883 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62883 | murf | 2007-05-03 07:54:56 -0600 (Thu, 03 May 2007) | 1
	  line These mods fix bug 9623, where an '@' in the eswitch
	  contents causes a syntax error. I also updated the regressions.
	  ........

2007-05-03 00:25 +0000 [r62824-62843]  Kevin P. Fleming <kpfleming@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 62842 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62842 | kpfleming | 2007-05-02 20:23:37 -0400
	  (Wed, 02 May 2007) | 10 lines Merged revisions 62841 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62841 | kpfleming | 2007-05-02 20:23:00 -0400 (Wed, 02
	  May 2007) | 2 lines doh... initializing the pointer variable will
	  work just a bit better ........ ................

	* main/minimime: ignore the archive we build in this directory

	* res/res_config_pgsql.c, res/res_config_odbc.c, /: Merged
	  revisions 62797,62807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62797 | kpfleming | 2007-05-02 19:57:23 -0400
	  (Wed, 02 May 2007) | 7 lines improve static Realtime config
	  loading from PostgreSQL: don't request sorting on fields that are
	  pointless to sort on use ast_build_string() instead of snprintf()
	  don't request the list of fieldnames that resulted from the query
	  when we both knew what they were before we ran the query _AND_ we
	  aren't going to do anything with them anyway (patch by me,
	  inspired by blitzrage's bug report about res_config_odbc)
	  ................ r62807 | kpfleming | 2007-05-02 20:02:57 -0400
	  (Wed, 02 May 2007) | 15 lines Merged revisions 62796 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62796 | kpfleming | 2007-05-02 19:53:46 -0400 (Wed, 02
	  May 2007) | 7 lines increase reliability and efficiency of static
	  Realtime config loading via ODBC: don't request fields we aren't
	  going to use don't request sorting on fields that are pointless
	  to sort on explicitly request the fields we want, because we
	  can't expect the database to always return them in the order they
	  were created (reported by blitzrage in person (!), patch by me)
	  ........ ................

2007-05-02 23:50 +0000 [r62791-62795]  Russell Bryant <russell@digium.com>

	* CHANGES: Fix some bad grammar.

	* apps/app_meetme.c, CHANGES: When a conference is created, the
	  UNIQUEID of the channel that caused it to be created will now be
	  stored. Then, every channel that joins the conference will have
	  the MEETMEUNIQUEID channel variable set with this ID. This can be
	  used to relate callers that come and go from long standing
	  conferences. (issue #7295, patch by softins)

	* CHANGES: Note Hungarian language support in CHANGES

	* main/say.c, configs/say.conf.sample: Add Hungarian language
	  support to say.c and say.conf. (issue #7077, patch by adomjan)

	* main/channel.c, /: Merged revisions 62789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62789 | russell | 2007-05-02 17:59:09 -0500 (Wed, 02 May 2007) |
	  20 lines Merge changes from team/russell/inband_dtmf ... Fix some
	  issues related to generating inband DTMF. There are two changes
	  here: 1) The list of DTMF tones in the senddigit_begin() function
	  explicitly specified 100ms of the tone followed by 100ms of
	  silence. This really broke things with the way that Asterisk now
	  wants complete control over when the digit begins and ends. So,
	  regardless of what Asterisk really wanted to do, this was going
	  to play out the tone at the length it wanted to. This caused
	  various problems like DTMF translation to inband to be extremely
	  unreliable. The list of tones has been changed so that the
	  correct DTMF tone is played indefinitely until Asterisk tells it
	  to stop. 2) ast_write() had to be modified to let a DTMF_END
	  frame get processed even when a generator is present. This is how
	  the tone will finally get stopped. (issues #8944, #9250, #9348,
	  maybe others. Thanks to mdu113 from #8944 for the testing and
	  feedback!) ........

2007-05-02 20:57 +0000 [r62741]  Steve Murphy <murf@digium.com>

	* main/cdr.c, main/pbx.c, /: Merged revisions 62738 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62738 | murf | 2007-05-02 14:46:07 -0600 (Wed,
	  02 May 2007) | 9 lines Merged revisions 62737 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62737 | murf | 2007-05-02 14:10:32 -0600 (Wed, 02 May 2007) | 1
	  line Some tweaks to satisfy CDR bug 8796, where being in 'h'
	  extension louses up the dst field ........ ................

2007-05-02 17:49 +0000 [r62693]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 62692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62692 | tilghman | 2007-05-02 12:43:48 -0500
	  (Wed, 02 May 2007) | 12 lines Merged revisions 62691 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62691 | tilghman | 2007-05-02 12:38:16 -0500 (Wed, 02
	  May 2007) | 4 lines Issue 9638 - if a text frame is sent with no
	  terminating NULL through a bridged IAX connection, the remote end
	  will receive garbage characters tacked onto the end. ........
	  ................

2007-05-02 17:24 +0000 [r62690]  Steve Murphy <murf@digium.com>

	* main/channel.c, main/pbx.c, channels/chan_zap.c, /,
	  cdr/cdr_radius.c: Merged revisions 62689 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62689 | murf | 2007-05-02 11:10:50 -0600 (Wed, 02 May 2007) | 1
	  line a)In chan_zap, set the clid, src fields in channel_alloc
	  call. b)in the channel_alloc func, set the cid_num and name
	  fields from the arglist[blush]. c) don't update the channel app &
	  app data fields if you are in the 'h' extension. d)the
	  load_module func in cdr_radius needs to return DECLINE, SUCCESS.
	  ........

2007-05-02 15:46 +0000 [r62671-62673]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, CHANGES: Update the device state
	  functionality of chan_local such that it will return NOT_INUSE or
	  INUSE when Local channels are in use as opposed to just UNKNOWN.
	  It will still return INVALID if the extension doesn't exist at
	  all. (issue #8048, patch from tim_ringenbach)

	* CHANGES: Add the new options for attended transfer to the CHANGES
	  file.

	* doc/ip-tos.tex (removed), doc/qos.tex (added): For some reason
	  when I merged 802.1p support, the new documentation file was not
	  properly added. Thanks to IgorG for pointing it out! :)

2007-05-02 12:12 +0000 [r62609-62656]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Add a small message that we're doing
	  something. On my systems, there's a long dead period with a
	  non-responsive CLI after I issue "load chan_sip.so"

	* channels/chan_sip.c: More username body parts to fix... If
	  working, this needs to be backported to 1.2, 1.4. But first, some
	  serious SIP testing :-)

	* channels/chan_sip.c: Handle
	  sip:username;parameter=12345@example.com;parameter=1234 URI's
	  properly

	* /, channels/chan_sip.c: Merged revisions 62624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62624 | oej | 2007-05-02 08:15:43 +0200 (Wed, 02 May 2007) | 2
	  lines Don't unlock a channel that we already know does not exist
	  (propably isue 8228) ........

	* CREDITS: Updating CREDITS

2007-05-01 22:24 +0000 [r62549-62593]  Russell Bryant <russell@digium.com>

	* res/res_features.c, configs/features.conf.sample: In addition to
	  making it so attended transfers don't fail unnecessarily, add
	  some new options to control what happens when you hangup on an
	  attended transfer before the target extension answers the
	  transferred channel. You can now have it send the transferee back
	  to the transferer. (issue #8413, patch from sergee with very
	  minor modifications by me)

	* /, res/res_features.c: Merged revisions 62548 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62548 | russell | 2007-05-01 16:57:10 -0500
	  (Tue, 01 May 2007) | 12 lines Merged revisions 62547 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62547 | russell | 2007-05-01 16:55:19 -0500 (Tue, 01
	  May 2007) | 4 lines Remove an unnecessary check that makes it so
	  if you hang up after doing an attended transfer before the target
	  extension answers the channel, the transfer is not successful.
	  (issue #9338, patch by svanlund) ........ ................

2007-05-01 21:41 +0000 [r62546]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 62545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62545 | tilghman | 2007-05-01 16:34:43 -0500 (Tue, 01 May 2007)
	  | 2 lines Bug 9590 - Memory leaks around find_user() (found by
	  rayjay, different fixes by me) ........

2007-05-01 16:27 +0000 [r62415-62498]  Russell Bryant <russell@digium.com>

	* /, configs/indications.conf.sample: Merged revisions 62497 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62497 | russell | 2007-05-01 11:26:48 -0500
	  (Tue, 01 May 2007) | 11 lines Merged revisions 62496 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62496 | russell | 2007-05-01 11:26:23 -0500 (Tue, 01
	  May 2007) | 3 lines Add indications.conf information for the
	  Philippines. (issue #9525, reported and patched by loloski)
	  ........ ................

	* CHANGES: Add a note to CHANGES about the new support for 802.1p.
	  Thanks IgorG!

	* CHANGES, apps/app_queue.c, doc/queuelog.tex: This patch adds
	  additional information to the EXITWITHKEY and EXITWITHTIMEOUT
	  entries in the queue log. (issue #7561, reported and originally
	  patched by fkasumovic, patch slightly modified and updated to
	  trunk by me)

	* include/asterisk/acl.h, main/udptl.c, channels/chan_sip.c,
	  include/asterisk/rtp.h, main/acl.c, include/asterisk/netsock.h,
	  channels/iax2-provision.c, channels/chan_iax2.c, main/rtp.c,
	  main/netsock.c, configs/h323.conf.sample,
	  configs/iax.conf.sample, configs/mgcp.conf.sample,
	  configs/iaxprov.conf.sample, channels/chan_h323.c,
	  pbx/pbx_dundi.c, include/asterisk/udptl.h,
	  configs/sip.conf.sample, doc/asterisk.tex, channels/chan_mgcp.c:
	  Add support for setting the CoS for VLAN traffic (802.1p) in
	  Linux. The file doc/qos.tex has been updated to document the new
	  functionality. (issue #9540, patch submitted by IgorG)

	* channels/chan_zap.c, /: Merged revisions 62419 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62419 | russell | 2007-04-30 10:58:28 -0500
	  (Mon, 30 Apr 2007) | 12 lines Merged revisions 62417 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r62417 | russell | 2007-04-30 10:57:26 -0500 (Mon, 30
	  Apr 2007) | 4 lines This patch fixes an issue where depending on
	  the cause code, when the network sends a PRI disconnect, the call
	  may not be properly hung up. (issue #9588, reported and patched
	  by softins) ........ ................

	* channels/chan_sip.c: Don't crash when invalid arguments are
	  provided to the CHANNEL() function for a SIP channel. (issue
	  #9619, reported by jtodd, original patch by Corydon76, committed
	  patch slightly modified by me)

	* include/asterisk/http.h, /, main/http.c: Merged revisions 62414
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62414 | russell | 2007-04-30 10:25:31 -0500 (Mon, 30 Apr 2007) |
	  4 lines When serving dynamic content, include a Cache-Control
	  header to instruct the browsers to not store the resulting
	  content. (issue #9621, reported by Pari, patch by me) ........

2007-04-30 14:56 +0000 [r62372]  Jason Parker <jparker@digium.com>

	* configs/iax.conf.sample, /: Merged revisions 62371 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r62371 | qwell | 2007-04-30 09:52:31 -0500 (Mon, 30 Apr
	  2007) | 2 lines Remove unused (and potentially confusing)
	  jitterbuffer options from sample config. ........

2007-04-30 14:37 +0000 [r62370]  Joshua Colp <jcolp@digium.com>

	* /, main/asterisk.c: Merged revisions 62369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62369 | file | 2007-04-30 11:36:11 -0300 (Mon,
	  30 Apr 2007) | 10 lines Merged revisions 62368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62368 | file | 2007-04-30 11:34:07 -0300 (Mon, 30 Apr 2007) | 2
	  lines Update copyright notice. It's now the year 2007! ........
	  ................

2007-04-29 05:51 +0000 [r62219-62332]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 62331 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62331 | russell | 2007-04-29 00:50:37 -0500 (Sun, 29 Apr 2007) |
	  3 lines Fix a bug that made the "language" setting in zapata.conf
	  not functional. (issue #9626, reported and fixed by sergee)
	  ........

	* CHANGES: note MeetMe change in CHANGES

	* apps/app_meetme.c: Enable the functionality of the 'o' option to
	  "optimize talker" by default.

	* channels/iax2.h: Reformat some of iax2.h and convert comments to
	  doxygen format

	* include/asterisk.h, channels/chan_zap.c, channels/chan_sip.c,
	  main/Makefile, res/res_eventtest.c (added),
	  configs/voicemail.conf.sample, UPGRADE.txt, CHANGES,
	  channels/chan_iax2.c, main/dial.c, include/asterisk/event.h
	  (added), include/asterisk/event_defs.h (added), main/event.c
	  (added), configs/sip.conf.sample, main/asterisk.c,
	  channels/chan_mgcp.c, apps/app_voicemail.c: Merge changes from
	  team/russell/events This set of changes introduces a new generic
	  event API for use within Asterisk. I am still working on a way
	  for events to be shared between servers, but this part is ready
	  and can already be used inside of Asterisk. This set of changes
	  introduces the first use of the API, as well. I have restructured
	  the way that MWI (message waiting indication) is handled. It is
	  now event based instead of polling based. For example, if there
	  are a bunch of SIP phones subscribed to mailboxes, then chan_sip
	  will not have to constantly poll the mailboxes for changes.
	  app_voicemail will generate events when changes occur. See
	  UPGRADE.txt and CHANGES for some more information on the effects
	  of these changes from the user perspective. For developer
	  information, see the text in include/asterisk/event.h. As always,
	  additional feedback is welcome on the asterisk-dev mailing list.

	* doc/ast_appdocs.tex, doc/dundi.tex: Update the DUNDi section of
	  the documentation with example usage of DUNDIQUERY and
	  DUNDIRESULT. Also, update the automatically generated application
	  docs.

	* pbx/pbx_dundi.c, CHANGES: Merge changes from
	  team/russell/dundi_results This introduces two new dialplan
	  functions: DUNDIQUERY and DUNDIRESULT. DUNDIQUERY lets you
	  intitiate a DUNDi query from the dialplan. Then, DUNDIRESULT will
	  let you find out how many results there are, and access each one
	  without having to the query again.

	* include/asterisk/lock.h: Remove a message that goes to LOG_ERROR
	  that's not really an error.

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: Add a
	  min-announce-frequency option to queues.conf which allows you to
	  control the minimum amount of time between queue announcements
	  for use when the caller's queue position changes frequently.
	  (issue #9604, patch by Matthew Roth)

	* /, channels/chan_agent.c: Merged revisions 62218 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r62218 | russell | 2007-04-27 16:10:51 -0500 (Fri, 27
	  Apr 2007) | 11 lines Fix a weird problem where when a caller
	  talking to someone sitting behind an agent channel sent a digit,
	  the digit would be played to the agent for forever. This is
	  because chan_agent always returned -1 from its send_digit_begin
	  and _end callbacks. This non-zero return value indicates to the
	  Asterisk core that it would like an inband DTMF generator put on
	  the channel. However, this is the wrong thing to do. It should
	  *always* return 0, instead. When the digit begin and end
	  functions are called on the proxied channel, the underlying
	  channel will indicate whether inband DTMF is needed or not, and
	  the generator will be put on that one, and not the Agent channel.
	  (issue #9615, #9616, reported by jiddings and BigJimmy, and fixed
	  by me) ........

2007-04-27 16:18 +0000 [r62175]  Jason Parker <jparker@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 62174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62174 | qwell | 2007-04-27 11:17:46 -0500 (Fri,
	  27 Apr 2007) | 11 lines Merged revisions 62173 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62173 | qwell | 2007-04-27 11:16:16 -0500 (Fri, 27 Apr 2007) | 3
	  lines This transcoder message needn't be a NOTICE. I've seen it
	  cause confusion more than a few times. ........ ................

2007-04-27 16:15 +0000 [r62172]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 62171 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62171 | russell | 2007-04-27 11:14:11 -0500 (Fri, 27 Apr 2007) |
	  6 lines If no variables were passed into
	  pbx_substitute_variables_helper_full(), then don't even bother
	  creating a temporary bogus channel, since that is only for
	  allowing certain functions to operate on the variables as if they
	  were on a channel. Most importantly, this fixes a crash. (issue
	  #9613, reported by callguy, fixed by me) ........

2007-04-27 14:40 +0000 [r62096-62141]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Issue #9545 Autocomplete for "sip
	  unregister" cli command. (eliel) Thanks!

	* /, channels/chan_sip.c: Merged revisions 62137 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62137 | oej | 2007-04-27 16:04:07 +0200 (Fri,
	  27 Apr 2007) | 12 lines Merged revisions 62126 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62126 | oej | 2007-04-27 15:57:45 +0200 (Fri, 27 Apr 2007) | 4
	  lines Issue #7351 - SIP Cancel fails due to the wrong contact
	  uri. Reported by PPYY, failed to fix by OEJ final fix by wojtekka
	  - THANKS!!!! THis was a hard one to catch. ........
	  ................

	* /: Blocking patch to 1.4 that was alredy in trunk

2007-04-26 16:35 +0000 [r62039]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 62038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r62038 | file | 2007-04-26 12:33:52 -0400 (Thu,
	  26 Apr 2007) | 10 lines Merged revisions 62037 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r62037 | file | 2007-04-26 12:30:57 -0400 (Thu, 26 Apr 2007) | 2
	  lines Revert previous fix for when the IAX2 channel goes funky
	  (that's the technical term). This is causing legit calls to be
	  prematurely hung up. (issue #9600 reported by justdave) ........
	  ................

2007-04-26 03:24 +0000 [r62006]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 62005 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r62005 | file | 2007-04-25 22:19:51 -0500 (Wed, 25 Apr 2007) | 2
	  lines Missed an ast_app_group_discard during merge. Thanks
	  blitzrage! ........

2007-04-26 01:50 +0000 [r61960-61962]  Joshua Colp <jcolp@digium.com>

	* /, res/res_monitor.c: Merged revisions 61961 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61961 | file | 2007-04-25 21:48:55 -0400 (Wed, 25 Apr 2007) | 2
	  lines Don't always say that the channel is being paused if it is
	  actually being unpaused in the Manager ack message. (reported by
	  jsmith in #asterisk-bugs) ........

	* /, main/config.c: Merged revisions 61959 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61959 | file | 2007-04-25 21:27:18 -0400 (Wed,
	  25 Apr 2007) | 10 lines Merged revisions 61958 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61958 | file | 2007-04-25 21:25:03 -0400 (Wed, 25 Apr 2007) | 2
	  lines Don't count failed include attempts against the
	  configuration include level. (issue #9593 reported by mostyn)
	  ........ ................

2007-04-25 22:34 +0000 [r61915]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 61914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61914 | kpfleming | 2007-04-25 17:29:53 -0500
	  (Wed, 25 Apr 2007) | 10 lines Merged revisions 61913 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61913 | kpfleming | 2007-04-25 17:24:59 -0500 (Wed, 25
	  Apr 2007) | 2 lines handle a very bizarre race condition with
	  channels being redirected before a simple switch can be started
	  on them (issue #9286) ........ ................

2007-04-25 22:01 +0000 [r61864-61876]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 61870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61870 | russell | 2007-04-25 16:59:07 -0500
	  (Wed, 25 Apr 2007) | 10 lines Merged revisions 61866 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61866 | russell | 2007-04-25 16:55:23 -0500 (Wed, 25
	  Apr 2007) | 2 lines If the callerid= option is specified, but
	  empty, clear any previous data. ........ ................

	* /, channels/chan_iax2.c: Merged revisions 61863 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61863 | russell | 2007-04-25 16:13:15 -0500
	  (Wed, 25 Apr 2007) | 10 lines Merged revisions 61862 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61862 | russell | 2007-04-25 16:06:22 -0500 (Wed, 25
	  Apr 2007) | 2 lines Ensure that callerid settings are reset on a
	  reload. ........ ................

2007-04-25 19:27 +0000 [r61806]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, include/asterisk/app.h, funcs/func_groupcount.c,
	  /, main/app.c, main/cli.c: Merged revisions 61805 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61805 | file | 2007-04-25 15:21:54 -0400 (Wed,
	  25 Apr 2007) | 10 lines Merged revisions 61804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61804 | file | 2007-04-25 14:52:50 -0400 (Wed, 25 Apr 2007) | 2
	  lines Merge rewritten group counting support. No more storing
	  data on the variable list of the channels. That was bad, mmmk?
	  (issue #7497 reported by sabbathbh) ........ ................

2007-04-25 16:23 +0000 [r61788-61800]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 61799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61799 | russell | 2007-04-25 11:22:07 -0500
	  (Wed, 25 Apr 2007) | 11 lines Merged revisions 61798 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61798 | russell | 2007-04-25 11:20:38 -0500 (Wed, 25
	  Apr 2007) | 3 lines Fix a typo where cid_num got copied instead
	  of cid_ani. (issue #9587, reported and patched by xrg) ........
	  ................

	* main/manager.c, /: Merged revisions 61787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61787 | russell | 2007-04-24 16:34:53 -0500
	  (Tue, 24 Apr 2007) | 12 lines Merged revisions 61786 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61786 | russell | 2007-04-24 16:33:59 -0500 (Tue, 24
	  Apr 2007) | 4 lines Don't crash if a manager connection provides
	  a username that exists in manager.conf but does not have a
	  password, and also requests MD5 authentication. (ASA-2007-012)
	  ........ ................

2007-04-24 19:08 +0000 [r61784]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_zap.c, /: removed #if 0 block from chan_zap
	  restart_monitor()

2007-04-24 19:03 +0000 [r61775-61782]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, include/asterisk/channel.h: Merged revisions
	  61781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61781 | russell | 2007-04-24 14:00:06 -0500 (Tue, 24 Apr 2007) |
	  6 lines Improve DTMF handling in ast_read() even more in response
	  to a discussion on the asterisk-dev mailing list. I changed the
	  enforced minimum length of a digit from 100ms to 80ms.
	  Furthermore, I made it now enforce a gap of 45ms in between
	  digits. These values are not configurable in a configuration file
	  right now, but they can be easily changed near the top of
	  main/channel.c. ........

	* main/dial.c, /: Merged revisions 61774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61774 | russell | 2007-04-24 11:16:41 -0500 (Tue, 24 Apr 2007) |
	  5 lines Add a few more state changes in handle_frame_ownerless()
	  so that the SLA code will get notified of these changes even when
	  an owner channel is not provided. This isn't from a specific bug
	  report, it's just something I noticed while poking around.
	  ........

2007-04-24 16:10 +0000 [r61773]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 61772 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61772 | file | 2007-04-24 12:07:02 -0400 (Tue,
	  24 Apr 2007) | 10 lines Merged revisions 61771 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61771 | file | 2007-04-24 12:05:06 -0400 (Tue, 24 Apr 2007) | 2
	  lines Allow RFC2833 to be sent in the response SDP when an INVITE
	  comes in without SDP. (issue #9546 reported by mcrawford)
	  ........ ................

2007-04-23 18:49 +0000 [r61760-61767]  Russell Bryant <russell@digium.com>

	* main/manager.c: When building a JSON encoded string in the
	  GetConfigJSON manager action, escape the '\' and '"' characters.
	  (issue #9475, reported by pari, patch by me)

	* main/pbx.c, /: Merged revisions 61765 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61765 | russell | 2007-04-23 13:17:00 -0500 (Mon, 23 Apr 2007) |
	  5 lines Some dialplan functions, such as CUT(), expect to operate
	  on variables on a channel. So, this little hack lets them work in
	  places where a channel doesn't exist, such as within DUNDi
	  configuration. (issue #9465, reported and patched by Corydon76,
	  testing by blitzrage) ........

	* main/channel.c, /: Merged revisions 61763 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61763 | russell | 2007-04-23 12:57:32 -0500 (Mon, 23 Apr 2007) |
	  4 lines Ensure that digits passing through Asterisk have a
	  reasonable minimum length. It is currently 100 ms. If someone
	  thinks this should be different, feel free to speak up. (related
	  to issues #8944, #9250, and #9348) ........

	* CHANGES: Add OSP support for IAX2 to the changes file. Also,
	  slightly reorganize some of the content.

2007-04-20 21:37 +0000 [r61706-61708]  Jason Parker <jparker@digium.com>

	* /, main/rtp.c: Merged revisions 61707 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61707 | qwell | 2007-04-20 16:35:27 -0500 (Fri, 20 Apr 2007) | 8
	  lines Avoid invalid seqno cycling detection. Per comment from
	  Dave Troy: This adds back in some simple typecasting I had in an
	  earlier version which I realize now may be breaking things. Issue
	  #9554. ........

	* /, main/loader.c: Merged revisions 61705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61705 | qwell | 2007-04-20 16:15:29 -0500 (Fri,
	  20 Apr 2007) | 12 lines Merged revisions 61704 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61704 | qwell | 2007-04-20 16:14:27 -0500 (Fri, 20 Apr 2007) | 4
	  lines Fix an issue that I noticed while looking over issue 9571.
	  The reload timestamp was getting set after reloading the built-in
	  stuff, and before the modules. ........ ................

2007-04-20 21:12 +0000 [r61698-61702]  Russell Bryant <russell@digium.com>

	* channels/iax2-parser.h, funcs/func_channel.c, channels/iax2.h,
	  channels/chan_iax2.c, channels/iax2-parser.c: Merge changes from
	  team/russell/iax2_osp This set of changes adds OSP support to
	  chan_iax2. However, I have modified the patch a bit from what was
	  submitted. You now use the CHANNEL() function to get and set the
	  OSP token for IAX2. (issue #8531, reported by and original patch
	  by homesick, patch updated by me)

	* /, main/rtp.c: Merged revisions 61697 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61697 | russell | 2007-04-20 15:42:02 -0500 (Fri, 20 Apr 2007) |
	  2 lines Remove a stray debug message introduced by a recent
	  commit. ........

2007-04-20 19:54 +0000 [r61695]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 61694 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61694 | qwell | 2007-04-20 14:51:49 -0500 (Fri,
	  20 Apr 2007) | 13 lines Merged revisions 61692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61692 | qwell | 2007-04-20 14:49:54 -0500 (Fri, 20 Apr 2007) | 5
	  lines If the '* to hangup' option is not enabled, we don't need
	  to disable * as a valid exit key. If it was enabled, this
	  statement would've never been checked in the first place. Issue
	  #9552 ........ ................

2007-04-20 18:23 +0000 [r61691]  Russell Bryant <russell@digium.com>

	* main/manager.c, /, include/asterisk/config.h, main/config.c,
	  apps/app_voicemail.c: Merged revisions 61690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61690 | russell | 2007-04-20 13:19:18 -0500 (Fri, 20 Apr 2007) |
	  4 lines Fix the UpdateConfig manager action to properly treat
	  "variables" and "objects" differently (a=b versus a=>b). (issue
	  #9568, reported by pari, patch by me) ........

2007-04-20 08:41 +0000 [r61689]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Use the last line in the SDP, even if it
	  has no CRLF. Remember Jon Postel :-) This code exists in 1.2 and
	  1.4 but was removed from trunk for some unknown reason.

2007-04-19 04:37 +0000 [r61682-61684]  Tilghman Lesher <tlesher@digium.com>

	* main/manager.c, /: Merged revisions 61683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61683 | tilghman | 2007-04-18 23:36:20 -0500 (Wed, 18 Apr 2007)
	  | 2 lines Bug 9557 - simple reason why reading a function always
	  returned NULL ........

	* funcs/func_groupcount.c, /, funcs/func_timeout.c,
	  funcs/func_cdr.c, funcs/func_callerid.c: Merged revisions 61681
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61681 | tilghman | 2007-04-18 21:45:05 -0500
	  (Wed, 18 Apr 2007) | 13 lines Merged revisions 61680 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61680 | tilghman | 2007-04-18 21:30:18 -0500 (Wed, 18
	  Apr 2007) | 5 lines Bug 9557 - Specifying the GetVar AMI action
	  without a Channel parameter can cause Asterisk to crash. The
	  reason this needs to be fixed in the functions instead of in AMI
	  is because Channel can legitimately be NULL, such as when
	  retrieving global variables. ........ ................

2007-04-18 22:11 +0000 [r61679]  Kevin P. Fleming <kpfleming@digium.com>

	* /, sounds/Makefile: Merged revisions 61678 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61678 | kpfleming | 2007-04-18 17:10:23 -0500 (Wed, 18 Apr 2007)
	  | 2 lines allow external build systems to extract the required
	  sound file versions ........

2007-04-18 20:48 +0000 [r61671-61677]  Olle Johansson <oej@edvina.net>

	* /, main/rtp.c: Merged revisions 61676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61676 | oej | 2007-04-18 22:46:23 +0200 (Wed, 18 Apr 2007) | 2
	  lines Clean upp formatting, add some doxygen stuff while we're in
	  cleaning mode... Thanks Kevin! ........

	* /, main/rtp.c: Merged revisions 61674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61674 | oej | 2007-04-18 22:28:53 +0200 (Wed, 18 Apr 2007) | 2
	  lines Issue #9554 - Improve RTCP (Dave Troy) ........

	* apps/app_minivm.c (added), configs/extensions_minivm.conf.sample
	  (added), configs/minivm.conf.sample (added): Mini-voicemail - an
	  embryo for a new voicemail system based on building blocks
	  instead of one large monolithic app. Supports multiple templates
	  and is designed mostly for voicemail delivery over e-mail.
	  There's a todo with a list of ideas in the source code if you
	  want to contribute. Feedback is appreciated!

2007-04-16 15:40 +0000 [r61667]  Olle Johansson <oej@edvina.net>

	* include/asterisk/rtp.h: Doxygen changes

2007-04-14 18:22 +0000 [r61661]  Claude Patry <cpatry@gmail.com>

	* main/say.c: test my new trunk access ;)

2007-04-13 21:23 +0000 [r61660]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_sip.c: added CLI 'sip unregister <peer>' for issue
	  9326. thanks eliel

2007-04-13 21:22 +0000 [r61659]  Steve Murphy <murf@digium.com>

	* main/cdr.c, /: Merged revisions 61658 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61658 | murf | 2007-04-13 15:17:20 -0600 (Fri, 13 Apr 2007) | 1
	  line This is a fix to the way CDR merge handles the data that
	  results from ForkCDR. ........

2007-04-13 19:18 +0000 [r61649-61657]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 61656 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61656 | file | 2007-04-13 15:17:08 -0400 (Fri,
	  13 Apr 2007) | 10 lines Merged revisions 61655 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61655 | file | 2007-04-13 15:15:12 -0400 (Fri, 13 Apr 2007) | 2
	  lines Add OUTBOUND_GROUP_ONCE variable to app_dial. This behaves
	  the same as OUTBOUND_GROUP except it will get unset after use so
	  it won't get accidentally inherited. (issue #BE-140) ........
	  ................

	* /, apps/app_speech_utils.c: Merged revisions 61651 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r61651 | file | 2007-04-13 14:08:02 -0400 (Fri, 13 Apr
	  2007) | 2 lines Do not bother looking for a result if none are
	  present. ........

	* /, channels/chan_sip.c: Merged revisions 61648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61648 | file | 2007-04-13 13:19:53 -0400 (Fri, 13 Apr 2007) | 2
	  lines For those very verbose SIP implementations that attach tons
	  of info to the Contact header... let's increase our variable
	  sizes. (issue #9535 reported by jeffg) ........

2007-04-13 17:15 +0000 [r61647]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 61645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61645 | russell | 2007-04-13 12:10:19 -0500 (Fri, 13 Apr 2007) |
	  3 lines Eliminate a compiler warning with ODBC_STORAGE enabled so
	  that it will build under dev-mode. ........

2007-04-13 17:11 +0000 [r61646]  Steve Murphy <murf@digium.com>

	* /, channels/chan_oss.c: Merged revisions 61644 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61644 | murf | 2007-04-13 11:01:02 -0600 (Fri, 13 Apr 2007) | 1
	  line A fix for chan_oss that resulted from the CDR changes; it
	  helps to use the right info. ........

2007-04-13 16:35 +0000 [r61618-61642]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 61641 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61641 | file | 2007-04-13 12:32:03 -0400 (Fri, 13 Apr 2007) | 2
	  lines Don't assume the callid of a dialog will be set, as in some
	  circumstances it may not. (issue #9534 reported by tecnoxarxa)
	  ........

	* channels/chan_sip.c: Don't treat a host lookup as failed if
	  sipregs is not in use when doing a realtime lookup. (issue #9255
	  reported by sergee)

2007-04-11 22:19 +0000 [r61575-61599]  Dwayne M. Hubbard <dhubbard@digium.com>

	* doc/asterisk-conf.tex: clarified 'minmemfree' description in
	  doc/asterisk-conf.tex

	* main/asterisk.c, doc/asterisk-conf.tex: fixed the '-e' command
	  line option for minmemfree. updated doc/asterisk-conf.tex

	* main/pbx.c, include/asterisk/options.h, main/asterisk.c: changed
	  #if HAVE_SYSINFO to #if defined(HAVE_SYSINFO)

	* main/pbx.c, include/asterisk/options.h, main/asterisk.c: added
	  HAVE_SYSINFO preprocessor directives for portability and general
	  happiness

2007-04-11 20:21 +0000 [r61557]  Joshua Colp <jcolp@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac: Add a
	  configure script check for sysinfo support.

2007-04-11 19:11 +0000 [r61539]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/pbx.c, include/asterisk/options.h, main/asterisk.c: added
	  option_minmemfree for use in asterisk.conf to specify the amount
	  of minimum free memory prior to accepting calls. added CLI 'core
	  show sysinfo' to display system information

2007-04-11 17:07 +0000 [r61522]  Joshua Colp <jcolp@digium.com>

	* main/logger.c: Output verbose messages to the normal logger as
	  well. (issue #9476 reported by gdalgliesh)

2007-04-11 16:06 +0000 [r61478]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 61477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61477 | russell | 2007-04-11 11:05:29 -0500
	  (Wed, 11 Apr 2007) | 13 lines Merged revisions 61476 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61476 | russell | 2007-04-11 11:01:25 -0500 (Wed, 11
	  Apr 2007) | 5 lines If someone sets the "useragent" option in
	  sip.conf to be empty, then don't add the User-Agent header at
	  all. It is an optional header, anyway. Also, the bug report says
	  that some of Japan's SIP providers don't allow it for some weird
	  reason. (issue #9488, reported by makoto, fixed by me) ........
	  ................

2007-04-11 15:48 +0000 [r61460]  Nadi Sarrar <ns@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_lib.c: Merged revisions
	  61342,61372-61373,61443 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61342 | nadi | 2007-04-11 12:52:28 +0200 (Mi, 11 Apr 2007) | 2
	  lines AOCD's are now exported to asterisk channel variables.
	  ........ r61372 | nadi | 2007-04-11 15:33:30 +0200 (Mi, 11 Apr
	  2007) | 2 lines Ignore facility messages in case we don't have a
	  corresponding channel object. ........ r61373 | nadi | 2007-04-11
	  15:40:26 +0200 (Mi, 11 Apr 2007) | 2 lines Export AOCD variables
	  on misdn_hangup. ........ r61443 | nadi | 2007-04-11 17:39:14
	  +0200 (Mi, 11 Apr 2007) | 2 lines Don't export AOCD variables on
	  misdn_hangup anymore, this was mainly a fix for trunk.. ........

2007-04-11 15:25 +0000 [r61379-61429]  Russell Bryant <russell@digium.com>

	* funcs/func_devstate.c: Add a minor loop optimization to the
	  custom device state callback. Once the correct device is found,
	  it should just break out of the loop ...

	* /, channels/chan_sip.c: Merged revisions 61427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61427 | russell | 2007-04-11 10:09:39 -0500
	  (Wed, 11 Apr 2007) | 14 lines Merged revisions 61426 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61426 | russell | 2007-04-11 10:05:36 -0500 (Wed, 11
	  Apr 2007) | 6 lines Fix a bug with switching between host=dynamic
	  and using specific hosts for peers. The code would only reset the
	  peer's address when it is dynamic if it was a new peer structure.
	  Now, it will also reset the address if it was already in the peer
	  list, but before the reload, it was not dynamic. (issue #9515,
	  reported by caio1982, fixed by me) ........ ................

	* /, main/http.c: Merged revisions 61407 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61407 | russell | 2007-04-11 09:48:01 -0500 (Wed, 11 Apr 2007) |
	  4 lines Add "svgz" to the mimetypes table. (issue #9510, bkruse)
	  In passing, constify the elements of the mimetypes table.
	  ........

	* /, channels/chan_sip.c: Merged revisions 61377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61377 | russell | 2007-04-11 09:04:44 -0500
	  (Wed, 11 Apr 2007) | 13 lines Merged revisions 61376 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r61376 | russell | 2007-04-11 09:02:54 -0500 (Wed, 11
	  Apr 2007) | 5 lines Remove the attempt at reporting configuration
	  errors in sip.conf. This can cause a bunch of improper messages
	  when using realtime. I give up. As oej tried to convince me when
	  I put this in, there is just no easy way to do it. (inspired by a
	  message on the -dev list) ........ ................

2007-04-11 14:09 +0000 [r61378]  Steve Murphy <murf@digium.com>

	* apps/app_voicemail.c: via 8119, a patch to allow voicemail data
	  to be stored in RealTime.

2007-04-11 14:01 +0000 [r61375]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Remove duplicate prototype declaration.
	  (issue #9517 reported by junky)

2007-04-11 13:41 +0000 [r61374]  Steve Murphy <murf@digium.com>

	* include/asterisk/config.h, main/config.c: via 8118, a RealTime
	  upgrade to make RT a complete storage abstraction. The
	  store/destroy mechanisms needed these missing peices.

2007-04-10 23:55 +0000 [r61324]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, main/manager.c, configs/manager.conf.sample,
	  include/asterisk/manager.h: Issue 6082 - New DTMF event for
	  manager

2007-04-10 22:02 +0000 [r61303]  Doug Bailey <dbailey@digium.com>

	* channels/chan_zap.c: Added zapata.conf parameter "cid_rxgain" to
	  allow the user to adjust the gain bump used during CID
	  acquisition.

2007-04-10 20:50 +0000 [r61222-61283]  Russell Bryant <russell@digium.com>

	* CHANGES: Note the bridge manager action and application in the
	  CHANGES file.

	* res/res_features.c: Merge changes from team/russell/issue_5841:
	  This patch adds a "Bridge" Manager action, as well as a "Bridge"
	  dialplan application. The manager action will allow you to steal
	  two active channels in the system and bridge them together. Then,
	  the one that did not hang up will continue in the dialplan. Using
	  the application will bridge the calling channel to an arbitrary
	  channel in the system. Whichever channel does not hang up here
	  will continue in the dialplan, as well. This patch has been
	  touched by a bunch of people over the course of a couple years.
	  Please forgive me if I have missed your name in the history of
	  things. The most recent patch came from issue #5841, but there is
	  also a reference to an earlier version of this patch from issue
	  #4297. The people involved in writing and/or reviewing the code
	  include at least: twisted, mflorrel, heath1444, davetroy,
	  tim_ringenbach, moy, tmancill, serge-v, and me. There are also
	  positive test reports from many people.

	* main/dial.c, include/asterisk/dial.h: Add an option to the dial
	  API for playing music instead of ringing to the caller. I started
	  this for use with SLA but ended up deciding not to use it.
	  However, there is no reason not to put this part in, anyway.

2007-04-10 16:07 +0000 [r61221]  Steve Murphy <murf@digium.com>

	* channels/chan_jingle.c: updated ast_channel_alloc() call to
	  include the 4 extra args everyone got. Not much info there, as
	  the config file evidently does not allow amaflags, or accountcode
	  settings; and the pvt's exten doesn't sound like what we need in
	  the cdr, either.

2007-04-10 12:47 +0000 [r61184]  Nadi Sarrar <ns@beronet.com>

	* /, channels/misdn_config.c: Merged revisions 61183 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61183 | nadi | 2007-04-10 14:43:40 +0200 (Di,
	  10 Apr 2007) | 10 lines Merged revisions 61170 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61170 | nadi | 2007-04-10 14:31:45 +0200 (Di, 10 Apr 2007) | 2
	  lines msns config parameter defaults to '*' ........
	  ................

2007-04-10 05:41 +0000 [r61152]  Steve Murphy <murf@digium.com>

	* main/pbx.c, channels/chan_local.c, channels/chan_vpb.cc,
	  channels/chan_zap.c, /, channels/chan_sip.c, res/res_features.c,
	  channels/chan_agent.c, include/asterisk/channel.h,
	  channels/chan_gtalk.c, channels/chan_iax2.c, channels/chan_oss.c,
	  main/channel.c, main/cdr.c, channels/chan_phone.c,
	  channels/chan_misdn.c, channels/chan_skinny.c,
	  channels/chan_features.c, channels/chan_h323.c,
	  channels/chan_alsa.c, channels/chan_nbs.c, channels/chan_mgcp.c,
	  apps/app_cdr.c, apps/app_voicemail.c: Merged revisions 60989 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60989 | murf | 2007-04-09 12:32:07 -0600 (Mon, 09 Apr 2007) | 1
	  line This is a big improvement over the current CDR fixes. It may
	  still need refinement, but this won't have as many folks
	  bothered. This also adds the mods from 1.4/r.61136; ........

2007-04-09 22:49 +0000 [r61116]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c: Remove unused instances of unnamed enums.

2007-04-09 20:01 +0000 [r61073]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 61072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r61072 | oej | 2007-04-09 21:58:17 +0200 (Mon,
	  09 Apr 2007) | 11 lines Merged revisions 61038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r61038 | oej | 2007-04-09 21:38:59 +0200 (Mon, 09 Apr 2007) | 3
	  lines - Don't send ActionID before Response: header. - Don't use
	  a blank in an AMI header ........ ................

2007-04-09 19:57 +0000 [r61065-61071]  Kevin P. Fleming <kpfleming@digium.com>

	* main/minimime/mm_envelope.c, /: Merged revisions 61070 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61070 | kpfleming | 2007-04-09 14:55:14 -0500 (Mon, 09 Apr 2007)
	  | 2 lines fix up some warnings found using --enable-dev-mode
	  ........

	* /, main/minimime/tests/CVS (removed), main/minimime/Doxyfile
	  (removed), main/minimime/tests/messages/CVS (removed): Merged
	  revisions 61062 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61062 | kpfleming | 2007-04-09 14:49:09 -0500 (Mon, 09 Apr 2007)
	  | 2 lines remove some more stuff we don't need ........

2007-04-09 19:06 +0000 [r61023]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 61022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r61022 | qwell | 2007-04-09 14:05:48 -0500 (Mon, 09 Apr 2007) | 4
	  lines Use the appropriate interface name with COMPLETECALLER.
	  Issue 9395. ........

2007-04-09 19:05 +0000 [r60985-61021]  Olle Johansson <oej@edvina.net>

	* main/manager.c: Add hint to ExtensionStatus AMI event in manager

	* channels/chan_sip.c, CHANGES, channels/chan_iax2.c: use
	  "ChannelType" in events to indicate which channel driver that
	  generates the event. This replaces "ChannelDriver" and "Channel",
	  previously used to indicate channel driver. ChannelType is more
	  in line with "core show channeltypes"

	* res/res_jabber.c: Fix JabberEvents

	* /, res/res_jabber.c: Fix missing newline in JabberEvent

2007-04-09 17:23 +0000 [r60937]  Jason Parker <jparker@digium.com>

	* /, apps/app_directory.c: Merged revisions 60936 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60936 | qwell | 2007-04-09 12:22:59 -0500 (Mon,
	  09 Apr 2007) | 13 lines Merged revisions 60935 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r60935 | qwell | 2007-04-09 12:22:15 -0500 (Mon, 09 Apr 2007) | 5
	  lines Allow matching on names shorter than 3 chars. This also
	  fixes the case where somebody wants to match on less then 3
	  chars. Issue 9071 ........ ................

2007-04-09 16:30 +0000 [r60917]  Dwayne M. Hubbard <dhubbard@digium.com>

	* UPGRADE.txt: updated UPGRADE.txt to include format_wav changes

2007-04-09 12:33 +0000 [r60898]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Make RTP session ID and session version
	  generation random. (issue #9456 reported by tjardick)

2007-04-09 03:04 +0000 [r60848-60851]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk.h, /, main/asterisk.c: Merged revisions 60850
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60850 | tilghman | 2007-04-08 22:01:12 -0500
	  (Sun, 08 Apr 2007) | 10 lines Merged revisions 60849 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60849 | tilghman | 2007-04-08 21:49:06 -0500 (Sun, 08
	  Apr 2007) | 2 lines Don't check for error when lowering priority
	  (according to the manpage, it should never happen anyway). It
	  might could happen, though, if another thread messed with the
	  priority, so safeguard against that (reported via -dev list).
	  ........ ................

	* channels/chan_local.c, /: Merged revisions 60847 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60847 | tilghman | 2007-04-08 21:42:48 -0500
	  (Sun, 08 Apr 2007) | 10 lines Merged revisions 60846 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60846 | tilghman | 2007-04-08 21:37:18 -0500 (Sun, 08
	  Apr 2007) | 2 lines Bug 9505 - If the return value for
	  local_queue_frame is set, then p->lock is no longer valid.
	  ........ ................

2007-04-09 01:06 +0000 [r60763-60799]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 60798 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60798 | file | 2007-04-08 21:03:14 -0400 (Sun,
	  08 Apr 2007) | 10 lines Merged revisions 60797 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r60797 | file | 2007-04-08 20:59:29 -0400 (Sun, 08 Apr 2007) | 2
	  lines When calling a device that then forwards us elsewhere... we
	  have to make our channels compatible if it is the only channel
	  being dialed. (issue #9445 reported by marcelbarbulescu) ........
	  ................

	* channels/chan_sip.c: Add counter for sip show registry CLI
	  command. (issue #9352 reported by junky)

	* /, apps/app_queue.c: Merged revisions 60762 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60762 | file | 2007-04-08 13:04:44 -0400 (Sun, 08 Apr 2007) | 2
	  lines Allow app_queue to use MONITOR_EXEC even if MONITOR_OPTIONS
	  is not set. (issue #9495 reported by cduffy) ........

2007-04-08 14:23 +0000 [r60662-60715]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 60713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60713 | tilghman | 2007-04-08 09:14:29 -0500
	  (Sun, 08 Apr 2007) | 10 lines Merged revisions 60711 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60711 | tilghman | 2007-04-08 09:00:22 -0500 (Sun, 08
	  Apr 2007) | 2 lines Gosub called within a Macro resets the
	  arguments improperly and causes general weirdness. (Issue 8329)
	  ........ ................

	* /, formats/format_wav.c, main/http.c: Merged revisions 60712 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60712 | tilghman | 2007-04-08 09:12:00 -0500 (Sun, 08 Apr 2007)
	  | 2 lines Fix --enable-dev-mode ........

	* /, main/file.c: Merged revisions 60661 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60661 | tilghman | 2007-04-07 20:40:47 -0500
	  (Sat, 07 Apr 2007) | 10 lines Merged revisions 60660 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60660 | tilghman | 2007-04-07 20:39:25 -0500 (Sat, 07
	  Apr 2007) | 2 lines Bug 9486 - memory leak when opening a
	  filestream ........ ................

2007-04-06 22:29 +0000 [r60641]  Dwayne M. Hubbard <dhubbard@digium.com>

	* formats/format_wav.c: removed GAIN preprocessor definition,
	  removed needsgain from struct wav_desc, removed unnecessary gain
	  code from wav_read() and wav_write()

2007-04-06 21:43 +0000 [r60566-60623]  Russell Bryant <russell@digium.com>

	* main/minimime/Makefile: Filter out -Wundef so that the
	  automatically generated C files will compile cleanly

	* main/minimime/mytest_files (removed), main/minimime/sys/CVS
	  (removed), main/minimime/.cvsignore (removed),
	  main/minimime/mm-docs (removed), main/minimime/test (removed):
	  Remove a bunch of files that weren't supposed to get added.

	* main/minimime/mm-docs/html/mm__envelope_8c.html,
	  main/minimime/tests/messages, include/asterisk/autoconfig.h.in,
	  main/minimime/mm-docs/html/mm__context_8c.html,
	  main/minimime/sys, main/minimime/tests/Makefile,
	  main/minimime/tests/CVS/Root, main/minimime/sys/CVS/Entries,
	  main/minimime/mm-docs/latex/mm__mimeutil_8c.tex, configure,
	  main/strcompat.c, main/http.c, main/minimime/mm_error.c,
	  main/minimime/mm-docs/html/globals_func.html,
	  main/minimime/mm-docs/html/group__mimeutil.html,
	  main/minimime/mm-docs/latex/doxygen.sty,
	  main/minimime/mm_param.c, main/minimime/test/CVS, configure.ac,
	  main/minimime/.cvsignore, main/minimime/mm_init.c,
	  main/minimime/mm-docs/html/mm__queue_8h-source.html,
	  main/minimime/mm-docs/html/mm__error_8c.html,
	  main/minimime/mm-docs/html/tabs.css, main/minimime/mm_envelope.c,
	  main/minimime/mimeparser.h, main/minimime/mimeparser.l,
	  main/minimime/mm_context.c,
	  main/minimime/mm-docs/html/group__mimepart.html,
	  main/minimime/mm-docs/latex/group__envelope.tex,
	  main/minimime/tests/messages/CVS,
	  main/minimime/mm-docs/html/mm__contenttype_8c.html,
	  main/minimime/mm-docs/html/pages.html,
	  main/minimime/mm-docs/html/group__error.html,
	  main/minimime/mm-docs/latex/group__context.tex,
	  main/minimime/mimeparser.y, Makefile.moddir_rules,
	  main/minimime/sys/mm_queue.h,
	  main/minimime/mm-docs/html/bug.html,
	  main/minimime/mm-docs/html/mimeparser_8tab_8h-source.html,
	  main/minimime/tests/messages/CVS/Root,
	  main/minimime/mm_mimepart.c,
	  main/minimime/mm-docs/latex/Makefile,
	  main/minimime/mm_internal.h, main/minimime/tests/CVS,
	  main/minimime/mm-docs/latex/mm__param_8c.tex,
	  main/minimime/tests/parse.c, main/minimime/mm_base64.c,
	  main/minimime/mm.h, main/minimime/mm_header.c,
	  main/minimime/mm-docs/latex/mm__parse_8c.tex,
	  main/minimime/mm-docs/html/mimeparser_8h-source.html,
	  main/minimime/mm-docs/html/files.html,
	  main/minimime/mm-docs/latex/mm__contenttype_8c.tex,
	  main/minimime/mm-docs/html/mm__mem_8h-source.html,
	  main/minimime/mm_codecs.c,
	  main/minimime/mm-docs/latex/mm__mimepart_8c.tex,
	  main/minimime/mytest_files/mytest.c,
	  main/minimime/mm-docs/html/mm__mimeutil_8c.html,
	  main/minimime/mm-docs/latex/files.tex,
	  main/minimime/test/CVS/Entries,
	  main/minimime/mm-docs/latex/modules.tex,
	  main/minimime/tests/messages/CVS/Repository,
	  configs/http.conf.sample, main/minimime/mm_contenttype.c,
	  main/minimime/tests/messages/test1.txt,
	  main/minimime/mm-docs/html/mm__param_8c.html,
	  main/minimime/tests/messages/test3.txt,
	  main/minimime/tests/messages/test5.txt,
	  main/minimime/tests/messages/test7.txt,
	  main/minimime/mm-docs/html/group__contenttype.html,
	  main/minimime/mm-docs,
	  main/minimime/mytest_files/ast_postdata3.gz, main/minimime
	  (added), main/minimime/Make.conf,
	  main/minimime/mm-docs/latex/group__contenttype.tex,
	  main/minimime/mm_warnings.c, main/minimime/mm_queue.h,
	  main/minimime/mm-docs/html/mm__util_8c.html,
	  main/minimime/mm-docs/html/doxygen.css, /,
	  main/minimime/mm-docs/html/mm__internal_8h.html,
	  main/minimime/tests/messages/CVS/Entries, main/minimime/Doxyfile,
	  main/minimime/minimime.c, main/minimime/mimeparser.yy.c,
	  main/minimime/tests/CVS/Entries.Log, main/minimime/test.sh,
	  include/asterisk/compat.h, main/minimime/test/CVS/Repository,
	  main/minimime/mm_mimeutil.c, main/minimime/tests,
	  main/minimime/mm-docs/latex/group__mimepart.tex,
	  main/minimime/tests/CVS/Entries, main/Makefile,
	  main/minimime/mm-docs/latex/mm__envelope_8c.tex,
	  main/minimime/mm-docs/latex/mm__util_8c.tex,
	  main/minimime/mm-docs/latex/pages.tex,
	  main/minimime/mm-docs/latex/group__mimeutil.tex,
	  main/minimime/mm-docs/latex,
	  main/minimime/mm-docs/html/mm_8h-source.html,
	  main/minimime/Makefile,
	  main/minimime/mm-docs/latex/mm__internal_8h.tex,
	  main/minimime/mm-docs/refman.pdf, include/asterisk/manager.h,
	  main/minimime/mm-docs/latex/mm__context_8c.tex,
	  main/minimime/mm-docs/latex/group__param.tex,
	  main/minimime/mm-docs/latex/group__codecs.tex,
	  main/minimime/tests/create.c, main/minimime/mm_util.c,
	  main/minimime/mm-docs/latex/bug.tex,
	  main/minimime/mimeparser.tab.c, main/minimime/mm_util.h,
	  main/minimime/mytest_files/ast_postdata,
	  main/minimime/mm-docs/html/group__envelope.html,
	  main/minimime/mm-docs/html/group__util.html,
	  main/minimime/mimeparser.tab.h,
	  main/minimime/mm-docs/html/mm__parse_8c.html,
	  main/minimime/mm-docs/html,
	  main/minimime/mm-docs/latex/group__util.tex,
	  main/minimime/mm-docs/html/group__context.html,
	  main/minimime/mm-docs/html/mm__internal_8h-source.html,
	  main/minimime/mytest_files,
	  main/minimime/mm-docs/html/mm__util_8h-source.html,
	  main/minimime/sys/CVS,
	  main/minimime/mm-docs/html/group__codecs.html, main/manager.c,
	  main/minimime/sys/CVS/Repository,
	  main/minimime/mm-docs/html/globals.html,
	  main/minimime/mm-docs/html/mm__mimepart_8c.html,
	  main/minimime/tests/CVS/Repository,
	  main/minimime/mm-docs/html/index.html,
	  main/minimime/mm-docs/html/modules.html, main/minimime/test,
	  main/minimime/mytest_files/ast_postdata2,
	  main/minimime/mm-docs/latex/group__error.tex,
	  main/minimime/mm-docs/html/mm__header_8c.html,
	  main/minimime/strlcpy.c,
	  main/minimime/mm-docs/html/group__param.html,
	  main/minimime/mm-docs/latex/refman.tex, main/minimime/mm_parse.c,
	  main/minimime/mm-docs/latex/mm__header_8c.tex,
	  main/minimime/mm-docs/latex/mm__error_8c.tex,
	  main/minimime/mm_mem.c,
	  main/minimime/mm-docs/html/mm__codecs_8c.html,
	  main/minimime/tests/messages/test2.txt,
	  main/minimime/tests/messages/test4.txt,
	  main/minimime/sys/CVS/Root,
	  main/minimime/tests/messages/test6.txt,
	  main/minimime/test/CVS/Root, main/minimime/strlcat.c,
	  main/minimime/mm_mem.h,
	  main/minimime/mm-docs/latex/mm__codecs_8c.tex: Merged revisions
	  60603 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60603 | russell | 2007-04-06 15:58:43 -0500 (Fri, 06 Apr 2007) |
	  13 lines To be able to achieve the things that we would like to
	  achieve with the Asterisk GUI project, we need a fully functional
	  HTTP interface with access to the Asterisk manager interface. One
	  of the things that was intended to be a part of this system, but
	  was never actually implemented, was the ability for the GUI to be
	  able to upload files to Asterisk. So, this commit adds this in
	  the most minimally invasive way that we could come up with. A lot
	  of work on minimime was done by Steve Murphy. He fixed a lot of
	  bugs in the parser, and updated it to be thread-safe. The ability
	  to check permissions of active manager sessions was added by
	  Dwayne Hubbard. Then, hacking this all together and do doing the
	  modifications necessary to the HTTP interface was done by me.
	  ........

	* /, apps/app_meetme.c: Merged revisions 60565 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60565 | russell | 2007-04-06 14:50:52 -0500 (Fri, 06 Apr 2007) |
	  3 lines When a station picks up a trunk that was on hold, make
	  the hints reflect that nobody has the trunk on hold anymore.
	  ........

2007-04-06 19:26 +0000 [r60531]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Use the same parameter to the two "Registry"
	  AMI events - ChannelDriver

2007-04-06 18:59 +0000 [r60522]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 60521 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60521 | russell | 2007-04-06 13:58:46 -0500 (Fri, 06 Apr 2007) |
	  16 lines Fix a few problems with SLA. (issue #9459, reported by
	  francesco_r, fixed by me) * The original behavior was that if one
	  station put a call on hold, another one picked it up, and then
	  hung up, the code would still consider the call on hold by the
	  first station, so the trunk would not be hung up. However, to
	  better comply with what most people seem to expect it to behave,
	  it will now hang up the trunk. * Fix a problem with "barge=no".
	  This was only intended to prevent people from joining calls that
	  are in progress. However, it also prevented other people from
	  picking up a call that was on hold. This has been fixed. * When
	  there are no active stations on a trunk and it is on hold, the
	  code now indicates the HOLD and UNHOLD conditions to the trunk
	  channel. This allows music on hold to be played to the trunk when
	  it is on hold. ........

2007-04-06 18:26 +0000 [r60486-60487]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 60485 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60485 | mattf | 2007-04-06 13:21:52 -0500 (Fri, 06 Apr 2007) | 2
	  lines Make sure we check the faxdetect option before doing fax
	  processing ........

	* channels/chan_zap.c, /: Merged revisions 60459 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60459 | mattf | 2007-04-06 12:32:31 -0500 (Fri,
	  06 Apr 2007) | 10 lines Merged revisions 60456 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r60456 | mattf | 2007-04-06 12:03:15 -0500 (Fri, 06 Apr 2007) | 2
	  lines There should only be one code path for doing DTMF
	  conditionals on channels. This fixes it. ........
	  ................

2007-04-06 14:53 +0000 [r60400]  Kevin P. Fleming <kpfleming@digium.com>

	* /, codecs/codec_zap.c: Merged revisions 60399 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60399 | kpfleming | 2007-04-06 09:49:51 -0500
	  (Fri, 06 Apr 2007) | 10 lines Merged revisions 60398 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60398 | kpfleming | 2007-04-06 09:41:37 -0500 (Fri, 06
	  Apr 2007) | 2 lines remove undocumented 'cardsmode' parameter and
	  stop searching for transcoders during reload() ........
	  ................

2007-04-06 01:29 +0000 [r60362-60363]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/speech.h, res/res_speech.c: Major res_speech
	  cleanup. It looks much better now!

	* /, include/asterisk/speech.h, res/res_speech.c,
	  apps/app_speech_utils.c: Merged revisions 60361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60361 | file | 2007-04-05 22:14:00 -0300 (Thu, 05 Apr 2007) | 2
	  lines Add support for returning different types of results (ie:
	  NBest). ........

2007-04-05 23:08 +0000 [r60326]  Dwayne M. Hubbard <dhubbard@digium.com>

	* /, formats/format_wav.c: Merged revisions 60325 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60325 | dhubbard | 2007-04-05 17:58:01 -0500 (Thu, 05 Apr 2007)
	  | 1 line modified default GAIN for issue 5823, thanks jrwalliker
	  ........

2007-04-05 22:40 +0000 [r60324]  Steve Murphy <murf@digium.com>

	* configs/cdr_custom.conf.sample, /, configs/cdr.conf.sample:
	  Merged revisions 60323 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60323 | murf | 2007-04-05 16:35:11 -0600 (Thu, 05 Apr 2007) | 1
	  line Added some clarification to the example configs for CDRs, on
	  how to select a backend. Also, made cdr-csv the default if you
	  'make samples', and no other changes. ........

2007-04-05 16:11 +0000 [r60269]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 60268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60268 | qwell | 2007-04-05 11:10:48 -0500 (Thu,
	  05 Apr 2007) | 13 lines Merged revisions 60267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r60267 | qwell | 2007-04-05 11:09:41 -0500 (Thu, 05 Apr 2007) | 5
	  lines Just because we can't find the voicemail configuration
	  file, doesn't mean that the module failed to load. The user could
	  be using realtime. Issue #9473 ........ ................

2007-04-05 15:48 +0000 [r60266]  Russell Bryant <russell@digium.com>

	* /, main/http.c: Merged revisions 60265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60265 | russell | 2007-04-05 10:47:17 -0500 (Thu, 05 Apr 2007) |
	  2 lines Add the MIME type for gif by request from Pari ........

2007-04-05 12:57 +0000 [r60215]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 60214 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60214 | file | 2007-04-05 08:55:02 -0400 (Thu,
	  05 Apr 2007) | 10 lines Merged revisions 60213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r60213 | file | 2007-04-05 08:52:50 -0400 (Thu, 05 Apr 2007) | 2
	  lines Only unlock our pvt and net locks if we are actually going
	  to try to lock the owner again. (issue #9472 reported by zoa)
	  ........ ................

2007-04-04 23:45 +0000 [r60193]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/callerid.c: ast_shrink_phone_number() must ignore
	  whitespace, otherwise my CIDCO callerid box gets LINE ERROR

2007-04-04 17:41 +0000 [r60011-60141]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 60137 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60137 | russell | 2007-04-04 12:40:10 -0500
	  (Wed, 04 Apr 2007) | 14 lines Merged revisions 60134 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60134 | russell | 2007-04-04 12:38:47 -0500 (Wed, 04
	  Apr 2007) | 6 lines It is valid to redirect channels via the
	  manager interface that are not in the UP state. Instead of
	  checking for that to prevent to ensure a dead channel doesn't get
	  redirected, just use the ast_check_hangup() API call. (issue
	  #9457, reported by Callmewind, patch by me) (related to issue
	  #8977) ........ ................

	* /, channels/chan_sip.c: Merged revisions 60112 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60112 | russell | 2007-04-04 11:49:45 -0500 (Wed, 04 Apr 2007) |
	  3 lines Add a Content-Length of 0 to the response built by
	  transmit_response_with_unsupported(). (issue #9454, reported by
	  makoto, fixed by me) ........

	* /, channels/chan_sip.c: Merged revisions 60088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r60088 | russell | 2007-04-04 11:39:04 -0500
	  (Wed, 04 Apr 2007) | 12 lines Merged revisions 60083 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r60083 | russell | 2007-04-04 11:37:04 -0500 (Wed, 04
	  Apr 2007) | 4 lines Fix the return value of
	  handle_common_options() so that it always properly indicates
	  whether it handled the option or not. (issue #9455, reported by
	  Netview, fixed by me) ........ ................

	* /, apps/app_meetme.c: Merged revisions 60069 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r60069 | russell | 2007-04-04 11:26:23 -0500 (Wed, 04 Apr 2007) |
	  4 lines Fix a problem where if a trunk was hung up while it was
	  on hold, all of the hints would reflect the line still on hold,
	  even though it should reflect that it is back to not in use.
	  (issue #9459, reported by francesco_r, fixed by me) ........

	* channels/chan_jingle.c, channels/chan_gtalk.c,
	  doc/rtp-packetization.txt: Add support for RTP packetization in
	  chan_jingle and chan_gtalk. (issue #9416, phsultan)

2007-04-03 19:43 +0000 [r59969]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 59963 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r59963 | file | 2007-04-03 15:40:59 -0400 (Tue, 03 Apr
	  2007) | 2 lines Don't clash when a person both speaks and uses
	  DTMF. ........

2007-04-03 19:17 +0000 [r59854-59940]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 59939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59939 | russell | 2007-04-03 14:16:53 -0500
	  (Tue, 03 Apr 2007) | 12 lines Merged revisions 59938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59938 | russell | 2007-04-03 14:15:04 -0500 (Tue, 03
	  Apr 2007) | 4 lines Don't attempt to report configuration errors
	  in build_user(). oej pointed out that for a "friend" entry, this
	  won't work, because all user options are valid for peers, but not
	  the other way around. ........ ................

	* /, channels/chan_sip.c: Merged revisions 59936 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59936 | russell | 2007-04-03 13:55:57 -0500
	  (Tue, 03 Apr 2007) | 11 lines Merged revisions 59916 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59916 | russell | 2007-04-03 13:43:54 -0500 (Tue, 03
	  Apr 2007) | 3 lines Make chan_sip report when it encounters an
	  unknown option. (issue #9440, reported by nightcrawler) ........
	  ................

	* channels/chan_sip.c: Remove a duplicate function prototype.
	  (issue #9444, junky)

	* /, main/app.c: Merged revisions 59887 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59887 | russell | 2007-04-03 13:01:49 -0500
	  (Tue, 03 Apr 2007) | 13 lines Merged revisions 59886 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59886 | russell | 2007-04-03 12:58:19 -0500 (Tue, 03
	  Apr 2007) | 5 lines When doing a built-in blind or attended
	  transfer, restore the ability to use '#' to terminate the number
	  and immediately do the transfer instead of having to dial the
	  number and just wait for the feature digit timeout. (issue #8366,
	  xueliangliang) ........ ................

	* Makefile, /: Merged revisions 59853 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59853 | russell | 2007-04-03 11:03:35 -0500 (Tue, 03 Apr 2007) |
	  1 line Ensure that menuselect gets executed in dependency check
	  mode every time you run make. ........

2007-04-03 11:15 +0000 [r59805]  Nadi Sarrar <ns@beronet.com>

	* /, channels/misdn/chan_misdn_config.h, channels/misdn_config.c:
	  Merged revisions 59804 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59804 | nadi | 2007-04-03 13:02:46 +0200 (Di,
	  03 Apr 2007) | 15 lines Merged revisions 59788,59803 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59788 | nadi | 2007-04-03 11:37:00 +0200 (Di, 03 Apr
	  2007) | 2 lines Use the new sysfs way of mISDN 1.2 to check if a
	  port is NT or not. ........ r59803 | nadi | 2007-04-03 12:40:58
	  +0200 (Di, 03 Apr 2007) | 2 lines ptp is the 5th bit, not the
	  4th. ........ ................

2007-04-02 19:01 +0000 [r59725]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 59724 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59724 | file | 2007-04-02 14:58:24 -0400 (Mon,
	  02 Apr 2007) | 10 lines Merged revisions 59723 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59723 | file | 2007-04-02 14:55:25 -0400 (Mon, 02 Apr 2007) | 2
	  lines Increase the maximum size for a string of mailboxes to
	  1024. (issue #9270 reported by rtucker) ........ ................

2007-04-02 17:40 +0000 [r59693]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: This hashing code is still causing some
	  random crashes on my system, and probably others, too. I don't
	  really have time to work on it at the moment, so I am just going
	  to revert it for now.

2007-04-02 17:38 +0000 [r59692]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 59688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59688 | murf | 2007-04-02 11:31:32 -0600 (Mon, 02 Apr 2007) | 1
	  line continue in for-loop should go to the incrementer, not the
	  test. As per 9435, thanks to marcelbarbulescu ........

2007-04-02 16:08 +0000 [r59655]  Russell Bryant <russell@digium.com>

	* /, main/netsock.c: Merged revisions 59654 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59654 | russell | 2007-04-02 10:39:07 -0500
	  (Mon, 02 Apr 2007) | 14 lines Merged revisions 59608 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59608 | russell | 2007-04-01 17:35:25 -0500 (Sun, 01
	  Apr 2007) | 6 lines Add the SO_REUSEADDR flag to sockets handled
	  by netsock. This is needed by the patch that went in for issue
	  7874. chan_iax2 needs to be able to create socket that is
	  lisetning on INADDR_ANY, but also be able to bind sockets to
	  specific addresses. (Thanks to Stevenson on the asterisk-dev
	  mailing list for explaining why this flag was needed.) ........
	  ................

2007-03-30 22:54 +0000 [r59574]  Jason Parker <jparker@digium.com>

	* /, configure, main/Makefile, acinclude.m4: Merged revisions 59573
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59573 | qwell | 2007-03-30 17:50:31 -0500 (Fri, 30 Mar 2007) | 2
	  lines Add linux-uclibc host arch..."thingy". Sorry, I don't know
	  what it's called... ........

2007-03-30 20:54 +0000 [r59555]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Update to support multiple CIC groups and
	  DPCs per linkset.

2007-03-30 17:57 +0000 [r59453-59523]  Steve Murphy <murf@digium.com>

	* main/cdr.c, main/channel.c, main/pbx.c, /, res/res_features.c,
	  include/asterisk/cdr.h: Merged revisions 59522 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59522 | murf | 2007-03-30 11:51:17 -0600 (Fri, 30 Mar 2007) | 1
	  line several changes via kpflemings review ........

	* main/cdr.c, main/channel.c, main/pbx.c, /, res/res_features.c,
	  include/asterisk/cdr.h: Merged revisions 59486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59486 | murf | 2007-03-30 08:11:59 -0600 (Fri, 30 Mar 2007) | 1
	  line These mods fix CDR issues from 8221, 8593, 8680, 8743, and
	  perhaps others. Mainly with CDRs generated from transfer
	  situations. ........

	* /, configs/extensions.conf.sample: Merged revisions 59452 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59452 | murf | 2007-03-29 18:56:36 -0600 (Thu, 29 Mar 2007) | 1
	  line A small clarification to keep bugs from being filed, and
	  confusion from rising, if clearglobalvars is set, and globals are
	  set in the AEL file. (9419) ........

2007-03-29 23:27 +0000 [r59364-59433]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: Reduce the ridiculous number of variables
	  used in the load_config() function by just having one that can be
	  re-used. There is no functional change here (that is intentional,
	  anyway!).

	* CHANGES, apps/app_voicemail.c: Add the ability for the "voicemail
	  show users" CLI command to show users configured in realtime.

	* channels/chan_iax2.c: Fix an issue with hashing iax2 pvt
	  structures that caused random crashes on systems under heavy load
	  such as IAXtel. (possibly related to issue #9403)

	* /, res/res_jabber.c: Merged revisions 59363 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59363 | russell | 2007-03-29 12:43:52 -0500 (Thu, 29 Mar 2007) |
	  6 lines When building a response to a subscription, the "from"
	  must be the full Jabber ID. This fixes some problems where jabber
	  users are not able to add their Asterisk account to their user
	  list, since they are unable to get Asterisk to approve their
	  subscription. (issue #8210, reported by caspy, and verified by
	  bradtem) ........

2007-03-29 17:42 +0000 [r59362]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 59361 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59361 | file | 2007-03-29 13:38:55 -0400 (Thu,
	  29 Mar 2007) | 10 lines Merged revisions 59360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59360 | file | 2007-03-29 13:33:58 -0400 (Thu, 29 Mar 2007) | 2
	  lines Keep a global array of variables indicating whether certain
	  conference rooms are in use. This ensures that two people going
	  into a new dynamic conference when the 'e' option is set don't go
	  into the same conference room. (issue #8835 reported by eliel)
	  ........ ................

2007-03-29 17:20 +0000 [r59305-59359]  Russell Bryant <russell@digium.com>

	* /, main/rtp.c: Merged revisions 59358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59358 | russell | 2007-03-29 12:17:41 -0500
	  (Thu, 29 Mar 2007) | 13 lines Merged revisions 59357 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59357 | russell | 2007-03-29 12:14:33 -0500 (Thu, 29
	  Mar 2007) | 5 lines If an error occurs when reading from an RTP
	  socket, and the error code does not indicate that we should try
	  again, then return NULL instead of a "null frame". This will
	  prevent Asterisk from trying over and over again, and eventually
	  causing the system to crash. (issue #8285, john) ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 59341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59341 | russell | 2007-03-29 11:55:39 -0500 (Thu, 29 Mar 2007) |
	  8 lines When the IAX2 read callback gets called, return NULL
	  instead of a "null frame". This will cause Asterisk to hangup the
	  call instead of keep trying whatever it was doing. Under normal
	  conditions, this function would *never* be called. However, the
	  author of this patch says an error will occur that will cause it
	  to get called every 100 thousand calls or so. When this does
	  happen, it puts the channel in a loop that eventually brings down
	  the system. So, hangup up the call is certainly a better
	  alternative. (issue #8286, john) ........

	* Makefile, /: Merged revisions 59304 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59304 | russell | 2007-03-29 11:25:41 -0500 (Thu, 29 Mar 2007) |
	  2 lines Export the GTK2 library and include information to sub
	  Makefiles. ........

2007-03-29 16:08 +0000 [r59303]  Tilghman Lesher <tlesher@digium.com>

	* /, cdr/cdr_odbc.c: Merged revisions 59302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59302 | tilghman | 2007-03-29 11:07:05 -0500
	  (Thu, 29 Mar 2007) | 11 lines Merged revisions 59301 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59301 | tilghman | 2007-03-29 11:04:46 -0500 (Thu, 29
	  Mar 2007) | 3 lines Issue 9415 - No point to getting a diagnostic
	  field if we aren't doing anything with the information. (Plus, it
	  tends to crash the Postgres ODBC driver.) ........
	  ................

2007-03-28 03:40 +0000 [r59290]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 59289 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59289 | tilghman | 2007-03-27 22:38:09 -0500 (Tue, 27 Mar 2007)
	  | 2 lines Another crash that I thought we had fixed already -
	  Issue 9396 ........

2007-03-28 00:09 +0000 [r59286]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_zap.c: added filtering options to 'zap show
	  channels' to implement functionality described in issue 6520

2007-03-27 23:38 +0000 [r59282-59285]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 59284 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59284 | tilghman | 2007-03-27 18:37:31 -0500
	  (Tue, 27 Mar 2007) | 10 lines Merged revisions 59283 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59283 | tilghman | 2007-03-27 18:36:49 -0500 (Tue, 27
	  Mar 2007) | 2 lines Oops ........ ................

	* /, apps/app_voicemail.c: Merged revisions 59281 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59281 | tilghman | 2007-03-27 18:32:46 -0500
	  (Tue, 27 Mar 2007) | 10 lines Merged revisions 59280 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59280 | tilghman | 2007-03-27 18:31:20 -0500 (Tue, 27
	  Mar 2007) | 2 lines Fix a few remaining bad mmap(2) return values
	  ........ ................

2007-03-27 23:22 +0000 [r59274-59279]  Russell Bryant <russell@digium.com>

	* /, apps/app_directory.c: Merged revisions 59278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59278 | russell | 2007-03-27 18:20:22 -0500
	  (Tue, 27 Mar 2007) | 11 lines Merged revisions 59277 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59277 | russell | 2007-03-27 18:19:41 -0500 (Tue, 27
	  Mar 2007) | 3 lines Fix the check of the return value from
	  mmap(). Thanks to Corydon for catching this one. ........
	  ................

	* /, apps/app_directory.c: Merged revisions 59275 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59275 | russell | 2007-03-27 18:16:27 -0500 (Tue, 27 Mar 2007) |
	  3 lines Fix app_directory to actually compile with ODBC_STORAGE,
	  and update the code to the latest res_odbc API. ........

	* /, apps/Makefile: Merged revisions 59273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59273 | russell | 2007-03-27 18:02:12 -0500 (Tue, 27 Mar 2007) |
	  4 lines Fix app_directory when ODBC_STORAGE is being used. The
	  Makefile did not properly ensure that this information got copied
	  from what was selected for app_voicemail. (issue #9224) ........

2007-03-27 20:11 +0000 [r59272]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c: Use better english. Renegotiate! Repeat
	  after me: renegotiate.

2007-03-27 18:21 +0000 [r59264]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 59261 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59261 | murf | 2007-03-27 12:16:32 -0600 (Tue, 27 Mar 2007) | 1
	  line via 9373 (duplicate context in AEL crashes asterisk),
	  kpfleming pointed on asterisk-dev, that DECLINE in this case the
	  proper thing to do. This change now has it doing the proper
	  thing. ........

2007-03-27 18:18 +0000 [r59257-59263]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 59262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59262 | russell | 2007-03-27 13:17:47 -0500 (Tue, 27 Mar 2007) |
	  3 lines Fix the check that ensures that the CHANNEL function's
	  first argument is "rtpqos". Thanks, Corydon. :) ........

	* /, channels/chan_iax2.c: Merged revisions 59259 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59259 | russell | 2007-03-27 13:05:46 -0500
	  (Tue, 27 Mar 2007) | 12 lines Merged revisions 59258 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r59258 | russell | 2007-03-27 13:04:02 -0500 (Tue, 27
	  Mar 2007) | 4 lines Fix the use of the "sourceaddress" option
	  when "bindaddr" is set to 0.0.0.0 instead of having each
	  interface explicitly listed. (issue #7874, patch by stevens)
	  ........ ................

	* /, channels/chan_sip.c, funcs/func_channel.c: Merged revisions
	  59256 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59256 | russell | 2007-03-27 11:20:53 -0500 (Tue, 27 Mar 2007) |
	  4 lines Convert the RTPQOS function to just be additional
	  parameter of the CHANNEL function. This way, it will be possible
	  for other RTP based channel drivers to expose this information in
	  the future. ........

2007-03-27 14:09 +0000 [r59233-59253]  Steve Murphy <murf@digium.com>

	* include/asterisk/config.h: Enhancement via 8118: Realtime API
	  extension: add methods store_func and destroy_func, to make
	  Realtime a complete database abstraction

	* pbx/ael/ael-test/ael-test18/extensions.ael (added),
	  pbx/ael/ael-test/ael-test18 (added),
	  pbx/ael/ael-test/ref.ael-test18 (added): added the no. 18
	  regression test

	* pbx/ael/ael-test/ael-test19/extensions.ael (added),
	  pbx/ael/ael-test/ref.ael-vtest17, pbx/ael/ael-test/ael-test19
	  (added), pbx/ael/ael-test/ref.ael-test7,
	  pbx/ael/ael-test/ref.ael-test19 (added),
	  pbx/ael/ael-test/ref.ael-vtest13: updated the regressions with
	  regards to 9373, the crash on double contexts, and brought other
	  regressions up to date

	* /, pbx/pbx_ael.c: Merged revisions 59228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59228 | murf | 2007-03-26 15:41:32 -0600 (Mon, 26 Mar 2007) | 1
	  line fix for 9373 (duplicate context in AEL crashes asterisk). I
	  turned a duplicate context from a WARNING to an ERROR. Now you
	  get a module load failure, and asterisk just exits. That's better
	  than a crash, right\? ........

2007-03-26 21:46 +0000 [r59229-59231]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 59227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59227 | tilghman | 2007-03-26 16:37:41 -0500 (Mon, 26 Mar 2007)
	  | 2 lines Change this to a single dp function to make oej happy.
	  ........

2007-03-26 20:27 +0000 [r59226]  Steve Murphy <murf@digium.com>

	* /, main/config.c: Merged revisions 59225 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59225 | murf | 2007-03-26 14:06:12 -0600 (Mon, 26 Mar 2007) | 1
	  line Fix for 9257; by eliminating the globals in main/config.c,
	  we make it thread-safe, which is a minimum requirement. ........

2007-03-26 19:35 +0000 [r59224]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 59223 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r59223 | file | 2007-03-26 16:34:14 -0300 (Mon, 26 Mar
	  2007) | 2 lines Add ability to specify no timeout. This means as
	  soon as the prompt is done playing it moves on to the next
	  priority. ........

2007-03-26 18:34 +0000 [r59216-59218]  Russell Bryant <russell@digium.com>

	* /: Merged revisions 59217 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59217 | russell | 2007-03-26 13:33:50 -0500 (Mon, 26 Mar 2007) |
	  4 lines Somehow the code for building the email for voicemail got
	  out of sync. This change makes a few tweaks to get 1.4 in sync
	  with trunk. (issue #9301) ........

	* /, apps/app_meetme.c: Merged revisions 59215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59215 | russell | 2007-03-26 13:28:29 -0500 (Mon, 26 Mar 2007) |
	  3 lines Fix some codec negotiation problems when CallerID support
	  is not enabled in SLA. (issue #9308, reported by twilson)
	  ........

2007-03-26 18:14 +0000 [r59214]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 59213 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r59213 | file | 2007-03-26 14:13:06 -0400 (Mon, 26 Mar
	  2007) | 2 lines Make SpeechBackground obey the digit timeout
	  value. ........

2007-03-26 17:57 +0000 [r59211]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Merged revisions 59209 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59209 | russell | 2007-03-26 12:53:07 -0500 (Mon, 26 Mar 2007) |
	  1 line Rename the new dialplan functions to match the variable
	  name ........

2007-03-26 17:56 +0000 [r59210]  Steve Murphy <murf@digium.com>

	* /, main/ast_expr2f.c, pbx/ael/ael.flex, main/ast_expr2.fl: Merged
	  revisions 59206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59206 | murf | 2007-03-26 11:38:29 -0600 (Mon, 26 Mar 2007) | 1
	  line A fix for the flex input files, DONT_COMPILE, and
	  STANDALONE_AEL ........

2007-03-26 17:51 +0000 [r59208]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c, include/asterisk/rtp.h, main/rtp.c:
	  Merged revisions 59207 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59207 | russell | 2007-03-26 12:45:55 -0500 (Mon, 26 Mar 2007) |
	  7 lines The AUDIORTPQOS and VIDEORTPQOS variables are not fully
	  functional in some because they get set in sip_hangup. So, there
	  are common situations where the variables will not be available
	  in the dialplan at all. So, this patch provides an alternate
	  method for getting to this information by introducing AUDIORTPQOS
	  and VIDEORTPQOS dialplan functions. (issue #9370, patch by
	  Corydon76, with some testing by blitzrage) ........

2007-03-26 16:48 +0000 [r59204-59205]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Fix bug in which parameter type we are
	  passing. This shouldn't be a problem since both types are the
	  same underneath.

	* channels/chan_zap.c: Small API related SS7 updates.

2007-03-26 15:59 +0000 [r59203]  Nadi Sarrar <ns@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /, configure,
	  include/asterisk/autoconfig.h.in, channels/misdn/Makefile,
	  channels/misdn/chan_misdn_config.h, configure.ac,
	  channels/misdn/isdn_lib.c, channels/misdn_config.c: Merged
	  revisions 59202 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59202 | nadi | 2007-03-26 17:25:53 +0200 (Mo, 26 Mär 2007) | 4
	  lines * mISDN >= 1.2 provides a dsp pipeline for i.e. echo
	  cancellation modules, make chan_misdn use it. * add a check for
	  linux/mISDNdsp.h to configure.ac and update the autogenerated
	  files: 'configure', 'autoconfig.h.in' (the 'configure' script was
	  not in sync with the latest configure.ac, so the diff is a bit
	  bigger than expected). ........

2007-03-26 15:20 +0000 [r59201]  Joshua Colp <jcolp@digium.com>

	* /, pbx/ael/ael_lex.c: Merged revisions 59200 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59200 | file | 2007-03-26 11:16:29 -0400 (Mon, 26 Mar 2007) | 2
	  lines Have ast_copy_string magically appear in the aelparse
	  binary! DONT_OPTIMIZE should now work once again. ........

2007-03-24 01:42 +0000 [r59191-59196]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 59195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59195 | file | 2007-03-23 21:39:44 -0400 (Fri,
	  23 Mar 2007) | 10 lines Merged revisions 59194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59194 | file | 2007-03-23 21:35:49 -0400 (Fri, 23 Mar 2007) | 2
	  lines Only try to handle a response if it has a response code.
	  (ASA-2007-011) ........ ................

	* doc/modules.txt: Update modules.txt to new loader. (issue #9358
	  reported by eliel)

2007-03-23 16:17 +0000 [r59190]  Steve Murphy <murf@digium.com>

	* /, apps/app_macro.c: Merged revisions 59188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59188 | murf | 2007-03-23 10:09:01 -0600 (Fri,
	  23 Mar 2007) | 9 lines Merged revisions 59186 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59186 | murf | 2007-03-23 09:57:26 -0600 (Fri, 23 Mar 2007) | 1
	  line Added a few words in the Macro doc strings about the
	  behavior of macros with hangups (et al.), as per 9337 ........
	  ................

2007-03-22 23:41 +0000 [r59181-59183]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 59182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59182 | kpfleming | 2007-03-22 16:40:01 -0700 (Thu, 22 Mar 2007)
	  | 2 lines don't allow string input to overrun the buffer to hold
	  it (ASA-2007-010) ........

	* channels/chan_misdn.c, /: Merged revisions 59180 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r59180 | kpfleming | 2007-03-22 16:34:22 -0700 (Thu, 22
	  Mar 2007) | 2 lines remove variables that are no longer used
	  (--enable-dev-mode is good, developers should be using it)
	  ........

2007-03-22 14:48 +0000 [r59146]  Steve Murphy <murf@digium.com>

	* utils/Makefile, /: Merged revisions 59145 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59145 | murf | 2007-03-22 08:40:53 -0600 (Thu, 22 Mar 2007) | 1
	  line The stuff in utils was compiling with -O6 even if
	  DONT_OPTIMIZE is set in menuconfig. Added the include to fix that
	  ........

2007-03-21 18:10 +0000 [r59080-59090]  Joshua Colp <jcolp@digium.com>

	* /, main/http.c: Merged revisions 59089 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59089 | file | 2007-03-21 14:08:57 -0400 (Wed, 21 Mar 2007) | 2
	  lines Add svg mimetype for pari. ........

	* /, res/res_monitor.c: Merged revisions 59087 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r59087 | file | 2007-03-21 14:04:58 -0400 (Wed,
	  21 Mar 2007) | 10 lines Merged revisions 59086 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r59086 | file | 2007-03-21 14:03:20 -0400 (Wed, 21 Mar 2007) | 2
	  lines Indicate the filename changed when it is changed. (issue
	  #9311 reported by jsmith) ........ ................

	* channels/chan_sip.c: Minor tweak. Only queue up an unhold control
	  frame if we are actually on hold. This would have shown itself
	  when a call was initially being setup and the SDP data was being
	  parsed in.

	* /, channels/chan_sip.c: Merged revisions 59081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59081 | file | 2007-03-20 23:25:48 -0400 (Tue, 20 Mar 2007) | 2
	  lines Until we can do media level parsing for sendrecv/etc just
	  use the first value found. This crept up when a phone was offered
	  audio+video and returned an inactive video stream. chan_sip
	  thought the phone said to put the person on hold but that was
	  totally wrong. (issue #9319 reported by benbrown) ........

	* main/db.c: Make the database show command spit out how many
	  results it got. (issue #9332 reported by junky)

2007-03-20 21:06 +0000 [r59079]  Tilghman Lesher <tlesher@digium.com>

	* /, main/logger.c: Merged revisions 59078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59078 | tilghman | 2007-03-20 16:04:52 -0500 (Tue, 20 Mar 2007)
	  | 2 lines Fix defines for inline stack backtraces (only used by
	  developers anyway) ........

2007-03-20 20:44 +0000 [r59077]  Joshua Colp <jcolp@digium.com>

	* /, channels/iax2-parser.c: Merged revisions 59076 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r59076 | file | 2007-03-20 16:42:46 -0400 (Tue, 20 Mar
	  2007) | 2 lines Copy len variable as well, should fix remaining
	  IAX2 DTMF issues. ........

2007-03-20 18:18 +0000 [r59071-59073]  Steve Murphy <murf@digium.com>

	* pbx/pbx_ael.c, include/asterisk/ael_structs.h: The fix for the
	  AEL <<security hole>> (bug 9316) is here...

	* /: blocking 59070... it was just a repair, doesn't need to be
	  here

	* /: blocking 59069... will commit these changes with separate
	  patch

2007-03-19 22:32 +0000 [r59051]  Joshua Colp <jcolp@digium.com>

	* main/loader.c: It is possible for mod to become invalid after we
	  unload it (if it's a dynamic module) so move it around a bit.

2007-03-19 22:31 +0000 [r59050]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 59049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59049 | tilghman | 2007-03-19 17:29:56 -0500 (Mon, 19 Mar 2007)
	  | 2 lines Oops, this should have been a %d all along ........

2007-03-19 15:43 +0000 [r59041]  Tilghman Lesher <tlesher@digium.com>

	* configs/sip_notify.conf.sample, /: Merged revisions 59040 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59040 | tilghman | 2007-03-19 10:42:26 -0500 (Mon, 19 Mar 2007)
	  | 2 lines Fix unescaped semicolon (reported via -dev list)
	  ........

2007-03-18 20:39 +0000 [r59038]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 59037 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59037 | oej | 2007-03-18 21:37:06 +0100 (Sun, 18 Mar 2007) | 3
	  lines Issue #9313, Asterisk crash on SIP return code 0 (reported
	  by qwerty1979) (ASA-2007-011) ........

2007-03-18 16:59 +0000 [r59036]  BJ Weschke <bweschke@btwtech.com>

	* /, apps/app_followme.c: Merged revisions 59035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r59035 | bweschke | 2007-03-18 12:36:44 -0400 (Sun, 18 Mar 2007)
	  | 3 lines Don't return a non-zero return code if the profile
	  doesn't exist, to match what the documentation says it already
	  does. (#9307 Reported by kkiely) ........

2007-03-16 16:14 +0000 [r58995]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_page.c: Merged revisions 58992 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58992 | file | 2007-03-16 12:12:28 -0400 (Fri, 16 Mar 2007) | 2
	  lines Wait for the async thread to exit when hanging up all of
	  the paged phones under all circumstances. (issue #9181 reported
	  by PhilSmith) ........

2007-03-16 01:43 +0000 [r58954-58958]  Russell Bryant <russell@digium.com>

	* /, configs/sla.conf.sample: Merged revisions 58957 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58957 | russell | 2007-03-15 20:42:37 -0500 (Thu, 15
	  Mar 2007) | 1 line fix a couple SLA documentation references
	  ........

	* /, build_tools/prep_tarball: Merged revisions 58953 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58953 | russell | 2007-03-15 20:12:40 -0500 (Thu, 15
	  Mar 2007) | 2 lines Add the --pdf option to the usage of rubber
	  in prep_tarball ........

2007-03-16 00:04 +0000 [r58949-58950]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /, doc/ast_appdocs.tex: Merged revisions 58946 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58946 | tilghman | 2007-03-15 18:52:48 -0500 (Thu, 15 Mar 2007)
	  | 2 lines Refashion dump command to match common syntax and
	  update the resulting appdocs TeX file ........

	* main/pbx.c: Fix trunk so that it compiles again

2007-03-15 23:56 +0000 [r58942-58948]  Russell Bryant <russell@digium.com>

	* Makefile, /, build_tools/menuselect-deps.in, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in:
	  Merged revisions 58947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58947 | russell | 2007-03-15 18:53:26 -0500 (Thu, 15 Mar 2007) |
	  3 lines Add configure script checking for GTK2 and some
	  additional Makefile targets to support gmenuselect ........

	* /, doc/asterisk.tex: Merged revisions 58941 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58941 | russell | 2007-03-15 18:24:09 -0500 (Thu, 15 Mar 2007) |
	  1 line add a link to the rubber homepage ........

2007-03-15 22:52 +0000 [r58936-58938]  Russell Bryant <russell@digium.com>

	* Makefile, /, doc/asterisk.tex: Merged revisions 58937 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58937 | russell | 2007-03-15 17:51:29 -0500 (Thu, 15 Mar 2007) |
	  2 lines Add Asterisk version information to the generated PDF
	  ........

	* /, build_tools/prep_tarball: Merged revisions 58935 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58935 | russell | 2007-03-15 17:35:52 -0500 (Thu, 15
	  Mar 2007) | 2 lines have prep_tarball attempt to build
	  asterisk.pdf ........

2007-03-15 22:33 +0000 [r58934]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_realtime.c: Merged revisions 58933 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58933 | tilghman | 2007-03-15 17:32:33 -0500 (Thu, 15
	  Mar 2007) | 2 lines Function works fine, but the documentation is
	  backwards. ........

2007-03-15 22:29 +0000 [r58932]  Russell Bryant <russell@digium.com>

	* doc/manager.txt (removed), doc/misdn.txt (removed),
	  doc/jitterbuffer.tex (added), /, doc/billing.txt (removed),
	  doc/extensions.tex (added), doc/queues-with-callback-members.tex
	  (added), doc/localchannel.txt (removed), doc/cdrdriver.txt
	  (removed), doc/00README.1st (removed), doc/ajam.tex (added),
	  doc/manager.tex (added), doc/misdn.tex (added), doc/freetds.txt
	  (removed), doc/odbcstorage.txt (removed), configure,
	  doc/model.txt (removed), doc/cygwin.txt (removed), doc/sla.tex,
	  doc/billing.tex (added), doc/ael.txt (removed),
	  doc/channelvariables.txt (removed), doc/callingpres.txt
	  (removed), doc/musiconhold-fpm.txt (removed),
	  doc/localchannel.tex (added), doc/enum.txt (removed),
	  doc/cdrdriver.tex (added), build_tools/make_buildopts_h,
	  doc/security.txt (removed), doc/imapstorage.txt (removed),
	  doc/PEERING, main/pbx.c, doc/freetds.tex (added),
	  doc/odbcstorage.tex (added), doc/privacy.txt (removed),
	  configure.ac, doc/iax.txt (removed), doc/channelvariables.tex
	  (added), doc/ael.tex (added), doc/enum.tex (added),
	  doc/security.tex (added), doc/math.txt (removed), Makefile,
	  doc/imapstorage.tex (added), doc/privacy.tex (added),
	  doc/realtime.txt (removed), doc/dundi.txt (removed),
	  doc/mysql.txt (removed), apps/app_voicemail.c, doc/cliprompt.txt
	  (removed), doc/chaniax.txt (removed), doc/app-sms.txt (removed),
	  doc/ast_appdocs.tex (added), doc/realtime.tex (added),
	  doc/ices.txt (removed), doc/dundi.tex (added), doc/queuelog.txt
	  (removed), doc/extconfig.txt (removed), doc/radius.txt (removed),
	  doc/cliprompt.tex (added), doc/chaniax.tex (added),
	  doc/hardware.txt (removed), doc/mp3.txt (removed),
	  doc/app-sms.tex (added), doc/ices.tex (added), doc/asterisk.tex
	  (added), doc/configuration.txt (removed), doc/queuelog.tex
	  (added), doc/asterisk-conf.txt (removed), doc/sla.pdf (removed),
	  doc/ip-tos.txt (removed), doc/hardware.tex (added), doc/h323.txt
	  (removed), doc/mp3.tex (added), doc/configuration.tex (added),
	  doc/asterisk-conf.tex (added), doc/jitterbuffer.txt (removed),
	  doc/channels.txt (removed), doc/ip-tos.tex (added),
	  doc/extensions.txt (removed),
	  doc/queues-with-callback-members.txt (removed), doc/apps.txt
	  (removed), makeopts.in, doc/ajam.txt (removed): Merged revisions
	  58931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58931 | russell | 2007-03-15 17:25:12 -0500 (Thu, 15 Mar 2007) |
	  13 lines Merge changes from svn/asterisk/team/russell/LaTeX_docs.
	  * Convert most of the doc directory into a single LaTeX formatted
	  document so that we can generate a PDF, HTML, or other formats
	  from this information. * Add a CLI command to dump the
	  application documentation into LaTeX format which will only be
	  include if the configure script is run with --enable-dev-mode. *
	  The PDF turned out to be close to 1 MB, so it is not included.
	  However, you can simply run "make asterisk.pdf" to generate it
	  yourself. We may include it in release tarballs or have
	  automatically generated ones on the web site, but that has yet to
	  be decided. ........

2007-03-15 18:21 +0000 [r58924]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 58923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58923 | file | 2007-03-15 15:13:21 -0300 (Thu, 15 Mar 2007) | 2
	  lines Don't assume that the pvt structure will still exist after
	  calling schedule_delivery as it may not. (issue #9278 reported by
	  fmachado) ........

2007-03-14 19:19 +0000 [r58904-58907]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 58906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58906 | russell | 2007-03-14 14:18:08 -0500 (Wed, 14 Mar 2007) |
	  4 lines Some people like to put "limitonpeer" instead of
	  "limitonpeers" in their configuration. While we're at it, support
	  "limitonpeerz" and "limitonpeerssssss". (inspired by issue #9172)
	  ........

	* /, doc/sla.tex, doc/sla.pdf: Merged revisions 58902 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58902 | russell | 2007-03-14 12:04:38 -0500 (Wed, 14
	  Mar 2007) | 2 lines Add a more basic example setup to the
	  examples section ........

2007-03-14 17:01 +0000 [r58900-58901]  Olle Johansson <oej@edvina.net>

	* cdr/cdr_radius.c: Correct reference to Radius library THanks
	  Philippe - Greetings from Lisboa, Portugal

	* /, channels/chan_sip.c: Merged revisions 58848 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58848 | oej | 2007-03-13 12:49:35 +0100 (Tue,
	  13 Mar 2007) | 10 lines Merged revisions 58847 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58847 | oej | 2007-03-13 12:45:52 +0100 (Tue, 13 Mar 2007) | 2
	  lines Issue #9229 - No port in request URI on register to non
	  default SIP ports (neelakantan) ........ ................

2007-03-14 16:40 +0000 [r58895-58898]  Russell Bryant <russell@digium.com>

	* /, doc/security.txt: Merged revisions 58897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58897 | russell | 2007-03-14 11:40:22 -0500
	  (Wed, 14 Mar 2007) | 11 lines Merged revisions 58896 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r58896 | russell | 2007-03-14 11:38:48 -0500 (Wed, 14
	  Mar 2007) | 3 lines Add a note to the security file that the
	  Asterisk CLI and log files may contain sensitive information, and
	  that people should keep this in mind. ........ ................

	* /, apps/app_meetme.c, configs/sla.conf.sample: Merged revisions
	  58894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58894 | russell | 2007-03-14 11:33:01 -0500 (Wed, 14 Mar 2007) |
	  8 lines By default, don't attempt to do any CallerID handling at
	  all with SLA because it is known to not work properly in some
	  situations. However, add an option to enable it for those that
	  would like to use it anyway. The short story behind this is that
	  to properly handle CallerID with SLA, we need the ability to
	  change the CallerID on an existing call, and we are not ready to
	  handle that. ........

2007-03-14 01:56 +0000 [r58881]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 58880 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58880 | tilghman | 2007-03-13 20:47:08 -0500 (Tue, 13 Mar 2007)
	  | 3 lines Issue 9162 - pbx_substitute_variables_helper assumes
	  the buffer is initialized to all zeroes. This fixes a case where
	  it wasn't. ........

2007-03-13 23:20 +0000 [r58866-58873]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 58872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58872 | russell | 2007-03-13 18:19:51 -0500 (Tue, 13 Mar 2007) |
	  4 lines Ensure that the blinky lights show that the trunk stopped
	  ringing when the trunk hangs up before a station has answered it.
	  (issue #9234, reported by francesco_r) ........

	* /, configs/sla.conf.sample: Merged revisions 58870 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58870 | russell | 2007-03-13 18:11:08 -0500 (Tue, 13
	  Mar 2007) | 1 line fix the reference to the SLA documentation
	  ........

	* cdr/cdr_sqlite3_custom.c (added), build_tools/menuselect-deps.in,
	  configure, include/asterisk/autoconfig.h.in,
	  configs/cdr_sqlite3_custom.conf (added),
	  doc/res_config_sqlite.txt (added), cdr/cdr_sqlite.c,
	  configs/extconfig.conf.sample, configure.ac, UPGRADE.txt,
	  CHANGES, makeopts.in, res/res_config_sqlite.c (added),
	  configs/res_config_sqlite.conf (added): Merge changes from
	  team/russell/sqlite: * Add new module, cdr_sqlite3_custom which
	  allows logging custom CDRs into a SQLite3 database. (issue #7149,
	  alerios) * Add new module, res_config_sqlite, which adds realtime
	  database configuration support for SQLite version 2. I decided
	  that this was ok since we didn't have any realtime support for
	  version 3. If someone ports this to version 3, then version 2
	  support can be removed or marked deprecated. (issue #7790,
	  rbarun_proformatique) * Mark cdr_sqlite as deprecated in favor of
	  cdr_sqlite3_custom. Also, note that there were other modules on
	  the bug tracker that did not make the cut because they provided
	  some duplicated functionality. Those are: * cdr_sqlite3 (issue
	  #6754, moy) * cdr_sqlite3 (issue #8694, bsd)

2007-03-13 10:14 +0000 [r58822-58846]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 58845 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58845 | oej | 2007-03-13 11:03:03 +0100 (Tue, 13 Mar 2007) | 3
	  lines Don't hangup the call on OK or errors on MESSAGE and INFO
	  inside of a dialog (like video update requests). ........

	* /, channels/chan_sip.c: Merged revisions 58843 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58843 | oej | 2007-03-13 10:12:16 +0100 (Tue, 13 Mar 2007) | 2
	  lines Issue #9251 - Clear From URI from user attributes (tgrman)
	  ........

	* channels/chan_h323.c: Change URL to OpenH323 (thanks, Tzafrir!)

2007-03-12 01:22 +0000 [r58780-58784]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 58783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58783 | file | 2007-03-11 21:21:12 -0400 (Sun, 11 Mar 2007) | 2
	  lines Allow RFC2833 compensation to compensate for even stupider
	  implementations by queueing up the end frame at the start, not
	  the actual end. (issue #8963 reported by AndrewZ) ........

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  58779 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58779 | file | 2007-03-11 20:51:16 -0400 (Sun, 11 Mar 2007) | 2
	  lines Add matchexterniplocally setting which only substitutes
	  your externip/externhost setting if it matches the localnet
	  setting. I know of at least two people who need opposite
	  settings, so I made it an option! (issue #8821 reported by
	  kokoskarokoska) ........

2007-03-11 21:57 +0000 [r58761]  Kevin P. Fleming <kpfleming@digium.com>

	* main/asterisk.c: grammatical errors are bad, mmmkay?

2007-03-11 16:43 +0000 [r58742]  Jason Parker <jparker@digium.com>

	* build_tools/cflags.xml, main/asterisk.c: Add CLI command "marko
	  show birthday" to show "birthday information" for Mark Spencers
	  upcoming 30th birthday. To enable, run `make menuselect` and
	  select the option MARKO_BDAY under Compiler Flags.

2007-03-10 18:15 +0000 [r58639-58706]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 58705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58705 | russell | 2007-03-10 12:11:11 -0600 (Sat, 10 Mar 2007) |
	  6 lines Fix a few more places in chan_iax2 where the ast_frame
	  used for receiving a frame was not properly initialized. -
	  Interpolating a frame when the jitterbuffer is in use -
	  decrypting a frame when IAX2 encryption is on - frames in an IAX2
	  trunk ........

	* /, apps/app_meetme.c: Merged revisions 58669 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58669 | russell | 2007-03-09 21:58:27 -0600 (Fri, 09 Mar 2007) |
	  2 lines Make the compiler happy and initialize a variable.
	  ........

	* /, doc/sla.txt (removed), doc/sla.tex (added), doc/sla.pdf
	  (added): Merged revisions 58638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58638 | russell | 2007-03-09 17:59:10 -0600 (Fri, 09 Mar 2007) |
	  8 lines Merge some updates to the SLA documentation. I plan to
	  keep working on this to explain all of the expected behavior with
	  call handling, configuration details for specific phones, and
	  other things. However, I got tired of doing it in plain text, so
	  I switched to using LaTeX. I have included the PDF version. I
	  haven't been able to get a nice looking plain text version out of
	  it yet, but I'm not terribly concerned since this is supposed to
	  be more of the manual, while the plain text sample configuration
	  file is the reference. ........

2007-03-09 21:10 +0000 [r58592-58605]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 58604 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58604 | file | 2007-03-09 16:08:19 -0500 (Fri, 09 Mar 2007) | 2
	  lines Fix spelling of unavailable in voicemail documentation.
	  (issue #9248 reported by tensai) ........

	* /, channels/chan_sip.c: Merged revisions 58584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58584 | file | 2007-03-09 15:49:47 -0500 (Fri,
	  09 Mar 2007) | 10 lines Merged revisions 58579 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58579 | file | 2007-03-09 15:46:43 -0500 (Fri, 09 Mar 2007) | 2
	  lines If we are unable to lookup the host in a c line we have to
	  abort, otherwise the previous data is gone and we will
	  (potentially) have no data when all is said and done. ........
	  ................

2007-03-08 23:21 +0000 [r58511-58541]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 58512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58512 | russell | 2007-03-08 16:15:15 -0600 (Thu, 08 Mar 2007) |
	  5 lines Hang up the channel that put the call on hold in the
	  event processing thread to avoid a race condition. Also, if the
	  station originated the call that it is putting on hold, don't
	  hang up the trunk if it was the only station on the call and it
	  is hanging up due to hold and not a normal hangup. ........

	* channels/chan_zap.c, /: Merged revisions 58510 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58510 | russell | 2007-03-08 16:06:54 -0600 (Thu, 08 Mar 2007) |
	  3 lines Add a missing break statement so that handling the above
	  event does not incorrectly destroy the channel. (issue #9242,
	  andrew) ........

2007-03-08 21:34 +0000 [r58480]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 58479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58479 | tilghman | 2007-03-08 15:33:03 -0600 (Thu, 08 Mar 2007)
	  | 2 lines Fix segfault (Issue 9236) ........

2007-03-08 20:56 +0000 [r58475]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 58474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58474 | russell | 2007-03-08 14:54:56 -0600 (Thu, 08 Mar 2007) |
	  3 lines Refactor hold handling a bit so that it does not require
	  keeping the call up when a call is put on hold. ........

2007-03-08 18:05 +0000 [r58390-58437]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 58436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58436 | file | 2007-03-08 13:01:00 -0500 (Thu, 08 Mar 2007) | 2
	  lines Make early SDP seeding even smarter! We have to check
	  codecs in the make_compatible function too. (issue #9221 reported
	  by marcelbarbulescu) ........

	* /, main/dsp.c: Merged revisions 58389 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58389 | file | 2007-03-08 11:07:10 -0500 (Thu,
	  08 Mar 2007) | 10 lines Merged revisions 58388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58388 | file | 2007-03-08 11:04:58 -0500 (Thu, 08 Mar 2007) | 2
	  lines Only print out debug message if the definition that makes
	  the variables shows up was actually defined. (issue #9233
	  reported by serginuez) ........ ................

2007-03-08 13:27 +0000 [r58353-58355]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/http.c: Merged revisions 58354 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58354 | kpfleming | 2007-03-08 08:23:46 -0500 (Thu, 08 Mar 2007)
	  | 2 lines this change was not needed; fclose() handles closing
	  the file descriptor already ........

	* /, apps/app_meetme.c, main/http.c: Merged revisions 58351-58352
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58351 | kpfleming | 2007-03-08 08:17:17 -0500 (Thu, 08 Mar 2007)
	  | 2 lines fix two cases where HTTP session file descriptors would
	  not be closed ........ r58352 | kpfleming | 2007-03-08 08:17:42
	  -0500 (Thu, 08 Mar 2007) | 2 lines fix a compiler warning, and
	  overwriting 'res' value ........

2007-03-08 01:06 +0000 [r58304-58321]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /, configure, configure.ac: Merged revisions
	  58320 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58320 | russell | 2007-03-07 19:01:46 -0600 (Wed, 07 Mar 2007) |
	  6 lines If we receive ZT_EVENT_REMOVED, destroy the specified
	  channel. (issue #7256, tzafrir) Also, update the configure script
	  to make sure that we don't try to build chan_zap if the installed
	  version of zaptel does not include ZT_EVENT_REMOVED. ........

	* configs/dundi.conf.sample, pbx/pbx_dundi.c, CHANGES: Add the
	  ability to dynamically specify weights for responses to DUNDi
	  queries. This can be done using a global variable or a dialplan
	  function. Using the SHELL() function will allow you to use an
	  external script to determine what the weight in the response
	  should be. This can be very useful in load balancing
	  applications. (inspired by discussions with blitzrage and jsmith
	  in #asterisk-bugs)

2007-03-07 20:05 +0000 [r58286]  Joshua Colp <jcolp@digium.com>

	* main/loader.c: Make the loader less noisy under valgrind.

2007-03-07 18:20 +0000 [r58244]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 58243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58243 | russell | 2007-03-07 12:19:19 -0600
	  (Wed, 07 Mar 2007) | 17 lines (This bug was reported to me by
	  Kinsey Moore) Merged revisions 58242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58242 | russell | 2007-03-07 12:17:07 -0600 (Wed, 07 Mar 2007) |
	  7 lines Fix a problem where the Asterisk channel name could be
	  that of the wrong IAX2 user for a call. This is because the first
	  step of choosing this name is to look for an IAX2 peer that
	  happens to have the same IP/port number that this call is coming
	  from and assuming that is it. However, this is not always
	  correct. So, I have made it change this name after authentication
	  happens since at that point, we have an exact match. ........
	  ................

2007-03-07 17:55 +0000 [r58241]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c, main/rtp.c: Merged revisions 58240 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58240 | file | 2007-03-07 12:52:58 -0500 (Wed, 07 Mar 2007) | 2
	  lines Ensure we have (or should have) at least one matching codec
	  before attempting early bridge SDP seeding. (issue #9221 reported
	  by marcelbarbulescu) ........

2007-03-07 08:08 +0000 [r58224]  Olle Johansson <oej@edvina.net>

	* apps/app_ices.c: Adding reference to ices home page. Anyone that
	  has tested with ices2 ?

2007-03-07 01:07 +0000 [r58123-58208]  Russell Bryant <russell@digium.com>

	* main/file.c: Add the format of the file that is currently being
	  played to the verbose message. (issue #9105, junky)

	* main/manager.c, /: Merged revisions 58165 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58165 | russell | 2007-03-06 18:25:19 -0600
	  (Tue, 06 Mar 2007) | 12 lines Merged revisions 58164 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r58164 | russell | 2007-03-06 18:20:13 -0600 (Tue, 06
	  Mar 2007) | 4 lines If the channels acquired using the manager
	  Redirect action are not up, then don't attempt to do anything
	  with them. It could lead to weird behavior, including crashes.
	  (issue #8977) ........ ................

	* include/asterisk/utils.h: Add some documentation on the arguments
	  to the base64 encode/decode functions. (inspired by issue #9215)

	* apps/app_queue.c: Send a manager AgentComplete event when the
	  agent transfers the call, in addition to where it is already sent
	  if either side hangs up. (issue #9219, rgollent) In passing, I
	  put this code in a function so it would not be duplicated a third
	  time.

2007-03-06 23:19 +0000 [r58122]  Steve Murphy <murf@digium.com>

	* /, channels/chan_sip.c: Merged revisions 58121 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58121 | murf | 2007-03-06 16:10:14 -0700 (Tue,
	  06 Mar 2007) | 9 lines Merged revisions 58115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58115 | murf | 2007-03-06 15:52:52 -0700 (Tue, 06 Mar 2007) | 1
	  line Fix for 9220: Eyebeam cannot renew subscriptions for
	  presence info. Reason: re-SUBSCRIBE requests don't include Accept
	  headers, which the rfc says are optional (to put it tersely), (it
	  uses MAY), and luckily, the sip_pvt struct has the format info
	  stored, so we simply leave it if the format is set, and the
	  accept header null. ........ ................

2007-03-06 23:01 +0000 [r58101-58120]  Russell Bryant <russell@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 58119 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r58119 | russell | 2007-03-06 17:00:57 -0600 (Tue, 06 Mar 2007) |
	  3 lines Clarify the documentation of the dialout and
	  sendvoicemail options. (issue #9000, caio1982 and serge-v)
	  ........

	* codecs/codec_zap.c: Sync codec_zap with the one that is in the
	  1.4 branch so that it can actually build here, too.

2007-03-06 20:45 +0000 [r58054-58055]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 58053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r58053 | oej | 2007-03-06 21:37:07 +0100 (Tue,
	  06 Mar 2007) | 10 lines Merged revisions 58052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r58052 | oej | 2007-03-06 21:33:21 +0100 (Tue, 06 Mar 2007) | 2
	  lines Change error message to proper message ........
	  ................

	* apps/app_stack.c: Debug control, debug control.

2007-03-06 18:02 +0000 [r58024-58025]  Russell Bryant <russell@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 58023 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r58023 | russell | 2007-03-06 12:01:20 -0600 (Tue, 06
	  Mar 2007) | 3 lines Return an error of transmit_response is
	  called without a session. (issue #9002) ........

2007-03-06 08:51 +0000 [r57979-57993]  Luigi Rizzo <rizzo@icir.org>

	* main/say.c: move declaration to the beginning of a block

	* apps/app_meetme.c: remove duplicate const

2007-03-05 20:13 +0000 [r57871-57943]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, CHANGES: Add zap show version CLI command.
	  This pulls the version/echo canceller in use directly using the
	  ZT_GETVERSION ioctl. (issue #9094 reported by tootai)

	* /, channels/chan_iax2.c: Merged revisions 57914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57914 | file | 2007-03-05 14:19:07 -0500 (Mon, 05 Mar 2007) | 2
	  lines Since chan_iax2 does not support reception of DTMF with
	  duration ensure that it is set to 0 on the frame. (issue #8521
	  reported by gdhgdh) ........

	* /, apps/app_meetme.c: Merged revisions 57872 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57872 | file | 2007-03-05 13:39:28 -0500 (Mon, 05 Mar 2007) | 2
	  lines Don't create a listen channel and record the conference
	  unless the option is turned on. (issue #9204 reported by
	  francesco_r) ........

	* apps/app_meetme.c: I like it when app_meetme builds under dev
	  mode, don't you?

	* /, apps/app_voicemail.c: Merged revisions 57870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57870 | file | 2007-03-05 12:52:03 -0500 (Mon,
	  05 Mar 2007) | 10 lines Merged revisions 57869 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57869 | file | 2007-03-05 12:49:18 -0500 (Mon, 05 Mar 2007) | 2
	  lines Make create_dirpath use our standard for return values. -1
	  is failure, 0 is success. (issue #9205 reported by ballares)
	  ........ ................

2007-03-05 15:30 +0000 [r57827]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 57826 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57826 | murf | 2007-03-05 08:20:17 -0700 (Mon,
	  05 Mar 2007) | 9 lines Merged revisions 57825 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57825 | murf | 2007-03-05 07:53:57 -0700 (Mon, 05 Mar 2007) | 1
	  line Fixed a typo introduced via 9156 (either the gotos or their
	  doc strings are wrong) ........ ................

2007-03-05 04:21 +0000 [r57769-57799]  Joshua Colp <jcolp@digium.com>

	* /, main/slinfactory.c: Merged revisions 57798 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57798 | file | 2007-03-04 23:19:53 -0500 (Sun, 04 Mar 2007) | 2
	  lines Don't allow a NULL pointer to reach ast_frdup. (issue #9155
	  reported by cmaj) ........

	* configs/extensions.conf.sample: Remove no longer present CLI
	  commands from sample extensions.conf. (issue #9193 reported by
	  junky)

	* /, res/res_jabber.c: Merged revisions 57770 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57770 | file | 2007-03-04 22:35:03 -0500 (Sun, 04 Mar 2007) | 2
	  lines Don't reference a potentially NULL pointer. (issue #9199
	  reported by klolik) ........

	* /, main/rtp.c: Merged revisions 57768 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57768 | file | 2007-03-04 22:22:17 -0500 (Sun, 04 Mar 2007) | 2
	  lines Preserve marker bit when P2P bridging. (issue #9198
	  reported by edgreenberg) ........

2007-03-03 16:43 +0000 [r57736]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Convert stack apps to use ast_storage channel
	  structure

2007-03-03 15:35 +0000 [r57708]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-test3,
	  pbx/ael/ael-test/ref.ael-test4, pbx/ael/ael-test/ref.ael-test6,
	  pbx/ael/ael-test/ref.ael-test7, pbx/ael/ael-test/ref.ael-vtest13:
	  updated the regression tests

2007-03-03 14:40 +0000 [r57651-57691]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, include/asterisk/channel.h: Expand datastores to
	  add the notion of inheritance. This will be needed for the
	  conversion of IAX2 variables from the current custom method to
	  ast_storage.

	* /, apps/app_voicemail.c: Merged revisions 57649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57649 | tilghman | 2007-03-03 00:45:00 -0600
	  (Sat, 03 Mar 2007) | 10 lines Merged revisions 57648 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r57648 | tilghman | 2007-03-03 00:36:55 -0600 (Sat, 03
	  Mar 2007) | 2 lines Memory leak of a list, if call recording was
	  abandoned ........ ................

2007-03-03 01:11 +0000 [r57621]  Dwayne M. Hubbard <dhubbard@digium.com>

	* main/say.c: Merged revisions 57620 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57620 | dhubbard | 2007-03-02 18:59:24 -0600 (Fri, 02 Mar 2007)
	  | 1 line submitted patch for Georgian language, issue 9010,
	  submitted by Alexander Shaduri ........

2007-03-03 00:01 +0000 [r57557-57590]  Russell Bryant <russell@digium.com>

	* configs/sla.conf.sample: Add the missing configuration template
	  to the sample config file. Thanks to Lacy Moore on the
	  asterisk-users list for pointing out that this was missing!

	* /, configure, configure.ac: Merged revisions 57556 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r57556 | russell | 2007-03-02 17:03:01 -0600 (Fri, 02
	  Mar 2007) | 3 lines Update the check that is used to determine
	  whether zaptel transcoder support is present. The interface has
	  changed. ........

2007-03-02 18:05 +0000 [r57478-57519]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c: Don't try to do recursive locking/unlocking when it
	  isn't supported.

	* /, channels/chan_sip.c: Merged revisions 57477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57477 | file | 2007-03-02 12:06:52 -0500 (Fri,
	  02 Mar 2007) | 10 lines Merged revisions 57475 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57475 | file | 2007-03-02 12:02:46 -0500 (Fri, 02 Mar 2007) | 2
	  lines If a SIP message comes in and goes to a method handler that
	  requires additional values that may not be present then send back
	  an error. ........ ................

2007-03-02 17:03 +0000 [r57476]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 57473 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57473 | murf | 2007-03-02 09:55:16 -0700 (Fri,
	  02 Mar 2007) | 9 lines Merged revisions 57458 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57458 | murf | 2007-03-02 09:39:33 -0700 (Fri, 02 Mar 2007) | 1
	  line further refinement in wording of goto documentation, as per
	  9156, goto not proceeding to next instruction ........
	  ................

2007-03-02 16:59 +0000 [r57474]  Russell Bryant <russell@digium.com>

	* apps/app_dumpchan.c, main/cli.c: Add the channel's Language to
	  the "show channel" CLI command and the DumpChan application.
	  (issue #9187, Junky)

2007-03-02 05:57 +0000 [r57438]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c, utils/ael_main.c: Merged revisions 57426 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57426 | murf | 2007-03-01 22:21:36 -0700 (Thu, 01 Mar 2007) | 1
	  line I almost had comma escapes right, but 9184 points out the
	  problem-- the escape is removed by pbx_config, and pbx_ael should
	  also, before sending it down into the pbx engine. Also, you have
	  to insert it back in, if you are generating extensions.conf code
	  from the AEL. ........

2007-03-02 00:22 +0000 [r57365-57397]  Russell Bryant <russell@digium.com>

	* /, main/file.c: Merged revisions 57396 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57396 | russell | 2007-03-01 18:20:44 -0600 (Thu, 01 Mar 2007) |
	  4 lines Return the correct digit that interrupted the stream.
	  This fixes exiting the Background application when using the m
	  option. (issue #9176, mjagdis) ........

	* /, apps/app_meetme.c, doc/sla.txt, include/asterisk/channel.h,
	  configs/sla.conf.sample: Merged revisions 57364 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57364 | russell | 2007-03-01 17:42:53 -0600 (Thu, 01 Mar 2007) |
	  16 lines Merge changes from svn/asterisk/team/russell/sla_updates
	  * Originally, I put in the documentation that only Zap interfaces
	  would be supported on the trunk side. However, after a discussion
	  with Qwell, we came up with a way to make IP trunks work as well,
	  using some things already in Asterisk. So, here it is, this now
	  officially supports IP trunks. * Update the SLA documentation to
	  reflect how to setup IP trunks. * Add a section in sla.txt that
	  describes how to set up an SLA system with voicemail. * Simplify
	  the way DTMF passthrough is handled in MeetMe. * Fix a bug that
	  exposed itself when using a Local channel on the trunk side in
	  SLA. The station's channel needs to be passed to the dial API
	  when dialing the trunk. * Change a WARNING message to DEBUG in
	  channel.h. This message is of no use to users. ........

2007-03-01 22:23 +0000 [r57319]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /: Merged revisions 57318 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57318 | file | 2007-03-01 17:21:44 -0500 (Thu,
	  01 Mar 2007) | 10 lines Merged revisions 57317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57317 | file | 2007-03-01 17:19:32 -0500 (Thu, 01 Mar 2007) | 2
	  lines Don't even attempt to optimize things when a proxy channel
	  is involved. It will just explode in weird and unexplaineable
	  ways. (issue #9175 reported by clegall_proformatique) ........
	  ................

2007-03-01 20:24 +0000 [r57293]  Russell Bryant <russell@digium.com>

	* main/channel.c: Constify the list of codec preferences.

2007-03-01 03:01 +0000 [r57259]  TransNexus OSP Development <support@transnexus.com>

	* doc/osp.txt: 1. Corrected a typo for www.etsi.org. Thank Patrick.

2007-03-01 00:08 +0000 [r57241]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c: Minor code cleanup... nothing to write home about.

2007-02-28 23:02 +0000 [r57204-57209]  Russell Bryant <russell@digium.com>

	* /, doc/sla.txt, configs/sla.conf.sample: Merged revisions 57207
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57207 | russell | 2007-02-28 17:01:52 -0600 (Wed, 28 Feb 2007) |
	  2 lines minor tweaks to the sla docs ........

	* /, apps/app_meetme.c, configs/sla.conf.sample: Merged revisions
	  57203 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57203 | russell | 2007-02-28 16:07:05 -0600 (Wed, 28 Feb 2007) |
	  7 lines Merge more changes from
	  svn/asterisk/team/russell/sla_updates * Add support for private
	  hold. By setting "hold=private" for a trunk, only the station
	  that put the call on hold will be able to retrieve it from hold.
	  Also, by setting "hold=private" for a station, any call that
	  station puts on hold can only be retrieved by that station.
	  ........

2007-02-28 20:46 +0000 [r57184]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, pbx/pbx_dundi.c, include/asterisk/pbx.h,
	  pbx/pbx_config.c, apps/app_while.c: Convert the PBX core to use
	  read/write locks. This yields a nifty performance improvement
	  when it comes to simultaneous calls going through the dialplan.
	  Using murf's test the old mutex based core took an average of
	  57.3 seconds while the rwlock based core took 31.1 seconds.
	  That's a nifty 26.2 seconds performance improvement. The other
	  good part is that if we do need to switch back then we just have
	  to change the lock/unlock API calls. I converted everywhere that
	  used to touch the mutex locks directly to use them.

2007-02-28 19:59 +0000 [r57145-57147]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 57146 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57146 | russell | 2007-02-28 13:58:56 -0600 (Wed, 28 Feb 2007) |
	  2 lines Minor formatting change ........

	* /, apps/app_meetme.c, configs/sla.conf.sample: Merged revisions
	  57144 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57144 | russell | 2007-02-28 13:56:20 -0600 (Wed, 28 Feb 2007) |
	  6 lines Merge changes from svn/asterisk/team/russell/sla_updates
	  * Add support for the "barge=no" option for trunks. If this
	  option is set, then stations will not be able to join in on a
	  call that is on progress on this trunk. ........

2007-02-28 19:30 +0000 [r57140]  Steve Murphy <murf@digium.com>

	* main/pbx.c, /: Merged revisions 57139 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57139 | murf | 2007-02-28 12:23:05 -0700 (Wed,
	  28 Feb 2007) | 9 lines Merged revisions 57118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57118 | murf | 2007-02-28 12:12:41 -0700 (Wed, 28 Feb 2007) | 1
	  line a small documentation update, to reflect reality in the goto
	  doc strings, as per 9156, Goto does not proceed to next prio if
	  jump fails ........ ................

2007-02-28 19:00 +0000 [r57094]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_agent.c: Merged revisions 57093 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r57093 | file | 2007-02-28 13:57:52 -0500 (Wed,
	  28 Feb 2007) | 10 lines Merged revisions 57092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r57092 | file | 2007-02-28 13:55:45 -0500 (Wed, 28 Feb 2007) | 2
	  lines Fix a few more issues with the agent logoff CLI command.
	  (issue #9123 reported by arbrandes) ........ ................

2007-02-28 18:21 +0000 [r57090]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c, configs/sla.conf.sample: Merged revisions
	  57089 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57089 | russell | 2007-02-28 12:20:05 -0600 (Wed, 28 Feb 2007) |
	  8 lines Merge current set of changes from
	  svn/asterisk/team/russell/sla_updates * Add support for station
	  ring delays. Ring delays can be set globally for a station or for
	  specific trunks on the station. * Fix a few bugs in existing
	  code. * Restructure and Reorganize code to improve readability
	  and maintainability. * Improve formatting of the "sla show
	  (trunks|stations)" CLI commands. ........

2007-02-28 17:56 +0000 [r57054-57056]  Joshua Colp <jcolp@digium.com>

	* /: Merged revisions 57055 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57055 | file | 2007-02-28 12:55:03 -0500 (Wed, 28 Feb 2007) | 2
	  lines Picky compiler... ........

	* /, apps/app_speech_utils.c: Merged revisions 57053 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r57053 | file | 2007-02-28 12:45:50 -0500 (Wed, 28 Feb
	  2007) | 2 lines Better handle timeouts when the individual speaks
	  after everything has been played but before the timeout ends.
	  ........

2007-02-28 17:22 +0000 [r57050]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 57049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r57049 | murf | 2007-02-28 10:15:27 -0700 (Wed, 28 Feb 2007) | 1
	  line I was surprised that I had not yet downgraded missing goto
	  targets and macro call defs to a warning, in case they are in
	  extensions.conf; I rectified this problem. Also, A goto in a
	  macro to a target in a catch block was not being found; I fixed
	  this too; the cause was that I needed to treat catch statements
	  like an extension in the find_match code. ........

2007-02-27 22:17 +0000 [r57011]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c: Properly hangup the original dialed channel, not
	  the new channel that appeared from the forwarding. (issue #9161
	  reported by PhilSmith)

2007-02-27 17:38 +0000 [r56976]  Russell Bryant <russell@digium.com>

	* /: (also issue #9159) Merged revisions 56975 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56975 | russell | 2007-02-27 11:36:09 -0600 (Tue, 27 Feb 2007) |
	  4 lines Fix voicemail email attachments. I missed the conversion
	  of one of the line endings and there was an extra one where it
	  should not have been. (issue #9128) ........

2007-02-27 00:11 +0000 [r56926-56952]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: Issue 7789 -
	  some telcos want the TON set based on the number, but without the
	  NANP prefix removed

2007-02-26 20:43 +0000 [r56889]  Russell Bryant <russell@digium.com>

	* /, channels/chan_alsa.c: Merged revisions 56888 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56888 | russell | 2007-02-26 14:42:21 -0600 (Mon, 26 Feb 2007) |
	  4 lines Restore the behavior of Asterisk 1.2 where if a device
	  was not specified in alsa.conf, then we just use the system
	  default, instead of creating our own default of hw:0,0. (issue
	  #9139) ........

2007-02-26 20:09 +0000 [r56860]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 56856 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56856 | file | 2007-02-26 15:07:18 -0500 (Mon,
	  26 Feb 2007) | 10 lines Merged revisions 56850 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r56850 | file | 2007-02-26 15:05:02 -0500 (Mon, 26 Feb 2007) | 2
	  lines Obey the clearglobalvars option in extensions reload (or
	  dialplan reload depending on your version). (issue #9146 reported
	  by ramonpeek) ........ ................

2007-02-26 20:04 +0000 [r56849]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 56847 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56847 | russell | 2007-02-26 14:04:13 -0600 (Mon, 26 Feb 2007) |
	  2 lines Fix a crash in my last change to iax2_indicate(). (issue
	  #9150) ........

2007-02-26 19:34 +0000 [r56811-56840]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_record.c: Merged revisions 56839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56839 | file | 2007-02-26 14:33:48 -0500 (Mon, 26 Feb 2007) | 2
	  lines Update app_record documentation to use new CLI command,
	  core show file formats. (issue #9151 reported by junky) ........

	* main/pbx.c, /: Merged revisions 56805 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56805 | file | 2007-02-26 12:09:53 -0500 (Mon, 26 Feb 2007) | 2
	  lines Use ast_strlen_zero to see if the language and/or context
	  argument is not present for Background instead of just checking
	  if it is NULL. (issue #9141 reported by mjagdis) ........

2007-02-26 16:54 +0000 [r56786]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 56785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56785 | russell | 2007-02-26 10:51:18 -0600 (Mon, 26 Feb 2007) |
	  3 lines Do more complete locking of the chan_iax2_pvt struct in
	  the indicate callback. (Problem brought up by Ben Smithurst on
	  the asterisk-dev list) ........

2007-02-26 16:38 +0000 [r56784]  Joshua Colp <jcolp@digium.com>

	* /, main/asterisk.c: Merged revisions 56783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56783 | file | 2007-02-26 11:36:08 -0500 (Mon, 26 Feb 2007) | 2
	  lines Allow both of the show version files and core show file
	  versions CLI commands to work. (issue #9135 reported by mvanbaak)
	  ........

2007-02-26 01:05 +0000 [r56731-56742]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 56740 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56740 | russell | 2007-02-25 19:04:40 -0600 (Sun, 25 Feb 2007) |
	  2 lines Move a comment to be in the correct struct. ........

	* main/asterisk.c: Remove redundant check to ensure that LOW_MEMORY
	  is not defined. (issue #9136, mvanbaak)

	* channels/chan_iax2.c: There is no need to look in the iaxs array
	  for the pvt struct when we already have a pointer to it.

2007-02-25 14:53 +0000 [r56686]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 56685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56685 | tilghman | 2007-02-25 08:46:41 -0600
	  (Sun, 25 Feb 2007) | 11 lines Merged revisions 56684 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r56684 | tilghman | 2007-02-25 08:38:03 -0600 (Sun, 25
	  Feb 2007) | 3 lines Issue 9130 - If prev is the last item on the
	  channel list, then evaluating additional conditions (e.g. name
	  prefix) will cause a NULL dereference. ........ ................

2007-02-24 20:29 +0000 [r56623-56665]  Olle Johansson <oej@edvina.net>

	* include/asterisk/http.h, main/channel.c,
	  include/asterisk/doxyref.h, include/asterisk/utils.h,
	  include/asterisk/zapata.h, apps/app_meetme.c, res/res_limit.c,
	  include/asterisk/config.h, channels/chan_h323.c, pbx/pbx_ael.c,
	  apps/app_amd.c, include/asterisk/ael_structs.h,
	  include/asterisk/jingle.h, main/config.c, main/rtp.c: Doxygen
	  additions, corrections

	* include/asterisk/doxyref.h, channels/chan_zap.c, main/manager.c,
	  include/asterisk/frame.h: Doxygen updates and corrections

	* apps/app_osplookup.c, funcs/func_curl.c, res/res_snmp.c,
	  apps/app_festival.c, cdr/cdr_sqlite.c, codecs/codec_speex.c,
	  contrib/asterisk-ng-doxygen, include/asterisk/jabber.h,
	  res/res_crypto.c, channels/chan_h323.c, cdr/cdr_pgsql.c,
	  cdr/cdr_radius.c, apps/app_voicemail.c: Creating new doxygen
	  macro "\extref" to create page that lists external libraries and
	  URLs to these. Please help me add these references. We might want
	  to create a similar macro "\linuxpackage" to list the needed
	  Linux packages in popular distributions.

	* include/asterisk/jabber.h: Add some external references

	* include/asterisk/doxyref.h, include/asterisk/jabber.h: Doxygen
	  updates for AJI - The Asterisk Jabber API

2007-02-24 02:23 +0000 [r56574-56594]  Jason Parker <jparker@digium.com>

	* channels/chan_skinny.c, configs/skinny.conf.sample: Allow a
	  Skinny device to monitor a dialplan hint (w00t!). See
	  skinny.conf.sample for configuration example. Note: Some devices
	  (seen on 12SP+/30VIP) will lock up if they monitor too many
	  hints. This seems to be a hardware limitation - there isn't
	  anything we can do about it.

	* channels/chan_skinny.c: Support devicestate requests. Now you
	  should be able to subscribe to a Skinny device/line.

	* /, channels/chan_skinny.c: Merged revisions 56569 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r56569 | qwell | 2007-02-23 20:02:53 -0600 (Fri, 23 Feb
	  2007) | 4 lines Make sure to set a speeddials parent on creation.
	  Don't crash if hold is pressed when no call is active. Don't
	  return in places that we shouldn't.. Update softkey map when call
	  is connected ........

2007-02-24 01:56 +0000 [r56564]  Joshua Colp <jcolp@digium.com>

	* apps/app_meetme.c: Make Meetme build again under dev mode.

2007-02-23 23:25 +0000 [r56487-56506]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 56505 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56505 | russell | 2007-02-23 17:24:18 -0600
	  (Fri, 23 Feb 2007) | 16 lines Merged revisions 56504 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r56504 | russell | 2007-02-23 17:20:55 -0600 (Fri, 23
	  Feb 2007) | 8 lines Fix up a couple more signal handlers to not
	  do bad things that could cause various undesirable results. The
	  other day, I made Asterisk deadlock by hitting Control-C because
	  of a bad signal handler. Now, signal handlers just set a flag and
	  write to an alert pipe for the flag to be handled. Then, there is
	  another thread that is monitoring for these flags. If being run
	  in console mode, it is just the main thread. If Asterisk is in
	  the background, a thread is created to do it. ........
	  ................

	* channels/chan_iax2.c: Make the hashing function calculate
	  something that makes more sense. (Thanks to bmd on #asterisk-dev
	  for pointing out my pointless math).

2007-02-23 21:57 +0000 [r56458]  Joshua Colp <jcolp@digium.com>

	* /, main/sched.c: Merged revisions 56457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56457 | file | 2007-02-23 16:53:41 -0500 (Fri, 23 Feb 2007) | 2
	  lines Change log notice to debug. It is possible for a scheduled
	  item to execute and be deleted at close to the same time and
	  unavoidable. If this happens this message creeps up. ........

2007-02-23 21:20 +0000 [r56408-56447]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Merge team/russell/iax2_performance. There
	  is not a large amount of code here and the changes are not very
	  invasive. However, they should significantly improve performance
	  of chan_iax2 under load. IAX2 media frames only carry the
	  *source* call number. So, when one arrives, the correct session
	  that it is a part of has to be matched on IP address, port
	  number, and call number, instead of just a call number. Had these
	  frames carried the *destination* call number, this would not be
	  an issue, because that would be a unique identifier that would
	  make it easy to immediately identify the correct session. The way
	  that chan_iax2 did this matching was extremely inefficient. It
	  starts at the first available call number and traverses each call
	  number sequentially, locking and unlocking a mutex for each one,
	  to try to match against it. It would do this regardless of
	  whether the call number was in use or not. So, for a call with a
	  local call number of 25000, every single incoming media frame
	  would require a traversal that required 25000 mutex lock and
	  unlock operations. (Note that the max call number is about 32k).
	  I have introduced a hash table of active IAX2 calls to improve
	  this lookup process. The hash is done on the IP address, port
	  number, and call number. So, for the previous example, a few
	  lock/unlock operations may be done versus 25000 for each frame.

	* CHANGES: Note that the entries in the CHANGES file only list
	  functionality changes

	* CHANGES: Add GetConfigJSON to the CHANGES file.

	* /, channels/chan_iax2.c: Merged revisions 56407 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56407 | russell | 2007-02-23 14:20:00 -0600
	  (Fri, 23 Feb 2007) | 12 lines Merged revisions 56406 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r56406 | russell | 2007-02-23 14:17:56 -0600 (Fri, 23
	  Feb 2007) | 4 lines Don't destroy mutexes before unregistering
	  all of the entry points from the core. Also, fix a potential
	  memory leak from not destroying the locks for all of the possible
	  call numbers (about 32k of them). ........ ................

2007-02-23 19:00 +0000 [r56373]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/make_version_h: Merged revisions 56372 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56372 | kpfleming | 2007-02-23 12:59:09 -0600 (Fri, 23 Feb 2007)
	  | 2 lines build special version strings for AADK/S800i builds
	  ........

2007-02-23 18:01 +0000 [r56278-56342]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 56341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56341 | russell | 2007-02-23 11:58:57 -0600 (Fri, 23 Feb 2007) |
	  8 lines The IMAP storage code uses the same code to build the
	  email that is used when voicemail is sent via email using
	  something like sendmail. In the patch from bug 8033 to fix
	  various IMAP storage problems, the line endings in the email file
	  were changed in the code from "\n" to "\r\n". However, this
	  breaks sending regular voicemail to email. So, this change
	  conditionally sets line endings to "\r\n" only if IMAP_STORAGE is
	  enabled. (issue #9128, patch by jarjarbinks, modified by me to
	  not break IMAP storage) ........

	* main/manager.c: Introduce a new manager action, GetConfigJSON,
	  which is intended to improve performance of the GUI. This encodes
	  the configuration into the JSON format in a manager header,
	  "JSON: ". The encoded information can be directly used as a
	  javascript object, so no parsing is needed. For large
	  configuration files, this can greatly improve loading times in
	  the GUI. Furthermore, the encoding takes up a lot less space when
	  being transmitted than the other alternatives. (Inspired by
	  discussion with Pari) Here is an example of what you get:
	  http://localhost:8088/asterisk/rawman?action=getconfigjson&filename=users.conf
	  Response: Success JSON:
	  {"general":["hasvoicemail=yes"],"6000":["fullname=russell","secret=1234"]}

	* main/dial.c, /, apps/app_meetme.c, doc/sla.txt,
	  configs/sla.conf.sample: Merged revisions 56277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56277 | russell | 2007-02-22 17:08:36 -0600 (Thu, 22 Feb 2007) |
	  18 lines Merge changes from team/russell/sla_updates. This batch
	  of changes to the SLA code does a few different things. * I made
	  the SLA code event driven instead of having to act in a lot of
	  busy loops while dialing things to wait for state changes. This
	  makes the code more efficient and readable at the same time. * I
	  have implemented a couple of new features. The first is inbound
	  trunk ringing timeouts. This is an option that defines how long
	  to let an incoming call on a trunk to ring. * I have also
	  implemented ring timeouts for stations. They may be specified for
	  the entire station, meaning it is how long to let the station
	  ring before giving up. You can also specify a ring timeout for a
	  specific trunk on a station. So, you can say that you only want a
	  specific station to ring 5 seconds if it is line1 ringing, but
	  otherwise, there is no timeout. ........

2007-02-22 18:53 +0000 [r56232]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /, channels/chan_sip.c: Merged revisions 56231
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56231 | file | 2007-02-22 13:49:39 -0500 (Thu,
	  22 Feb 2007) | 10 lines Merged revisions 56230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r56230 | file | 2007-02-22 13:44:24 -0500 (Thu, 22 Feb 2007) | 2
	  lines Only change the original or clone channel if it's the
	  channel behind the proxy channel, not if it's just a regular
	  bridged channel. ........ ................

2007-02-22 17:36 +0000 [r56209]  Kevin P. Fleming <kpfleming@digium.com>

	* include/asterisk/module.h: move the ast_module_info structure
	  into the special section as well, otherwise when
	  restore_globals() is called it will lose its pointer to the
	  ast_module structure that the loader put there

2007-02-22 16:48 +0000 [r56188]  Joshua Colp <jcolp@digium.com>

	* .cleancount: Since I'm a nice guy... let's increment the clean
	  count since last night's module changes require a rebuild of
	  everything essentially.

2007-02-22 16:25 +0000 [r56187]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: Fix some compilation problems in
	  app_voicemail. There was a parenthesis missing in a function
	  prototype, and "#elifdef" is not a valid preprocessor directive.
	  (issue #9122, akohlsmith)

2007-02-22 13:58 +0000 [r56156]  TransNexus OSP Development <support@transnexus.com>

	* doc/osp.txt: Update OSP documention for v1.6.

2007-02-22 10:46 +0000 [r56126]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 56125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56125 | oej | 2007-02-22 11:33:55 +0100 (Thu, 22 Feb 2007) | 2
	  lines Move message from verbose to debug ........

2007-02-22 02:48 +0000 [r56095]  Steve Murphy <murf@digium.com>

	* /, sounds/Makefile: Merged revisions 56094 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56094 | murf | 2007-02-21 19:39:58 -0700 (Wed, 21 Feb 2007) | 1
	  line updated the sound tarball versions in Makefile ........

2007-02-22 02:36 +0000 [r56092]  Kevin P. Fleming <kpfleming@digium.com>

	* funcs, codecs, apps, include/asterisk/module.h,
	  Makefile.moddir_rules, Makefile.rules,
	  build_tools/make_linker_eo_script (added), cdr, pbx, res,
	  channels, formats, main/loader.c: give embedded modules a helping
	  hand by backing up and restoring their global variables when they
	  are loaded and unloaded

2007-02-22 01:26 +0000 [r56012-56056]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 56055 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56055 | russell | 2007-02-21 19:24:10 -0600 (Wed, 21 Feb 2007) |
	  3 lines Restructure a little bit of code to reduce nesting. There
	  is no functionality change here. ........

	* /, channels/chan_sip.c: Merged revisions 56011 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r56011 | russell | 2007-02-21 18:57:36 -0600
	  (Wed, 21 Feb 2007) | 11 lines Merged revisions 56010 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r56010 | russell | 2007-02-21 18:53:25 -0600 (Wed, 21
	  Feb 2007) | 3 lines If we receive a frame that is not in any of
	  the negotiated formats, then drop it. (potentially issue #8781
	  and SPD-12) ........ ................

2007-02-22 00:38 +0000 [r56009]  Joshua Colp <jcolp@digium.com>

	* /, main/cli.c: Merged revisions 56008 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r56008 | file | 2007-02-21 19:35:55 -0500 (Wed, 21 Feb 2007) | 2
	  lines Print out deprecation notice on usage output of CLI
	  commands. (issue #8925 reported by blitzrage) ........

2007-02-22 00:05 +0000 [r55958-56005]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: Make filename on email follow subject
	  message number, purely for cosmetic purposes for individuals like
	  *cough* jsmith *cough*. (issue #9111 reported by sshah)

	* /, apps/app_meetme.c: Merged revisions 55957 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55957 | file | 2007-02-21 15:35:40 -0500 (Wed,
	  21 Feb 2007) | 10 lines Merged revisions 55956 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r55956 | file | 2007-02-21 15:32:16 -0500 (Wed, 21 Feb 2007) | 2
	  lines Change naughty warning message to provide useful
	  information. If a write now fails on a channel in meetme it will
	  tell you the channel name instead of spitting out the wrong error
	  message. ........ ................

2007-02-21 20:30 +0000 [r55955]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 55954 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55954 | qwell | 2007-02-21 14:27:08 -0600 (Wed, 21 Feb 2007) | 4
	  lines Fix locking issue, and accept "transport-accept" as a valid
	  accept message. This should solve issues 8970 and 8503. ........

2007-02-21 20:26 +0000 [r55953]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Clarify in the doxygen docs abou RFC2833
	  compensation flag.

2007-02-21 20:23 +0000 [r55952]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 55951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55951 | russell | 2007-02-21 14:22:33 -0600 (Wed, 21 Feb 2007) |
	  3 lines Simplify the last change to app_meetme, and move the call
	  to dispose_conf() up into the block where we know a conf exists.
	  ........

2007-02-21 20:18 +0000 [r55915-55950]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 55949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55949 | file | 2007-02-21 15:16:34 -0500 (Wed, 21 Feb 2007) | 2
	  lines Only dispose of the conference if one was created. ........

	* /, apps/app_speech_utils.c: Merged revisions 55947 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r55947 | file | 2007-02-21 15:03:38 -0500 (Wed, 21 Feb
	  2007) | 2 lines Only start playing the next file if we have not
	  been quieted. ........

	* /, channels/chan_sip.c: Merged revisions 55914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55914 | file | 2007-02-21 12:18:19 -0500 (Wed, 21 Feb 2007) | 2
	  lines Add a flag that indicates whether a SIP dialog is an
	  outgoing call or not. SIP_OUTGOING originally did it but it was
	  repurposed to the direction of the last transaction, which can
	  cause update_call_counter to falsely decrease the wrong counters.
	  (please don't hurt me oej) (issue #8943 reported by mdu113)
	  ........

2007-02-21 14:07 +0000 [r55870]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/make_version: Merged revisions 55869 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55869 | kpfleming | 2007-02-21 08:06:47 -0600
	  (Wed, 21 Feb 2007) | 10 lines Merged revisions 55868 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r55868 | kpfleming | 2007-02-21 08:03:11 -0600 (Wed, 21
	  Feb 2007) | 2 lines use new tag version script ........
	  ................

2007-02-21 08:39 +0000 [r55835]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 55834 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55834 | oej | 2007-02-21 09:32:34 +0100 (Wed, 21 Feb 2007) | 2
	  lines Issue #8848 - Turn off lamp more quickly after transfer
	  (decrement inuse early on transferer's call leg) ........

2007-02-21 02:04 +0000 [r55805]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c: Merged
	  revisions 55799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55799 | qwell | 2007-02-20 20:01:36 -0600 (Tue, 20 Feb 2007) | 4
	  lines Fix segfault when buddy couldn't be found. Issue 7764,
	  patch by sailer ........

2007-02-21 01:05 +0000 [r55763]  Joshua Colp <jcolp@digium.com>

	* main/dns.c: Return trunk to a state where it compiles under
	  Darwin. The byte order stuff is ugly, if anyone wants to clean it
	  up... by all means do so.

2007-02-21 01:05 +0000 [r55762]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 55758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55758 | russell | 2007-02-20 19:03:25 -0600 (Tue, 20 Feb 2007) |
	  4 lines Improve the reference counting to fix bugs where people
	  report seeing conferences listed that have no members. (issue
	  #9073) ........

2007-02-21 00:14 +0000 [r55671-55748]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 55741 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55741 | file | 2007-02-20 19:11:20 -0500 (Tue, 20 Feb 2007) | 2
	  lines Better handle dropped IMAP connections. (issue #9054
	  reported by bsmithurst) ........

	* /, channels/chan_sip.c: Merged revisions 55717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55717 | file | 2007-02-20 18:57:03 -0500 (Tue, 20 Feb 2007) | 2
	  lines Return behavior I removed. I did not remember that you
	  could just add a localnet entry to make it work. ........

	* main/logger.c: Flush out the file pointer. (issue #9115 reported
	  by guthrie)

	* /, channels/chan_sip.c: Merged revisions 55688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55688 | file | 2007-02-20 18:08:45 -0500 (Tue, 20 Feb 2007) | 2
	  lines Don't test our own address against the localnet settings.
	  At least one person has had issues as a result of this from #7051
	  so I'm reversing it. (issue #8821 reported by kokoskarokoska)
	  ........

	* /, channels/chan_agent.c: Merged revisions 55670 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55670 | file | 2007-02-20 17:47:00 -0500 (Tue,
	  20 Feb 2007) | 10 lines Merged revisions 55669 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r55669 | file | 2007-02-20 17:39:14 -0500 (Tue, 20 Feb 2007) | 2
	  lines Defer clearing callback information if channels are up
	  until they are hung up. This ensures the hangup process goes
	  smoothly and no channels get hung in limbo. (issue #8088 reported
	  by kebl0155) ........ ................

2007-02-20 20:32 +0000 [r55591-55635]  Russell Bryant <russell@digium.com>

	* /, main/http.c: Merged revisions 55634 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55634 | russell | 2007-02-20 14:26:06 -0600 (Tue, 20 Feb 2007) |
	  3 lines Add the Asterisk version information to the Server header
	  in HTTP responses. (requested by Pari) ........

	* /, include/asterisk/manager.h: Merged revisions 55590 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55590 | russell | 2007-02-20 13:57:07 -0600 (Tue, 20 Feb 2007) |
	  2 lines Increase the maximum number of manager headers to 128, at
	  the request of Pari. ........

2007-02-20 16:56 +0000 [r55556]  Jason Parker <jparker@digium.com>

	* channels/chan_jingle.c, /, channels/chan_gtalk.c,
	  res/res_jabber.c: Merged revisions 55555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55555 | qwell | 2007-02-20 10:53:45 -0600 (Tue, 20 Feb 2007) | 4
	  lines No need to cast nor free with strdupa (thanks file) 55555!
	  ........

2007-02-20 16:42 +0000 [r55554]  Russell Bryant <russell@digium.com>

	* /, configs/sla.conf.sample: Merged revisions 55553 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r55553 | russell | 2007-02-20 10:41:57 -0600 (Tue, 20
	  Feb 2007) | 3 lines Change the formatting of sla.conf.sample to
	  make it more readable. (issue #9112, blitzrage) ........

2007-02-20 15:19 +0000 [r55534]  Joshua Colp <jcolp@digium.com>

	* res/res_jabber.c: I like it when trunk builds, so let's make
	  res_jabber compile again!

2007-02-20 07:48 +0000 [r55514]  Olle Johansson <oej@edvina.net>

	* /, res/res_jabber.c: Merged revisions 55483 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55483 | oej | 2007-02-19 22:12:55 +0100 (Mon, 19 Feb 2007) | 3
	  lines - Not sending arguments to an application is not "out of
	  memory" - Making error messages a bit more clear ........

2007-02-19 23:27 +0000 [r55495]  Jason Parker <jparker@digium.com>

	* .cleancount: We need to bump the cleancount when we make API
	  changes...

2007-02-19 18:15 +0000 [r55436]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 55435 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55435 | tilghman | 2007-02-19 12:11:48 -0600
	  (Mon, 19 Feb 2007) | 10 lines Merged revisions 55434 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r55434 | tilghman | 2007-02-19 12:09:09 -0600 (Mon, 19
	  Feb 2007) | 2 lines forcename and forcegreetings options should
	  check to see if the recording already exists ........
	  ................

2007-02-19 16:01 +0000 [r55410-55414]  Joshua Colp <jcolp@digium.com>

	* CHANGES: Clarify last change for SMDI in CHANGES file.

	* configs/voicemail.conf.sample, apps/app_voicemail.c: Allow both
	  an external application and SMDI to do voicemail notification at
	  the same time. (issue #8625 reported by lters)

2007-02-19 15:24 +0000 [r55409]  Doug Bailey <dbailey@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 55397 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55397 | dbailey | 2007-02-19 08:52:59 -0600 (Mon, 19 Feb 2007) |
	  3 lines Changed iax2 process thread to detached to correct memory
	  leak due to left over thread context on thread exit. Modified
	  module unload process to avoid deadlocks on pthread cancels
	  ........

2007-02-18 22:07 +0000 [r55375]  Olle Johansson <oej@edvina.net>

	* apps/app_voicemail.c: Formatting changes.

2007-02-18 19:13 +0000 [r55351-55352]  Joshua Colp <jcolp@digium.com>

	* codecs/gsm/inc/proto.h: Return GSM to a state where it actually
	  builds under dev mode.

	* channels/chan_h323.c: Update chan_h323 to new set_rtp_peer
	  definition.

2007-02-18 15:11 +0000 [r55330]  Olle Johansson <oej@edvina.net>

	* res/res_features.c: Being picky...

2007-02-18 15:03 +0000 [r55329]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, channels/chan_misdn.c, main/srv.c,
	  main/editline/refresh.c, pbx/ael/ael.tab.c,
	  channels/misdn/isdn_msg_parser.c, channels/chan_oss.c,
	  main/enum.c, apps/app_voicemail.c, main/ast_expr2.c: add -Wundef
	  to the --enable-dev-mode flags, so that mistyped macro names in
	  #if expressions will be caught convert various #if expressions to
	  #ifdef for macros that may not be defined (and where the value is
	  not important) Note: two of these changes are in bison generated
	  files which is going to be inconvenient when they are regenerated

2007-02-18 15:01 +0000 [r55279-55323]  Olle Johansson <oej@edvina.net>

	* res/res_features.c: Simplify post_manager_event()

	* /, apps/app_record.c: Merged revisions 55278 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55278 | oej | 2007-02-18 13:35:54 +0100 (Sun,
	  18 Feb 2007) | 10 lines Merged revisions 55277 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r55277 | oej | 2007-02-18 13:32:13 +0100 (Sun, 18 Feb 2007) | 2
	  lines Documentation update (#9053, jsmith) ........
	  ................

2007-02-17 17:41 +0000 [r55220]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 55219 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55219 | file | 2007-02-17 12:39:32 -0500 (Sat, 17 Feb 2007) | 2
	  lines Add missing membername option to AddQueueMember
	  documentation. (issue #9088 reported by seanbright) ........

2007-02-17 17:11 +0000 [r55218]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 55217 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r55217 | qwell | 2007-02-17 11:10:09 -0600 (Sat, 17 Feb
	  2007) | 4 lines Fix an issue where callerid would not be
	  displayed on some phones. Issue 8995, initial patch and research
	  done by wedhorn ........

2007-02-17 16:48 +0000 [r55087-55198]  Joshua Colp <jcolp@digium.com>

	* apps/app_queue.c: We want to skip the queue if the name doesn't
	  match the specified one, not if they *do*.

	* apps/app_queue.c: Increase "queue show" buffer size from 80 to
	  240. This should be more then enough for most cases. (issue #9089
	  reported by mvanbaak)

	* apps/app_dial.c, /: Merged revisions 55154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55154 | file | 2007-02-16 22:55:30 -0500 (Fri,
	  16 Feb 2007) | 10 lines Merged revisions 55153 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r55153 | file | 2007-02-16 22:53:45 -0500 (Fri, 16 Feb 2007) | 2
	  lines Answer the channel before recording privacy information.
	  (issue #8926 reported by lmamane) ........ ................

	* /, apps/app_queue.c: Merged revisions 55129 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55129 | file | 2007-02-16 21:59:50 -0500 (Fri, 16 Feb 2007) | 2
	  lines Make the 'i' option of Queue actually work. (issue #8986
	  reported by utis) ........

	* channels/chan_jingle.c: Update chan_jingle to new definition of
	  set_rtp_peer.

	* /, channels/chan_sip.c: Merged revisions 55086 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55086 | file | 2007-02-16 20:16:59 -0500 (Fri,
	  16 Feb 2007) | 10 lines Merged revisions 55073 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r55073 | file | 2007-02-16 20:09:50 -0500 (Fri, 16 Feb 2007) | 2
	  lines Allow chan_sip to handle attended transfers from a SIP
	  phone that is sitting behind chan_agent. Yes folks, all it took
	  was one line of code. (issue #8784 reported by pzieba) ........
	  ................

2007-02-17 01:11 +0000 [r55004-55077]  Russell Bryant <russell@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 55052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55052 | russell | 2007-02-16 18:40:34 -0600 (Fri, 16 Feb 2007) |
	  3 lines If the pg_config application is found, but there is
	  probably executing it, then consider postgres unavailable. (issue
	  #8637) ........

	* /, codecs/gsm/Makefile: Merged revisions 55050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r55050 | russell | 2007-02-16 18:31:42 -0600 (Fri, 16 Feb 2007) |
	  3 lines Filter out yet another architecture that does not work
	  with the optimizations in the built-in libgsm. (issue 8637, ovi)
	  ........

	* /, apps/app_meetme.c, configs/meetme.conf.sample: Merged
	  revisions 55006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55006 | russell | 2007-02-16 16:49:42 -0600
	  (Fri, 16 Feb 2007) | 17 lines Merged revisions 55005 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r55005 | russell | 2007-02-16 16:48:22 -0600 (Fri, 16
	  Feb 2007) | 9 lines Revert the change I did in revisions 54955,
	  54969, and 54970, in 1.2, 1.4, and trunk. I decided that once a
	  conference is created from meetme.conf, it is acceptable behavior
	  that the pin can not be changed until the conference goes away. I
	  also added a note in meetme.conf to describe this behavior. We
	  still have another issue in 1.4 and trunk where some conferences
	  with no users don't go away. That is the real bug that needs to
	  be addressed here. ........ ................

	* apps/app_dumpchan.c: Print the raw read/write formats in the
	  DumpChan application. (issue #9083, junky)

2007-02-16 22:20 +0000 [r55003]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_agent.c: Merged revisions 55002 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r55002 | file | 2007-02-16 17:18:46 -0500 (Fri,
	  16 Feb 2007) | 10 lines Merged revisions 54999 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r54999 | file | 2007-02-16 17:13:45 -0500 (Fri, 16 Feb 2007) | 2
	  lines Do not send indications through ast_indicate in chan_agent
	  but instead go directly to the technology. This way when
	  indications are emulated they happen on the Agent channel and do
	  not screw up formats on the channels. (issue #8439 reported by
	  punkgode) ........ ................

2007-02-16 21:13 +0000 [r54970]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 54969 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r54969 | russell | 2007-02-16 15:12:18 -0600
	  (Fri, 16 Feb 2007) | 13 lines Merged revisions 54955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r54955 | russell | 2007-02-16 14:56:58 -0600 (Fri, 16
	  Feb 2007) | 5 lines For conferences that are configured in
	  meetme.conf, check the configuration file every time someone
	  joins the conference instead of only when the conference is first
	  created. This is to ensure that changes to the pin numbers in the
	  config file are always honored. (issue #9073) ........
	  ................

2007-02-16 18:53 +0000 [r54910-54925]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 54924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54924 | file | 2007-02-16 13:51:15 -0500 (Fri, 16 Feb 2007) | 2
	  lines Need to check macro extension as well as macro context for
	  directed pickup. ........

	* res/res_features.c, configs/features.conf.sample: Allow the user
	  to specify where to enable the respective features for when a
	  parked call is picked up. (ie: transfers and parking)

2007-02-16 18:04 +0000 [r54890-54901]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 54898 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54898 | russell | 2007-02-16 12:03:41 -0600 (Fri, 16 Feb 2007) |
	  4 lines Fix setting "autofallthrough" to yes by default. It was
	  set to enabled in pbx.c. However, if the option was not present
	  in extensions.conf, then pbx_config.c would set it back to
	  disabled. ........

	* /, res/res_features.c: Merged revisions 54888 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54888 | russell | 2007-02-16 11:40:38 -0600 (Fri, 16 Feb 2007) |
	  3 lines Clean up a few coding guidelines issues - spaces to tabs,
	  use sizeof() to pass the size of a static buffer, add spaces ...
	  ........

2007-02-16 17:41 +0000 [r54889]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c, CHANGES, configs/features.conf.sample: Add
	  option to features.conf that enables parking via DTMF on picked
	  up parked calls. (issue #9082 reported by francesco_r)

2007-02-16 17:26 +0000 [r54887]  Jason Parker <jparker@digium.com>

	* /, main/asterisk.c: Merged revisions 54886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54886 | qwell | 2007-02-16 11:25:21 -0600 (Fri, 16 Feb 2007) | 4
	  lines Clarify a restart message. It's silly, but the reporter had
	  a very valid point. Issue 9079 ........

2007-02-16 17:07 +0000 [r54885]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 54884 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54884 | file | 2007-02-16 12:02:35 -0500 (Fri, 16 Feb 2007) | 2
	  lines Allow directed pickup to pick up the real context instead
	  of the macro context if a Macro is used. (issue #8984 reported by
	  jamesb63) ........

2007-02-16 14:31 +0000 [r54773-54862]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Formatting, whitespace fixes

	* apps/app_voicemail.c: More cleanups of app_voicemail

	* CREDITS, main/channel.c, channels/chan_sip.c,
	  channels/chan_skinny.c, include/asterisk/rtp.h,
	  include/asterisk/channel.h, channels/chan_gtalk.c, CHANGES,
	  include/asterisk/frame.h, main/rtp.c, channels/chan_mgcp.c:
	  Adding Realtime Text support (T.140) to Asterisk T.140/RFC 2793
	  is a live communication channel, originally created for IP based
	  text phones for hearing impaired. Feels very much like the old
	  Unix talk application. This code is developed and disclaimed by
	  John Martin of Aupix, UK. Tested for interoperability by myself
	  and Omnitor in Sweden, the company that wrote most of the
	  specifications. A big thank you to everyone involved in this.

	* /, channels/chan_sip.c: Merged revisions 54787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54787 | oej | 2007-02-16 13:06:23 +0100 (Fri, 16 Feb 2007) | 2
	  lines Issue #7541 - Handle multipart attachments to SIP messages
	  - even if boundary is quoted. ........

	* res/res_agi.c: Issue #9068 - make sure we quote HTML characters
	  correctly too (seanbright)

	* /, res/res_agi.c: Merged revisions 54772 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r54772 | oej | 2007-02-16 12:39:55 +0100 (Fri,
	  16 Feb 2007) | 10 lines Merged revisions 54771 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r54771 | oej | 2007-02-16 12:38:03 +0100 (Fri, 16 Feb 2007) | 2
	  lines Issue #9069 - If we open with TH we should not close with
	  /TD. (seanbright) ........ ................

2007-02-16 01:36 +0000 [r54711-54749]  Joshua Colp <jcolp@digium.com>

	* main/acl.c: Rely on ast_gethostbyname to handle IP addresses, not
	  inet_aton. (issue #9056 reported by pj)

	* CHANGES, apps/app_chanspy.c: Add 'o' option to Chanspy which
	  causes it to only listen to audio coming from the channel, and
	  the 'X' option which allows the user to exit to a valid single
	  digit extension. (issue #8137 reported by mnicholson)

	* /, apps/app_speech_utils.c: Merged revisions 54714 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r54714 | file | 2007-02-15 19:48:48 -0500 (Thu, 15 Feb
	  2007) | 2 lines Don't let dtmf leak over into the engine and let
	  it skew the results... also give DTMF results priority. (issue
	  #9014 reported by surftek) ........

	* main/manager.c: Properly handle an error result from a manager
	  action. This could have left the action list permanently locked
	  for reading.

2007-02-15 20:29 +0000 [r54654-54686]  Olle Johansson <oej@edvina.net>

	* apps/app_voicemail.c: - add some notes, asking for help - insert
	  a few ast_strlen_zero - Doxygen additions - A few more spaces

	* main/io.c: Make file's new comment doxygenified

2007-02-15 16:24 +0000 [r54624]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 54623 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r54623 | file | 2007-02-15 11:19:39 -0500 (Thu,
	  15 Feb 2007) | 10 lines Merged revisions 54622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r54622 | file | 2007-02-15 11:14:40 -0500 (Thu, 15 Feb 2007) | 2
	  lines Use a separate variable to indicate execution should
	  continue instead of the return value. (issue #8842 reported by
	  pluto70) ........ ................

2007-02-15 15:53 +0000 [r54574-54599]  Olle Johansson <oej@edvina.net>

	* CHANGES: ...and don't forget to update CHANGES

	* channels/chan_sip.c: Add callgroup and pickupgroup to SIPPEER
	  function. (thanks ramon)

	* CHANGES: Update CHANGES

	* channels/chan_sip.c, configs/extconfig.conf.sample,
	  doc/realtime.txt: Issue #7443 - amdtech - Optionally SIP
	  registrations in another realtime family.

2007-02-15 02:11 +0000 [r54489-54552]  Joshua Colp <jcolp@digium.com>

	* main/io.c: Clean up the I/O context handler.

	* apps/app_flash.c, apps/app_image.c, apps/app_exec.c: Few more
	  code clean ups.

	* apps/app_milliwatt.c: Clean up app_milliwatt code.

	* apps/app_dial.c, /: Merged revisions 54481 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54481 | file | 2007-02-14 16:07:23 -0500 (Wed, 14 Feb 2007) | 2
	  lines Forward begin DTMF frames as well as end. (issue #9068
	  reported by mhardeman) ........

2007-02-14 20:45 +0000 [r54464-54466]  Olle Johansson <oej@edvina.net>

	* main/asterisk.c: Show version in "core show settings"

	* CHANGES: Updates and re-organization to make it easier to digest
	  this information

	* main/cdr.c, main/manager.c, include/asterisk/config.h,
	  include/asterisk/cdr.h, include/asterisk/manager.h,
	  main/asterisk.c, main/config.c: New CLI command "Core show
	  settings" to list some core settings

2007-02-14 17:14 +0000 [r54404]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, /: Merged revisions 54375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r54375 | mattf | 2007-02-14 10:56:40 -0600 (Wed,
	  14 Feb 2007) | 10 lines Merged revisions 54373 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r54373 | mattf | 2007-02-14 10:25:49 -0600 (Wed, 14 Feb 2007) | 2
	  lines When handling glare on a PRI, move the requested channel
	  rather than hang up the old one. Fix for 8957 and 9011. ........
	  ................

2007-02-14 17:02 +0000 [r54348-54379]  Olle Johansson <oej@edvina.net>

	* configs/sip.conf.sample: Make documentation match the source
	  code.

	* channels/chan_sip.c: Issue #9060 - host= parameter in sip.conf
	  stopped working caused by outbound proxy patch.

	* channels/chan_sip.c: Add port number to SIPPEER dialplan function

2007-02-14 08:34 +0000 [r54325]  Paul Cadach <paul@odt.east.telecom.kz>

	* codecs/codec_g722.c: I don't know how it worked earlier, but
	  valgrind produces core every time you try to load codec_g722.
	  Fixed. ;-)

2007-02-14 01:12 +0000 [r54291]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 54290 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54290 | file | 2007-02-13 20:09:40 -0500 (Tue, 13 Feb 2007) | 2
	  lines Add G722 to ast_best_codec. If anyone disagrees with it's
	  placement, feel free to change it. (issue #9045 reported by gork)
	  ........

2007-02-13 22:02 +0000 [r54067-54261]  Russell Bryant <russell@digium.com>

	* include/asterisk/devicestate.h, apps/app_meetme.c,
	  res/res_features.c, include/asterisk/cli.h, main/devicestate.c,
	  CHANGES, apps/app_queue.c, funcs/func_devstate.c (added),
	  main/cli.c: This introduces a new dialplan function, DEVSTATE,
	  which allows you to do some pretty cool things. First, you can
	  get the device state of anything in the dialplan: NoOp(SIP/mypeer
	  has state ${DEVSTATE(SIP/mypeer)}) NoOp(The conference room 1234
	  has state ${DEVSTATE(MeetMe:1234)}) Most importantly, this allows
	  you to create custom device states so you can control phone lamps
	  directly from the dialplan.
	  Set(DEVSTATE(Custom:mycustomlamp)=BUSY) ... exten =>
	  mycustomlamp,hint,Custom:mycustomlamp

	* /, channels/chan_sip.c: Merged revisions 54204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54204 | russell | 2007-02-13 13:42:00 -0600 (Tue, 13 Feb 2007) |
	  5 lines If we fail to create the SIP socket, then return -1 from
	  reload_config() so that load_module() will return
	  AST_MODULE_LOAD_DECLINE. Otherwise, the console will just get
	  spammed with error messages every time chan_sip tries to send a
	  message. ........

	* /, channels/chan_sip.c: Merged revisions 54235 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54235 | russell | 2007-02-13 15:31:22 -0600 (Tue, 13 Feb 2007) |
	  2 lines Remove a couple of leftover debug messages ........

	* include/asterisk/devicestate.h, /: Merged revisions 54218 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54218 | russell | 2007-02-13 14:56:50 -0600 (Tue, 13 Feb 2007) |
	  3 lines Fix the documentation on the return values from device
	  state provider registration and deletion. ........

	* main/asterisk.c: Use spaces instead of tabs in the help text for
	  a CLI command

	* main/asterisk.c: Simplify WELCOME_MESSAGE to be a single function
	  call instead of one for each line.

	* include/asterisk/cli.h, main/asterisk.c, main/cli.c: - Constify
	  the format string passed to ast_cli() - Simplify printing out the
	  warranty and license

	* main/dial.c, /, include/asterisk/dial.h: Merged revisions 54103
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54103 | russell | 2007-02-12 13:17:08 -0600 (Mon, 12 Feb 2007) |
	  2 lines Change ast_set_state_callback() to
	  ast_dial_set_state_callback() ........

	* main/dial.c, /, apps/app_meetme.c, apps/app_page.c,
	  include/asterisk/dial.h: Merged revisions 54066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r54066 | russell | 2007-02-12 11:58:43 -0600 (Mon, 12 Feb 2007) |
	  4 lines - Add the ability to register a callback to monitor state
	  changes in an asynchronous dial operation. - Rename the various
	  references to "status" to "state" in the dial API ........

2007-02-12 15:48 +0000 [r54003-54004]  Russell Bryant <russell@digium.com>

	* configs/users.conf.sample, /: Merged revisions 54002 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r54002 | russell | 2007-02-12 10:38:39 -0500 (Mon, 12
	  Feb 2007) | 2 lines Fix a typo where "vmpassword" should be
	  "vmsecret" ........

	* main/channel.c: Simplify a small bit of logic.

2007-02-12 02:44 +0000 [r53980]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_realtime.c: Formatting fixes

2007-02-11 20:49 +0000 [r53914-53953]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Be careful with debug messages in trunk,
	  they tend to stay around for release....

	* channels/chan_sip.c: Small fix in outbound proxy support.

	* channels/chan_sip.c, configs/sip.conf.sample: Add support for
	  outbound proxy for peers and [general] This replaces the older,
	  broken, implementation where a setting in [general] did not do
	  anything and the [peer] part was broken.

	* main/acl.c: Fix debug handling in acl.c

2007-02-10 09:23 +0000 [r53882-53885]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/chan_h323.c: Merged revisions 53881 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53881 | pcadach | 2007-02-10 01:09:49 -0800 (Сбт, 10 Фев 2007) |
	  1 line Fix VLDTMF reception ........

	* /, apps/app_echo.c: Merged revisions 53880 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53880 | pcadach | 2007-02-10 01:08:55 -0800 (Сбт, 10 Фев 2007) |
	  1 line Much simpler than previous one ;-) ........

	* main/channel.c, /: Merged revisions 53879 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53879 | pcadach | 2007-02-10 01:07:11 -0800 (Сбт, 10 Фев 2007) |
	  1 line Provide correct DTMF duration ........

2007-02-10 06:14 +0000 [r53851]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, configure.ac: Merged revisions 53850 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r53850 | kpfleming | 2007-02-10 00:06:08 -0600 (Sat, 10
	  Feb 2007) | 3 lines don't display the --with-imap message unless
	  --with-imap was specified without a path use '-n' instead of '!
	  -z' for tests ........

2007-02-10 00:42 +0000 [r53784-53819]  Russell Bryant <russell@digium.com>

	* include/asterisk/app.h, include/asterisk/utils.h, main/dial.c, /,
	  apps/app_meetme.c, channels/chan_sip.c, doc/sla.txt (added),
	  include/asterisk/dial.h, configs/sla.conf.sample: Merged
	  revisions 53810 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53810 | russell | 2007-02-09 18:35:09 -0600 (Fri, 09 Feb 2007) |
	  24 lines Merge team/russell/sla_rewrite This is a completely new
	  implementation of the SLA functionality introduced in Asterisk
	  1.4. It is now functional and ready for testing. However, I will
	  be adding some additional features over the next week, as well.
	  For information on how to set this up, see
	  configs/sla.conf.sample and doc/sla.txt. In addition to the
	  changes in app_meetme.c for the SLA implementation itself, this
	  merge brings in various other changes: chan_sip: - Add the
	  ability to indicate HOLD state in NOTIFY messages. - Queue HOLD
	  and UNHOLD control frames even if the channel is not bridged to
	  another channel. linkedlists.h: - Add support for rwlock based
	  linked lists. dial.c: - Add the ability to run ast_dial_start()
	  without a reference channel to inherit information from. ........

	* channels/chan_jingle.c: add another dependency

	* /, apps/app_echo.c: Merged revisions 53783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53783 | russell | 2007-02-09 18:15:50 -0600 (Fri, 09 Feb 2007) |
	  4 lines When the Echo() application receives the digit '#', echo
	  that back as well. Since we already sent the BEGIN frame for that
	  digit, it makes sense to send the END as well. ........

2007-02-09 23:53 +0000 [r53782]  Kevin P. Fleming <kpfleming@digium.com>

	* build_tools/get_moduleinfo, res/res_config_odbc.c, /,
	  build_tools/get_makeopts, funcs/func_odbc.c, res/res_adsi.c,
	  channels/chan_gtalk.c, apps/app_adsiprog.c, apps/app_voicemail.c:
	  Merged revisions 53779-53781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53779 | kpfleming | 2007-02-09 17:51:29 -0600 (Fri, 09 Feb 2007)
	  | 2 lines fix awk scripts to work when both MODULEINFO and
	  MAKEOPTS are present in a source file ........ r53780 | kpfleming
	  | 2007-02-09 17:51:41 -0600 (Fri, 09 Feb 2007) | 2 lines add some
	  inter-module dependencies ........ r53781 | kpfleming |
	  2007-02-09 17:52:44 -0600 (Fri, 09 Feb 2007) | 2 lines another
	  dependency ........

2007-02-09 19:39 +0000 [r53717-53750]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 53749 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53749 | file | 2007-02-09 14:33:31 -0500 (Fri, 09 Feb 2007) | 2
	  lines Temporarily change musicclass on channel to one specified
	  in Dial so that the 'm' option functions properly. (issue #8969
	  reported by christianbee) ........

	* apps/app_queue.c: Clean up documentation of Queue application.
	  (issue #9022 reported by seanbright)

2007-02-09 16:43 +0000 [r53716]  Kevin P. Fleming <kpfleming@digium.com>

	* doc/imapstorage.txt, /, configure, configure.ac: Merged revisions
	  53715 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53715 | kpfleming | 2007-02-09 10:42:22 -0600 (Fri, 09 Feb 2007)
	  | 2 lines clarify the fact that voicemail IMAP storage cannot be
	  built against a distro's binary c-client library package (at
	  least not at this time) ........

2007-02-09 01:57 +0000 [r53602-53691]  Joshua Colp <jcolp@digium.com>

	* res/res_musiconhold.c: I'm crazy so I think I'll change the
	  musiconhold classes linked list to read/write as well!

	* main/manager.c: It is with pleasure that I announce the return of
	  rawman support through the HTTP server. (issue #9013 reported by
	  Jynger)

	* /, apps/app_speech_utils.c: Merged revisions 53601 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r53601 | file | 2007-02-08 12:54:32 -0500 (Thu, 08 Feb
	  2007) | 2 lines Fix timeout issue when utterance is longer then
	  timeout itself. ........

2007-02-08 17:19 +0000 [r53580]  Jason Parker <jparker@digium.com>

	* channels/chan_sip.c: Rename this instance of "busy limit" to
	  "busy level" as well

2007-02-08 16:41 +0000 [r53577]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample: rename busy-limit
	  to busy-level, since it is not a limit actually parse the
	  busy-limit option from sip.conf, instead of ignoring it

2007-02-08 13:50 +0000 [r53531-53533]  Tilghman Lesher <tlesher@digium.com>

	* /, main/loader.c: Merged revisions 53532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53532 | tilghman | 2007-02-08 07:47:54 -0600 (Thu, 08 Feb 2007)
	  | 2 lines Issue 9007 - Mutex not released on early return
	  ........

	* /, apps/app_voicemail.c: Merged revisions 53530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53530 | tilghman | 2007-02-08 07:40:02 -0600
	  (Thu, 08 Feb 2007) | 10 lines Merged revisions 53529 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53529 | tilghman | 2007-02-08 07:36:10 -0600 (Thu, 08
	  Feb 2007) | 2 lines Issue 9003 - If fullname is empty, quote()
	  passes back "\"" ........ ................

2007-02-07 23:56 +0000 [r53465-53498]  Russell Bryant <russell@digium.com>

	* /, main/db1-ast/Makefile: Merged revisions 53497 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r53497 | russell | 2007-02-07 17:52:45 -0600 (Wed, 07
	  Feb 2007) | 6 lines When building libdb1.a, put the additional
	  flags needed at the beginning of ASTCFLAGS, instead of at the
	  end. This way, we ensure that we find the local headers first
	  before accidentally trying to use headers that exist in locations
	  specified in the ASTCFLAGS passed from the main Makefile. (issue
	  #8637, ovi) ........

	* /, main/Makefile: Merged revisions 53464 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53464 | russell | 2007-02-07 14:07:39 -0600 (Wed, 07 Feb 2007) |
	  4 lines The clean target actually needs to run "distclean" on
	  editline. This is because we need to make sure that its configure
	  script gets executed again, because the CFLAGS we want to pass to
	  editline may have changed. ........

2007-02-07 17:57 +0000 [r53435]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 53434 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53434 | file | 2007-02-07 12:53:03 -0500 (Wed, 07 Feb 2007) | 2
	  lines We can not reliably do P2P bridging with DTMF passing back
	  with compensation if we need to listen for DTMF frames. (issue
	  #8962 reported by caio1982) ........

2007-02-07 17:46 +0000 [r53431]  Russell Bryant <russell@digium.com>

	* /, main/rtp.c: Merged revisions 53429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53429 | russell | 2007-02-07 11:39:31 -0600 (Wed, 07 Feb 2007) |
	  7 lines When parsing the NTP timestamp in a sender report
	  message, you are supposed to take the low 16 bits of the integer
	  part, and the high 16 bits of the fractional part. However, the
	  code here was erroneously taking the low 16 bits of the
	  fractional part. It then shifted the result 16 bits down, so the
	  result was always zero. This fix makes it grab the appropriate
	  high 16 bits, instead. (issue #8991, pointed out by
	  andre_abrantes) ........

2007-02-07 17:06 +0000 [r53359-53400]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_playback.c: Merged revisions 53399 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53399 | file | 2007-02-07 12:04:44 -0500 (Wed, 07 Feb 2007) | 2
	  lines Directly load say.conf in load_module instead of calling
	  the reload function. (issue #8946 reported by junky) ........

	* /, channels/chan_iax2.c: Merged revisions 53358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53358 | file | 2007-02-07 10:43:39 -0500 (Wed,
	  07 Feb 2007) | 10 lines Merged revisions 53357 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r53357 | file | 2007-02-07 10:38:48 -0500 (Wed, 07 Feb 2007) | 2
	  lines Fix a few potential memory leaks with realtime users and
	  peers. (issue #8999 reported by bsmithurst) ........
	  ................

2007-02-07 15:35 +0000 [r53356]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_macro.c: Merged revisions 53355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53355 | tilghman | 2007-02-07 09:33:51 -0600
	  (Wed, 07 Feb 2007) | 10 lines Merged revisions 53354 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53354 | tilghman | 2007-02-07 09:30:02 -0600 (Wed, 07
	  Feb 2007) | 2 lines Issue 7440 - Macro called from Macro from the
	  h extension exits prematurely ........ ................

2007-02-07 09:51 +0000 [r53334]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 53324 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53324 | crichter | 2007-02-07 10:22:44 +0100
	  (Mi, 07 Feb 2007) | 9 lines Merged revisions 52843 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r52843 | crichter | 2007-01-30 15:38:08 +0100 (Di, 30
	  Jan 2007) | 1 line fixed some possible segfaults. also fixed an
	  very important bug which occurs on high load (when calls are very
	  fast generated) ........ ................

2007-02-07 05:25 +0000 [r53247-53297]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_jabber.c: Merged revisions 53294 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53294 | tilghman | 2007-02-06 23:24:31 -0600 (Tue, 06 Feb 2007)
	  | 2 lines Text fix for jabber reload command (reported by bkruse
	  via IRC) ........

	* main/manager.c, /: Merged revisions 53246 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53246 | tilghman | 2007-02-06 01:00:52 -0600
	  (Tue, 06 Feb 2007) | 10 lines Merged revisions 53245 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53245 | tilghman | 2007-02-06 00:58:28 -0600 (Tue, 06
	  Feb 2007) | 2 lines Issue 8987 - Status could return two
	  responses (mnicholson) ........ ................

2007-02-05 21:55 +0000 [r53200]  Olle Johansson <oej@edvina.net>

	* main/io.c: Doxygen formatting changes

2007-02-05 17:06 +0000 [r53151-53153]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_playback.c: Merged revisions 53152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53152 | file | 2007-02-05 11:06:18 -0600 (Mon, 05 Feb 2007) | 2
	  lines Ensure say_cfg is NULL when the module is loaded. (issue
	  #8946 reported by junky) ........

	* /, apps/app_playback.c: Merged revisions 53150 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53150 | file | 2007-02-05 10:02:00 -0600 (Mon, 05 Feb 2007) | 2
	  lines Unregister Playback CLI commands as well as dialplan
	  application. (issue #8946 reported by junky) ........

2007-02-05 00:30 +0000 [r53144]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 53143 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53143 | oej | 2007-02-05 01:18:34 +0100 (Mon, 05 Feb 2007) | 3
	  lines Add some comments on queue system behaviour and how it
	  affects the SIP channel ........

2007-02-03 22:06 +0000 [r53140-53142]  Tilghman Lesher <tlesher@digium.com>

	* UPGRADE.txt: Deprecate SetCallerPres application

	* apps/app_setcallerid.c, funcs/func_callerid.c: Add CALLERPRES
	  dialplan function and deprecate SetCallerPres application

	* funcs/func_odbc.c: Fix compiler warnings

2007-02-03 21:06 +0000 [r53139]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 53138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53138 | file | 2007-02-03 15:05:02 -0600 (Sat, 03 Feb 2007) | 2
	  lines Make SIPDtmfMode application work with recent capability
	  changes, and also fix an RTP stack issue when the auto option was
	  used. (issue #8972 reported by mdu113) ........

2007-02-03 20:46 +0000 [r53137]  Russell Bryant <russell@digium.com>

	* apps/app_dial.c, /: Merged revisions 53136 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53136 | russell | 2007-02-03 14:44:20 -0600
	  (Sat, 03 Feb 2007) | 12 lines Merged revisions 53133 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53133 | russell | 2007-02-03 14:38:13 -0600 (Sat, 03
	  Feb 2007) | 4 lines set the DIALSTATUS variable to contain
	  "INVALIDARGS" when the dial application exits early because of
	  invalid arguments instead of just leaving it empty. (issue #8975)
	  ........ ................

2007-02-03 10:12 +0000 [r53132]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx: Merged revisions 53131 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53131 | pcadach | 2007-02-03 02:02:55 -0800 (Сбт, 03 Фев 2007) |
	  1 line Remove quote from H.323 vendor string because due to
	  compatibilities with Nortel Meridian CS1000 reported at
	  www.voip-info.org ........

2007-02-02 20:05 +0000 [r53126-53127]  Olle Johansson <oej@edvina.net>

	* doc/queue.txt: Update with info about SIP channels and queues

	* doc/queue.txt (added): Adding a template for documentation on
	  call queues. Please help us add to this! Thanks /OEJ and BJ

2007-02-02 18:21 +0000 [r53111-53125]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Add onHold value to sip show inuse as well.

	* /, main/rtp.c: Merged revisions 53120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53120 | file | 2007-02-02 11:15:22 -0600 (Fri, 02 Feb 2007) | 2
	  lines Correct a copy/pasted error message line for RTCP. ........

	* /, main/config.c: Merged revisions 53118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53118 | file | 2007-02-02 10:59:53 -0600 (Fri,
	  02 Feb 2007) | 10 lines Merged revisions 53117 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r53117 | file | 2007-02-02 10:58:09 -0600 (Fri, 02 Feb 2007) | 2
	  lines Pass the glob expanded filename to process_text_line so
	  that error messages contain the actual filename, not the original
	  include one. (issue #8959 reported by tzafrir) ........
	  ................

	* Makefile, /: Merged revisions 53114 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53114 | file | 2007-02-02 09:29:35 -0600 (Fri, 02 Feb 2007) | 2
	  lines Add systemname to asterisk.conf generation per recent
	  discussions about it. (issue #8968 reported by blitzrage)
	  ........

	* main/devicestate.c: Clean up ast_device_state. It's pretty now!

	* main/devicestate.c: Switch the devicestate thread to operate the
	  same way as the logging thread. Pops all entries off the list to
	  be processed, resets the list back to a clean state, and
	  processes each entry. The thread won't have to acquire the list
	  lock again until it checks to see if there are more to process.

	* main/devicestate.c: Read/write lockify the devicestate stuff a
	  bit.

2007-02-02 00:26 +0000 [r53110]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Patch based on
	  this patch with small changes for trunk... Merged revisions 53109
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53109 | oej | 2007-02-02 01:24:03 +0100 (Fri, 02 Feb 2007) | 4
	  lines Disable the direct p2p RTP call setup in SIP. You can
	  enable it in sip.conf, but it is now considered experimental
	  until we solve the AST_CONTROL_ANSWER with payload and videocaps
	  stuff. ........

2007-02-01 22:26 +0000 [r53098-53105]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 53104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53104 | file | 2007-02-01 16:24:32 -0600 (Thu,
	  01 Feb 2007) | 10 lines Merged revisions 53103 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r53103 | file | 2007-02-01 16:21:56 -0600 (Thu, 01 Feb 2007) | 2
	  lines Copy noncodeccapability over to the joint variable so that
	  telephone-event will get transmitted in the sent INVITE. ........
	  ................

	* /, channels/chan_sip.c: Merged revisions 53097 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53097 | file | 2007-02-01 15:54:28 -0600 (Thu,
	  01 Feb 2007) | 10 lines Merged revisions 53095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r53095 | file | 2007-02-01 15:47:11 -0600 (Thu, 01 Feb 2007) | 2
	  lines Don't negotiate RFC2833 when not configured to do so.
	  (issue #8799 reported by mdu113) ........ ................

2007-02-01 21:27 +0000 [r53094]  Russell Bryant <russell@digium.com>

	* /, funcs/func_strings.c: Merged revisions 53093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53093 | russell | 2007-02-01 15:24:52 -0600 (Thu, 01 Feb 2007) |
	  2 lines Fix the FIELDQTY function to not crash. (reported by
	  blitzrage and Corydon on IRC) ........

2007-02-01 21:17 +0000 [r53092]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 53085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53085 | oej | 2007-02-01 22:05:34 +0100 (Thu, 01 Feb 2007) | 4
	  lines - Clean INC_COUNT flag when we decrement call counter - If
	  it's still set at time of dialog destruction, make sure we
	  decrement the device call counter properly before we destroy the
	  dialog ........

2007-02-01 21:12 +0000 [r53087-53089]  Joshua Colp <jcolp@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 53088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53088 | file | 2007-02-01 15:11:28 -0600 (Thu,
	  01 Feb 2007) | 10 lines Merged revisions 53084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r53084 | file | 2007-02-01 15:03:10 -0600 (Thu, 01 Feb 2007) | 2
	  lines Return previous behavior of having MOH pick up where it was
	  left off. (issue #8672 reported by sinistermidget) ........
	  ................

2007-02-01 20:44 +0000 [r53080-53083]  Olle Johansson <oej@edvina.net>

	* /, apps/app_queue.c: Merged revisions 53081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53081 | oej | 2007-02-01 21:38:58 +0100 (Thu, 01 Feb 2007) | 2
	  lines Change debug level for state change message that is not
	  really informative when debugging app_queue ........

	* channels/chan_sip.c, configs/sip.conf.sample: Implementing
	  "busy-limit". If you set call limit and busy limit, chan_sip will
	  indicate BUSY for a device that has reached the busy limit and
	  allow calls up to the call limit, allowing for call transfers
	  (that generate a new call). If you only set call limit, chan_sip
	  will not indicate BUSY until that limit is filled. This affects
	  SIP subscriptions, call queues and manager applications.

	* /, channels/chan_sip.c: Merged revisions 53079 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53079 | oej | 2007-02-01 21:28:54 +0100 (Thu, 01 Feb 2007) | 2
	  lines Cleaning up the devicestate callback function ........

2007-02-01 20:14 +0000 [r53076-53078]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 53075 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53075 | tilghman | 2007-02-01 14:09:52 -0600
	  (Thu, 01 Feb 2007) | 10 lines Merged revisions 53074 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53074 | tilghman | 2007-02-01 14:07:35 -0600 (Thu, 01
	  Feb 2007) | 2 lines Bug 8965 - Allow FIELDQTY to work with both
	  variables and dialplan functions ........ ................

2007-02-01 19:34 +0000 [r53073]  Joshua Colp <jcolp@digium.com>

	* /, main/asterisk.c: Merged revisions 53072 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53072 | file | 2007-02-01 13:33:33 -0600 (Thu, 01 Feb 2007) | 2
	  lines Add missing 'F' letter to getopt so it magically becomes a
	  valid option. (issue #8960 reported by tzafrir) ........

2007-02-01 19:27 +0000 [r53071]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c, /, funcs/func_strings.c: Merged revisions 53070 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53070 | tilghman | 2007-02-01 13:21:20 -0600
	  (Thu, 01 Feb 2007) | 10 lines Merged revisions 53069 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53069 | tilghman | 2007-02-01 13:13:53 -0600 (Thu, 01
	  Feb 2007) | 2 lines No wonder FIELDQTY doesn't work with
	  functions... the documentation in pbx.c was wrong ........
	  ................

2007-02-01 19:04 +0000 [r53067]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Signal HOLD status to phones that subscribe
	  for status.

2007-02-01 17:42 +0000 [r53065-53066]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 53064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53064 | file | 2007-02-01 11:37:44 -0600 (Thu, 01 Feb 2007) | 2
	  lines Fix silly logic. We really want to write UDPTL frames out
	  when the call is up. ........

	* main/db1-ast/hash/hash.c: Make trunk compile under dev mode.

2007-02-01 16:42 +0000 [r53063]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Merged revisions 53062 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r53062 | oej | 2007-02-01 17:35:12 +0100 (Thu, 01 Feb
	  2007) | 2 lines Add explanation of port= in combination with
	  defaultip= (thanks jsmith) ........

2007-02-01 14:43 +0000 [r53061]  Russell Bryant <russell@digium.com>

	* apps/app_rpt.c: Remove duplicate calls to pthread_attr_destroy()
	  that I put in yesterday by accident.

2007-02-01 11:16 +0000 [r53058-53059]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/chan_h323.c: Oops -- Merged revisions 53057 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53057 | pcadach | 2007-02-01 03:07:41 -0800 (Чтв, 01 Фев 2007) |
	  1 line chan_h323 is very stable, so let it built by default
	  ........

2007-02-01 00:38 +0000 [r53054]  Olle Johansson <oej@edvina.net>

	* res/res_features.c: Formatting changes

2007-02-01 00:24 +0000 [r53051-53053]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 53052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53052 | file | 2007-01-31 18:24:20 -0600 (Wed, 31 Jan 2007) | 2
	  lines When going on hold have the side that was put on hold
	  reinvite back to Asterisk. When going off hold have the side that
	  was taken off hold reinvited back to the other party. ........

	* /, main/rtp.c: Merged revisions 53050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53050 | file | 2007-01-31 18:19:48 -0600 (Wed, 31 Jan 2007) | 2
	  lines Add more frame types to forward in the RTP bridge loops.
	  ........

2007-01-31 21:35 +0000 [r52905-53047]  Russell Bryant <russell@digium.com>

	* main/pbx.c, channels/chan_zap.c, /, apps/app_meetme.c,
	  channels/chan_sip.c, apps/app_queue.c, channels/chan_iax2.c,
	  main/cdr.c, main/manager.c, pbx/pbx_spool.c,
	  channels/chan_skinny.c, channels/chan_h323.c, main/http.c,
	  pbx/pbx_dundi.c, apps/app_rpt.c, channels/chan_mgcp.c: Merged
	  revisions 53046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53046 | russell | 2007-01-31 15:32:08 -0600
	  (Wed, 31 Jan 2007) | 11 lines Merged revisions 53045 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53045 | russell | 2007-01-31 15:25:11 -0600 (Wed, 31
	  Jan 2007) | 3 lines Fix a bunch of places where
	  pthread_attr_init() was called, but pthread_attr_destroy() was
	  not. ........ ................

	* /, apps/app_userevent.c: Merged revisions 53042 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53042 | russell | 2007-01-31 12:18:25 -0600 (Wed, 31 Jan 2007) |
	  2 lines Remove an extra \r\n from manager user events. (issue
	  #8955, mnicholson) ........

	* /, main/rtp.c: Merged revisions 53040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r53040 | russell | 2007-01-31 11:45:05 -0600
	  (Wed, 31 Jan 2007) | 11 lines Merged revisions 53039 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r53039 | russell | 2007-01-31 11:41:51 -0600 (Wed, 31
	  Jan 2007) | 3 lines Use the proper format string to print
	  unsigned values in the rtp debug output. (issue #8954, wmis)
	  ........ ................

	* /, apps/app_queue.c: Merged revisions 53037 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53037 | russell | 2007-01-31 11:39:28 -0600 (Wed, 31 Jan 2007) |
	  3 lines Only changed the paused status in an existing queue
	  member if the paused column exists. ........

	* /, apps/app_queue.c: Merged revisions 53035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53035 | russell | 2007-01-31 11:34:22 -0600 (Wed, 31 Jan 2007) |
	  4 lines Instead of always creating a realtime queue member as
	  unpaused, read the "paused" column and use that value for the
	  paused status of the member. (issue #8949, jmls) ........

	* /, contrib/init.d/rc.suse.asterisk: Merged revisions 53001 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r53001 | russell | 2007-01-30 17:38:42 -0600 (Tue, 30 Jan 2007) |
	  2 lines Update init script for SuSE 10. (issue #8363, johnlange)
	  ........

	* /, doc/cdrdriver.txt: Merged revisions 52999 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52999 | russell | 2007-01-30 17:30:34 -0600 (Tue, 30 Jan 2007) |
	  2 lines Add documentation for using cdr_pgsql. (issue #8942,
	  lters) ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  codecs/codec_gsm.c: Merged revisions 52997 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52997 | russell | 2007-01-30 17:23:24 -0600 (Tue, 30 Jan 2007) |
	  5 lines When we are checking for a system installed version of
	  libgsm, we need to check for gsm.h as well. Furthermore, when
	  checking for this header, it may be located in a gsm/ sub
	  directory, so check for that, as well. (issue #8773) ........

	* /, channels/chan_sip.c: Merged revisions 52952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52952 | russell | 2007-01-30 13:33:12 -0600 (Tue, 30 Jan 2007) |
	  5 lines Only set the DTMF flag on the rtp structure if the DTMF
	  mode is actually RFC2833, not just that it is not INFO. This
	  makes it get set for inband DTMF as well, which is not valid.
	  (issue #8936) ........

	* /, main/asterisk.c: Merged revisions 52904 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52904 | russell | 2007-01-30 11:19:39 -0600
	  (Tue, 30 Jan 2007) | 17 lines Merged revisions 52903 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r52903 | russell | 2007-01-30 11:12:04 -0600 (Tue, 30
	  Jan 2007) | 9 lines The SIGHUP handler was implemented to allow
	  admins to send SIGHUP to a running Asterisk process to reload the
	  configuration. However, doing the actual reload in the signal
	  handler itself is a very bad thing to do, because the reload
	  process includes calling non-reentrant functions such as
	  malloc/calloc/etc. If Asterisk is running in the background, then
	  the reload will happen immediately. However, if running in
	  console mode, the reload doesn't work until something is typed at
	  the console. That sort of defeats the purpose, but I don't see an
	  easy way to get around it at this point. ........
	  ................

2007-01-30 15:39 +0000 [r52858-52860]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: Use provided variable for name instead of
	  one in the structure since the structure was just allocated and
	  will be NULL. (issue #8938 reported by st41ker)

2007-01-30 09:13 +0000 [r52818-52820]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, res/res_odbc.c: Merged revisions 52808 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52808 | pcadach | 2007-01-30 00:34:26 -0800 (Втр, 30 Янв 2007) |
	  1 line Don't play with free()'d pointers ........

	* /, configure, acinclude.m4: Merged revisions 52807 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r52807 | pcadach | 2007-01-30 00:33:22 -0800 (Втр, 30
	  Янв 2007) | 1 line Handle non-standard OpenH323/PWLib library
	  names ........

2007-01-30 00:16 +0000 [r52764]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 52763 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52763 | russell | 2007-01-29 18:15:50 -0600
	  (Mon, 29 Jan 2007) | 13 lines Merged revisions 52762 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r52762 | russell | 2007-01-29 18:15:06 -0600 (Mon, 29
	  Jan 2007) | 5 lines Fix the extraction of the timestamp from
	  video frames. It was using the mapping for a mini-frame instead
	  of a video-frame, which caused it to get invalid data. (issue
	  #8795, mihai) ........ ................

2007-01-29 23:45 +0000 [r52718]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 52717 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52717 | file | 2007-01-29 18:43:40 -0500 (Mon,
	  29 Jan 2007) | 10 lines Merged revisions 52716 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52716 | file | 2007-01-29 18:39:39 -0500 (Mon, 29 Jan 2007) | 2
	  lines Now that filename is part of the structure and since it
	  comes before postprocess... we have to add it to our postprocess
	  line. (reported on asterisk-dev by Boris Bakchiev) ........
	  ................

2007-01-29 22:58 +0000 [r52692-52696]  Russell Bryant <russell@digium.com>

	* /, main/Makefile: Merged revisions 52695 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52695 | russell | 2007-01-29 16:58:09 -0600 (Mon, 29 Jan 2007) |
	  2 lines Add a missing quotation mark. This was pointed out by
	  jcmoore on #asterisk-dev. ........

	* main/manager.c, /: Merged revisions 52688 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52688 | russell | 2007-01-29 16:55:41 -0600 (Mon, 29 Jan 2007) |
	  3 lines Remove a recursive lock of the manager session. This was
	  pointed out by zandbelt in issue #8711. ........

2007-01-29 22:13 +0000 [r52680]  Tilghman Lesher <tlesher@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 52679 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52679 | tilghman | 2007-01-29 16:12:12 -0600 (Mon, 29 Jan 2007)
	  | 2 lines Argument number correction ........

2007-01-29 21:37 +0000 [r52646-52648]  Russell Bryant <russell@digium.com>

	* /, main/Makefile: Merged revisions 52647 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52647 | russell | 2007-01-29 15:36:56 -0600 (Mon, 29 Jan 2007) |
	  3 lines ASTLDFLAGS needs to be passed to the editline configure
	  script as LDFLAGS. (issue #8928, zandbelt) ........

	* /, main/rtp.c: Merged revisions 52645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52645 | russell | 2007-01-29 15:26:27 -0600 (Mon, 29 Jan 2007) |
	  6 lines Fix a problem with packet-to-packet bridging and DTMF
	  mode translation. P2P bridging can only be used when the DTMF
	  modes don't match if the core is monitoring DTMF in both
	  directions. Then, the core will handle the translation.
	  Otherwise, this bridging method can not be used. (issue #8936)
	  ........

2007-01-29 21:03 +0000 [r52635]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c: Only use locking for bridge information if intense
	  P2P bridging is enabled.

2007-01-29 20:51 +0000 [r52612-52613]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: The changes for trunk are less extensive, but
	  include - changing the actionlock to a rwlock - not locking the
	  session before doing the action callback The crash issue in 8711
	  should not be an issue here. Merged revisions 52611 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r52611 | russell | 2007-01-29 14:39:20 -0600 (Mon, 29
	  Jan 2007) | 10 lines The session lock can not be held while
	  calling action callbacks. If so, then when the WaitEvent callback
	  gets called, then no event can happen because the session can't
	  be locked by another thread. Also, the session needs to be locked
	  in the HTTP callback when it reads out the output string. This
	  fixes the deadlock reported in both 8711 and 8934. Regarding
	  issue 8711, there still may be an issue. If there is a second
	  action requested before the processing of the first action is
	  finished, there could still be some corruption of the output
	  string buffer used to build the result. (issue #8711, #8934)
	  ........

	* apps/app_voicemail.c: Resolve some warnings when not building
	  with IMAP_STORAGE

2007-01-29 20:22 +0000 [r52580-52610]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: Change vmstates list to use linked list
	  macros.

	* apps/app_voicemail.c: Code cleanup of IMAP storage support in
	  app_voicemail.

	* /, apps/app_voicemail.c: Merged revisions 52572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52572 | file | 2007-01-29 13:59:41 -0500 (Mon, 29 Jan 2007) | 2
	  lines Use ast_calloc instead of malloc. ........

2007-01-29 17:49 +0000 [r52524-52525]  Joshua Colp <jcolp@digium.com>

	* CHANGES, main/cli.c: Add core show channels count CLI command.
	  (issue #8932 reported by mr_mehul_shah)

	* /, apps/app_voicemail.c: Merged revisions 52523 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52523 | file | 2007-01-29 12:33:19 -0500 (Mon, 29 Jan 2007) | 2
	  lines Set quota information to 0 when creating a vm_state. (issue
	  #8924 reported by neutrino88) ........

2007-01-29 17:03 +0000 [r52522]  Russell Bryant <russell@digium.com>

	* /, main/jitterbuf.c, include/jitterbuf.h: Merged revisions
	  52494,52506 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52494 | jdixon | 2007-01-28 22:18:36 -0600 (Sun, 28 Jan 2007) |
	  4 lines Fixed problem with jitterbuf, whereas it would not
	  complain about, and would allow itself to be overfilled (per the
	  max_jitterbuf parameter). Now it rejects any data over and above
	  that size, and complains about it. ........ r52506 | russell |
	  2007-01-29 10:54:27 -0600 (Mon, 29 Jan 2007) | 5 lines Clean up a
	  few things in the last commit to the adaptive jitterbuffer code.
	  - Specifically indicate to the compiler that the "dropem"
	  variable only needs one but. - Change formatting to conform to
	  coding guidelines. ........

2007-01-28 05:18 +0000 [r52463]  Tilghman Lesher <tlesher@digium.com>

	* /, configure, configure.ac: Merged revisions 52462 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r52462 | tilghman | 2007-01-27 23:15:07 -0600 (Sat, 27
	  Jan 2007) | 2 lines Suggested change to fix normal usage of
	  --with-tds=/usr/local (Sean Bright, via asterisk-dev mailing
	  list) ........

2007-01-27 02:15 +0000 [r52332-52417]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_queue.c: Merged revisions 52416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52416 | file | 2007-01-26 21:13:41 -0500 (Fri,
	  26 Jan 2007) | 10 lines Merged revisions 52415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52415 | file | 2007-01-26 21:09:10 -0500 (Fri, 26 Jan 2007) | 2
	  lines Make COMPLETECALLER and COMPLETEAGENT output to queue_log
	  follow documentation. (issue #7677 reported by amilcar) ........
	  ................

	* /, channels/chan_iax2.c: Merged revisions 52370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52370 | file | 2007-01-26 19:08:18 -0500 (Fri,
	  26 Jan 2007) | 10 lines Merged revisions 52360 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52360 | file | 2007-01-26 19:03:23 -0500 (Fri, 26 Jan 2007) | 2
	  lines Make the last context entry read in the dominant one.
	  (issue #8918 reported by pj) ........ ................

	* /, main/file.c: Merged revisions 52335 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52335 | file | 2007-01-26 18:46:47 -0500 (Fri, 26 Jan 2007) | 2
	  lines Fix core show file formats CLI command. ........

	* main/file.c, main/image.c: Convert some more stuff to read/write
	  lists.

2007-01-25 22:49 +0000 [r52168-52308]  Joshua Colp <jcolp@digium.com>

	* CHANGES, main/db.c: Add DBDel and DBDelTree manager commands.
	  (issue #8516 reported by dprado)

	* /, main/jitterbuf.c: Merged revisions 52265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52265 | file | 2007-01-25 14:18:33 -0500 (Thu,
	  25 Jan 2007) | 10 lines Merged revisions 52264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52264 | file | 2007-01-25 14:15:29 -0500 (Thu, 25 Jan 2007) | 2
	  lines Allow dequeueing of frames with negative timestamp by
	  moving jitterbuffer frames check to jb_next. (issue #8546
	  reported by harmen) ........ ................

	* channels/chan_sip.c: Use atomic operation functions for
	  use/ringing/hold manipulation.

	* /, channels/chan_sip.c: Merged revisions 52210 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52210 | file | 2007-01-25 12:49:39 -0500 (Thu, 25 Jan 2007) | 2
	  lines Drop out variables I accidentally put in. ........

	* /, channels/chan_sip.c: Merged revisions 52208 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52208 | file | 2007-01-25 12:14:53 -0500 (Thu, 25 Jan 2007) | 2
	  lines Decrement onHold count if we are hung up on and still on
	  hold. (issue #8909 reported by alexh42) ........

	* /, apps/app_mixmonitor.c: Merged revisions 52163 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52163 | file | 2007-01-24 20:51:35 -0500 (Wed,
	  24 Jan 2007) | 10 lines Merged revisions 52162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52162 | file | 2007-01-24 20:48:52 -0500 (Wed, 24 Jan 2007) | 2
	  lines Add another note about audio files being played back to
	  each bridged party. (issue #8718 reported by ppyy) ........
	  ................

2007-01-25 01:38 +0000 [r52108-52161]  Russell Bryant <russell@digium.com>

	* configs/users.conf.sample, /, apps/app_voicemail.c: Merged
	  revisions 52160 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52160 | russell | 2007-01-24 19:37:16 -0600 (Wed, 24 Jan 2007) |
	  2 lines By suggestion from kpfleming last week, change
	  "vmpassword" to "vmsecret". ........

	* /, include/asterisk/dial.h: Merged revisions 52107 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r52107 | russell | 2007-01-24 15:42:47 -0600 (Wed, 24
	  Jan 2007) | 3 lines Fix the formatting of doxygen comments to
	  properly indicate that the comment documents the previous entity,
	  as opposed to the next one. ........

2007-01-24 20:35 +0000 [r52053-52086]  Steve Murphy <murf@digium.com>

	* UPGRADE.txt, apps/app_chanisavail.c: As per bug 8859 (Add option
	  to revert old ChanIsAvail() with 's' option behavior), this
	  update makes the 't' option available, which calls
	  ast_parse_device_state instead of ast_device_state. This option
	  will not dive into the channel driver to find the status of the
	  device (which could be good if sip devicestate isn't returning
	  full status, for various reasons).

	* utils/Makefile, /, utils/check_expr.c: Merged revisions 52052 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r52052 | murf | 2007-01-24 11:26:22 -0700 (Wed,
	  24 Jan 2007) | 9 lines Merged revisions 52002 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r52002 | murf | 2007-01-24 10:43:50 -0700 (Wed, 24 Jan 2007) | 1
	  line updated check_expr via 8322 (refactoring of expression
	  checking impl); elfring contributed a nice code reorg, I
	  contributed some time to get it working again, better messages
	  ........ ................

2007-01-24 18:23 +0000 [r52025-52050]  Joshua Colp <jcolp@digium.com>

	* main/dial.c (added), /, apps/app_page.c, main/Makefile,
	  include/asterisk/dial.h (added): Merged revisions 52049 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52049 | file | 2007-01-24 13:20:05 -0500 (Wed, 24 Jan 2007) | 2
	  lines Merge in dialing API and the app_page that uses it. (issue
	  #BE-118) ........

	* /, channels/chan_sip.c: Merged revisions 52016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r52016 | file | 2007-01-24 12:59:55 -0500 (Wed, 24 Jan 2007) | 2
	  lines Fix changing channel formats when joint capability changes
	  and there are no audio formats... I didn't break it originally!
	  (issue #8535 reported by ivoc) ........

2007-01-24 09:42 +0000 [r51905-51933]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 51931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51931 | oej | 2007-01-24 10:30:21 +0100 (Wed, 24 Jan 2007) | 3
	  lines Show capabilities *and* preference in general settings in
	  "sip show settings" (reported by Clona/Telio - Thanks!) ........

	* include/asterisk/http.h, main/http.c: Doxygen updates

	* funcs/func_rand.c, funcs/func_base64.c, funcs/func_module.c,
	  funcs/func_md5.c, funcs/func_db.c, funcs/func_version.c,
	  funcs/func_timeout.c, funcs/func_env.c, funcs/func_math.c,
	  funcs/func_strings.c, funcs/func_sha1.c, funcs/func_logic.c,
	  funcs/func_uri.c, funcs/func_global.c, funcs/func_enum.c,
	  funcs/func_groupcount.c, funcs/func_odbc.c, funcs/func_shell.c,
	  funcs/func_channel.c, funcs/func_cdr.c, funcs/func_callerid.c:
	  Doxygen update

	* main/udptl.c: Adding some doxygen for udptl.c

2007-01-24 01:00 +0000 [r51850]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 51848 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51848 | russell | 2007-01-23 18:59:58 -0600
	  (Tue, 23 Jan 2007) | 14 lines Merged revisions 51843 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51843 | russell | 2007-01-23 18:57:28 -0600 (Tue, 23
	  Jan 2007) | 6 lines Fix an issue related to synchronization of
	  recordings when using Monitor(). The bug is a miscalculation of
	  the amount to seek the stream for writing to disk when the number
	  of samples coming in and out of a channel do not match up. (issue
	  #8298, #8887, report and patch by guillecabeza, patch files
	  created and testing done by whoiswes) ........ ................

2007-01-24 00:22 +0000 [r51831]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: Close file after we do the translation, and map
	  memory for both reading/writing. (issue #8886 reported by
	  cwegener)

2007-01-24 00:21 +0000 [r51830]  Russell Bryant <russell@digium.com>

	* /, apps/app_while.c: Merged revisions 51829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51829 | russell | 2007-01-23 18:19:55 -0600
	  (Tue, 23 Jan 2007) | 12 lines Merged revisions 51828 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51828 | russell | 2007-01-23 18:17:50 -0600 (Tue, 23
	  Jan 2007) | 4 lines Don't set a new value for the END_ variable
	  on the channel before using the old value. If you do, it will
	  lead to accessing a memory address that has been free()'d. (issue
	  #8895, arkadia) ........ ................

2007-01-23 22:59 +0000 [r51801]  Joshua Colp <jcolp@digium.com>

	* channels/chan_phone.c, channels/chan_zap.c, /,
	  channels/chan_sip.c, channels/chan_skinny.c,
	  channels/chan_features.c, channels/chan_alsa.c,
	  channels/chan_gtalk.c, channels/chan_iax2.c, channels/chan_oss.c:
	  Merged revisions 51788 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51788 | file | 2007-01-23 17:46:31 -0500 (Tue, 23 Jan 2007) | 2
	  lines Update channel drivers to use module referencing so that
	  unloading them while in use will not result in crashes. (issue
	  #8897 reported by junky) ........

2007-01-23 22:09 +0000 [r51751-51787]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 51781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51781 | russell | 2007-01-23 16:04:01 -0600 (Tue, 23 Jan 2007) |
	  6 lines Fix some bugs in process_message(). The manager session
	  lock needs to be held when sending some sort of response, or
	  calling one of the manager action callbacks. This resolves an
	  issue where people using the GUI would get random crashes when
	  they start clicking around a lot. (issue #8711, reported and
	  debugged by zandbelt) ........

	* main/manager.c, /: Merged revisions 51750 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51750 | russell | 2007-01-23 15:33:15 -0600 (Tue, 23 Jan 2007) |
	  4 lines When traversing the list of manager actions, the iterator
	  needs to be initialized to the list head *after* locking the
	  list. Also, lock the actions list in one place it is being
	  accessed where it was not being done. ........

2007-01-23 20:36 +0000 [r51684-51717]  Steve Murphy <murf@digium.com>

	* /, res/res_features.c: Merged revisions 51716 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51716 | murf | 2007-01-23 13:32:54 -0700 (Tue, 23 Jan 2007) | 1
	  line this mod from 8593 (dstchannel in cdr is empty when transfer
	  call). ........

	* /, main/callerid.c: Merged revisions 51683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51683 | murf | 2007-01-23 11:58:27 -0700 (Tue, 23 Jan 2007) | 1
	  line via 8748 (callerid.c loses name when returning
	  PRIVATE_NUMBER flag), the user suggested this mod, saying it
	  would allow 'WITHHELD' to appear in the name field, which would
	  be useful ........

2007-01-23 15:36 +0000 [r51659]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Issue #8817 - Registry corruption when
	  packet retransmits fail. (tootai, patchy by oej)

2007-01-23 06:56 +0000 [r51623]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/chan_h323.c, channels/Makefile: Merged revisions
	  51615 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51615 | pcadach | 2007-01-22 22:51:51 -0800 (Пнд, 22 Янв 2007) |
	  1 line Do not abort Asterisk startup if h323 configuration file
	  not found (reported by mithraen) ........

2007-01-23 04:45 +0000 [r51463-51592]  Joshua Colp <jcolp@digium.com>

	* doc/externalivr.txt, apps/app_externalivr.c, CHANGES: Make 'H'
	  command do as advertised and add 'E' and 'V' commands to
	  ExternalIVR. (issue #8165 reported by mnicholson)

	* configs/iax.conf.sample, CHANGES, channels/chan_iax2.c: Add SRV
	  Lookup support on outbound calls to chan_iax2. It's listed in the
	  RFC so we might want to support it and please don't hurt me Marko
	  ... (issue #7812 reported by drorlb)

	* /, channels/chan_sip.c: Merged revisions 51558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51558 | file | 2007-01-22 22:00:12 -0500 (Mon, 22 Jan 2007) | 2
	  lines Only change audio formats on the channel if we have an
	  audio format to change to. (issue #8535 reported by ivoc)
	  ........

	* /: No more conflicts on properties! svnmerge-block be gone!

	* /, res/res_musiconhold.c: Merged revisions 51513 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51513 | file | 2007-01-22 20:45:04 -0500 (Mon,
	  22 Jan 2007) | 10 lines Merged revisions 51512 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r51512 | file | 2007-01-22 20:41:35 -0500 (Mon, 22 Jan 2007) | 2
	  lines Yield before reading from zaptel timing source under
	  Solaris so that other threads get a chance to do things. (issue
	  #7875 reported by bob) ........ ................

	* main/autoservice.c: Might as well go crazy here too and make the
	  autoservice list read/write.

	* main/pbx.c, main/autoservice.c, main/frame.c, main/say.c,
	  main/jitterbuf.c, main/devicestate.c, main/utils.c, main/enum.c,
	  main/fskmodem.c, main/config.c, main/cli.c, main/io.c,
	  main/channel.c, main/cdr.c, main/abstract_jb.c, main/logger.c,
	  main/callerid.c, main/file.c, main/app.c, main/image.c,
	  main/alaw.c, main/asterisk.c, main/dsp.c: Cosmetic changes. Make
	  main source files better conform to coding guidelines and
	  standards. (issue #8679 reported by johann8384)

	* main/rtp.c: Change RTP protos list to be read/write. Most of the
	  time it's only going to be read so making it use mutex locks was
	  a waste.

	* main/rtp.c: Make the RTP stack better conform to coding
	  guidelines. (issue #8679 reported by johann8384)

2007-01-22 19:42 +0000 [r51413]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 51409 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51409 | murf | 2007-01-22 12:28:51 -0700 (Mon, 22 Jan 2007) | 1
	  line This fixes 8836, according to dnatural ........

2007-01-22 19:22 +0000 [r51408]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 51407 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51407 | file | 2007-01-22 14:13:44 -0500 (Mon,
	  22 Jan 2007) | 10 lines Merged revisions 51406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r51406 | file | 2007-01-22 14:08:52 -0500 (Mon, 22 Jan 2007) | 2
	  lines Move filestream creation to Mixmonitor loop. This will
	  prevent a blank file from being created if no frames ever pass
	  through to be recorded. (issue #7589 reported by steve_mcneil)
	  ........ ................

2007-01-22 19:00 +0000 [r51405]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Remove (to quote Rizzo) "useless" variable.

2007-01-21 03:25 +0000 [r51353]  Tilghman Lesher <tlesher@digium.com>

	* main/pbx.c: Fix bug introduced during constification (reported by
	  tzanger via IRC)

2007-01-20 18:27 +0000 [r51352]  Russell Bryant <russell@digium.com>

	* include/asterisk/frame.h: Add a comment that the frame type
	  constants are transmitted directly over IAX2.

2007-01-20 06:54 +0000 [r51349-51351]  Jason Parker <jparker@digium.com>

	* /, configs/say.conf.sample: Merged revisions 51350 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r51350 | qwell | 2007-01-20 00:53:49 -0600 (Sat, 20 Jan
	  2007) | 5 lines Fix Italian numeral support in say.conf for
	  "_[2-9]00" case. "2131" would've translated to something along
	  the lines of (pardon my..Italian {or lack thereof})
	  "duecentocentotrentuno", which makes no sense at all. ........

	* /, configs/say.conf.sample: Merged revisions 51348 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r51348 | qwell | 2007-01-20 00:16:06 -0600 (Sat, 20 Jan
	  2007) | 8 lines Fix German language support in say.conf Properly
	  support 21, 31, 41, 51, 61, 71, 81, and 91. einundzwanzig has the
	  same format as zweiundzwanzig (as do all other "_ZX" spoken
	  numerals) Fix support for numbers in the 10,000,000 to 99,999,999
	  range. Add support for numbers in the 100,000,000 to 999,999,999
	  range. ........

2007-01-20 00:13 +0000 [r51314-51344]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 51343 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51343 | russell | 2007-01-19 18:13:06 -0600 (Fri, 19 Jan 2007) |
	  2 lines Remove an unused instance of an unnamed enum. ........

	* /, apps/app_meetme.c: Merged revisions 51341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51341 | russell | 2007-01-19 16:19:10 -0600 (Fri, 19 Jan 2007) |
	  2 lines Remove another duplicated definition ........

	* /, apps/app_meetme.c: Merged revisions 51339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51339 | russell | 2007-01-19 15:20:20 -0600 (Fri, 19 Jan 2007) |
	  2 lines Remove a variable that was declared twice. ........

	* /, codecs/gsm/Makefile: Merged revisions 51331 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51331 | russell | 2007-01-19 13:30:54 -0600 (Fri, 19 Jan 2007) |
	  3 lines Add a couple more processors that need optimizations
	  excluded. (issue #8637) ........

	* /, channels/chan_gtalk.c: Merged revisions 51328 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r51328 | russell | 2007-01-19 13:08:25 -0600 (Fri, 19
	  Jan 2007) | 5 lines Fix VLDTMF support in chan_gtalk.
	  AST_FRAME_DTMF and AST_FRAME_DTMF_END are actually the same
	  thing. So, a digit would have been interpreted incorrectly here.
	  Since the channel driver will always have the begin and end
	  callbacks called for a digit, only support the button-down and
	  button-up messages. ........

	* /, .cleancount: Merged revisions 51326 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51326 | russell | 2007-01-19 13:02:55 -0600 (Fri, 19 Jan 2007) |
	  2 lines Bump the cleancount since my last commit changed the
	  channel structure. ........

	* channels/chan_zap.c, channels/chan_local.c, main/frame.c, /,
	  channels/chan_sip.c, channels/chan_agent.c,
	  include/asterisk/channel.h, channels/chan_gtalk.c,
	  channels/chan_iax2.c, channels/chan_oss.c, main/rtp.c,
	  main/channel.c, channels/chan_jingle.c, channels/chan_phone.c,
	  channels/chan_misdn.c, channels/chan_skinny.c,
	  channels/chan_features.c, channels/chan_h323.c,
	  channels/chan_alsa.c, channels/chan_mgcp.c: Merged revisions
	  51311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51311 | russell | 2007-01-19 11:49:38 -0600 (Fri, 19 Jan 2007) |
	  23 lines Merge the changes from the /team/group/vldtmf_fixup
	  branch. The main bug being addressed here is a problem introduced
	  when two SIP channels using SIP INFO dtmf have their media
	  directly bridged. So, when a DTMF END frame comes into Asterisk
	  from an incoming INFO message, Asterisk would try to emulate a
	  digit of some length by first sending a DTMF BEGIN frame and
	  sending a DTMF END later timed off of incoming audio. However,
	  since there was no audio coming in, the DTMF_END was never
	  generated. This caused DTMF based features to no longer work. To
	  fix this, the core now knows when a channel doesn't care about
	  DTMF BEGIN frames (such as a SIP channel sending INFO dtmf). If
	  this is the case, then Asterisk will not emulate a digit of some
	  length, and will instead just pass through the single DTMF END
	  event. Channel drivers also now get passed the length of the
	  digit to their digit_end callback. This improves SIP INFO support
	  even further by enabling us to put the real digit duration in the
	  INFO message instead of a hard coded 250ms. Also, for an incoming
	  INFO message, the duration is read from the frame and passed into
	  the core instead of just getting ignored. (issue #8597, maybe
	  others...) ........

2007-01-19 18:00 +0000 [r51308-51312]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/strings.h: As the comment in the diff says:
	  AST_INLINE_API() is a macro that takes a block of code as an
	  argument. Using preprocessor #directives in the argument is not
	  supported by all compilers, and it is a bit of an obfuscation
	  anyways, so avoid it. As a workaround, define a macro that
	  produces either its argument or nothing, and use that instead of
	  #ifdef/#endif within the argument to AST_INLINE_API().

	* main/rtp.c: in the interest of portability, avoid using %zd when
	  all we need is to print is an integer that fits in 16 bits.

	* channels/chan_iax2.c: sizeof() is compatible with format %d so
	  don't be too picky on printf formats.

	* channels/chan_zap.c: remove variable declaration in the middle of
	  a block

2007-01-19 17:19 +0000 [r51303-51305]  Russell Bryant <russell@digium.com>

	* configure, include/asterisk/autoconfig.h.in: Regenerate configure
	  script to reflect recent zaptel changes

	* include/asterisk/zapata.h: Include tonezone.h for linux, too

	* main/asterisk.c: Merged revisions 51302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51302 | russell | 2007-01-19 10:56:17 -0600
	  (Fri, 19 Jan 2007) | 12 lines Merged revisions 51300 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51300 | russell | 2007-01-19 10:44:09 -0600 (Fri, 19
	  Jan 2007) | 4 lines Fix a memory leak on command line tab
	  completion. The container for the matches was freed, but the
	  individual matches themselves were not. (issue #8851, arkadia)
	  ........ ................

2007-01-19 16:51 +0000 [r51297-51301]  Luigi Rizzo <rizzo@icir.org>

	* main/Makefile: forgot to add AST_LIBS += $(BKTR_LIB)

	* main/channel.c: include "asterisk/zapata.h" to get the zaptel
	  headers. this should be the last one left around...

	* channels/chan_zap.c: whoops, fix a cut&paste error...

	* channels/chan_zap.c: slight change to the initialization of a
	  structure, also using '\0' to make it clear we need a (char)0

2007-01-19 16:30 +0000 [r51296]  Russell Bryant <russell@digium.com>

	* main/manager.c: Break out of the config processing loop for
	  manager.conf once the correct user has been found so that 'cat'
	  is non-NULL. This way, users.conf is only checked when necessary.
	  (issue #8852, akohlsmith, committed patch a bit different)

2007-01-19 16:28 +0000 [r51285-51295]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_zap.c: include "asterisk/zapata.h" to get the
	  zaptel headers.

	* codecs/codec_zap.c: include "asterisk/zapata.h" to get the zaptel
	  headers

	* apps/app_meetme.c: include "asterisk/zapata.h" instead of testing
	  for the location of the header files. On passing, add a cast to
	  insure -Werror clean compilation on FreeBSD 6.x, where time_t
	  does not match %ld

	* apps/app_zapbarge.c, apps/app_flash.c, apps/app_zapscan.c,
	  apps/app_zapras.c, res/res_musiconhold.c, channels/chan_iax2.c,
	  apps/app_rpt.c: include "asterisk/zapata.h" instead of looking
	  directly for the zaptel.h and tonezone.h

	* configure.ac: another freebsd-specific check for zaptel
	  compatibility

	* include/asterisk/zapata.h (added): Add a stub file to find the
	  zaptel headers in the right place, rather than repeating the
	  check on every single file. Changes to the individual files are
	  coming. The header file name has been suggested by kevin.
	  Approved by: kpfleming

	* makeopts.in: forgot to add BKTR_INCLUDE and BKTR_LIB in
	  makeopts.in

	* configure.ac: add comments that AC_USE_SYSTEM_EXTENSIONS and
	  AST_PROG_LD do not work on FreeBSD - presumably they depend on
	  some auto* feature that is not installed by default. I am not
	  sure on what is a proper fix. In my local copy i simply comment
	  them out. The AST_PROG_LD is a long standing isse, there were
	  attempts to fix it in the past but probably not enough has been
	  copied to acinclude.m4, and i had forgotten about it because i
	  commented out this call in configure.ac long ago

	* configure.ac: Add check for backtrace support on platforms that
	  do not have it natively. Part of it leaked in in a previous
	  commit.

	* configure.ac: remove a useless (and harmful on some platforms)
	  -lnsl from IKSEMEL_LIB. Actually i am not even sure whether
	  -lgcrypt -lgpg-error are needed.

	* configure.ac: simplify checking for zaptel version and location
	  (for linux, this is functionally equivalent to the previous
	  method; for FreeBSD, it re-adds inspection in $PREFIX/zaptel.h).
	  Please wait to regenerate the "configure" file as i have another
	  few pending changes to configure.ac Not applicable to 1.4 until
	  acinclude.m4 is also updated.

2007-01-19 00:28 +0000 [r51273-51275]  Dwayne M. Hubbard <dhubbard@digium.com>

	* channels/chan_zap.c, /: Merged revisions 51274 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51274 | dhubbard | 2007-01-18 18:17:32 -0600 (Thu, 18 Jan 2007)
	  | 3 lines chan_zap compiles without libpri after committing 7877
	  patch ........

	* channels/chan_zap.c, /: Merged revisions 51272 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51272 | dhubbard | 2007-01-18 17:56:49 -0600
	  (Thu, 18 Jan 2007) | 11 lines Merged revisions 51271 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51271 | dhubbard | 2007-01-18 17:47:10 -0600 (Thu, 18
	  Jan 2007) | 3 lines issue 7877: chan_zap module reload does not
	  use default/initialized values on subsequent loads. Reset
	  configuration variables to default values prior to parsing
	  configuration file. ........ ................

2007-01-18 22:56 +0000 [r51266]  Jason Parker <jparker@digium.com>

	* main/pbx.c, /, funcs/func_strings.c, apps/app_voicemail.c: Merged
	  revisions 51265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51265 | qwell | 2007-01-18 16:50:23 -0600 (Thu, 18 Jan 2007) | 4
	  lines Add some more checks for option_debug before
	  ast_log(LOG_DEBUG, ...) calls. Issue 8832, patch(es) by tgrman
	  ........

2007-01-18 21:57 +0000 [r51263]  Russell Bryant <russell@digium.com>

	* Makefile, /, configure, main/Makefile, acinclude.m4, makeopts.in:
	  Merged revisions 51262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51262 | russell | 2007-01-18 15:54:23 -0600 (Thu, 18 Jan 2007) |
	  5 lines Ensure that the locations given to the Asterisk configure
	  script for ncurses, curses, termcap, or tinfo are further passed
	  along to the editline configure script. This fixes some
	  cross-compilation environments. (issue #8637, reported by ovi,
	  patch by me) ........

2007-01-18 21:15 +0000 [r51257]  Tilghman Lesher <tlesher@digium.com>

	* /, main/stdtime/localtime.c: Merged revisions 51256 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51256 | tilghman | 2007-01-18 15:14:24 -0600
	  (Thu, 18 Jan 2007) | 10 lines Merged revisions 51255 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51255 | tilghman | 2007-01-18 15:11:34 -0600 (Thu, 18
	  Jan 2007) | 2 lines If a timezone is not specified, assume
	  localtime (instead of gmtime) (Issue #7748) ........
	  ................

2007-01-18 19:19 +0000 [r51252]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_speech_utils.c: Merged revisions 51251 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r51251 | file | 2007-01-18 14:17:34 -0500 (Thu, 18 Jan
	  2007) | 2 lines Only start timeout once we reach the end of the
	  files to play back. ........

2007-01-18 19:03 +0000 [r51249]  Jason Parker <jparker@digium.com>

	* main/cli.c: Fix filename completion for "module load" and "load"
	  CLI commands. Issue 8846

2007-01-18 18:54 +0000 [r51247]  Russell Bryant <russell@digium.com>

	* main/manager.c: Fix trunk version of manager support for
	  users.conf. Now it actually pays attention to the "hasmanager"
	  option. (Thanks to Anthony L. for pointing out that this was
	  broken!)

2007-01-18 18:39 +0000 [r51244]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 51243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51243 | file | 2007-01-18 13:36:35 -0500 (Thu, 18 Jan 2007) | 2
	  lines Copy MOH settings when calling a peer so that if they put
	  someone on hold or get put on hold themselves they get the right
	  music class. (issue #8840 reported by mdu113) ........

2007-01-18 18:36 +0000 [r51242]  Jason Parker <jparker@digium.com>

	* main/channel.c, /: Merged revisions 51241 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51241 | qwell | 2007-01-18 12:28:29 -0600 (Thu, 18 Jan 2007) | 2
	  lines Fix an issue with deprecated commands ........

2007-01-18 17:52 +0000 [r51237]  Tilghman Lesher <tlesher@digium.com>

	* contrib/scripts/vmdb.sql, /: Merged revisions 51236 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51236 | tilghman | 2007-01-18 11:49:41 -0600
	  (Thu, 18 Jan 2007) | 10 lines Merged revisions 51235 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51235 | tilghman | 2007-01-18 11:42:17 -0600 (Thu, 18
	  Jan 2007) | 2 lines Document all the fields, including the
	  indication that "uniqueid" should not be renamed. ........
	  ................

2007-01-18 17:33 +0000 [r51234]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 51233 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51233 | russell | 2007-01-18 11:18:43 -0600 (Thu, 18 Jan 2007) |
	  3 lines Make the "hasmanager" option in users.conf actually have
	  an effect. (issue #8740, LnxPrgr3) ........

2007-01-18 06:59 +0000 [r51221]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/chan_h323.c: Update ast_append_ha() usage

2007-01-18 05:24 +0000 [r51212-51215]  Joshua Colp <jcolp@digium.com>

	* apps/app_page.c, CHANGES: Add 's' option to Page application
	  which checks devicestate before dialing. (issue #8673 reported by
	  sunder)

	* /, apps/app_voicemail.c: Merged revisions 51213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51213 | file | 2007-01-17 19:48:55 -0500 (Wed, 17 Jan 2007) | 2
	  lines Build the IMAP remote directory string better and properly.
	  Fix an issue with encoding the GSM voicemail when attaching to
	  the voicemail. (issue #8808 reported by akohlsmith) ........

	* /, main/rtp.c: Merged revisions 51211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51211 | file | 2007-01-17 19:18:44 -0500 (Wed, 17 Jan 2007) | 2
	  lines Pass data as well for hold/unhold/vidupdate frames. (issue
	  #8840 reported by mdu113) ........

2007-01-17 23:35 +0000 [r51199-51207]  Russell Bryant <russell@digium.com>

	* /, funcs/func_odbc.c: Merged revisions 51205 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51205 | russell | 2007-01-17 17:31:11 -0600 (Wed, 17 Jan 2007) |
	  5 lines Fix some instances where when loading func_odbc, a
	  double-free could occur. Also, remove an unneeded error message.
	  If the failure condition is actually a memory allocation failure,
	  a log message will already be generated automatically. ........

	* channels/chan_zap.c, /: Merged revisions 51204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51204 | russell | 2007-01-17 16:09:52 -0600 (Wed, 17 Jan 2007) |
	  4 lines Instead of dividing the offset by 2 directly, make it
	  more clear that the offset is being scaled by the size of the
	  elements in the buffer. (Inspired by a discussing on the
	  asterisk-dev list about this code) ........

	* /, channels/chan_sip.c: Merged revisions 51198 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51198 | russell | 2007-01-17 15:18:35 -0600
	  (Wed, 17 Jan 2007) | 11 lines Merged revisions 51197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51197 | russell | 2007-01-17 15:17:21 -0600 (Wed, 17
	  Jan 2007) | 3 lines Move the check for a failure of
	  ast_channel_alloc() to before locking the pvt structure again.
	  Otherwise, on a failure, this will cause a deadlock. ........
	  ................

2007-01-17 20:57 +0000 [r51196]  Tilghman Lesher <tlesher@digium.com>

	* /, main/utils.c: Merged revisions 51195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51195 | tilghman | 2007-01-17 14:56:15 -0600
	  (Wed, 17 Jan 2007) | 12 lines Merged revisions 51194 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51194 | tilghman | 2007-01-17 14:52:21 -0600 (Wed, 17
	  Jan 2007) | 4 lines When ast_strip_quoted was called with a
	  zero-length string, it would treat a NULL as if it were the
	  quoting character (and would thus return the string in memory
	  immediately following the passed-in string). ........
	  ................

2007-01-17 19:43 +0000 [r51193]  Joshua Colp <jcolp@digium.com>

	* main/channel.c: Don't hold channel lock while sleeping/waiting
	  for audio stream to get setup. (issue #8834 reported by phsultan)

2007-01-17 17:37 +0000 [r51189]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 51186 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51186 | qwell | 2007-01-17 11:36:53 -0600 (Wed, 17 Jan 2007) | 2
	  lines re-add "password" for realtime voicemail ........

2007-01-17 06:37 +0000 [r51183]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 51182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51182 | file | 2007-01-17 01:36:41 -0500 (Wed, 17 Jan 2007) | 2
	  lines Return the correct result when directly writing out a
	  packet so that the core doesn't then decide to handle it the
	  regular way again. (issue #8833 reported by rcourtna) ........

2007-01-17 01:30 +0000 [r51177]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 51176 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51176 | kpfleming | 2007-01-16 19:29:12 -0600 (Tue, 16 Jan 2007)
	  | 2 lines a few more coding style cleanups and one bug fix (from
	  AnthonyL) ........

2007-01-17 00:50 +0000 [r51173]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 51172 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51172 | file | 2007-01-16 19:46:29 -0500 (Tue, 16 Jan 2007) | 2
	  lines Move rescheduling of lagrq/pings into the scheduler
	  callback. ........

2007-01-17 00:22 +0000 [r51166-51171]  Jason Parker <jparker@digium.com>

	* /, main/rtp.c: Merged revisions 51170 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51170 | qwell | 2007-01-16 18:20:56 -0600 (Tue, 16 Jan 2007) | 4
	  lines Fix issue with dtmf continuation packets when the dtmf
	  digit is 0... Issue 8831 ........

	* contrib/scripts/vmdb.sql, /, apps/app_voicemail.c: Merged
	  revisions 51167 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51167 | qwell | 2007-01-16 16:50:19 -0600 (Tue, 16 Jan 2007) | 6
	  lines Fix an issue with IMAP storage and realtime voicemail. Also
	  update the vmdb sql script for IMAP specific options. Issue 8819,
	  initial patches by bsmithurst (slightly modified by me) ........

	* /, doc/voicemail_odbc_postgresql.txt: Merged revisions 51165 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51165 | qwell | 2007-01-16 16:07:53 -0600 (Tue, 16 Jan 2007) | 2
	  lines change documentation to reflect new procedure in 1.4/trunk
	  ........

2007-01-16 21:52 +0000 [r51160-51163]  Tilghman Lesher <tlesher@digium.com>

	* /, doc/voicemail_odbc_postgresql.txt (added): Merged revisions
	  51162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51162 | tilghman | 2007-01-16 15:51:15 -0600
	  (Tue, 16 Jan 2007) | 10 lines Merged revisions 51161 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51161 | tilghman | 2007-01-16 15:50:04 -0600 (Tue, 16
	  Jan 2007) | 2 lines Add documentation walkthrough on getting
	  Postgres to work with voicemail (from Issue 8513) ........
	  ................

	* /, apps/app_voicemail.c: Merged revisions 51159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51159 | tilghman | 2007-01-16 15:28:39 -0600
	  (Tue, 16 Jan 2007) | 10 lines Merged revisions 51158 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r51158 | tilghman | 2007-01-16 15:26:06 -0600 (Tue, 16
	  Jan 2007) | 2 lines Postgres driver doesn't like a NULL pointer
	  when retrieving the length (Bug 8513) ........ ................

2007-01-16 19:01 +0000 [r51155]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_voicemail.c: remove pointless DEBUG message (watch those
	  patch merges, people!)

2007-01-16 17:50 +0000 [r51152]  Joshua Colp <jcolp@digium.com>

	* res/res_features.c, CHANGES, configs/features.conf.sample: Add
	  parkedcalltransfers option for res_features. This basically
	  enables/disables DTMF based transfers. If you want to get former
	  behavior you will have to make sure it is enabled.

2007-01-16 17:47 +0000 [r51151]  Matt O'Gorman <mogorman@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 51150 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ........ r51150
	  | mogorman | 2007-01-16 11:46:12 -0600 (Tue, 16 Jan 2007) | 2
	  lines minor things i missed before i get jumped on ........

2007-01-16 17:42 +0000 [r51149]  Joshua Colp <jcolp@digium.com>

	* /, res/res_features.c: Merged revisions 51148 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51148 | file | 2007-01-16 12:39:50 -0500 (Tue,
	  16 Jan 2007) | 10 lines Merged revisions 51145 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r51145 | file | 2007-01-16 12:36:50 -0500 (Tue, 16 Jan 2007) | 2
	  lines Return previous behavior. ParkedCalls will be able to do
	  DTMF based transfers again. trunk however will get an option to
	  allow this to be set on/off. (issue #8804 reported by nortex)
	  ........ ................

2007-01-16 17:39 +0000 [r51147]  Jason Parker <jparker@digium.com>

	* /, main/file.c: Merged revisions 51146 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51146 | qwell | 2007-01-16 11:36:53 -0600 (Tue, 16 Jan 2007) | 6
	  lines Display more useful output when streaming files. Include
	  the channel name to which the file is being played. Issue 8828,
	  patch by junky. ........

2007-01-16 17:23 +0000 [r51144]  Joshua Colp <jcolp@digium.com>

	* channels/chan_phone.c, configs/phone.conf.sample, CHANGES: Add
	  support for G729 passthrough with Sigma Designs boards. (issue
	  #8829 reported by ywalther)

2007-01-16 08:38 +0000 [r51123]  Tilghman Lesher <tlesher@digium.com>

	* channels/iax2-parser.h, channels/iax2.h, channels/chan_iax2.c,
	  channels/iax2-parser.c: IAX2 remote variables - Bug 7619

2007-01-16 05:56 +0000 [r51090]  Joshua Colp <jcolp@digium.com>

	* channels/chan_zap.c, /: Merged revisions 51087 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r51087 | file | 2007-01-16 00:55:23 -0500 (Tue,
	  16 Jan 2007) | 10 lines Merged revisions 51085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r51085 | file | 2007-01-16 00:53:31 -0500 (Tue, 16 Jan 2007) | 2
	  lines Add none as a valid callgroup/pickupgroup option. I
	  consider it a bug that it would inherit it all the way down and
	  not have any way to reset it to nothing - so that's why it is in
	  1.2. (issue #8296 reported by gkloepfer) ........
	  ................

2007-01-16 01:20 +0000 [r51058-51060]  Russell Bryant <russell@digium.com>

	* configs/osp.conf.sample: Fix a couple of typos in the sample
	  osp.conf.

	* /, main/config.c: Merged revisions 51057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r51057 | russell | 2007-01-15 19:15:44 -0600 (Mon, 15 Jan 2007) |
	  3 lines It is possible for the config pointer to be NULL here, so
	  it needs to be checked before dereferencing it. ........

2007-01-16 00:29 +0000 [r51031]  Matt O'Gorman <mogorman@digium.com>

	* configs/users.conf.sample, /, apps/app_voicemail.c: Patch allows
	  for changing voicemail password in users.conf from voicemail
	  main, written by AnthonyL bug #8436

2007-01-15 23:51 +0000 [r50995]  Russell Bryant <russell@digium.com>

	* /, Makefile.rules: Merged revisions 50994 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50994 | russell | 2007-01-15 17:49:48 -0600 (Mon, 15 Jan 2007) |
	  2 lines Filter out a few CFLAGS that are not valid CXXFLAGS.
	  ........

2007-01-15 21:12 +0000 [r50958]  Matt O'Gorman <mogorman@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 50957 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ................
	  r50957 | mogorman | 2007-01-15 15:08:07 -0600 (Mon, 15 Jan 2007)
	  | 12 lines Merged revisions 50946 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.2 ........ r50946
	  | mogorman | 2007-01-15 14:44:53 -0600 (Mon, 15 Jan 2007) | 4
	  lines Solves issue with forwarding voicemails from folders other
	  than inbox. patch by anthonyl. ........ ................

2007-01-15 18:24 +0000 [r50922]  Jason Parker <jparker@digium.com>

	* /: These deprecated functions were removed in trunk on purpose.
	  No need to re-add.

2007-01-15 16:40 +0000 [r50896]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, /: Merged revisions 50895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50895 | file | 2007-01-15 11:36:07 -0500 (Mon, 15 Jan 2007) | 2
	  lines Move event processing into do_message so that it gets
	  executed again when events are tripped. ........

2007-01-15 15:08 +0000 [r50868-50869]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, main/Makefile,
	  configure.ac, Makefile.rules, acinclude.m4, makeopts.in: Merged
	  revisions 50867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50867 | kpfleming | 2007-01-15 09:03:06 -0600 (Mon, 15 Jan 2007)
	  | 2 lines use the ACX_PTHREAD macro from the Autoconf macro
	  archive for setting up compiler pthreads support... should
	  improve portability to platforms with unusual pthreads
	  requirements ........

	* codecs/g722: ignore dependency files in this directory

2007-01-15 02:28 +0000 [r50847]  Tilghman Lesher <tlesher@digium.com>

	* channels/chan_oss.c: Feature: allow soundcard to be used in both
	  modes (autoanswer and not), selectable by how it is called in the
	  dialplan. This allows a speaker system hooked up to the soundcard
	  to be used for both ring notification, as well as paging.

2007-01-14 22:00 +0000 [r50821]  Joshua Colp <jcolp@digium.com>

	* /, main/astmm.c: Merged revisions 50820 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50820 | file | 2007-01-14 16:59:05 -0500 (Sun, 14 Jan 2007) | 2
	  lines Add missing newlines for two memory CLI commands. ........

2007-01-14 05:34 +0000 [r50783-50784]  Tilghman Lesher <tlesher@digium.com>

	* main/config.c: Bug 8803 - Fix crash in API

	* /, main/db1-ast/hash/hsearch.c, main/db1-ast/btree/bt_page.c,
	  main/db1-ast/recno/rec_search.c, main/db1-ast/btree/bt_get.c,
	  main/db1-ast/hash/hash.c, main/db1-ast/db/db.c,
	  main/db1-ast/recno/rec_get.c, main/db1-ast/btree/bt_seq.c,
	  main/db1-ast/hash/hash_func.c, main/db1-ast/btree/bt_utils.c,
	  main/db1-ast/recno/rec_seq.c, main/db1-ast/btree/bt_overflow.c,
	  main/db1-ast/btree/bt_search.c, main/db1-ast/btree/bt_conv.c,
	  main/db1-ast/btree/bt_close.c, main/db1-ast/btree/bt_put.c,
	  main/db1-ast/recno/rec_utils.c, main/db1-ast/hash/hash_bigkey.c,
	  main/db1-ast/recno/rec_open.c, main/db1-ast/recno/rec_delete.c,
	  main/db1-ast/hash/hash_buf.c, main/db1-ast/hash/hash_page.c,
	  main/db1-ast/recno/rec_close.c, main/db1-ast/recno/rec_put.c,
	  main/db1-ast/include/ndbm.h, main/db1-ast/btree/bt_debug.c,
	  main/db1-ast/mpool/mpool.c, main/db1-ast/btree/bt_split.c,
	  main/db1-ast/btree/bt_open.c, main/db1-ast/btree/bt_delete.c,
	  main/db1-ast/hash/hash_log2.c: Merged revisions 50782 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r50782 | tilghman | 2007-01-13 23:13:47 -0600
	  (Sat, 13 Jan 2007) | 10 lines Merged revisions 50781 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r50781 | tilghman | 2007-01-13 23:01:16 -0600 (Sat, 13
	  Jan 2007) | 2 lines Bug 8814 - db should look for its header
	  using a relative path, instead of the system path (Fixes FreeWRT)
	  ........ ................

2007-01-13 16:47 +0000 [r50755]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, build_tools/make_sample_voicemail (added): Merged
	  revisions 50754 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50754 | kpfleming | 2007-01-13 10:45:37 -0600 (Sat, 13 Jan 2007)
	  | 2 lines when building the sample greetings for maibox
	  1234@default during 'make samples', build a greeting for each
	  language and file format the user selected to install with
	  menuselect (reported by Brian Capouch on asterisk-dev) ........

2007-01-13 06:01 +0000 [r50675-50728]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 50727 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50727 | file | 2007-01-13 01:00:24 -0500 (Sat, 13 Jan 2007) | 2
	  lines Only write a frame out to the channel if one exists. There
	  are cases where one may not and would therefore cause the channel
	  driver to segfault. (issue #8434 reported by slimey) ........

	* channels/chan_sip.c: Get rid of unneeded code, fix a spelling
	  mistake, and use registry state a bit more. (issue #8402 reported
	  by rizzo)

	* configs/iax.conf.sample: Clarify what the trunkmaxsize value is
	  in (bytes).

	* configs/iax.conf.sample, CHANGES, channels/chan_iax2.c: Drop
	  trunkrealloc option and just have the maximum size be a
	  configurable option. This is per Kevin's comments on -dev and my
	  own thoughts after I put the previous option in.

	* channels/chan_sip.c: Ensure error variable is set to 0 or else we
	  might get false error messages. (issue #8798 reported by tootai,
	  fix by anthonyl)

	* configs/iax.conf.sample, CHANGES, channels/chan_iax2.c: Merge in
	  trunkrealloc option for chan_iax2. (issue #8267 reported by
	  marcodmb, branch by anthonyl)

	* /, res/res_snmp.c: Merged revisions 50674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50674 | file | 2007-01-12 22:04:55 -0500 (Fri, 12 Jan 2007) | 2
	  lines Only join the snmp thread on an unload if the thread is
	  actually running. (issue #8810 reported by junky) ........

2007-01-12 19:25 +0000 [r50648]  Jason Parker <jparker@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 50647 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50647 | qwell | 2007-01-12 13:24:40 -0600 (Fri, 12 Jan 2007) | 2
	  lines Update documentation to state that you shouldn't use
	  realtime static with voicemail.conf ........

2007-01-12 18:13 +0000 [r50603-50629]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: Exit from session loop upon error (ie: they
	  disconnected) and don't do any buffer manipulation in do_message.
	  get_input will handle it.

	* main/manager.c, /: Merged revisions 50602 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50602 | file | 2007-01-12 11:42:33 -0500 (Fri, 12 Jan 2007) | 2
	  lines We need to check for res being 0 in do_message itself,
	  otherwise our headers will get lost. ........

2007-01-12 15:01 +0000 [r50538-50571]  Kevin P. Fleming <kpfleming@digium.com>

	* main/channel.c, main/pbx.c, include/asterisk/channel.h: make the
	  automatic post-answer delay happen only when the answer is
	  'automatic' (not done by the Answer() dialplan application)

	* main/pbx.c, /: Merged revisions 50562 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r50562 | kpfleming | 2007-01-12 08:42:24 -0600
	  (Fri, 12 Jan 2007) | 10 lines Merged revisions 50561 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r50561 | kpfleming | 2007-01-12 08:34:15 -0600 (Fri, 12
	  Jan 2007) | 2 lines minor documentation clarification ........
	  ................

	* main/channel.c: when a channel gets automatically answered by an
	  application, sleep a bit to give the audio path (for VOIP
	  channels) time to be setup

2007-01-11 05:54 +0000 [r50378-50469]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 50468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50468 | file | 2007-01-11 00:53:09 -0500 (Thu, 11 Jan 2007) | 2
	  lines Remove check for channel state as it can definitely be
	  something other then ring, and also clean up the code a bit. This
	  should solve the parking issues and maybe some attended transfer
	  issues people have been seeing. ........

	* /, channels/chan_sip.c, include/asterisk/rtp.h, main/rtp.c:
	  Merged revisions 50466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50466 | file | 2007-01-11 00:19:39 -0500 (Thu, 11 Jan 2007) | 2
	  lines Add support to see whether NAT was detected (yay symmetric
	  RTP) and also add a check in chan_sip so that if NAT has been
	  detected and the reinvite behind nat option has been turned off,
	  then just do partial bridge. (issue #8655 reported by mnicholson)
	  ........

	* /, apps/app_speech_utils.c: Merged revisions 50433 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r50433 | file | 2007-01-10 15:25:44 -0500 (Wed, 10 Jan
	  2007) | 2 lines Merge speech-multi branch which adds support for
	  joining multiple sound files together to be played one after
	  another in SpeechBackground. ........

	* /, main/config.c: Merged revisions 50405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50405 | file | 2007-01-10 14:46:29 -0500 (Wed, 10 Jan 2007) | 2
	  lines Fix parsing when using something like ldap settings. (done
	  by anthonyl) ........

	* include/asterisk/strings.h: Return the useless casts that ensure
	  this file is C++ clean. (issue #8602 reported by mikma)

	* /, channels/chan_sip.c: Merged revisions 50377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50377 | file | 2007-01-10 13:32:29 -0500 (Wed, 10 Jan 2007) | 2
	  lines Fix chan_sip not working issue. Let's not prematurely
	  return 0. (issue #8783 reported by st41ker) ........

2007-01-10 16:47 +0000 [r50347]  Jason Parker <jparker@digium.com>

	* /, cdr/cdr_manager.c: Merged revisions 50346 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50346 | qwell | 2007-01-10 10:45:36 -0600 (Wed, 10 Jan 2007) | 4
	  lines Reverse some logic in cdr_manager, which made it fail to
	  load if the config file existed. Issue 8777 ........

2007-01-10 04:56 +0000 [r50267-50302]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, /: Merged revisions 50298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r50298 | file | 2007-01-09 23:55:13 -0500 (Tue,
	  09 Jan 2007) | 10 lines Merged revisions 50295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r50295 | file | 2007-01-09 23:51:06 -0500 (Tue, 09 Jan 2007) | 2
	  lines Add another return value to dial_exec_full that indicates
	  execution is going to continuing at a new
	  extension/context/priority and to just let it slide. (issue #8598
	  reported by jon) ........ ................

	* channels/chan_zap.c: Allow usedistinctiveringdetection and
	  distinctiveringaftercid to be reset during a reload. (issue #8739
	  reported by tzafrir)

	* main/pbx.c, /: Merged revisions 50266 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50266 | file | 2007-01-09 22:51:29 -0500 (Tue, 09 Jan 2007) | 2
	  lines Ensure data's existence before trying to access it. (issue
	  #8774 reported by rcourtna) ........

2007-01-10 02:50 +0000 [r50229-50230]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Covert some spaces to tabs, and put a list
	  of defines in an enum.

	* Makefile, /: Merged revisions 50228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r50228 | russell | 2007-01-09 21:17:46 -0500
	  (Tue, 09 Jan 2007) | 14 lines Merged revisions 50227 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r50227 | russell | 2007-01-09 21:16:45 -0500 (Tue, 09
	  Jan 2007) | 6 lines Make the number that represents the major
	  version number a single digit instead of 2. Using two digits
	  makes it an octal number when put into version.h, which breaks
	  the compilation of any out of tree module that checks the version
	  for any version after 1.2.7 (reported by Matteo Brancaleoni on
	  the asterisk-dev mailing list, who gave credit to vihai for
	  pointing it out) ........ ................

2007-01-09 13:45 +0000 [r50152]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 50151 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r50151 | tilghman | 2007-01-09 07:40:45 -0600
	  (Tue, 09 Jan 2007) | 12 lines Merged revisions 50150 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r50150 | tilghman | 2007-01-09 07:30:04 -0600 (Tue, 09
	  Jan 2007) | 4 lines The advent of realtime has enabled people to
	  use commas in the fullname field. This could cause an issue with
	  sending voicemails, when the field is unquoted. (Issue 8595)
	  ........ ................

2007-01-09 12:25 +0000 [r50132]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Based on the following patch, changed for
	  trunk... Merged revisions 50124 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50124 | oej | 2007-01-09 12:25:20 +0100 (Tue, 09 Jan 2007) | 3
	  lines - handle re-invites properly in sip_hangup() - Add some
	  invitestate status changes just to be sure ........

2007-01-08 23:40 +0000 [r50099]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 50098 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50098 | qwell | 2007-01-08 17:39:12 -0600 (Mon, 08 Jan 2007) | 4
	  lines Fix an issue with voicemail and users.conf, where it
	  wouldn't ever parse a password, since it was using "secret"
	  instead of "password" Issue 8761, reported by and patch
	  suggestion from ssokol. ........

2007-01-08 21:40 +0000 [r50075]  Joshua Colp <jcolp@digium.com>

	* codecs/codec_zap.c: Move channel acquisition to when the
	  translation path is setup, and clean up.

2007-01-08 21:17 +0000 [r50074]  Matt O'Gorman <mogorman@digium.com>

	* /, apps/app_senddtmf.c: Merged revisions 50073 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ........ r50073
	  | mogorman | 2007-01-08 15:11:16 -0600 (Mon, 08 Jan 2007) | 1
	  line we can't unlock a channel if we cant find it. - AnthonyL bug
	  #8741 ........

2007-01-08 20:10 +0000 [r50033-50056]  Joshua Colp <jcolp@digium.com>

	* main/rtp.c: Make callback declaration match one used in trunk.

	* include/asterisk/lock.h: Change trylock output for what already
	  has the lock from an error to a warning.

	* /, main/rtp.c: Merged revisions 50032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50032 | file | 2007-01-08 13:21:31 -0500 (Mon, 08 Jan 2007) | 2
	  lines Disable the more intense packet2packet bridging until the
	  bugs can be worked out. ........

2007-01-08 14:31 +0000 [r49931-50007]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 50006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r50006 | oej | 2007-01-08 15:26:14 +0100 (Mon, 08 Jan 2007) | 11
	  lines Issue #8677 - Handle failure of T.38 re-invite This is not
	  a fix, but adding an error message to tell the admin that we have
	  a bad configuration. We should not send T.38 re-invites to
	  devices that can't handle it (with the current architecture where
	  you have to hard-code t.38 support per device). To really fix
	  this, we need to figure out a way to tell the incoming call that
	  the re-invite failed, so we can signal failure on that end and go
	  back to the original call. ........

	* /, channels/chan_sip.c: Merged revisions 49983 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49983 | oej | 2007-01-08 14:28:18 +0100 (Mon, 08 Jan 2007) | 3
	  lines Issue #8524, support multiple via header values (tardieu)
	  Thanks! ........

	* main/frame.c, include/asterisk/frame.h, main/rtp.c: Issue #8663 -
	  Add passthrough support for MPEG4 (neutrino88).

	* /, channels/chan_sip.c: Merged revisions 49945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49945 | oej | 2007-01-08 10:08:10 +0100 (Mon, 08 Jan 2007) | 2
	  lines We only need one forward declaration ........

	* /, channels/chan_sip.c: Merged revisions 49925 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49925 | oej | 2007-01-08 09:55:03 +0100 (Mon, 08 Jan 2007) | 2
	  lines Issue 8735: Terminate state when extension is unavailable
	  for subscription ........

2007-01-08 05:13 +0000 [r49891]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 49890 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r49890 | file | 2007-01-08 00:11:54 -0500 (Mon,
	  08 Jan 2007) | 10 lines Merged revisions 49889 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r49889 | file | 2007-01-08 00:10:07 -0500 (Mon, 08 Jan 2007) | 2
	  lines Ensure we use the default refresh value of 60 if the remote
	  server does not send one. (issue #8746 reported by maethor)
	  ........ ................

2007-01-08 03:56 +0000 [r49870]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, configure.ac: Merged revisions 49866 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r49866 | kpfleming | 2007-01-07 21:53:53 -0600 (Sun, 07
	  Jan 2007) | 2 lines since we use AC_PATH_TOOL to find tools, we
	  should use the results it provides for us (reported by Brian
	  Capouch on the asterisk-dev list) ........

2007-01-07 21:46 +0000 [r49832-49835]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_dictate.c: Merged revisions 49834 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r49834 | tilghman | 2007-01-07 15:44:52 -0600
	  (Sun, 07 Jan 2007) | 10 lines Merged revisions 49833 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r49833 | tilghman | 2007-01-07 15:43:10 -0600 (Sun, 07
	  Jan 2007) | 2 lines If openstream fails, then we crash (Issue
	  8564) ........ ................

	* /, channels/chan_sip.c: Merged revisions 49831 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49831 | tilghman | 2007-01-07 15:24:04 -0600 (Sun, 07 Jan 2007)
	  | 2 lines Second condition was a subset of the first, so hold was
	  never decremented, thus hint stayed stuck (Issue 8747) ........

2007-01-07 19:00 +0000 [r49816]  Joshua Colp <jcolp@digium.com>

	* funcs/func_base64.c, funcs/func_blacklist.c,
	  funcs/func_callerid.c: One const, two const. Let's stick with
	  everything else - one const. Plus older versions of GCC don't
	  support double const either.

2007-01-07 16:21 +0000 [r49784-49801]  Tilghman Lesher <tlesher@digium.com>

	* res/res_config_odbc.c, include/asterisk/config.h,
	  res/res_realtime.c, main/config.c, funcs/func_realtime.c: When
	  calling the Realtime app more than once, unset fields which were
	  previously set are erroneously still set (Bug 6701). After
	  discussion, it was determined this should only be changed in
	  trunk.

	* funcs/func_shell.c, funcs/func_strings.c, funcs/func_cut.c:
	  Modifications to allow the output of SHELL() to be split per line
	  (Issue 8676)

	* funcs/func_shell.c (added): Add function to execute a shell
	  command and return the output (Issue 8676)

	* main/channel.c: Reduce duplication of code (Issue 6542)

2007-01-07 07:43 +0000 [r49769]  Jason Parker <jparker@digium.com>

	* main/indications.c: Fix a segfault when using "countries" that
	  don't have a matching zone.

2007-01-06 00:28 +0000 [r49743]  Jason Parker <jparker@digium.com>

	* main/pbx.c, /, res/res_features.c, pbx/pbx_config.c: Merged
	  revisions 49742 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49742 | qwell | 2007-01-05 18:24:38 -0600 (Fri, 05 Jan 2007) | 7
	  lines Save 1 whopping byte of allocated memory! This looks like
	  it may have been a chicken/egg scenario.. You had to call a
	  cleanup func, because everything was allocated. Then since you
	  had to call a cleanup func, you were forced to allocate - ie;
	  strdup(""). ........

2007-01-06 00:13 +0000 [r49727-49741]  Kevin P. Fleming <kpfleming@digium.com>

	* funcs/func_base64.c, funcs/func_rand.c, funcs/func_md5.c,
	  funcs/func_db.c, channels/chan_zap.c, funcs/func_module.c,
	  funcs/func_version.c, funcs/func_timeout.c, funcs/func_env.c,
	  funcs/func_strings.c, funcs/func_math.c, funcs/func_vmcount.c,
	  funcs/func_cut.c, include/asterisk/channel.h, funcs/func_sha1.c,
	  funcs/func_logic.c, funcs/func_uri.c, funcs/func_global.c,
	  funcs/func_realtime.c, funcs/func_enum.c, funcs/func_curl.c,
	  funcs/func_groupcount.c, funcs/func_odbc.c,
	  funcs/func_blacklist.c, funcs/func_cdr.c, funcs/func_channel.c,
	  funcs/func_callerid.c: finish const-ifying ast_func_read()

	* main/manager.c: probably shouldn't leave the mmap'ed file hanging
	  around in memory

	* /, configure, acinclude.m4: Merged revisions 49714-49715 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49714 | kpfleming | 2007-01-05 17:49:52 -0600 (Fri, 05 Jan 2007)
	  | 2 lines proper fix for r49712 ........ r49715 | kpfleming |
	  2007-01-05 17:51:31 -0600 (Fri, 05 Jan 2007) | 2 lines one more
	  time... ........

	* main/manager.c, include/asterisk/config.h, main/config.c: a
	  little more const-ification

2007-01-05 23:51 +0000 [r49716]  Joshua Colp <jcolp@digium.com>

	* codecs/codec_zap.c: It is possible for framein to get called and
	  no channel be available, so do a check before we increment the
	  count.

2007-01-05 23:41 +0000 [r49711-49713]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, acinclude.m4: Merged revisions 49712 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r49712 | kpfleming | 2007-01-05 17:40:29 -0600 (Fri, 05
	  Jan 2007) | 2 lines if --with-foo=<path> is specific for a
	  configure option, ensure that it is used for header file checking
	  as well ........

	* main/pbx.c, /, channels/chan_sip.c, channels/chan_agent.c,
	  pbx/pbx_dundi.c, include/asterisk/pbx.h, apps/app_queue.c,
	  channels/chan_iax2.c, main/db.c, apps/app_speech_utils.c,
	  include/asterisk/astdb.h, apps/app_voicemail.c: const-ify some
	  more APIs, and fix rev 49710 from branch-1.4 in a better way here

2007-01-05 23:31 +0000 [r49709]  Matt O'Gorman <mogorman@digium.com>

	* codecs/codec_zap.c: no need to spam everyone with show transcoder
	  messages

2007-01-05 23:17 +0000 [r49706]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, /, codecs/codec_zap.c: Merged revisions
	  49705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49705 | qwell | 2007-01-05 17:16:16 -0600 (Fri, 05 Jan 2007) | 4
	  lines Make codec_zap and chan_zap also depend on zaptel. This
	  fixes an issue (8727) with zaptel being in a different directory,
	  using --with-zaptel. ........

2007-01-05 22:53 +0000 [r49678-49681]  Kevin P. Fleming <kpfleming@digium.com>

	* main/manager.c, /: Merged revisions 49680 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49680 | kpfleming | 2007-01-05 16:52:37 -0600 (Fri, 05 Jan 2007)
	  | 2 lines don't 'consume' the params list before we try to use it
	  again ........

	* main/manager.c: use mmap() to read in the results of the manager
	  action for an HTTP request, instead of reading it into a buffer

	* main/pbx.c, channels/chan_zap.c, /, channels/chan_sip.c,
	  apps/app_meetme.c, res/res_features.c, channels/chan_agent.c,
	  utils/astman.c, res/res_jabber.c, include/asterisk/manager.h,
	  channels/chan_iax2.c, apps/app_queue.c, main/config.c,
	  res/res_monitor.c, main/manager.c, include/asterisk/jabber.h,
	  apps/app_senddtmf.c, main/db.c: Merged revisions 49676 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49676 | kpfleming | 2007-01-05 16:16:33 -0600 (Fri, 05 Jan 2007)
	  | 2 lines reduce stack consumption for AMI and AMI/HTTP requests
	  by nearly 20K in most cases ........

2007-01-05 22:18 +0000 [r49677]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 49675 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49675 | file | 2007-01-05 17:14:47 -0500 (Fri, 05 Jan 2007) | 2
	  lines Don't keep repeating the warning over and over when the end
	  of the call is reached. (issue #8724 reported by xrg) ........

2007-01-05 17:10 +0000 [r49578-49637]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c, channels/chan_skinny.c,
	  channels/chan_iax2.c: Merged revisions 49636 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r49636 | kpfleming | 2007-01-05 11:09:00 -0600
	  (Fri, 05 Jan 2007) | 10 lines Merged revisions 49635 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r49635 | kpfleming | 2007-01-05 10:56:40 -0600 (Fri, 05
	  Jan 2007) | 2 lines ensure that threads which are supposed to be
	  detached (because we aren't going to wait on them) are created
	  properly ........ ................

	* main/threadstorage.c: use a rwlock-list for the list of TLS
	  objects

	* /, channels/chan_iax2.c: Merged revisions 49600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49600 | kpfleming | 2007-01-04 18:01:40 -0600 (Thu, 04 Jan 2007)
	  | 2 lines revert the dynamic_list insertion change... that was
	  not the right thing to do ........

	* /, channels/chan_iax2.c: Merged revisions 49581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49581 | kpfleming | 2007-01-04 17:50:15 -0600 (Thu, 04 Jan 2007)
	  | 3 lines create the IAX2 processing threads as background
	  threads so they will use smaller stacks when we create a dynamic
	  thread, put it on the dynamic_list right away so we don't lose
	  track of it ........

	* include/asterisk/strings.h: ensure that the proper
	  file/function/line shows up for dynamic string threadstorage
	  objects remove pointless casts

	* include/asterisk/threadstorage.h: yeah... so... compiling before
	  committing seems like it might be a good idea

	* build_tools/cflags.xml, include/asterisk.h, /,
	  main/threadstorage.c (added), main/Makefile,
	  include/asterisk/strings.h, include/asterisk/threadstorage.h,
	  main/asterisk.c: Merged revisions 49553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49553 | kpfleming | 2007-01-04 16:51:01 -0600 (Thu, 04 Jan 2007)
	  | 2 lines add support for tracking thread-local-storage objects
	  that exist via 'threadstorage' CLI commands ........

2007-01-04 23:02 +0000 [r49552-49573]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 49568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49568 | file | 2007-01-04 18:00:50 -0500 (Thu, 04 Jan 2007) | 2
	  lines It's possible for the iax2 pvt to disappear, so if it
	  has... don't bother looking for dpentries. ........

	* /, main/config.c: Merged revisions 49551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49551 | file | 2007-01-04 17:28:29 -0500 (Thu, 04 Jan 2007) | 2
	  lines Only free comments and line buffer once we reach the first
	  level. (issue #8678 reported by ssokol, fixed by anthonyl)
	  ........

2007-01-04 21:59 +0000 [r49538]  Kevin P. Fleming <kpfleming@digium.com>

	* main/frame.c, /, channels/iax2-parser.c: Merged revisions 49536
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49536 | kpfleming | 2007-01-04 15:58:42 -0600 (Thu, 04 Jan 2007)
	  | 2 lines don't mark these allocations as 'cache' allocations
	  when caching has been disabled ........

2007-01-04 21:40 +0000 [r49525]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: It's pretty difficult to pthread_kill a thread
	  that doesn't exist. (issue #8681 reported by bkruse)

2007-01-04 21:06 +0000 [r49524]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/iax2-parser.c: Merged revisions 49523 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r49523 | kpfleming | 2007-01-04 15:06:02 -0600 (Thu, 04
	  Jan 2007) | 2 lines if we're going to decrement the frame count
	  when we free a frame, we should inrement it when we create one
	  :-) ........

2007-01-04 20:27 +0000 [r49491-49507]  TransNexus OSP Development <support@transnexus.com>

	* doc/osp.txt: 1. Update osp guide.

	* configs/osp.conf.sample: 1. Update osp module configuration file.

2007-01-04 18:32 +0000 [r49466]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/iax2-parser.h, /, channels/chan_iax2.c,
	  channels/iax2-parser.c: Merged revisions 49465 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49465 | kpfleming | 2007-01-04 12:31:55 -0600 (Thu, 04 Jan 2007)
	  | 2 lines only do IAX2 frame caching for voice and video frames
	  ........

2007-01-04 18:28 +0000 [r49464]  Matt O'Gorman <mogorman@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 49459 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ................
	  r49459 | mogorman | 2007-01-04 12:11:19 -0600 (Thu, 04 Jan 2007)
	  | 10 lines Merged revisions 49447 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.2 ........ r49447
	  | mogorman | 2007-01-04 11:45:16 -0600 (Thu, 04 Jan 2007) | 2
	  lines converted a lot of 256 to PATH_MAX and some white space
	  fixes. ........ ................

2007-01-04 18:19 +0000 [r49463]  Kevin P. Fleming <kpfleming@digium.com>

	* codecs/Makefile, main/frame.c, /, channels/iax2-parser.c: Merged
	  revisions 49457,49460-49461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49457 | kpfleming | 2007-01-04 12:05:47 -0600 (Thu, 04 Jan 2007)
	  | 2 lines make building of codec_gsm against the system GSM
	  library actually work ........ r49460 | kpfleming | 2007-01-04
	  12:16:40 -0600 (Thu, 04 Jan 2007) | 2 lines don't define this
	  type either if LOW_MEMORY is enabled ........ r49461 | kpfleming
	  | 2007-01-04 12:17:01 -0600 (Thu, 04 Jan 2007) | 2 lines don't do
	  frame header caching in the core if LOW_MEMORY is defined
	  ........

2007-01-04 18:17 +0000 [r49414-49462]  Matt O'Gorman <mogorman@digium.com>

	* /, channels/iax2-parser.c: Merged revisions 49458 via svnmerge
	  from https://svn.digium.com/svn/asterisk/branches/1.4 ........
	  r49458 | kpfleming | 2007-01-04 12:06:51 -0600 (Thu, 04 Jan 2007)
	  | 2 lines don't do frame caching in LOW_MEMORY mode ........

	* /, apps/app_voicemail.c: Merged revisions 49413 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ................
	  r49413 | mogorman | 2007-01-04 10:50:56 -0600 (Thu, 04 Jan 2007)
	  | 11 lines Merged revisions 49412 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.2 ........ r49412
	  | mogorman | 2007-01-04 10:48:43 -0600 (Thu, 04 Jan 2007) | 3
	  lines good catch russell sorry i missed that. fix magic number
	  with proper sizeof ........ ................

2007-01-03 23:41 +0000 [r49356]  Matt O'Gorman <mogorman@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 49355 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ................
	  r49355 | mogorman | 2007-01-03 17:32:03 -0600 (Wed, 03 Jan 2007)
	  | 14 lines Merged revisions 49354 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.2 ........ r49354
	  | mogorman | 2007-01-03 17:22:47 -0600 (Wed, 03 Jan 2007) | 6
	  lines When using ODBC_STORAGE VoicemailMain doesn't create the
	  subdirectories for a mailbox such as the INBOX directory. this
	  patch solves that problem, was written by anthony be-125 ........
	  ................

2007-01-03 11:15 +0000 [r49320-49321]  Christian Richter <christian.richter@beronet.com>

	* doc/misdn.txt, channels/misdn/isdn_lib.h, channels/chan_misdn.c,
	  /, channels/misdn/ie.c, channels/misdn/isdn_msg_parser.c,
	  configs/misdn.conf.sample, channels/misdn/isdn_lib.c,
	  channels/misdn_config.c: Merged revisions 49313 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r49313 | crichter | 2007-01-03 10:06:50 +0100
	  (Mi, 03 Jan 2007) | 41 lines Merged revisions
	  48319,48321,48467,48552,48576,49135,49303 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48319 | crichter | 2006-12-06 15:35:25 +0100 (Mi, 06 Dez 2006) |
	  1 line changed a few debugs to higher debug levels ........
	  r48321 | crichter | 2006-12-06 16:48:45 +0100 (Mi, 06 Dez 2006) |
	  1 line added the export and import of the MISDN_ADDRESS_COMPLETE
	  Variable to inidcate wether the extension is already completely
	  dialed or if there might come additional digits by information
	  elements. also added some docs for that. ........ r48467 |
	  crichter | 2006-12-14 14:03:49 +0100 (Do, 14 Dez 2006) | 1 line
	  removed FIXUP state. added check for channel allocation conflict
	  when we create a setup while the other site creates a setup on
	  the same channel, besides the check we resolve this conflict.
	  ........ r48552 | crichter | 2006-12-18 11:19:39 +0100 (Mo, 18
	  Dez 2006) | 1 line when our PTP Partner sends us a SETUP with a
	  preselected channel we just accept it, even when we're NT. added
	  some checks for segfaults. ........ r48576 | crichter |
	  2006-12-19 14:08:51 +0100 (Di, 19 Dez 2006) | 1 line when we
	  reject a channel, because it's in use already, we shouldn't
	  process the setup anymore. made the channel allocation a bit
	  easier and more understandable, removed a few unused lines
	  ........ r49135 | crichter | 2007-01-02 11:07:22 +0100 (Di, 02
	  Jan 2007) | 1 line added check for channel ranges in the
	  set/empty channel functions. set pmp_l1_check default to no.
	  added misdn restart pid cli command. added cleaning of channel
	  when we send a RELEASE_COMPLETE. ........ r49303 | crichter |
	  2007-01-03 09:24:00 +0100 (Mi, 03 Jan 2007) | 9 lines * Added
	  check for bridging in misdn_call to avoid setting
	  echocancellation when 2 mISDN channels are involved and when
	  bridging is set. That lead to a kernel panic before under
	  different situations, because we switched about 2 times between
	  hardware bridging and echocancelation * readded MISDN_URATE
	  variable which got lost before, this should make app_v110 work
	  again * fixed typo ........ ................

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c,
	  channels/misdn_config.c: Merged revisions 47989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47989 | crichter | 2006-11-24 16:46:13 +0100
	  (Fr, 24 Nov 2006) | 9 lines Merged revisions 47968 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47968 | crichter | 2006-11-23 17:10:23 +0100 (Do, 23
	  Nov 2006) | 1 line fixed a litle bug regarding HOLD/RETRIEVE.
	  beatufied some logs, changed some loglevels. changed the default
	  value of block_on_alarm ........ ................

2007-01-03 03:28 +0000 [r49283]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, Makefile.rules: Merged revisions 49282 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r49282 | kpfleming | 2007-01-02 21:21:25 -0600 (Tue, 02
	  Jan 2007) | 2 lines various Makefile improvements to get chan_vpb
	  (and any other C++ modules) to build properly ........

2007-01-03 01:21 +0000 [r49260]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 49259 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49259 | file | 2007-01-02 20:19:53 -0500 (Tue, 02 Jan 2007) | 2
	  lines Check pvt structure presence before passing to
	  send_command. This gets rid of the irritating message about a
	  packet without pvt structure. This happens because the scheduled
	  item is getting cancelled at almost the exact moment it is
	  getting executed. ........

2007-01-02 22:43 +0000 [r49238]  Steve Murphy <murf@digium.com>

	* /, main/ast_expr2f.c, pbx/ael/ael_lex.c, pbx/ael/ael.flex,
	  main/ast_expr2.fl: Merged revisions 49237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49237 | murf | 2007-01-02 15:30:53 -0700 (Tue, 02 Jan 2007) | 1
	  line This is a slight modification to Josh's edits for #8579;
	  both files edited were the produced by flex; so the source files
	  need to be changed instead, and the generated files regenerated.
	  ........

2007-01-02 20:02 +0000 [r49214-49215]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Removing propably accidentally added debug
	  messages sent to verbose channel

	* /, channels/chan_sip.c: Merged revisions 49212 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49212 | oej | 2007-01-02 20:58:45 +0100 (Tue, 02 Jan 2007) | 2
	  lines Small cleanup of add_t38sdp - it's always enabled at that
	  point in the code ........

2007-01-02 17:04 +0000 [r49187]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_math.c: Tweak description text to match new
	  functionality (Issue 7959)

2007-01-02 14:01 +0000 [r49166]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /: Merged revisions 49165 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49165 | kpfleming | 2007-01-02 07:59:44 -0600 (Tue, 02 Jan 2007)
	  | 2 lines remove comment that is unrelated to this function
	  ........

2007-01-02 13:50 +0000 [r49152]  Olle Johansson <oej@edvina.net>

	* /, configs/features.conf.sample: Update sample config

2007-01-01 23:43 +0000 [r49100-49103]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_zap.c, /, build_tools/menuselect-deps.in,
	  configure, include/asterisk/autoconfig.h.in, configure.ac,
	  codecs/codec_zap.c: Merged revisions 49102 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49102 | kpfleming | 2007-01-01 17:34:35 -0600 (Mon, 01 Jan 2007)
	  | 2 lines check specifically for VLDTMF and transcoding support
	  in the system's Zaptel installation, and make only the modules
	  that need those features dependent on them (this will allow
	  building the other Zaptel-using parts of Asterisk against older
	  versions of Zaptel or those on other platforms that haven't
	  caught up yet to the Linux version) ........

	* Makefile, sounds/Makefile: GNU make already knows what the
	  current directory is, there is no need to use 'pwd'

	* Makefile, /: Merged revisions 49098-49099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49098 | kpfleming | 2007-01-01 16:08:24 -0600 (Mon, 01 Jan 2007)
	  | 2 lines revert this change until a better solution can be
	  found... 'env -i' was not being used properly, but even when
	  changed to do so, this process fails during cross-compilation
	  because the menuselect build still sees 'CC' as set to the
	  cross-compiler ........ r49099 | kpfleming | 2007-01-01 16:48:03
	  -0600 (Mon, 01 Jan 2007) | 2 lines use a simpler (and portable)
	  method to ensure that menuselect is built as a host binary
	  ........

2007-01-01 20:16 +0000 [r49092-49097]  Olle Johansson <oej@edvina.net>

	* /: Block cleanup of release branch

	* include/asterisk/indications.h: Doxygen documentationification

	* main/manager.c: Fix manager too.

	* main/frame.c, channels/chan_sip.c, include/asterisk/frame.h: -
	  Add error handling to ast_parse_allow_disallow - Use this in
	  chan_sip configuration parsing

	* include/asterisk/acl.h, channels/chan_sip.c,
	  channels/chan_skinny.c, channels/chan_h323.c, main/acl.c,
	  channels/chan_iax2.c, channels/chan_mgcp.c: - Implement error
	  handling in ast_append_ha - Use this in chan_sip - Document ha
	  functions in acl.c

2006-12-31 19:15 +0000 [r49089]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: count is no longer used in the iaxq
	  structure really so let's just make this a statically declared
	  linked list.

2006-12-31 09:38 +0000 [r49080-49082]  Olle Johansson <oej@edvina.net>

	* CHANGES: Update CHANGES, make section about SIP. This might be a
	  good way to handle other parts of this file too, as it grows.

	* configs/sip.conf.sample: Added some docs

	* channels/chan_sip.c: Add version number to useragent string -
	  Issue #8700, blanchet - THANKS!

2006-12-31 05:20 +0000 [r49075-49076]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_math.c: Add power and right/left shift functions
	  (Issue 7959)

	* configs/voicemail.conf.sample, UPGRADE.txt, apps/app_voicemail.c:
	  1. Rename 'maxmessage' to 'maxsecs' to differentiate from
	  'maxmsg'. 2. Rename 'minmessage' to 'minsecs' for parity. 3. Make
	  'maxsecs' a per-user option, in addition to global. (Issue #
	  8624)

2006-12-30 18:32 +0000 [r49071-49074]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 49073 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49073 | file | 2006-12-30 13:31:17 -0500 (Sat, 30 Dec 2006) | 2
	  lines IAX has been deprecated for quite some time so we had
	  better use IAX2 when creating the dial string for users. (issue
	  #8697 reported by ssokol) ........

	* main/rtp.c: Clarify why we are reading in a frame in the
	  Packet2Packet bridge.

2006-12-30 13:27 +0000 [r49068-49069]  Kevin P. Fleming <kpfleming@digium.com>

	* sounds/Makefile: now that the 'languageprefix' option defaults to
	  'on', and all channels have a default language of 'en', let's
	  install the English sound files into /var/lib/asterisk/sounds/en,
	  just like the other languages

	* main/channel.c: small formatting fix

2006-12-30 05:49 +0000 [r49064-49067]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 49066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49066 | file | 2006-12-30 00:46:57 -0500 (Sat, 30 Dec 2006) | 2
	  lines If the Packet2Packet bridge is being broken because of a
	  masquerade then attempt to read a frame in so the masquerade
	  actually happens. Otherwise weirdness will occur. (issue #8696
	  reported by kjotte) ........

	* funcs/func_odbc.c: Initialize obj pointers to NULL. Gets rid of
	  two compiler warnings.

	* /, channels/chan_iax2.c: Merged revisions 49063 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49063 | file | 2006-12-29 22:37:22 -0500 (Fri, 29 Dec 2006) | 2
	  lines Initialize the packet queue in load_module instead of just
	  declaring the list with the default value. (issue #8695 reported
	  by ssokol) ........

2006-12-30 00:51 +0000 [r49062]  Steve Murphy <murf@digium.com>

	* /, pbx/pbx_ael.c: Merged revisions 49061 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49061 | murf | 2006-12-29 17:40:37 -0700 (Fri, 29 Dec 2006) | 1
	  line A fix for 8661, where the CUT func needed to have comma args
	  converted to vertical bars. I hope this change does little harm.
	  ........

2006-12-29 13:25 +0000 [r49056]  Russell Bryant <russell@digium.com>

	* channels/chan_oss.c: Convert various comments to doxygen format.

2006-12-29 11:02 +0000 [r49054]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Removing extra output

2006-12-29 06:26 +0000 [r49053]  Russell Bryant <russell@digium.com>

	* include/asterisk/smdi.h: Fix a spelling mistake in a comment.

2006-12-29 00:33 +0000 [r49047]  Kevin P. Fleming <kpfleming@digium.com>

	* /, BUGS: Merged revisions 49046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r49046 | kpfleming | 2006-12-28 18:32:59 -0600
	  (Thu, 28 Dec 2006) | 10 lines Merged revisions 49045 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r49045 | kpfleming | 2006-12-28 18:32:32 -0600 (Thu, 28
	  Dec 2006) | 2 lines location of the bug posting guidelines has
	  changed ........ ................

2006-12-28 20:13 +0000 [r49030]  Tilghman Lesher <tlesher@digium.com>

	* configs/func_odbc.conf.sample, funcs/func_odbc.c,
	  funcs/func_strings.c: Integrate functionality tested on
	  svncommunity users back into trunk

2006-12-28 20:10 +0000 [r49029]  Kevin P. Fleming <kpfleming@digium.com>

	* /, sounds/Makefile: Merged revisions 49028 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49028 | kpfleming | 2006-12-28 14:08:59 -0600 (Thu, 28 Dec 2006)
	  | 2 lines new versions of sounds ........

2006-12-28 20:05 +0000 [r49026-49027]  Joshua Colp <jcolp@digium.com>

	* main/http.c: Convert uri_redirects list to read/write locks.

	* /, main/http.c: Merged revisions 49024 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49024 | qwell | 2006-12-28 14:52:46 -0500 (Thu, 28 Dec 2006) | 2
	  lines make the uris_lock a rwlock instead of a mutex lock - needs
	  to be forward ported to trunk ........

2006-12-28 17:56 +0000 [r49019]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael.tab.c, main/ast_expr2.y, main/ast_expr2f.c,
	  pbx/ael/ael_lex.c, include/asterisk/ael_structs.h,
	  pbx/ael/ael.tab.h, utils/ael_main.c, main/ast_expr2.fl,
	  main/ast_expr2.c: Jason is having problems with the inclusion of
	  <err.h>; it appears to be unnecessary for sucessful builds, so I
	  either removed or commented out the inclusions from all the AEL
	  related code. New outputs from bison/flex are included, etc.

2006-12-27 22:30 +0000 [r49010]  Joshua Colp <jcolp@digium.com>

	* /, main/ast_expr2f.c, pbx/ael/ael_lex.c: Merged revisions 49009
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49009 | file | 2006-12-27 17:28:46 -0500 (Wed, 27 Dec 2006) | 2
	  lines ast_copy_string is not available when LOW_MEMORY is used
	  and things are being built in the utils directory, so we need to
	  resort to the old method of strncpy. (issue #8579 reported by
	  mottano) ........

2006-12-27 22:14 +0000 [r49007-49008]  Kevin P. Fleming <kpfleming@digium.com>

	* main/cdr.c, main/channel.c, main/udptl.c, main/pbx.c,
	  main/dnsmgr.c, main/frame.c, main/manager.c, /, main/http.c,
	  main/logger.c, main/enum.c, main/asterisk.c, main/rtp.c,
	  main/term.c: Merged revisions 49006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r49006 | kpfleming | 2006-12-27 16:06:56 -0600 (Wed, 27 Dec 2006)
	  | 2 lines since these variables all have static duration, none of
	  them need initializers (they default to zero anyway) ........

	* codecs/g722: add file to ignore list

2006-12-27 21:27 +0000 [r49004]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Only include include files once (imported
	  from 1.4)

2006-12-27 21:21 +0000 [r48999-49001]  Kevin P. Fleming <kpfleming@digium.com>

	* main/asterisk.c: apparently we need an explicit message to warn
	  people

	* main/file.c, UPGRADE.txt, main/asterisk.c, doc/asterisk-conf.txt:
	  make the 'languageprefix' option default to on, and deprecate
	  turning it off

	* /, main/file.c, include/asterisk/options.h, main/asterisk.c:
	  Merged revisions 48998 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48998 | kpfleming | 2006-12-27 15:08:30 -0600 (Wed, 27 Dec 2006)
	  | 3 lines move extern declaration for this option to a header
	  file where it belongs provide an initial value for
	  'languageprefix' option, instead of relying on randomness to
	  provide a useful value ........

2006-12-27 20:30 +0000 [r48992-48996]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Only set "rfc2833compensate" option once

	* /, channels/chan_sip.c: Only handle T38 options once

	* channels/chan_sip.c: -Remove "localmask" setting (deprecated in
	  earlier version) - Remove "musiconhold" and "musicclass" settings
	  (also deprecated earlier)

2006-12-27 18:34 +0000 [r48989-48990]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 48988 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48988 | kpfleming | 2006-12-27 12:33:22 -0600 (Wed, 27 Dec 2006)
	  | 2 lines make the option actually match the documentation
	  ........

	* include/asterisk/utils.h, include/asterisk/astmm.h, main/frame.c,
	  /, main/astmm.c, channels/iax2-parser.c: Merged revisions 48987
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48987 | kpfleming | 2006-12-27 12:29:13 -0600 (Wed, 27 Dec 2006)
	  | 2 lines allow 'show memory' and 'show memory summary' to
	  distinguish memory allocations that were done for caching
	  purposes, so they don't look like memory leaks ........

2006-12-27 18:02 +0000 [r48976-48986]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Be politically
	  correct

	* apps/app_sms.c: From coding guidelines: Comments should explain
	  what the code does, not when something was changed or who changed
	  it. If you have done a larger contribution, make sure that you
	  are added to the CREDITS file.

	* /, channels/chan_sip.c, configs/sip.conf.sample: Add support for
	  buggy Cisco MWI firmware > 8.0.3 (issue 8575 - flewid)

	* /, channels/chan_sip.c: Cleanup of handle_common_options

	* /, channels/chan_sip.c: Reset invitestate when sending new invite

	* /, channels/chan_sip.c: Issue #8600 - bogus SDP Content Length in
	  T.38 re-invite

2006-12-26 05:23 +0000 [r48961-48967]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 48966 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48966 | file | 2006-12-26 00:20:08 -0500 (Tue, 26 Dec 2006) | 2
	  lines Get rid of a needless memory allocation and only create a
	  conference structure in find_conf_realtime if data was read from
	  realtime. (issue #8669 reported by robl) ........

	* /, channels/chan_sip.c, include/asterisk/rtp.h, main/rtp.c:
	  Merged revisions 48964 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48964 | file | 2006-12-25 23:31:58 -0500 (Mon, 25 Dec 2006) | 2
	  lines Add an API call that initializes an RTP structure. We need
	  this because chan_sip is cheeky and uses a temporary RTP
	  structure for codec purposes, and the API calls that are used
	  rely on the lock. (Pointed out on asterisk-dev by Andy Wang)
	  ........

	* /, configure, configure.ac: Merged revisions 48960 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r48960 | file | 2006-12-25 12:04:48 -0500 (Mon, 25 Dec
	  2006) | 2 lines Clean up autoconf file (gets rid of warnings seen
	  when rebuilding configure) and rebuild configure. ........

2006-12-25 06:42 +0000 [r48958-48959]  Luigi Rizzo <rizzo@icir.org>

	* codecs/g722/g722.h: provide INT16_MIN and INT16_MAX for platforms
	  where they are not defined.

	* main/channel.c, apps/app_read.c, channels/chan_misdn.c,
	  funcs/func_channel.c, include/asterisk/indications.h,
	  apps/app_disa.c, main/app.c, res/snmp/agent.c,
	  contrib/utils/zones2indications.c, include/asterisk/channel.h,
	  res/res_indications.c, main/indications.c: rename the structs
	  struct tone_zone_sound and struct tone_zone defined in
	  indications.h to ind_tone_zone_sound and ind_tone_zone, to avoid
	  conflicts with the structs with the same names defined in
	  tonezone.h Hope i haven't missed any instance.

2006-12-25 05:22 +0000 [r48929-48957]  Russell Bryant <russell@digium.com>

	* /, funcs/func_math.c: Merged revisions 48956 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48956 | russell | 2006-12-25 00:21:20 -0500
	  (Mon, 25 Dec 2006) | 14 lines Merged revisions 48955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48955 | russell | 2006-12-25 00:19:48 -0500 (Mon, 25
	  Dec 2006) | 6 lines Fix an error introduced by copying and
	  pasting the handling of the >= operator for the MATH function. If
	  a single equal sign was used as an operator, the function would
	  treat it is as if it were the >= operator. Now, it properly
	  handles it as an invalid operator. (issue #8665, patch by
	  tempest1) ........ ................

	* funcs/func_callerid.c: Simplify the if statements used to check
	  to see if the argument was "num" or "number". It is not possible
	  to ever reach the second part of this conditional statement.
	  Thanks to my brother, Brett, for pointing this out. :)

	* main/frame.c: Resolve some compiler warnings

	* /, channels/chan_oss.c: Merged revisions 48948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48948 | russell | 2006-12-24 16:19:37 -0500 (Sun, 24 Dec 2006) |
	  3 lines Fix a typo in an error message that indicated that the
	  MGCP channel type could not be registered, instead of the correct
	  type, OSS. ........

	* main/http.c, configs/http.conf.sample: Use spaces as a separator
	  for the redirect option to improve readability

	* /, channels/chan_iax2.c: Merged revisions 48944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48944 | russell | 2006-12-24 02:25:38 -0500
	  (Sun, 24 Dec 2006) | 11 lines Merged revisions 48943 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48943 | russell | 2006-12-24 02:23:07 -0500 (Sun, 24
	  Dec 2006) | 3 lines Check for the proper return value on an error
	  in a call to mmap(). This was reported by Andy Wang on the
	  asterisk-dev list. Thanks! ........ ................

	* channels/chan_sip.c: Merged revisions 48940 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48940 | russell | 2006-12-24 01:49:31 -0500
	  (Sun, 24 Dec 2006) | 11 lines Merged revisions 48939 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48939 | russell | 2006-12-24 01:47:29 -0500 (Sun, 24
	  Dec 2006) | 3 lines Remove a couple of misplaced dots in log
	  messages. This was reported by Andrea Spadaccini on the
	  asterisk-dev mailing list. ........ ................

	* main/http.c: Simplify the definition of http_uri_redirect such
	  that only one allocation is done for exactly how much memory is
	  needed. This was suggested by Luigi on the asterisk-dev mailing
	  list. Thanks!

	* include/asterisk/http.h, main/http.c, CHANGES,
	  configs/http.conf.sample: - Convert the list of URI handlers to
	  use the linked list macros. While doing this, implementing
	  locking of this list to make it thread-safe. - Add a "redirect"
	  option to http.conf that allows redirecting one URI to another. I
	  was inspired to do this while playing with the Asterisk GUI. I
	  got tired of typing this URL to get to the GUI:
	  http://localhost:8088/asterisk/static/config/cfgadvanced.html So,
	  now I have the following line in http.conf:
	  redirect=/=/asterisk/static/config/cfgadvanced.html Now, I can
	  type the following into my browser and go to the GUI:
	  http://localhost:8088

	* main/manager.c: Remove a debug message. If this is still needed
	  for debugging something, it should be made a LOG_DEBUG message.

2006-12-23 19:55 +0000 [r48928]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/lock.h: We should probably declare the lock...
	  and not just the constructor/deconstructor.

2006-12-23 19:51 +0000 [r48927]  Russell Bryant <russell@digium.com>

	* include/asterisk/lock.h: Use the correct function to destroy an
	  rwlock in the destructor for an ast_rwlock_t

2006-12-22 22:34 +0000 [r48871-48907]  Jason Parker <jparker@digium.com>

	* Makefile, /, main/stdtime/localtime.c: Merged revisions 48906 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48906 | qwell | 2006-12-22 16:33:46 -0600 (Fri, 22 Dec 2006) | 2
	  lines Minor fixes for Solaris. ........

	* /, channels/chan_skinny.c: Merged revisions 48888 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r48888 | qwell | 2006-12-22 15:40:20 -0600 (Fri, 22 Dec
	  2006) | 2 lines Note to self: Run make before committing...
	  ........

	* /, channels/chan_skinny.c: Merged revisions 48870 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r48870 | qwell | 2006-12-22 14:43:05 -0600 (Fri, 22 Dec
	  2006) | 2 lines Fix for issue 7774 - patch by alamantia ........

2006-12-22 10:35 +0000 [r48825-48857]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_sms.c: improve readability of a few macros.

	* apps/app_sms.c: make sms_hexdump() thread safe; restructure and
	  reduce indentation on some blocks.

	* apps/app_sms.c: make isodate thread-safe

	* apps/app_sms.c: - use the standard option parsing routines; -
	  document existing but undocumented parameters to send a message
	  (untested but unchanged; - ad a new option p(N) to set the
	  initial message delay to N ms so this can be adapted from the
	  dialplan to various countries;

2006-12-21 21:57 +0000 [r48785-48817]  Joshua Colp <jcolp@digium.com>

	* main/logger.c: Merge non-blocking logger from my branch. This
	  should improve things under heavy load with lots of CLI/logging
	  output.

	* /, redhat/asterisk.spec: Merged revisions 48783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48783 | file | 2006-12-21 15:26:29 -0500 (Thu,
	  21 Dec 2006) | 10 lines Merged revisions 48782 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48782 | file | 2006-12-21 15:25:01 -0500 (Thu, 21 Dec 2006) | 2
	  lines Add new silence sound files to the spec for Redhat. (issue
	  #8652 reported by alvaro_palma_aste) ........ ................

2006-12-21 20:15 +0000 [r48781]  Steve Murphy <murf@digium.com>

	* codecs/codec_g722.c: This little mod gets rid of that g722
	  compiler warning that breaks builds configured with
	  --enable-dev-mode; the previous commit of 48767 was to merge in
	  changes for bug 6334, unifying the open mode arguments for saner
	  operation.

2006-12-21 19:52 +0000 [r48768]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_sms.c: put generator functions next to each other.

2006-12-21 19:44 +0000 [r48767]  Steve Murphy <murf@digium.com>

	* include/asterisk.h, channels/chan_zap.c, apps/app_meetme.c,
	  apps/app_festival.c, apps/app_dictate.c, apps/app_record.c,
	  res/res_convert.c, channels/chan_iax2.c, res/res_monitor.c,
	  cdr/cdr_sqlite.c, res/res_agi.c, main/file.c, main/app.c,
	  apps/app_sms.c, apps/app_directory.c, apps/app_chanspy.c,
	  apps/app_mixmonitor.c, main/db.c, apps/app_voicemail.c: a quick
	  fix to app_sms.c to get rid of cursed compiler warnings so I can
	  compile under --enable-dev-mode

2006-12-21 19:36 +0000 [r48736-48766]  Luigi Rizzo <rizzo@icir.org>

	* main/channel.c: same as in other places, check that
	  generator->release is not NULL before calling it. This allows
	  generators to set it to NULL when they have nothing to do there.
	  Later, the three copies of the code that releases a generator
	  should be moved to a function.

	* apps/app_sms.c: reduce indentation

	* apps/app_sms.c: restructure a block to reduce nesting

	* apps/app_sms.c: Add a bit of documentation on this code,
	  including pointers to relevant documents and comment on timing
	  issues. Initial merge of the code in
	  http://bugs.digium.com/view.php?id=8586 by Filippo Grassilli
	  (Hyppo) to support the SMS Protocol 2. In this commit i have
	  tried to minimize the diffs, so further code cleanup will come in
	  subsequent commits.

2006-12-21 15:52 +0000 [r48723]  Steve Murphy <murf@digium.com>

	* pbx/pbx_config.c: This small update will generate WARNINGS if
	  there is garbage in your extensions.conf file (liken extem =>
	  instead of exten => !)

2006-12-21 04:05 +0000 [r48680-48709]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/indications.h, main/indications.c: Really clean
	  up indications to use the linkedlists API

	* main/pbx.c: Switch list of global variables to read/write locks.

	* main/pbx.c: Convert alternate dialplan switch list to use
	  read/write locks.

2006-12-21 00:24 +0000 [r48663]  Steve Murphy <murf@digium.com>

	* configs/iax.conf.sample, main/jitterbuf.c, include/jitterbuf.h,
	  CHANGES, channels/chan_iax2.c: As per bug 7978, this version
	  introduces the jittertargetextra option in config files

2006-12-21 00:11 +0000 [r48661-48662]  Matthew Fredrickson <creslin@digium.com>

	* codecs/codec_g722.c: Minor addition giving props to Steve
	  Underwood for his hard work. Thanks again Steve!

	* codecs/Makefile, codecs/g722/Makefile (added),
	  codecs/codec_g722.c (added), codecs/g722/g722_encode.c (added),
	  codecs/g722 (added), build_tools/embed_modules.xml,
	  codecs/g722/g722_decode.c (added), codecs/g722/g722.h (added),
	  codecs/g722_slin_ex.h (added), codecs/slin_g722_ex.h (added): Add
	  codec G.722 support.

2006-12-20 04:32 +0000 [r48638-48639]  Joshua Colp <jcolp@digium.com>

	* apps/app_page.c: Clean up app_page

	* /, apps/app_voicemail.c: Merged revisions 48637 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48637 | file | 2006-12-19 21:56:09 -0500 (Tue, 19 Dec 2006) | 2
	  lines vms doesn't exist on non-IMAP storage builds. ........

2006-12-20 00:13 +0000 [r48598-48599]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_sms.c: more formatting cleanup. Move some code into a
	  function sms_compose1() in preparation for supporting protocol 2
	  as well.

	* apps/app_sms.c: formatting and code cleanup. Still a lot of
	  copy&pasted code here...

2006-12-19 23:05 +0000 [r48591-48597]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48596 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48596 | file | 2006-12-19 18:04:30 -0500 (Tue, 19 Dec 2006) | 2
	  lines Pass 'vms' pointer to record_and_review so it is then
	  passed to the IMAP store file function. (issue #8614 reported by
	  punknow) ........

	* res/snmp/agent.c: Update res_snmp to use new API declaration of
	  pbx_builtin_serialize_variables (issue #8627 reported by
	  johann8384)

	* /, doc/snmp.txt: Merged revisions 48592 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48592 | file | 2006-12-19 17:00:57 -0500 (Tue, 19 Dec 2006) | 2
	  lines find is not the same as bind when it comes to
	  documentation. (issue #8626 reported by johann8384) ........

	* res/res_limit.c: OpenBSD does not have RLIMIT_AS or RLIMIT_VMEM
	  so until someone finds the right rlimit to use then let's not
	  support the -v option on OpenBSD. (issue #8543 reported by jtodd)

2006-12-19 21:32 +0000 [r48588-48589]  Luigi Rizzo <rizzo@icir.org>

	* /: block 48583

	* apps/app_sms.c: start documenting this code. On passing, fix the
	  bogus datalen on outgoing frames just fixed in 1.4 rev.48583

2006-12-19 21:28 +0000 [r48587]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/Makefile: Merged revisions 48586 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48586 | kpfleming | 2006-12-19 15:28:04 -0600 (Tue, 19 Dec 2006)
	  | 2 lines suppress compiler warnings in this module until it can
	  be improved ........

2006-12-19 16:36 +0000 [r48580-48581]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dial.c: better name for struct dial_localuser.

	* main/cli.c: remove now useless extern declarations.

2006-12-19 14:57 +0000 [r48578]  Kevin P. Fleming <kpfleming@digium.com>

	* res/res_config_odbc.c, /, funcs/func_odbc.c: Merged revisions
	  48577 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48577 | kpfleming | 2006-12-19 08:57:09 -0600 (Tue, 19 Dec 2006)
	  | 2 lines use the proper variable type for these unixODBC API
	  calls, eliminating warnings on 64-bit platforms that use the
	  'new' 64-bit types for ODBC API calls ........

2006-12-19 09:58 +0000 [r48573-48575]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dial.c: introduce a temporary variable for tmp->chan to
	  shorten expressions.

	* apps/app_dial.c: stop what i think is a memory leak in case Dial
	  fails to connect to a channel. Before committing to 1.4 i would
	  like some other people to review and test this fix - thanks.

	* apps/app_dial.c: move a large block related to privacy handling
	  to a separate function.

2006-12-19 03:47 +0000 [r48572]  Joshua Colp <jcolp@digium.com>

	* Makefile, /: Merged revisions 48571 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48571 | file | 2006-12-18 22:46:12 -0500 (Mon, 18 Dec 2006) | 2
	  lines Use env -i to start a fresh environment when going to build
	  menuselect. This is more portable then using unset. (issue #8543
	  reported by jtodd) ........

2006-12-18 17:44 +0000 [r48568]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/channel.h: unbreak the macro used for
	  incrementing the frame counters. I don't know when the bug was
	  introduced, but with the typical usage c->fin =
	  FRAMECOUNT_INC(c->fin) the frame counters stay to 0.

2006-12-18 17:30 +0000 [r48565-48567]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Clean up find_idle_thread function and use
	  atomic operations for dynamic thread count.

	* /, channels/chan_iax2.c: Merged revisions 48564 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48564 | file | 2006-12-18 12:15:49 -0500 (Mon, 18 Dec 2006) | 2
	  lines Put thread into proper list if we abort handling due to an
	  error, and also hold the lock while putting it back into the
	  proper idle list so we don't prematurely get a signal. (issue
	  #8604 reported by arkadia) ........

2006-12-18 16:57 +0000 [r48562-48563]  Jason Parker <jparker@digium.com>

	* configure.ac: ctrl-w != w (nano search) (surprisingly, the fix
	  was ever so slightly different in 1.4)

2006-12-18 16:24 +0000 [r48558-48560]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/strings.h: apply the proposed fix for bug 8602
	  http://bugs.digium.com/view.php?id=8602 (i am not sure if there
	  is still missing cast in front of the alloca() call - being a
	  macro this is probably triggered only when actually used). Add
	  function ast_str_reset() to reinitialize the string to an empty
	  string instead of playing with the internal fields.

	* main/cdr.c, main/pbx.c, apps/app_dumpchan.c,
	  include/asterisk/cdr.h, include/asterisk/pbx.h, apps/app_queue.c,
	  main/cli.c: convert the final clients of ast_build_string to use
	  ast_str_*() Now the only module left using it is chan_sip.c

	* main/logger.c: debugging shows that we always need more than 128
	  bytes for the verbose and logging messages so start with a larger
	  buffer from the beginning.

2006-12-18 11:59 +0000 [r48555]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/Makefile, codecs/gsm/Makefile, utils/astman.c,
	  utils/smsq.c, codecs/ilbc/Makefile, utils/ael_main.c,
	  codecs/lpc10/Makefile: Merged revisions 48554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48554 | kpfleming | 2006-12-18 05:59:24 -0600 (Mon, 18 Dec 2006)
	  | 3 lines remove some now-unnecessary explicit includes of
	  autoconfig.h clean up per-file dependencies during 'make clean'
	  ........

2006-12-18 11:28 +0000 [r48550-48553]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: Replace ast_build_string with ast_str_*(). On
	  passing remove presumably duplicate code to generate the message
	  for the manager_hooks: in the previous version, the message was
	  almost the same as the one sent to regular sessions, with the
	  exception of the empty line at the end, and a few (presumably
	  unintentional) differences e.g. timestamps, debugging, and
	  lowercase headers for "event" and "privilege". now we reuse the
	  same message as before.

	* funcs/func_realtime.c: replace ast_build_string() with
	  ast_str_*(). Unless i am very mistaken, function_realtime_read()
	  was broken in that it would always return an empty string
	  (because ast_build_string() advanced the pointer to the end of
	  the string, and there was no reference to the initial value. This
	  commit should fix this problem.

	* apps/app_queue.c: replace ast_build_string() with ast_str_*();
	  simplify __queues_show()

2006-12-17 18:33 +0000 [r48549]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 48548 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r48548 | kpfleming | 2006-12-17 12:33:24 -0600 (Sun, 17
	  Dec 2006) | 2 lines need an additional argument here to make the
	  downloads actually occur ........

2006-12-17 12:47 +0000 [r48543]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: define a mask SIP_INSECURE sam as for other
	  sets of flags.

2006-12-16 21:38 +0000 [r48522-48529]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  acinclude.m4: Merged revisions 48528 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48528 | kpfleming | 2006-12-16 15:34:41 -0600 (Sat, 16 Dec 2006)
	  | 2 lines use m4 quoting for AC_MSG_NOTICE calls, to keep these
	  calls from thinking they have multiple arguments ........

	* /, agi, codecs, utils, main/Makefile, apps,
	  Makefile.moddir_rules, Makefile.rules, cdr, codecs/ilbc, formats,
	  utils/Makefile, agi/Makefile, Makefile, funcs, main/db1-ast,
	  codecs/lpc10, build_tools/mkdep (removed), main, codecs/gsm, res,
	  pbx, channels: Merged revisions 48525 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48525 | kpfleming | 2006-12-16 15:14:34 -0600 (Sat, 16 Dec 2006)
	  | 2 lines simplify dependency tracking system, using the
	  compiler's built-in method for generating them, and only doing
	  dependency tracking if developer mode is enabled via the
	  configure script ........

	* funcs/func_curl.c: update to use trunk's version of the
	  threadstorage API

	* Makefile, include/asterisk.h, /, main/stdtime/localtime.c: Merged
	  revisions 48521 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48521 | kpfleming | 2006-12-16 14:12:41 -0600 (Sat, 16 Dec 2006)
	  | 2 lines since we really, really have to have autoconfig.h
	  included before all other headers (especially system headers),
	  the Makefile will now force it to happen (this will fix build
	  problems with files like ast_expr2f.c, where we can't control the
	  inclusion order in the file itself) ........

2006-12-16 11:23 +0000 [r48515-48520]  Luigi Rizzo <rizzo@icir.org>

	* main/utils.c: forgot this part...

	* main/cli.c: another conversion from ast_build_str to ast_str

	* main/translate.c: convert ast_build_str to ast_str_*

	* include/asterisk/http.h, main/manager.c, main/http.c,
	  include/asterisk/strings.h: replace ast_build_string() with
	  ast_str_*() functions. This makes the code easier to follow and
	  saves some copies to intermediate buffers.

2006-12-16 04:25 +0000 [r48514]  Kevin P. Fleming <kpfleming@digium.com>

	* funcs/func_curl.c, /: Merged revisions 48513 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48513 | kpfleming | 2006-12-15 22:25:09 -0600 (Fri, 15 Dec 2006)
	  | 2 lines instead of initializing the curl library every time the
	  CURL() function is invoked, do it only once per thread (this
	  allows multiple calls to CURL() in the dialplan for a channel to
	  run much more quickly, and also to re-use connections to the
	  server) (thanks to JerJer for frequently complaining about this
	  performance problem) ........

2006-12-16 02:42 +0000 [r48508-48512]  Luigi Rizzo <rizzo@icir.org>

	* res/res_limit.c: prevent a compiler warning

	* main/manager.c, main/logger.c, main/utils.c,
	  include/asterisk/strings.h, main/cli.c: simplify the
	  ast_dynamic_str_*.... routines by renaming them to ast_str ...
	  and putting the struct ast_threadstorage pointer into the struct
	  ast_str. This makes the code a lot more readable. At this point
	  we can use these routines also to replace ast_build_string().

	* include/asterisk/utils.h, main/utils.c,
	  include/asterisk/strings.h, include/asterisk/threadstorage.h:
	  move the dynamic string support in a better place i.e. string.h
	  While doing this, add a bit of documentation, and slightly extend
	  the functionality as follows: + a max_len of -1 means that we
	  take whatever the current size is, and never try to extend the
	  buffer; + add support for alloca()-ted dynamic strings, which is
	  very useful for all cases where we do an ast_build_string() now.
	  Next step is to simplify the interface by using shorter names
	  (e.g. ast_str as a prefix) and removing the _thread variant of
	  the functions by saving the threadstorage reference into the
	  struct ast_str. This can be done by overloading the 'type' field.
	  Finally, I will do my best to remove the convoluted interface
	  that results from trying to support platforms without va_copy().

	* res/res_smdi.c: remove a duplicate include

2006-12-15 19:57 +0000 [r48503-48507]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 48506 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48506 | file | 2006-12-15 14:55:28 -0500 (Fri, 15 Dec 2006) | 2
	  lines Turn payload_lock into bridge_lock and make it encompass
	  all RTP structure contents that may relate to bridge information,
	  including who we are bridged to. ........

	* /, channels/chan_iax2.c: Merged revisions 48504 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48504 | file | 2006-12-15 14:38:51 -0500 (Fri, 15 Dec 2006) | 2
	  lines Hold call structure lock in places where a qualify or peer
	  action can destroy it. ........

	* /, channels/chan_iax2.c: Merged revisions 48502 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48502 | file | 2006-12-15 14:24:15 -0500 (Fri, 15 Dec 2006) | 2
	  lines Lock network retransmission queue in all places that it is
	  used. ........

2006-12-15 18:37 +0000 [r48495-48501]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: unbreak the output for http session. Not long ago
	  i replaced lseek() with fseek() but forgot that filr FILE's you
	  need ftell to give you the current position.

	* main/channel.c, include/asterisk/channel.h: remove
	  ast_safe_string_alloc() - it is completely equivalent to
	  asprintf().

	* channels/chan_zap.c: replace ast_safe_string_alloc() with
	  asprintf()

	* channels/chan_features.c: replace ast_safe_string_alloc() with
	  asprintf()

	* include/asterisk/threadstorage.h: small documentation
	  improvements.

2006-12-15 13:36 +0000 [r48485-48491]  Olle Johansson <oej@edvina.net>

	* main/tdd.c, include/asterisk/tdd.h: Doxygen changes

	* /, channels/chan_sip.c: Issue #8592 - treat 504 as congestion
	  (imported from 1.2/1.4)

	* /, channels/chan_sip.c: Update to latest IANA specs

2006-12-15 06:34 +0000 [r48479-48480]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/lock.h: Add support to see what holds the lock
	  when doing trylock.

	* /, channels/chan_iax2.c: Merged revisions 48478 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48478 | file | 2006-12-15 01:28:05 -0500 (Fri, 15 Dec 2006) | 2
	  lines Use a wakeup variable so that we don't wait on IO
	  indefinitely if packets need to be retransmitted. ........

2006-12-15 04:03 +0000 [r48476-48477]  Luigi Rizzo <rizzo@icir.org>

	* main/channel.c, include/asterisk/channel.h: constify
	  ast_state2str() and note it is not reentrant.

	* main/pbx.c, include/asterisk/channel.h: remove the macro LOAD_OH
	  and expand it inline in the only place where it was used.

2006-12-14 17:39 +0000 [r48462-48473]  Joshua Colp <jcolp@digium.com>

	* /, include/asterisk/rtp.h, main/rtp.c: Merged revisions 48472 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48472 | file | 2006-12-14 12:36:12 -0500 (Thu, 14 Dec 2006) | 2
	  lines Payload values on the RTP structure can change AFTER a
	  bridge has started. This comes from the packet handling of the
	  SIP response when indication that it was answered has been sent.
	  Therefore we need to protect this data with a lock when we
	  read/write. (issue #8232 reported by tgrman) ........

	* /, main/rtp.c: Merged revisions 48461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48461 | file | 2006-12-13 22:33:30 -0500 (Wed, 13 Dec 2006) | 2
	  lines Remove direct RTCP bridging. I've come to the conclusion
	  that we should handle this through the core and not just forward
	  it on. Should solve a few bugs. ........

2006-12-13 23:08 +0000 [r48458-48459]  Luigi Rizzo <rizzo@icir.org>

	* main/pbx.c: make sure that showdialplan sends only one 'Response:
	  Success ' message even in case of a recursive call.

	* main/pbx.c: clean up function manager_show_dialplan_helper()
	  reducing indentation and normalizing loops. While doing this,
	  remove some unused variables, fix an uninitialized string
	  (idaction), and mark some places where the behaviour is not what
	  we would expect (e.g. an empty context is reported as an error
	  same as a non-existent one). Given that this function is not in
	  1.4, the above can be changed without too many backward
	  compatibility concerns. Not applicable to 1.4 or below.

2006-12-13 21:23 +0000 [r48455]  Matt O'Gorman <mogorman@digium.com>

	* codecs/codec_zap.c: support for deactivating translation paths
	  that are no longer available and more descriptive show transcoder
	  cli command.

2006-12-13 00:56 +0000 [r48433]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c: revert check for a zaptel transcoder related
	  definition that was done in the wrong module.

2006-12-12 23:28 +0000 [r48432]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 48427 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r48427 | kpfleming | 2006-12-12 17:18:14 -0600 (Tue, 12
	  Dec 2006) | 2 lines when making a release, we can always use wget
	  and we can't run the configure script to find that out...
	  ........

2006-12-12 22:32 +0000 [r48416-48417]  Russell Bryant <russell@digium.com>

	* include/asterisk/app.h, channels/chan_sip.c,
	  include/asterisk/channel.h, include/asterisk/pbx.h: Fix various
	  spelling mistakes in comments.

	* channels/chan_zap.c: Make chan_zap inform you that your version
	  of zaptel is too old instead of just failing to compile. It seems
	  like the proper way to do this would be in the configure script.
	  However, that wouldn't help existing checkouts unless we forced
	  the configure script to be executed after any code was changed.

2006-12-12 19:55 +0000 [r48415]  Matt O'Gorman <mogorman@digium.com>

	* codecs/codec_zap.c: fixed nubb error on my part, transcoder now
	  unlocks and locks correctly, as well as counts in the correct
	  direction.

2006-12-12 10:36 +0000 [r48408-48410]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: properly initialize a malloc'ed buffer

	* main/manager.c: normalize the scanning of "general" options in
	  the config file.

	* main/cli.c: Make sure tab-completion works even when we have
	  typed a fully matching word (e.g. "sip<TAB>"); this is
	  implemented by this one-line change - for (;; dst++, src += n) {
	  + for (;src < argindex; dst++, src += n) { However this code is
	  not exactly trivial to understand, so i am also adding some
	  comments to help figuring out what it does.

2006-12-12 04:14 +0000 [r48402]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48401 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48401 | file | 2006-12-11 23:13:48 -0500 (Mon, 11 Dec 2006) | 2
	  lines Use S_OR in my previous app_voicemail. This is the way it
	  should have been done. ........

2006-12-11 23:02 +0000 [r48397-48400]  Matt O'Gorman <mogorman@digium.com>

	* /, sounds/Makefile: Merged revisions 48399 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ........ r48399
	  | mogorman | 2006-12-11 17:02:10 -0600 (Mon, 11 Dec 2006) | 2
	  lines new sounds package with 100% more silence ........

	* /, apps/app_externalivr.c: Merged revisions 48396 via svnmerge
	  from https://svn.digium.com/svn/asterisk/branches/1.4
	  ................ r48396 | mogorman | 2006-12-11 16:11:35 -0600
	  (Mon, 11 Dec 2006) | 12 lines Merged revisions 48394 via svnmerge
	  from https://svn.digium.com/svn/asterisk/branches/1.2 ........
	  r48394 | mogorman | 2006-12-11 15:55:43 -0600 (Mon, 11 Dec 2006)
	  | 4 lines app_externalivr needs a real silence file, and
	  additional changes to add silence files into core instead of
	  extra patch provided by bug 8177 with minor additions. ........
	  ................

2006-12-11 21:35 +0000 [r48392]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48391 | file | 2006-12-11 16:31:23 -0500 (Mon, 11 Dec 2006) | 2
	  lines Return non-existant callerid handling to that which it was
	  before. In 1.4 and trunk callerid can be allocated but not have
	  any contents so we have to use ast_strlen_zero before passing it
	  to the relevant functions. (issue #8567 reported by pabelanger)
	  ........

2006-12-11 21:04 +0000 [r48390]  Matt O'Gorman <mogorman@digium.com>

	* codecs/codec_zap.c: add support for dynamic channel creation and
	  destruction, and show transcoder to show number of channels in
	  use.

2006-12-11 18:11 +0000 [r48389]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: make sure the argument to ast_malloc() is > 0.
	  Long explaination: The behaviour of the underlying malloc(0)
	  differs depending on the operating system. Some return NULL (SysV
	  behaviour); some still allocate a small chunk of memory and
	  return a valid pointer (e.g. traditional BSD); some (e.g. FreeBSD
	  6.x) return a non-null pointer that causes a memory fault if
	  used, even just for reading. Given the above variety, better
	  never call malloc(0).

2006-12-11 17:00 +0000 [r48388]  Steve Murphy <murf@digium.com>

	* main/app.c: This update fixes the problem reported in bug 8551;
	  that ast_app_getdata() behaves differently in trunk for the case
	  of a null prompt.

2006-12-11 05:40 +0000 [r48384]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_strings.c: Merged revisions 48382 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48382 | tilghman | 2006-12-10 23:37:09 -0600 (Sun, 10 Dec 2006)
	  | 2 lines STRFTIME() does not actually require an argument (issue
	  8540) ........

2006-12-11 05:38 +0000 [r48378-48383]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 48381 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48381 | file | 2006-12-11 00:36:45 -0500 (Mon, 11 Dec 2006) | 2
	  lines Merge in my latest RTP changes. Break out RTP and RTCP
	  callback functions so they no longer share a common one. ........

	* /, apps/app_meetme.c: Merged revisions 48379 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48379 | file | 2006-12-11 00:30:01 -0500 (Mon, 11 Dec 2006) | 2
	  lines Use the correct API call to say a device state changed.
	  (Yes, I'm a nub.) ........

	* /, apps/app_meetme.c: Merged revisions 48377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48377 | file | 2006-12-10 23:57:38 -0500 (Sun, 10 Dec 2006) | 2
	  lines Don't access the conference structure after it has been
	  freed. ........

2006-12-11 00:52 +0000 [r48376]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_nbscat.c, /, apps/app_festival.c, apps/app_mp3.c,
	  res/res_agi.c, apps/app_zapras.c, apps/app_externalivr.c,
	  apps/app_ices.c, res/res_musiconhold.c: Merged revisions 48375
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48375 | tilghman | 2006-12-10 18:47:21 -0600
	  (Sun, 10 Dec 2006) | 13 lines Merged revisions 48374 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48374 | tilghman | 2006-12-10 18:33:59 -0600 (Sun, 10
	  Dec 2006) | 5 lines When doing a fork() and exec(), two problems
	  existed (Issue 8086): 1) Ignored signals stayed ignored after the
	  exec(). 2) Signals could possibly fire between the fork() and
	  exec(), causing Asterisk signal handlers within the child to
	  execute, which caused nasty race conditions. ........
	  ................

2006-12-10 03:14 +0000 [r48373]  Steve Murphy <murf@digium.com>

	* channels/chan_zap.c, /: Merged revisions 48372 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48372 | murf | 2006-12-09 20:04:18 -0700 (Sat,
	  09 Dec 2006) | 9 lines Merged revisions 48371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48371 | murf | 2006-12-09 19:14:13 -0700 (Sat, 09 Dec 2006) | 1
	  line This version applies the patch suggested by stevens in bug
	  7836 (make inbound channel RINGING state consistent with other
	  channels). ........ ................

2006-12-09 16:44 +0000 [r48359-48365]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: convert the thread IO state and type to use
	  enums.

	* /, channels/chan_iax2.c: Merged revisions 48363 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48363 | russell | 2006-12-09 10:59:42 -0500 (Sat, 09 Dec 2006) |
	  8 lines Use locking when accessing the registrations list. This
	  list is not actually used very often, so the likelihood of there
	  being a problem is pretty small, but still possible. For example,
	  if the CLI command to list the registrations was called at the
	  same time that a reload was occurring and the registrations list
	  was getting destroyed and rebuilt, a crash could occur. In
	  passing, go ahead and convert this list to use the linked list
	  macros. ........

	* channels/chan_iax2.c: chan_iax2 has an extremely large function,
	  socket_process(), to handle incoming frames. The function, before
	  this commit, was roughly 1400 lines long. So, I am working on
	  breaking this up into functions so that the code is easier to
	  follow and debug. Also, I will be committing these changes in
	  chunks as I do them to ease tracking down any potentially
	  introduced problems. Break out roughly 150 lines from
	  socket_process() and introduce a new function,
	  socket_process_meta() which handles the parsing of an incoming
	  meta frame. Also, restructure some of this code a bit to reduce
	  the deep nesting that was in this code.

	* channels/chan_iax2.c: - Fix a few spelling mistakes - Use
	  sizeof() to pass an array size to a function - Use a single bit
	  for a variable in the chan_iax2_pvt stuct since that is all it
	  needs. - Add some comments about the iaxs, iaxl, and lastused
	  arrays.

2006-12-07 18:21 +0000 [r48358]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 48357 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48357 | russell | 2006-12-07 13:17:28 -0500
	  (Thu, 07 Dec 2006) | 11 lines Merged revisions 48356 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48356 | russell | 2006-12-07 13:14:13 -0500 (Thu, 07
	  Dec 2006) | 3 lines Ensure that the file position is not
	  incremented beyond the total number of files available for
	  playback. (issue #8539, ulogic) ........ ................

2006-12-07 16:42 +0000 [r48351]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/http.h, main/manager.c, main/http.c,
	  configs/manager.conf.sample: - Generalize the function
	  ssl_setup() so that the certificate info are passed as an
	  argument. - Update the code in main/http.c to use the new
	  interface (the diff is large but mostly mechanical, due to the
	  name change of several variables); - And since now it is trivial,
	  implement "AMI over TLS", and document the possible options in
	  manager.conf - And since the test client (openssl s_client
	  -connect host:port ) does not generate \r\n as a line terminator,
	  make get_input() also accept just a \n as a line terminator (Mac
	  users: do you also need the \r-only version ?) The option parsing
	  in manager.conf is not very efficient, and needs to be cleaned up
	  and made similar to what we have in http.conf

2006-12-07 16:03 +0000 [r48350]  Steve Murphy <murf@digium.com>

	* main/manager.c, /: Merged revisions
	  47986,47995,47997,48001,48003-48004,48008-48014,48016,48018-48019
	  via svnmerge from https://origsvn.digium.com/svn/asterisk/trunk
	  ................ r47986 | oej | 2006-11-24 07:00:19 -0700 (Fri,
	  24 Nov 2006) | 6 lines Doxygen update - Document cause codes -
	  Document a bit more on channel variables - global, predefined and
	  local - Fix some doxygen in channel.h. Adding one comment for two
	  definitions does not work. They won't be copied to each.
	  ................ r47995 | murf | 2006-11-24 10:40:49 -0700 (Fri,
	  24 Nov 2006) | 1 line This fix inspired by a patch supplied in
	  bug 8189, which points out problems with the PLC code
	  ................ r47997 | murf | 2006-11-24 11:17:25 -0700 (Fri,
	  24 Nov 2006) | 1 line removed the svnmerge-integrated property
	  from trunk; it's confusing svnmerge in newly created branches
	  ................ r48001 | rizzo | 2006-11-25 02:02:42 -0700 (Sat,
	  25 Nov 2006) | 5 lines set pointers to NULL after freeing memory
	  to avoid multiple free() probably 1.4/1.2 issue as well if
	  someone can look into that. ................ r48003 | oej |
	  2006-11-25 02:45:57 -0700 (Sat, 25 Nov 2006) | 9 lines - Adding
	  comment on suspicious memory allocation. Seems like it's never
	  freed, but I don't have a clear understanding of the frame
	  allocation/deallocation, so I just mark this for investigation.
	  (Reported by Ed Guy). We're trying to see if a free() hurts... -
	  Doxygen comments on p2p rtp bridge stuff. I am a bit worried
	  about shortcutting rtcp this way, but will need feedback from
	  rtcp gurus. This should work for video calls too, and possibly
	  UDPTL. ................ r48004 | oej | 2006-11-25 02:48:30 -0700
	  (Sat, 25 Nov 2006) | 2 lines Changing ERROR to lesser level.
	  Imported from 1.2/1.4 ................ r48008 | rizzo |
	  2006-11-25 10:37:04 -0700 (Sat, 25 Nov 2006) | 7 lines generalize
	  a bit the functions used to create an tcp socket and then run a
	  service on it. The code in manager.c does essentially the same
	  things, so we will be able to reuse the code in here (probably
	  moving it to netsock.c or another appropriate library file).
	  ................ r48009 | mattf | 2006-11-25 13:30:04 -0700 (Sat,
	  25 Nov 2006) | 1 line Updates to show linkset command
	  ................ r48010 | mattf | 2006-11-25 13:54:38 -0700 (Sat,
	  25 Nov 2006) | 2 lines Add ss7 show linkset command
	  ................ r48011 | mattf | 2006-11-25 14:32:33 -0700 (Sat,
	  25 Nov 2006) | 1 line Make sure we don't send a group reset on a
	  group larger than 32 CICs ................ r48012 | mattf |
	  2006-11-25 14:35:23 -0700 (Sat, 25 Nov 2006) | 1 line bug fix
	  ................ r48013 | mattf | 2006-11-25 14:46:58 -0700 (Sat,
	  25 Nov 2006) | 1 line Make compiler happier ................
	  r48014 | mattf | 2006-11-25 14:50:42 -0700 (Sat, 25 Nov 2006) | 1
	  line Little fix so we use the right message ................
	  r48016 | murf | 2006-11-25 17:15:42 -0700 (Sat, 25 Nov 2006) | 9
	  lines Merged revisions 48015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48015 | murf | 2006-11-25 17:01:34 -0700 (Sat, 25 Nov 2006) | 1
	  line A little bit of func_cdr documentation upgrade-- no bug#
	  involved, although 8221 may have inspired it. ........
	  ................ r48018 | murf | 2006-11-25 17:31:13 -0700 (Sat,
	  25 Nov 2006) | 9 lines Merged revisions 48017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48017 | murf | 2006-11-25 17:26:16 -0700 (Sat, 25 Nov 2006) | 1
	  line might as well also document the raw values of the flag vars
	  ........ ................ r48019 | russell | 2006-11-25 23:55:33
	  -0700 (Sat, 25 Nov 2006) | 6 lines - Add some comments on thread
	  storage with a brief explanation of what it is as well as what
	  the motivation is for using it. - Add a comment by the
	  declaration of ast_inet_ntoa() noting that this function is not
	  reentrant, and the result of a previous call to the function is
	  no longer valid after calling it again. ................

2006-12-06 20:46 +0000 [r48332-48338]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: remove duplicated code to start the server
	  threads, use the infrastructure exposed in http.c earlier today.
	  As a bonus, now we can restart the session on a different port
	  just reloading the module. On passing, fix a bug in the handling
	  of 'enabled' in the configuration file - previously, a missing
	  "enabled=" line in manager.conf meant "whatever the state was
	  before" instead of a specific value.

	* main/manager.c: Part of the transformations necessary to add TLS
	  support, as described in
	  http://lists.digium.com/pipermail/asterisk-dev/2006-December/025213.html
	  In detail, this commit does the following: b) change the function
	  get_input() to use fread() instead of read() to collect the data.
	  One can still do the ast_wait_for_input() on the original
	  descriptor returned by accept(). c) change the function
	  send_string() to work on the FILE *. As a side effect, this
	  change now really guarantees that we don't spend more than
	  "writetimeout" milliseconds on each line sent. d) modify the
	  function action_command() so that it creates a temporary file
	  descriptor to be passed to ast_cli_command(), and then read back
	  the data from the temp file and write it to the output with
	  send_string(). The code is similar to what is done in
	  generic_http_callback() to support AMI-over-HTTP.

2006-12-06 16:54 +0000 [r48327]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Handle multiple 487's correctly

2006-12-06 16:19 +0000 [r48325]  Russell Bryant <russell@digium.com>

	* configs/iax.conf.sample, /: Merged revisions 48323 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48323 | russell | 2006-12-06 11:15:45 -0500
	  (Wed, 06 Dec 2006) | 11 lines Merged revisions 48322 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48322 | russell | 2006-12-06 11:05:54 -0500 (Wed, 06
	  Dec 2006) | 3 lines Fix the name of the rtignoreregexpire option
	  in the sample configuration file. (issue #8526, arkadia) ........
	  ................

2006-12-06 16:17 +0000 [r48324]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/http.h, main/http.c: Make externally visible
	  some generic code useful to create and implement services over
	  tcp and/or tcp-tls. This commit is nothing more than moving
	  structure definitions (and documentation) from main/http.c to
	  include/asterisk/http.h (temporary location until we find a
	  better place), and removing the 'static' qualifier from
	  server_root() and server_start(). The name change (adding the
	  ast_ prefix as a minimum, and then possibly a more meaningful
	  name) is postponed to future commits. Does not apply to other
	  versions of asterisk.

2006-12-06 12:34 +0000 [r48318]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Don't send Contact in SIP Messages
	  (imported from 1.2/1.4). Reported by Gunnar at Omnitor.

2006-12-06 07:39 +0000 [r48299-48307]  Russell Bryant <russell@digium.com>

	* apps/app_osplookup.c, apps/app_meetme.c, apps/app_queue.c,
	  apps/app_voicemail.c: Resolve some pointer signedness compiler
	  warnings in app_osplookup, and constify a bunch of usage strings
	  for CLI commands.

	* channels/chan_local.c, channels/chan_skinny.c,
	  channels/chan_agent.c, channels/chan_features.c,
	  channels/chan_alsa.c, channels/iax2-provision.c,
	  channels/chan_gtalk.c, channels/chan_oss.c, channels/chan_mgcp.c:
	  Constify a bunch of usage strings for CLI commands.

	* res/res_config_pgsql.c, res/res_limit.c, res/res_agi.c,
	  res/res_crypto.c, res/res_realtime.c, res/res_jabber.c,
	  res/res_odbc.c: Constify a bunch of usage strings for CLI
	  commands.

	* main/channel.c, main/udptl.c, main/frame.c, main/translate.c,
	  main/file.c, pbx/pbx_dundi.c, main/db.c, main/rtp.c: Staticize
	  one, and Constify a bunch of usage strings for CLI commands.

	* channels/chan_zap.c, channels/chan_sip.c, channels/chan_iax2.c,
	  main/asterisk.c, main/cli.c: Constify a bunch of the usage
	  strings for CLI commands.

	* channels/chan_iax2.c: Instead of creating an unused instance of
	  an unnamed enum, give it a name.

	* include/asterisk/cli.h: Make the "usage" member of the
	  ast_cli_entry struct const to resolve a compiler warning.

2006-12-05 20:46 +0000 [r48282]  Joshua Colp <jcolp@digium.com>

	* configure: Regenerate configure for Qwell's last commit.

2006-12-05 20:44 +0000 [r48280]  Jason Parker <jparker@digium.com>

	* /, configure.ac: Merged revisions 48279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48279 | qwell | 2006-12-05 14:42:52 -0600 (Tue, 05 Dec 2006) | 4
	  lines Fix curl version number testing to be much more friendly to
	  non-bash shells. Issue 8508, patch by me. This *SHOULD* be POSIX
	  compliant now.. ........

2006-12-05 20:39 +0000 [r48277]  Olle Johansson <oej@edvina.net>

	* include/asterisk/rtp.h, include/asterisk/channel.h, main/rtp.c:
	  Doxygen updates

2006-12-05 20:15 +0000 [r48276]  Jason Parker <jparker@digium.com>

	* main/tdd.c, include/asterisk/fskmodem.h, main/callerid.c,
	  main/fskmodem.c: Expand on r48273 (from issue 8506), to translate
	  more of the fskmodem stuff to English. r48273 dealt with the
	  comments and such, this deals with the code itself. (This
	  couldn't have been easily done if it weren't for 48273 - thanks
	  again for that merbanan)

2006-12-05 19:41 +0000 [r48269-48273]  Olle Johansson <oej@edvina.net>

	* include/asterisk/fskmodem.h, main/fskmodem.c: Issue #8506 -
	  translate spanish comments in fskmodem to english (according to
	  bug guidelines) Thanks merbanan!

	* /: Blocking invitestate patch that is already merged to svn
	  trunk.

	* /, configs/sip.conf.sample: Adding docs on t.38

2006-12-05 14:33 +0000 [r48266]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c: 1. Change to remove the compiling warning:
	  "app_osplookup.c:2169: warning: initialization discards
	  qualifiers from pointer target type"

2006-12-05 11:09 +0000 [r48258-48259]  Olle Johansson <oej@edvina.net>

	* main/frame.c, include/asterisk/frame.h, main/rtp.c: Well, yes...

	* main/frame.c, include/asterisk/frame.h, main/rtp.c: Reserving
	  flags for coming code (currently in the "videocaps" branch)
	  implementing T.140 support in RTP. T.140/RFC 4351 is TDD over IP
	  - text telephony for hearing impaired. It defines a realtime text
	  chat, much like the old "talk" application in Unix. T.140 is
	  character by character in real time. It's not the same as our
	  current MESSAGE format - that is more like IM, but can be
	  gatewayed to MESSAGE with a text "codec" if needed. More patches
	  will follow, as soon as we've separated this code from the video
	  capabilities functions in the videocaps branch. Code by John
	  Martin, Aupix (disclaimer on file)

2006-12-05 01:46 +0000 [r48253-48255]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48254 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48254 | tilghman | 2006-12-04 19:41:02 -0600 (Mon, 04 Dec 2006)
	  | 2 lines Oops, forgot to release the odbc handle ........

	* /, apps/app_voicemail.c: Merged revisions 48252 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48252 | tilghman | 2006-12-04 19:34:34 -0600
	  (Mon, 04 Dec 2006) | 14 lines Merged revisions 48251 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48251 | tilghman | 2006-12-04 19:26:08 -0600 (Mon, 04
	  Dec 2006) | 6 lines If the recording in the database is too
	  large, it will fail to retrieve with an mmap error. Not too sure
	  why this doesn't happen when we put it in the database, also, but
	  since that doesn't seem to be broken, I'm not going to fix it (at
	  least until someone reports it). Solution is to ask for the file
	  in smaller chunks. (Bug 8385) ........ ................

2006-12-04 21:49 +0000 [r48249]  Jason Parker <jparker@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48248 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48248 | qwell | 2006-12-04 15:48:41 -0600 (Mon, 04 Dec 2006) | 2
	  lines Fix an issue which didn't allow unavail/greet/busy/etc
	  messages from being saved into ODBC (and probably IMAP). ........

2006-12-04 17:55 +0000 [r48229-48231]  Jason Parker <jparker@digium.com>

	* /, configs/voicemail.conf.sample: Merged revisions 48230 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48230 | qwell | 2006-12-04 11:54:46 -0600 (Mon, 04 Dec 2006) | 4
	  lines Add documentation to voicemail.conf.sample for ODBC
	  storage. Issue 8499 - patch by blitzrage. ........

	* /, doc/snmp.txt: Merged revisions 48228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48228 | qwell | 2006-12-04 11:43:24 -0600 (Mon, 04 Dec 2006) | 4
	  lines Attempt to document some of the dependencies that are
	  needed for net-snmp Issue 8499 - initial patch by blitzrage.
	  ........

2006-12-03 06:35 +0000 [r48224]  Russell Bryant <russell@digium.com>

	* /, sounds/Makefile: Merged revisions 48223 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48223 | russell | 2006-12-03 01:34:14 -0500 (Sun, 03 Dec 2006) |
	  3 lines When "fetch" is in use, instead of "wget", --continue is
	  not a valid option. (issue #8451) ........

2006-12-02 22:03 +0000 [r48200-48220]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Cleaning up handle_response a bit.
	  (Imported from 1.4)

	* .cleancount: Removing two .h files means we need to update
	  cleancount to force make depend again (or ?)

	* channels/chan_sip.c: Send CANCEL to call with early media
	  (PROGRESS INBAND). This is imported from branch "invitestate" and
	  "invitestate-1.4" *** *** *** IF YOU HAVE ISSUES WITH
	  BYEs/CANCELs - PLEASE UPDATE AND TEST AGAIN! *** Thank you! ***
	  *** /Olle

	* channels/chan_sip.c: Invitestate updates

	* agi/Makefile: Oops. Something is wrong in the agi directory.
	  Asking for autoconfig.h. I have it disabled locally, but no
	  reason to commit that change.

	* apps/app_sms.c: Doxygenification

	* main/coef_out.h (removed), main/tdd.c, main/callerid.c,
	  main/fskmodem.c, main/coef_in.h (removed): - Code formatting -
	  remove coef_in.h and coef_out.h that was only included as data
	  definitions in fskmodem.c If you understand spanish, please help
	  us translate the comments in fskmodem.c. Thanks!

	* /, channels/chan_sip.c, include/asterisk/rtp.h,
	  configs/sip.conf.sample, main/rtp.c: - Disable RTP timeouts
	  during T.38 transmission - Encapsulate RTP timers to the RTP
	  structure, so we have one set for video and one for audio -
	  Document RTP keepalive configuration option - Cleanup and
	  document the monitor support function to hangup on RTP timeouts -
	  Add RTP keepalive to SIP show settings Imported from 1.4 with
	  modifications for trunk.

2006-12-01 23:39 +0000 [r48194]  Kevin P. Fleming <kpfleming@digium.com>

	* apps/app_dial.c, /: Merged revisions 48193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48193 | kpfleming | 2006-12-01 17:37:28 -0600
	  (Fri, 01 Dec 2006) | 10 lines Merged revisions 48192 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48192 | kpfleming | 2006-12-01 17:30:59 -0600 (Fri, 01
	  Dec 2006) | 2 lines if Dial() is going to send music-on-hold to
	  the calling party, it has to send PROGRESS first to ensure that
	  the reverse audio path has been setup first (BE-106) ........
	  ................

2006-12-01 23:20 +0000 [r48191]  Russell Bryant <russell@digium.com>

	* Makefile, /, configure, configure.ac, makeopts.in,
	  sounds/Makefile: Merged revisions 48190 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48190 | russell | 2006-12-01 18:16:28 -0500 (Fri, 01 Dec 2006) |
	  12 lines FreeBSD 6.1 does not include wget by default. However,
	  it has fetch which will work just fine for our purposes of
	  downloading the sounds packages. So, check for both wget and
	  fetch and the configure script and use what was found to download
	  them. If neither one was found, and sound packages are selected
	  that must be downloaded, the install process will print out an
	  informative error message indicating the situation. Also, fix a
	  couple places where "make" was hard coded into some output
	  messages by replacing them with the $(MAKE) variable. (issue
	  #8451, initial patch by pabelanger, with additional modifications
	  by me) ........

2006-12-01 20:49 +0000 [r48188]  Olle Johansson <oej@edvina.net>

	* main/channel.c: Formatting fix

2006-12-01 20:26 +0000 [r48187]  Jason Parker <jparker@digium.com>

	* /, configs/extensions.conf.sample: Merged revisions 48186 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48186 | qwell | 2006-12-01 14:25:51 -0600 (Fri,
	  01 Dec 2006) | 10 lines Merged revisions 48183 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48183 | qwell | 2006-12-01 14:19:10 -0600 (Fri, 01 Dec 2006) | 2
	  lines Fix a small typo - issue 8848, reported by pabelanger
	  ........ ................

2006-12-01 19:41 +0000 [r48180]  Tilghman Lesher <tlesher@digium.com>

	* /, main/cli.c: Merged revisions 48179 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48179 | tilghman | 2006-12-01 13:38:59 -0600 (Fri, 01 Dec 2006)
	  | 2 lines Double-unlock error (reported by blitzrage on IRC)
	  ........

2006-12-01 18:16 +0000 [r48175-48178]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, configs/sip.conf.sample: - Remove T.38
	  early media, since T.38 requires two way communication (imported
	  from 1.4) - Small fixes to limitonpeer

	* include/asterisk/threadstorage.h: Tiny doxygen improvement

2006-11-30 21:22 +0000 [r48169]  Joshua Colp <jcolp@digium.com>

	* /, include/asterisk/rtp.h, channels/chan_gtalk.c, main/rtp.c:
	  Merged revisions 48168 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48168 | file | 2006-11-30 16:18:24 -0500 (Thu, 30 Nov 2006) | 2
	  lines Do not do a partial bridge for Google Talk since we need to
	  handle STUN. (issue #8448 reported by phsultan) ........

2006-11-30 20:55 +0000 [r48164-48167]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Issue #8319 (imported from 1.2, 1.4) -
	  Increment nonce-count properly (noriyuki)

	* include/asterisk/devicestate.h, main/pbx.c, main/devicestate.c,
	  include/asterisk/channel.h, include/asterisk/pbx.h: Documentation
	  updates

2006-11-30 20:29 +0000 [r48153-48163]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 48158 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48158 | file | 2006-11-30 15:07:55 -0500 (Thu,
	  30 Nov 2006) | 10 lines Merged revisions 48157 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48157 | file | 2006-11-30 15:06:43 -0500 (Thu, 30 Nov 2006) | 2
	  lines Only print out debug message if bridged channel is not
	  NULL. (issue #8412 reported by jubilex) ........ ................

	* /, res/res_features.c: Merged revisions 48155 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48155 | file | 2006-11-30 14:05:14 -0500 (Thu,
	  30 Nov 2006) | 10 lines Merged revisions 48154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48154 | file | 2006-11-30 14:04:11 -0500 (Thu, 30 Nov 2006) | 2
	  lines Do not listen for DTMF on the bridge that comes into
	  existence when ParkedCall is executed. This means native bridging
	  can now occur for this. (issue #8406 reported by kebl0155)
	  ........ ................

	* main/cdr.c, /: Merged revisions 48152 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48152 | file | 2006-11-30 13:47:40 -0500 (Thu,
	  30 Nov 2006) | 10 lines Merged revisions 48151 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48151 | file | 2006-11-30 13:42:45 -0500 (Thu, 30 Nov 2006) | 2
	  lines Print certain CDR messages out at the NOTICE level versus
	  WARNING since they can occur when used with the CDR applications
	  and are perfectly fine. (issue #8367 reported by dartvader)
	  ........ ................

2006-11-30 18:25 +0000 [r48149-48150]  Olle Johansson <oej@edvina.net>

	* main/devicestate.c: Small update

	* agi/Makefile, contrib/asterisk-ng-doxygen, agi/eagi-test.c,
	  main/devicestate.c, agi/eagi-sphinx-test.c: Doxygen updates

2006-11-30 18:20 +0000 [r48144-48148]  Joshua Colp <jcolp@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 48143 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48143 | file | 2006-11-30 12:57:35 -0500 (Thu,
	  30 Nov 2006) | 10 lines Merged revisions 48142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48142 | file | 2006-11-30 12:55:23 -0500 (Thu, 30 Nov 2006) | 2
	  lines Document 'port' for SIP peers, came up because of the
	  current mailing list thread. (issue #8450 reported by blitzrage)
	  ........ ................

2006-11-30 17:15 +0000 [r48130-48139]  Olle Johansson <oej@edvina.net>

	* include/asterisk/doxyref.h, main/devicestate.c: Adding some
	  generic docs on extension and device states - watchers and
	  providers

	* doc/manager.txt, /: Add information on status events

	* /, channels/chan_sip.c: Merging patch from 1.2/1.4. I think this
	  was originally spotted by Luigi, but hit me in the back today.

2006-11-30 03:29 +0000 [r48116-48123]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c: I am pretty sure that oej only meant to
	  change the variable name in the source, not the configuration
	  option name so let's turn it back to srvlookup instead of
	  global_srvlookup. (issue #8442 reported by jtodd)

	* /, apps/app_voicemail.c: Merged revisions 48115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48115 | file | 2006-11-29 16:05:17 -0500 (Wed, 29 Nov 2006) | 2
	  lines Use MAILTMPLEN instead of sizeof in mm_login. (issue #8420
	  reported by slimey) ........

2006-11-29 20:57 +0000 [r48111-48114]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Clarify some settings for status
	  reports in subscriptions, queues and manager

	* /, configs/sip.conf.sample: Explain RTP timeouts

	* main/rtp.c: Change logging for p2p rtp bridge mode

2006-11-29 17:59 +0000 [r48109-48110]  Russell Bryant <russell@digium.com>

	* include/asterisk/threadstorage.h: - Fix a few spelling mistakes.
	  - Add some more documentation for the
	  ast_dynamic_str_............() function to document the behavior
	  of the function in the case of a partial write. Also, document
	  the return value and note that the function should never need to
	  be called directly.

	* main/utils.c: Go ahead and make this write unconditional. Making
	  it conditional is more work in both the append and non-append
	  modes. Also, always truncating the partial write makes the
	  behavior of the function more consistent, where in any type of
	  write, no partial result is left in the buffer. Thanks for the
	  feedback, luigi

2006-11-29 16:53 +0000 [r48108]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 48107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48107 | file | 2006-11-29 11:50:33 -0500 (Wed,
	  29 Nov 2006) | 10 lines Merged revisions 48106 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48106 | file | 2006-11-29 11:47:10 -0500 (Wed, 29 Nov 2006) | 2
	  lines If the frame was duplicated before writing out then we need
	  to free it. (issue #8429 reported by edguy3) ........
	  ................

2006-11-29 05:08 +0000 [r48103]  Russell Bryant <russell@digium.com>

	* main/utils.c: Remove an XXX command suggesting that this
	  truncation should not be conditional, and also add a more verbose
	  comment explaining why it is only needed in the case of appending
	  to the string for any curious readers that come along in the
	  future.

2006-11-29 04:28 +0000 [r48100-48102]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48101 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48101 | file | 2006-11-28 23:26:53 -0500 (Tue, 28 Nov 2006) | 2
	  lines Don't crash if the mailstream was not created. ........

	* sounds/Makefile: Use the proper version of extra sounds. (issue
	  #8441 reported by jtodd)

2006-11-28 23:13 +0000 [r48098-48099]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: Add a comment to note near some code that
	  performs a very expensive operation that occurs for every
	  incoming media frame.

	* codecs/codec_zap.c: resolve a couple of compiler warnings

2006-11-28 18:28 +0000 [r48096]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 48095 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48095 | qwell | 2006-11-28 12:26:53 -0600 (Tue, 28 Nov 2006) | 2
	  lines Export several more variables in top level Makefile.
	  Inspired by issue 8438. ........

2006-11-28 17:08 +0000 [r48090]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: don't use outputstr in the struct mansession,
	  it's just an extra allocation on a path where we have way too
	  many already. Unfortunately the AMI-over-HTTP requires multiple
	  copies, because we need to generate a header, then the raw output
	  to an intermediate buffer, then convert it to html/xml, and
	  finally copy everything into a malloc'ed buffer because that's
	  what the generic_http_callback interface expects.

2006-11-28 16:59 +0000 [r48089]  Joshua Colp <jcolp@digium.com>

	* channels/chan_phone.c, /: Merged revisions 48088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48088 | file | 2006-11-28 11:57:16 -0500 (Tue,
	  28 Nov 2006) | 10 lines Merged revisions 48087 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48087 | file | 2006-11-28 11:56:01 -0500 (Tue, 28 Nov 2006) | 2
	  lines According to the research I have done we never needed to
	  include compiler.h in the first place so let's not! (issue #8430
	  reported by edguy3) ........ ................

2006-11-28 15:53 +0000 [r48062-48086]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: initialize the dynamic string in a sane way.

	* main/utils.c: some simplifications to
	  ast_dynamic_str_thread_build_va_couldnt_we_choose_a_shorter_name()
	  I am unsure whether the truncation of the string in case of a
	  failed attempt should be done unconditionally. See the XXX mark.
	  Russel, ideas ?

	* main/manager.c: do not return 500 Internal error if the AMI
	  command provides no output.

	* main/manager.c: mosty comment and documentation cleanup on
	  waitevent.

	* main/manager.c: Move the code to purge stale sessions to a
	  function, to simplify the body of the main loop of the accepting
	  thread. Rename purge_unused() to purge_events() so one knows what
	  the function does.

	* main/manager.c: Various simplifications of the code: + use a
	  wrapper around ast_carefulwrite(), used in two places, to make
	  life easier when we decide to use a different interface to the
	  socket. + put an ast_verbose() message on astman_append on a case
	  that should never happen now that we use a temporary file for
	  AMI-over-HTTP sessions + document and slightly simplify
	  process_events() by removing unnecessary parentheses. + in
	  get_input(), use ast_wait_for_input() instead of poll(). We may
	  want to move to a completely non-blocking

	* main/manager.c: More informative message on invalid commands.

	* main/manager.c: another normalization of AMI vs HTTP
	  identification. Should really define a macro IS_AMI(s) so it is
	  clear what we want to do.

	* main/manager.c: always use managerid to determine whether this is
	  an AMI or HTTP session, and document it.

	* main/http.c: In the previous commit i forgot to set the
	  poll_timeout to -1, causing the http threads to do busy waiting
	  around the socket... Fix the mistake, sorry for the
	  inconvenience!

	* main/http.c: document the support for running a server on TCP/TLS
	  and opening an SSL socket. We are almost ready to make this code
	  available to other modules.

	* main/http.c, configs/http.conf.sample: add a new http.conf
	  option, sslbindaddr. Because https is more secure than http, it
	  usually makes sense to keep this service more open than the one
	  on the unencrypted port.

	* main/http.c: in the helper thread, separate the FILE * creation
	  from the actual function doing work on the socket. This is
	  another generalization to provide a generic mechanism to open
	  TCP/TLS socket with a thread managing the accpet and children
	  threads managing the individual sessions.

	* main/http.c: staticize a global variable and remove an unused
	  field structure.

2006-11-27 18:10 +0000 [r48056]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 48054 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48054 | file | 2006-11-27 13:06:50 -0500 (Mon,
	  27 Nov 2006) | 10 lines Merged revisions 48053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48053 | file | 2006-11-27 13:03:57 -0500 (Mon, 27 Nov 2006) | 2
	  lines Use the proper function to get the new message count
	  instead of always using the filesystem. (issue #8421 reported by
	  slimey) ........ ................

2006-11-27 17:31 +0000 [r48050]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 48049 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48049 | tilghman | 2006-11-27 11:20:37 -0600
	  (Mon, 27 Nov 2006) | 10 lines Merged revisions 48045 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r48045 | tilghman | 2006-11-27 11:15:54 -0600 (Mon, 27
	  Nov 2006) | 2 lines Random MOH wasn't really random (bug 8381)
	  ........ ................

2006-11-27 15:48 +0000 [r48039-48040]  Joshua Colp <jcolp@digium.com>

	* pbx/pbx_spool.c: More fixes for referencing a structure after it
	  has been freed. (issue #8425 reported by arkadia)

	* pbx/pbx_spool.c, /: Merged revisions 48038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r48038 | file | 2006-11-27 10:32:19 -0500 (Mon,
	  27 Nov 2006) | 10 lines Merged revisions 48037 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r48037 | file | 2006-11-27 10:30:37 -0500 (Mon, 27 Nov 2006) | 2
	  lines Do not reference the freed outgoing structure in the debug
	  message. (issue #8425 reported by arkadia) ........
	  ................

2006-11-27 14:47 +0000 [r48034]  Luigi Rizzo <rizzo@icir.org>

	* funcs/func_cdr.c: remove an extra comma in an initializer
	  Detected by: AST_DEVMODE=yes

2006-11-27 06:59 +0000 [r48032-48033]  Olle Johansson <oej@edvina.net>

	* include/asterisk/doxyref.h, include/asterisk/threadstorage.h:
	  Doxygen updates

	* /, channels/chan_sip.c: Change error message (imported from 1.4)

2006-11-26 06:55 +0000 [r48019]  Russell Bryant <russell@digium.com>

	* include/asterisk/utils.h, include/asterisk/threadstorage.h: - Add
	  some comments on thread storage with a brief explanation of what
	  it is as well as what the motivation is for using it. - Add a
	  comment by the declaration of ast_inet_ntoa() noting that this
	  function is not reentrant, and the result of a previous call to
	  the function is no longer valid after calling it again.

2006-11-26 00:31 +0000 [r48016-48018]  Steve Murphy <murf@digium.com>

	* /, funcs/func_cdr.c: Merged revisions 48017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48017 | murf | 2006-11-25 17:26:16 -0700 (Sat, 25 Nov 2006) | 1
	  line might as well also document the raw values of the flag vars
	  ........

	* /, funcs/func_cdr.c: Merged revisions 48015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r48015 | murf | 2006-11-25 17:01:34 -0700 (Sat, 25 Nov 2006) | 1
	  line A little bit of func_cdr documentation upgrade-- no bug#
	  involved, although 8221 may have inspired it. ........

2006-11-25 21:50 +0000 [r48009-48014]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Little fix so we use the right message

	* channels/chan_zap.c: Make compiler happier

	* channels/chan_zap.c: bug fix

	* channels/chan_zap.c: Make sure we don't send a group reset on a
	  group larger than 32 CICs

	* channels/chan_zap.c: Add ss7 show linkset command

	* channels/chan_zap.c: Updates to show linkset command

2006-11-25 17:37 +0000 [r48008]  Luigi Rizzo <rizzo@icir.org>

	* main/http.c: generalize a bit the functions used to create an tcp
	  socket and then run a service on it. The code in manager.c does
	  essentially the same things, so we will be able to reuse the code
	  in here (probably moving it to netsock.c or another appropriate
	  library file).

2006-11-25 09:48 +0000 [r48003-48004]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Changing ERROR to lesser level. Imported
	  from 1.2/1.4

	* main/rtp.c: - Adding comment on suspicious memory allocation.
	  Seems like it's never freed, but I don't have a clear
	  understanding of the frame allocation/deallocation, so I just
	  mark this for investigation. (Reported by Ed Guy). We're trying
	  to see if a free() hurts... - Doxygen comments on p2p rtp bridge
	  stuff. I am a bit worried about shortcutting rtcp this way, but
	  will need feedback from rtcp gurus. This should work for video
	  calls too, and possibly UDPTL.

2006-11-25 09:02 +0000 [r48001]  Luigi Rizzo <rizzo@icir.org>

	* main/channel.c: set pointers to NULL after freeing memory to
	  avoid multiple free() probably 1.4/1.2 issue as well if someone
	  can look into that.

2006-11-24 18:17 +0000 [r47995-47997]  Steve Murphy <murf@digium.com>

	* /: removed the svnmerge-integrated property from trunk; it's
	  confusing svnmerge in newly created branches

	* /, main/translate.c: This fix inspired by a patch supplied in bug
	  8189, which points out problems with the PLC code

2006-11-24 14:00 +0000 [r47986]  Olle Johansson <oej@edvina.net>

	* include/asterisk/doxyref.h, main/pbx.c,
	  include/asterisk/causes.h, include/asterisk/channel.h: Doxygen
	  update - Document cause codes - Document a bit more on channel
	  variables - global, predefined and local - Fix some doxygen in
	  channel.h. Adding one comment for two definitions does not work.
	  They won't be copied to each.

2006-11-23 11:04 +0000 [r47957-47960]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Remove unused memory allocation

	* doc/asterisk-conf.txt: Document new configuration option.

2006-11-22 21:49 +0000 [r47933-47945]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 47944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47944 | file | 2006-11-22 16:47:43 -0500 (Wed, 22 Nov 2006) | 2
	  lines Video will never reach Packet2Packet bridging and can do
	  more harm then good. ........

	* CHANGES: Clarify a bit more.

	* CHANGES: Need to update the CHANGES file as well for the maxfiles
	  option.

	* main/asterisk.c: Add support to set the maximum number of files
	  open when Asterisk loads using the 'maxfiles' configuration
	  option. (issue #7499 reported by rkarlsba)

2006-11-22 11:28 +0000 [r47923]  Olle Johansson <oej@edvina.net>

	* channels/chan_h323.c: Don't over-deprecate... :-)

2006-11-22 05:49 +0000 [r47912]  Mark Spencer <markster@digium.com>

	* main/manager.c: Restore some sense of security to manager

2006-11-21 17:34 +0000 [r47898]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 47897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47897 | file | 2006-11-21 12:32:27 -0500 (Tue, 21 Nov 2006) | 2
	  lines If we have the non standard G726-32 setting turned on we
	  want to return G726-32 to the SDP, not our AAL2 string. (issue
	  #8330 reported by voipgate) ........

2006-11-21 15:25 +0000 [r47893]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Treat 101 as 100, not 183 session
	  progress

2006-11-21 11:53 +0000 [r47880-47881]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dial.c: better fix for the previous bug. In general this
	  code needs a deep revision, because the body of do_forward()
	  deletes/overwrites the output channel without freeing the resouce
	  in some cases, and without notifying the caller. Also, on FreeBSD
	  with MALLOC_OPTIONS set i am seeing various panics (duplicate
	  freee etc.)

	* apps/app_dial.c: do not ast_hangup() on a NULL channel. In the
	  original code this would happen in the case of o->forwards >=
	  AST_MAX_FORWARDS Likely an 1.2/1.4 isse as well - please someone
	  have a look, while I am hunting a few more similar panics now.

2006-11-20 20:04 +0000 [r47866]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 47864-47865 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47864 | tilghman | 2006-11-20 14:01:58 -0600 (Mon, 20 Nov 2006)
	  | 2 lines Oops, merge missed release of odbc object ........
	  ........

2006-11-20 19:52 +0000 [r47851-47861]  Joshua Colp <jcolp@digium.com>

	* main/frame.c, /: Merged revisions 47860 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47860 | file | 2006-11-20 14:51:36 -0500 (Mon,
	  20 Nov 2006) | 10 lines Merged revisions 47859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47859 | file | 2006-11-20 14:50:21 -0500 (Mon, 20 Nov 2006) | 2
	  lines Don't forget to byte swap if we are exiting the smoother
	  feed early. (issue #8287 reported by arturs) ........
	  ................

	* main/rtp.c: Use RTP/RTCP fds on the RTP structure, don't bother
	  storing them.

	* /, main/rtp.c: Merged revisions 47852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47852 | file | 2006-11-20 10:58:50 -0500 (Mon, 20 Nov 2006) | 2
	  lines Only remove/destroy the RTCP I/O item if it exists.
	  ........

	* apps/app_dial.c, /, apps/app_directed_pickup.c,
	  include/asterisk/channel.h, .cleancount: Merged revisions 47850
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47850 | file | 2006-11-20 10:51:37 -0500 (Mon, 20 Nov 2006) | 2
	  lines Use a separate variable in the channel structure to store
	  the context that the channel was dialed from. (issue #8382
	  reported by jiddings) ........

2006-11-20 14:08 +0000 [r47847]  Steve Murphy <murf@digium.com>

	* /: Erased the svnmerge-integrated prop from trunk. Please, in
	  your svnmerge-ings, don't let these props leak into the trunk or
	  branches.

2006-11-20 11:46 +0000 [r47844-47846]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Update docs for videosupport

	* /, channels/chan_sip.c: Properly reset schedule items (rizzo)

2006-11-19 04:22 +0000 [r47835-47836]  Steve Murphy <murf@digium.com>

	* UPGRADE.txt: Added a few words to explain the change to AEL
	  concerning Gosub()

	* doc/ael.txt: Added a few words of explanation about macros

2006-11-18 22:14 +0000 [r47822-47834]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: comments-only change: document a bit more when
	  manager events are delivered to the clients.

	* main/cdr.c, res/res_features.c, res/res_realtime.c:
	  ESS-ification. no need to bring this in 1.4, it is just code
	  cleanup

	* include/asterisk/cli.h, main/cli.c: Move this macro from cli.c to
	  cli.h so apps can use it without duplicating the macro or the
	  code: /*! * In many cases we need to print singular or plural *
	  words depending on a count. This macro helps us e.g. * printf("we
	  have %d object%s", n, ESS(n)); */ #define ESS(x) ((x) == 1 ? "" :
	  "s")

	* /, channels/chan_sip.c: Merged revisions 47823 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47823 | rizzo | 2006-11-18 18:59:35 +0100 (Sat, 18 Nov 2006) | 5
	  lines fix bug 7450 - Parsing fails if From header contains angle
	  brackets (the bug was only in a corner case where the < was right
	  after the opening quote, and the fix is trivial). ........

	* channels/chan_oss.c: prevent the sound thread from consuming all
	  the available CPU doing busy-wait on the output audio device. As
	  it is set now, it tries to push a frame every 10ms, which is
	  still too frequent but avoids deep restructuring of the code
	  (which i should do, though). Note, this is only for ring tones,
	  regular audio coming from the network is still delivered as soon
	  as it is available. Eventually this could well end up in the 1.4
	  branch, but since i am probably the only user of chan_oss there
	  isn't much urgency to do that.

2006-11-17 23:18 +0000 [r47821]  Steve Murphy <murf@digium.com>

	* include/asterisk/file.h, main/channel.c, res/res_features.c,
	  main/file.c, main/app.c, apps/app_directory.c,
	  apps/app_followme.c, apps/app_voicemail.c: This update fulfils
	  the request of bug 7109, which claimed the language arg to
	  ast_stream_and_wait() was redundant. Almost all calls just used
	  chan->language, and seeing how chan is the first argument, this
	  certainly seems redundant. A change of language could just as
	  easily be done by simply changing the channel language before
	  calling.

2006-11-17 22:56 +0000 [r47815-47818]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: remove a debugging message

	* main/cli.c: convert "help" to new style, fix completion of
	  arguments past the first one that i broke earlier today.

	* main/cli.c: standardize "module show [like]"

2006-11-17 21:51 +0000 [r47814]  Jason Parker <jparker@digium.com>

	* configs/voicemail.conf.sample, apps/app_voicemail.c: Add ability
	  to notify an external application/script that the voicemail
	  password was, while also still changing the password
	  "internally". Issue 7371, initial patch by pdunkel, with
	  rewrite/config comments by me. Additional modifications (yay
	  bitmask) by pdunkel.

2006-11-17 21:50 +0000 [r47813]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: describe a bit the patterns that you can have in the
	  commands, and add support for wildcard (spelled as '%'). On
	  passing fix a bug in the expansion code which was hidden and
	  appeared when implementing the wildcard The fix is just the line
	  'src != argindex', in case someone wants to test this on 1.4 -
	  but i would just keep this in trunk.

2006-11-17 20:46 +0000 [r47806]  Jason Parker <jparker@digium.com>

	* apps/app_queue.c: Add ability to add custom queue log via manager
	  interface. Issue 7806, patch by alexrch, with slight
	  modifications by me.

2006-11-17 18:26 +0000 [r47801]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add some sense of link state. Don't make
	  calls if link is down. Only reset if we're bringing the link up
	  for the first time.

2006-11-17 12:26 +0000 [r47787-47790]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: merge the implemenmtation of "core set debug" and
	  "core set verbose". No externally visible changes.

	* channels/chan_oss.c: remove an unused function

	* channels/chan_oss.c: use the regexp cli support on some of the
	  command

	* include/asterisk/cli.h, main/cli.c: introduce a bit of regexp
	  support in the internal CLI api. Now you can specify a cli
	  command as "console autoanswer [on|off]" which means the on|off
	  argument is optional, or "console {mute|unmute}" which means the
	  mute|unmute argument is mandatory. The blocks in [] or {} do not
	  necessarily need to be at the end of the string. Completions for
	  the variant parts are generated automatically. This should
	  significantly simplify the implementation of the various
	  handlers.

2006-11-17 01:05 +0000 [r47784]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we choose the last channel as the
	  dchannel if it's not E1 (for BRI). (#8077) Thanks Tzafrir.

2006-11-16 23:20 +0000 [r47783]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c, /, apps/app_db.c: Merged revisions 47782 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47782 | qwell | 2006-11-16 17:19:46 -0600 (Thu, 16 Nov 2006) | 2
	  lines Fix a couple of typos. Initially pointed out by mrobinson.
	  ........

2006-11-16 23:05 +0000 [r47779]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: convert two entries to new style

2006-11-16 23:00 +0000 [r47778]  Kevin P. Fleming <kpfleming@digium.com>

	* /, doc/billing.txt: Merged revisions 47777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47777 | kpfleming | 2006-11-16 17:00:10 -0600
	  (Thu, 16 Nov 2006) | 12 lines update documentation regarding IAX2
	  transfers and CDRs Merged revisions 47776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47776 | kpfleming | 2006-11-16 16:57:31 -0600 (Thu, 16 Nov 2006)
	  | 2 lines update clearly wrong documentation regarding cdr_custom
	  ........ ................

2006-11-16 22:51 +0000 [r47775]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c: Remove the interim variable for range
	  modifications, and set it on the structure directly. Also move
	  the default checking to where it gets set initially. Fixes
	  suggested by file.

2006-11-16 22:44 +0000 [r47772]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: convert some handlers to new style.

2006-11-16 22:32 +0000 [r47771]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: Add ability to
	  modify range for dring matching. Issue #8369, patch by ssuehring,
	  modified slightly by me.

2006-11-16 22:03 +0000 [r47769-47770]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: fix indentation

	* main/cli.c: remove an unused function

2006-11-16 21:13 +0000 [r47763-47765]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 47764 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47764 | file | 2006-11-16 16:11:06 -0500 (Thu, 16 Nov 2006) | 2
	  lines Compare technology using the pointers instead of a straight
	  comparison based on name. (issue #8228 reported by dean bath)
	  ........

2006-11-16 20:10 +0000 [r47759]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, configure.ac: Merged revisions 47758 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r47758 | kpfleming | 2006-11-16 14:09:10 -0600 (Thu, 16
	  Nov 2006) | 2 lines check for pre-1.4 versions of Zaptel and
	  abort the configure script if found with an appropriate error
	  message ........

2006-11-16 19:29 +0000 [r47756]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Make it possible
	  to enable/disable onhold tracking, in order to make life easier
	  for realtime users.

2006-11-16 18:32 +0000 [r47747-47752]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /: Merged revisions 47751 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47751 | file | 2006-11-16 13:29:12 -0500 (Thu,
	  16 Nov 2006) | 10 lines Merged revisions 47750 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47750 | file | 2006-11-16 13:26:50 -0500 (Thu, 16 Nov 2006) | 2
	  lines Because of the way chan_local is written we should be extra
	  careful and make sure our callback functions have a tech_pvt.
	  (issue #8275 reported by mflorell) ........ ................

	* /, apps/app_meetme.c: Merged revisions 47748 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47748 | file | 2006-11-16 12:52:48 -0500 (Thu, 16 Nov 2006) | 2
	  lines Don't unreference the SLA object if there is no SLA object
	  in the devicestate callback. (issue #8354 reported by loloski)
	  ........

	* /: Be gone 1.2 props!

2006-11-16 17:15 +0000 [r47734-47746]  Olle Johansson <oej@edvina.net>

	* /: Merging a fix that was already fixed.

	* channels/chan_sip.c: Merging implementation of invite states from
	  my "invitestate" branch for 1.2. This is a bit more clean
	  platform for the handling of BYE/CANCEL than what we had. It
	  might also need to changes in other parts of the code, since we
	  know the state of the INVITE transaction. Please observe that
	  this is is not dialog states at all, this is INVITE transaction
	  states. Hello Michael Proctor, and thank you! :-)

	* /: Block upgrade to UPGRADE

	* /, channels/chan_sip.c, configs/sip.conf.sample: - CANCEL never
	  uses authentication - Add docs on canreinvite

2006-11-16 14:58 +0000 [r47727-47732]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: reduce indentation on a large function.

	* main/cli.c: use atomic instructions to update the inuse counters
	  for CLI entriesC. The lock is not protecting this field. I wonder
	  if the field should be declared 'volatile' as well.

	* main/cli.c: make kevin (and 64 bit machines) happy and remove a
	  cast from char* to int in handling the return values from
	  new-style handlers. On passing, note that
	  main/loader.c::ast_load_resource() always return 0 so errors are
	  not propagated up. I am not sure this is the intended behaviour.

2006-11-16 08:18 +0000 [r47718]  Paul Cadach <paul@odt.east.telecom.kz>

	* main/channel.c, /, funcs/func_channel.c,
	  include/asterisk/channel.h: Merged revisions 44809 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r44809 | pcadach | 2006-10-10 23:44:54 +0700 (Втр, 10
	  Окт 2006) | 1 line CHANNEL() function sometime mix parameter and
	  value ........

2006-11-15 22:32 +0000 [r47713]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /: Merged revisions 47712 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47712 | file | 2006-11-15 17:31:17 -0500 (Wed,
	  15 Nov 2006) | 10 lines Merged revisions 47711 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47711 | file | 2006-11-15 17:29:30 -0500 (Wed, 15 Nov 2006) | 2
	  lines Make sure that the pvt structure exists before trying to do
	  fixup on Local channels. (issue #7937 reported by mada123, fix by
	  alamantia with mods by me) ........ ................

2006-11-15 21:57 +0000 [r47710]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 47709 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47709 | tilghman | 2006-11-15 15:56:55 -0600 (Wed, 15 Nov 2006)
	  | 2 lines Fix ODBC_STORAGE for when context is NULL ........

2006-11-15 21:36 +0000 [r47708]  Joshua Colp <jcolp@digium.com>

	* main/channel.c, /: Merged revisions 47707 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47707 | file | 2006-11-15 16:33:41 -0500 (Wed, 15 Nov 2006) | 2
	  lines We need to ensure timelimit stuff is included as well so
	  warnings get played. (issue #8050 reported by KNK) ........

2006-11-15 21:21 +0000 [r47706]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Hunting the initreq change for an ACK

2006-11-15 20:59 +0000 [r47703-47704]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c: 1. Fix the bug that Asterisk hangs up the
	  calls if the OSP AuthRsp messages without destination protocol
	  infomation. 2. Fix the bug that Asterisk generats wrong dial
	  string (no in
	  IAX2/[username[:password]@]peer[:port][/exten[@context]][/options]
	  format) for IAX. 3. Add support for oh323 channel driver. 4.
	  Re-formate the code.

	* include/asterisk/astosp.h: 1. Re-format the code.

2006-11-15 20:51 +0000 [r47702]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/file.c: Merged revisions 47701 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47701 | kpfleming | 2006-11-15 14:50:06 -0600 (Wed, 15 Nov 2006)
	  | 2 lines don't try to call fclose() if fopen() failed ........

2006-11-15 20:40 +0000 [r47700]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: - Don't reply to ACK - Improve SIP
	  history for debugging (Imported from 1.4)

2006-11-15 20:28 +0000 [r47685-47694]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 47693 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47693 | kpfleming | 2006-11-15 14:27:38 -0600
	  (Wed, 15 Nov 2006) | 12 lines Merged revisions 47677 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47677 | kpfleming | 2006-11-15 11:56:42 -0600 (Wed, 15
	  Nov 2006) | 4 lines ensure that message duration is included in
	  email notifications for forwarded messages (BE-96, fix by me
	  after corydon used his clue-bat on me) ensure that duration in
	  the message metadata is updated if prepending is done during
	  forwarding (related to BE-96) remove prototype for API call that
	  does not exist ........ ................

	* /, main/config.c: Merged revisions 47690 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47690 | kpfleming | 2006-11-15 14:01:22 -0600
	  (Wed, 15 Nov 2006) | 20 lines Merged revisions 47686,47688-47689
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47686 | kpfleming | 2006-11-15 13:42:05 -0600 (Wed, 15 Nov 2006)
	  | 2 lines clear the category's variable tail pointer as well when
	  variables are detached from it ........ r47688 | kpfleming |
	  2006-11-15 13:47:43 -0600 (Wed, 15 Nov 2006) | 2 lines when
	  appending a list of variable to a category, ensure the tail
	  pointer points to the last variable in the list ........ r47689 |
	  kpfleming | 2006-11-15 13:58:46 -0600 (Wed, 15 Nov 2006) | 2
	  lines when re-writing the config file, don't repeat the path if
	  it hasn't changed ........ ................

	* /, main/config.c: Merged revisions 47684 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47684 | kpfleming | 2006-11-15 12:43:30 -0600
	  (Wed, 15 Nov 2006) | 10 lines Merged revisions 47682 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47682 | kpfleming | 2006-11-15 12:39:47 -0600 (Wed, 15
	  Nov 2006) | 2 lines ouch... don't use printf, use
	  ast_log/ast_verbose ........ ................

2006-11-15 17:40 +0000 [r47662-47669]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_oss.c: fix indentation

	* main/cli.c: small simplifications and localization of variables.

	* main/cli.c: new-style "core show channels"

	* main/cli.c: more changes to new style of "module load" and
	  "load". Under FreeBSD, the filename_completion used in the above
	  commands does not work. Not sure why, but on passing i note that
	  the function is part of readline and is not reentrant, so it
	  needs to be fixed one way or another.

	* main/cli.c: move another deprecated command to the new style

	* main/cli.c: move "core set debug" to the new style, and remove
	  duplicated code for the deprecated handler. On passing fix a long
	  standing bug in find_cli() which would not find the longest match
	  - this part (trivial, basically just update matchlen on a match)
	  must go in 1.4 and possibly 1.2 as well.

2006-11-15 16:09 +0000 [r47657-47661]  Olle Johansson <oej@edvina.net>

	* /: Messed up earlier, cleaning up...

	* /, channels/chan_sip.c: Send proper SIP error message improperly
	  when we can't allocate dialog (out of file handles is one cause)

	* channels/chan_sip.c: Update doxygen docs to reflect the code...

2006-11-15 15:02 +0000 [r47652-47654]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/cli.h, main/cli.c: one more step cleaning the
	  internal CLI interface: the NEW_CLI macro now supports extra
	  arguments (to deprecate other commands). use this to implement
	  unload and reload, and remove some unused functions. usual
	  completion fixes (as these function accept multiple arguments).
	  The summary is still a bit inconsistent.

	* include/asterisk/cli.h, main/cli.c: update the internal cli api
	  following comments from kevin. This change basically simplifies
	  the interface of the new-style handler removing almost all the
	  tricks used in the previous implementation to achieve backward
	  compatibility (which is still present and guaranteed.)

2006-11-15 04:47 +0000 [r47646]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 47645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47645 | file | 2006-11-14 23:45:24 -0500 (Tue, 14 Nov 2006) | 2
	  lines If NAT detection is turned on or already detected then say
	  NAT is active when setting the remote RTP peer when doing early
	  bridging. (issue #8365 reported by marcelbarbulescu) ........

2006-11-15 00:19 +0000 [r47642]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/term.c: Merged revisions 47641 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47641 | kpfleming | 2006-11-14 18:19:05 -0600 (Tue, 14 Nov 2006)
	  | 2 lines more formatting cleanup, and avoid running off the end
	  of the string ........

2006-11-15 00:15 +0000 [r47640]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 47639 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47639 | file | 2006-11-14 19:14:07 -0500 (Tue, 14 Nov 2006) | 2
	  lines Turn notice about unknown RTCP packet type into a debug
	  message instead. ........

2006-11-15 00:06 +0000 [r47636]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/misdn/isdn_lib.c: Merged revisions 47635 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r47635 | kpfleming | 2006-11-14 18:05:44 -0600 (Tue, 14
	  Nov 2006) | 2 lines silence compiler warning on 64-bit platforms
	  (this variable is an 'int' anyway, comparing it to 'signed long'
	  is not useful) ........

2006-11-14 22:19 +0000 [r47633]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 47632 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47632 | file | 2006-11-14 17:17:16 -0500 (Tue,
	  14 Nov 2006) | 10 lines Merged revisions 47631 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47631 | file | 2006-11-14 17:15:10 -0500 (Tue, 14 Nov 2006) | 2
	  lines Update copyright information in the ADSI logo blob.
	  ........ ................

2006-11-14 22:08 +0000 [r47630]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: add missing casts and remove an unused function.

2006-11-14 22:07 +0000 [r47623-47629]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 47628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47628 | file | 2006-11-14 17:05:03 -0500 (Tue, 14 Nov 2006) | 2
	  lines Only keep the video RTP structure around if 1. Video
	  support is enabled and 2. A video codec is enabled on the dialog
	  ........

	* /, funcs/func_uri.c: Merged revisions 47625 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47625 | file | 2006-11-14 16:30:44 -0500 (Tue, 14 Nov 2006) | 2
	  lines Small documentation clarification for URIENCODE. (issue
	  #8294 reported by salaud) ........

	* apps/app_dial.c: Make local copy of arguments to parse. (issue
	  #8362 reported by homesick)

2006-11-14 18:58 +0000 [r47622]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 47621 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47621 | tilghman | 2006-11-14 12:54:40 -0600 (Tue, 14 Nov 2006)
	  | 3 lines Conversion of res_odbc API to include ast_ prefix did
	  not completely transition app_voicemail when ODBC_STORAGE is used
	  (reported on IRC by caio1982, not in bugtracker) ........

2006-11-14 17:00 +0000 [r47619-47620]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: fix completion for "module reload mod_1 mod_2 ... "
	  (should do the same for the other similar commands, "reload",
	  "module unload" and so on.

	* main/cli.c: partly convert to new style set-verbose, with
	  completion fixes

2006-11-14 16:48 +0000 [r47618]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_amd.c: Merged revisions 47617 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47617 | file | 2006-11-14 11:45:57 -0500 (Tue, 14 Nov 2006) | 2
	  lines Use LOG_DEBUG to print out the indication that app_amd is
	  using default settings instead of using LOG_NOTICE. This stops
	  needless logging of this information under normal circumstances.
	  (issue #8361 reported by Seb7) ........

2006-11-14 16:38 +0000 [r47614-47616]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: replace two deprecated functions with calls to the
	  standard ones, with fixes to argc/argv

	* main/cli.c: remove duplicated implementation for a deprecated
	  function, use the original one instead with appropriate changes
	  in argc/argv. This is not always applicable, but in some simple
	  cases it is.

2006-11-14 16:15 +0000 [r47610-47611]  Olle Johansson <oej@edvina.net>

	* include/asterisk/cli.h: need to check quoting in the doxygen
	  docs...

	* include/asterisk/cli.h: Some improvements to doxygen docs

2006-11-14 16:09 +0000 [r47606-47609]  Luigi Rizzo <rizzo@icir.org>

	* main/cli.c: new-style for 'core show uptime', include 'complete'
	  support and better error checking

	* main/cli.c: apply previous fix to old-style cli entries as well.

	* main/cli.c: fix "core set debug atleast ", and fix the simple
	  case where a command can have multiple completions, the first
	  ones coming from keywords in previous CLI entries. There is no
	  solution yet for the complex case of N1 completions from a CLI
	  entry, followed by N2 from the next one, and so on, because the
	  _complete() handlers do not tell us how many matches it
	  generates, so we don't know how many to skip when interrogating
	  the other handlers. The only solution is to avoid, as much as
	  possible, multiple CLI entries with the same prefix.

	* include/asterisk/cli.h, main/cli.c: Bring in the improved
	  internal API for the CLI. WATCH OUT: this changes the binary
	  interface (ABI) for modules, so e.g. users of g729 codecs need a
	  rebuilt module (but read below). The new way to write CLI
	  handlers is described in detail in cli.h, and there are a few
	  converted handlers in cli.c, look for NEW_CLI. After converting a
	  couple of commands i am convinced that it is reasonably
	  convenient to use, and it makes it easier to fix the pending CLI
	  issues. On passing, note a bug with the current 'complete'
	  architecture: if a command is a prefix of multiple CLI entries,
	  we miss some of the possible options. As an example, "core set
	  debug" can continue with "channel" from one CLI entry, and "off"
	  or "atleast" from another one. We address this problem in a
	  separate commit (when i have figured out a fix, that is). ABI
	  issues: I asked Kevin if it was ok to make this change and he
	  said yes. While it would have been possible to make the change
	  without breaking the module ABI, the code would have been more
	  convoluted. I am happy to restore the old ABI (while still being
	  able to use the "new style" handlers) if there is demand.

2006-11-14 13:17 +0000 [r47595-47600]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Adding some debug output to trace bug in
	  realtime

	* channels/chan_sip.c: Adding a new debug line for issue #7351 -
	  trying to find where an ACK can overwrite the initreq...

	* /, channels/chan_sip.c: Issue #8272 imported from 1.2/1.4 - Let
	  the peerpoke system destroy it's own packets, please.

	* channels/chan_sip.c: Remove flags not used any more (thanks
	  Luigi)

2006-11-13 22:40 +0000 [r47586-47587]  Matt O'Gorman <mogorman@digium.com>

	* codecs/codec_zap.c: oops no parens

	* main/frame.c, codecs/codec_zap.c: fix bytesize to 5.3kb for g723
	  codec and add support for multimode of tc400p

2006-11-13 21:32 +0000 [r47585]  Joshua Colp <jcolp@digium.com>

	* /, cdr/cdr_pgsql.c: Merged revisions 47584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47584 | file | 2006-11-13 16:28:57 -0500 (Mon,
	  13 Nov 2006) | 10 lines Merged revisions 47583 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47583 | file | 2006-11-13 16:26:36 -0500 (Mon, 13 Nov 2006) | 2
	  lines Initialize global pointers for connection and result to
	  NULL. (issue #8356 reported by james) ........ ................

2006-11-13 20:21 +0000 [r47582]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c: Merged revisions 47581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47581 | tilghman | 2006-11-13 14:20:01 -0600
	  (Mon, 13 Nov 2006) | 10 lines Merged revisions 47580 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47580 | tilghman | 2006-11-13 14:18:30 -0600 (Mon, 13
	  Nov 2006) | 2 lines Having more than 255 old messages caused
	  corruption in the new/old count ........ ................

2006-11-13 19:20 +0000 [r47579]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Small fix for uncommon scenario.

2006-11-13 19:19 +0000 [r47577-47578]  Steve Murphy <murf@digium.com>

	* /: Blocking 47576 from merging into trunk. Already done in 47577

	* main/config.c: This solves bug 8342, whereby a crash occurs under
	  certain circumstances while reading a config file with comments--
	  a call to CB_ADD shouldn't happen if withcomments is zero

2006-11-13 19:14 +0000 [r47575]  Joshua Colp <jcolp@digium.com>

	* channels/chan_h323.c: Make chan_h323 build again and make the CLI
	  commands work. (reported on asterisk-dev mailing list by Di-Shi
	  Sun)

2006-11-13 18:24 +0000 [r47568]  Steve Murphy <murf@digium.com>

	* /: blocked 47564 from 1.4 to be merged onto trunk; 47566 already
	  did it

2006-11-13 18:23 +0000 [r47567]  Joshua Colp <jcolp@digium.com>

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: Add
	  'loose' option to joinempty and leavewhenempty which is almost
	  exactly like 'strict' except it does not count paused queue
	  members as unavailable. (issue #8263 reported by gnarf)

2006-11-13 18:20 +0000 [r47566]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-test3: Eager people beat me to fixing
	  the messed if, but we all forgot to update the regressions. Until
	  now.

2006-11-13 17:55 +0000 [r47556-47560]  Joshua Colp <jcolp@digium.com>

	* apps/app_meetme.c: Don't play the "entering conference number
	  <insert number here>" prompts if the 'q' option is used. If
	  others believe this should be in 1.2/1.4 then we can put it in,
	  but I'm uncomfortable doing so right now as it is a change of
	  behavior. (issue #8138 reported by tmancill)

	* pbx/pbx_ael.c: Clean up last commit to better conform to
	  standards.

2006-11-13 17:36 +0000 [r47554-47555]  Steve Murphy <murf@digium.com>

	* /: Blocking 47553 from 1.4 to trunk... 47554 is done for it.

	* pbx/pbx_ael.c: AEL need not complain about parkedcalls not being
	  found... just confuses users

2006-11-13 17:10 +0000 [r47543-47552]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_sms.c: Merged revisions 47551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47551 | file | 2006-11-13 12:08:07 -0500 (Mon,
	  13 Nov 2006) | 10 lines Merged revisions 47549 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47549 | file | 2006-11-13 12:05:32 -0500 (Mon, 13 Nov 2006) | 2
	  lines When sending an SMS with a user data header properly set
	  the UDH flag in the first byte. (issue #8347 reported by
	  hoffmeis) ........ ................

	* main/cli.c: Return module show to a working state. (issue #8353
	  reported by jserve)

2006-11-13 16:08 +0000 [r47541]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Only produce error message once, don't
	  fill the screen with them... (Testing SIPP thanks to JerJer and
	  Greg)

2006-11-13 14:29 +0000 [r47536-47539]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: merge from astobj2-r47450: use UNLINK to
	  remove a packet from its queue, and related code rearrangement.
	  Approved by: oej This could be made better if we declared struct
	  sip_pvt *dialpg = pkt->owner; at the beginning of the function,
	  and use it throughout the function. I'll let the boss decide :)

	* channels/chan_sip.c: merge from codename-pineapple and astobj2
	  47499: simplify __sip_ack() removing a strcmp for looking up
	  packets. no functional change, only performance, so don't need to
	  merging to earlier branches now. Approved By: oej

	* main/cli.c: stop looking for new entries when we know we are
	  done. there is no functional change, so it is not necessary to
	  bother merging this to 1.4 now.

	* main/cli.c: free memory when unregistering an entry. needs to be
	  merged to 1.4

2006-11-13 05:58 +0000 [r47530]  Tilghman Lesher <tlesher@digium.com>

	* res/res_odbc.c, configs/res_odbc.conf.sample: Feature: allow the
	  sanity SQL to be customized per connection class (Issue 6453)

2006-11-13 05:51 +0000 [r47529]  Russell Bryant <russell@digium.com>

	* /, configure, acinclude.m4: Merged revisions 47527 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r47527 | russell | 2006-11-13 00:48:18 -0500 (Mon, 13
	  Nov 2006) | 5 lines AC_PROG_SED is included in autoconf 2.60, but
	  apparently it is not included in 2.59. So, to maintain
	  compatability with 2.59 since it is a small change, copy this
	  macro into acinclude.m4 and rename it to AST_PROG_SED. (issue
	  #8345) ........

2006-11-13 05:48 +0000 [r47524-47528]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c: Merged revisions 47526 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47526 | tilghman | 2006-11-12 23:46:18 -0600
	  (Sun, 12 Nov 2006) | 10 lines Merged revisions 47525 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47525 | tilghman | 2006-11-12 23:45:11 -0600 (Sun, 12
	  Nov 2006) | 2 lines If the execute fails a second time, make sure
	  that we don't pass back a stale handle ........ ................

	* channels/chan_zap.c, /: Merged revisions 47523 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47523 | tilghman | 2006-11-12 19:12:01 -0600
	  (Sun, 12 Nov 2006) | 10 lines Merged revisions 47522 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47522 | tilghman | 2006-11-12 18:34:44 -0600 (Sun, 12
	  Nov 2006) | 2 lines Don't play dialtone if the seizing the
	  channel fails (Bug 7754) ........ ................

2006-11-12 20:47 +0000 [r47521]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Part of patch in #7403 to improve tag
	  checking in pedantic mode (stephen_dredge)

2006-11-12 19:22 +0000 [r47520]  Russell Bryant <russell@digium.com>

	* channels/chan_iax2.c: The use of an ifdef to check for FreeBSD is
	  useless here because the two versions of the format string are
	  identical. Also, since each format is only used once, get rid of
	  the use of defines all together. (issue #8344, julieng) In
	  passing, also clean up the formatting a but to get rid of the
	  nesting without the use of braces, as defined in the coding
	  guidelines.

2006-11-12 16:15 +0000 [r47508-47514]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Restore auto-framing (DEA). Imported from
	  1.4

	* /, channels/chan_sip.c: - Support UDPTL as well as udptl in T38
	  sdp.

	* /, channels/chan_sip.c: - Don't hangup because of failed
	  re-invite. Go back to previous state. - Keep RTP running during
	  T.38 session We might improve the code to issue ast_rtp_stop if
	  T.38 re-invite not fails later on in the code, but I don't see
	  many reasons to.

	* /, channels/chan_sip.c: - Add some comments to t.38 code - Remove
	  improper blocking of ptime: in SDP

2006-11-12 06:31 +0000 [r47493-47498]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 47497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47497 | russell | 2006-11-12 01:23:23 -0500
	  (Sun, 12 Nov 2006) | 12 lines Merged revisions 47496 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47496 | russell | 2006-11-12 01:09:03 -0500 (Sun, 12
	  Nov 2006) | 4 lines Only do the check to determine whether the
	  channel calling this function is an IAX2 channel when getting the
	  IP address using the special argument, CURRENTCHANNEL. (issue
	  #8341, jcovert) ........ ................

	* Makefile, /: Merged revisions 47494 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47494 | russell | 2006-11-11 10:31:08 -0500 (Sat, 11 Nov 2006) |
	  6 lines Add the target "menuconfig" as an alias for the
	  "menuselect" target. This is just a favor to users so that if you
	  accidentally type "make menuconfig" instead of "make menuselect",
	  it still works. (inspired by a comment on IRC from wangster
	  calling me an "especially devious asterisk developer" for having
	  it be menuselect instead of menuconfig. :) ) ........

	* /, main/term.c: Merged revisions 47492 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47492 | russell | 2006-11-11 10:18:02 -0500 (Sat, 11 Nov 2006) |
	  2 lines Tweak the formatting of this new function to better
	  conform to coding guidelines. ........

2006-11-11 02:12 +0000 [r47491]  Matt O'Gorman <mogorman@digium.com>

	* main/logger.c, include/asterisk/term.h, main/term.c: safe
	  terminal output is sweet.

2006-11-10 22:06 +0000 [r47478]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we don't use 32bits for a value
	  that only requires 1 bit. Also, fix a compiler warning for one of
	  the SS7 functions.

2006-11-10 21:55 +0000 [r47467-47477]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Add some history and fix some debug
	  output for autodestruct.

	* /, channels/chan_sip.c: Proper fix for adding debug...

	* /, channels/chan_sip.c: Make sure we destroy dialog in case of
	  loop

	* /, channels/chan_sip.c: Cleanup imported from 1.4

2006-11-10 20:05 +0000 [r47459-47465]  Joshua Colp <jcolp@digium.com>

	* pbx/pbx_dundi.c: Fine, take this.

	* main/cli.c: A trunk that builds is a productive trunk.

	* pbx/pbx_dundi.c: Hello compiler working, goodbye compiler
	  warning. (fix compiler warning introduced from pbx_dundi
	  optimizations)

	* /, channels/chan_h323.c: Merged revisions 47457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47457 | file | 2006-11-10 14:36:25 -0500 (Fri, 10 Nov 2006) | 2
	  lines Let's give this a go... ........

2006-11-10 19:35 +0000 [r47456]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add fix for 7321. Ability to hide
	  calleridname from zapata.conf

2006-11-10 19:01 +0000 [r47455]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Issue 8336- fix support for multipart SDP
	  (imported from 1.2/1.4). (Alphaque)

2006-11-10 17:22 +0000 [r47445]  Luigi Rizzo <rizzo@icir.org>

	* build_tools/prep_moduledeps: manual merge from 1.4: grep -m not
	  available on bsd, use head -1 which works for all

2006-11-10 17:01 +0000 [r47439]  Tilghman Lesher <tlesher@digium.com>

	* /, channels/chan_sip.c, channels/chan_skinny.c,
	  channels/chan_h323.c, channels/chan_iax2.c, channels/chan_mgcp.c,
	  main/cli.c: Merged revisions 47436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47436 | tilghman | 2006-11-10 10:51:55 -0600 (Fri, 10 Nov 2006)
	  | 2 lines Discussion of these CLI changes resulted in more
	  consistency (Bug 8236) ........

2006-11-10 16:55 +0000 [r47438]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 47437 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47437 | file | 2006-11-10 11:53:16 -0500 (Fri, 10 Nov 2006) | 2
	  lines Only split up extension and context if a value exists.
	  (issue #8332 reported by loloski) ........

2006-11-10 16:38 +0000 [r47434-47435]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_queue.c: Merged revisions 47433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47433 | kpfleming | 2006-11-10 10:36:49 -0600 (Fri, 10 Nov 2006)
	  | 2 lines if adding a queue member is LOG_NOTICE, then removing
	  them should be LOG_NOTICE, not LOG_DEBUG ........

	* /, apps/app_queue.c: Merged revisions 47432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47432 | kpfleming | 2006-11-10 10:34:04 -0600 (Fri, 10 Nov 2006)
	  | 2 lines reflect addition/removal of dynamic queue members in
	  queue_log, so that people using dialplan replacement for
	  AgentCallbackLogin can still track login/logout (issue #7736,
	  reported/patched by whoiswes but this commit was written by me
	  and covers all three paths for AQM/RQM) ........

2006-11-10 13:14 +0000 [r47415-47419]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Ripping out bad support for 491 replies
	  to INVITE's. Let's try again properly later.

	* /, channels/chan_sip.c: Fix badly defined flag. Thanks fenlander!

	* channels/chan_sip.c: Small simplification and documentation
	  correction.

2006-11-10 04:30 +0000 [r47408-47410]  Russell Bryant <russell@digium.com>

	* pbx/pbx_dundi.c: Various little bits of code cleanup to reduce
	  nesting, remove useless casts, and to remove a duplicated error
	  message after a memory allocation error

	* include/asterisk/app.h, apps/app_read.c, main/app.c: Add the
	  ability to specify multiple prompts to the Read() dialplan
	  application, similar to Background() and Playback(). (issue
	  #7897, jsmith, with some modifications)

2006-11-10 03:45 +0000 [r47399-47406]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_h323.c: Merged revisions 47405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47405 | file | 2006-11-09 22:44:36 -0500 (Thu, 09 Nov 2006) | 2
	  lines Fix building of chan_h323 by completeing some structure
	  definitions. (issue #8327 reported by Mithraen) ........

	* main/pbx.c: This should already be called while locked.

	* /, apps/app_voicemail.c: Merged revisions 47398 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47398 | file | 2006-11-09 17:32:30 -0500 (Thu, 09 Nov 2006) | 2
	  lines Do conversion in a more easier to read and working way for
	  \r, \n, and \t. (issue #8324 reported by johnlange) ........

2006-11-09 21:32 +0000 [r47392]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /, build_tools/prep_moduledeps,
	  apps/app_voicemail.c: Merged revisions 47391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47391 | russell | 2006-11-09 16:26:27 -0500 (Thu, 09 Nov 2006) |
	  7 lines Work around an issue that caused menuselect to display a
	  bogus description for app_voicemail and chan_zap. These modules
	  use some preprocessor directives to determine what it will report
	  to Asterisk as its description. However, the way we extract this
	  information from the source files for menuselect is not smart
	  enough to figure this out. (issue #8326, #8328) ........

2006-11-09 17:08 +0000 [r47382]  Joshua Colp <jcolp@digium.com>

	* channels/chan_phone.c, /: Merged revisions 47380 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47380 | file | 2006-11-09 11:53:25 -0500 (Thu,
	  09 Nov 2006) | 10 lines Merged revisions 47379 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r47379 | file | 2006-11-09 11:48:05 -0500 (Thu, 09 Nov 2006) | 2
	  lines Don't include compiler.h on kernels 2.6.18 and higher as,
	  well, it's apparently going to be removed. This should make all
	  you FC6 fans happy as your Asterisk will now build without any
	  mods. ........ ................

2006-11-09 16:30 +0000 [r47353-47378]  Russell Bryant <russell@digium.com>

	* /, main/cli.c: Merged revisions 47377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47377 | russell | 2006-11-09 11:28:15 -0500 (Thu, 09 Nov 2006) |
	  2 lines fix tab completion for "core debug channel" and "core no
	  debug channel" ........

	* /, main/cli.c: Merged revisions 47375 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47375 | russell | 2006-11-09 11:24:02 -0500 (Thu, 09 Nov 2006) |
	  3 lines Fix "core show channel". Also, fix tab completion for
	  both "core show channel" and "core show channels". ........

	* /, main/cli.c: Merged revisions 47372 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47372 | russell | 2006-11-09 11:18:33 -0500 (Thu, 09 Nov 2006) |
	  3 lines Fix "core debug channel <whatever>". I guess someone
	  needs to go through and audit every CLI command that changed
	  number of arguments ... ........

	* /, main/cli.c: Merged revisions 47366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47366 | russell | 2006-11-09 10:49:39 -0500 (Thu, 09 Nov 2006) |
	  3 lines Fix another CLI command, "core show uptime" ... (issue
	  #8323, reported by johnlange, fixed by myself) ........

	* /, main/asterisk.c: Merged revisions 47352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47352 | russell | 2006-11-09 01:31:37 -0500 (Thu, 09 Nov 2006) |
	  3 lines fix "core show version" to reflect the new number of
	  arguments for this CLI command (issue #8316, kshumard) ........

2006-11-09 00:46 +0000 [r47343-47351]  Steve Murphy <murf@digium.com>

	* /: Blocking 47344 from automerging into trunk

	* /: Blocking 47348 from automerging into trunk

	* main/channel.c: This mod via bug 7531

	* channels/chan_skinny.c: committed in behalf of bug 8190

2006-11-08 22:35 +0000 [r47341]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: - Add Max-Forwards higher in the packet,
	  following recommendations - Fix documentation for
	  sip_pvt_lock/unlock - doxygen does not inherit like zapata.conf
	  !!! - Change doc for a sip_pvt setting

2006-11-08 21:59 +0000 [r47337-47339]  Kevin P. Fleming <kpfleming@digium.com>

	* main/frame.c: restore display of G.722 codec

	* /, channels/chan_sip.c: Merged revisions 47333 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47333 | kpfleming | 2006-11-08 12:07:16 -0600 (Wed, 08 Nov 2006)
	  | 2 lines add simple fix for SDP to report proper sample rate for
	  G.722 media sessions ........

2006-11-08 18:26 +0000 [r47335]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, CHANGES: Display CID matching information when using
	  dialplan show. (issue #8279 reported by caio1982)

2006-11-08 17:06 +0000 [r47325-47332]  Russell Bryant <russell@digium.com>

	* /, utils/streamplayer.c: Merged revisions 47331 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47331 | russell | 2006-11-08 12:03:09 -0500 (Wed, 08 Nov 2006) |
	  5 lines I occasionally get email from users that are trying to
	  figure out what this does, or due to some misunderstanding as to
	  what it is supposed to do, can't get it to work. So, I have added
	  some text here to hopefully explain what this application does
	  and does not do. ........

	* /, configure, configure.ac, acinclude.m4: Merged revisions 47327
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47327 | russell | 2006-11-08 11:31:59 -0500 (Wed, 08 Nov 2006) |
	  4 lines Copy the macros from libtool.m4 to our own acinclude.m4
	  such that libtool is no longer required to be installed to be
	  able to generate the configure script. ........

2006-11-08 15:28 +0000 [r47321]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: coding guidelines, coding guidelines, coding
	  guidelines

2006-11-08 13:59 +0000 [r47314-47318]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: merge from team/rizzo/astobj2 rev.47271
	  avoid doing p > 0 when p is a pointer; move a lock closer to the
	  place where it is needed Approved By: oej

	* channels/chan_sip.c: merge from team/rizzo/astobj2 rev.47246 Same
	  as for peers and users, replace ASTOBJ_UNREF(r,
	  sip_registry_destroy) with unref_registry(r); Approved By: oej

	* channels/chan_sip.c: merge from team/rizzo/astobj2, rev 47243,
	  47244, 47245: Replace ASTOBJ_UNREF(peer, sip_destroy_peer) with
	  unref_peer(peer); This places the name of the destructor in one
	  place only (where it should be), eliminates the chance of errors
	  in case you specify the wrong destructor, and also lets the
	  compiler do type checking on the argument, again helping with
	  keeping the code clean. Same for users. remove two duplicate
	  definitions. Approved By: oej

	* channels/chan_sip.c: merge rev.47224 from team/rizzo/astobj2:
	  hide dialoglist lock/unlocking in wrapper functions. Approved By:
	  oej

	* channels/chan_sip.c: silence compiler about uninitialized
	  variables. The compiler is wrong, but it has the last word.

2006-11-08 08:01 +0000 [r47313]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Destroy dialog properly at unload (rizzo)

2006-11-08 07:21 +0000 [r47306]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_jingle.c, channels/chan_gtalk.c: fix compilation.
	  Overall i think the previous change to ast_channel_alloc() to
	  close bug 7506 should have been done by defining an
	  ast_set_callerid_noevent() function that does the setting without
	  generating the event. Lot less code duplication, and easier to
	  handle.

2006-11-08 03:13 +0000 [r47304-47305]  Russell Bryant <russell@digium.com>

	* configure.ac: add a comment about where AC_PROG_LD comes from

	* aclocal.m4 (removed), /: remove aclocal.m4 from the tree since it
	  is just an intermediate file created while generating the
	  configure script.

2006-11-07 23:14 +0000 [r47295-47300]  Luigi Rizzo <rizzo@icir.org>

	* main/asterisk.c: fix "core show profile" parsing. Needs to go in
	  1.4 too, but ENOTIME now

	* apps/app_queue.c: %ld and time_t don't match, so cast the
	  argument to long to ease portability problems

2006-11-07 21:47 +0000 [r47290]  Steve Murphy <murf@digium.com>

	* main/pbx.c, channels/chan_local.c, channels/chan_vpb.cc,
	  channels/chan_zap.c, channels/chan_sip.c, res/res_features.c,
	  channels/chan_agent.c, main/utils.c, include/asterisk/channel.h,
	  channels/chan_gtalk.c, channels/chan_iax2.c, channels/chan_oss.c,
	  main/channel.c, channels/chan_jingle.c, channels/chan_phone.c,
	  channels/chan_misdn.c, channels/chan_skinny.c,
	  channels/chan_features.c, channels/chan_h323.c,
	  channels/chan_alsa.c, channels/chan_nbs.c,
	  include/asterisk/stringfields.h, channels/chan_mgcp.c,
	  apps/app_voicemail.c: A fair number of changes for the sake of
	  bug 7506

2006-11-07 20:16 +0000 [r47285-47288]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /: Merged revisions 47287 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r47287 | file | 2006-11-07 15:14:58 -0500 (Tue, 07 Nov
	  2006) | 2 lines This is not the commit you are looking for...
	  ........

	* channels/chan_local.c, /: Merged revisions 47284 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r47284 | file | 2006-11-07 15:08:52 -0500 (Tue, 07 Nov
	  2006) | 2 lines Make MOH work as it did before in chan_local,
	  without this then it can go funky when transfers and MOH are
	  involved. (issue #7671 reported by jmls) ........

2006-11-07 18:56 +0000 [r47280]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configs/musiconhold.conf.sample: Merged revisions 47279 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47279 | kpfleming | 2006-11-07 12:56:21 -0600 (Tue, 07 Nov 2006)
	  | 2 lines clean up sample config, and make native file playback
	  the more obvious default choice ........

2006-11-07 18:50 +0000 [r47278]  Matt O'Gorman <mogorman@digium.com>

	* apps/app_voicemail.c: rge overhaul to voicemail imap support.
	  Allows support for more imap servers, also a better
	  implementation of several parts of the original work. patch
	  provided by 8033 with major upgrades. minor differences from 1.4
	  patch do to changes in app_voicemail

2006-11-07 17:33 +0000 [r47269]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Break -> continue to make stuff work...
	  Thanks, Luigi!

2006-11-07 14:25 +0000 [r47257-47259]  Kevin P. Fleming <kpfleming@digium.com>

	* /: remove another broken property merge

	* /: remove properties that shouldn't be merged to this branch

	* /: use editable URL for menuselect, and switch to trunk

2006-11-07 13:26 +0000 [r47251-47252]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: issue #8265 - don't reply to ACK.
	  Imported from 1.2, 1.4

	* include/asterisk/frame.h: Stealing Tilghman's explanation from
	  the -dev list and producing documentation...

2006-11-07 08:34 +0000 [r47242]  Luigi Rizzo <rizzo@icir.org>

	* main/utils.c: explain why ast_carefulwrite is written the way it
	  is, and also that it doesn't really work as claimed.

2006-11-07 01:28 +0000 [r47232-47240]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 47239 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r47239 | russell | 2006-11-06 20:25:10 -0500
	  (Mon, 06 Nov 2006) | 13 lines Merged revisions 47238 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r47238 | russell | 2006-11-06 20:22:58 -0500 (Mon, 06
	  Nov 2006) | 5 lines If random order is enabled for files mode
	  music on hold, set a random initial position, instead of always
	  starting at the first file, and doing the random operation only
	  when switching to the next file. (bug reported by John Lange on
	  the asterisk-dev mailing list) ........ ................

	* utils/check_expr.c: check for failure after call to calloc()
	  (issue #8295)

2006-11-06 17:27 +0000 [r47230]  Kevin P. Fleming <kpfleming@digium.com>

	* UPGRADE.txt: minor change to test live syncing

2006-11-06 17:05 +0000 [r47229]  Joshua Colp <jcolp@digium.com>

	* main/manager.c, utils/astman.c, include/asterisk/manager.h: Add
	  support for manager hooks, so you could fire off manager events
	  over IRC if you were crazy enough. (issue #5161 reported by anthm
	  with mods by moi)

2006-11-05 01:04 +0000 [r47210-47213]  Russell Bryant <russell@digium.com>

	* pbx/pbx_dundi.c: Make pbx_dundi compile again. Sorry. :(

	* configs/zapata.conf.sample: List ss7 with the rest of the valid
	  signalling types. Group SS7 options together and comment them out
	  by default.

2006-11-04 22:16 +0000 [r47209]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Don't lock dialoglist if monitor runs
	  __sip_destroy. Hmmm. I did not change pbx_dundi and yet it
	  doesn't compile ;-)

2006-11-04 22:08 +0000 [r47206-47207]  Russell Bryant <russell@digium.com>

	* pbx/pbx_dundi.c: use the AST_MODULE_LOAD_* return codes from
	  load_module()

	* pbx/pbx_dundi.c: simplify a couple of loops

2006-11-04 21:48 +0000 [r47205]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Move IP address selection for media out of
	  add_sdp

2006-11-04 21:44 +0000 [r47204]  Russell Bryant <russell@digium.com>

	* pbx/pbx_dundi.c: Do some minor cleanup to the section of code
	  that sets the EID by getting the mac address for an ethernet
	  interface

2006-11-04 21:17 +0000 [r47200-47203]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Make srvlookup global_srvlookup to follow
	  the rest of the code

	* channels/chan_sip.c: Simplify previous patch

	* channels/chan_sip.c, configs/sip.conf.sample: Adding new config
	  option "limitpeersonly" to only apply call limits to the peer
	  side of a type=friend. This is for trying to support BJ in his
	  quest to solve some issues with the queue system and type=friend
	  objects. BJ: Please test!

	* /, channels/chan_sip.c: Importing patch for Invite/replaces from
	  1.4

2006-11-04 18:12 +0000 [r47197-47198]  Russell Bryant <russell@digium.com>

	* /, main/cli.c: Merged revisions 47196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47196 | russell | 2006-11-04 13:10:22 -0500 (Sat, 04 Nov 2006) |
	  2 lines Fix another bug in "core set debug" ... ........

	* /, main/asterisk.c, main/cli.c: Merged revisions 47195 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47195 | russell | 2006-11-04 12:59:39 -0500 (Sat, 04 Nov 2006) |
	  2 lines Really fix the "core set debug" and "core set verbose"
	  CLI commands. ........

2006-11-04 17:45 +0000 [r47194]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Reverting rev 47093 until we have an
	  agreement on how to implement this, if at all.

2006-11-04 17:40 +0000 [r47193]  Russell Bryant <russell@digium.com>

	* /, main/cli.c: Merged revisions 47192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47192 | russell | 2006-11-04 12:38:24 -0500 (Sat, 04 Nov 2006) |
	  3 lines fix the "atleast" option to the "core set verbose" and
	  "core set debug" CLI commands ........

2006-11-04 11:00 +0000 [r47179-47189]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dial.c: move out another large block to a large
	  function, and document some possibly missing parts in the privacy
	  screening code. Now that it is more streamlined it is easier to
	  see differences in handling the various cases. Have not tested
	  the code in depth.

	* res/res_agi.c: useless cast removal...

	* main/logger.c: remove many unnecessary casts

	* main/app.c: remove a useless cast

	* configs/manager.conf.sample: document the "debug" parameter, and
	  the change manager list -> manager show

	* apps/app_dial.c: fix indentation of a block, and do minor
	  simplifications at the end of another one.

	* apps/app_dial.c: complete previous commit.

	* apps/app_dial.c: move another block into a function. On passing,
	  avoid two null-pointer string dereference while printing messages
	  (which are sometimes not fatal in some platforms, but still
	  wrong). These two lines at least should be merged to 1.4 once i
	  am done with all the changes here.

	* apps/app_dial.c: move a large block into a separate function.
	  Mark with XXX a possible bug in previous code which used the
	  wrong source in case of a forwarded call. the function
	  do_forward() needs to be split further, as the initial part is
	  replicated in another places (with some minor differences, most
	  likely forgotten when updating after the copy).

2006-11-03 23:27 +0000 [r47178]  Steve Murphy <murf@digium.com>

	* channels/chan_sip.c: This fix introduced via bug 8233

2006-11-03 23:24 +0000 [r47160-47177]  Luigi Rizzo <rizzo@icir.org>

	* apps/app_dial.c: another small set of simplifications

	* apps/app_dial.c: change HANDLE_CAUSE into a function.

	* apps/app_dial.c: remove redundant checks

	* apps/app_dial.c: start integrating the simplifications proposed
	  in bug 0005860, as usual a bit at a time to ease locating new
	  bugs or fixes worth merging into other branches. In this commit,
	  introduce a macro, S_REPLACE, that replaces a string possibly
	  freeing the previous value. In one of these places (see the
	  comment marked XXX) the previous code might leak memory - if so,
	  this ought to be merged in 1.4 The macro might be worth putting
	  in one of the global headers (e.g. include/asterisk/strings.h) as
	  the construct is used in a million places in the asterisk code.

2006-11-03 19:15 +0000 [r47146]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: One has to create the path and filename in
	  order to copy a file there. (issue #8278 reported by davebath)

2006-11-03 18:53 +0000 [r47072-47132]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c, include/asterisk/manager.h: add a new
	  cli/manager.conf option "debug" to enable/disable debugging code
	  in the manager. At the moment the debugging code is very
	  lightweight, if the option is enabled manager messages also carry
	  a sequence number and the info where they have been generated
	  e.g. SequenceNumber: 10 File: chan_sip.c Line: 11927 Func:
	  handle_response_register It is not worthwhile having this as a
	  compile time option right now, because the extra work involved at
	  runtime is just checking one variable.

	* channels/chan_zap.c: remove old/useless usecnt stuff

	* channels/chan_vpb.cc: remove old/useless usecnt stuff. I think
	  this module doesn't compile, anyways, because it has not been
	  updated to the new module interface.

	* main/cli.c: Fix "core show channels" and "core show modules". Not
	  sure it applies like this to 1.4 because of deprecate versions of
	  the same command(s).

	* res/res_jabber.c: move variable declarations to the beginning of
	  a block.

	* /: block other changes of mine already applied to trunk.

	* /: block more changes of mine already applied to trunk

	* /: blocking 47107

	* /: blocking 47108

	* channels/chan_sip.c: Save the 'From' header received in a
	  REGISTER message so we can show it e.g. in the Manager interface.
	  This information is available as a callerid (or something like
	  that) during a call, but not when a device is registered but
	  silent. It may be useful to have it available e.g. when
	  developing a user interface/operator panel, to map numbers to
	  names. experimental, so not committed to 1.4

	* channels/chan_jingle.c, channels/chan_gtalk.c: remove useless
	  usecnt stuff

	* channels/chan_phone.c: remove useless usecnt stuff

	* channels/chan_alsa.c: remove useless usecnt stuff

	* channels/chan_agent.c: remove useless usecnt stuff

	* channels/chan_features.c: remove useless usecnt handling

	* channels/chan_skinny.c: remove useless usecnt handling code

2006-11-02 23:55 +0000 [r47052-47054]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, /, channels/chan_skinny.c, res/res_agi.c,
	  channels/chan_h323.c, res/res_jabber.c, main/rtp.c: Merged
	  revisions 47053 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47053 | tilghman | 2006-11-02 17:49:13 -0600 (Thu, 02 Nov 2006)
	  | 2 lines More changes making the CLI more consistent with
	  "category verb arguments" (continuation of issue 8236) ........

	* main/pbx.c, channels/chan_local.c, main/frame.c,
	  channels/chan_sip.c, /, res/res_features.c, res/res_crypto.c,
	  channels/chan_agent.c, res/res_musiconhold.c, apps/app_queue.c,
	  channels/chan_iax2.c, main/config.c, main/cli.c, main/channel.c,
	  main/manager.c, channels/chan_skinny.c, res/res_agi.c,
	  channels/chan_features.c, main/logger.c, main/file.c,
	  main/http.c, res/res_indications.c, main/image.c, res/res_odbc.c,
	  main/asterisk.c, channels/chan_mgcp.c, apps/app_voicemail.c:
	  Merged revisions 47051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r47051 | tilghman | 2006-11-02 17:00:20 -0600 (Thu, 02 Nov 2006)
	  | 2 lines Reverse change of "show" to "list" and make several
	  other commands more consistent with "category verb arguments"
	  ........

2006-11-02 21:40 +0000 [r47037]  Joshua Colp <jcolp@digium.com>

	* main/pbx.c, include/asterisk/pbx.h: Let's make
	  application/function/hint lists read/write lists... just for
	  kicks

2006-11-02 21:34 +0000 [r47035]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Updates to do unblock correctly

2006-11-02 20:24 +0000 [r46999-47021]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Move check for codec translators to an
	  earlier place in the call, so we can fail gracefully (imported
	  from 1.4)

	* /, channels/chan_sip.c: Disable code for not implemented
	  functionality (T38 over RTP/TCP)

2006-11-02 18:34 +0000 [r46991-46994]  Russell Bryant <russell@digium.com>

	* include/asterisk/astobj.h: Sure enough, some of the uses of
	  astobj are doing recursive locking. This doesn't work with
	  rwlocks, so, this is reverted for now.

	* include/asterisk/astobj.h: astobj was already set up to use read
	  and write locks. Now that we have wrappers for them, use them
	  here.

2006-11-02 18:01 +0000 [r46967-46972]  Joshua Colp <jcolp@digium.com>

	* main/translate.c: Convert translation core linked list over to
	  read/write based one, since it spends most of it's time only
	  reading.

	* include/asterisk/linkedlists.h: Add AST_RWLIST_* set of macros
	  which implement linked lists using read/write locks, the actual
	  list manipulation is still done via the old macros.

2006-11-02 17:51 +0000 [r46966]  Russell Bryant <russell@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 46965 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46965 | russell | 2006-11-02 12:49:54 -0500
	  (Thu, 02 Nov 2006) | 11 lines Merged revisions 46964 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r46964 | russell | 2006-11-02 12:47:56 -0500 (Thu, 02
	  Nov 2006) | 3 lines ignore files in a music on hold directory
	  that begin with '.' (issue #8249, cboie) ........
	  ................

2006-11-02 16:51 +0000 [r46940]  Joshua Colp <jcolp@digium.com>

	* include/asterisk/lock.h: Set the AST_RWLOCK_INIT_VALUE to the
	  PTHREAD_RWLOCK_INIT_VALUE if it is available, that way outside
	  stuff can determine whether to use a constructor or deconstructor
	  for initialization instead of using the init value.

2006-11-02 16:50 +0000 [r46939]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Changes to show blocked/unblocked states, as
	  well as in service, out of service state

2006-11-02 16:45 +0000 [r46938]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 46937 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46937 | kpfleming | 2006-11-02 10:45:32 -0600 (Thu, 02 Nov 2006)
	  | 2 lines don't send INVITE when we have determined that we can't
	  offer any audio formats due to lack of trancoding support (or
	  incorrect configuration) ........

2006-11-02 16:28 +0000 [r46931-46935]  Joshua Colp <jcolp@digium.com>

	* configure, include/asterisk/autoconfig.h.in, configure.ac,
	  include/asterisk/lock.h: I'm crazy so I will add this... pthread
	  rwlock wrappers, along with autoconf stuff that detects the
	  presence of the initializer and the ability to set the kind of
	  lock (in our case we rather like writer preferred locks so writer
	  starvation doesn't occur... but on something like Darwin we don't
	  get that)

	* /, channels/chan_sip.c: Merged revisions 46930 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46930 | file | 2006-11-02 11:06:39 -0500 (Thu,
	  02 Nov 2006) | 10 lines Merged revisions 46920 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r46920 | file | 2006-11-02 11:02:27 -0500 (Thu, 02 Nov 2006) | 2
	  lines Repeat after me oej: I will at least make sure my code
	  compiles before I commit it. ........ ................

2006-11-02 16:03 +0000 [r46926]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add simple down event support

2006-11-02 15:47 +0000 [r46906]  Nadi Sarrar <ns@beronet.com>

	* channels/misdn/isdn_lib.c, channels/misdn_config.c:
	  find_free_chan_in_stack: cleanup buggy usage

2006-11-02 15:31 +0000 [r46902]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Don't overwrite pkt->flags (imported from
	  1.2/1.4)

2006-11-02 14:15 +0000 [r46846-46886]  Russell Bryant <russell@digium.com>

	* main/callerid.c: various whitespace changes to reduce indentation
	  and to better conform to formatting guidelines

	* main/callerid.c: Change the buffer used in callerid_feed() and
	  callerid_feed_jp() to be allocated on the stack using alloca()
	  instead of using malloc() since they are only used locally to
	  these functions.

	* /, main/say.c: Merged revisions 46857 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46857 | russell | 2006-11-01 18:01:48 -0500 (Wed, 01 Nov 2006) |
	  2 lines fix saying one hundred and two hundred in hebrew (issue
	  #7810, eldadran) ........

	* CHANGES: Add a couple of things to the CHANGES file

	* Makefile, /, configure, codecs/gsm/Makefile, configure.ac,
	  build_tools/strip_nonapi, makeopts.in: Merged revisions 46847 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46847 | russell | 2006-11-01 17:51:21 -0500 (Wed, 01 Nov 2006) |
	  3 lines Fixes for cross-compilation on mips (issue #8058,
	  ywalther, with some modifications) ........

	* aclocal.m4, /, build_tools/menuselect-deps.in, configure,
	  build_tools/embed_modules.xml, configure.ac: Merged revisions
	  46845 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46845 | russell | 2006-11-01 17:32:12 -0500 (Wed, 01 Nov 2006) |
	  5 lines Add a check in the configure script to determine whether
	  ld is GNU ld or not. This is needed because module embedding only
	  works for gnu ld. GNU ld is now listed as a dependency for all of
	  the module embedding options in menuselect. (issue #8143)
	  ........

2006-11-01 20:38 +0000 [r46823]  Matt O'Gorman <mogorman@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 46822 via svnmerge
	  from https://svn.digium.com/svn/asterisk/branches/1.4 ........
	  r46822 | mogorman | 2006-11-01 14:35:41 -0600 (Wed, 01 Nov 2006)
	  | 2 lines bind address support from bug 8164 ........

2006-11-01 19:48 +0000 [r46801]  Steve Murphy <murf@digium.com>

	* res/res_config_odbc.c: a fix for bug 8251; the var_val needs to
	  accept longer strings or mass confusion and a lot of lost time is
	  the result

2006-11-01 18:41 +0000 [r46782]  Joshua Colp <jcolp@digium.com>

	* /, main/Makefile: Merged revisions 46780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46780 | file | 2006-11-01 13:39:47 -0500 (Wed, 01 Nov 2006) | 2
	  lines Force poll() emulation for Darwin to always be on. It's too
	  broken to consider being used. This resolves the console issue
	  OSX users have been seeing. I would have liked to autoconf this
	  but I haven't been able to come up with a test case that works.
	  Que sera. ........

2006-11-01 18:40 +0000 [r46779-46781]  Russell Bryant <russell@digium.com>

	* doc/channelvariables.txt, pbx/pbx_dundi.c: Add the ability to
	  pass options to the Dial application when using the DUNDi switch
	  in the dialplan by setting the DUNDIDIALARGS channel variable.
	  (issue #8084, patch by bluecrow76, with small modifications and
	  documentation updates)

	* /, res/res_monitor.c: Merged revisions 46778 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46778 | russell | 2006-11-01 13:26:35 -0500
	  (Wed, 01 Nov 2006) | 17 lines Merged revisions 46776 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r46776 | russell | 2006-11-01 13:24:17 -0500 (Wed, 01
	  Nov 2006) | 9 lines soxmix and Asterisk expect different file
	  extensions for certain formats. This was already handled for the
	  wav49 format. However, it was not handled for ulaw and alaw. I
	  fixed this in such a way that using the alternate extensions for
	  ulaw and alaw will only happen if we know we're calling soxmix,
	  and not a custom script defined using the MONITOR_EXEC variable.
	  The wav49 processing was left alone so that external scripts will
	  see no behavior change. (issue #7550, reported by mnicholson,
	  proposed patch by junky, committed fix is a bit different)
	  ........ ................

2006-11-01 18:26 +0000 [r46777]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 46775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46775 | file | 2006-11-01 13:21:34 -0500 (Wed, 01 Nov 2006) | 2
	  lines It's another round of chan_iax2 fixes! Should hopefully fix
	  the deadlock issues people have been reporting. IAXtel now has
	  qualify turned on for 800 peers and it is handling it fine.
	  ........

2006-11-01 18:16 +0000 [r46759-46774]  Steve Murphy <murf@digium.com>

	* CHANGES: OOps. forgot to add this to CHANGES

	* main/say.c, apps/app_voicemail.c: This introduces Brazilian
	  Portuguese via 7663

	* main/config.c: Cleanups suggested by Russell.

2006-11-01 17:09 +0000 [r46758]  Luigi Rizzo <rizzo@icir.org>

	* res/res_features.c: move variable declaration in the middle of a
	  block

2006-11-01 16:51 +0000 [r46745]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 46744 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46744 | russell | 2006-11-01 11:39:09 -0500 (Wed, 01 Nov 2006) |
	  2 lines Prevent an infinite loop when config processing gets to a
	  jitterbuffer option ........

2006-11-01 00:07 +0000 [r46732]  Matt O'Gorman <mogorman@digium.com>

	* res/res_features.c: change default return extension after parking
	  timeout. 6953 with minor changes.

2006-10-31 22:19 +0000 [r46719]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/translate.c, include/asterisk/translate.h: Merged
	  revisions 46714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46714 | kpfleming | 2006-10-31 15:47:48 -0600 (Tue, 31 Oct 2006)
	  | 2 lines add an API so that translators can activate/deactivate
	  themselves when needed ........

2006-10-31 22:07 +0000 [r46717-46718]  Jason Parker <jparker@digium.com>

	* main/translate.c: Fix "core show translation" output. Issue
	  #8243, patch by Damin.

2006-10-31 18:10 +0000 [r46683-46696]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_iax2.c: remove old/useless usecount handling

	* channels/chan_sip.c: remove old/useless usecount stuff.

	* channels/chan_oss.c: remove old/useless usecount management code.

2006-10-31 15:22 +0000 [r46661]  Russell Bryant <russell@digium.com>

	* main/manager.c: Fix the new send text manager command. There is
	  no way this could have worked. - Check the channel name string
	  length to be zero, not non-zero - Check the message string length
	  to be zero, not non-zero - unlock the channel *after* calling
	  sendtext

2006-10-31 13:56 +0000 [r46582-46650]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Set #define for TIMER T1 value

	* channels/chan_sip.c: Cleaning up code

	* funcs/func_enum.c, /, include/asterisk/enum.h, main/enum.c: Issue
	  #80898 - Restoring func_enum (otmar)

	* main/manager.c: Add manager sendtext action. (Issue 6131, ZX81 -
	  thanks!)

	* /, channels/chan_sip.c, configs/sip.conf.sample: Fix rport
	  handling. ...where did the 1.2 properties come from, really?
	  they're back.

	* /, channels/chan_sip.c: - If peer that register fails ACL, fail
	  him - Remove the 1.2 props I've set by mistake earlier

	* /: Block patch that only applies to 1.4

	* main/loader.c: Take two, using find_resource on Kevin's
	  suggestion. Might need better locking support, giving up if we
	  can't get the lock. Right now, using existing locking in
	  find_resource

2006-10-31 06:37 +0000 [r46556-46565]  Russell Bryant <russell@digium.com>

	* apps/app_cdr.c: add author doxygen tag (issue #8241, kshumard)

	* /, contrib/init.d/rc.redhat.asterisk: Merged revisions 46563 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46563 | russell | 2006-10-31 01:30:53 -0500 (Tue, 31 Oct 2006) |
	  3 lines Start Asterisk later in the boot process to ensure it
	  starts after stuff like MySQL (issue #8253, Alric) ........

	* /, main/utils.c: Merged revisions 46561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46561 | russell | 2006-10-31 01:19:56 -0500
	  (Tue, 31 Oct 2006) | 11 lines Merged revisions 46560 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r46560 | russell | 2006-10-31 01:18:36 -0500 (Tue, 31
	  Oct 2006) | 3 lines When handling the case where the hostname is
	  just an IPV4 numeric address, be sure to set the address type.
	  (issue #8247, alexr) ........ ................

	* /, res/res_agi.c: Merged revisions 46558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46558 | russell | 2006-10-31 01:14:13 -0500
	  (Tue, 31 Oct 2006) | 11 lines Merged revisions 46557 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r46557 | russell | 2006-10-31 01:13:09 -0500 (Tue, 31
	  Oct 2006) | 3 lines fix some copy/paste bugs in the checking of
	  arguments for the "control stream file" AGI command (issue #8255,
	  mnicholson) ........ ................

	* /, main/translate.c: Merged revisions 46554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46554 | russell | 2006-10-31 00:55:07 -0500 (Tue, 31 Oct 2006) |
	  5 lines Add a small tweak to the code that checks to see whether
	  destination formats are translatable based on the source format.
	  If we have already determined that there is no translation path
	  in one direction, don't bother checking the other direction.
	  ........

2006-10-30 23:11 +0000 [r46541]  Steve Murphy <murf@digium.com>

	* apps/app_dial.c, utils/astman.c: These changes submitted by moy
	  via bug 6992, to add a Dial 'End' event to asterisk. I include
	  some changes to astman to cover other events that have been
	  added.

2006-10-30 22:27 +0000 [r46529]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/translate.c: Merged revisions 46526 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46526 | kpfleming | 2006-10-30 16:19:55 -0600 (Mon, 30 Oct 2006)
	  | 3 lines when unregistering a translator, don't rebuild the
	  translation matrix unless needed when filtering formats out of an
	  offer, ensure we check for translation ability in both directions
	  ........

2006-10-30 21:56 +0000 [r46513-46514]  Olle Johansson <oej@edvina.net>

	* funcs/func_module.c: show, list, view, display... whatever.

	* funcs/func_module.c (added), include/asterisk/module.h,
	  main/loader.c: Adding dialplan function IFMODULE, so you can
	  create dialplans that handle various PBX installations and checks
	  if a module is loaded before using it. example
	  IFMODULE(chan_sip3.so) issue #6671 in the bug tracker, finally
	  gone. Thanks to mithraen for keeping it updated.

2006-10-30 21:46 +0000 [r46512]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 46511 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46511 | kpfleming | 2006-10-30 15:46:07 -0600 (Mon, 30 Oct 2006)
	  | 2 lines ensure that items removed from a list are always
	  unlinked from the list (next pointer set to NULL) ........

2006-10-30 21:22 +0000 [r46508-46509]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Update sip list to eventlist format.

	* main/pbx.c, main/manager.c, include/asterisk/manager.h: Issue
	  #3930 - Add manager command for listing dialplan (coded april
	  2005, in bugtracker since)

2006-10-30 21:11 +0000 [r46507]  Joshua Colp <jcolp@digium.com>

	* /, configure, configure.ac: Merged revisions 46506 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r46506 | file | 2006-10-30 16:09:13 -0500 (Mon, 30 Oct
	  2006) | 2 lines Don't explicitly link in crypt as it is not used
	  on some platforms. ........

2006-10-30 19:56 +0000 [r46476-46489]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, configs/sip.conf.sample: Change name of
	  "contact" setting to "callback" which better reflects what it is
	  to the person that configures asterisk. That we use it internally
	  in the contact header is a totally different story. Still not
	  convinced this is a good option.

	* channels/chan_sip.c: Globals need the "global_" prefix in
	  chan_sip, and need to be reset to default value at reload.

2006-10-30 18:17 +0000 [r46475]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 46474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46474 | file | 2006-10-30 13:13:07 -0500 (Mon, 30 Oct 2006) | 2
	  lines We need to lock the pvt structure during retransmission as
	  another worker thread may be doing something as well. ........

2006-10-30 18:04 +0000 [r46466]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Make sure we give the linkset number, not
	  the offset in the linksets array

2006-10-30 18:02 +0000 [r46461]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Small conversion to ast_channel_unlock

2006-10-30 17:32 +0000 [r46459]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Specify which linkset we're getting the
	  messages from in the message

2006-10-30 16:59 +0000 [r46439]  Olle Johansson <oej@edvina.net>

	* main/rtp.c: In debug mode, recognize that someone is sending
	  zrtp, even though we can't do anything with it yet. Ideally a
	  first step would be a passthrough mode.

2006-10-30 16:50 +0000 [r46436]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Don't make errors when we don't need them

2006-10-30 16:33 +0000 [r46379-46434]  Olle Johansson <oej@edvina.net>

	* include/asterisk/file.h, include/asterisk/doxyref.h, /,
	  channels/chan_sip.c, main/ast_expr2f.c,
	  include/asterisk/module.h, formats/format_ogg_vorbis.c,
	  main/app.c, include/asterisk/channel.h, include/asterisk/lock.h,
	  include/asterisk/frame.h, main/asterisk.c, apps/app_voicemail.c:
	  Issue 8246 Doxygen updates (kshumard) THANK YOU!

	* /: The RTCP patch started in trunk, so don't start all over again
	  :-)

	* main/asterisk.c: Small formatting changes

	* main/rtp.c: Bind RTCP to the same IP as RTP. I currently don't
	  see this as a bug that needs to be fixed in 1.4/1.2 too, but feel
	  free to backport if you see it that way. RTCP now binds to ALL IP
	  addresses on the host, RTP to a specific address.

	* /, channels/chan_sip.c: Issue #7869 - Stop retransmission of 302
	  redirects.

	* /, channels/chan_sip.c: Issue #7608 - Notifications sent with
	  wrong content-type (imported from 1.2, 1.4)

	* /: Block patch from other branch

	* channels/chan_sip.c: Issues related to issue #7828 - segfault
	  with MWI subscriptions and realtime.

	* /, channels/chan_sip.c: - Fix the OUTGOING stuff (merge from 1.4)
	  - Make sure we UNREF authpeer when not needed

	* apps/app_voicemail.c: Spelling fix.

	* channels/chan_sip.c: Documentation update again

	* channels/chan_sip.c: Documentation update (I guess)

	* channels/chan_sip.c: Documentation correction

	* channels/chan_sip.c: maxtime is not needed any more now that we
	  actually set the T1 timer based on the qualify result.

	* /, channels/chan_sip.c: Only accept message once

	* channels/chan_sip.c: Adding documentation inspired by a virtual
	  drink with an anonymous man in New Jersey

	* channels/chan_sip.c: Don't duplicate function if not needed... -
	  removing transmit_reinvite_with_t38_sdp in favour of adding an
	  argument to transmit_reinvite_with_sdp

	* /, channels/chan_sip.c: Merge from 1.4 : Don't send 183
	  reliably...

	* channels/chan_sip.c: - Don't lock the dialoglist during the whole
	  destruction of a single SIP dialog. Only lock when needed - when
	  we remove the dialog from the dialog list If this doesn't lead to
	  severe problems, it might help with some locking issues in
	  1.4/1.2. - Remove the term "interface" as a synonym for a SIP
	  dialog. Sorry, Mark, but no one understands it... ;-)

2006-10-28 16:39 +0000 [r46378]  Joshua Colp <jcolp@digium.com>

	* utils/Makefile, /: Merged revisions 46377 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46377 | file | 2006-10-28 12:37:44 -0400 (Sat, 28 Oct 2006) | 2
	  lines Don't build muted on OpenBSD, it is not supported. ........

2006-10-27 19:28 +0000 [r46372]  BJ Weschke <bweschke@btwtech.com>

	* apps/app_queue.c: Let's make sure we hold the mutex lock before
	  we go looking at values in the queue structure that could
	  potentially be changing while we're running.

2006-10-27 19:04 +0000 [r46371]  Russell Bryant <russell@digium.com>

	* channels/chan_zap.c, /: Merged revisions 46370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46370 | russell | 2006-10-27 14:03:32 -0500 (Fri, 27 Oct 2006) |
	  4 lines move the copy of the default settings to the global
	  settings back out of process_zap, so that they aren't overwritten
	  when process_zap is called multiple times ........

2006-10-27 18:59 +0000 [r46369]  BJ Weschke <bweschke@btwtech.com>

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: * Added
	  option to run macro when a queue member is connected to a caller,
	  see queues.conf.sample for details. * Added QUEUE_VARIABLES
	  function to set queue variables added setqueuevar and
	  setqueueentryvar options for each queue, see queues.conf.sample
	  for details. (#8216, jmls reported and submitted)

2006-10-27 18:31 +0000 [r46368]  Olle Johansson <oej@edvina.net>

	* /, contrib/asterisk-ng-doxygen: raise the pressure on Christian
	  :-)

2006-10-27 17:46 +0000 [r46366]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: First pass at implementation to be able to
	  block and unblock zap channels for use.

2006-10-27 17:45 +0000 [r46365]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Put this patch on hold pending further
	  testing...

2006-10-27 17:42 +0000 [r46359-46364]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c, apps/app_externalivr.c, res/res_musiconhold.c,
	  main/asterisk.c: Merged revisions 46363 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46363 | russell | 2006-10-27 12:39:31 -0500 (Fri, 27 Oct 2006) |
	  5 lines We should always be using _exit() after a fork() or
	  vfork() instead of exit(). This is because exit() does some extra
	  cleanup which in some implementations of vfork(), for example,
	  can actually modify the state of the parent process, causing very
	  weird bugs or crashes. (issue #7971, Nick Gavrikov) ........

	* configs/voicemail.conf.sample, CHANGES, apps/app_voicemail.c: Add
	  the ability to customize some of the prompts used within the
	  voicemail application by configuring them in voicemail.conf
	  (issue #7415, patch by fkasumovic, with some fixes and
	  documentation updates by myself)

	* channels/chan_zap.c, /: Merged revisions 46358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46358 | russell | 2006-10-27 10:32:40 -0500 (Fri, 27 Oct 2006) |
	  5 lines Instead of iterating all of the options once to look for
	  jitterbuffer options, and then again for everything else, move
	  the processing of jitterbuffer options into the main loop so that
	  there are no erroneous messages about ignoring unknown options.
	  (issue #8226) ........

2006-10-27 11:18 +0000 [r46354]  Christian Richter <christian.richter@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/chan_misdn_config.h,
	  channels/misdn/isdn_msg_parser.c, configs/misdn.conf.sample,
	  channels/misdn/isdn_lib.c, channels/misdn_config.c: Merged
	  revisions 46351-46353 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r46351 | crichter | 2006-10-27 11:49:20 +0200
	  (Fr, 27 Okt 2006) | 9 lines Merged revisions 46176 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r46176 | crichter | 2006-10-25 10:41:59 +0200 (Mi, 25
	  Okt 2006) | 1 line added nttimeout option to configure wether we
	  disconnect calls on NT timeouts or not during an overlapdial
	  session ........ ................ r46352 | crichter | 2006-10-27
	  11:58:44 +0200 (Fr, 27 Okt 2006) | 1 line fixed not compile
	  issue, which was just introduced ................ r46353 |
	  crichter | 2006-10-27 12:03:23 +0200 (Fr, 27 Okt 2006) | 9 lines
	  Merged revisions 46350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r46350 | crichter | 2006-10-27 11:24:01 +0200 (Fr, 27 Okt 2006) |
	  1 line fixed a bug which caused chan_misdn to try to allocate 2
	  times the same channel on high load, which then caused
	  instability of mISDN. removed a useless function from isdn_lib.c
	  ........ ................

2006-10-26 20:27 +0000 [r46348]  Jason Parker <jparker@digium.com>

	* /, apps/app_page.c: Merged revisions 46347 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46347 | qwell | 2006-10-26 15:25:44 -0500 (Thu, 26 Oct 2006) | 2
	  lines Fix small formatting issue, that causes misaligned line
	  ........

2006-10-26 20:22 +0000 [r46346]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Show if the channel is ready for video or
	  T.38 udptl

2006-10-26 18:04 +0000 [r46341]  Jason Parker <jparker@digium.com>

	* contrib/scripts/astgenkey.8: oops - somebody forgot to change
	  this - long ago, probably.

2006-10-26 17:52 +0000 [r46330-46339]  Russell Bryant <russell@digium.com>

	* main/pbx.c, apps/app_osplookup.c, main/manager.c,
	  apps/app_meetme.c, apps/app_festival.c, main/say.c,
	  apps/app_alarmreceiver.c, apps/app_sms.c, apps/app_rpt.c,
	  main/rtp.c, apps/app_voicemail.c: fix various spelling mistakes
	  in comments (issue #8237, jmls)

	* /, main/translate.c: Merged revisions 46329 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46329 | russell | 2006-10-26 11:31:05 -0500 (Thu, 26 Oct 2006) |
	  11 lines - If the source has no audio or no video portion, do not
	  call powerof() to get the format index. - Don't run through the
	  audio and video loops if there is no audio or video portion of
	  the source If 0 is passed to powerof, it will return -1. This
	  value of -1 was then being used as an array index in these loops,
	  which caused a crash on some systems. Other than this issue, this
	  code works as we expected it to. If a format is not in the
	  source, and we have to translation path to it, it is not offered
	  in the list of acceptable destination formats. (fixes issue
	  #8231) ........

2006-10-26 12:47 +0000 [r46308-46319]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: fix a problem that i recently introduced when the
	  manager receives long commands.

	* configs/sip.conf.sample: document the match_auth_username option

2006-10-26 04:19 +0000 [r46299]  Russell Bryant <russell@digium.com>

	* /, doc/backtrace.txt: Merged revisions 46298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46298 | russell | 2006-10-25 23:18:00 -0500 (Wed, 25 Oct 2006) |
	  2 lines update backtrace documentation to reflect changes in 1.4
	  (issue #8230, kshumard) ........

2006-10-26 01:38 +0000 [r46288]  Mark Spencer <markster@digium.com>

	* main/manager.c, main/config.c: Fix comment preservation code
	  (thanks murf!)

2006-10-25 20:21 +0000 [r46259-46277]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Old todo: Don't add Contact headers on
	  BYE and CANCEL.

	* channels/chan_sip.c: First stab at transaction direction fix,
	  this for trunk for testing

	* /, channels/chan_sip.c: Ugly code to try to remove issue
	  discovered by Luigi as well as attack bug #7608

2006-10-25 19:24 +0000 [r46256]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Send CPG when we get a CONTROL_PROGRESS
	  frame and make sure that it sends ACM (not CPG) when we get
	  CONTROL_PROCEEDING.


2006-10-25 19:14 +0000 [r46251]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c, configs/zapata.conf.sample: Update changes
	  to do US style point code parsing/formatting (xxx.xxx.xxx)

2006-10-25 19:10 +0000 [r46250]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 46249 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46249 | russell | 2006-10-25 14:08:18 -0500 (Wed, 25 Oct 2006) |
	  2 lines update warning message to include "agi" option (issue
	  #8225, jmls) ........

2006-10-25 17:12 +0000 [r46238]  Kevin P. Fleming <kpfleming@digium.com>

	* /, sounds/sounds.xml, sounds/Makefile: Merged revisions 46237 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46237 | kpfleming | 2006-10-25 12:08:58 -0500 (Wed, 25 Oct 2006)
	  | 2 lines add support for prebuilt G.722 prompts and music on
	  hold files ........

2006-10-25 16:01 +0000 [r46215-46224]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merge from 1.4

	* /: Block change to 1.4 to block change to 1.2... This is
	  confusing, but I think I got it right.

2006-10-25 14:55 +0000 [r46201-46203]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c, main/translate.c,
	  include/asterisk/translate.h: Merged revisions
	  46082-46083,46152-46153 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46082 | kpfleming | 2006-10-23 22:45:42 -0500 (Mon, 23 Oct 2006)
	  | 2 lines add an API call to allow channel drivers to determine
	  which media formats are compatible (passthrough or transcode)
	  with the format an existing channel is already using ........
	  r46083 | kpfleming | 2006-10-23 22:53:32 -0500 (Mon, 23 Oct 2006)
	  | 2 lines ensure that the translation matrix is properly
	  lock-protected every place it is used ........ r46152 | kpfleming
	  | 2006-10-24 18:45:19 -0500 (Tue, 24 Oct 2006) | 2 lines if
	  multiple translators are registered for the same source/dest
	  combination, ensure that the lowest-cost one is always inserted
	  earlier in the list ........ r46153 | kpfleming | 2006-10-24
	  19:10:54 -0500 (Tue, 24 Oct 2006) | 2 lines code zone experiment:
	  don't offer formats in the outbound INVITE that aren't either
	  passthrough or translatable ........

	* channels/chan_iax2.c: restore bugfix that was reverted by
	  trunk_mtu patch

	* channels/chan_sip.c, /, apps/app_record.c, apps/app_softhangup.c,
	  res/res_adsi.c, main/utils.c, pbx/dundi-parser.c,
	  apps/app_ices.c, apps/app_getcpeid.c, apps/app_queue.c,
	  channels/chan_iax2.c, main/cli.c, main/cdr.c,
	  channels/chan_phone.c, pbx/pbx_spool.c, channels/chan_features.c,
	  channels/chan_h323.c, pbx/pbx_ael.c, channels/chan_alsa.c,
	  pbx/pbx_realtime.c, apps/app_sms.c, channels/chan_nbs.c,
	  main/image.c, main/db.c, channels/chan_mgcp.c, cdr/cdr_custom.c,
	  apps/app_parkandannounce.c, apps/app_voicemail.c: Merged
	  revisions 46200 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46200 | kpfleming | 2006-10-25 09:32:08 -0500 (Wed, 25 Oct 2006)
	  | 2 lines apparently developers are still not aware that they
	  should be use ast_copy_string instead of strncpy... fix up many
	  more users, and fix some bugs in the process ........

2006-10-25 14:26 +0000 [r46199]  Olle Johansson <oej@edvina.net>

	* CREDITS, configs/iax.conf.sample, channels/chan_iax2.c: Ok,
	  second attempt...

2006-10-25 14:18 +0000 [r46198]  Luigi Rizzo <rizzo@icir.org>

	* CHANGES: document a couple of recently introduced feature also
	  including the version number where the feature appeared.

2006-10-25 14:14 +0000 [r46183-46197]  Olle Johansson <oej@edvina.net>

	* CREDITS, configs/iax.conf.sample, channels/chan_iax2.c: On the
	  other hand, don't use 1.4 patches for trunk... Sorry.

	* CREDITS, configs/iax.conf.sample, channels/chan_iax2.c: Add
	  ability to adapt the IAX trunk packets to the MTU size, to avoid
	  bad audio when the number of channels fill the MTU on a given
	  link. In the future, this needs to be configurable per peer with
	  trunking enabled.

	* channels/chan_sip.c: Adding comments in the source is more
	  persistent than just adding them to the commit message :-)

	* channels/chan_sip.c: Always add doxygen comments to new
	  functions, more lines than one are appreciated really. (Read the
	  coding guidelines). I've worked hard to make chan_sip a better
	  place to code in, let's keep it that way and don't add more stuff
	  without comments. Thank you.

2006-10-25 00:32 +0000 [r46155]  Kevin P. Fleming <kpfleming@digium.com>

	* main/frame.c, /, main/translate.c, formats/format_pcm.c,
	  channels/chan_h323.c, channels/chan_iax2.c,
	  include/asterisk/frame.h, main/rtp.c: Merged revisions 46154 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46154 | kpfleming | 2006-10-24 19:26:17 -0500 (Tue, 24 Oct 2006)
	  | 2 lines add passthrough and file format support for G.722 16KHz
	  audio (issue #5084, original patch by andrew, updated by
	  mithraen) ........

2006-10-24 20:22 +0000 [r46141]  Mark Spencer <markster@digium.com>

	* res/res_agi.c: Fix FastAGI to not wait for the non-existant pid

2006-10-24 19:33 +0000 [r46131]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 46130 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46130 | file | 2006-10-24 15:29:56 -0400 (Tue, 24 Oct 2006) | 2
	  lines We need to initialize our scheduler pthread condition...
	  yes. ........

2006-10-24 17:14 +0000 [r46104-46120]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: i really think it is safe to commit this version,
	  that simplifies the manager queue handling as described in the
	  comment, and will make a lot easier to make further work on this
	  code.

	* channels/chan_sip.c: correct fix for the bug i previously
	  introduced - the strings are meant to be always initialized,
	  independently from their content.

2006-10-24 05:24 +0000 [r46094]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 46093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46093 | russell | 2006-10-24 01:23:33 -0400 (Tue, 24 Oct 2006) |
	  3 lines Restore the ability to remove the firmware directory
	  without causing the installation to fail (issue #8111) ........

2006-10-24 03:15 +0000 [r46081]  Kevin P. Fleming <kpfleming@digium.com>

	* doc/imapstorage.txt, /: Merged revisions 46080 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46080 | kpfleming | 2006-10-23 22:13:08 -0500 (Mon, 23 Oct 2006)
	  | 2 lines simplify and correct voicemail IMAP storage build
	  instructions ........

2006-10-24 03:09 +0000 [r46079]  Tilghman Lesher <tlesher@digium.com>

	* main/channel.c, /: Merged revisions 46078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46078 | tilghman | 2006-10-23 22:01:00 -0500 (Mon, 23 Oct 2006)
	  | 3 lines Pass through a frame if we don't know what it is,
	  rather than trying to pass a NULL, which will segfault a channel
	  driver (Bug 8149) ........

2006-10-24 01:28 +0000 [r46055-46068]  Russell Bryant <russell@digium.com>

	* utils/muted.c, /, utils/ael_main.c: Merged revisions 46067 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46067 | russell | 2006-10-23 21:27:42 -0400 (Mon, 23 Oct 2006) |
	  7 lines In muted.c, check the return value of strdup. In
	  ael_main.c, check the return value of calloc. (issue #8157) In
	  passing fix a few minor bugs in ael_main.c. The last argument to
	  strncpy() was a hard-coded 100, where it should have been 99. I
	  changed this to use sizeof() - 1. ........

	* /, apps/app_meetme.c: Merged revisions 46065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r46065 | russell | 2006-10-23 21:04:14 -0400 (Mon, 23 Oct 2006) |
	  2 lines Fix the descriptions of some of the MeetMeAdmin options
	  (issue #8098, mflorell) ........

	* channels/chan_sip.c: Fix a seg fault on a registration. Line
	  7706, in parse_register_contact, explicitly passes NULL as the
	  "pass" argument to this function.

2006-10-23 21:46 +0000 [r46003-46045]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: Unlike ast_strdup(), ast_strdupa() does not
	  take a NULL pointer as argument, so fix the places where this
	  might happen. This is also a fix that ought to go into 1.4 [The
	  difference between the two functions is a bit confusing, and in
	  asterisk i believe all string handling functions should be able
	  to handl a NULL string as argument, but changing the API in trunk
	  and not in 1.4 would make backporting harder.]

	* channels/chan_sip.c: remove a useless check for ocseq = 0. As
	  discussed on the mailing lists, 0 is a legal value for Cseq, so
	  there is no point to treat it specially.

	* channels/chan_sip.c: get_header() always returns a non-NULL
	  value, so checking for NULL is certainly wrong and usually
	  disables the checks that we want to make instead. This commit
	  fixes a number of the above bugs where the result of get_header()
	  is immediately checked for NULL. This is certainly a candidate
	  for merging into 1.4

	* channels/chan_sip.c: put another duplicated block of code in a
	  function.

	* channels/chan_sip.c: reformat a statement and comment a
	  potentially wrong assignement (altering state on an unvalidated
	  message).

	* channels/chan_sip.c: Remove unnecessary casts from const char *
	  to char *, if necessary by slightly rearranging the code.

	* channels/chan_sip.c: another use for parse_uri(). On passing,
	  remove a wrong comment (that probably I wrote myself!) and
	  introduce a temporary variable to avoid a misleading cast.

2006-10-23 17:08 +0000 [r46000]  Russell Bryant <russell@digium.com>

	* /, res/res_jabber.c: Merged revisions 45999 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45999 | russell | 2006-10-23 13:07:45 -0400 (Mon, 23 Oct 2006) |
	  2 lines don't crash when an incoming message has no "from" (issue
	  #8205, jmls) ........

2006-10-23 16:54 +0000 [r45945-45989]  Luigi Rizzo <rizzo@icir.org>

	* main/utils.c: use autodetected support for gethostbyname_r

	* channels/chan_sip.c: + make sure parse_uri never returns NULL
	  pointers - this simplifies its usage. + add another client for
	  parse_uri, in handling Contact: strings (on passing, document the
	  content of the "fullcontact" field); + in register_verify(), mark
	  with XXX what i believe is another misinterpretation on the URI
	  format when '@' is missing. No code changed here, so no fixes
	  applied.

	* channels/chan_sip.c: After reading better the SIP RFC on sip URI
	  (19.1.1) fix parse_uri() to interpret a missing userinfo section
	  as a domain-only URI, and comment a wrong interpretation of the
	  above in check_user_full(). The function has been patched to
	  preserve the existing behaviour (in what admittedly is a corner
	  case, but could be received under attacks). Hopefully the From:
	  based matching will go away soon!

	* channels/chan_sip.c: in function get_also_info(), move argument
	  stripping before splitting around the @, otherwise the
	  refer_to_domain might contain arguments as well, causing
	  failures. I think this is a true bug that ought to be fixed in
	  1.4 as well.

	* channels/chan_sip.c: start putting the URI parsing code in one
	  place, introducing the function parse_uri() that splits a URI in
	  its components. Right now use it only in one place, because the
	  custom parsing that is done here and there sometimes has bugs
	  that i want to figure out first.

	* channels/chan_sip.c: put common code in function terminate_uri()
	  so we need to fix it only in one place.

	* channels/chan_sip.c: More cleanup of check_user_full with no
	  functional change apart from a small (but disabled by default)
	  new option. In detail: + introduce a new value for enum
	  check_auth_result, AUTH_DONT_KNOW, used (read below) when a
	  function does not have a conclusive response. Possibly this is
	  the same as AUTH_NOT_FOUND, but need to check further. + move the
	  large blocks (checking in the users list and in the peers list,
	  respectively) from check_user_full() to separate functions. They
	  return AUTH_DONT_KNOW in case they don't find a match, so the
	  caller know that it has to try the next method. There is still
	  some duplication of code here, but i have not tried yet to remove
	  it. + [new option] a new option in sip.conf, match_auth_username,
	  has been introduced, and disabled by default. If set, and the
	  incoming request carries authentication info, the username to
	  match in the users list is taken from there rather than from the
	  From: field. This change is easy to identify, being made of - one
	  line to declare the variable match_auth_username - a block of 15
	  lines in check_user_full() - one line in sip list settings - two
	  lines for parsing the config file. check_user_full() is now a lot
	  cleaner - basically a sequence of checks that are applied to the
	  request. This will help future work with new matching schemes.

2006-10-23 00:33 +0000 [r45929]  Joshua Colp <jcolp@digium.com>

	* /, cdr/cdr_odbc.c: Merged revisions 45928 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45928 | file | 2006-10-22 20:27:39 -0400 (Sun,
	  22 Oct 2006) | 10 lines Merged revisions 45927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45927 | file | 2006-10-22 20:25:28 -0400 (Sun, 22 Oct 2006) | 2
	  lines Don't leak memory mmmk? ........ ................

2006-10-22 21:57 +0000 [r45917]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 45916 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45916 | crichter | 2006-10-22 23:44:46 +0200
	  (Sun, 22 Oct 2006) | 9 lines Merged revisions 45808 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r45808 | crichter | 2006-10-21 14:35:13 +0200 (Sat, 21
	  Oct 2006) | 1 line fixed issue, that if chan_misdn is loaded and
	  couldn't be initialized it would cause a segfault after 'reload'.
	  Reported by Drew/Matt thx. ........ ................

2006-10-22 21:08 +0000 [r45904-45915]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: more streamlining of check_user_full

	* channels/chan_sip.c: simplify the flow of function
	  check_user_full() A large block needs reindentation now, but we
	  don't do that because it can be moved to a separate function.

	* channels/chan_sip.c: put duplicated code in functions.

2006-10-22 19:34 +0000 [r45893]  Russell Bryant <russell@digium.com>

	* configure, include/asterisk/autoconfig.h.in: regenerate the
	  configure script and autoconfig.h.in to reflect recent changes
	  for https support for the built in http server

2006-10-22 19:09 +0000 [r45858-45892]  Luigi Rizzo <rizzo@icir.org>

	* main/Makefile, configure.ac, main/http.c,
	  configs/http.conf.sample: Fix a few issues in the previous
	  (disabled) HTTPS code, and support linux as well (using
	  fopencookie(), which should be available in glibc). Update
	  configure.ac to check for funopen (BSD) and fopencookie(glibc),
	  and while we are at it also for gethostbyname_r (the generated
	  files need to be updated, or you need to run bootstrap.sh
	  yourself). Document the new options in http.conf.sample (names
	  are only tentative, better ones are welcome). At this point we
	  can safely enable the option. Anyone willing to try this on Sun
	  and Apple platforms ?

	* main/http.c: Implement https support. The changes are not large.
	  Most of the diff comes from putting the global variables
	  describing an accept session into a structure, so we can reuse
	  the existing code for running multiple accept threads on
	  different ports. Once this is done, and if your system has the
	  funopen() library function (and ssl, of course), it is just a
	  matter of calling the appropriate functions to set up the ssl
	  connection on the existing socket, and everything works on the
	  secure channel now. At the moment, the code is disabled because i
	  have not implemented yet the autoconf code to detect the presence
	  of funopen(), and add -lssl to main/Makefile if ssl libraries are
	  present. And a bit of documentation on the http.conf arguments,
	  too. If you want to manually enable https support, that is very
	  simple (step 0 1 2 will be eventually detected by ./configure,
	  the rest is something you will have to do anyways). 0. make sure
	  your system has funopen(3). FreeBSD does, linux probably does
	  too, not sure about other systems. 1. uncomment the following
	  line in main/http.c // #define DO_SSL /* comment in/out if you
	  want to support ssl */ 2. add -lssl to AST_LIBS in main/Makefile
	  3. add the following options to http.conf sslenable=yes
	  sslbindport=4433 ; pick one you like sslcert=/tmp/foo.pem ; path
	  to your certificate file. 4. generate a suitable certificate e.g.
	  (example from mini_httpd's Makefile: openssl req -new -x509 -days
	  365 -nodes -out /tmp/foo.pem -keyout /tmp/foo.pem and here you
	  go: https://localhost:4433/asterisk/manager now works.

	* main/http.c: it is useless and possibly wrong to use ast_cli() to
	  send the reply back to http clients. Use fprintf/fwrite instead,
	  since we are already using a FILE * to read the input. If you
	  wonder why, this is because it makes it trivial to implement
	  https support (as long as your system has funopen()). And this is
	  what i am going to put in with the next few commits...

2006-10-22 04:44 +0000 [r45847]  Joshua Colp <jcolp@digium.com>

	* Makefile, main/Makefile: Let's have build.h created a bit earlier
	  so that func_version can use it and not stop the build on a fresh
	  machine that has never had Asterisk installed on it before...

2006-10-21 20:24 +0000 [r45836]  Luigi Rizzo <rizzo@icir.org>

	* main/http.c: the default port number was erroneously stored in
	  host order, and reading from the config file used ntohs instead
	  of htons. this ought to be merged to 1.4 as well.

2006-10-21 18:52 +0000 [r45820]  Joshua Colp <jcolp@digium.com>

	* /, main/loader.c: Merged revisions 45817 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45817 | file | 2006-10-21 14:48:58 -0400 (Sat, 21 Oct 2006) | 2
	  lines Don't use promotion on Darwin because it doesn't seem to
	  work quite right in all cases, this should solve the unresolved
	  symbol issue people have been seeing. ........

2006-10-21 18:50 +0000 [r45819]  Russell Bryant <russell@digium.com>

	* /, res/res_monitor.c: Merged revisions 45818 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45818 | russell | 2006-10-21 14:49:46 -0400 (Sat, 21 Oct 2006) |
	  3 lines Add a couple missing unregistrations of manager actions
	  and remove duplicate unregistrations of applications. (issue
	  #8194, jmls) ........

2006-10-20 20:59 +0000 [r45786]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: introduce sip_pvt_lock() and
	  sip_pvt_unlock() wrappers to lock these data structures. This
	  improve readability, and also hides the underlying locking
	  mechanism so it is a lot easier to add diagnostic code, or move
	  the object locks somewhere else, etc. On passing, rename the lock
	  field in sip_pvt to pvt_lock, also for ease of readability.

2006-10-20 19:04 +0000 [r45776]  Joshua Colp <jcolp@digium.com>

	* Makefile, /: Merged revisions 45775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45775 | file | 2006-10-20 15:03:03 -0400 (Fri, 20 Oct 2006) | 2
	  lines Pass DESTDIR and ASTSBINDIR so that the utilities get
	  installed in the proper location (reported on asterisk-dev
	  mailing list) ........

2006-10-20 15:54 +0000 [r45764]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: put the constants for whether methods can
	  create a dialog or not in an enum

2006-10-20 11:24 +0000 [r45753]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: minor comment changes, code rearrangement and
	  field renaming to minimize diffs with future modifications. The
	  current implementation is problematic for the following reasons:
	  + all insertions are O(N) because the event list does not have a
	  tail pointer; + there is only a single lock protecting both
	  session and users queues. + the implementation of the queue
	  itself is not documented. I think i have figured it out, more or
	  less, but am unclear on whether there is proper locking in place
	  The rewrite (which i have working locally) uses a tailq so
	  insertions are O(1), separate locks for the event and session
	  queues, and has a documented implementation so hopefully we can
	  figure out if/where bug exist.

2006-10-20 08:14 +0000 [r45742-45743]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Let's repair the SIP attack shield :-)

	* main/manager.c: Doxygen corrections

2006-10-19 22:06 +0000 [r45712-45724]  Steve Murphy <murf@digium.com>

	* funcs/func_version.c (added): This new function, VERSION(),
	  created via bug report 8176, may help dialplan programmers in the
	  future. In the meantime, they can use the algorithm I outline on
	  the bug report notes; If anyone invents something better, I'd
	  hope they post it

	* utils/astman.c: astman was slightly weirding out over the new
	  Dial and Newcallerid events

2006-10-19 17:26 +0000 [r45696]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: more fixes to comments and very minor code
	  rearrangement.

2006-10-19 17:25 +0000 [r45693-45695]  Joshua Colp <jcolp@digium.com>

	* /, res/res_jabber.c: Merged revisions 45694 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45694 | file | 2006-10-19 13:24:40 -0400 (Thu, 19 Oct 2006) | 2
	  lines Let's remember to unregister JabberStatus too (issue #8184
	  reported by jmls) ........

	* /, apps/app_externalivr.c: Merged revisions 45692 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45692 | file | 2006-10-19 13:19:47 -0400 (Thu,
	  19 Oct 2006) | 10 lines Merged revisions 45691 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45691 | file | 2006-10-19 13:16:37 -0400 (Thu, 19 Oct 2006) | 2
	  lines Respect language selection when seeing if the file exists
	  (issue #8178 reported by mnicholson) ........ ................

2006-10-19 17:07 +0000 [r45690]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: implement proper XML/HTML formatting of multiple
	  messages (e.g. the result of waitevent). Also fix some comments.

2006-10-19 16:06 +0000 [r45679]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 45678 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45678 | file | 2006-10-19 12:03:09 -0400 (Thu, 19 Oct 2006) | 2
	  lines If the jitterbuffer is forced on then we can't partially
	  bridge (reported by wangster on #asterisk-dev) ........

2006-10-19 10:05 +0000 [r45648-45668]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: move a large block out of do_monitor() and
	  into a function, to improve readability.

	* channels/chan_sip.c: + move the definition of netlock as it was
	  not related to the comment just above; + decouple the struct
	  definition and variable declaration (iflist);

	* main/manager.c: more documentation of data structure and
	  functions. Of interest: + ast_get_manager_by_name_locked() is now
	  without the ast_ prefix as it is a local function; +
	  unuse_eventqent() renamed to unref_event(), and returns the
	  pointer to the next entry. + marked with XXX a couple of usages
	  of unref_event() because i suspect we are addressing the wrong
	  entry.

2006-10-19 07:17 +0000 [r45647]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Cleaning up... Removing duplicate (again)

2006-10-19 02:16 +0000 [r45634]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c, include/asterisk/threadstorage.h: restore
	  freeing of threadstorage objects without custom cleanup functions
	  allow custom threadstorage init functions to return failure use a
	  custom init function for chan_sip's temp_pvt, to improve
	  performance a bit

2006-10-19 01:04 +0000 [r45623-45624]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merge fix to not leak the stringfields of
	  a thread speicif sip_pvt. This also includes the fix not to leak
	  the actual sip_pvt. Merged revisions 45622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45622 | russell | 2006-10-18 20:59:51 -0400 (Wed, 18 Oct 2006) |
	  2 lines Don't leak the actual thread-specific sip_pvt struct
	  ........

	* main/channel.c, main/frame.c, main/manager.c,
	  channels/chan_sip.c, channels/chan_skinny.c, main/logger.c,
	  main/utils.c, channels/iax2-parser.c,
	  include/asterisk/threadstorage.h, main/cli.c: Extend the thread
	  storage API such that a custom initialization function can be
	  called for each thread specific object after they are allocated.
	  Note that there was already the ability to define a custom
	  cleanup function. Also, if the custom cleanup function is used,
	  it *MUST* call free on the thread specific object at the end.
	  There is no way to have this magically done that I can think of
	  because the cleanup function registered with the pthread
	  implementation will only call the function back with a pointer to
	  the thread specific object, not the parent ast_threadstorage
	  object.

2006-10-18 22:40 +0000 [r45611]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: silent warning from a debugging message (which
	  will go away soon, anyways)

2006-10-18 22:19 +0000 [r45610]  Joshua Colp <jcolp@digium.com>

	* apps/app_meetme.c, CHANGES: Just for Nicholson - here's an
	  option, C, to Meetme that will allow it to continue in the
	  dialplan if the person is kicked out. (issue #7994 reported by
	  mnicholson with mods by myself)

2006-10-18 21:41 +0000 [r45597-45599]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: remove trailing whitespace

	* main/manager.c: ouch! remember to unlink temporary files once
	  done with them.

	* main/manager.c: + move output_format variables in the http
	  section of the file; + more comments on struct mansession and
	  global variables; + small improvements to the session matching
	  code so it supports multiple sessions from the same IP

2006-10-18 21:05 +0000 [r45596]  Joshua Colp <jcolp@digium.com>

	* /, main/asterisk.c: Merged revisions 45595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45595 | file | 2006-10-18 17:03:34 -0400 (Wed, 18 Oct 2006) | 2
	  lines Don't modify things if we are using vfork as this is very
	  bad and may cause unexpected behavior (issue #7970 reported by
	  Nick Gavrikov) ........

2006-10-18 17:53 +0000 [r45572-45583]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: another bunch of comments on the data structures.

	* main/manager.c: despite the large changes, this commit only moves
	  functions around so that functions belonging to the same group
	  are close to each other. At the beginning of each group i have
	  added a bit of documentation to explain what the group does and
	  what is the typical flow - basically, all i have learned by code
	  inspection over the past few days should be documented for you to
	  read. I have not put many doxygen annotations just because i am
	  not sure what are the proper ones. Hopefully some doxygen experts
	  will jump in. Next on the plate: try to figure out how "struct
	  eventqent" are supposed to work.

	* main/manager.c: more comment and formatting fixes, small
	  simplifications to functions get_input() and session_do()

2006-10-18 16:45 +0000 [r45571]  Matt O'Gorman <mogorman@digium.com>

	* main/manager.c: rizzo compile then commit, maybe even run it too
	  ^_^

2006-10-18 15:49 +0000 [r45529-45561]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: comment and cleanup the main thread. On passing,
	  fix a bug: close the socket if the allocation of a structure for
	  the new session fails. (the bugfix is a candidate for 1.4)

	* main/manager.c: create a new (internal, for the time being)
	  function astman_start_ack() to start manager responses that need
	  further lines. This removes a lot of duplicate code from the
	  various handlers that at the moment build an ActionID string
	  themselves. Once settled, the function should move to manager.h
	  so it can be used by other files (chan_agent, chan_iax2,
	  chan_sip, chan_zap, res_jabber and app_queue). I am not totally
	  clear if there is a preferred position for the ActionID: line in
	  a message. Some instances put it at the end, but one would argue
	  that it is preferable to have it at the beginning.

	* main/manager.c: more indentation cleanup from previous commits,
	  and remove the "busy" field from struct mansession as it was not
	  used correctly anyways.

	* main/manager.c: create proper handlers for "Challenge" and
	  "Login" actions, rather than use inline code for them. Things are
	  more readable this way, and also error processing is more
	  consistent.

	* main/manager.c: fix indentation from a commit of a couple of days
	  ago

	* main/manager.c: another batch of simplifications to
	  authenticate() (they are committed a bit at a time so it is
	  easier to revert them in case we find a bug at a later time).

2006-10-18 12:15 +0000 [r45528]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Remove duplicate declarations...

2006-10-18 11:59 +0000 [r45463-45518]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c, configs/manager.conf.sample: remove unused fields
	  and unimplemented options.

	* main/manager.c: first pass as simplifying authenticate(),
	  avoiding whitespace changes

	* main/manager.c: more code simplifications

	* main/manager.c: simplify ast_strings_to_mask

	* main/manager.c: add a comment to remember that a block of code is
	  completely redundant.

	* main/manager.c: + move the enum declaration for output formats
	  near the head of the file, so it can be used from more places; +
	  make the declaration of contenttype[] more robust; + remove the
	  wrappers around __xml_translate(), since they were used only in
	  one place, and rename to xml_translate(). This allows for a bit
	  of simplifications. + document the output produced by the above
	  function.

	* main/manager.c: merge xml_translate() and html_translate() into
	  one function since they do similar things. Add a small form on
	  top of the html output so request like
	  http://foo:8088/asterisk/manager will suggest you what to do.
	  Note: i suspect there is still a bug somewhere in the session
	  matching code, as sometimes you have to login twice in order for
	  the following commands to be recognised. Apart from this, the cli
	  now is basically usable from a web form!

	* main/http.c: introduce uri_decode() so that '+' are translated
	  into ' ' (e.g. browsers do this when they encode input strings
	  from a form).

	* main/http.c: various code simplifications to reduce nesting
	  depth, minor optimizations to avoid extra calls of strlen(), and
	  some variable localization. One feature worth backporting is the
	  move of ast_variables_destroy() to a different place in
	  handle_uri() to avoid leaking memory in case a uri is not found.

2006-10-18 03:03 +0000 [r45453]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 45452 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45452 | file | 2006-10-17 23:02:08 -0400 (Tue, 17 Oct 2006) | 2
	  lines Don't segfault if you're using a channel driver that
	  doesn't turn RTCP on ........

2006-10-18 02:46 +0000 [r45440-45442]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 45441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45441 | russell | 2006-10-17 22:41:36 -0400 (Tue, 17 Oct 2006) |
	  7 lines Don't attempt to access private data members of the
	  pthread_mutex_t object, because this does not work on all linux
	  systems. Instead, just access the reentrancy field in the
	  ast_mutex_info struct when DEBUG_THREADS is enabled. If
	  DEBUG_CHANNEL_LOCKS is enabled, the developer probably has
	  DEBUG_THREADS on as well. (issue #8139, me) ........

	* configs/sip_notify.conf.sample, /: Merged revisions 45439 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45439 | russell | 2006-10-17 22:19:07 -0400 (Tue, 17 Oct 2006) |
	  2 lines update entry to reboot a snom phone (issue #7850,
	  pnlarsson) ........

2006-10-17 23:06 +0000 [r45426]  Steve Murphy <murf@digium.com>

	* res/res_agi.c: As per bug 6779, this patch is now applied to
	  trunk; while I was at it, I corrected a reference to a CLI
	  command, to follow the new regime.

2006-10-17 22:32 +0000 [r45409-45411]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/prep_tarball (added): Merged revisions 45410 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45410 | kpfleming | 2006-10-17 17:31:54 -0500 (Tue, 17 Oct 2006)
	  | 2 lines add a project-specific script to be used during release
	  preparation ........

	* main/channel.c, /, channels/chan_sip.c, channels/chan_iax2.c,
	  include/asterisk/stringfields.h, main/ast_expr2.c: Merged
	  revisions 45408 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45408 | kpfleming | 2006-10-17 17:24:10 -0500 (Tue, 17 Oct 2006)
	  | 3 lines optimize the 'quick response' code a bit more... no
	  more malloc() or memset() for each response expand stringfields
	  API a bit to allow reusing the stringfield pool on a structure
	  when needed, and remove some unnecessary code when the structure
	  was being freed ........

2006-10-17 21:09 +0000 [r45379-45398]  Joshua Colp <jcolp@digium.com>

	* main/manager.c: Warning be gone!

	* /, channels/chan_sip.c: Merged revisions 45378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45378 | file | 2006-10-17 16:30:34 -0400 (Tue, 17 Oct 2006) | 2
	  lines Don't create a "real" pvt structure for requests that
	  shouldn't be able to create one. Instead use a temporary pvt and
	  fill it with enough information so we can send a reply. ........

2006-10-17 19:57 +0000 [r45365]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c, doc/channelvariables.txt: Issue #5484
	  (branch sipdiversion) - Support for Diversion header in redirects
	  of calls with 302 redirection. (tinning)

2006-10-17 18:08 +0000 [r45351]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: simplify authority_to_str() using
	  ast_build_string()

2006-10-17 17:54 +0000 [r45335]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Issue #7254 - Add support of "423 Interval
	  too brief" to outbound SIP registrations. Thanks, tardieu!

2006-10-17 17:51 +0000 [r45334]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: Improve the XML formatting of responses coming
	  from web interface. Normal responses are sequences of lines of
	  the form "Name: value", with \r\n as line terminators and an
	  empty line as a response terminator. Generi CLI commands,
	  however, do not have such a clean formatting, and the existing
	  code failed to generate valid XML for them. Obviously we can only
	  use heuristics here, and we do the following: - accept either \r
	  or \n as a line terminator, trimming trailing whitespace; - if a
	  line does not have a ":" in it, assume that from this point on we
	  have unformatted data, and use "Opaque-data:" as a name; - if a
	  line does have a ":" in it, the Name field is not always a legal
	  identifier, so replace non-alphanum characters with underscores;
	  All the above is to be refined as we improve the formatting of
	  responses from the CLI. And, all the above ought to go as a
	  comment in the code rather than just in a commit message...

2006-10-17 17:51 +0000 [r45331-45333]  Olle Johansson <oej@edvina.net>

	* /, configs/sip.conf.sample: Update of docs

	* channels/chan_sip.c: - Remove unneeded code that won't be reached
	  now that we kill responses to unkonwn dialogs earlier in the
	  process. - move debug message.

2006-10-17 17:41 +0000 [r45330]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: open a temporary file to receive the output from
	  cli commands invoked through the http interface. It is not
	  terribly efficient but better than no output at all. Todo: use a
	  configurable /tmp directory instead of a hardwired one.

2006-10-17 17:22 +0000 [r45328]  Kevin P. Fleming <kpfleming@digium.com>

	* /, LICENSE: Merged revisions 45327 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45327 | kpfleming | 2006-10-17 12:22:25 -0500
	  (Tue, 17 Oct 2006) | 10 lines Merged revisions 45326 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r45326 | kpfleming | 2006-10-17 12:22:01 -0500 (Tue, 17
	  Oct 2006) | 2 lines provide licensing language for IAXy firmware
	  file ........ ................

2006-10-17 17:19 +0000 [r45325]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: document xml_copy_escape() and add an extra
	  function, namely replace non-alphanum chars with underscore. This
	  is useful when building field names in xml formatting.

2006-10-17 16:27 +0000 [r45295-45316]  Olle Johansson <oej@edvina.net>

	* /: ...block this one too... Only applies to 1.4 since the fix for
	  trunk was different.

	* /: Block patch from 1.4 that does not apply here.

	* channels/chan_sip.c: Get rid of the ignore variable that was only
	  partially replaced by the flag.

2006-10-16 20:26 +0000 [r45234-45286]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample: In the course of a
	  data this has been turned into an option to ignore replies, then
	  ignore responses and finally I'm just getting rid of the option
	  altogether and making it the default no matter what. C'est la
	  vie!

	* /: Woof.

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  45280 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45280 | file | 2006-10-16 16:06:18 -0400 (Mon,
	  16 Oct 2006) | 10 lines Merged revisions 45265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45265 | file | 2006-10-16 15:59:54 -0400 (Mon, 16 Oct 2006) | 2
	  lines Use responses rather then replies even though they mean the
	  same thing. ........ ................

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  45262 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45262 | file | 2006-10-16 15:37:34 -0400 (Mon,
	  16 Oct 2006) | 10 lines Merged revisions 45260 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45260 | file | 2006-10-16 15:28:18 -0400 (Mon, 16 Oct 2006) | 2
	  lines Add 'ignoreoodreplies' option which will not create a pvt
	  structure on a SIP response but instead basically drop it.
	  ........ ................

	* apps/app_directed_pickup.c: It's new directed pickup! This now
	  features a more sane way of finding the channel to pick up (I
	  snuck it into the tree on Friday... bet you didn't know I'd
	  actually use it eh?). PICKUPMARK now also works in a different
	  way, you should prefix it with _ when setting it so it gets
	  inherited onto the channel(s) created in app_dial as directed
	  pickup will now look for it on the target channel, not the
	  originating channel. (BE-85)

2006-10-16 14:03 +0000 [r45224]  Olle Johansson <oej@edvina.net>

	* CREDITS, /: Update

2006-10-16 14:00 +0000 [r45219]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: + comment some unclear fields of struct
	  mansession; + let some commands (Challenge, Login) be processed
	  even if already authenticated, as it doesn't harm and prevents
	  some incorrect error messages + remove custom code for Logoff -
	  the existing handler was ok. Some indentation fixes may be
	  necessary

2006-10-16 13:20 +0000 [r45194-45209]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: When adding new functions, please add a
	  forward declaration. I *know* it is not required, but it makes
	  navigation easier and will help when splitting up this large
	  source code file. Thank you!

	* /, channels/chan_sip.c: Importing rev 45196 from 1.4 - don't kill
	  dialog for a bad response

	* channels/chan_sip.c: A B2BUA should *not* issue proxy auth.

2006-10-16 11:29 +0000 [r45151-45185]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: + comment some unclear requirements for
	  master_eventq + remove the need for an snprintf in
	  astman_get_header() + fix comment for manager list eventq +
	  localize one variable and minor code simplifications.

	* main/manager.c: protect access to first_action with actionlock.
	  Mark with XXX one place (during command execution) where
	  navigation should be protected with actionlock, but is not
	  because it would block requests for a long time. To solve this
	  properly we need to put reference counts in the struct
	  manager_action. A suboptimal fix is to copy the record on a
	  search and then unlock the list while we work on the copy.

	* main/http.c: comment some functions, and more small code
	  simplifications

	* main/http.c: fix indentation of a large block after changes in
	  previous commit (basically whitespace only).

	* main/http.c: simplify string parsing routines using ast_skip_*()
	  functions.

	* main/http.c: don't forget to close a descriptor on a malloc
	  failure. On passing, small rearrangement of the code to reduce
	  indentation. There is a bit more cleanup planned for this file,
	  so a merge to 1.4 will be done when it is all done.

	* main/http.c: typo: serer -> server

2006-10-14 04:36 +0000 [r45142]  Steve Murphy <murf@digium.com>

	* funcs/func_rand.c: update the doc string for both AEL and
	  extensions.conf users.

2006-10-13 23:03 +0000 [r45126]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/acl.c: Merged revisions 45125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45125 | kpfleming | 2006-10-13 18:02:48 -0500 (Fri, 13 Oct 2006)
	  | 7 lines
	  ------------------------------------------------------------------------
	  r45119 | kpfleming | 2006-10-13 17:57:42 -0500 (Fri, 13 Oct 2006)
	  | 2 lines don't drop the entire permit/deny list when an attempt
	  is made to add an invalid entry (BE-92)
	  ------------------------------------------------------------------------
	  ........

2006-10-13 21:20 +0000 [r45105-45109]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c: Inherit the context and extension until the
	  channel is answered

	* /, res/res_speech.c: Merged revisions 45106 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45106 | file | 2006-10-13 17:06:09 -0400 (Fri, 13 Oct 2006) | 2
	  lines Clear the quiet flag too since we are restarting a
	  recognition again (reported on -dev by Stephan Edelman) ........

	* /, res/res_speech.c: Merged revisions 45104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45104 | file | 2006-10-13 17:01:13 -0400 (Fri, 13 Oct 2006) | 2
	  lines Check return value from engine in case of failure (ie: out
	  of licenses) (reported on -dev mailing list) ........

2006-10-13 19:24 +0000 [r45089]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 45088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r45088 | crichter | 2006-10-13 21:19:46 +0200 (Fr, 13
	  Okt 2006) | 1 line avoiding warning, fixing potential bug
	  ........

2006-10-13 18:45 +0000 [r45080]  Joshua Colp <jcolp@digium.com>

	* codecs/lpc10/median.c, codecs/lpc10/encode.c,
	  codecs/lpc10/ivfilt.c, /, codecs/lpc10/bsynz.c,
	  codecs/lpc10/prepro.c, codecs/lpc10/invert.c,
	  codecs/lpc10/placev.c, codecs/lpc10/irc2pc.c,
	  codecs/lpc10/decode.c, codecs/lpc10/dcbias.c,
	  codecs/lpc10/pitsyn.c, codecs/lpc10/difmag.c,
	  codecs/lpc10/voicin.c, codecs/lpc10/synths.c,
	  codecs/lpc10/preemp.c, codecs/lpc10/hp100.c,
	  codecs/lpc10/lpfilt.c, codecs/lpc10/rcchk.c,
	  codecs/lpc10/mload.c, codecs/lpc10/lpcenc.c,
	  codecs/lpc10/vparms.c, codecs/lpc10/dyptrk.c,
	  codecs/lpc10/lpcini.c, codecs/lpc10/random.c,
	  codecs/lpc10/ham84.c, codecs/lpc10/chanwr.c,
	  codecs/lpc10/placea.c, codecs/lpc10/tbdm.c,
	  codecs/lpc10/analys.c, codecs/lpc10/onset.c,
	  codecs/lpc10/energy.c, codecs/lpc10/lpcdec.c,
	  codecs/lpc10/deemp.c: Merged revisions 45079 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45079 | file | 2006-10-13 14:42:49 -0400 (Fri, 13 Oct 2006) | 2
	  lines And file said... let the compiler warnings STOP! ........

2006-10-13 18:08 +0000 [r45078]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-vtest17 (added),
	  pbx/ael/ael-test/ael-vtest17/extensions.ael (added),
	  pbx/ael/ael-test/ael-vtest17 (added),
	  pbx/ael/ael-test/ref.ael-test3, pbx/pbx_ael.c: Correction for bug
	  8128 in trunk

2006-10-13 17:06 +0000 [r45052-45067]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 45066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45066 | file | 2006-10-13 13:05:02 -0400 (Fri,
	  13 Oct 2006) | 10 lines Merged revisions 45060 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45060 | file | 2006-10-13 13:01:22 -0400 (Fri, 13 Oct 2006) | 2
	  lines Turn on volume adjustment if it needs to be on (issue #8136
	  reported by mnicholson) ........ ................

	* /, apps/app_playback.c: Merged revisions 45051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45051 | file | 2006-10-13 12:20:58 -0400 (Fri, 13 Oct 2006) | 2
	  lines Move say.conf existence check to do_say function since it
	  is called from multiple places (issue #8144 reported by kshumard)
	  ........

2006-10-13 16:20 +0000 [r45050]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 45049 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45049 | kpfleming | 2006-10-13 11:19:35 -0500
	  (Fri, 13 Oct 2006) | 10 lines Merged revisions 45048 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r45048 | kpfleming | 2006-10-13 11:18:08 -0500 (Fri, 13
	  Oct 2006) | 2 lines when sending a call to a peer, use the proper
	  socket if we have multiple bindings (reported on asterisk-dev)
	  ........ ................

2006-10-13 16:02 +0000 [r45032-45047]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 45040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45040 | file | 2006-10-13 12:01:17 -0400 (Fri, 13 Oct 2006) | 2
	  lines Complete merging in RPID screen changes (issue #8101
	  reported by hristo, patch by oej in revision 44757) ........

	* main/dnsmgr.c, /: Merged revisions 45031 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45031 | file | 2006-10-13 11:53:22 -0400 (Fri,
	  13 Oct 2006) | 10 lines Merged revisions 45030 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r45030 | file | 2006-10-13 11:49:53 -0400 (Fri, 13 Oct 2006) | 2
	  lines Pass the right value to usleep for sleeping, and always add
	  the background refresh item back into the scheduler if enabled
	  since it is deleted during reload. (issue #8142 reported by
	  p_lindheimer) ........ ................

2006-10-13 15:47 +0000 [r45029]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/utils.c: Merged revisions 45027 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r45027 | kpfleming | 2006-10-13 10:41:14 -0500 (Fri, 13 Oct 2006)
	  | 2 lines use a configure script test for PMTU discovery control
	  instead of just assuming it's available on Linux ........

2006-10-13 15:42 +0000 [r45028]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 45026 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r45026 | crichter | 2006-10-13 16:45:39 +0200
	  (Fr, 13 Okt 2006) | 9 lines Merged revisions 45020 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r45020 | crichter | 2006-10-13 15:11:13 +0200 (Fr, 13
	  Okt 2006) | 1 line fixed some echocandisable issues when bridged.
	  this caused a kernel panic sometimes..also some minor formatting
	  fixes ........ ................

2006-10-13 11:18 +0000 [r45009-45010]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: Try to avoid the use of 'z' modifier in
	  cases where it is not necessary - rather, cast the argument to
	  int. In this case, the string is in a UDP packet and as such
	  limited to 64k so its length can be safely represented in an int
	  without truncation (besides, this is just a debugging message!)

	* channels/chan_sip.c: arguments to auth_headers() needed to be
	  swapped here. To avoid the same mistake in the future (due to
	  slightly confusing variable names), add a comment. On passing,
	  remove a redundant initialization.

2006-10-13 08:23 +0000 [r45000]  Christian Richter <christian.richter@beronet.com>

	* /, channels/misdn/isdn_msg_parser.c: Merged revisions 44994 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44994 | crichter | 2006-10-13 09:52:41 +0200
	  (Fr, 13 Okt 2006) | 9 lines Merged revisions 44993 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44993 | crichter | 2006-10-13 09:40:07 +0200 (Fr, 13
	  Okt 2006) | 1 line fixed issue, that the hangupcause got a wrong
	  isdn cause at RELEASE_COMPLETE ........ ................

2006-10-12 20:41 +0000 [r44983]  Matt O'Gorman <mogorman@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 44982 via svnmerge
	  from https://svn.digium.com/svn/asterisk/branches/1.4 ........
	  r44982 | mogorman | 2006-10-12 15:34:49 -0500 (Thu, 12 Oct 2006)
	  | 2 lines fix for bug 7764. ........

2006-10-12 19:16 +0000 [r44957-44973]  Kevin P. Fleming <kpfleming@digium.com>

	* channels/chan_sip.c: eliminate compiler warning

	* /, channels/chan_sip.c: Merged revisions 44971 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44971 | kpfleming | 2006-10-12 14:14:24 -0500 (Thu, 12 Oct 2006)
	  | 2 lines we can only send one 'a=ptime' attribute per media
	  session, not one for each format ........

	* include/asterisk/utils.h, /, channels/chan_sip.c, main/utils.c,
	  main/netsock.c: Merged revisions 44956 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44956 | kpfleming | 2006-10-12 13:38:51 -0500
	  (Thu, 12 Oct 2006) | 10 lines Merged revisions 44955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44955 | kpfleming | 2006-10-12 13:31:26 -0500 (Thu, 12
	  Oct 2006) | 2 lines ensure that IAX2 and SIP sockets allow UDP
	  fragmentation when running on Linux (thanks to Brian Candler on
	  the asterisk-dev list for the tip) ........ ................

2006-10-12 16:57 +0000 [r44944-44946]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 44945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44945 | russell | 2006-10-12 12:56:32 -0400 (Thu, 12 Oct 2006) |
	  2 lines fix a silly typo in a comment that I saw while reading
	  the commit list ........

	* pbx/pbx_dundi.c: put flags in an enum and remove a couple of
	  unused defines

2006-10-12 16:11 +0000 [r44943]  Joshua Colp <jcolp@digium.com>

	* Makefile, /: Merged revisions 44942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44942 | file | 2006-10-12 12:08:50 -0400 (Thu, 12 Oct 2006) | 2
	  lines Pass off AUDIO_LIBS so muted can link on OSX (issue #8135
	  reported by ssokol) ........

2006-10-12 15:12 +0000 [r44933]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: + move [almost] all instances of
	  WWW-Authenticate/Proxy-Authenticate and friends in a function,
	  auth_headers(), which is used to simplify the interface of
	  do_{proxy|register}_auth(). + use PROXY_AUTH = 407, WWW_AUTH =
	  401 as values for enum sip_auth_type; No functional change, only
	  code cleanup.

2006-10-12 13:04 +0000 [r44922]  Nadi Sarrar <ns@beronet.com>

	* main/manager.c, /: Merged revisions 44921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44921 | nadi | 2006-10-12 14:55:25 +0200 (Do, 12 Okt 2006) | 2
	  lines append_event must be called while holding the session lock
	  ........

2006-10-12 10:26 +0000 [r44912]  Russell Bryant <russell@digium.com>

	* /, res/res_jabber.c: Merged revisions 44911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44911 | russell | 2006-10-12 06:24:36 -0400 (Thu, 12 Oct 2006) |
	  2 lines change some debug output to use LOG_DEBUG instead of
	  verbose output ........

2006-10-11 23:36 +0000 [r44900-44901]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: reduce indentation of two large blocks

	* channels/chan_sip.c: operator != also works between booleans...

2006-10-11 16:57 +0000 [r44889]  Jason Parker <jparker@digium.com>

	* /, main/db1-ast/Makefile: Merged revisions 44888 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r44888 | qwell | 2006-10-11 11:57:06 -0500 (Wed, 11 Oct
	  2006) | 3 lines These are already set by the parent Makefile..
	  There is no need to have this here (it doesn't actually work
	  anyways). ........

2006-10-11 13:45 +0000 [r44876-44877]  Russell Bryant <russell@digium.com>

	* doc/linkedlists.txt (removed): Remove doc/linkedlists.txt as it
	  is no longer needed. The top of the file reads: As of 2004-12-23,
	  this documentation is no longer maintained. The doxygen
	  documentation generated from linkedlists.h should be referred to
	  in its place, as it is more complete and better maintained.

	* channels/chan_sip.c: Revert Luigi's accidental commit of his
	  local changes when debugging some SIP authentication issues. This
	  was committed in revision 44844, where the commit message was
	  just "small formatting cleanup", so I am pretty sure he didn't
	  mean to commit this part.

2006-10-11 13:21 +0000 [r44844-44875]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: remove duplicate prototypes. Have not
	  checked if there are more.

	* channels/chan_sip.c: simplify and comment
	  handle_response_peerpoke()

	* channels/chan_sip.c: fix indentation of a function after previous
	  commit (whitespace-only change)

	* channels/chan_sip.c: handle_response_peerpoke() does not need to
	  return anything. (Reindentation in the next commit.)

	* channels/chan_sip.c: small formatting cleanup

2006-10-11 08:45 +0000 [r44840-44843]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /: Merged revisions 44563 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44563 | crichter | 2006-10-06 14:53:41 +0200
	  (Fr, 06 Okt 2006) | 9 lines Merged revisions 44460 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44460 | crichter | 2006-10-05 12:02:38 +0200 (Do, 05
	  Okt 2006) | 1 line fixed segfault which happens during
	  hold/transfer action ........ ................

	* channels/chan_misdn.c, /: Merged revisions 44562 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44562 | crichter | 2006-10-06 14:52:01 +0200
	  (Fr, 06 Okt 2006) | 9 lines Merged revisions 44335 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44335 | crichter | 2006-10-04 17:26:59 +0200 (Mi, 04
	  Okt 2006) | 1 line if INFORMATION Message come with keypad
	  instead of called party number, we just use the keypad as called
	  party number. ........ ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/chan_misdn_config.h, configs/misdn.conf.sample,
	  channels/misdn/isdn_lib.c, channels/misdn_config.c: Merged
	  revisions 44561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44561 | crichter | 2006-10-06 14:50:25 +0200
	  (Fr, 06 Okt 2006) | 9 lines Merged revisions 44334 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44334 | crichter | 2006-10-04 17:13:58 +0200 (Mi, 04
	  Okt 2006) | 1 line added the option 'reject_cause' to make it
	  possible to set the RELEASE_COMPLETE - cause on the 3. incoming
	  PMP channel, which is automatically rejected because chan_misdn
	  does not support that kind of callwaiting. Therefore chan_misdn
	  supports now 3 incoming channels on a PMP BRI Port.
	  misdn_lib_get_free_bc now gets the info if the requested channel
	  is incoming or outgoing to make the 3. channel possible ........
	  ................

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_lib.c: Merged revisions 44559 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44559 | crichter | 2006-10-06 12:44:34 +0200
	  (Fr, 06 Okt 2006) | 9 lines Merged revisions 44149 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44149 | crichter | 2006-10-02 15:28:14 +0200 (Mo, 02
	  Okt 2006) | 1 line fixed the hold/retrieve/transfer issues,
	  removed a useless bc field, added setting of frame.delivery
	  fields, some minor code cleanups ........ ................

2006-10-10 20:52 +0000 [r44831]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_rpt.c: More whitespace fixes

2006-10-10 17:23 +0000 [r44820]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44819 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44819 | file | 2006-10-10 13:21:44 -0400 (Tue, 10 Oct 2006) | 2
	  lines Move some stuff around so that a NOTIFY dialog won't hang
	  around until the end of the world under certain circumstances
	  ........

2006-10-10 16:46 +0000 [r44810]  Tilghman Lesher <tlesher@digium.com>

	* /, funcs/func_logic.c: Merged revisions 44808 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44808 | tilghman | 2006-10-10 11:42:19 -0500 (Tue, 10 Oct 2006)
	  | 2 lines Lost of a bit of logic when this was simplified between
	  1.2 and 1.4 (Bug 8117) ........

2006-10-10 16:31 +0000 [r44789-44807]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44806 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44806 | file | 2006-10-10 12:30:00 -0400 (Tue, 10 Oct 2006) | 2
	  lines Bail out if we have no refer structure and we get a refer
	  response ........

	* /, channels/chan_sip.c: Merged revisions 44788 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44788 | file | 2006-10-10 11:23:14 -0400 (Tue, 10 Oct 2006) | 2
	  lines Only set DTMF information if an RTP structure exists
	  ........

2006-10-10 14:54 +0000 [r44787]  Christian Richter <christian.richter@beronet.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_lib.c: Merged
	  revisions 44786 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44786 | crichter | 2006-10-10 15:50:26 +0200
	  (Di, 10 Okt 2006) | 9 lines Merged revisions 44785 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44785 | crichter | 2006-10-10 15:34:33 +0200 (Di, 10
	  Okt 2006) | 1 line (re)added support of dynamical enabling hdlc
	  on bchannels ........ ................

2006-10-10 08:08 +0000 [r44770-44774]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: clarify the use of the standard SIP port
	  number, 5060, and rename the old DEFAULT_SIP_PORT as
	  STANDARD_SIP_PORT to make it clear that this is not something we
	  can change, unlike other defaults.

	* channels/chan_sip.c: improve formatting of SIP packets when
	  dumped to the verbose output stream, so it is easier to find them
	  in the log.

2006-10-09 18:23 +0000 [r44768]  Joshua Colp <jcolp@digium.com>

	* funcs/func_timeout.c: Timeout values are in seconds (issue #7122
	  reported by jmls)

2006-10-09 16:15 +0000 [r44765]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 44764 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r44764 | qwell | 2006-10-09 11:12:35 -0500 (Mon, 09 Oct
	  2006) | 4 lines Fix a problem where phones that go "missing"
	  never got unregistered. Issue #8067, reported by pj, patch by
	  Anthony LaMantia (with minor whitespace modifications) ........

2006-10-09 15:52 +0000 [r44762-44763]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 44759 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44759 | file | 2006-10-09 11:41:28 -0400 (Mon, 09 Oct 2006) | 2
	  lines Properly avoid a collision with iax2_hangup (issue #8115
	  reported by vazir) ........

2006-10-09 11:20 +0000 [r44753]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Being pedantic... "media" is easier to
	  understand than "data" in the function name... :-)

2006-10-09 09:04 +0000 [r44745-44752]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: slightly restructure sipsock_read() removing
	  a "goto"

	* channels/chan_sip.c: use S_OR in one place

	* channels/chan_sip.c: update_call_counter(): indentation fixes and
	  small simplifications at the top of the function.

	* channels/chan_sip.c: localize some variables and reduce nesting
	  depth (indentation will be fixed by a separate commit).

	* channels/chan_sip.c: small simplification to initreqprep()

	* channels/chan_sip.c: Simplify function parse_request() using a
	  single loop instead of two very similar ones.

	* channels/chan_sip.c: do not dereference p if we know it is NULL.

2006-10-07 20:42 +0000 [r44697-44731]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Fix some debug output for setsockopt for TOS

	* channels/chan_sip.c: - move definition of global_autoframing to
	  the same place as other globals - set initial value at
	  load/reload - Add questionmarks for someone to fill in for
	  doxygen

	* channels/chan_sip.c: Add/change doxygen and comments

	* configs/sip.conf.sample: Recommend using "sip reload" since it's
	  much easier to learn and remember.

	* channels/chan_sip.c: Explain usage of DEFAULT_SIP_PORT

	* channels/chan_sip.c: Do *NOT* use DEFAULT_SIP_PORT in these
	  comparisions, since users may change that, but the protocol
	  clearly states that if we DO NOT mention a port it is 5060.
	  DEFAULT_SIP_PORT is whatever we default to listen to. I believe
	  it's the third time I revert a patch like this.

2006-10-07 14:48 +0000 [r44685-44686]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx, channels/chan_h323.c,
	  channels/h323/ast_h323.h, channels/h323/chan_h323.h: Merged
	  revisions 44684 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44684 | pcadach | 2006-10-07 20:39:34 +0600 (Сбт, 07 Окт 2006) |
	  1 line Propagate caller's transfer capability too ........

	* include/asterisk/callerid.h, main/callerid.c, CHANGES,
	  funcs/func_callerid.c: Extend CALLERID() function for "pres" and
	  "ton" values

2006-10-07 12:50 +0000 [r44641-44675]  Luigi Rizzo <rizzo@icir.org>

	* channels/chan_sip.c: slightly restructure the code that computes
	  the channel's name

	* channels/chan_sip.c: put repeated code to set nat mode in a
	  function.

	* channels/chan_sip.c: put common code in a function to avoid
	  repetitions.

	* channels/chan_sip.c: remove hardwired usage of 5060, use
	  DEFAULT_SIP_PORT instead

	* channels/chan_sip.c: improve and document function
	  get_in_brackets(), introducing a helper function
	  find_closing_quote() of more general use.

	* channels/chan_sip.c: when possible, use ast_set2_flags instead of
	  ast_set/ast_clr . Also mark XXX some dubious places.

2006-10-06 21:29 +0000 [r44632]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/linkedlists.h: Merged revisions 44631 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44631 | kpfleming | 2006-10-06 16:28:03 -0500 (Fri, 06 Oct 2006)
	  | 2 lines ensure that mutex locks inside list heads are
	  initialized properly on platforms that require constructor
	  initialization (issue #8029, patch from timrobbins) ........

2006-10-06 21:10 +0000 [r44630]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 44628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44628 | file | 2006-10-06 17:08:54 -0400 (Fri, 06 Oct 2006) | 2
	  lines Remove the seqno check for RFC2833, the handler is smart
	  enough to not need it. ........

2006-10-06 21:04 +0000 [r44616-44626]  Luigi Rizzo <rizzo@icir.org>

	* main/manager.c: basically fix indentation of a large function
	  after previous simplifications. On passing, use a single exit
	  point. (once done with the cleanup i will merge the changes into
	  1.4, if applicable)

	* main/manager.c: s cannot be null here, so remove the useless test
	  and error-handling block.

	* main/manager.c: simplify logic in preparation to reduce
	  indentation

2006-10-06 18:47 +0000 [r44606]  Joshua Colp <jcolp@digium.com>

	* /, main/rtp.c: Merged revisions 44605 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44605 | file | 2006-10-06 14:46:28 -0400 (Fri, 06 Oct 2006) | 2
	  lines When the sequence number rolls over then reset the recorded
	  sequence number for DTMF (issue #8106 reported by bungalow)
	  ........

2006-10-06 17:27 +0000 [r44595]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_rpt.c: Massive cleanup of the rpt code, updating to
	  current coding guidelines

2006-10-06 16:56 +0000 [r44582]  Joshua Colp <jcolp@digium.com>

	* /, main/file.c: Merged revisions 44581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44581 | file | 2006-10-06 12:53:48 -0400 (Fri,
	  06 Oct 2006) | 10 lines Merged revisions 44580 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r44580 | file | 2006-10-06 12:52:14 -0400 (Fri, 06 Oct 2006) | 2
	  lines Even more frames to treat as though the remote side
	  disappeared (issue #8097 reported by eldadran) ........
	  ................

2006-10-06 16:43 +0000 [r44566-44579]  Luigi Rizzo <rizzo@icir.org>

	* configs/sip.conf.sample: document a bit the use of templates.
	  They are highly convenient for writing configuration files,
	  especially if you have many similar entries, or want to switch
	  quickly between different configurations without having to
	  comment/uncomment large sections of the files.

	* configs/sip.conf.sample: document the "contact" option a bit
	  better.

	* res/res_limit.c: help old bsd-system which don't have RLIMIT_AS
	  and use RLIMIT_VMEM for virtual memory limits.

	* main/manager.c, main/http.c: make sure sockets are blocking when
	  they should be blocking.

	* channels/chan_sip.c, configs/sip.conf.sample: Two things: 1.
	  slightly rearrange/simplify the parsing of the argument in
	  sip_register. This brings in a patch that has been in Mantis
	  (5834) for ages, and is the larger part of the commit; 2.
	  implement the "contact" option for peers, similar to the one in
	  users.conf: If you put a "contact" option with a non-empty
	  argument (e.g. contact=123) in a peer section, asterisk will
	  register with the provider as if you had a register=
	  username:secret@host/contact line in the general section. The
	  latter is a very small is a new feature so i am not putting it in
	  the 1.4 branch, although the "contact" option in user.conf is
	  already in the 1.4 branch and so it wouldn't be too strange to
	  merge it. Note that the implementation of "contact" is much
	  simpler than the one in 5834, and limited to a few lines in
	  build_peer().

2006-10-06 09:01 +0000 [r44545]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Remove deprecated "incominglimit" config
	  option

2006-10-06 06:43 +0000 [r44537]  Luigi Rizzo <rizzo@icir.org>

	* configs/sip.conf.sample: update example commands to match current
	  syntax (does not apply to 1.4)

2006-10-06 02:24 +0000 [r44527]  Russell Bryant <russell@digium.com>

	* configure, include/asterisk/autoconfig.h.in: regenerate the
	  configure script to reflect the latest changes done by Luigi
	  Rizzo

2006-10-05 20:13 +0000 [r44503-44516]  Joshua Colp <jcolp@digium.com>

	* apps/app_voicemail.c: Fix indenting a bit (issue #8082 reported
	  by selsky)

	* /, main/file.c: Merged revisions 44502 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44502 | file | 2006-10-05 15:57:16 -0400 (Thu,
	  05 Oct 2006) | 10 lines Merged revisions 44501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r44501 | file | 2006-10-05 15:55:41 -0400 (Thu, 05 Oct 2006) | 2
	  lines Treat busy control frames as hangup in the file streaming
	  core (issue #8097 reported by eldadran) ........ ................

2006-10-05 18:29 +0000 [r44489]  Steve Murphy <murf@digium.com>

	* pbx/pbx_ael.c: These mods fix a problem pointed out by dgartang,
	  where in certain situations, the target of a goto cannot be
	  found, even right under your nose. This is because the current
	  context is not updated properly, and rather than waste time and
	  find why and where the context should have been updated, I just
	  use my newly added 'dad' ptrs, and pop until I have either the
	  context or extension, and use that instead.

2006-10-05 18:03 +0000 [r44487]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44486 | file | 2006-10-05 14:01:51 -0400 (Thu, 05 Oct 2006) | 2
	  lines One more T.38 fix! Don't leave a reinvite hanging by a
	  thread if the other side is already setup with T.38 ........

2006-10-05 16:11 +0000 [r44477]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/app.c: Merged revisions 44476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44476 | kpfleming | 2006-10-05 11:10:01 -0500 (Thu, 05 Oct 2006)
	  | 3 lines don't segfault when an argument without a close
	  parenthesis is found stop parsing as soon as that situation
	  occurs ........

2006-10-05 15:42 +0000 [r44467]  Luigi Rizzo <rizzo@icir.org>

	* configure.ac, acinclude.m4: Basically, this commit only
	  simplifies configure.ac and makes the mechanism more flexible,
	  but otherwise should not affect your build even if you regenerate
	  the "configure" script. (Most likely you need to run bootstrap.sh
	  as you really need to re-run autoheader for reasons that i do not
	  completely understand). If you don't regenerate "configure", of
	  course you will see no difference. In detail: - restructure the
	  check for mandatory modules to remove some redundant code blocks;
	  - extend the AST_EXT_LIB_CHECK so that it can used also for
	  checking headers; - define the AST_C_DEFINE_CHECK macro to test
	  for #defined symbols; - for the two above macros, add a last
	  argument that getscopied into HAVE_$1_VERSION so the source can
	  adapt to different versions of the same libraries/header/etc -
	  document the above; - document a problem that existed before and
	  i did not manage to solve: the 'description' argument to
	  AC_DEFINE does not substiture shell variables so you will not see
	  the actual values in the comments (in autoconfig.h)..

2006-10-05 02:43 +0000 [r44451]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44450 | file | 2006-10-04 22:40:40 -0400 (Wed, 04 Oct 2006) | 2
	  lines Don't totally bail out if T.38 was negotiated ........

2006-10-05 01:43 +0000 [r44437]  Kevin P. Fleming <kpfleming@digium.com>

	* utils/Makefile, /: Merged revisions 44436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44436 | kpfleming | 2006-10-04 20:42:06 -0500 (Wed, 04 Oct 2006)
	  | 2 lines this change was correct, the old version is no longer
	  needed ........

2006-10-05 01:40 +0000 [r44435]  Steve Murphy <murf@digium.com>

	* main/pbx.c, apps/app_read.c, apps/app_waitforring.c, CHANGES,
	  apps/app_speech_utils.c: As per ToDo list, I have made it so that
	  Wait(), WaitExten(), Congestion(), Busy(), Read(), WaitForRing(),
	  will now either actually handle a floating point argument as
	  advertised, or has been upgraded to accept a floating point
	  [timeout] arg.

2006-10-05 01:30 +0000 [r44434]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44433 | kpfleming | 2006-10-04 20:30:05 -0500
	  (Wed, 04 Oct 2006) | 10 lines Merged revisions 44432 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44432 | kpfleming | 2006-10-04 20:27:57 -0500 (Wed, 04
	  Oct 2006) | 2 lines fix Polycom presence notification again
	  ........ ................

2006-10-04 23:52 +0000 [r44408-44423]  Luigi Rizzo <rizzo@icir.org>

	* configure.ac: simplify checks for OSS using AST_EXT_LIB_CHECK;
	  remove two repeated blocks using better logic.

	* acinclude.m4: small formatting fix

	* acinclude.m4: when only checking headers, do not set $1_LIB. Also
	  PBX_$1=0 is the default so we don't need to set it explicitly.

	* acinclude.m4: document, and extend a bit the macro
	  AST_EXT_LIB_CHECK so that it can be used in more places in
	  configure.ac

	* configure.ac: restore proper CPPFLAGS and LDFLAGS for FreeBSD,
	  until a better solution is found. Please do not commit the
	  regenerated "configure" file yet, as there are some more
	  simplifications to be applied to configure.ac and acinclude.m4 in
	  the next few days. For the same reason, i am postponing the
	  commit to the 1.4 branch until the above changes are complete.

	* utils/Makefile: correct libraries for astman, at least so i
	  think...

	* Makefile: put linker flags in ASTLDFLAGS where they belong

2006-10-04 21:20 +0000 [r44379-44394]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44393 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44393 | kpfleming | 2006-10-04 16:17:30 -0500
	  (Wed, 04 Oct 2006) | 11 lines Merged revisions 44392 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44392 | kpfleming | 2006-10-04 16:15:29 -0500 (Wed, 04
	  Oct 2006) | 3 lines remove workaround for old Polycom firmware
	  SUBSCRIBE requests add workaround for new Polycom firmware
	  SUBSCRIBE requests (bug is known to exist in 2.0.1 firmware)
	  ........ ................

	* include/asterisk.h, /, main/utils.c: Merged revisions 44390 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44390 | kpfleming | 2006-10-04 16:04:21 -0500 (Wed, 04 Oct 2006)
	  | 2 lines make LOW_MEMORY builds actually work ........

	* include/asterisk/utils.h, main/autoservice.c, main/dnsmgr.c,
	  channels/chan_zap.c, res/res_snmp.c, /, apps/app_meetme.c,
	  channels/chan_sip.c, main/utils.c, main/devicestate.c,
	  res/res_musiconhold.c, res/res_jabber.c, apps/app_queue.c,
	  channels/chan_iax2.c, channels/chan_oss.c, main/cdr.c,
	  channels/chan_phone.c, main/manager.c, pbx/pbx_spool.c,
	  res/res_smdi.c, channels/chan_skinny.c, channels/chan_h323.c,
	  main/http.c, channels/chan_alsa.c, pbx/pbx_dundi.c,
	  apps/app_mixmonitor.c, main/asterisk.c, channels/chan_mgcp.c:
	  Merged revisions 44378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44378 | kpfleming | 2006-10-04 14:47:22 -0500 (Wed, 04 Oct 2006)
	  | 4 lines update thread creation code a bit reduce standard
	  thread stack size slightly to allow the pthreads library to
	  allocate the stack+data and not overflow a power-of-2 allocation
	  in the kernel and waste memory/address space add a new stack size
	  for 'background' threads (those that don't handle PBX calls) when
	  LOW_MEMORY is defined ........

2006-10-04 19:33 +0000 [r44336-44377]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ael-test16 (added), pbx/ael/ael.tab.c,
	  pbx/ael/ael.y, pbx/pbx_ael.c, pbx/ael/ael-test/ref.ael-test16
	  (added), pbx/ael/ael-test/ael-test16/extensions.ael: These
	  changes resolve the problems in bug 8090, where there's a crash
	  compiling an empty context

	* configs/muted.conf.sample: I've been meaning to add some
	  explanation about muted... here it is

	* configs/manager.conf.sample: CLI reverbification update to this
	  config file

	* apps/app_macro.c: Added a warning to the documentation for Macro
	  in response to bug 7776

2006-10-04 00:26 +0000 [r44323]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, include/asterisk.h, /, main/asterisk.c, main/loader.c,
	  main/term.c: Merged revisions 44322 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44322 | kpfleming | 2006-10-03 19:25:44 -0500 (Tue, 03 Oct 2006)
	  | 3 lines ensure that local include files are always used avoid a
	  duplicate function name (term_init()) ........

2006-10-03 22:36 +0000 [r44313]  Matt O'Gorman <mogorman@digium.com>

	* /, channels/chan_gtalk.c, res/res_jabber.c: Merged revisions
	  44312 via svnmerge from
	  https://svn.digium.com/svn/asterisk/branches/1.4 ........ r44312
	  | mogorman | 2006-10-03 17:35:43 -0500 (Tue, 03 Oct 2006) | 2
	  lines fix issue with dialing client without resource. ........

2006-10-03 20:19 +0000 [r44299]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_queue.c: Merged revisions 44298 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44298 | kpfleming | 2006-10-03 15:18:29 -0500
	  (Tue, 03 Oct 2006) | 10 lines Merged revisions 44296 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44296 | kpfleming | 2006-10-03 15:14:13 -0500 (Tue, 03
	  Oct 2006) | 2 lines fix a logic error in my previous fix to the
	  queue reload code ........ ................

2006-10-03 20:17 +0000 [r44297]  Joshua Colp <jcolp@digium.com>

	* CHANGES, apps/app_queue.c: Strat becomes Strategy based on
	  feedback from two nameless fellows

2006-10-03 18:47 +0000 [r44287]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx: Merged revisions 44283,44286 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44283 | pcadach | 2006-10-04 00:30:48 +0600 (Срд, 04 Окт 2006) |
	  1 line Fix preparation of type and presentation of calling number
	  ........ r44286 | pcadach | 2006-10-04 00:42:20 +0600 (Срд, 04
	  Окт 2006) | 1 line Change default presentation indicator to "user
	  provided not screened" if octet 3a missed in CallingPartyNumber
	  IE ........

2006-10-03 18:37 +0000 [r44273-44285]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 44284 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44284 | file | 2006-10-03 14:35:55 -0400 (Tue, 03 Oct 2006) | 2
	  lines Use VideoSupport instead so it is considered a valid XML
	  attribute name. (issue #8075 reported by renemendoza) ........

	* CHANGES, apps/app_queue.c: Add 'Strat' manager field to
	  QueueParams event. (issue #7704 reported by renemendoza)

	* main/channel.c, CHANGES: Add Masquerade manager event which trips
	  when a masquerade happens (issue #7840 reported by moy)

2006-10-03 16:42 +0000 [r44263]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-test11, pbx/ael/ael-test/ref.ael-test14,
	  pbx/ael/ael-test/ref.ael-test15, pbx/ael/ael-test/ref.ael-ntest9,
	  pbx/ael/ael-test/ref.ael-ntest10,
	  pbx/ael/ael-test/ref.ael-ntest12, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-test3,
	  pbx/pbx_ael.c, pbx/ael/ael-test/ref.ael-test4,
	  pbx/ael/ael-test/ref.ael-test5, pbx/ael/ael-test/ref.ael-test6,
	  pbx/ael/ael-test/ref.ael-test7, pbx/ael/ael-test/ref.ael-test8,
	  pbx/ael/ael-test/ref.ael-vtest13: These changes correspond to the
	  changes to app_stack's Gosub() application

2006-10-03 16:15 +0000 [r44262]  Joshua Colp <jcolp@digium.com>

	* UPGRADE.txt: First entry! Tell people about the callerid changes
	  with manager.

2006-10-03 15:53 +0000 [r44253]  Matt O'Gorman <mogorman@digium.com>

	* main/udptl.c, funcs/func_rand.c, main/say.c, apps/app_record.c,
	  apps/app_test.c, funcs/func_strings.c, apps/app_alarmreceiver.c,
	  apps/app_ices.c, channels/chan_iax2.c, main/loader.c,
	  res/res_smdi.c, channels/chan_skinny.c, apps/app_zapscan.c,
	  apps/app_zapras.c, main/http.c, channels/chan_alsa.c,
	  apps/app_externalivr.c, cdr/cdr_odbc.c, main/db.c, main/sched.c,
	  apps/app_dial.c, main/pbx.c, channels/chan_agent.c,
	  apps/app_disa.c, channels/iax2-provision.c,
	  apps/app_talkdetect.c, apps/app_db.c, res/res_monitor.c,
	  channels/chan_misdn.c, apps/app_zapbarge.c,
	  channels/chan_features.c, apps/app_macro.c, apps/app_voicemail.c,
	  apps/app_meetme.c, res/res_musiconhold.c, channels/chan_gtalk.c,
	  res/res_jabber.c, main/enum.c, cdr/cdr_csv.c, main/channel.c,
	  channels/chan_phone.c, apps/app_osplookup.c, main/manager.c,
	  apps/app_mp3.c, res/res_agi.c, main/logger.c, main/app.c,
	  main/dns.c, channels/chan_mgcp.c, apps/app_nbscat.c,
	  res/res_config_pgsql.c, channels/chan_zap.c, funcs/func_db.c,
	  channels/chan_sip.c, apps/app_festival.c,
	  apps/app_waitforsilence.c, res/res_adsi.c, res/res_crypto.c,
	  apps/app_queue.c, main/rtp.c, cdr/cdr_tds.c,
	  channels/chan_jingle.c, apps/app_directed_pickup.c, main/file.c,
	  pbx/pbx_dundi.c, channels/chan_nbs.c, main/dsp.c: bug #8076 check
	  option_debug before printing to debug channel. patch provided in
	  bugnote, with minor changes.

2006-10-03 15:50 +0000 [r44252]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Okay, I can't use ast_app_separate_args for
	  that... and add some debugging for murf...

2006-10-03 15:48 +0000 [r44250-44251]  Luigi Rizzo <rizzo@icir.org>

	* configure.ac: comment the fact that autoconf2.59 is ok to process
	  this file, but we want to use 2.60 in case the generated
	  "configure" file must me committed back to the repository, so we
	  keep differences to a minimum.

	* bootstrap.sh: simplify this file

2006-10-03 00:07 +0000 [r44241]  Matt O'Gorman <mogorman@digium.com>

	* include/asterisk/jabber.h, res/res_jabber.c: 44240 same as but
	  without the removing of chan_jingle and such, as I hope to finish
	  jingle support for 1.6

2006-10-02 22:02 +0000 [r44231]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Use the standard parsing routines

2006-10-02 20:58 +0000 [r44200-44218]  Joshua Colp <jcolp@digium.com>

	* configs/queues.conf.sample, doc/channelvariables.txt, CHANGES,
	  apps/app_queue.c: Expand setinterfacevar option to also set a
	  variable, MEMBERNAME, which contains the member's name. (issue
	  #8046 reported by jmls)

	* apps/app_dial.c, main/channel.c, apps/app_meetme.c,
	  res/res_features.c, apps/app_dumpchan.c, CHANGES,
	  apps/app_queue.c: Make callerid fields in Manager events more
	  consistent. CallerIDNum for number and CallerIDName for name.
	  (issue #7976 reported by suhler)

	* /, channels/chan_sip.c: Merged revisions 44215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44215 | file | 2006-10-02 16:11:02 -0400 (Mon,
	  02 Oct 2006) | 10 lines Merged revisions 44213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r44213 | file | 2006-10-02 16:07:59 -0400 (Mon, 02 Oct 2006) | 2
	  lines Change the fd on the I/O context in case it changed during
	  the reload, which is indeed possible. (issue #7943 reported by
	  eclubb) ........ ................

	* /, contrib/init.d/rc.redhat.asterisk: Merged revisions 44199 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44199 | file | 2006-10-02 15:41:39 -0400 (Mon,
	  02 Oct 2006) | 10 lines Merged revisions 44198 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r44198 | file | 2006-10-02 15:39:59 -0400 (Mon, 02 Oct 2006) | 2
	  lines We should be using $AST_SBIN instead of hardcoding the path
	  for the error message (issue #7942 reported by eclubb) ........
	  ................

2006-10-02 19:01 +0000 [r44187-44196]  Paul Cadach <paul@odt.east.telecom.kz>

	* configs/users.conf.sample, /, pbx/pbx_config.c: Merged revisions
	  44186 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44186 | pcadach | 2006-10-03 00:52:56 +0600 (Втр, 03 Окт 2006) |
	  1 line Missed part of userconf functionality for chan_h323
	  ........

	* /, doc/realtime.txt: Merged revisions 44167 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44167 | pcadach | 2006-10-02 23:16:37 +0600 (Пнд, 02 Окт 2006) |
	  1 line Typo fix ........

	* /, channels/chan_h323.c: Merged revisions 44166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44166 | pcadach | 2006-10-02 23:15:11 +0600 (Пнд, 02 Окт 2006) |
	  1 line Optimization of oh323_indicate(): less locks - less
	  problems, plus single exit point ........

2006-10-02 17:54 +0000 [r44153-44172]  Joshua Colp <jcolp@digium.com>

	* main/logger.c, CHANGES, configs/logger.conf.sample: Add option to
	  logger to rename log files with timestamp (issue #8020 reported
	  by jmls)

	* /, main/io.c: Merged revisions 44169 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44169 | file | 2006-10-02 13:25:13 -0400 (Mon,
	  02 Oct 2006) | 10 lines Merged revisions 44168 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r44168 | file | 2006-10-02 13:22:27 -0400 (Mon, 02 Oct 2006) | 2
	  lines Shrink when current_ioc is unused. It is set to -1 when
	  unused, not 0. (issue #7941 reported by eclubb) ........
	  ................

	* res/res_monitor.c: Get rid of the IS_NULL_STRING macro and use
	  ast_strlen_zero instead (issue #8070 reported by wrmem)

2006-10-02 16:00 +0000 [r44152]  Kevin P. Fleming <kpfleming@digium.com>

	* main/asterisk.c: clean up formatting and conformance to code
	  guidelines revert Mark's change that caused a memory leak
	  (cap_set_proc() does not free the capability structure so we
	  always need to call cap_free())

2006-10-02 15:40 +0000 [r44150]  Joshua Colp <jcolp@digium.com>

	* configs/queues.conf.sample, CHANGES, apps/app_queue.c: Add option
	  'keepstats' which will keep queue statistics during a reload.
	  (issue #7908 reported by jmls)

2006-10-02 04:17 +0000 [r44148]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: It makes more sense that in GosubIf that the
	  two labels might have different arguments.

2006-10-02 02:38 +0000 [r44145-44147]  Mark Spencer <markster@digium.com>

	* channels/chan_sip.c, channels/chan_iax2.c: Don't use channel when
	  you don't mean a channel

	* main/asterisk.c: Uhm yah, not sure who committed this into
	  trunk... Anyway, I think this is what was intended...

2006-10-01 19:40 +0000 [r44136]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/chan_h323.c: Merged revisions 44135 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44135 | pcadach | 2006-10-02 01:32:24 +0600 (Пнд, 02 Окт 2006) |
	  1 line Do not simulate any audio tones if we got PROGRESS message
	  ........

2006-10-01 18:30 +0000 [r44112-44126]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 44125 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44125 | russell | 2006-10-01 14:30:06 -0400 (Sun, 01 Oct 2006) |
	  6 lines Fix a problem that cuased AST_DATA_DIR in defaults.h to
	  be empty. The cause is that since ASTDATADIR is explicitly
	  exported using "export ASTDATADIR" at the top of the Makefile,
	  make no longer considers the variable "undefined", so the
	  Makefile can't use ?= to set ASTDATADIR if not yet set. (issue
	  #8063, reported by akohlsmith, fixed by me) ........

	* /, configs/queues.conf.sample: Merged revisions 44111 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r44111 | russell | 2006-10-01 11:20:12 -0400
	  (Sun, 01 Oct 2006) | 11 lines Merged revisions 44110 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r44110 | russell | 2006-10-01 11:19:23 -0400 (Sun, 01
	  Oct 2006) | 3 lines Fix the name of the "eventmemberstatus"
	  option in the sample queues.conf (issue #8065, adamg) ........
	  ................

2006-10-01 05:37 +0000 [r44100]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_zapateller.c: Janitor for Zapateller: convert to use
	  argument macros

2006-09-30 19:23 +0000 [r44091]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, main/rtp.c: Merged revisions 44090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44090 | pcadach | 2006-10-01 01:20:38 +0600 (Вск, 01 Окт 2006) |
	  1 line Allow one-way RTP streams (device->Asterisk) ........

2006-09-30 16:37 +0000 [r44081]  Luigi Rizzo <rizzo@icir.org>

	* Makefile, main/Makefile, codecs/lpc10/Makefile: merge compile
	  fixes from 44080: - with AST_DEVMODE, building codecs/lpc10 fails
	  because of lots of warnings, and the configure step in editline
	  fails as well. Fix this by removing the -Werror in these steps. -
	  on FreeBSD (but probably on other platforms as well), the final
	  link of asterisk fails because AST_LIBS was not exported to the
	  subdirs Makefiles. Add a proper fix in the top-level Makefile (a
	  possible alternative way is to add "export AST_LIBS" near the
	  beginning of the file). With this fix, i believe that some of the
	  platform-specific conditionals in main/Makefile are redundant
	  (because they should be already dealt with in the top level
	  Makefile) but i don't have a platform to check.

2006-09-30 16:15 +0000 [r44069-44079]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/chan_sip.c: Merged revisions 44078 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44078 | pcadach | 2006-09-30 22:12:23 +0600 (Сбт, 30 Сен 2006) |
	  6 lines Fix issue #7928 correctly. Next is a comment of previous
	  fix: Issue #7928 - Don't send both 404 and 503. Fix by phsultan
	  with a small fix by me, myself or I. Thanks, Philippe! (This was
	  caused by my changes to the transaction handling) ........

	* /, channels/chan_sip.c: Merged revisions 44068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44068 | pcadach | 2006-09-30 10:37:39 +0600 (Сбт, 30 Сен 2006) |
	  14 lines Found some buggy SIP clients (phones Planet VIP-153T
	  firmware 1.0, Linksys PAP2 firmware 3.1.9(LSc)) which sends ACK
	  not on OK message only (when remote party answers) but on RINGING
	  message too, so when we send 200 OK message, we get unidentified
	  ACK message (because INVITE acknowledged on RINGING message
	  already), so 200 OK retransmits within its retransmission
	  interval then call gets dropped. If someone else knows how to
	  provide workaround for such cases, please, fix it in correct way.
	  Thanks to ssh from #asteriskru for provide access to his box to
	  study and fix this case. ........

2006-09-29 22:52 +0000 [r44056-44058]  Kevin P. Fleming <kpfleming@digium.com>

	* /, agi, utils: Merged revisions 44057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44057 | kpfleming | 2006-09-29 17:51:53 -0500 (Fri, 29 Sep 2006)
	  | 2 lines ignore temporary files made by the Makefiles during a
	  build ........

	* /, codecs/gsm/Makefile, configure.ac, Makefile.moddir_rules,
	  Makefile.rules, pbx/Makefile, res/Makefile, channels/Makefile,
	  agi/Makefile, codecs/Makefile, utils/Makefile, configure,
	  build_tools/embed_modules.xml, codecs/ilbc/Makefile,
	  codecs/lpc10/Makefile, main/db1-ast/Makefile: Merged revisions
	  44055 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44055 | kpfleming | 2006-09-29 17:47:40 -0500 (Fri, 29 Sep 2006)
	  | 2 lines fix a few build system bugs, and convert Makefiles to
	  be compatible with GNU make 3.80 ........

2006-09-29 22:36 +0000 [r44054]  Jason Parker <jparker@digium.com>

	* /, main/asterisk.c, main/cli.c: Merged revisions 44053 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44053 | qwell | 2006-09-29 15:35:09 -0700 (Fri, 29 Sep 2006) | 3
	  lines Fix a bug with the removal of 'atleast' argument to 'core
	  verbose' and 'core debug'. Add that argument back in. ........

2006-09-29 21:13 +0000 [r44044]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx: Merged revisions 44034,44042-44043
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44034 | pcadach | 2006-09-30 02:43:13 +0600 (Сбт, 30 Сен 2006) |
	  1 line Fake display name by called number on incoming calls
	  (until passing connected number/connected name is not
	  implemented) ........ r44042 | pcadach | 2006-09-30 03:05:43
	  +0600 (Сбт, 30 Сен 2006) | 1 line Set TON/PRESENTATION
	  information more carefully when no CallingNumber IE available
	  ........ r44043 | pcadach | 2006-09-30 03:09:10 +0600 (Сбт, 30
	  Сен 2006) | 1 line Compile first, please ........

2006-09-29 20:16 +0000 [r44033]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: Remove locking conflict

2006-09-29 19:16 +0000 [r44024-44025]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx, channels/h323/ast_h323.h: Merged
	  revisions 44022 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44022 | pcadach | 2006-09-30 01:06:55 +0600 (Сбт, 30 Сен 2006) |
	  3 lines Properly pass TON/PRESENTATION information - original
	  H323Connection::SendSignalSetup() destroys Q.931 fields. ........

2006-09-29 18:54 +0000 [r44013]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, codecs/Makefile, utils/Makefile, /, configure,
	  include/asterisk/autoconfig.h.in, main/Makefile,
	  codecs/gsm/Makefile, configure.ac, Makefile.moddir_rules,
	  Makefile.rules, pbx/Makefile, channels/Makefile,
	  main/db1-ast/Makefile: Merged revisions
	  43996-43997,44008,44011-44012 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43996 | kpfleming | 2006-09-29 11:47:05 -0500 (Fri, 29 Sep 2006)
	  | 2 lines another cross-compile fix ........ r43997 | kpfleming |
	  2006-09-29 11:52:27 -0500 (Fri, 29 Sep 2006) | 2 lines support
	  --without-curl in configure script ........ r44008 | kpfleming |
	  2006-09-29 13:25:49 -0500 (Fri, 29 Sep 2006) | 2 lines don't
	  abuse CFLAGS and LDFLAGS for build of Asterisk components,
	  because they are also then used for non-Asterisk components (like
	  menuselect); use our own variables instead ........ r44011 |
	  kpfleming | 2006-09-29 13:40:17 -0500 (Fri, 29 Sep 2006) | 2
	  lines missed one conversion to ASTCFLAGS ........ r44012 |
	  kpfleming | 2006-09-29 13:49:07 -0500 (Fri, 29 Sep 2006) | 2
	  lines yet another place where we were not using the correct
	  CFLAGS by default ........

2006-09-29 18:35 +0000 [r44010]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx, channels/chan_h323.c,
	  channels/h323/ast_h323.h, channels/h323/chan_h323.h: Merged
	  revisions 44009 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r44009 | pcadach | 2006-09-30 00:30:34 +0600 (Сбт, 30 Сен 2006) |
	  1 line Pass TON/PRESENTATION information too ........

2006-09-29 16:38 +0000 [r43979-43994]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /: Merged revisions 43993 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43993 | kpfleming | 2006-09-29 11:38:27 -0500 (Fri, 29 Sep 2006)
	  | 2 lines a couple more environment settings that can't leak into
	  the menuselect build ........

	* /, main/cli.c: Merged revisions 43978 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43978 | kpfleming | 2006-09-29 08:45:40 -0500 (Fri, 29 Sep 2006)
	  | 2 lines proper fix for ast_group_t change ........

2006-09-29 01:36 +0000 [r43954-43961]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: One must remember to unlock their list...
	  thanks to Qwell for letting me into his box

	* main/pbx.c: Cache the application pointer so we don't have to
	  needlessly search for it over and over. This should yield a
	  suitable performance increase.

2006-09-28 22:43 +0000 [r43953]  Kevin P. Fleming <kpfleming@digium.com>

	* /, include/asterisk/lock.h: Merged revisions 43952 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43952 | kpfleming | 2006-09-28 17:42:18 -0500 (Thu, 28
	  Sep 2006) | 2 lines eliminate compiler warning when
	  DEBUG_CHANNEL_LOCKS is enabled and users of this header file
	  don't also include channel.h ........

2006-09-28 20:13 +0000 [r43945]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 43944 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43944 | qwell | 2006-09-28 13:11:22 -0700 (Thu, 28 Sep 2006) | 4
	  lines Fix incorrect argument order for member names, on persisted
	  members. Issue 8047, patch by jmls. ........

2006-09-28 18:09 +0000 [r43934]  Joshua Colp <jcolp@digium.com>

	* main/udptl.c, main/frame.c, /, channels/chan_sip.c,
	  funcs/func_timeout.c, apps/app_festival.c,
	  apps/app_alarmreceiver.c, channels/iax2-provision.c,
	  res/res_musiconhold.c, apps/app_followme.c, channels/chan_iax2.c,
	  res/res_monitor.c, apps/app_playback.c,
	  include/asterisk/logger.h, res/res_smdi.c, channels/chan_misdn.c,
	  channels/chan_skinny.c, apps/app_rpt.c, channels/chan_mgcp.c:
	  Merged revisions 43933 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43933 | file | 2006-09-28 14:05:43 -0400 (Thu, 28 Sep 2006) | 2
	  lines Put in missing \ns on the end of ast_logs (issue #7936
	  reported by wojtekka) ........

2006-09-28 17:38 +0000 [r43921]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_queue.c: Merged revisions 43919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43919 | kpfleming | 2006-09-28 12:35:42 -0500
	  (Thu, 28 Sep 2006) | 10 lines Merged revisions 43916 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43916 | kpfleming | 2006-09-28 12:31:57 -0500 (Thu, 28
	  Sep 2006) | 2 lines fix buggy (and overly complex) loop used
	  during reload of app_queue for static member list updating
	  ........ ................

2006-09-28 17:36 +0000 [r43920]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx: Merged revisions 43918 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43918 | pcadach | 2006-09-28 23:34:19 +0600 (Чтв, 28 Сен 2006) |
	  1 line Extend call establishment timeout ........

2006-09-28 17:32 +0000 [r43912-43917]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 43915 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43915 | file | 2006-09-28 13:31:09 -0400 (Thu, 28 Sep 2006) | 2
	  lines Make sure the pvt exists before accessing it again as it
	  may have gone away (issue #7562 reported by Seb7 and issue #7939
	  reported by sorg) ........

	* /, main/cli.c: Merged revisions 43913 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43913 | file | 2006-09-28 13:14:07 -0400 (Thu, 28 Sep 2006) | 2
	  lines Warning be gone! ........

	* channels/chan_sip.c: Add jitterbuffer information to sip list
	  settings (issue #7945 reported by sergee)

2006-09-28 16:54 +0000 [r43902]  BJ Weschke <bweschke@btwtech.com>

	* /, apps/app_queue.c: Merged revisions 43899 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43899 | bweschke | 2006-09-28 12:41:05 -0400
	  (Thu, 28 Sep 2006) | 11 lines Merged revisions 43897 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43897 | bweschke | 2006-09-28 12:37:15 -0400 (Thu, 28
	  Sep 2006) | 3 lines app_queue is comparing the device names
	  incorrectly while checking their statuses. It's internal list of
	  interfaces includes the dial string, while the argument passed to
	  this function does not have the dial string (/n for a local
	  channel). This causes it to ignore the device state changes
	  because it thinks it belongs to none of its members. (#8040
	  reported and patch by tim_ringenbach) ........ ................

2006-09-28 16:43 +0000 [r43900]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/cli.c: Merged revisions 43898 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43898 | kpfleming | 2006-09-28 11:38:25 -0500
	  (Thu, 28 Sep 2006) | 10 lines Merged revisions 43895 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43895 | kpfleming | 2006-09-28 11:32:44 -0500 (Thu, 28
	  Sep 2006) | 2 lines eliminate compiler warning introduced by
	  recent changes ........ ................

2006-09-28 16:19 +0000 [r43894]  Joshua Colp <jcolp@digium.com>

	* /, apps/app_meetme.c: Merged revisions 43893 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43893 | file | 2006-09-28 12:17:36 -0400 (Thu,
	  28 Sep 2006) | 10 lines Merged revisions 43891 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r43891 | file | 2006-09-28 12:13:55 -0400 (Thu, 28 Sep 2006) | 2
	  lines Stop the stream after waitstream returns so that our
	  formats get restored. (issue #7370 reported by kryptolus)
	  ........ ................

2006-09-28 16:01 +0000 [r43888]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx: Merged revisions 43877 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43877 | pcadach | 2006-09-28 21:56:21 +0600 (Чтв, 28 Сен 2006) |
	  1 line Fix compiler warning ........

2006-09-28 15:32 +0000 [r43865-43875]  BJ Weschke <bweschke@btwtech.com>

	* /, apps/app_queue.c: Merged revisions 43873 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43873 | bweschke | 2006-09-28 11:29:21 -0400
	  (Thu, 28 Sep 2006) | 11 lines Merged revisions 43871 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43871 | bweschke | 2006-09-28 11:18:05 -0400 (Thu, 28
	  Sep 2006) | 3 lines Fix race condion crash with get_member_status
	  (#7864 - tim_ringenbach reported and patched) ........
	  ................

	* /, apps/app_queue.c: Merged revisions 43864 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43864 | bweschke | 2006-09-28 09:24:10 -0400 (Thu, 28 Sep 2006)
	  | 3 lines Autopause not working for queue members. (#8042 - jmls
	  reported and patch) ........

2006-09-28 13:02 +0000 [r43863]  Paul Cadach <paul@odt.east.telecom.kz>

	* /, channels/h323/ast_h323.cxx, channels/h323/ast_h323.h,
	  include/asterisk/compiler.h: Merged revisions 43861-43862 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43861 | pcadach | 2006-09-28 18:47:23 +0600 (Чтв, 28 Сен 2006) |
	  1 line Put attribute tag at correct place ........ r43862 |
	  pcadach | 2006-09-28 18:58:22 +0600 (Чтв, 28 Сен 2006) | 1 line
	  Force remote side to start media on outgoing PROGRESS message
	  ........

2006-09-28 11:32 +0000 [r43854-43855]  Christian Richter <christian.richter@beronet.com>

	* channels/misdn/isdn_lib.h, channels/chan_misdn.c, /,
	  channels/misdn/isdn_lib.c: Merged revisions 43852 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43852 | crichter | 2006-09-28 13:03:05 +0200
	  (Do, 28 Sep 2006) | 9 lines Merged revisions 43764 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43764 | crichter | 2006-09-27 14:51:03 +0200 (Mi, 27
	  Sep 2006) | 1 line fixed a bug which led to chan_list zombies,
	  when the call could not be properly established in misdn_call.
	  also removed the ACK_HDLC stuff which is not really needed.
	  ........ ................

	* channels/chan_misdn.c, /, channels/Makefile: Merged revisions
	  43775 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43775 | crichter | 2006-09-27 18:24:51 +0200 (Mi, 27 Sep 2006) |
	  1 line removed the chan_misdn versioning, since asterisk has it's
	  own ........

2006-09-28 11:12 +0000 [r43845-43853]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/h323/cisco-h225.h, /, channels/h323/ast_h323.cxx,
	  main/file.c, channels/h323/cisco-h225.asn,
	  channels/h323/cisco-h225.cxx: Merged revisions
	  43635,43843-43844,43846 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43635 | pcadach | 2006-09-26 03:26:12 +0600 (Втр, 26 Сен 2006) |
	  1 line Fix ASN1 description of non-standard Cisco extensions
	  ........ r43843 | pcadach | 2006-09-28 12:01:37 +0600 (Чтв, 28
	  Сен 2006) | 1 line Don't treat unknown control frames as voice
	  ........ r43844 | pcadach | 2006-09-28 12:02:45 +0600 (Чтв, 28
	  Сен 2006) | 1 line Don't warn on HOLD/UNHOLD control frames
	  ........ r43846 | pcadach | 2006-09-28 16:51:21 +0600 (Чтв, 28
	  Сен 2006) | 1 line Do not open transmit channel until TCS is
	  received ........

	* channels/h323/ast_h323.cxx, channels/chan_h323.c,
	  channels/h323/ast_h323.h, CHANGES, channels/h323/chan_h323.h,
	  configs/h323.conf.sample: Handle HOLD/RETRIEVE notifications

2006-09-27 22:01 +0000 [r43827-43836]  Joshua Colp <jcolp@digium.com>

	* CHANGES: Update CHANGES to reflect libcap capability that was
	  added.

	* configure, main/Makefile, configure.ac, makeopts.in,
	  doc/security.txt, main/asterisk.c: Add ability to set high ToS
	  bits as non-root on Linux using libcap (issue #7047 reported by
	  maddison)

	* apps/app_voicemail.c: Finish up last commit

	* apps/app_voicemail.c: Do the directory walk dance instead of
	  repeated stat calls as it seems to be faster (issue #7507
	  reported by Corydon76)

2006-09-27 20:27 +0000 [r43817]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 43816 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43816 | tilghman | 2006-09-27 15:21:54 -0500
	  (Wed, 27 Sep 2006) | 10 lines Merged revisions 43815 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43815 | tilghman | 2006-09-27 15:20:35 -0500 (Wed, 27
	  Sep 2006) | 2 lines Avoid inability to lock directory log message
	  by creating the directory ahead of time. (Issue 7631) ........
	  ................

2006-09-27 20:03 +0000 [r43804-43814]  Jason Parker <jparker@digium.com>

	* main/pbx.c: Add BACKGROUNDSTATUS to Background() Issue #7835,
	  original patch by bcnit - redone by me.

	* main/pbx.c, /, apps/app_playback.c: Merged revisions 43803 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43803 | qwell | 2006-09-27 12:44:02 -0700 (Wed, 27 Sep 2006) | 4
	  lines Fix an issue with PLAYBACKSTATUS not being set under
	  certain circumstances. Fix a minor issue, to make it use the
	  filenames that were parsed, instead of the entire argument
	  string. Fix Background() to return -1 like Playback(), if no args
	  are specified. ........

2006-09-27 19:39 +0000 [r43792-43802]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: I *think* this is the last list in
	  chan_iax2

	* /, main/rtp.c: Merged revisions 43798 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43798 | file | 2006-09-27 15:10:59 -0400 (Wed, 27 Sep 2006) | 2
	  lines Compensate for out of order packets better if RFC2833
	  compensation is turned on. ........

	* /, channels/chan_iax2.c: Merged revisions 43783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43783 | file | 2006-09-27 13:00:31 -0400 (Wed, 27 Sep 2006) | 2
	  lines Get rid of two functions from a time now past (we THINK
	  these are from pre-recursive lock time) that may be contributing
	  to two open issues on the bug tracker (7562/7939) and that has
	  the potential to just make bad things happen if the timing is
	  right. ........

2006-09-27 17:00 +0000 [r43785]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Fix some little things

2006-09-27 16:57 +0000 [r43780]  Russell Bryant <russell@digium.com>

	* main/channel.c, /, res/res_features.c: Merged revisions 43779 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43779 | russell | 2006-09-27 12:55:49 -0400
	  (Wed, 27 Sep 2006) | 50 lines Merged revisions 43778 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43778 | russell | 2006-09-27 12:54:30 -0400 (Wed, 27
	  Sep 2006) | 42 lines Fix a problem that occurred if a user
	  entered a digit that matched a bridge feature that was configured
	  using multiple digits, and the digit that was pressed timed out
	  in the feature digit timeout period. For example, if blind
	  transfer is configured as '##', and a user presses just '#'. In
	  this situation, the call would lock up and no longer pass any
	  frames. (issue #7977 reported by festr, and issue #7982 reported
	  by michaels and valuable input provided by mneuhauser and kuj.
	  Fixed by me, with testing help and peer review from Joshua Colp).
	  There are a couple of issues involved in this fix: 1) When
	  ast_generic_bridge determines that there has been a timeout, it
	  returned AST_BRIDGE_RETRY. Then, when ast_channel_bridge gets
	  this result, it calls ast_generic_bridge over again with the same
	  timestamp for the next event. This results in an endless loop of
	  nothing until the call is terminated. This is resolved by simply
	  changing ast_generic_bridge to return AST_BRIDGE_COMPLETE when it
	  sees a timeout. 2) I also changed ast_channel_bridge such that if
	  in the process of calculating the time until the next event, it
	  knows a timeout has already occured, to immediately return
	  AST_BRIDGE_COMPLETE instead of attempting to bridge the channels
	  anyway. 3) In the process of testing the previous two changes, I
	  ran into a problem in res_features where ast_channel_bridge would
	  return because it determined that there was a timeout. However,
	  ast_bridge_call in res_features would then determine by its own
	  calculation that there was still 1 ms before the timeout really
	  occurs. It would then proceed, and since the bridge broke out and
	  did *not* return a frame, it interpreted this as the call was
	  over and hung up the channels. The reason for this was because
	  ast_bridge_call in res_features and ast_channel_bridge in
	  channel.c were using different times for their calculations.
	  channel.c uses the start_time on the bridge config, which is the
	  time that the feature digit was recieved. However, res_features
	  had another time, 'start', which was set right before calling
	  ast_channel_bridge. 'start' will always be slightly after
	  start_time in the bridge config, and sometimes enough to round up
	  to one ms. This is fixed by making ast_bridge_call use the same
	  time as ast_channel_bridge for the timeout calculation. ........
	  ................

2006-09-27 16:49 +0000 [r43777]  Matthew Fredrickson <creslin@digium.com>

	* channels/chan_zap.c: Add CLI block and unblock circuit commands
	  for SS7.

2006-09-27 16:25 +0000 [r43776]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Merged revisions 43774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43774 | file | 2006-09-27 12:23:12 -0400 (Wed, 27 Sep 2006) | 2
	  lines Make rfc2833compensate a global option. ........

2006-09-27 12:32 +0000 [r43763]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/chan_h323.c: Use ast_strdupa() instead of strdup(),
	  thanks to sergee

2006-09-27 04:37 +0000 [r43754-43757]  Russell Bryant <russell@digium.com>

	* apps/app_voicemail.c: remote an unused buffer in mm_login()
	  (issue #8038, selsky) In passing, I have cleaned up some
	  formatting to better comply with our guidelines. I have also
	  changed one place to use S_OR(), and a couple of places to use
	  ast_strlen_zero() as appropriate.

2006-09-27 03:45 +0000 [r43740-43747]  Steve Murphy <murf@digium.com>

	* pbx/ael/ael-test/ref.ael-ntest10, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-test3,
	  pbx/pbx_ael.c, pbx/ael/ael-test/ref.ael-test4,
	  pbx/ael/ael-test/ref.ael-test5,
	  pbx/ael/ael-test/ael-test11/extensions.ael,
	  pbx/ael/ael-test/ref.ael-test6, CHANGES,
	  pbx/ael/ael-test/ael-test3/extensions.ael,
	  pbx/ael/ael-test/ref.ael-test7,
	  pbx/ael/ael-test/ael-test5/extensions.ael,
	  pbx/ael/ael-test/ref.ael-vtest13: This commits the changes to AEL
	  to use the gosub-with-args from Tilghman to perform macro calls.
	  This results in substantially smaller stack footprint, which
	  allows macro call depths in excess of 100,000 levels, rather than
	  the limit of 7 calls deep, which the Macro app is subject to.

	* /, configs/extensions.ael.sample: Merged revisions 43739 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43739 | murf | 2006-09-26 20:32:47 -0600 (Tue, 26 Sep 2006) | 1
	  line This change to extensions.ael was to fix bug 8031; the
	  install scripts are causing it to be copied to
	  /etc/asterisk/extensions.ael, and because it is a fairly direct
	  conversion of the original extensions.conf, the macro and context
	  names clash with the existing extensions.conf. So, I put an ael-
	  in front of all macros and contexts, and checked every goto and
	  macro call. Also, this file compiles under aelparse. ........

2006-09-27 01:39 +0000 [r43733]  Joshua Colp <jcolp@digium.com>

	* channels/chan_iax2.c: Clean up code and convert last two things
	  (firmware/dialplan cache) to linked list macros.

2006-09-26 22:18 +0000 [r43721-43727]  Jason Parker <jparker@digium.com>

	* apps/app_meetme.c: Fire a manager event when a meetme is
	  started/stopped. Issue #7891, patch by suhler.

	* apps/app_queue.c: Add QueueSummary manager action. Gives "at a
	  glance" information about a single queue, or all queues. Issue
	  #8035, patch by rgollent, slightly modified (formatting) by me.

2006-09-26 21:01 +0000 [r43715]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 43710 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43710 | russell | 2006-09-26 16:56:42 -0400
	  (Tue, 26 Sep 2006) | 17 lines (This was actually BE-65) Merged
	  revisions 43708 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r43708 | russell | 2006-09-26 16:49:21 -0400 (Tue, 26 Sep 2006) |
	  7 lines Back in revision 4798, this message was changed from
	  using ast_cli() to directly calling write(). During this change,
	  checking if this was a remote console was removed. This caused
	  this message about using "exit" or "quit" to exit an Asterisk
	  console to come up in times where it did not make sense. This
	  change restores the check to see if this is a remote console
	  before printing the message. (fixes BE-4) ........
	  ................

2006-09-26 20:51 +0000 [r43709]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c, include/asterisk/channel.h, .cleancount,
	  main/cli.c: Merged revisions 43707 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43707 | file | 2006-09-26 16:47:26 -0400 (Tue,
	  26 Sep 2006) | 10 lines Merged revisions 43705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.2 ........
	  r43705 | file | 2006-09-26 16:38:06 -0400 (Tue, 26 Sep 2006) | 2
	  lines Use proper type to represent the group variable (issue
	  #8025 reported by makoto) ........ ................

2006-09-26 20:30 +0000 [r43702]  Jason Parker <jparker@digium.com>

	* CHANGES: update CHANGES file to reflect codec support in
	  chan_skinny

2006-09-26 20:26 +0000 [r43701]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 43700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43700 | russell | 2006-09-26 16:24:39 -0400
	  (Tue, 26 Sep 2006) | 14 lines Merged revisions 43699 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43699 | russell | 2006-09-26 16:23:15 -0400 (Tue, 26
	  Sep 2006) | 6 lines When parsing the sections of voicemail.conf
	  that contain mailbox definitions, don't introduce a length limit
	  on the definition by using a 256 byte temporary storage buffer.
	  Instead, make the temporary buffer just as big as it needs to be
	  to hold the entire mailbox definition. (fixes BE-68) ........
	  ................

2006-09-26 20:20 +0000 [r43696-43698]  Joshua Colp <jcolp@digium.com>

	* channels/chan_local.c, /: Merged revisions 43697 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43697 | file | 2006-09-26 16:19:33 -0400 (Tue, 26 Sep
	  2006) | 2 lines Strip options off the argument passed for
	  devicestate in chan_local. (issue #8034 reported by pcardozo)
	  ........

	* main/channel.c, /, main/slinfactory.c, apps/app_chanspy.c: Merged
	  revisions 43695 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43695 | file | 2006-09-26 16:09:41 -0400 (Tue, 26 Sep 2006) | 2
	  lines Slight overhaul of the whisper support. 1. We need to
	  duplicate the frame from ast_translate 2. We need to ensure we
	  always have signed linear coming in for signed linear combining.
	  3. We need to ensure we are always feeding signed linear out. 4.
	  Properly store and restore write format when beeping on the
	  channel we are whispering on. 5. Properly discontinue the stream
	  on the channel for the beep. (issue #8019 reported by
	  timkelly1980) ........

2006-09-26 19:37 +0000 [r43677-43687]  Kevin P. Fleming <kpfleming@digium.com>

	* CHANGES: start a CHANGES file for trunk... no need to force
	  people to have to review commit logs after branching

	* /, sounds/Makefile: Merged revisions 43676 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43676 | kpfleming | 2006-09-26 13:34:27 -0500 (Tue, 26 Sep 2006)
	  | 2 lines update to use 1.4.3 core sounds, with corrected
	  beep/beeperr/tt-monkeys files ........

2006-09-26 18:10 +0000 [r43675]  Jason Parker <jparker@digium.com>

	* main/frame.c, /, doc/rtp-packetization.txt: Merged revisions
	  43674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43674 | qwell | 2006-09-26 11:08:51 -0700 (Tue, 26 Sep 2006) | 4
	  lines Issue #8015, patch by Dan Austin. Maximum values were
	  incorrect, which is why this is being put in 1.4 ........

2006-09-26 17:25 +0000 [r43667]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_stack.c: Gosub arguments (Issue 7780)

2006-09-26 17:09 +0000 [r43666]  Jason Parker <jparker@digium.com>

	* main/logger.c, configs/logger.conf.sample: Add optional
	  queue_log_name config option for logger.conf, to change the name
	  of the queue_log file. Issue #7363, patch by Steve Davies,
	  slightly modified by me.

2006-09-26 16:56 +0000 [r43658-43659]  Tilghman Lesher <tlesher@digium.com>

	* apps/app_voicemail.c: MailboxExists should be a dialplan
	  function, not an application (Issue 7503)

	* res/res_limit.c: These three are not defined on all platforms
	  that we support

2006-09-26 15:35 +0000 [r43651]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 43650 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43650 | qwell | 2006-09-26 08:33:47 -0700 (Tue, 26 Sep
	  2006) | 11 lines Add proper codec support to chan_skinny. Works
	  with at least ulaw, alaw, and g729a. This is technically a "new
	  feature", but there are justifications for it. I found a bug with
	  the recent rtp packetization changes, which caused the media
	  setup to fail under certain circumstances, particularly when
	  using allow=all, or having no allow= statements (globally or on
	  the device). I could have either removed the rtp packetization
	  features, or I could add proper codec support (which, without, I
	  think most people would consider to be a bug anyways). ........

2006-09-25 22:09 +0000 [r43641-43643]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 43642 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43642 | tilghman | 2006-09-25 17:07:44 -0500 (Mon, 25 Sep 2006)
	  | 2 lines Should have moved these lines up in the merge, instead
	  of removing them ........

	* /, apps/app_voicemail.c: Merged revisions 43640 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43640 | tilghman | 2006-09-25 17:04:47 -0500
	  (Mon, 25 Sep 2006) | 12 lines Merged revisions 43634 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43634 | tilghman | 2006-09-25 16:14:41 -0500 (Mon, 25
	  Sep 2006) | 4 lines Two bugs when forwarding voicemail (Issue
	  7824): 1) delete=yes was ignored 2) maxmessages was ignored
	  ........ ................

2006-09-25 20:30 +0000 [r43627]  Paul Cadach <paul@odt.east.telecom.kz>

	* /: Block revision 43626 from 1.4 tree - already here

2006-09-25 15:24 +0000 [r43617]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 43616 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43616 | qwell | 2006-09-25 08:23:31 -0700 (Mon, 25 Sep 2006) | 4
	  lines One more fix for sounds installation - this time for
	  portability. Reported to asterisk-dev mailing list. ........

2006-09-25 14:49 +0000 [r43604]  Steve Murphy <murf@digium.com>

	* formats/format_ogg_vorbis.c: This tiny fix prevents asterisk from
	  crashing if trying to play an OGG moh file.

2006-09-25 09:03 +0000 [r43571-43597]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/h323/caps_h323.cxx, channels/h323/ast_h323.cxx,
	  channels/chan_h323.c, channels/h323/ast_h323.h,
	  channels/h323/chan_h323.h, configs/h323.conf.sample: Support for
	  negotiation and receiption of Cisco's RTP DTMF

	* channels/h323/ast_h323.cxx: Disable fastStart if requested by
	  remote side

	* /: Block revision 43582

	* channels/chan_h323.c, configs/h323.conf.sample: Specify RFC2833
	  payload on dtmfmode option rather than dtmfcodec option
	  (deprecated)

	* channels/h323/ast_h323.cxx, channels/chan_h323.c: DTMF mode is
	  bitmask, not valued field

	* channels/h323/caps_h323.cxx, channels/h323/caps_h323.h: Define
	  Cisco RTP capability

	* channels/h323/caps_h323.cxx: Specify non-standard data
	  independedly on OpenH323's codec name (it can be easily changed)

	* channels/chan_h323.c, channels/h323/chan_h323.h: Define DTMF
	  payload types

2006-09-24 15:01 +0000 [r43554-43565]  Russell Bryant <russell@digium.com>

	* /, channels/iax2-provision.c: Merged revisions 43564 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43564 | russell | 2006-09-24 10:58:10 -0400 (Sun, 24
	  Sep 2006) | 5 lines Fix a CLI command registration issue where an
	  erroneous message claiming that "iax2 show provisioning" was
	  already registered. This was because this command was registering
	  itself as both the command, as well as the command it is
	  deprecating. (issue #8022, reported by bjweeks, fixed by myself)
	  ........

	* /, channels/chan_iax2.c: Merged revisions 43553 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43553 | russell | 2006-09-24 09:53:35 -0400
	  (Sun, 24 Sep 2006) | 12 lines Merged revisions 43552 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43552 | russell | 2006-09-24 09:50:30 -0400 (Sun, 24
	  Sep 2006) | 4 lines Check to see if the channel that is
	  activating the IAXPEER function is actually an IAX2 channel
	  before proceeding to process it to avoid crashing. (issue #8017,
	  reported by admott, fixed by myself) ........ ................

2006-09-24 12:15 +0000 [r43539-43546]  Paul Cadach <paul@odt.east.telecom.kz>

	* main/rtp.c: Small Cisco's RTP DTMF update

	* channels/chan_h323.c: Avoid possible deadlock on channel
	  destruction

	* main/rtp.c: Correct behavior on Cisco's DTMF

2006-09-22 23:46 +0000 [r43525-43526]  Kevin P. Fleming <kpfleming@digium.com>

	* /: file forgot one :-)

	* Makefile, /: Merged revisions 43524 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43524 | kpfleming | 2006-09-22 18:44:47 -0500 (Fri, 22 Sep 2006)
	  | 2 lines don't output the 'build complete' message when the
	  target being run is already going to do an installation ........

2006-09-22 23:34 +0000 [r43522]  Joshua Colp <jcolp@digium.com>

	* /: You see nothing...

2006-09-22 22:13 +0000 [r43519]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 43518 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43518 | qwell | 2006-09-22 15:12:12 -0700 (Fri, 22 Sep
	  2006) | 4 lines Allow chan_skinny.so to be unloaded properly.
	  Remove reload support, since it doesn't actually...work. ........

2006-09-22 21:34 +0000 [r43506-43507]  Steve Murphy <murf@digium.com>

	* pbx/pbx_ael.c: This commits a change to return
	  MODULE_LOAD_FAILURE on error, and SUCCESS (instead of 0) when all
	  goes well for bug 8004

	* pbx/pbx_ael.c: As per bug 8004, we now return
	  AST_MODULE_LOAD_DECLINE when we can't read extensions.ael

2006-09-22 20:33 +0000 [r43495-43500]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/chan_h323.c: Move from h.323 to h323 command prefix

	* channels/chan_h323.c: Fix compilation warnings

	* channels/h323/compat_h323.h: Use own factory for our
	  OpalMediaFormats too

	* channels/h323/caps_h323.cxx, channels/h323/compat_h323.h: Fix our
	  capability's factory

2006-09-22 17:26 +0000 [r43493]  Jason Parker <jparker@digium.com>

	* /, main/cli.c: Merged revisions 43492 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43492 | qwell | 2006-09-22 10:25:05 -0700 (Fri, 22 Sep 2006) | 2
	  lines Make sure we explicitly set the CLI command to not be
	  deprecated, if it isn't. ........

2006-09-22 16:43 +0000 [r43488-43490]  Kevin P. Fleming <kpfleming@digium.com>

	* /, sounds/Makefile: Merged revisions 43489 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43489 | kpfleming | 2006-09-22 11:42:46 -0500 (Fri, 22 Sep 2006)
	  | 2 lines use rebuilt extra sounds ........

	* main/channel.c, /: Merged revisions 43486 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43486 | kpfleming | 2006-09-22 10:51:13 -0500 (Fri, 22 Sep 2006)
	  | 2 lines all the Linux systems I have don't use '__m_count' for
	  this field, so I don't know where this came from... ........

2006-09-22 15:50 +0000 [r43483-43485]  Russell Bryant <russell@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 43482 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43482 | russell | 2006-09-22 11:42:44 -0400 (Fri, 22
	  Sep 2006) | 3 lines return AST_MODULE_LOAD_DECLIDE if mISDN could
	  not be configured (issue #8006, Mithraen) ........

2006-09-22 14:58 +0000 [r43479-43480]  Luigi Rizzo <rizzo@icir.org>

	* include/asterisk/threadstorage.h: compatibility fix: use
	  "attribute_XXX" instead of *__attribute__ ((XXX)) so we can
	  handle compiler/os dependencies in our compiler.h

	* channels/chan_sip.c: style fix: move variable declaration at the
	  beginning of the block.

2006-09-22 14:04 +0000 [r43478]  Russell Bryant <russell@digium.com>

	* main/frame.c, /: Merged revisions 43477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43477 | russell | 2006-09-22 10:02:58 -0400 (Fri, 22 Sep 2006) |
	  3 lines Suppress a compiler warning about the use of a
	  potentially uninitialized variable. It couldn't actually happen,
	  though. ........

2006-09-22 04:54 +0000 [r43472]  Paul Cadach <paul@odt.east.telecom.kz>

	* channels/h323/caps_h323.cxx: Add missing include

2006-09-22 03:09 +0000 [r43470]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 43469 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43469 | qwell | 2006-09-21 20:01:16 -0700 (Thu, 21 Sep
	  2006) | 4 lines First shot at unload_module in chan_skinny.. More
	  to come. ........

2006-09-21 23:55 +0000 [r43467]  Matt O'Gorman <mogorman@digium.com>

	* /, include/asterisk/jabber.h, channels/chan_gtalk.c,
	  res/res_jabber.c: Merged revisions 43466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43466 | mogorman | 2006-09-21 18:50:56 -0500 (Thu, 21 Sep 2006)
	  | 2 lines updates for better compontent support ........

2006-09-21 23:29 +0000 [r43463-43465]  Tilghman Lesher <tlesher@digium.com>

	* /, res/res_odbc.c, configs/res_odbc.conf.sample: Merged revisions
	  43464 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43464 | tilghman | 2006-09-21 18:24:41 -0500 (Thu, 21 Sep 2006)
	  | 2 lines Twould help if we actually documented how the new
	  features in res_odbc actually work. (Oops) ........

	* res/res_limit.c (added): Set process limits without restarting
	  Asterisk

2006-09-21 22:53 +0000 [r43461]  Joshua Colp <jcolp@digium.com>

	* channels/chan_sip.c, channels/chan_iax2.c: Oh look more changes,
	  but these are my own! (Clean up module load functions)

2006-09-21 22:44 +0000 [r43460]  Jason Parker <jparker@digium.com>

	* channels/chan_zap.c: Suppress compiler warnings

2006-09-21 22:32 +0000 [r43459]  Joshua Colp <jcolp@digium.com>

	* channels/chan_alsa.c: Clean up chan_alsa load module function
	  (issue #8000 reported by Mithraen)

2006-09-21 22:23 +0000 [r43458]  Tilghman Lesher <tlesher@digium.com>

	* include/asterisk/acl.h, doc/ip-tos.txt, channels/chan_sip.c,
	  doc/mp3.txt, doc/ael.txt, doc/channelvariables.txt, main/acl.c:
	  And some deprecated APIs and modifications to documentation

2006-09-21 22:23 +0000 [r43455-43457]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_oss.c: Merged revisions 43456 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43456 | file | 2006-09-21 18:21:40 -0400 (Thu, 21 Sep 2006) | 2
	  lines Some more clean up in the load function for chan_oss (issue
	  #8002 reported by Mithraen with minor mods by moi) ........

	* /, channels/chan_mgcp.c: Merged revisions 43454 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43454 | file | 2006-09-21 18:12:09 -0400 (Thu, 21 Sep 2006) | 2
	  lines Clean up chan_mgcp's module load function (issue #8001
	  reported by Mithraen with mods by moi) ........

2006-09-21 21:59 +0000 [r43452]  Tilghman Lesher <tlesher@digium.com>

	* doc/ip-tos.txt, channels/chan_local.c, channels/chan_sip.c,
	  res/res_features.c, channels/chan_agent.c, res/res_convert.c,
	  res/res_crypto.c, res/res_musiconhold.c, channels/chan_iax2.c,
	  channels/chan_oss.c, channels/chan_skinny.c,
	  channels/chan_features.c, res/res_agi.c, channels/chan_h323.c,
	  channels/chan_alsa.c, apps/app_settransfercapability.c (removed),
	  res/res_indications.c, pbx/pbx_config.c, res/res_odbc.c,
	  channels/chan_mgcp.c: Lots more removal of deprecated things

2006-09-21 21:22 +0000 [r43451]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/Makefile, build_tools/strip_nonapi (added): Merged
	  revisions 43450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43450 | kpfleming | 2006-09-21 16:21:29 -0500 (Thu, 21 Sep 2006)
	  | 2 lines add another attempt to strip non-API symbols from the
	  final binary... script will need to be extended to work on
	  non-Linux systems ........

2006-09-21 21:17 +0000 [r43442-43449]  Tilghman Lesher <tlesher@digium.com>

	* main/udptl.c, main/pbx.c, main/frame.c, main/translate.c,
	  apps/app_queue.c, main/config.c, main/rtp.c,
	  apps/app_setcdruserfield.c (removed), main/cli.c, main/channel.c,
	  main/manager.c, main/file.c, main/http.c, main/logger.c,
	  main/astmm.c, main/image.c, main/asterisk.c: Remove deprecated
	  CLI apps from the core

	* /, apps/app_url.c: Merged revisions 43445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43445 | tilghman | 2006-09-21 15:22:43 -0500 (Thu, 21 Sep 2006)
	  | 2 lines Fix documentation to reflect how Url() really works
	  ........

	* apps/app_setcallerid.c, apps/app_voicemail.c: More removal of
	  deprecated stuff

	* main/pbx.c, main/manager.c, UPGRADE.txt: Remove 1.4 changes from
	  UPGRADE.txt, remove deprecated callerid field, remove deprecated
	  SetGlobalVar app

	* /, apps/app_rpt.c: Merged revisions 43441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43441 | tilghman | 2006-09-21 14:43:32 -0500 (Thu, 21 Sep 2006)
	  | 2 lines Oops, missed the merge breakage ........

2006-09-21 19:42 +0000 [r43440]  Kevin P. Fleming <kpfleming@digium.com>

	* makeopts.in: fix this so chan_zap links properly again

2006-09-21 19:35 +0000 [r43439]  Tilghman Lesher <tlesher@digium.com>

	* funcs/func_language.c (removed), funcs/func_moh.c (removed),
	  apps/app_lookupcidname.c (removed), funcs/func_md5.c,
	  apps/app_hasnewvoicemail.c (removed), funcs/func_blacklist.c
	  (added), apps/app_random.c (removed), funcs/func_vmcount.c
	  (added), res/res_realtime.c (added), apps/app_lookupblacklist.c
	  (removed), apps/app_realtime.c (removed), apps/app_queue.c:
	  Remove deprecated apps and funcs

2006-09-21 19:27 +0000 [r43437]  Joshua Colp <jcolp@digium.com>

	* apps/app_dial.c, main/channel.c, /, channels/chan_sip.c,
	  include/asterisk/rtp.h, include/asterisk/channel.h, main/rtp.c:
	  SS7 marked the start of an open season for trunk again but here's
	  something minor - abstract early bridging into the technology so
	  that we don't always assume they use RTP and try it.

2006-09-21 19:22 +0000 [r43436]  Kevin P. Fleming <kpfleming@digium.com>

	* configure: regenerated at PCadach's request

2006-09-21 19:18 +0000 [r43429-43434]  Paul Cadach <paul@odt.east.telecom.kz>

	* acinclude.m4: Check for 64-bit OpenH323/PWLib versions too,
	  thanks to Mithraen (please, re-build configure script)

	* channels/h323/caps_h323.cxx: Declare our own media formats to not
	  rely on OpenH323 configuration

	* channels/h323/caps_h323.cxx, channels/h323/ast_h323.cxx,
	  channels/chan_h323.c, channels/h323/caps_h323.h: Introduce Cisco
	  G.726-32 capability (g726aal2 form)

2006-09-21 18:42 +0000 [r43427-43428]  Matthew Fredrickson <creslin@digium.com>

	* configure: Update configure

	* channels/chan_zap.c, build_tools/menuselect-deps.in,
	  include/asterisk/autoconfig.h.in, configure.ac, makeopts.in,
	  configs/zapata.conf.sample: Merge in SS7 changes.... need to
	  still cleanup zapata.conf

2006-09-21 17:06 +0000 [r43411-43423]  Tilghman Lesher <tlesher@digium.com>

	* /, apps/app_rpt.c: Merged revisions 43422 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43422 | tilghman | 2006-09-21 12:04:40 -0500
	  (Thu, 21 Sep 2006) | 10 lines Merged revisions 43420 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43420 | tilghman | 2006-09-21 12:01:48 -0500 (Thu, 21
	  Sep 2006) | 2 lines Whitespace change... really just an excuse to
	  test repotools ........ ................

	* /: Last merge should not have brought in the 1.2 props

	* /, configure, configure.ac, cdr/cdr_tds.c: Merged revisions 43410
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ................ r43410 | tilghman | 2006-09-21 11:31:59 -0500
	  (Thu, 21 Sep 2006) | 10 lines Merged revisions 43409 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.2
	  ........ r43409 | tilghman | 2006-09-21 11:18:19 -0500 (Thu, 21
	  Sep 2006) | 2 lines TDS 0.64 updates ........ ................

2006-09-21 16:09 +0000 [r43403-43406]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/Makefile: Merged revisions 43405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r43405 | kpfleming | 2006-09-21 11:08:03 -0500 (Thu, 21 Sep 2006)
	  | 2 lines remove this change... it requires binutils 2.17
	  ........

	* /: remove extraneous property

2006-09-20 23:20 +0000 [r43397]  Jason Parker <jparker@digium.com>

	* /, build_tools/make_version: Merged revisions 43396 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r43396 | qwell | 2006-09-20 16:19:25 -0700 (Wed, 20 Sep
	  2006) | 2 lines fix minor typo in the way version is handled
	  ........

2006-09-20 23:02 +0000 [r43393]  Kevin P. Fleming <kpfleming@digium.com>

	* /: this has been manually merged

2006-09-20  Kevin P. Fleming  <kpfleming@digium.com>

	* Asterisk 1.4.0-beta1 released.


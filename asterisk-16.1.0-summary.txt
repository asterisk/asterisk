                                Release Summary

                                asterisk-16.1.0

                                Date: 2018-12-11

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Open Issues
    5. Other Changes
    6. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-16.0.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                          Testers           Reporters                
   59 Corey Farrell                3 Emmanuel BUU    7 Joshua C. Colp         
   38 George Joseph                1 Cao Minh Hiep   6 Alexei Gradinari       
   38 Richard Mudgett                                6 Torrey Searle          
   19 Joshua Colp                                    4 Emmanuel BUU           
   17 Sean Bright                                    4 Alexander Traud        
   9 Alexei Gradinari                                3 Sergej Kasumovic       
   5 Kevin Harwell                                   3 Emmanuel BUU           
   5 Alexander Traud                                 3 Corey Farrell          
   4 Torrey Searle                                   3 lvl                    
   4 Emmanuel BUU                                    2 Sean Bright            
   3 Chris-Savinovich                                2 George Joseph          
   3 Florian Floimair                                1 Jan Hoffmann           
   3 lvl                                             1 Jan Hoffmann           
   2 Rodrigo RamÃrez Norambuena                      1 Cameron                
   2 Pascal Cadotte Michaud                          1 Walter Doekes          
   2 Jaco Kroon                                      1 David Hajek            
   2 Ben Ford                                        1 Samuel Owens           
   1 Michael Walton (license 6502)                   1 Scott Griepentrog      
   1 Jan Hoffmann (license 6986)                     1 seanchann.zhou         
   1 Matthew Fredrickson                             1 Will                   
   1 David Hajek                                     1 sungtae kim            
   1 Frederic LE FOLL                                1 pasandev               
   1 Joshua C. Colp                                  1 Benjamin Keith Ford    
   1 Walter Doekes                                   1 Siruja Maharjan        
   1 Salah Ahmed                                     1 Eric Dantie            
   1 Ivan Poddubny                                   1 Samuel Galarneau       
   1 Sungtae Kim                                     1 Eyal Hasson            
   1 Robert Cripps                                   1 rleasure               
   1 Moritz Fain                                     1 Cao Minh Hiep          
   1 Cao Minh Hiep                                   1 Pascal Cadotte Michaud 
   1 Kirsty Tyerman                                  1 David Hajek            
   1 Jasper Hafkenscheid                             1 Ronald Raikes          
   1 Peter Katzmann                                  1 Valentin Safonov       
                                                     1 Samuel Galarneau       
                                                     1 Adam Secombe           
                                                     1 Robert Cripps          
                                                     1 Luit van Drongelen     
                                                     1 Jaco Kroon             
                                                     1 Michael Walton         
                                                     1 Adam Secombe           
                                                     1 Florian Floimair       
                                                     1 Joshua Elson           
                                                     1 Luit van Drongelen     
                                                     1 Salah Ahmed            
                                                     1 Jonathan Harris        
                                                     1 Valentin Safonov       
                                                     1 Ronald Raikes          
                                                     1 Majdi Bsoul            
                                                     1 Frederic LE FOLL       
                                                     1 Ian Gilmour            
                                                     1 Cao Minh Hiep          
                                                     1 Andrej                 
                                                     1 Bob Atkins             
                                                     1 Lei Fu                 
                                                     1 Hajek Michal           
                                                     1 Peter Katzmann         

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Security

    Category: Core/DNS

   ASTERISK-28127: Buffer overflow for DNS SRV/NAPTR records
   Reported by: Jan Hoffmann
     * [009d67cd28] Jan Hoffmann -- AST-2018-010: Fix length of buffer needed
       for SRV and NAPTR results

    Category: Resources/res_http_websocket

   ASTERISK-28013: res_http_websocket: Crash when reading HTTP Upgrade
   requests
   Reported by: Sean Bright
     * [339bf0cf7b] Sean Bright -- AST-2018-009: Fix crash processing
       websocket HTTP Upgrade requests

  New Feature

    Category: Resources/res_pjsip_session

   ASTERISK-28087: add flag to allow CALLERID(num) to be placed in Contact
   header in chan_pjsip
   Reported by: Torrey Searle
     * [9c5e75acb0] Joshua Colp -- res_pjsip: Add XML documentation for
       "use_callerid_contact"
     * [719daf3299] Richard Mudgett -- alembic: Fix use_callerid_contact
       option add script.
     * [3ba66b8a9d] Torrey Searle -- res_pjsip_session: add new flag
       use_callerid_contact

  Bug

    Category: Applications/app_confbridge

   ASTERISK-28107: app_confbridge: Participant info labels aren't being added
   to the SDPs
   Reported by: George Joseph
     * [fec66b8f01] George Joseph -- bridge_softmix: Add SDP "label"
       attribute to streams

    Category: Applications/app_dial

   ASTERISK-27980: Caller ID cannot be changed on Attended Transfer before
   dialing out
   Reported by: Alexei Gradinari
     * [190b3d7412] Alexei Gradinari -- app_dial/queue/followme: 'I' options
       to block initial updates in both directions

    Category: Applications/app_followme

   ASTERISK-27980: Caller ID cannot be changed on Attended Transfer before
   dialing out
   Reported by: Alexei Gradinari
     * [190b3d7412] Alexei Gradinari -- app_dial/queue/followme: 'I' options
       to block initial updates in both directions

    Category: Applications/app_queue

   ASTERISK-28125: app_queue: Revert broken queue channel reference patch
   Reported by: lvl
     * [aa004295f9] lvl -- app_queue: Revert broken queue channel reference
       patch
   ASTERISK-27980: Caller ID cannot be changed on Attended Transfer before
   dialing out
   Reported by: Alexei Gradinari
     * [190b3d7412] Alexei Gradinari -- app_dial/queue/followme: 'I' options
       to block initial updates in both directions
   ASTERISK-27920: app_queue: Queue member considered inuse after immediately
   hanging up during dialing.
   Reported by: Cao Minh Hiep
     * [958727cece] Cao Minh Hiep -- app_queue: Fix Attended transfer hangup
       with removing pending member.
   ASTERISK-28032: Realtime queuemembers are not updated during retry phase
   Reported by: lvl
     * [034a3d8b86] lvl -- app_queue: Update realtime queuemembers after
       wait_a_bit(), not before
   ASTERISK-27973: app_queue: QUEUESTATUS = CONTINUE instead LEAVEEMPTY
   Reported by: Valentin Safonov
     * [fce68efbbe] Ivan Poddubny -- app_queue: set QUEUESTATUS to LEAVEEMPTY
       instead of CONTINUE

    Category: Applications/app_voicemail

   ASTERISK-28151: app_voicemail: MWI fails with mailboxes=##@device instead
   of mailboxes=##@default
   Reported by: Ronald Raikes
     * [a2a8a41db3] George Joseph -- Revert "app_voicemail: Remove need to
       subscribe to stasis"

    Category: CEL/General

   ASTERISK-28081: chan_sip: Asterisk 12+ chan_sip doesn't report
   AST_CEL_PICKUP in handle_invite_replaces
   Reported by: Luit van Drongelen
     * [7f6ac5dc2f] Jasper Hafkenscheid -- chan_sip: Attempt ast_do_pickup in
       handle_invite_replaces

    Category: Channels/chan_pjsip

   ASTERISK-27999: Wrong SRTP use status report
   Reported by: Salah Ahmed
     * [523b7b2ffc] Salah Ahmed -- dialplan_functions: wrong srtp use status
       report of a dialplan function

    Category: Channels/chan_sip/General

   ASTERISK-28081: chan_sip: Asterisk 12+ chan_sip doesn't report
   AST_CEL_PICKUP in handle_invite_replaces
   Reported by: Luit van Drongelen
     * [7f6ac5dc2f] Jasper Hafkenscheid -- chan_sip: Attempt ast_do_pickup in
       handle_invite_replaces

    Category: Channels/chan_sip/Messaging

   ASTERISK-28057: chan_sip: SipNotify via AMI behaves differently to CLI
   Reported by: Peter Katzmann
     * [681e115ff1] Peter Katzmann -- chan_sip: SipNotify on Chan_Sip vi AMI
       behave different to CLI

    Category: Channels/chan_sip/TCP-TLS

   ASTERISK-28057: chan_sip: SipNotify via AMI behaves differently to CLI
   Reported by: Peter Katzmann
     * [681e115ff1] Peter Katzmann -- chan_sip: SipNotify on Chan_Sip vi AMI
       behave different to CLI
   ASTERISK-28034: chan_sip unstable with TLS after asterisk start or reloads
   Reported by: David Hajek
     * [8811ab1803] David Hajek -- chan_sip.c: chan_sip unstable with TLS
       after asterisk start or reloads
   ASTERISK-27881: PBX calls via chan_sip TCP trunk now get authentification
   error
   Reported by: Ian Gilmour
     * [46442aa9e5] Jaco Kroon -- chan_sip: improved ip:port finding of peers
       for non-UDP transports.

    Category: Contrib/General

   ASTERISK-27968: systemd: asterisk.service
   Reported by: seanchann.zhou
     * [c40412bd13] Corey Farrell -- contrib: Update systemd README.txt.

    Category: Core/Bridging

   ASTERISK-28076: bridging: Asterisk crashes when receiving an empty
   realtime text frame
   Reported by: Emmanuel BUU
     * [406c5bef0a] Emmanuel BUU -- core/frame: Fix ast_frdup() and
       ast_frisolate() for empty text frames

    Category: Core/BuildSystem

   ASTERISK-27991: BuildSystem: Enable Jansson in Solaris 11.
   Reported by: Alexander Traud
     * [c10b3ccd5f] Alexander Traud -- BuildSystem: Enable Jansson in Solaris
       11.

    Category: Core/Channels

   ASTERISK-28089: function ast_sendtext() create RTP realtime packets with a
   trailing null byte in the payload
   Reported by: Emmanuel BUU
     * [e0496fe062] Emmanuel BUU -- core/frame: generate correct T.140
       payload in ast_sendtext_data()

    Category: Core/Configuration

   ASTERISK-28158: Some conditions prevent running of el_end, break the
   terminal.
   Reported by: Corey Farrell
     * [a36cd6960c] Corey Farrell -- core: Fix handling of restart from
       remote console.
     * [3cde7e30ba] Corey Farrell -- core: Ensure that el_end is always run
       when needed.

    Category: Core/General

   ASTERISK-28158: Some conditions prevent running of el_end, break the
   terminal.
   Reported by: Corey Farrell
     * [a36cd6960c] Corey Farrell -- core: Fix handling of restart from
       remote console.
     * [3cde7e30ba] Corey Farrell -- core: Ensure that el_end is always run
       when needed.
   ASTERISK-28005: channel.c: ARI ring only once
   Reported by: Hajek Michal
     * [af6a3d02e1] Joshua Colp -- core: Don't stop generators when writing
       RTCP frames.
   ASTERISK-12382: menuselect compilation failure on Solaris 10 / gcc 3.4.3
   Reported by: rleasure
     * [93d1c34efe] Alexander Traud -- BuildSystem: Enable ncurses for
       menuselect in Solaris 11.
   ASTERISK-9107: menuselect compilation failure on Solaris 10/gcc-4.1.1
   Reported by: Bob Atkins
     * [93d1c34efe] Alexander Traud -- BuildSystem: Enable ncurses for
       menuselect in Solaris 11.

    Category: Core/ManagerInterface

   ASTERISK-28084: app_queue: QueueMemberStatus Event flooding AMI
   Reported by: Andrej
     * [a2554d5e5a] Richard Mudgett -- app_queue.c: Fix json ref leak
   ASTERISK-28033: AMI event "NewExten" is set to the wrong class
   Reported by: lvl
     * [f4bffe2326] lvl -- manager: Set AMI event "Newexten" to the
       EVENT_FLAG_DIALPLAN class

    Category: Core/PBX

   ASTERISK-28140: repeated segmentation faults
   Reported by: Eyal Hasson
     * [41eab5b3b8] George Joseph -- backtrace: Refactor ast_bt_get_symbols
       so it doesn't crash

    Category: Core/Portability

   ASTERISK-15331: make menuselect fails due to undefined symbols (initscr32,
   w32addch) in menuselect_curses.o
   Reported by: Majdi Bsoul
     * [93d1c34efe] Alexander Traud -- BuildSystem: Enable ncurses for
       menuselect in Solaris 11.
   ASTERISK-14935: [regression] menuselect compilation failure on Solaris 10
   Reported by: Samuel Owens
     * [93d1c34efe] Alexander Traud -- BuildSystem: Enable ncurses for
       menuselect in Solaris 11.

    Category: Core/RTP

   ASTERISK-27854: rtp: Crash in off-nominal case where RTP instance can't be
   set up
   Reported by: Lei Fu
     * [7a7b21f3a0] Corey Farrell -- res_rtp_asterisk: Fix crash on
       ast_rtp_new failure.

    Category: Core/Stasis

   ASTERISK-28103: stasis: Filter messages at publishing to reduce work done
   Reported by: Joshua C. Colp
     * [8d436a95e7] Joshua Colp -- stasis: Add internal filtering of
       messages.
   ASTERISK-28084: app_queue: QueueMemberStatus Event flooding AMI
   Reported by: Andrej
     * [a2554d5e5a] Richard Mudgett -- app_queue.c: Fix json ref leak
   ASTERISK-27591: Frack errors in stasis.c and memory leakage
   Reported by: Siruja Maharjan
     * [e5c0ac6a64] Joshua Colp -- devicestate: Don't create topic when
       change isn't cached.

    Category: Documentation

   ASTERISK-28150: Formatting error in documentation
   Reported by: Scott Griepentrog
     * [03efafbd4d] Kevin Harwell -- res_pjsip: formatting error in
       documentation

    Category: Functions/func_strings

   ASTERISK-28159: SIGABRT caused by stack corruption in hashkeys_read when
   no matching keys present
   Reported by: Michael Walton
     * [72e532136c] Michael Walton -- func_strings: HASHKEY - negative array
       index can cause corruption

    Category: PBX/pbx_config

   ASTERISK-28146: pbx_config: Only the first [globals] section is processed.
   Reported by: Corey Farrell
     * [07a59b783e] Corey Farrell -- pbx_config: Only the first [globals]
       section is seen.

    Category: Resources/General

   ASTERISK-28045: configure script does not enforce libunbound2 version
   Reported by: Samuel Galarneau
     * [cc8e0dfabd] George Joseph -- configure.ac: Check for unbound version
       >= 1.5

    Category: Resources/res_ari_channels

   ASTERISK-28169: ARI /channels/create handler causes core dump
   Reported by: sungtae kim
     * [cb83350230] Sungtae Kim -- res/res_ari: Fix null endpoint handle

    Category: Resources/res_musiconhold

   ASTERISK-28029: [patch] res_musiconhold : music on hold will not start if
   previous hold just reached end of file
   Reported by: Frederic LE FOLL
     * [ccfd2e0f5d] Frederic LE FOLL -- res_musiconhold.c: Restart MOH if
       previous hold just reached end-of-file

    Category: Resources/res_odbc

   ASTERISK-28065: res_odbc: missing SQL error diagnostic
   Reported by: Alexei Gradinari
     * [e04c49b517] Alexei Gradinari -- res_odbc: fix missing SQL error
       diagnostic

    Category: Resources/res_pjsip

   ASTERISK-28077: res_pjsip: improve realtime performance on CLI 'pjsip show
   contacts'
   Reported by: Alexei Gradinari
     * [ab90479642] Alexei Gradinari -- res_pjsip: improve realtime
       performance on CLI 'pjsip show contacts'
   ASTERISK-27988: alembic: PJSIP "mwi_subscribe_replaces_unsolicited" field
   is integer not boolean
   Reported by: Joshua C. Colp
     * [4dd8b5bbb4] Richard Mudgett -- res_pjsip: Fix
       mwi_subscribe_replaces_unsolicited type mismatch
   ASTERISK-28022: res_pjsip realtime: uri column in ps_contacts table can be
   too short
   Reported by: Florian Floimair
     * [595e358761] Florian Floimair -- alembic: increase uri column size
   ASTERISK-27978: res_pjsip: Change default transport keepalive to preserve
   behavior
   Reported by: Joshua C. Colp
     * [a2a3ad2438] Joshua Colp -- res_pjsip: Update default keepalive
       interval to 90 seconds.

    Category: Resources/res_pjsip/Bundling

   ASTERISK-28059: PJSIP: Update bundled PJPROJECT to version 2.8
   Reported by: Joshua C. Colp
     * [c008c27c85] Richard Mudgett -- pjproject: Update initial 2.8 patches
       to apply cleanly.
     * [60258b4ec1] Joshua Colp -- pjproject: Upgrade to 2.8.

    Category: Resources/res_pjsip_endpoint_identifier_ip

   ASTERISK-27548: res_pjsip_endpoint_identifier_ip only matches against
   "generic string" headers
   Reported by: George Joseph
     * [32ce8e5cf3] Richard Mudgett -- res_pjsip_endpoint_identifier_ip.c:
       Added regex support to match_header

    Category: Resources/res_pjsip_mwi

   ASTERISK-27121: res_pjsip_mwi: Memory leak on reload
   Reported by: Sergej Kasumovic
     * [29115e2384] George Joseph -- app_voicemail: Remove need to subscribe
       to stasis
     * [17d6d9e1e7] George Joseph -- stasis_cache: Stop caching stasis
       subscription change messages
     * [9fb166cf3b] George Joseph -- stasis_cache: Prune
       stasis_subscription_change messages

    Category: Resources/res_pjsip_nat

   ASTERISK-28129: Incorrect Behavior for rewrite_contact when Re-Invite
   omits routset
   Reported by: Torrey Searle
     * [7b2282c890] Torrey Searle -- res/res_pjsip_nat: Fix logic for
       REINVITES

    Category: Resources/res_pjsip_notify

   ASTERISK-28137: res_pjsip_notify: improve realtime performance on CLI
   completion on the endpoint
   Reported by: Alexei Gradinari
     * [fbee505611] Alexei Gradinari -- res_pjsip_notify: improve realtime
       performance on CLI completion on the endpoint

    Category: Resources/res_pjsip_registrar

   ASTERISK-28001: res_pjsip_registrar: Improve performance of inbound
   handling
   Reported by: Joshua C. Colp
     * [1e837e13f5] Joshua Colp -- res_pjsip_registrar: Improve performance
       on inbound handling.

    Category: Resources/res_pjsip_sdp_rtp

   ASTERISK-28110: rtp: Incorrect Packetization
   Reported by: Robert Cripps
     * [df703c1853] Robert Cripps -- bridge_native_rtp.c: Fail native bridge
       if no framing match.
   ASTERISK-28007: rtcp-mux is put in SDP answer regardless of offer
   Reported by: Torrey Searle
     * [0d4bde84d1] Torrey Searle -- res/res_pjsip_sdp_rtp: put rtcp-mux in
       answer only if offered
   ASTERISK-27398: No joint capabilities with video and audio-only streams
   Reported by: Benjamin Keith Ford
     * [a46fcaca7b] Ben Ford -- res_pjsip/rtp: No joint capabilities between
       streams.

    Category: Resources/res_pjsip_session

   ASTERISK-28047: chan_pjsip: Declined video stream is added when no video
   codecs configured and session refresh with removed video stream occurs
   Reported by: Will
     * [6e79e6b097] Joshua Colp -- res_pjsip_session: Don't add declined
       stream if one does not exist.

    Category: Resources/res_pjsip_t38

   ASTERISK-27944: res_pjsip_t38: Crash receiving 1xx responses other than
   100 before 200 for T.38 reINVITE
   Reported by: Joshua Elson
     * [236826a111] Richard Mudgett -- res_pjsip_t38.c: Fix crash if already
       saw a final T.38 reINVITE response.

    Category: Resources/res_pjsip_transport_websocket

   ASTERISK-28020: res_pjsip_transport_websocket: Properly set 'received' for
   IPv6
   Reported by: Sean Bright
     * [245fb462d6] Sean Bright -- res_pjsip_transport_websocket: Properly
       set src_name for IPv6

    Category: Resources/res_rtp_asterisk

   ASTERISK-28162: [patch] need to reset DTMF last sequence number and
   timestamp on voice packet with marker bit
   Reported by: Alexei Gradinari
     * [331c906c48] Alexei Gradinari -- RTP: need to reset DTMF last
       seqno/timestamp on voice packet with marker bit
   ASTERISK-28110: rtp: Incorrect Packetization
   Reported by: Robert Cripps
     * [df703c1853] Robert Cripps -- bridge_native_rtp.c: Fail native bridge
       if no framing match.
   ASTERISK-28002: When T.140 realtime text is negociated, a lot of debug
   traces are generated
   Reported by: Emmanuel BUU
     * [aa2755cbb3] Emmanuel BUU -- res/res_rtp_asterisk: remove debug traces
       generated by an empty frame
   ASTERISK-27990: res_rtp_asterisk: Requires OpenSSL in Developer Mode.
   Reported by: Alexander Traud
     * [8da81a208f] Alexander Traud -- res_rtp_asterisk: In Developer Mode,
       do not require OpenSSL.

    Category: Resources/res_stasis

   ASTERISK-26094: stasis: Playing MOH to bridge with ARI does not work
   Reported by: Cameron
     * [1f68614f3c] Moritz Fain -- res_stasis: Fix stale data in ARI bridges

    Category: Tests/General

   ASTERISK-28070: testsuite: Sniffer assumes pjmedia will use ports below
   10000
   Reported by: Joshua C. Colp
     * [7c49ea7cff] Joshua Colp -- res_rtp_asterisk: Raise event when RTP
       port is allocated

    Category: Third-Party/pjproject

   ASTERISK-27966: pjsip: Race condition in 183 re transmission can result in
   a deadlock
   Reported by: Torrey Searle
     * [e818925a58] Torrey Searle -- thirdparty/pjproject: fix deadlock in
       response retransmissions

    Category: pjproject/pjsip

   ASTERISK-28049: res_pjproject build failure
   Reported by: Jaco Kroon
     * [e5739c494c] Sean Bright -- res_pjproject: Fix sockaddr conversion
       routines for non-bundled PJSIP
   ASTERISK-27997: pjproject_bundled: Fix for Solaris builds. Do not undef
   s_addr.
   Reported by: Alexander Traud
     * [04974a0ca2] Alexander Traud -- pjproject_bundled: Fix for Solaris
       builds. Do not undef s_addr.

  Improvement

    Category: Channels/chan_pjsip

   ASTERISK-28144: [patch] New function PJSIP_PARSE_URI to parse an URI and
   return a specified part of the URI
   Reported by: Alexei Gradinari
     * [e6005f1227] Alexei Gradinari -- pjsip: New function PJSIP_PARSE_URI
       to parse URI and return part of URI

    Category: Contrib/General

   ASTERISK-28136: Allow the sip_to_pjsip script to be used in a pipe
   Reported by: Pascal Cadotte Michaud
     * [a6d1723727] Pascal Cadotte Michaud -- contrib/sip_to_pjsip: add a
       --quiet option to avoid prints

    Category: Documentation

   ASTERISK-27993: pjsip_wizard example gives wrong info about unsupported
   SRV records
   Reported by: Jonathan Harris
     * [20b53b5cee] Richard Mudgett -- pjsip_wizard.conf.sample: Update
       remote_hosts description.

    Category: General

   ASTERISK-28046: Remove stale nonoptreq references
   Reported by: Walter Doekes
     * [78453e65fd] Walter Doekes -- optional_api: Remove unused nonoptreq
       fields

    Category: PBX/pbx_dundi

   ASTERISK-27164: [patch] Add IPv6 Support for DUNDi
   Reported by: Adam Secombe
     * [f6c1d94d91] Kirsty Tyerman -- pbx_dundi: Added IPv6 support for dundi

    Category: Resources/res_pjsip_caller_id

   ASTERISK-28006: PJSIP: Missing "party=calling"/"party=called" in
   Remote-Party-ID
   Reported by: Eric Dantie
     * [56c1285b8a] Joshua Colp -- res_pjsip_caller_id: Add "party" parameter
       to RPID header.

    Category: Resources/res_rtp_asterisk

   ASTERISK-27970: res_rtp_asterisk: T.140 packets containing backspace or
   end of line are merged with regular text and it causes some UA to break
   Reported by: Emmanuel BUU
     * [d3809d61cb] Emmanuel BUU -- res_rtp_asterisk: Avoid merging command
       and regular T.140 text packets

    Category: pjproject/pjsip

   ASTERISK-27995: pjproject_bundled: Find shared libraries in root
   --with-ssl=PATH.
   Reported by: Alexander Traud
     * [e9d41572b3] Alexander Traud -- pjproject_bundled: Find shared
       libraries in root --with-ssl=PATH.

     ----------------------------------------------------------------------

                                  Open Issues

                                 [Back to Top]

   This is a list of all open issues from the issue tracker that were
   referenced by changes that went into this release.

  Bug

    Category: Resources/res_fax

   ASTERISK-27981: res_fax: Fax session leak with fax gatewaying
   Reported by: pasandev
     * [390d0b42ca] Joshua Colp -- res_fax: Handle fax gateway being started
       more than once.

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author              | Summary                             |
   |------------+---------------------+-------------------------------------|
   |            |                     | Revert "RTP: reset DTMF last        |
   | 0430ddae26 | George Joseph       | seqno/timestamp on voice packet     |
   |            |                     | with marker bit"                    |
   |------------+---------------------+-------------------------------------|
   | 56812764bf | Kevin Harwell       | Update for 16.1.0-rc1               |
   |------------+---------------------+-------------------------------------|
   | 12a30c71d8 | Kevin Harwell       | pjsip_add_use_callerid_contact:     |
   |            |                     | fixed alembic script                |
   |------------+---------------------+-------------------------------------|
   | 27806fd04d | Sean Bright         | core: Add some documentation to the |
   |            |                     | malloc_trim code                    |
   |------------+---------------------+-------------------------------------|
   | 1f09c61804 | Chris-Savinovich    | core: Merge malloc_trim patch       |
   |------------+---------------------+-------------------------------------|
   | a5e77e9c37 | George Joseph       | test_cel: Plug a few ref leaks      |
   |------------+---------------------+-------------------------------------|
   | 606304eb54 | Corey Farrell       | jansson: Upgrade to 2.12.           |
   |------------+---------------------+-------------------------------------|
   | ed7a5664b6 | Corey Farrell       | astobj2: Eliminate usage of legacy  |
   |            |                     | ao2_container_alloc routine.        |
   |------------+---------------------+-------------------------------------|
   |            |                     | astobj2: Create function to copy    |
   | 0d2b39065f | Corey Farrell       | weak proxied objects from           |
   |            |                     | container.                          |
   |------------+---------------------+-------------------------------------|
   | 729967e99c | George Joseph       | CI: Get job timeouts from           |
   |            |                     | environment                         |
   |------------+---------------------+-------------------------------------|
   | d05c219aad | Joshua C. Colp      | stasis: Remove stringfields and     |
   |            |                     | lock from change message.           |
   |------------+---------------------+-------------------------------------|
   | f9b9bdd0b0 | Corey Farrell       | app_queue: Cleanup queue_ref /      |
   |            |                     | queue_unref routines.               |
   |------------+---------------------+-------------------------------------|
   | dd0a3c0bba | George Joseph       | CI: Add tmpfs to all jenkinsfiles   |
   |------------+---------------------+-------------------------------------|
   | 77e9c877b5 | George Joseph       | CI: Mount a tmpfs on /tmp for       |
   |            |                     | testsuite docker containers         |
   |------------+---------------------+-------------------------------------|
   | 0552bc2a94 | George Joseph       | CI: Pass work directory to          |
   |            |                     | runTestsuite                        |
   |------------+---------------------+-------------------------------------|
   | 7ba8f32632 | George Joseph       | CI: Allow runUnittests to use       |
   |            |                     | 'expect' to run the tests           |
   |------------+---------------------+-------------------------------------|
   | 699dfa9401 | Corey Farrell       | taskprocessor: Prevent race         |
   |            |                     | creating new taskprocessor.         |
   |------------+---------------------+-------------------------------------|
   | 3bdf6ac918 | Corey Farrell       | pjproject-bundled: Use AST_DEVMODE  |
   |            |                     | for conditional compilation.        |
   |------------+---------------------+-------------------------------------|
   | 2a76489eba | Corey Farrell       | res_pjsip_caller_id: Use static     |
   |            |                     | pj_str_t for fromto header names.   |
   |------------+---------------------+-------------------------------------|
   |            |                     | test_res_pjsip_scheduler: Fix       |
   | 89d97da8a4 | Corey Farrell       | possible write after free in        |
   |            |                     | scheduler_policy.                   |
   |------------+---------------------+-------------------------------------|
   | 05c79fdf06 | Corey Farrell       | taskprocessor: Do not use separate  |
   |            |                     | allocation for stats or name.       |
   |------------+---------------------+-------------------------------------|
   | 1c008c6de5 | Corey Farrell       | jansson-bundled: Patch for          |
   |            |                     | off-nominal crash.                  |
   |------------+---------------------+-------------------------------------|
   |            |                     | res_pjsip: Send a 503 response when |
   | 9c9bc5acca | Chris-Savinovich    | overload state if reliable          |
   |            |                     | transport.                          |
   |------------+---------------------+-------------------------------------|
   |            |                     | res_pjsip.c: Make taskprocessor     |
   | 3e3f3bfb07 | Alexei Gradinari    | scheduling algorithm pick the       |
   |            |                     | shortest queue                      |
   |------------+---------------------+-------------------------------------|
   | 27897a850d | Joshua Colp         | stasis: Clarify lifetime of topics. |
   |------------+---------------------+-------------------------------------|
   | 5cbe77cc46 | Alexei Gradinari    | pjsip: new endpoint's options to    |
   |            |                     | control Connected Line updates      |
   |------------+---------------------+-------------------------------------|
   | 6c2f9b730e | Pascal Cadotte      | contrib/sip_to_pjsip: handle setvar |
   |            | Michaud             | in conversion                       |
   |------------+---------------------+-------------------------------------|
   |            |                     | logger.c: Fix default console       |
   | fbb577577c | Richard Mudgett     | logging when no logger.conf         |
   |            |                     | available.                          |
   |------------+---------------------+-------------------------------------|
   | 11427a9665 | Richard Mudgett     | modules.conf.sample: Update preload |
   |            |                     | usage documentation.                |
   |------------+---------------------+-------------------------------------|
   | dee1165d31 | Corey Farrell       | astobj2: Eliminate usage of legacy  |
   |            |                     | container allocation macros.        |
   |------------+---------------------+-------------------------------------|
   | 90887af808 | Corey Farrell       | lock: Replace __ast_mutex_logger    |
   |            |                     | with private log_mutex_error.       |
   |------------+---------------------+-------------------------------------|
   | 00284352b3 | Richard Mudgett     | app_dial/app_queue: Update          |
   |            |                     | application option documentation    |
   |------------+---------------------+-------------------------------------|
   |            |                     | samples: PARKINGSLOT ->             |
   | 495a1e7e5c | Sean Bright         | PARKING_SPACE in parking sample     |
   |            |                     | config                              |
   |------------+---------------------+-------------------------------------|
   | 2384d6eb87 | Richard Mudgett     | Fix 'statement' typo throughout     |
   |            |                     | code.                               |
   |------------+---------------------+-------------------------------------|
   | 718ccd51a3 | Richard Mudgett     | res_rtp_asterisk.c: Add conditional |
   |            |                     | module dependency to res_pjproject  |
   |------------+---------------------+-------------------------------------|
   | 7687630074 | Richard Mudgett     | modules: Add missing run time       |
   |            |                     | module support levels.              |
   |------------+---------------------+-------------------------------------|
   | abee4fd072 | Corey Farrell       | taskprocessor: Warn on unused       |
   |            |                     | result from pushing task.           |
   |------------+---------------------+-------------------------------------|
   | 3fe9c41342 | Richard Mudgett     | bundled pjproject: Remove timer     |
   |            |                     | cleanup usage patch.                |
   |------------+---------------------+-------------------------------------|
   | 35f44be460 | Corey Farrell       | refdebug: Create refstats.py        |
   |            |                     | script.                             |
   |------------+---------------------+-------------------------------------|
   | 0f53930c05 | Alexei Gradinari    | res_pjsip: set callerid_tag to      |
   |            |                     | empty string                        |
   |------------+---------------------+-------------------------------------|
   | 08e5bbfec0 | Corey Farrell       | threadpool: Eliminate pointless AO2 |
   |            |                     | usage.                              |
   |------------+---------------------+-------------------------------------|
   | a5023d4f75 | Corey Farrell       | main/astfd: Fix GCC8                |
   |            |                     | format-truncation warning.          |
   |------------+---------------------+-------------------------------------|
   | 5ea517f80e | Corey Farrell       | chan_sip: Tell module loader that   |
   |            |                     | chan_sip is extended support.       |
   |------------+---------------------+-------------------------------------|
   | c001974f4f | Richard Mudgett     | res_statsd.c: Fix returned reload   |
   |            |                     | status.                             |
   |------------+---------------------+-------------------------------------|
   | c6ee3cf639 | Corey Farrell       | loader: Flag module as declined in  |
   |            |                     | all cases where it fails to load.   |
   |------------+---------------------+-------------------------------------|
   | 77f151d927 | Richard Mudgett     | func_periodic_hook.c: Cleanup       |
   |            |                     | module resources on failure.        |
   |------------+---------------------+-------------------------------------|
   | bc335ceda8 | Richard Mudgett     | codec_speex.c: Cleanup module       |
   |            |                     | loading to DECLINE and not FAILURE. |
   |------------+---------------------+-------------------------------------|
   | 6fd21a6af6 | George Joseph       | CI: Fix missing () in               |
   |            |                     | gates.jenkinsfile                   |
   |------------+---------------------+-------------------------------------|
   | 1598c7a306 | George Joseph       | CI: Add timestamps and timeouts to  |
   |            |                     | jenkinsfiles                        |
   |------------+---------------------+-------------------------------------|
   | b2f96fdcfe | Sean Bright         | ast_coredumper: Remove .gdbinit     |
   |            |                     | file on exit                        |
   |------------+---------------------+-------------------------------------|
   | d0a1237c19 | Sean Bright         | CI: Look up configured              |
   |            |                     | kernel.core_pattern sysctl          |
   |------------+---------------------+-------------------------------------|
   | 48bb4543d9 | Corey Farrell       | jenkins: Fix cleanup command        |
   |            |                     | redirection.                        |
   |------------+---------------------+-------------------------------------|
   | d027d193b8 | George Joseph       | ast_coredumper: Don't use "declare  |
   |            |                     | -n"                                 |
   |------------+---------------------+-------------------------------------|
   | 7eda6263c2 | Richard Mudgett     | res_smdi.c: Fix module ref counting |
   |            |                     | and inverted test.                  |
   |------------+---------------------+-------------------------------------|
   | 5b72bb0278 | Richard Mudgett     | res_smdi.c: Made use defaults if    |
   |            |                     | the smdi.conf file does not exist.  |
   |------------+---------------------+-------------------------------------|
   | fa9cd68589 | Corey Farrell       | astobj2: Comment on OBJ_NOLOCK in   |
   |            |                     | ao2_container_clone.                |
   |------------+---------------------+-------------------------------------|
   | 8b3b504b79 | Sean Bright         | CI: Use brace expansion instead of  |
   |            |                     | calling out to seq                  |
   |------------+---------------------+-------------------------------------|
   | 5f7350d68b | Sean Bright         | CI: Use bindport instead of port in |
   |            |                     | test http.conf                      |
   |------------+---------------------+-------------------------------------|
   | 2b4752911f | Sean Bright         | http.c: Reload TLS even if          |
   |            |                     | http.conf hasn't changed            |
   |------------+---------------------+-------------------------------------|
   | 3b2310332d | Corey Farrell       | core: Disable astobj2 locking for   |
   |            |                     | some common objects.                |
   |------------+---------------------+-------------------------------------|
   |            |                     | res_statsd.c: Made use defaults if  |
   | c2e6efa63d | Richard Mudgett     | the statsd.conf file does not       |
   |            |                     | exist.                              |
   |------------+---------------------+-------------------------------------|
   | 326574d4fc | Corey Farrell       | Resolve warning about duplicate     |
   |            |                     | 'dialplan' CLI.                     |
   |------------+---------------------+-------------------------------------|
   | 65f06a4505 | Corey Farrell       | loader: Fix result of module reload |
   |            |                     | error.                              |
   |------------+---------------------+-------------------------------------|
   | f066dbc353 | Corey Farrell       | loader: Improve error handling.     |
   |------------+---------------------+-------------------------------------|
   | 693e00eee6 | Corey Farrell       | astobj2: Record lock usage to refs  |
   |            |                     | log when DEBUG_THREADS is enabled.  |
   |------------+---------------------+-------------------------------------|
   | 5a9230eacb | Corey Farrell       | app_page: Add dependency against    |
   |            |                     | app_confbridge.                     |
   |------------+---------------------+-------------------------------------|
   | 266ed3d68b | Corey Farrell       | Append CHANGES/UPGRADE.txt for      |
   |            |                     | module loader changes.              |
   |------------+---------------------+-------------------------------------|
   | 3337fe85c5 | Corey Farrell       | jansson-bundled: Add patches to     |
   |            |                     | improve json_pack error reporting.  |
   |------------+---------------------+-------------------------------------|
   | b3b95c8d36 | Corey Farrell       | lock: Improve performance of        |
   |            |                     | DEBUG_THREADS.                      |
   |------------+---------------------+-------------------------------------|
   | b4ab26e72f | George Joseph       | app_confbridge: Use bridge join     |
   |            |                     | hook to send join and leave events  |
   |------------+---------------------+-------------------------------------|
   | 33455f8d6f | Corey Farrell       | astobj2: Reduce memory overhead.    |
   |------------+---------------------+-------------------------------------|
   | d1698b4e0b | Sean Bright         | config.c: Cleanup AST_INCLUDE_GLOB  |
   |------------+---------------------+-------------------------------------|
   | 0fe08c5e79 | Corey Farrell       | astobj2: Fix shutdown order.        |
   |------------+---------------------+-------------------------------------|
   | 67e1e49e08 | Ben Ford            | res_rtp_asterisk.c: Add "seqno"     |
   |            |                     | strictrtp option                    |
   |------------+---------------------+-------------------------------------|
   | 227d9719da | George Joseph       | CI: Add --test-timeout option to    |
   |            |                     | runTestsuite.sh                     |
   |------------+---------------------+-------------------------------------|
   | ede59966d9 | Corey Farrell       | jansson: Backport fixes to bundled, |
   |            |                     | use json_vsprintf if available.     |
   |------------+---------------------+-------------------------------------|
   | 7b0dbda936 | Corey Farrell       | json: Take advantage of new API's.  |
   |------------+---------------------+-------------------------------------|
   | 755febe497 | Kevin Harwell       | rtp_engine: rtcp_report_to_json can |
   |            |                     | overflow the ssrc integer value     |
   |------------+---------------------+-------------------------------------|
   | ba91c73f8e | George Joseph       | app_voicemail: Fix stack overrun in |
   |            |                     | append_mailbox                      |
   |------------+---------------------+-------------------------------------|
   | 0a1a96d331 | George Joseph       | channel.c: Address stack overflow   |
   |            |                     | in does_id_conflict()               |
   |------------+---------------------+-------------------------------------|
   | 880905e7eb | Sean Bright         | res_rtp_asterisk: Reset all         |
   |            |                     | settings on module reload           |
   |------------+---------------------+-------------------------------------|
   | fa1b836374 | George Joseph       | app_voicemail: Cleanup mailbox      |
   |            |                     | topic and cache                     |
   |------------+---------------------+-------------------------------------|
   | 1a9c69d729 | George Joseph       | stasis: Add function to delete      |
   |            |                     | topic from pool                     |
   |------------+---------------------+-------------------------------------|
   | 2f38bcdfc0 | Joshua Colp         | res_remb_modifier: Add module for   |
   |            |                     | controlling REMB from CLI.          |
   |------------+---------------------+-------------------------------------|
   |            |                     | stasis: No need to keep a stasis    |
   | f6695249a5 | Richard Mudgett     | type ref in a stasis msg or cache   |
   |            |                     | object.                             |
   |------------+---------------------+-------------------------------------|
   |            |                     | stasis_message.c: Don't create      |
   | 192f71b7de | Richard Mudgett     | immutable stasis objects with       |
   |            |                     | locks.                              |
   |------------+---------------------+-------------------------------------|
   |            |                     | alembic: fix                        |
   | 3e48c34f14 | Florian Floimair    | suppress_q850_reason_headers column |
   |            |                     | name                                |
   |------------+---------------------+-------------------------------------|
   |            |                     | autoconf: Check for                 |
   | b0a0b975c5 | Sean Bright         | srtp_get_version_string() before    |
   |            |                     | using it                            |
   |------------+---------------------+-------------------------------------|
   | 4a309839eb | George Joseph       | CI: Fix typo in testsuite git       |
   |            |                     | checkout                            |
   |------------+---------------------+-------------------------------------|
   | 55ca51af21 | Sean Bright         | res_srtp.c: Show linked version of  |
   |            |                     | libsrtp on module init              |
   |------------+---------------------+-------------------------------------|
   | 887a315e17 | Sean Bright         | res_pjsip: Log IPv6 addresses       |
   |            |                     | correctly                           |
   |------------+---------------------+-------------------------------------|
   | 3f9544c1f5 | George Joseph       | CI: Use proper credentials for      |
   |            |                     | Security testsuite checkout         |
   |------------+---------------------+-------------------------------------|
   | 5842741689 | Corey Farrell       | CI: Use .gitreview to default       |
   |            |                     | BRANCH_NAME.                        |
   |------------+---------------------+-------------------------------------|
   |            |                     | Build System: Resolve conflict      |
   | ecb3b23b07 | Corey Farrell       | between DESTDIR and bundled         |
   |            |                     | jansson.                            |
   |------------+---------------------+-------------------------------------|
   |            |                     | res_pjproject: Add utility          |
   | 3134fd95a9 | Sean Bright         | functions to convert between socket |
   |            |                     | structures                          |
   |------------+---------------------+-------------------------------------|
   |            | Rodrigo RamÃrez     | app_dial: set the comment for       |
   | 8879a62c1c | Norambuena          | OPT_ARG_ANNOUNCE to really what is  |
   |            |                     | done                                |
   |------------+---------------------+-------------------------------------|
   | cfb854e241 | Chris-Savinovich    | pbx_config.c: Fix reloading module  |
   |            |                     | if initially declined to load       |
   |------------+---------------------+-------------------------------------|
   | 4fcdcfaa37 | Richard Mudgett     | http.c: Give HTTP error response    |
   |            |                     | when received lines are too long.   |
   |------------+---------------------+-------------------------------------|
   | f6a165208b | Richard Mudgett     | iostream.c: Fix ast_iostream_gets() |
   |            |                     | needlessly returning failure.       |
   |------------+---------------------+-------------------------------------|
   | 1edd9eb309 | Rodrigo RamÃrez     | make config: os-release output      |
   |            | Norambuena          | error.                              |
   |------------+---------------------+-------------------------------------|
   | 1b1f47bef6 | Corey Farrell       | Create --disable-binary-modules     |
   |            |                     | option.                             |
   |------------+---------------------+-------------------------------------|
   | d84de695ed | Jaco Kroon          | AMI: be less verbose when adding    |
   |            |                     | HTTP headers to AMI/HTTP messages.  |
   |------------+---------------------+-------------------------------------|
   | 4188e7d6dd | Matthew Fredrickson | sample_configs: noload res_hep.so   |
   |            |                     | by default                          |
   |------------+---------------------+-------------------------------------|
   | 4b88cb383d | Sean Bright         | app_queue: Silence GCC 8 compiler   |
   |            |                     | warning                             |
   |------------+---------------------+-------------------------------------|
   | fb2f242c49 | Richard Mudgett     | AMI: Remove docs for nonexistent    |
   |            |                     | AMI ContactStatus event headers     |
   |------------+---------------------+-------------------------------------|
   | b9cd4c6d92 | Joshua Colp         | res_pjsip: Reduce processing when a |
   |            |                     | Contact is updated.                 |
   |------------+---------------------+-------------------------------------|
   | 19298141cf | Richard Mudgett     | res_sorcery_realtime.c: Fix         |
   |            |                     | unqualified fetch warning.          |
   |------------+---------------------+-------------------------------------|
   | 4e43823d19 | Richard Mudgett     | pbx_dundi.c: Misc memory management |
   |            |                     | fixes when destroying peers         |
   |------------+---------------------+-------------------------------------|
   | 857926d197 | Richard Mudgett     | pbx_dundi.c: Handle thread shutdown |
   |            |                     | better.                             |
   |------------+---------------------+-------------------------------------|
   | 111e73678e | Richard Mudgett     | pbx_dundi: Fix debug frame decode   |
   |            |                     | string.                             |
   |------------+---------------------+-------------------------------------|
   | a7ace944ae | Richard Mudgett     | pbx_dundi: Update sample config     |
   |            |                     | documentation.                      |
   |------------+---------------------+-------------------------------------|
   | 0874d5b316 | Richard Mudgett     | res_rtp_asterisk.c: Fix unused      |
   |            |                     | variable warnings                   |
   |------------+---------------------+-------------------------------------|
   | df78227e4a | George Joseph       | CI: Fixup for non-13 branches       |
   |------------+---------------------+-------------------------------------|
   | 4ca959c72c | George Joseph       | CI: Final version of setting        |
   |            |                     | correct gerrit creds                |
   |------------+---------------------+-------------------------------------|
   | 33a5b8ccaf | George Joseph       | CI: Add https credentials to gerrit |
   |            |                     | checkouts                           |
   |------------+---------------------+-------------------------------------|
   | 167efe3a47 | Corey Farrell       | res_resolver_unbound: Fix leak of   |
   |            |                     | config nameserver strings.          |
   |------------+---------------------+-------------------------------------|
   | 72dbc9fb70 | Corey Farrell       | res_pjsip: Resolve transport        |
   |            |                     | management leak at shutdown.        |
   |------------+---------------------+-------------------------------------|
   | 6e0f4a2127 | Corey Farrell       | res_pjsip: Fix leak in              |
   |            |                     | pjsip_options.                      |
   |------------+---------------------+-------------------------------------|
   | b370482786 | Corey Farrell       | res_odbc: Allow unload at shutdown. |
   |------------+---------------------+-------------------------------------|
   |            |                     | Build System: Improve ccache        |
   | d61a8791b5 | Corey Farrell       | matching for different menuselect   |
   |            |                     | options.                            |
   |------------+---------------------+-------------------------------------|
   | 0e4f5f5189 | Richard Mudgett     | contrib/scripts: Make astgenkey     |
   |            |                     | executable                          |
   |------------+---------------------+-------------------------------------|
   | 3bf968470b | Corey Farrell       | CI: Add support for coverage        |
   |            |                     | processing.                         |
   |------------+---------------------+-------------------------------------|
   | 661273a078 | Corey Farrell       | Sample configs: Fix pjsip.conf      |
   |            |                     | syntax error.                       |
   |------------+---------------------+-------------------------------------|
   | eb87a98a1a | Richard Mudgett     | res_pjsip.h: Fix doxygen comments.  |
   |------------+---------------------+-------------------------------------|
   | 5030756bfa | Joshua Colp         | stasis: Reduce calculation of       |
   |            |                     | stasis message type hash.           |
   |------------+---------------------+-------------------------------------|
   | 99a0586ec1 | Richard Mudgett     | res_pjsip: Make pjlib.h             |
   |            |                     | consistently included.              |
   |------------+---------------------+-------------------------------------|
   | 914b9e1934 | George Joseph       | CI: Add optional uninstall step     |
   |            |                     | before installing asterisk          |
   |------------+---------------------+-------------------------------------|
   | ee9794d741 | Joshua Colp         | res_pjsip_pubsub: Use ast_true for  |
   |            |                     | "prune_on_boot".                    |
   |------------+---------------------+-------------------------------------|
   | 59f53514ce | Joshua Colp         | res_pjsip_pubsub: Treat             |
   |            |                     | "prune_on_boot" as a yes / no.      |
   |------------+---------------------+-------------------------------------|
   | e097dca4d7 | George Joseph       | CI: Fix placement of job summary    |
   |            |                     | statments                           |
   |------------+---------------------+-------------------------------------|
   | e5de8a70f8 | Corey Farrell       | loader: Process dependencies for    |
   |            |                     | built-in modules.                   |
   |------------+---------------------+-------------------------------------|
   | 798f049e82 | George Joseph       | CI: Add docker info to job summary  |
   |------------+---------------------+-------------------------------------|
   | 7578881b3d | Corey Farrell       | Build System: Create 'make          |
   |            |                     | install-configs' target.            |
   |------------+---------------------+-------------------------------------|
   |            |                     | json.c: improve                     |
   | 8ea13d62cd | Kevin Harwell       | ast_json_to_ast_variables           |
   |            |                     | performance                         |
   |------------+---------------------+-------------------------------------|
   | 93997f9698 | George Joseph       | CI: Explicitly pass BRANCH_NAME to  |
   |            |                     | buildAsterisk and installAsterisk   |
   |------------+---------------------+-------------------------------------|
   | 0baf660bde | George Joseph       | CI: Add options to initialize and   |
   |            |                     | cleanup database to runTestsuite.sh |
   |------------+---------------------+-------------------------------------|
   | 74cbeabb97 | Corey Farrell       | CI: Do not `mkdir 2`.               |
   |------------+---------------------+-------------------------------------|
   | adf3c569a2 | Corey Farrell       | Build System: Silence build of      |
   |            |                     | bundled jansson.                    |
   |------------+---------------------+-------------------------------------|
   | e4b0f09bcc | George Joseph       | CI: RefDebug: Fix reference to      |
   |            |                     | testsuite URL                       |
   |------------+---------------------+-------------------------------------|
   | 5537048d60 | Corey Farrell       | Build System: Fix bundled jansson   |
   |            |                     | install.                            |
   |------------+---------------------+-------------------------------------|
   | 9f3620a578 | Corey Farrell       | CI: Use bundled jansson if needed.  |
   |------------+---------------------+-------------------------------------|
   |            |                     | res_pjsip: Change log message from  |
   | 1f46e2e91c | Florian Floimair    | error to warning for valid use      |
   |            |                     | cases                               |
   |------------+---------------------+-------------------------------------|
   | 8550fad21a | George Joseph       | CI: Add --privileged flag to docker |
   |            |                     | options                             |
   |------------+---------------------+-------------------------------------|
   | f2580d037f | George Joseph       | CI: Set correct user:group when     |
   |            |                     | publishing docs                     |
   |------------+---------------------+-------------------------------------|
   | 35d06e46ae | Richard Mudgett     | core: AST_DEVMODE no longer affects |
   |            |                     | ABI.                                |
   |------------+---------------------+-------------------------------------|
   | 09b258fd69 | Corey Farrell       | CI: Split --test-command argument.  |
   |------------+---------------------+-------------------------------------|
   | 460ef41f7a | George Joseph       | xmldoc.c: Fix dump of xml document  |
   |------------+---------------------+-------------------------------------|
   | fd1f74af40 | Corey Farrell       | CI: Fix mkdir CACHE_DIR.            |
   |------------+---------------------+-------------------------------------|
   | 9b3267641f | Corey Farrell       | build_tools/make_version: Get       |
   |            |                     | MAINLINE_BRANCH from .gitreview.    |
   |------------+---------------------+-------------------------------------|
   | 0f999a834f | Joshua Colp         | sched: Make ABI compatible between  |
   |            |                     | dev mode and non-dev mode.          |
   |------------+---------------------+-------------------------------------|
   | aea0a0294d | Richard Mudgett     | asterisk.c: Update displayed        |
   |            |                     | copyright year for v16 release.     |
   |------------+---------------------+-------------------------------------|
   | d2dace81d4 | Corey Farrell       | Enable bundling of jansson, require |
   |            |                     | 2.11.                               |
   |------------+---------------------+-------------------------------------|
   | c8bd8f6ce9 | Corey Farrell       | CI: Fix logger.conf for unit tests. |
   |------------+---------------------+-------------------------------------|
   | 0f82db82cb | George Joseph       | CI: Add wiki doc publish to         |
   |            |                     | periodics                           |
   |------------+---------------------+-------------------------------------|
   | dbffcdc561 | Richard Mudgett     | res_pjsip: Update endpoint          |
   |            |                     | transport option documentation.     |
   |------------+---------------------+-------------------------------------|
   | 709b795cb0 | Richard Mudgett     | pjsip_resolver.c: Use replacement   |
   |            |                     | function                            |
   |------------+---------------------+-------------------------------------|
   | 0b3bc4852f | Joshua Colp         | Update mainline version for the 16  |
   |            |                     | branch.                             |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 asterisk-16.0.0-summary.html                                                                  | 2882 ----
 asterisk-16.0.0-summary.txt                                                                   | 6042 ----------
 b/.version                                                                                    |    2
 b/CHANGES                                                                                     |   43
 b/ChangeLog                                                                                   | 3154 +++++
 b/Makefile                                                                                    |   19
 b/Makefile.rules                                                                              |    3
 b/UPGRADE.txt                                                                                 |    6
 b/addons/ooh323c/src/ooasn1.h                                                                 |    6
 b/apps/app_confbridge.c                                                                       |   84
 b/apps/app_dial.c                                                                             |   97
 b/apps/app_followme.c                                                                         |   10
 b/apps/app_meetme.c                                                                           |   30
 b/apps/app_page.c                                                                             |    7
 b/apps/app_queue.c                                                                            |  122
 b/apps/app_skel.c                                                                             |    8
 b/apps/app_voicemail.c                                                                        |    8
 b/apps/confbridge/conf_config_parser.c                                                        |   12
 b/apps/confbridge/confbridge_manager.c                                                        |   61
 b/apps/confbridge/include/confbridge.h                                                        |   12
 b/asterisk-16.1.0-rc1-summary.html                                                            |  625 +
 b/asterisk-16.1.0-rc1-summary.txt                                                             | 1443 ++
 b/autoconf/ast_ext_lib.m4                                                                     |  102
 b/bridges/bridge_native_rtp.c                                                                 |   12
 b/bridges/bridge_softmix.c                                                                    |   35
 b/build_tools/make_buildopts_h                                                                |   17
 b/build_tools/make_version                                                                    |    2
 b/build_tools/menuselect-deps.in                                                              |    1
 b/channels/Makefile                                                                           |    1
 b/channels/chan_console.c                                                                     |    4
 b/channels/chan_dahdi.c                                                                       |    2
 b/channels/chan_iax2.c                                                                        |   55
 b/channels/chan_mgcp.c                                                                        |    2
 b/channels/chan_motif.c                                                                       |    8
 b/channels/chan_pjsip.c                                                                       |   15
 b/channels/chan_sip.c                                                                         |  122
 b/channels/chan_skinny.c                                                                      |    2
 b/channels/chan_unistim.c                                                                     |    4
 b/channels/pjsip/dialplan_functions.c                                                         |  183
 b/channels/pjsip/include/dialplan_functions.h                                                 |   13
 b/channels/sig_pri.c                                                                          |    7
 b/codecs/codec_speex.c                                                                        |   26
 b/codecs/codecs.xml                                                                           |    5
 b/configs/basic-pbx/modules.conf                                                              |    6
 b/configs/samples/dundi.conf.sample                                                           |   61
 b/configs/samples/modules.conf.sample                                                         |   28
 b/configs/samples/pjsip.conf.sample                                                           |   15
 b/configs/samples/pjsip_wizard.conf.sample                                                    |    8
 b/configs/samples/res_parking.conf.sample                                                     |    2
 b/configs/samples/rtp.conf.sample                                                             |    4
 b/configure                                                                                   |  673 -
 b/configure.ac                                                                                |   45
 b/contrib/Makefile                                                                            |    4
 b/contrib/ast-db-manage/config/versions/1ac563b350a8_add_pjsip_trust_send__connected_line.py  |   40
 b/contrib/ast-db-manage/config/versions/2bb1a85135ad_pjsip_add_use_callerid_contact.py        |   39
 b/contrib/ast-db-manage/config/versions/7f85dd44c775_fix_suppress_q850_reason_headers.py      |   43
 b/contrib/realtime/mssql/mssql_config.sql                                                     |   62
 b/contrib/realtime/mysql/mysql_config.sql                                                     |   20
 b/contrib/realtime/oracle/oracle_config.sql                                                   |   54
 b/contrib/realtime/postgresql/postgresql_config.sql                                           |   22
 b/contrib/scripts/ast_coredumper                                                              |   12
 b/contrib/scripts/install_prereq                                                              |    2
 b/contrib/scripts/refcounter.py                                                               |    6
 b/contrib/scripts/reflocks.py                                                                 |  118
 b/contrib/scripts/refstats.py                                                                 |  180
 b/contrib/scripts/sip_to_pjsip/sip_to_pjsip.py                                                |   52
 b/contrib/systemd/README.txt                                                                  |    3
 b/formats/format_ogg_speex.c                                                                  |    1
 b/funcs/func_dialgroup.c                                                                      |   11
 b/funcs/func_lock.c                                                                           |   10
 b/funcs/func_odbc.c                                                                           |    6
 b/funcs/func_periodic_hook.c                                                                  |   25
 b/funcs/func_strings.c                                                                        |   54
 b/include/asterisk/_private.h                                                                 |   16
 b/include/asterisk/astmm.h                                                                    |    7
 b/include/asterisk/astobj2.h                                                                  |   55
 b/include/asterisk/autoconfig.h.in                                                            |   20
 b/include/asterisk/backtrace.h                                                                |   19
 b/include/asterisk/bridge.h                                                                   |   19
 b/include/asterisk/json.h                                                                     |    5
 b/include/asterisk/lock.h                                                                     |   41
 b/include/asterisk/module.h                                                                   |   39
 b/include/asterisk/netsock2.h                                                                 |   12
 b/include/asterisk/res_pjproject.h                                                            |   26
 b/include/asterisk/res_pjsip.h                                                                |   29
 b/include/asterisk/res_pjsip_session.h                                                        |    2
 b/include/asterisk/stasis.h                                                                   |  165
 b/include/asterisk/stasis_cache_pattern.h                                                     |   35
 b/include/asterisk/stasis_message_router.h                                                    |    4
 b/include/asterisk/taskprocessor.h                                                            |    6
 b/include/asterisk/threadpool.h                                                               |    3
 b/main/Makefile                                                                               |   37
 b/main/app.c                                                                                  |    3
 b/main/asterisk.c                                                                             |   40
 b/main/astfd.c                                                                                |    2
 b/main/astmm.c                                                                                |   37
 b/main/astobj2.c                                                                              |  101
 b/main/astobj2_container.c                                                                    |   56
 b/main/backtrace.c                                                                            |  324
 b/main/bridge.c                                                                               |   11
 b/main/bucket.c                                                                               |    8
 b/main/ccss.c                                                                                 |   22
 b/main/cel.c                                                                                  |   10
 b/main/channel.c                                                                              |   13
 b/main/channel_internal_api.c                                                                 |    4
 b/main/cli.c                                                                                  |   46
 b/main/codec.c                                                                                |    4
 b/main/config.c                                                                               |   23
 b/main/config_options.c                                                                       |   10
 b/main/datastore.c                                                                            |    3
 b/main/db.c                                                                                   |    6
 b/main/devicestate.c                                                                          |   28
 b/main/dns_naptr.c                                                                            |   14
 b/main/dns_srv.c                                                                              |   12
 b/main/endpoints.c                                                                            |   19
 b/main/features_config.c                                                                      |    4
 b/main/format.c                                                                               |    4
 b/main/format_cache.c                                                                         |    4
 b/main/frame.c                                                                                |    5
 b/main/http.c                                                                                 |   31
 b/main/indications.c                                                                          |    8
 b/main/iostream.c                                                                             |   59
 b/main/json.c                                                                                 |   47
 b/main/loader.c                                                                               |   20
 b/main/lock.c                                                                                 |  218
 b/main/logger.c                                                                               |   61
 b/main/manager.c                                                                              |   91
 b/main/media_cache.c                                                                          |    4
 b/main/media_index.c                                                                          |   13
 b/main/message.c                                                                              |   10
 b/main/named_acl.c                                                                            |    4
 b/main/options.c                                                                              |    4
 b/main/pbx.c                                                                                  |   21
 b/main/pickup.c                                                                               |    2
 b/main/presencestate.c                                                                        |    2
 b/main/rtp_engine.c                                                                           |   14
 b/main/sorcery.c                                                                              |   21
 b/main/stasis.c                                                                               |  190
 b/main/stasis_cache.c                                                                         |  101
 b/main/stasis_cache_pattern.c                                                                 |   18
 b/main/stasis_channels.c                                                                      |    9
 b/main/stasis_endpoints.c                                                                     |   12
 b/main/stasis_message.c                                                                       |   32
 b/main/stasis_message_router.c                                                                |   18
 b/main/taskprocessor.c                                                                        |   98
 b/main/threadpool.c                                                                           |   69
 b/main/utils.c                                                                                |    8
 b/main/xmldoc.c                                                                               |    8
 b/menuselect/Makefile                                                                         |    4
 b/menuselect/configure                                                                        |  175
 b/menuselect/configure.ac                                                                     |   13
 b/menuselect/makeopts.in                                                                      |    1
 b/menuselect/menuselect_curses.c                                                              |    8
 b/pbx/dundi-parser.c                                                                          |   12
 b/pbx/pbx_config.c                                                                            |   48
 b/pbx/pbx_dundi.c                                                                             |  101
 b/pbx/pbx_realtime.c                                                                          |    4
 b/res/ari/ari_model_validators.h                                                              |    9
 b/res/ari/resource_bridges.c                                                                  |    1
 b/res/ari/resource_channels.c                                                                 |   16
 b/res/ari/resource_events.c                                                                   |    5
 b/res/parking/parking_applications.c                                                          |    8
 b/res/parking/parking_bridge_features.c                                                       |    3
 b/res/parking/parking_manager.c                                                               |    2
 b/res/res.xml                                                                                 |    1
 b/res/res_calendar.c                                                                          |   11
 b/res/res_clialiases.c                                                                        |    4
 b/res/res_config_ldap.c                                                                       |    4
 b/res/res_config_odbc.c                                                                       |    6
 b/res/res_config_sqlite3.c                                                                    |    8
 b/res/res_corosync.c                                                                          |    3
 b/res/res_fax.c                                                                               |    9
 b/res/res_hep_rtcp.c                                                                          |    3
 b/res/res_http_websocket.c                                                                    |    3
 b/res/res_musiconhold.c                                                                       |   29
 b/res/res_odbc.c                                                                              |   33
 b/res/res_parking.c                                                                           |    4
 b/res/res_phoneprov.c                                                                         |   12
 b/res/res_pjproject.c                                                                         |  186
 b/res/res_pjproject.exports.in                                                                |    2
 b/res/res_pjsip.c                                                                             |   69
 b/res/res_pjsip/config_domain_aliases.c                                                       |    5
 b/res/res_pjsip/config_global.c                                                               |   21
 b/res/res_pjsip/config_system.c                                                               |    4
 b/res/res_pjsip/config_transport.c                                                            |    6
 b/res/res_pjsip/location.c                                                                    |   68
 b/res/res_pjsip/pjsip_configuration.c                                                         |   21
 b/res/res_pjsip/pjsip_distributor.c                                                           |   33
 b/res/res_pjsip/pjsip_resolver.c                                                              |    4
 b/res/res_pjsip/pjsip_transport_management.c                                                  |   36
 b/res/res_pjsip_caller_id.c                                                                   |   41
 b/res/res_pjsip_endpoint_identifier_ip.c                                                      |  156
 b/res/res_pjsip_exten_state.c                                                                 |    4
 b/res/res_pjsip_logger.c                                                                      |   14
 b/res/res_pjsip_messaging.c                                                                   |    2
 b/res/res_pjsip_mwi.c                                                                         |   12
 b/res/res_pjsip_nat.c                                                                         |   74
 b/res/res_pjsip_notify.c                                                                      |   40
 b/res/res_pjsip_outbound_authenticator_digest.c                                               |    4
 b/res/res_pjsip_outbound_publish.c                                                            |   14
 b/res/res_pjsip_outbound_registration.c                                                       |    6
 b/res/res_pjsip_publish_asterisk.c                                                            |    6
 b/res/res_pjsip_pubsub.c                                                                      |   11
 b/res/res_pjsip_refer.c                                                                       |    4
 b/res/res_pjsip_registrar.c                                                                   |  149
 b/res/res_pjsip_sdp_rtp.c                                                                     |    8
 b/res/res_pjsip_session.c                                                                     |   57
 b/res/res_pjsip_t38.c                                                                         |    9
 b/res/res_pjsip_transport_websocket.c                                                         |   25
 b/res/res_remb_modifier.c                                                                     |  225
 b/res/res_resolver_unbound.c                                                                  |   61
 b/res/res_rtp_asterisk.c                                                                      |  201
 b/res/res_security_log.c                                                                      |    2
 b/res/res_smdi.c                                                                              |   99
 b/res/res_sorcery_memory.c                                                                    |    3
 b/res/res_sorcery_memory_cache.c                                                              |    7
 b/res/res_sorcery_realtime.c                                                                  |    3
 b/res/res_srtp.c                                                                              |   11
 b/res/res_stasis.c                                                                            |   96
 b/res/res_stasis_device_state.c                                                               |   10
 b/res/res_stasis_playback.c                                                                   |    8
 b/res/res_stasis_recording.c                                                                  |    8
 b/res/res_stasis_test.c                                                                       |   19
 b/res/res_statsd.c                                                                            |   56
 b/res/res_timing_pthread.c                                                                    |    5
 b/res/res_xmpp.c                                                                              |   28
 b/rest-api-templates/ari_model_validators.h.mustache                                          |    9
 b/tests/CI/buildAsterisk.sh                                                                   |   58
 b/tests/CI/gates.jenkinsfile                                                                  |   19
 b/tests/CI/periodics-daily.jenkinsfile                                                        |   18
 b/tests/CI/processCoverage.sh                                                                 |   45
 b/tests/CI/publishAsteriskDocs.sh                                                             |    4
 b/tests/CI/ref_debug.jenkinsfile                                                              |   18
 b/tests/CI/runTestsuite.sh                                                                    |    7
 b/tests/CI/runUnittests.sh                                                                    |   95
 b/tests/CI/unittests.jenkinsfile                                                              |   18
 b/tests/Makefile                                                                              |    1
 b/tests/test_ari.c                                                                            |    1
 b/tests/test_ari_model.c                                                                      |    8
 b/tests/test_astobj2.c                                                                        |   11
 b/tests/test_astobj2_thrash.c                                                                 |    4
 b/tests/test_astobj2_weaken.c                                                                 |  158
 b/tests/test_cel.c                                                                            |   16
 b/tests/test_config.c                                                                         |    9
 b/tests/test_endpoints.c                                                                      |    1
 b/tests/test_json.c                                                                           |    1
 b/tests/test_optional_api.c                                                                   |    1
 b/tests/test_pbx.c                                                                            |   44
 b/tests/test_res_pjsip_scheduler.c                                                            |   39
 b/tests/test_res_stasis.c                                                                     |    1
 b/tests/test_scoped_lock.c                                                                    |    6
 b/tests/test_stasis.c                                                                         |    1
 b/tests/test_stasis_channels.c                                                                |    1
 b/tests/test_stasis_endpoints.c                                                               |    1
 b/tests/test_taskprocessor.c                                                                  |   28
 b/tests/test_threadpool.c                                                                     |  154
 b/third-party/jansson/configure.m4                                                            |   20
 b/third-party/jansson/jansson-2.12.tar.bz2.md5                                                |    1
 b/third-party/jansson/patches/README                                                          |   10
 b/third-party/pjproject/Makefile                                                              |    7
 b/third-party/pjproject/Makefile.rules                                                        |    3
 b/third-party/pjproject/configure.m4                                                          |    3
 b/third-party/pjproject/patches/0000-configure-ssl-library-path.patch                         |   47
 b/third-party/pjproject/patches/0000-remove-third-party.patch                                 |   24
 b/third-party/pjproject/patches/0000-set_apps_initial_log_level.patch                         |    8
 b/third-party/pjproject/patches/0000-solaris.patch                                            |  135
 b/third-party/pjproject/pjproject-2.8.tar.bz2.md5                                             |    2
 b/third-party/versions.mak                                                                    |    4
 b/utils/Makefile                                                                              |    3
 b/utils/ael_main.c                                                                            |   11
 b/utils/astdb2sqlite3.c                                                                       |    6
 b/utils/check_expr.c                                                                          |   13
 b/utils/conf2ael.c                                                                            |   11
 b/utils/extconf.c                                                                             |   50
 third-party/jansson/jansson-2.11.tar.bz2.md5                                                  |    1
 third-party/jansson/patches/0001-Improve-test-coverage.patch                                  |  128
 third-party/jansson/patches/0017-Fix-error-handling-in-json_pack.patch                        |  103
 third-party/pjproject/patches/0021-sip_parser-Fix-return-code-in-pjsip_find_msg-and-add.patch |   41
 third-party/pjproject/patches/0030-sip_transport-Destroy-transports-not-in-hash.patch         |   27
 third-party/pjproject/patches/0040-183_without_to_tag.patch                                   |   17
 third-party/pjproject/patches/0050-dont_terminate_session_early.patch                         |   71
 third-party/pjproject/patches/0060-sip_msg-Prevent-crash-on-header-without-vptr.patch         |   56
 third-party/pjproject/patches/0070-os_core_unix-Set-mutex-NULL-in-atomic-destroy-and-ad.patch |  114
 third-party/pjproject/patches/0080-timer-Clean-up-usage-of-timer-heap.patch                   |  434
 third-party/pjproject/patches/0090-sip_transaction-In-tsx_timer_callback-check-if-tsx-i.patch |   31
 third-party/pjproject/patches/0100-sip_inv-Add-option-to-accept-updated-SDP-on-same-To-.patch |  215
 third-party/pjproject/pjproject-2.7.2.tar.bz2.md5                                             |    2
 287 files changed, 11858 insertions(+), 12436 deletions(-)
